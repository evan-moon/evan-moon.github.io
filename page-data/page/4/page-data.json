{"componentChunkName":"component---src-templates-posts-page-template-tsx","path":"/page/4/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"94d3d6f9-9057-528e-9d59-7fced49d84c6","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%9D%84-%EC%99%9C-%EC%95%8C%EC%95%84%EC%95%BC%ED%95%98%EB%82%98%EC%9A%94\">함수형 프로그래밍을 왜 알아야하나요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%86%92%EC%9D%80-%EC%88%98%EC%A4%80%EC%9D%98-%EC%B6%94%EC%83%81%ED%99%94\">높은 수준의 추상화</a></p>\n<ul>\n<li><a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EC%9D%98-%EC%A0%95%ED%99%95%ED%95%9C-%EA%B0%9C%EB%85%90\">추상화의 정확한 개념</a></li>\n<li><a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EC%9D%98-%EC%88%98%EC%A4%80%EC%9D%B4-%EB%86%92%EC%9C%BC%EB%A9%B4-%EC%A2%8B%EC%9D%80-%EA%B1%B4%EA%B0%80%EC%9A%94\">추상화의 수준이 높으면 좋은 건가요?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AA%85%EB%A0%B9%ED%98%95%EA%B3%BC-%EC%84%A0%EC%96%B8%ED%98%95%EC%9D%80-%EC%82%AC%EA%B3%A0-%EB%B0%A9%EC%8B%9D%EC%9D%B4-%EB%8B%A4%EB%A5%B4%EB%8B%A4\">명령형과 선언형은 사고 방식이 다르다</a></p>\n<ul>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%AC%B8%EC%A0%9C%EB%A5%BC-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C-%EB%AA%85%EB%A0%B9%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\">어떻게 문제를 해결할까? (명령형 프로그래밍)</a></li>\n<li><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%84-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C-%EC%84%A0%EC%96%B8%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\">무엇을 해결할까? (선언형 프로그래밍)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EA%B3%BC-%ED%95%A8%EC%88%98%EB%A1%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\">객체로 이루어진 프로그램과 함수로 이루어진 프로그램</a></p>\n<ul>\n<li><a href=\"#%EB%8D%94-%EC%9E%91%EA%B2%8C-%EC%AA%BC%EA%B0%9C%EC%96%B4-%EC%83%9D%EA%B0%81%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\">더 작게 쪼개어 생각할 수 있다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"최근 많은 언어들이 함수형 프로그래밍 패러다임을 도입하며, 이에 대한 개발자들의 관심 또한 나날히 높아지고 있다. 필자 또한 라는 책을 읽으면서 기존의 패러다임과 사뭇 다른 함수형 프로그래밍에 대해 많은 관심을 가지게 되었던 기억이 있다. 물론 이 책을 읽었다고 해서 함수형 프로그래밍을 자유롭게 할 수 있는 것은 아니다. 함수형 프로그래밍에서 사용하는 커링, 모나드, 고계 함수와 같은 개념와 기법들은 열심히 공부해서 이해하고 많이 써보면 금방 익숙해질 수 있는 것들이지만, 앞서 이야기했듯이 어떤 패러다임을 사용하여 프로그램을 제대…","html":"<p>최근 많은 언어들이 함수형 프로그래밍 패러다임을 도입하며, 이에 대한 개발자들의 관심 또한 나날히 높아지고 있다. 필자 또한 <code class=\"language-text\">함수형 사고</code>라는 책을 읽으면서 기존의 패러다임과 사뭇 다른 함수형 프로그래밍에 대해 많은 관심을 가지게 되었던 기억이 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9ef259e7b6e3fe6fc92d5652c070314f/9568a/functional_thinking_book.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQH/xAAXAQEBAQEAAAAAAAAAAAAAAAACAwAB/9oADAMBAAIQAxAAAAHkc9c1laBTxLxzVQj/AP/EABsQAAMBAQADAAAAAAAAAAAAAAECAwASERMx/9oACAEBAAEFAoy5l9PqOdj46bF1TRqUAu2ZiW//xAAXEQADAQAAAAAAAAAAAAAAAAABERIg/9oACAEDAQE/AZYx/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQIBAT8BI//EABoQAAMAAwEAAAAAAAAAAAAAAAABESExQRD/2gAIAQEABj8CzslfmH0RHsiODbP/xAAbEAEBAQEBAAMAAAAAAAAAAAABEQAhMUFxof/aAAgBAQABPyEEb6Fmh+odfya7aPw+sAoVTzTZ8dmTwlvck8z2QXf/2gAMAwEAAgADAAAAECcHvv/EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhYf/aAAgBAwEBPxAehmexr//EABgRAQEAAwAAAAAAAAAAAAAAAAEAESFh/9oACAECAQE/ECu7HIi//8QAHhABAAIBBAMAAAAAAAAAAAAAAQARMSFBUXFhgdH/2gAIAQEAAT8QE0rAUs0PUXEfEswU2bzLgQVuuykrJwWK36iBgAgaDCtaxHjuGWu/D9iNZDP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"functional thinking book\" title=\"\" src=\"/static/9ef259e7b6e3fe6fc92d5652c070314f/c08c5/functional_thinking_book.jpg\" srcset=\"/static/9ef259e7b6e3fe6fc92d5652c070314f/0913d/functional_thinking_book.jpg 160w,\n/static/9ef259e7b6e3fe6fc92d5652c070314f/cb69c/functional_thinking_book.jpg 320w,\n/static/9ef259e7b6e3fe6fc92d5652c070314f/c08c5/functional_thinking_book.jpg 640w,\n/static/9ef259e7b6e3fe6fc92d5652c070314f/6a068/functional_thinking_book.jpg 960w,\n/static/9ef259e7b6e3fe6fc92d5652c070314f/eea4a/functional_thinking_book.jpg 1280w,\n/static/9ef259e7b6e3fe6fc92d5652c070314f/9568a/functional_thinking_book.jpg 3024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>재밌어서 여러 번 읽고 있는 귀여운 다람쥐 책</small>\n</center>\n<p>물론 이 책을 읽었다고 해서 함수형 프로그래밍을 자유롭게 할 수 있는 것은 아니다. 함수형 프로그래밍에서 사용하는 커링, 모나드, 고계 함수와 같은 개념와 기법들은 열심히 공부해서 이해하고 많이 써보면 금방 익숙해질 수 있는 것들이지만, 앞서 이야기했듯이 어떤 패러다임을 사용하여 프로그램을 제대로 설계하기 위해서는 말 그대로 사고 방식 자체를 바꿔야하기 때문이다.</p>\n<p>그런 이유로 이번 포스팅에서는 함수형 프로그래밍의 스킬들보다는 함수형 프로그래밍이 왜 이렇게 각광받는지, 또 이 패러다임이 어떤 개념들을 사용하여 프로그램을 바라보고 있는지에 대한 이야기를 해보려고 한다.</p>\n<h2 id=\"함수형-프로그래밍을-왜-알아야하나요\" style=\"position:relative;\">함수형 프로그래밍을 왜 알아야하나요?<a href=\"#%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%9D%84-%EC%99%9C-%EC%95%8C%EC%95%84%EC%95%BC%ED%95%98%EB%82%98%EC%9A%94\" aria-label=\"함수형 프로그래밍을 왜 알아야하나요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 객체지향적 사고와 명령형 프로그래밍을 사용하기만 해도 왠만한 프로그램을 설계하고 작성하는 데는 무리가 없다. 우리는 이미 몇십 년간 이러한 사고방식으로 거대한 프로그램을 만들어왔지 않은가?</p>\n<p>그러나 함수형 프로그래밍이 이렇게 주목받는 이유는 분명 기존의 그것들과는 분명한 차이가 있기 때문이고, 그 차이로 인해 개발자들이 조금 더 생산성있는 프로그래밍을 할 수 있기 때문일 것이다.</p>\n<p>그렇다면 도대체 함수형 프로그래밍의 어떤 점이 개발자들의 마음을 움직였던 것일까?</p>\n<p>뭐 개발자마다 각자 다른 이유들을 가지고 있겠지만, 일단 필자가 느꼈던 함수형 프로그래밍의 대표적인 장점은 바로 이런 것들이다.</p>\n<blockquote>\n<ol>\n<li>높은 수준의 추상화를 제공한다</li>\n<li>함수 단위의 코드 재사용이 수월하다</li>\n<li>불변성을 지향하기 때문에 프로그램의 동작을 예측하기 쉬워진다</li>\n</ol>\n</blockquote>\n<p>아마 함수형 프로그래밍에 대해 설명하는 다른 블로그 포스팅이나 책들을 봐도 비슷한 점을 함수형 프로그래밍의 장점으로 이야기하고 있을 것이다.</p>\n<p>이 장점들 중에서 불변성에 대한 것은 함수형 프로그래밍 자체의 장점이라기보다는 <code class=\"language-text\">순수 함수(Pure Functions)</code>를 사용함으로써 자연스럽게 따라오는 장점에 가깝기 때문에, 여기에 대한 이야기는 추후 순수 함수에 대한 설명을 할 때 다시 이야기하도록 하고, 이번 포스팅에서는 <code class=\"language-text\">높은 수준의 추상화</code>와 <code class=\"language-text\">함수 단위의 재사용</code>라는 키워드에 대해 초점을 맞춰서 이야기해보려고 한다.</p>\n<h2 id=\"높은-수준의-추상화\" style=\"position:relative;\">높은 수준의 추상화<a href=\"#%EB%86%92%EC%9D%80-%EC%88%98%EC%A4%80%EC%9D%98-%EC%B6%94%EC%83%81%ED%99%94\" aria-label=\"높은 수준의 추상화 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>기본적으로 함수형 프로그래밍은 <code class=\"language-text\">선언형 프로그래밍</code>의 특성을 함수들의 조합을 사용하여 구현하는 패러다임이고, 선언형 프로그래밍의 대표적인 장점 중 하나가 바로 명령형 프로그래밍이나 객체지향 프로그래밍에서 사용하는 방법들보다 높은 수준의 추상화를 통해 개발자가 문제 해결에만 집중할 수 있게 해준다는 점이다.</p>\n<p>선언형 프로그래밍이 제공한다는 높은 수준의 추상화라는 것이 정확히 무엇을 의미하는 것이고 어떤 장단점이 있는지 이해하기 위해 먼저 <code class=\"language-text\">추상화</code>에 대한 개념적인 정리가 먼저 필요할 것 같다.</p>\n<h3 id=\"추상화의-정확한-개념\" style=\"position:relative;\">추상화의 정확한 개념<a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EC%9D%98-%EC%A0%95%ED%99%95%ED%95%9C-%EA%B0%9C%EB%85%90\" aria-label=\"추상화의 정확한 개념 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>아마 객체지향 프로그래밍을 알고 있는 분들이라면 추상화가 현실에 존재하는 무언가의 특징을 뽑아내어 정리하는 행위라고 이야기할지도 모르겠다. 뭐 이것도 틀린 말은 아니고, 객체지향 프로그래밍을 처음 공부할 때는 이렇게 이해하는 것이 더 편하기도 하다.</p>\n<p>하지만 사실 추상화라는 단어의 근본적인 의미는 단순히 객체의 특징을 정리하여 클래스를 정의하는 것보다 훨씬 넓은 범위의 개념이다.</p>\n<p>추상화의 근본적인 의미는 어떤 작업을 수행할 때 그 이면에 존재하는 복잡한 것들을 간단한 것처럼 보이게 만들어주는 것들에 가깝다. 객체지향 프로그래밍에서 객체를 추상화하여 클래스를 정의하는 행위 또한 근본적으로는 이 정의에 부합한다.</p>\n<p>자, 이름을 가지고 있고 자신의 이름을 말할 수 있는 사람을 추상화한 <code class=\"language-text\">Human</code> 클래스를 사용하여 객체를 생성하고 메소드를 사용한다고 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Human</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, I am </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> me <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Evan'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>me<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Hello, I am Evan.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>여기서 중요한 사실이 하나 있다. 대부분의 경우 우리가 직접 클래스도 만들고 객체도 만들기 때문에 쉽게 지나치는 사실이지만, 사실 <code class=\"language-text\">Human</code> 클래스가 어떻게 구현되었는지 전혀 모르는 상태라도 이 클래스를 사용하여 객체를 생성하고 메소드를 사용하는데는 아무 문제가 없다는 것이다.</p>\n<p>그냥 이 클래스가 외부로 노출하는 기능이 무엇인지만 알고 있으면 객체를 생성하고 메소드를 호출하여 원하는 동작을 이끌어낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">constructor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Human<span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">say</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>객체지향 프로그래밍에서는 사용자에게 높은 수준의 추상화를 제공하기 위해 <code class=\"language-text\">public</code>, <code class=\"language-text\">private</code>과 같은 접근 제한자를 사용하여 클래스 외부로 노출시키고 싶은 것만 노출시키는 캡슐화라는 기법을 사용한다.</p>\n<p>또한 클래스 외에 일반적으로 우리가 사용하는 라이브러리들도 일종의 추상화된 모듈이라고 할 수 있다.</p>\n<p>만약 우리가 <code class=\"language-text\">React</code>나 <code class=\"language-text\">RxJS</code>와 같은 라이브러리를 사용할 때 해당 라이브러리의 구현체를 전부 파악해야만 사용할 수 있다면 굉장히 힘들것이다. 그러나 우리는 라이브러리의 구현 소스를 일일히 파악하지 않더라도 공식 문서를 통해 기능을 파악하기만 한다면 일단 사용하는 데는 별 지장이 없다. <small><strike>(잘 쓰려면 봐야한다는 게 함정)</strike></small></p>\n<p>그리고 우리가 프로그램을 작성할 때 유용하게 사용하고 있는 OS API나 브라우저 API와 같은 API들도 일종의 추상화된 기능 리스트이다. 이런 추상화된 기능 리스트가 있기에 우리는 어떤 API가 어떤 동작을 하는 지만 알고 있다면, 로우 레벨의 동작을 직접 다루지 않더라도 컴퓨터에게 편하게 명령을 내릴 수 있는 것이다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d9fa4d13c36832f6cdcfb84a4637551c/37523/abstraction.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOElEQVR42q3PXWgTWRQH8OsXorARNQEf3AcxWvBNir5pcAvqUlvjJ21Nqijqrk8u+iZSQdBVsBUEl+2DrtraSVPqR5tQ20lMWtu0ySSdTCbz0Ta1aTOp6ColutZA4tmTYSuzaSoVvPCbc+89/3u5Q0jhseC/WoQOoq3oGFqX1//msQytMRqN67Ea0BLyHcaCkpKSzcXFxfO87NChRXMymRbnLty2c+ePxt27l5KamoVfzc/ndbnPPpNp7an5vlBfWrlBb7ZuLGR1+ZEinanMuGbLtu2rfirfpN9/bM6socxiVP/IsO8o6PdapvV7rWktA1pZdiRttPyS3vHbhfS6qlPq2pCXU5mtnwxm62fDfusussJcDbrSyoxuTyVorSirguU/H4ai6jNgvngF1ltOq+vcfn5Wt6ciqyu3wA+lFeXkxLU/7XM5jqou37IfvnTTbsH6tezJ6/VUTX3rRnLr6Quoa6GzdS0u0Lphp6G+/QU8pBn4q6MfHnT64fZjL9Tifn62tsWV+cPhg3ttfWfJ1QZH+vdG59TVRmdK60qDI1XX3JW6296Tqn/qTd3BWmvrVPcLZKeuPezI3HcO/ErsdNDXTDN9+SjU0OHvu+/0oX5Vbk11zs7aupjeFjrE+HyxA+TRgAw2D5u1ecMwo8nDQptPBA87Cq7QCNAoN/eER6G1lwcK+9o85WUzbUwMHL3iOdLY6X+NEo1dfmVGA7K5GOVJd1h55A0rrR4WDSpPcE7RAbWvzeP5iSaaedvREz1O3AGZd/nlMOK06AGJe+aLcnS/oM5pPxoQuPxcjjswxOI9cpAdryCB0TfQzY9le6Jx+EIYBy83Cu2eADi6g+DwBqHN7QdnTwi6Iy/hf1mE5zOh+DtgxMQ54maGRDcjR54zMj9LQOLdfpGn+5GPxyrgvjQr5w7KnJcZGmZC41UkIiXjvJQcQTGtiKjEBvl4jI2OqyJiIsYJiVh+Ts1KyWFeTiqCkKwmb/8BmHj9MZt4Mw0zlL8/QXzyPQQGh4FhEdYgOwKD/BjEX31Q+9o8ns9MTQOMJT6cJ1FpsjkqvWrixSRVCCcoFCcqVFiYUOeFMlEp2ZS7h5cnt/4L+y9SOB3xvXcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"abstraction\" title=\"\" src=\"/static/d9fa4d13c36832f6cdcfb84a4637551c/6af66/abstraction.png\" srcset=\"/static/d9fa4d13c36832f6cdcfb84a4637551c/69538/abstraction.png 160w,\n/static/d9fa4d13c36832f6cdcfb84a4637551c/72799/abstraction.png 320w,\n/static/d9fa4d13c36832f6cdcfb84a4637551c/6af66/abstraction.png 640w,\n/static/d9fa4d13c36832f6cdcfb84a4637551c/37523/abstraction.png 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>추상화된 OS API만 안다면 하드웨어 구조를 모르더라도 프로그램을 만들 수 있다</small>\n  <br>\n  <br>\n</center>\n<p>만약 개발자가 아닌 분이라면 여러분이 평소에 사용하는 일반적인 프로그램을 생각해보면 된다.</p>\n<p>예를 들어 여러분이 포토샵을 사용하여 컬러 사진을 흑백 사진으로 변경한다고 생각해보자. 포토샵은 이미지 프로세싱이라는 복잡한 연산을 수행하는 프로그램이지만, 우리는 포토샵이 제공하는 여러가지 기능들을 사용하여 <code class=\"language-text\">사진 보정</code>이라는 행위에만 집중할 수 있다.</p>\n<p>실제로 컬러 사진을 흑백 사진으로 변경할 때는 행렬로 이루어진 사진의 픽셀 데이터를 순회하며 RGB 값의 평균을 내거나하는 등의 과정을 수행해야한다. 하지만 그런 복잡하고 귀찮은 과정이 추상화되어있기 때문에 사용자는 그저 포토샵이 외부로 노출해준 기능인 <code class=\"language-text\">Image > Adjustments > Desaturate</code>을 사용하면 되는 것이다.</p>\n<p>즉, <code class=\"language-text\">추상화</code>란 복잡한 무언가에서 핵심적인 개념이나 기능을 간추려내어 단순하게 만드는 것을 의미하며, 추상화가 잘 되어있는 프로그램을 사용하는 사용자는 자신과 맞닿은 추상 계층 밑에 무엇이 있고 어떻게 작동하는지 모르더라도 해당 기능을 편하게 사용할 수 있다.</p>\n<h3 id=\"추상화의-수준이-높으면-좋은-건가요\" style=\"position:relative;\">추상화의 수준이 높으면 좋은 건가요?<a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EC%9D%98-%EC%88%98%EC%A4%80%EC%9D%B4-%EB%86%92%EC%9C%BC%EB%A9%B4-%EC%A2%8B%EC%9D%80-%EA%B1%B4%EA%B0%80%EC%9A%94\" aria-label=\"추상화의 수준이 높으면 좋은 건가요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>방금 알아본 바와 같이 추상화란, 복잡한 무언가를 단순해보이도록 만들어주는 행위를 의미한다. 즉, 추상화의 수준이 높다는 것은 복잡한 것을 단순해보이도록 만드는 행위 자체의 수준이 높아졌다는 것을 의미하는 것이다.</p>\n<p>그런 의미에서 보면 확실히 추상화의 수준이 높을 수록 사용자가 편하긴 하다. 이 <code class=\"language-text\">편하다</code>는 의미가 잘 감이 안오시는 분들을 위해 더 쉽게 이야기해보면, 우리가 사용하는 프로그래밍 언어를 예시로 들어볼 수 있겠다.</p>\n<p>우리는 프로그램을 만들 때 <code class=\"language-text\">0</code>과 <code class=\"language-text\">1</code>로 이루어진 기계어를 사용할 수도 있고, 어셈블리를 사용할 수도, 자연어에 가까운 고급 언어인 자바를 사용할 수도 있다.</p>\n<p>만약 길가는 개발자를 붙잡고 “기계어로 코딩할래? 어셈블리로 코딩할래?”라고 묻는다면 기계어로 코딩하고 싶다는 변태는 거의 없을 것이다. 기계어는 거의 추상화되지 않은 날 것이나 마찬가지이기 때문에 사람이 이해하기 너무 어렵기 때문이다.</p>\n<p>또한 “어셈블리로 코딩할래? 자바로 코딩할래?”라고 물어본다면 어셈블리라고 대답하는 변태 또한 그렇게 많지 않을 것이다. 이 경우에는 어셈블리가 자바에 비해 추상화 수준이 매우 낮기 때문에, 자바로 코딩하는 것이 사람에게는 더 편한 것이다. 이게 바로 대표적인 추상화 수준의 차이이다.</p>\n<p>어셈블리로 거대한 프로그램을 작성하게 되면 개발자가 신경써줘야하는 것이 너무나도 많지만, 자바를 사용하면 <code class=\"language-text\">for</code>, <code class=\"language-text\">if</code> 등의 문법과 다양한 API를 사용하고 조합하여 프로그램을 작성함으로써 어셈블리보다 좀 더 편하게 프로그래밍 할 수 있다. 메모리에 값을 할당하고 레지스터로 모았다가 다시 빼내고하는 잡다한 일은 <code class=\"language-text\">JRE(Java Runtime)</code>가 다 알아서 해줄 것이기 때문이다.</p>\n<p>이렇게 예전의 기술보다 높은 수준의 추상화를 제공하며 사용자에게 편의를 안겨주는 경우는 함수형 프로그래밍이 처음이 아니고, 오히려 컴퓨터 공학 역사에서 굉장히 빈번하게 발생되었던 일이다. 이렇게 기술이 발전하며 추상화 수준을 높혀감으로써 점점 더 복잡한 프로그램을 만들 수 있게 되는 것이다.</p>\n<p>그러나 추상화의 수준이 높다는 것이 장점만 있는 것은 아니다. 이런 높은 추상화를 장점으로 내세우는 기술이 발표되면 높은 확률로 “성능이 안 좋다”, “이렇게 추상화해버리면 최적화는 어떻게 하냐”와 같은 논란에 휩싸이게 되는데, 이런 논란에 휩쓸렸던 대표적인 친구들이 바로 <code class=\"language-text\">자바</code>나 <code class=\"language-text\">가비지 컬렉터</code>이다. <small>(그리고 어셈블리가 있다…)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 490px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/80458efa897102920b95181e9337ff64/41d3c/von_neumann.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 130.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAElUlEQVR42i2UWSyeWxSGv0NKDX9pY55V1VzzUDUrLS1qlqJBBQklhqopjTGEqKHEXI2QiLlucEUI0gukKgTpkVAhgkQi4krO8/vPd7Gzs7/97vWud71rCdbW1g8fPjQxMXFwcHBycvL29vb39w8KCoqPj09MTHz79m10dPSbN2+eP3/+9OlTyR0+d3f3gIAAwdDQUENDw8DAwMLCwsXFxc/Pj9OQkJCkpKTs7Oz09HSeCA8PB/zs2TNHR0dXV1c3NzdPT8+XL18KqqqqsrKyKioq4O3t7bn06tWryMjIjIyMzMzMhISEmJiYuLi4sLAwCR4YG2KIwQ8ePJCRkZGXl1dWVjY3N/fy8iIymJycHEtLS2dnZ/bctrGx4TYZsff19ZUQFMD8c/tJSUlpa2vzmzw/f/5cWFiYnJw8Ojr69+/frq6u+/fvk2BwcDBgdAEfGBgo3Lt3TxAEwKwwJ71Pnz719va2tLTMzc3t7OycnZ1dXFyQPxfQDPF8fHwkov4PJiyrra1tdXX14ODg2NjY2tra/v7+8fHx5eXlzc3Nr1+/UBSaoaGhyPn69WtUEBQUFIDduXOHlSeXlpbm5+cBHx4eQvjo6Oj6+vrq6ur8/DwqKgqCSEA6KEoJBTk5OWCKiopKSkqksb6+Pjk52dnZ+fv37z9//vx7++3t7fEQGKQtKioqKCigkLGxseLI0tLSFExHRwdKXBoYGGhoaIDn5uYmyIODg93d3e3tbfTX09Orq6srKyvLz89PS0sTCEgmjx8/trKyghLR2tvbkQ3BpqenGxsbCUKd+/v7W1tbEYy1qqoKUfPy8gRdXV0jIyO8Rd3ev38/MTGBMT08PCSADx8+UBuCoMKPHz8wXHNzM6J+/PgxNzdXQEOM9eLFi3fv3vHYysrKly9furu729raxsfHyXZjYwPaJycnQ0NDPDEyMlJRUQEY/wm4HMchXVZWFqc/f/6Edl9fH5qR9tbWFitCLC4u4pyvX79+//69tLSUsotzxuh4DZLo8e3bN+LMzs729PSwJ3h5eTlv4RbCwnN4eJhDCJIgEIEWob9oA55EJGCrq6uoXVNTAxHsifgo1NHRgXIlJSWETU1NpS7ixrCzs4MPrqLdMLCZmRn3oMch9SA3GPEKKy4gRzoHb2FvgMLCwsLU1JS6ujpWEYlE1IxL9AYkERaFuYAf0JmuAMzY4ALBMbmAMAwDicloT3qD4KampikpKeiPmahccXExmdNz9DOlhjNpV1ZWiqNJvE1L4zMJmEOctLy8zCEvnp6ekqqamhpzgrBki53QUmwSkAwT4rMHzAoGhihH32J+hKyvrycsVHEECZM2dASmh6amJjF5mGGI29ijHM8h0szMDP5tamqqra0FTDOSC/3IHvMJGJM0IiIijI2NmTVEZp7x0JMnT2h3eGppaaE8daKonEiGKb5ktgnswOA1xIQPBaMGTC/JrKSBoUaeVIG/3KGT8RUxiCpQBmISgfJAQTLl0IwOBUwDIxjThrblUV6EM8MMIWAn0EAMfWoDHpH4ARKq9LlkpRYgWZFGX1//0aNHd28/kUj0Hzx0J4PMGZytAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"von neumann\" title=\"\" src=\"/static/80458efa897102920b95181e9337ff64/41d3c/von_neumann.png\" srcset=\"/static/80458efa897102920b95181e9337ff64/69538/von_neumann.png 160w,\n/static/80458efa897102920b95181e9337ff64/72799/von_neumann.png 320w,\n/static/80458efa897102920b95181e9337ff64/41d3c/von_neumann.png 490w\" sizes=\"(max-width: 490px) 100vw, 490px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    존 폰 노이만 (1903 ~ 1957)<br>\n    괜히 어셈블리 같은 걸 만들어서 컴퓨터 성능 낭비하지 말라고 하신 분\n  </small>\n</center>\n<p>자바의 경우에는 바이트 코드와 <code class=\"language-text\">JVM(Java Virtual Machine)</code>이라는 개념을 사용하여 한번만 코드를 작성해도 모든 OS에서 동작하는 프로그램을 작성할 수 있다는 점이 굉장한 강점이었다. OS나 CPU에 종속되어있던 기존의 프로그래밍 언어들에 비해 추상화 수준이 높아진 것이다. 그러나 처음 자바가 나왔을 당시에는 C에 비해서 너무 느려서 못 써먹을 물건이라고 상당히 많이 까였다.</p>\n<p>또한 가비지 컬렉터도 개발자가 일일히 메모리를 할당하고 해제하지 않아도 되는 편리함을 제공하지만 GC가 객체의 메모리 해제 시점을 매번 추적하고 있어야하는 성능 문제나, 개발자가 객체가 메모리에서 해제되는 시점을 정확히 알기 어렵다던가, <a href=\"https://ko.wikipedia.org/wiki/%EC%B0%B8%EC%A1%B0_%ED%9A%9F%EC%88%98_%EA%B3%84%EC%82%B0_%EB%B0%A9%EC%8B%9D\" target=\"_blank\" rel=\"nofollow\">참조 횟수 계산 방식</a>을 사용할 때 순환 참조 객체를 해제하지 못하는 등 문제들이 여전히 존재하기 때문에 늘 완벽하게 동작하지는 않는다.</p>\n<p>하지만 그렇다고 자바나 가비지 컬렉터나 자바를 사용할 수 있는 환경에서 굳이 C를 사용하고 수동으로 메모리를 관리하고 싶어하는 사람이 많지는 않을 것이다. 애초에 이런 높은 수준의 추상화를 제공하는 기술이 가지는 성능 상의 단점을 머신이 어느 정도 커버할 수 있기 때문에 사람들이 많이 사용하는 것이기도 하다.</p>\n<p>함수형 프로그래밍도 높은 수준의 추상화를 지향하는 패러다임인 만큼 어느 정도 성능 면에서 불리한 점이 있긴 하다. 사실 함수 단위로 프로그램을 추상화하는 개념은 1958년에 <a href=\"https://ko.wikipedia.org/wiki/%EB%A6%AC%EC%8A%A4%ED%94%84\" target=\"_blank\" rel=\"nofollow\">LISP</a>가 발표되었을 때부터 시작되었지만, 당시에는 아마 이런 개념이 사치로 느껴졌을 것이다. 메모리가 너무 부족해서 당장 작업 하나 하기도 빡센 데 추상화는 무슨 추상화란 말인가.</p>\n<p>그러나 요즘 머신의 성능은 함수형 프로그래밍이 지향하는 추상화 레벨을 충분히 커버할 수 있을 정도로 예전에 비해 많이 좋아졌기 때문에 성능에 관한 문제는 크게 중요하지 않다고 느껴진다.</p>\n<p>그리고 만약 성능이 진짜 중요한 프로그램을 작성할 때는 굳이 함수형 프로그래밍을 고집하지 않아도 된다. 애초에 이런 패러다임은 어떤 정답이라고 할 게 없기 때문이다. 지금도 최적화를 위해 C나 어셈블리를 사용하는 경우가 있는 것처럼, 함수형 프로그래밍도 상황에 따라 적재적소에 잘 사용하면 된다.</p>\n<p>그럼 함수형 프로그래밍이 제공하는 높은 수준의 추상화가 우리에게 어떤 형태로 나타나는지 알아보기 위해, 기존에 우리에게 익숙한 패러다임인 <code class=\"language-text\">명령형 프로그래밍</code>과 함수형 프로그래밍의 상위 개념인 <code class=\"language-text\">선언형 프로그래밍</code>을 한번 비교해보도록 하자.</p>\n<h2 id=\"명령형과-선언형은-사고-방식이-다르다\" style=\"position:relative;\">명령형과 선언형은 사고 방식이 다르다<a href=\"#%EB%AA%85%EB%A0%B9%ED%98%95%EA%B3%BC-%EC%84%A0%EC%96%B8%ED%98%95%EC%9D%80-%EC%82%AC%EA%B3%A0-%EB%B0%A9%EC%8B%9D%EC%9D%B4-%EB%8B%A4%EB%A5%B4%EB%8B%A4\" aria-label=\"명령형과 선언형은 사고 방식이 다르다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>명령형 프로그래밍은 문제를 <code class=\"language-text\">어떻게 해결해야 하는지</code> 컴퓨터에게 명시적으로 명령을 내리는 방법을 의미하고, 선언형 프로그래밍은 <code class=\"language-text\">무엇을 해결할 것인지</code>에 보다 집중하고 어떻게 문제를 해결하는 지에 대해서는 컴퓨터에게 위임하는 방법을 의미한다.</p>\n<p>처음 프로그래밍이라는 개념이 등장했을 때부터 비교적 최근까지도 우리는 컴퓨터에게 명시적으로 명령을 내리는 방법인 명령형 프로그래밍을 주로 사용해왔지만, 함수형 프로그래밍은 문제를 해결하는 방법에 더 집중하고 사소한 작업은 컴퓨터에게 넘겨버리는 선언형 프로그래밍의 일종이다.</p>\n<p>이처럼 컴퓨터에게 사소한 작업들을 위임해버리는 패러다임의 특성 상, 선언형 프로그래밍에는 필연적으로 <code class=\"language-text\">높은 수준의 추상화</code>라는 키워드가 따라오는 것이다. 추상화 수준이 낮다면 저 사소한 작업들을 개발자가 일일히 다 컨트롤해줘야한다는 이야기니 말이다.</p>\n<p>자, 그럼 명령형 프로그래밍과 선언형 프로그래밍을 사용하여 문제를 해결하는 과정을 비교해보며 이 두 패러다임 간의 추상화 수준의 차이에 대해서 한번 살펴보도록 하자. 우리가 해결해야하는 문제는 바로 이것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'evan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'joel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'mina'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>배열을 순회하며 빈 문자열을 걸러내고, 각 원소의 첫 글자를 대문자로 변경해라.</p>\n</blockquote>\n<h3 id=\"어떻게-문제를-해결할까-명령형-프로그래밍\" style=\"position:relative;\">어떻게 문제를 해결할까? (명령형 프로그래밍)<a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%AC%B8%EC%A0%9C%EB%A5%BC-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C-%EB%AA%85%EB%A0%B9%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\" aria-label=\"어떻게 문제를 해결할까 명령형 프로그래밍 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>명령형 프로그래밍은 말 그대로 컴퓨터에게 <code class=\"language-text\">어떻게 작업을 수행할 지</code>에 대한 자세한 명령을 내리는 것이다. 더 정확히 말하자면, 어떻게 문제를 해결하는지 일일히 명령을 내리면서 내가 원하는 결과를 만들어나가는 방식이라고 할 수 있다.</p>\n<p>사실 오늘날 현업에서 일하고 있는 대부분의 개발자는 처음 프로그래밍을 접할 때 전통적인 패러다임인 명령형 프로그래밍으로 공부를 시작했던 경우가 많기 때문에, 필자를 포함한 많은 개발자들에게 익숙한 방법이라고도 할 수 있다.</p>\n<p>대부분의 개발자는 이런 문제를 만났을 때, <code class=\"language-text\">for</code>문과 같은 반복문을 사용하여 순차적으로 배열의 원소를 탐색하고 작업하는 코드를 떠올릴 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> newArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    newArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">for</code>문을 사용하여 특정 행위를 반복하는 코드를 작성하는 일은 눈 감고도 작성할 수 있을 정도로 개발자들에게 익숙한 로직이지만, 너무 익숙한 나머지 이 짧은 코드 안에도 많은 명령이 들어가 있다는 사실을 간과하고는 한다.</p>\n<p>필자가 위 코드를 작성할 때 필자가 떠올렸던 생각을 대충 정리해보자면 이런 느낌이다.</p>\n<blockquote>\n<ol>\n<li>변수 <code class=\"language-text\">i</code>를 <code class=\"language-text\">0</code>으로 초기화</li>\n<li><code class=\"language-text\">i</code>가 <code class=\"language-text\">arr</code> 배열의 길이보다 작다면 구문을 반복 실행</li>\n<li><code class=\"language-text\">for</code>문 내부의 코드의 실행이 종료될 때마다 <code class=\"language-text\">i</code>에 <code class=\"language-text\">1</code>씩 더함</li>\n<li><code class=\"language-text\">arr</code> 배열의 <code class=\"language-text\">i</code> 번째 원소에 접근</li>\n<li>만약 원소의 길이가 <code class=\"language-text\">0</code>이 아니라면 원소의 첫 번째 글자를 대문자로 변경</li>\n<li>이렇게 합쳐진 문자열을 <code class=\"language-text\">newArr</code> 배열에 삽입</li>\n</ol>\n</blockquote>\n<p>필자가 코드를 작성할 때 생각했던 사고의 흐름은 필자가 컴퓨터에게 내려야하는 명령과 정확하게 매칭된다.</p>\n<p>즉, 필자는 <code class=\"language-text\">i</code>라는 상태를 직접 관리해야하며, 매 루프 때마다 <code class=\"language-text\">i</code>에 1을 더 해가면서 배열의 어느 인덱스까지 탐색했는지도 신경써줘야 하는 상황인 것이다. 게다가 배열의 원소에 접근할 때도 <code class=\"language-text\">i</code>를 사용하여 직접 접근 명령을 내려야하고 이 원소가 빈 문자열인지 아닌지 여부도 검사해줘야한다.</p>\n<p>이렇게 컴퓨터에게 일일히 명령을 내려서 자신이 원하는 결과를 만들어가는 과정을 통해 프로그램을 작성하는 방식을 명령형 프로그래밍이라고 하는 것이다.</p>\n<p>자 이 쯤에서 우리가 해결해야하는 문제를 다시 한번 보자.</p>\n<blockquote>\n<p>배열을 순회하며 빈 문자열을 걸러내고, 각 원소의 첫 글자를 대문자로 변경해라.</p>\n</blockquote>\n<p>저 명령들을 쭉 읽어보고 바로 이 문제를 떠올릴 수 있을까? 물론 이 문제는 굉장히 간단한 문제이기 때문에 바로 알아챌 수도 있겠지만, 이 문제보다 더 복잡한 문제라면 아마 몇 번은 읽어보고 그림도 그려봐야하지 않을까?</p>\n<p>즉, 명령형 프로그래밍은 사람이 생각하는 방식보다 컴퓨터가 생각하는 방식에 가깝기 때문에 그리 인간 친화적인 방식은 아니다. 그렇기 때문에 개발자들은 알고리즘 문제 풀이 등을 통해 이런 방식의 사고를 하는 것을 꾸준히 연습하기도 한다.</p>\n<p>자, 그럼 선언형 프로그래밍으로 같은 일을 수행하는 코드를 작성하면 어떻게 바뀔까?</p>\n<h3 id=\"무엇을-해결할까-선언형-프로그래밍\" style=\"position:relative;\">무엇을 해결할까? (선언형 프로그래밍)<a href=\"#%EB%AC%B4%EC%97%87%EC%9D%84-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C-%EC%84%A0%EC%96%B8%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\" aria-label=\"무엇을 해결할까 선언형 프로그래밍 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>반면 선언형 프로그래밍은 컴퓨터에게 <code class=\"language-text\">나 이거 할거야!</code>라고 알려주기만 하는 느낌이다. 잡다한 일 처리는 컴퓨터가 알아서 하도록 위임해버리고 개발자는 문제 해결을 위해 무엇을 할 지만 신경쓰면된다.</p>\n<p>즉, 함수형 프로그래밍은 이런 선언형 프로그래밍의 특성을 함수를 통해 구현하게되는 패러다임이라고 할 수 있는 것이다. 그럼 방금 전과 같은 문제를 선언형 프로그래밍을 사용하여 구현해보도록 하자.</p>\n<blockquote>\n<p>배열을 순회하며 빈 문자열을 걸러내고, 각 원소의 첫 글자를 대문자로 변경해라.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">convert</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> newArr2 <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token function\">convert</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 코드에서 사용된 <code class=\"language-text\">filter</code> 메소드는 배열을 순회하며 콜백 함수의 반환 값이 참이 아닌 원소를 걸러낸 새로운 배열을 생성 후 반환하는 역할을, <code class=\"language-text\">map</code> 메소드는 배열을 순회하며 콜백 함수의 반환 값을 사용한 새로운 배열을 생성한다.</p>\n<p>이 코드를 작성할 때 필자의 사고의 흐름은 다음과 같았다.</p>\n<blockquote>\n<ol>\n<li>인자로 받은 문자열의 첫 글자만 대문자로 변경하는 함수를 선언</li>\n<li><code class=\"language-text\">arr</code> 배열에서 원소의 길이가 0이 아닌 것들을 걸러냄</li>\n<li>걸러진 배열을 순회하면서 1번에서 선언한 함수를 사용하여 원소의 첫글자를 대문자로 변경</li>\n</ol>\n</blockquote>\n<p>분명 같은 작업을 수행하는 코드를 작성했지만 사고의 흐름이 많이 다른 것을 볼 수 있다. 물론 내부적으로는 아까 명령형 프로그래밍을 사용할 때의 필자 사고 방식과 유사한 방법으로 처리되겠지만, 적어도 필자가 자잘한 인덱스 변수의 선언이나 관리에 대해서 생각할 필요는 없어졌다.</p>\n<p>그리고 더 중요한 점은 필자가 해결해야하는 문제와 사고 방식의 흐름이 비슷해졌다는 것이다.</p>\n<blockquote>\n<p>배열을 순회하며 빈 문자열을 걸러내고(filter), 각 원소의 첫 글자를 대문자로 변경해라(convert + map).</p>\n</blockquote>\n<p>이렇게 선언형 프로그래밍은 개발자가 문제의 본질에 집중할 수 있게 만드는 것에 초점을 맞추고 있고, 결국 함수형 프로그래밍은 이런 선언형 프로그래밍의 패러다임을 함수를 사용하여 구현하는 것이다.</p>\n<p>하지만 이렇게 사소한 제어를 컴퓨터에게 맡겨버린다는 것이 장점만 있는 것은 아니다. 여기서 발생하는 대표적인 트레이드오프는 바로 추상화를 설명할 때 이야기했던 <code class=\"language-text\">성능</code>이다.</p>\n<p>필자가 명령형 프로그래밍을 사용하여 이 작업들을 수행한 경우 필자는 단 한 번의 루프 안에서 여러가지 작업을 수행했지만, 선언형 프로그래밍으로 작성한 예시는 <code class=\"language-text\">filter</code>와 <code class=\"language-text\">map</code> 메소드가 각각 전체 배열을 순회하기 때문에 성능 상 손해가 발생할 수 있는 것이다.</p>\n<p>아무리 요즘 머신의 성능이 좋아져서 저 정도의 추상화 레벨을 커버할 수 있다지만 만약 탐색해야하는 원소의 개수가 10억개라면 이런 사소한 차이가 전체 프로그램의 성능에 지대한 영향을 끼칠 수도 있다. 그래서 필자가 함수형 프로그래밍도 상황에 따라 적재적소에 잘 사용해야한다고 이야기 했던 것이다.</p>\n<h2 id=\"객체로-이루어진-프로그램과-함수로-이루어진-프로그램\" style=\"position:relative;\">객체로 이루어진 프로그램과 함수로 이루어진 프로그램<a href=\"#%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EA%B3%BC-%ED%95%A8%EC%88%98%EB%A1%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\" aria-label=\"객체로 이루어진 프로그램과 함수로 이루어진 프로그램 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자, 여기까지 명령형 프로그래밍을 사용할 때와 선언형 프로그래밍을 사용할 때 발생하는 사고의 차이에 대해 알아보았다.</p>\n<p>위에서 이야기했듯이 함수형 프로그래밍은 선언형 프로그래밍이라는 패러다임을 함수들의 집합과 연산으로 구현한 것이기 때문에 명령형 프로그래밍과도 많이 비교당하지만, 프로그램을 객체들의 집합과 관계로 정의하는 <code class=\"language-text\">객체지향 프로그래밍</code>과도 많이 비교를 당하게 된다.</p>\n<p>명령형 프로그래밍과 선언형 프로그래밍을 다루며 이야기했던 것과 마찬가지로, 객체지향 프로그래밍과 함수형 프로그래밍 간에도 어떠한 우위는 없다. 다만 서로의 차이에 따른 각기 다른 장단점이 있을 뿐이다.</p>\n<p>그렇다면 객체지향 프로그래밍을 사용하지 않고 함수형 프로그래밍을 사용함으로써 가져갈 수 있는 장점은 무엇일까?</p>\n<p>물론 여기에도 여러가지 장단점이 있겠지만 필자는 개인적으로 <code class=\"language-text\">함수 단위의 코드 재사용</code>이 더욱 쉬워진다는 것이 가장 큰 장점이라고 생각한다.</p>\n<h3 id=\"더-작게-쪼개어-생각할-수-있다\" style=\"position:relative;\">더 작게 쪼개어 생각할 수 있다<a href=\"#%EB%8D%94-%EC%9E%91%EA%B2%8C-%EC%AA%BC%EA%B0%9C%EC%96%B4-%EC%83%9D%EA%B0%81%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"더 작게 쪼개어 생각할 수 있다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>기존의 객체지향 프로그래밍에 익숙한 개발자는 어떤 프로그램의 요구 사항을 들었을 때 머릿 속에 객체의 설계도가 떠오르게 된다. 그리고 이러한 객체들의 관계를 정의하여 거대한 프로그램을 만들기 위한 기반을 다져나간다.</p>\n<p>객체지향패턴에서 객체란 멤버 변수(상태)와 메소드(행위)로 이루어진, 프로그램을 구성하는 최소 단위이기 때문에, 객체지향패턴을 사용할 때 우리는 이 객체보다 더 작은 무언가를 사용하여 프로그램을 설계할 수 없다.</p>\n<p>우리가 객체지향패턴을 사용할 때는 객체를 생성하기 위해, 객체를 추상화하여 일종의 설계 도면 역할을 하는 클래스를 사용하여 객체가 가질 상태와 행위를 정의하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Queue<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> queue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 내부 상태</span>\n\n  <span class=\"token comment\">// 메소드로 표현된 큐의 행위</span>\n  <span class=\"token keyword\">public</span> <span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">public</span> <span class=\"token function\">dequeue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">.</span>length <span class=\"token operator\">=</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> head<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> myQueue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Queue<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyQueue<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">Queue</code> 클래스는 하나의 배열을 내부 상태로 가지고 이 배열에 원소를 추가하고 제거하는 큐의 기능을 구현한 클래스이다. 이때 이 클래스의 메소드를 통하지않고 클래스의 내부 상태인 <code class=\"language-text\">queue</code> 배열을 외부에서 맘대로 접근해서 수정하는 행위를 막기위해 <code class=\"language-text\">private</code> 접근제한자를 사용하여 외부에서의 접근을 막아주었다.</p>\n<p>사실 이 정도만 해도 일반적인 프로그래밍을 할 때 딱히 불편하거나 어려운 점은 없다. 하지만 여기에서 필자가 <code class=\"language-text\">Stack</code>이라는 클래스를 새로 만들면 어떻게 될까?</p>\n<p>간단히 생각해보면 큐의 동작인 <code class=\"language-text\">dequeue</code>는 그대로 사용하고 <code class=\"language-text\">enqueue</code>의 동작만 반대로 바꿔줘도 훌륭한 스택이 구현될 것 같다. 그러나 이미 클래스의 메소드로 구현되어버린 <code class=\"language-text\">dequeue</code>를 다른 클래스에서 가져다 자신의 메소드처럼 사용할 수 있는 방법은 상속 밖에 없는데, 그렇다고 큐를 상속한 스택을 만들어버리면 객체 간의 관계가 꼬이기 시작할 것이다.</p>\n<p>즉, 객체지향 프로그래밍에서 어떤 존재를 추상화하여 표현하고 재사용할 수 있는 최소 단위는 <code class=\"language-text\">객체</code>이기 때문에 그 이상 작게 쪼개기 힘들어지는 것이다. 하지만 함수형 프로그래밍에서는 객체로 표현된 큐나 스택이 아닌, 이 존재들이 자료를 다루는 동작에만 집중한다.</p>\n<blockquote>\n<ol>\n<li>배열의 꼬리에 원소를 추가하는 동작 (push)</li>\n<li>배열의 머리에서 원소를 빼오고 남은 원소를 앞으로 한 칸씩 당겨주는 동작 (shift)</li>\n</ol>\n</blockquote>\n<p>이처럼 자바스크립트의 빌트인 메소드인 <code class=\"language-text\">push</code>와 <code class=\"language-text\">shift</code>를 사용하면 굳이 클래스나 객체를 선언하거나, 필자가 위에서 구현한 것처럼 명령형 프로그래밍으로 큐의 동작을 구구절절 작성하지 않더라도 큐의 동작을 완벽하게 구현할 수 있다. 또한 추가적으로 스택을 구현하고 싶다면, <code class=\"language-text\">shift</code> 메소드를 사용하여 원소를 빼오고 <code class=\"language-text\">push</code> 메소드 대신 <code class=\"language-text\">unshift</code> 메소드를 사용하여 원소를 추가하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> queue<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nqueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> stack<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstack<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nstack<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>굉장히 당연하다고 느껴지겠지만, 이것이 객체 단위로 요소를 구성하는 것과 함수 단위로 요소를 구성하였을때 누릴 수 있는 근본적인 장점이다. 어떤 요소를 재사용할 수 있는 범위가 넓어지는 것이다.</p>\n<p>다만 이렇게 작은 단위의 함수를 넓은 범위로 재사용하게 되면 프로그램의 복잡성이 빠르게 증가하기 때문에 이를 방어하기 위해서 함수가 함수 외부에 있는 값을 수정하면 안된다거나, 동일한 인자를 받은 함수는 동일한 값을 반환해야 한다거나 하는 몇 가지 제약 조건이 필요하게 된다.</p>\n<p>이런 제약을 가진 함수를 바로 <code class=\"language-text\">순수 함수(Pure Functions)</code>라고 부르는 것이다. 근데 보통 순수 함수라는 개념을 설명하다보면 방금 필자가 이야기한 것처럼 “몇 가지 제약 조건이 있는 함수”라는 개념으로 설명하게 되는데, 이거 근본적으로 그냥 수학에서 사용하는 함수랑 거의 동일한 개념이다.</p>\n<p>컴퓨터 공학의 함수는 수학의 함수에서 유래되기는 했지만, 이 두 개의 학문이 추구하는 방향과 발전되어온 과정이 꽤나 다르기 때문에 함수라는 개념도 이름만 똑같을 뿐, 사실은 서로 다른 부분이 많다. 즉, 순수 함수는 수학에서 이야기했던 함수의 본질 그 자체로 회귀하여 단순함을 확보하자는 개념에서 시작하는 것이다.</p>\n<p>그런 이유로 필자는 개인적으로 순수 함수를 프로그래밍적인 관점에서 접근하여 이해하는 것보다 수학적인 관점에서 접근하여 이해하는 것이 더 쉽고 빠르다고 생각한다.</p>\n<p>일단 이 포스팅의 주제는 함수형 프로그래밍보다는 함수로 사고하는 방식의 장단점과 특징에 대한 이야기이므로, 순수 함수나 불변성에 대한 이야기는 다음에 함수형 프로그래밍의 특징과 스킬을 설명할 때 조금 더 자세히 이야기해보도록 하겠다. <small>(이것도 은근히 꿀잼이다)</small></p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 사실 얼마 전까지만 해도 함수형 프로그래밍에 대한 관심이 깊은 편이 아니었다. 명령형 프로그래밍과 객체지향적인 사고만으로도 대부분의 어플리케이션은 충분히 설계할 수 있다고 생각했기 때문이다.</p>\n<p>하지만 이건 필자가 학교에서 처음 배웠던 패러다임이 명령형 프로그래밍과 객체지향 프로그래밍이었기 때문에 몸에 더 익어서 그랬던 것이다. 사실 어떤 패러다임을 자유자재로 다룰 수 있다는 것은 해당 패러다임이 요구하는 사고 방식에 이미 익숙해졌다는 이야기이기 때문에, 새로운 설계 패턴이나 패러다임을 익힌다는 것은 이런 기존의 사고 방식을 깨야하는 상황이기도 하다.</p>\n<p>개인적으로 커링이나 고계 함수, 모나드 같은 것들을 익히는 것보다 이런 사고 방식을 바꾸는 것이 훨씬 더 어렵다는 생각을 한다. 솔직히 말하면 어느 정도 함수형 프로그래밍에 대해 공부하고 마음이 열린 상태인 지금도 어떤 요구사항을 들었을 때 명령형과 객체지향을 먼저 떠올리고 있기도 하고 말이다.</p>\n<p>물론 포스팅에서 여러 번 이야기했듯이 함수형 프로그래밍이 객체지향 프로그래밍이나 명령형 프로그래밍을 대체하는 패러다임도 아닐 뿐더러, 이 패러다임들간에는 어떠한 우위도 없다. 각자의 장단점만 있을 뿐이고 상황에 따라 적당히 골라쓰면 되는 것이다.</p>\n<p>게다가 아직까지 많은 라이브러리들이 객체지향적인 개념으로 설계되었고, 사용 방법 또한 대부분 멤버 변수와 메소드를 내장한 객체를 생성하여 사용하는 방법을 채택하고 있기 때문에, 이런 라이브러리와 내 프로그램을 연동하려면 프로그램의 전체적인 아키텍쳐 또한 객체지향으로 설계하는 것이 편하다는 점도 무시할 수는 없다.</p>\n<p>일례로 자바스크립트 진형에서 상태관리 라이브러리로 자주 사용하는 <code class=\"language-text\">Redux</code>의 경우 순수 함수와 불변성을 기반으로 하여 상태 변경을 감지하게 되는데, 필자는 Web Audio API를 사용한 토이 프로젝트를 진행할 때 <code class=\"language-text\">AudioNode</code> 객체들의 상태를 <code class=\"language-text\">Redux</code>로 관리하는 것에 상당히 애를 먹고 있기도 하다. <small><strike>(이건 그냥 필자가 Redux를 못 쓰는 걸 수도…)</strike></small></p>\n<p>하지만 함수형 프로그래밍이 가져다주는 높은 수준의 추상화나 더 작은 수준의 코드 재사용과 같은 장점들은 분명히 복잡한 프로그램을 작성할 때 크게 도움이 되는 것들이다. 결국 함수형 프로그래밍을 잘 사용한다는 것은 단순히 이 패러다임을 깊게 이해하는 것보다는 이 패러다임이 어떤 상황에 적합한지 판단할 수 있는 능력 또한 포함하는 이야기라고 생각한다.</p>\n<p>다음 포스팅에서는 함수형 프로그래밍에서 빼놓을 수 없는 키워드인 순수 함수, 불변성, 지연 평가와 같은 개념들과 프로그램의 복잡도를 낮추기 위해 사용하는 다양한 스킬들을 소개하는 포스팅을 작성할 예정이다.</p>\n<p>이상으로 기존의 사고 방식을 깨부수는 함수형 사고 포스팅을 마친다.</p>","fields":{"slug":"20191215-about-functional-thinking","path":"/2019/12/15/about-functional-thinking/","lang":"ko"},"frontmatter":{"title":"기존의 사고 방식을 깨부수는 함수형 사고","subTitle":"명령형에서 선언형으로, 프로그래밍 사고를 전환하는 법","date":"Dec 15, 2019","categories":["프로그래밍","아키텍처"],"tags":["함수형 프로그래밍","함수형 사고","Functional Programming","Functional Thinking","명령형 프로그래밍","객체지향 프로그래밍","선언형 프로그래밍"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8d868","images":{"fallback":{"src":"/static/9044dbb610cf83c50525198f5c9e28fb/d803c/thumbnail.png","srcSet":"/static/9044dbb610cf83c50525198f5c9e28fb/8c230/thumbnail.png 80w,\n/static/9044dbb610cf83c50525198f5c9e28fb/23e25/thumbnail.png 160w,\n/static/9044dbb610cf83c50525198f5c9e28fb/d803c/thumbnail.png 320w,\n/static/9044dbb610cf83c50525198f5c9e28fb/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/9044dbb610cf83c50525198f5c9e28fb/3e5ca/thumbnail.webp 80w,\n/static/9044dbb610cf83c50525198f5c9e28fb/b72f1/thumbnail.webp 160w,\n/static/9044dbb610cf83c50525198f5c9e28fb/fc5c5/thumbnail.webp 320w,\n/static/9044dbb610cf83c50525198f5c9e28fb/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8d868","images":{"fallback":{"src":"/static/9044dbb610cf83c50525198f5c9e28fb/3fbb4/thumbnail.png","srcSet":"/static/9044dbb610cf83c50525198f5c9e28fb/61846/thumbnail.png 750w,\n/static/9044dbb610cf83c50525198f5c9e28fb/d5395/thumbnail.png 1080w,\n/static/9044dbb610cf83c50525198f5c9e28fb/cc835/thumbnail.png 1366w,\n/static/9044dbb610cf83c50525198f5c9e28fb/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/9044dbb610cf83c50525198f5c9e28fb/6858b/thumbnail.webp 750w,\n/static/9044dbb610cf83c50525198f5c9e28fb/f5547/thumbnail.webp 1080w,\n/static/9044dbb610cf83c50525198f5c9e28fb/29310/thumbnail.webp 1366w,\n/static/9044dbb610cf83c50525198f5c9e28fb/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"0f6f3f64-11d9-56d0-99d2-6dbbeae617b6","tableOfContents":"<ul>\n<li><a href=\"#%EA%B7%B9%EB%8F%84%EB%A1%9C-%EC%86%94%EC%A7%81%ED%95%B4%EC%A0%B8%EB%9D%BC\">극도로 솔직해져라</a></li>\n<li><a href=\"#%EC%82%AC%EB%9E%8C%EC%9D%80-%EA%B0%90%EC%A0%95%EC%9D%84-100-%EB%B0%B0%EC%A0%9C%ED%95%98%EA%B3%A0-%EC%83%9D%EA%B0%81%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\">사람은 감정을 100% 배제하고 생각할 수 없다</a></li>\n<li><a href=\"#%EB%B6%80%EB%93%9C%EB%9F%AC%EC%9A%B4-%EC%96%B4%ED%88%AC%EB%A1%9C-%ED%94%BC%EB%93%9C%EB%B0%B1%EC%9D%84-%EC%A3%BC%EB%A9%B4-%EB%90%9C%EB%8B%A4\">부드러운 어투로 피드백을 주면 된다?</a></li>\n<li><a href=\"#%EA%B2%BD%EC%98%81%EC%A7%84%EA%B3%BC-%EC%A7%81%EC%9B%90-%EC%82%AC%EC%9D%B4%EC%9D%98-%ED%94%BC%EB%93%9C%EB%B0%B1\">경영진과 직원 사이의 피드백</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","excerpt":"최근 4일 동안 심한 몸살에 걸려 침대에만 누워있으면서, 컴퓨터를 멀리 하고 오랜만에 책을 읽었다. 마침 입사 예정인 회사에서 “린 스타트업”과 “파워풀” 두 권의 책을 보내주었기 때문에 무엇을 읽어볼까하는 고민을 할 시간을 줄일 수 있었다. 그런 이유로 넷플릭스의 기업 문화를 주도했던 패티 맥코드의 “파워풀”이라는 책을 먼저 읽어보았는데, 평소에 필자가 회사를 다니면서 고민했던 많은 문제들에 대해서 나름 명쾌한 해답을 제시해주는 것 같았다. 이 책은 총 8개의 챕터를 통해 넷플릭스가 지향하는 기업 문화인 “자유와 책임”에 대해서…","html":"<p>최근 4일 동안 심한 몸살에 걸려 침대에만 누워있으면서, 컴퓨터를 멀리 하고 오랜만에 책을 읽었다. 마침 입사 예정인 회사에서 “린 스타트업”과 “파워풀” 두 권의 책을 보내주었기 때문에 무엇을 읽어볼까하는 고민을 할 시간을 줄일 수 있었다.</p>\n<p>그런 이유로 넷플릭스의 기업 문화를 주도했던 패티 맥코드의 “파워풀”이라는 책을 먼저 읽어보았는데, 평소에 필자가 회사를 다니면서 고민했던 많은 문제들에 대해서 나름 명쾌한 해답을 제시해주는 것 같았다.</p>\n<p>이 책은 총 8개의 챕터를 통해 넷플릭스가 지향하는 기업 문화인 “자유와 책임”에 대해서 이야기하고 있는데, 그 중에서 필자에게 많은 생각이 들게 했던 부분은 바로 3장의 “극도로 솔직해져라”라는 챕터였다.</p>\n<h2 id=\"극도로-솔직해져라\" style=\"position:relative;\">극도로 솔직해져라<a href=\"#%EA%B7%B9%EB%8F%84%EB%A1%9C-%EC%86%94%EC%A7%81%ED%95%B4%EC%A0%B8%EB%9D%BC\" aria-label=\"극도로 솔직해져라 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>패티 맥코드는 넷플릭스의 핵심 기업 문화 중 한 가지로 “솔직한 진심을 나눠야한다”라고 이야기한다. 그것이 같은 직원이던 경영진이던 동일하게 말이다.</p>\n<p>넷플릭스의 솔직함에는 “상대방에게 직접 말할 것”, “피드백을 환영할 것”, “실수를 인정할 것” 등의 몇 가지 키워드가 있다. 최근 국내에서도 다양한 회사들이 이런 문화를 적극적으로 받아들여 기업의 자산 현황을 직원들에게 공개하거나 직급 여하와 상관없이 자신의 의견을 자유롭게 말할 수 있는 분위기를 조성하고 있다.</p>\n<p>파워풀에서 이야기하고 있는 솔직함에 대한 내용 중에서 필자가 생각이 많아진 부분은 바로 “솔직한 피드백”이었다.</p>\n<p>물론 서로 가감없이 솔직한 피드백을 주고 받을 수 있는 문화는 굉장히 좋은 문화라고 생각한다. 상대방의 발전을 기원하며 서로 건네는 피드백이 건강하게 작용한다면 구성원의 학습의 질을 높은 수준으로 끌어올릴 수 있기 때문이다.</p>\n<p>필자도 전 직장에서 팀원들 간에 이런 피드백을 주고 받으며, 서로에게 조언도 해주고 책이나 아티클도 공유했던 좋은 기억이 있다. 심지어 필자가 이번 이직 때 직장을 선택하는 기준 중에 하나도 이런 피드백을 통해 정하게 되었을 정도이다.</p>\n<p>그렇다면 이런 건강한 피드백 문화를 만들기 위해 필요한 것이 정말 “솔직함” 뿐일까?</p>\n<p>그러나 필자는 개인적으로 이러한 피드백 주고받기 문화를 “솔직함”이라는 키워드만 바라보고 그대로 현실에 적용하기에는 조금 애매하다고 생각한다. 불가능하지는 않지만 이런 문화가 조직에 성공적으로 정착하기까지 넘어야 할 장애물이 몇 가지 있다.</p>\n<h2 id=\"사람은-감정을-100-배제하고-생각할-수-없다\" style=\"position:relative;\">사람은 감정을 100% 배제하고 생각할 수 없다<a href=\"#%EC%82%AC%EB%9E%8C%EC%9D%80-%EA%B0%90%EC%A0%95%EC%9D%84-100-%EB%B0%B0%EC%A0%9C%ED%95%98%EA%B3%A0-%EC%83%9D%EA%B0%81%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\" aria-label=\"사람은 감정을 100 배제하고 생각할 수 없다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>패티 맥코드는 피드백에 관련된 내용을 이야기할 때 주로 “피드백을 주는 쪽”의 입장을 많이 이야기했다. 상대방이 너의 피드백을 무시하거나 상처받을 것이라고 생각하지말고 “너의 팀원을 믿어라”라는 식으로 말이다.</p>\n<p>필자가 이 책을 읽으며 아쉬웠던 점은, 피드백을 받는 사람의 현재 감정 상태를 딱히 고려하지 않는다는 점이었다. 오히려 패티 맥코드는 “감정없이 대화하는 법”에 대한 내용을 언급한다.</p>\n<p>물론 업무적인 이야기를 할 때 불필요한 감정은 배제하기 위해 노력하는 것이 프로페셔널한 자세인 것은 맞지만 사람이 감정을 완전히 배제하고 생활한다는 것이 가능한 일일까?</p>\n<p>책의 흐름을 보았을 때, 패티 맥코드가 말하는 감정은 부정적인 감정을 의미하는 것일테다. 그러나 책에서는 이에 대해 직접적으로 이야기하지 않았고, 특정 상황을 예시로 들며 상대방을 배려하는 말투로 피드백을 주라고 간접적으로 이야기하고 있다.</p>\n<p>음, 필자는 감정이 팀워크에 미치는 영향에 대해서 꽤나 중요하게 생각하는 사람이기 때문에 이에 대한 이야기를 조금 더 해보려고 한다.</p>\n<p>지난 6월에 작성한 <a href=\"/2019/06/06/what-is-good-programmer/\">좋은 개발자란 무엇일까?</a> 포스팅에서도 한 차례 언급한 바 있지만, 감정이라는 것은 기본적으로 두뇌의 신호를 받아 호르몬이 분비된 결과물이다. 그 말인 즉슨, 사람이 의도적으로 감정을 컨트롤한다는 것이 결코 쉬운 일이 아니라는 것이다.</p>\n<p>아무리 회사고 공적인 조직이라고 하지만, 회사도 결국은 사람들이 모여서 함께 뭔가를 이루기위해 노력하는 커뮤니티이다. 사람들이 모여서 서로 소통하며 뭔가를 하는 이상 그 속에서 감정을 100% 배제하는 것은 불가능하다.</p>\n<p>그래서 필자는 상호 간의 커뮤니케이션에서 중요한 점을 하나 뽑으라고 한다면 제일 먼저 “존중”이라는 키워드를 뽑는다. 그리고 이 존중이라는 단어 안에는 상대방의 직무, 감정에 대한 배려가 숨어있다.</p>\n<p>문제는 피드백이라는 것이 대부분 부정적인 의견을 전달하는 용도의 커뮤니케이션이라는 것이다.</p>\n<p>물론 건강한 피드백은 상대방이 어떠한 단점을 보완하여 더욱 더 발전했으면 하는 마음에서 나오는 것이나, 피드백을 받아들이는 사람이 어떻게 생각할 지는 며느리도 모르는 일이다.</p>\n<p>아무리 채용 과정에서 피드백에 대한 부정적인 관점을 가지지 않는 사람이라는 것이 어느 정도 입증되었다고 해도, 사람 마음이라는 것이 늘 한결 같은 것도 아니고, 그 날의 상황에 따라서 기분이 좋지 않을 수도 있지 않은가?</p>\n<p>예를 들어 평소 회사에서 일을 하면서 하루에 100명 정도에게 피드백을 듣는다고 생각해보자. 사실 필자는 이 정도 피드백은 아무렇지 않다. 평소의 필자는 피드백을 들었을 때 “이 단점을 보완하자”와 같은 이펙트를 내는 타입이기 때문이다.</p>\n<p>하지만 갑자기 가족이 투자 사기를 당해서 집이 하루 아침에 파산했다면 어떤가? 그래도 다음 날 아무렇지 않게 100명의 피드백을 받아들이고 평소처럼 “단점을 보완해야지”라는 긍정적인 생각을 할 수 있을까?</p>\n<p>물론 가능한 사람도 있겠지만, 필자는 아닐 것 같다. 머릿 속에 설상가상(雪上加霜)이라는 단어가 떠오르면서 “요즘 일이 잘 안풀리네”라는 부정적인 생각이 들 것만 같다.</p>\n<p>이렇듯 사람 마음이라는 것이 외부 환경에 독립적인 요소가 아닌 만큼, 상황에 따라서 같은 자극에도 다른 반응이 나타날 수 있는 것이다. 또한 필자가 이런 상황을 다른 사람들에게 말하지 않는 이상 다른 사람은 필자의 현재 심리 상태를 알기 힘들다.</p>\n<p>사실 회사 뿐 아니라 모든 조직의 커뮤니케이션에서 가장 어려운 문제가 이처럼 “상대방의 마음”을 도통 알 수가 없다는 것이다. 우리는 프로토스처럼 칼라를 통해 소통하는 종족도 아니지 않은가?</p>\n<center>\n  <img src=\"/169f88de0a1a76a085bc9800d4afd888/khala.gif\" width=\"100%\">\n  <br>\n  <small>프로토스는 칼라를 통해 감정과 생각을 공유하지만 인간은 아니다</small>\n  <br>\n  <br>\n</center>\n<p>다른 사람과의 커뮤니케이션은 언제나 이런 불확실성 속에서 진행되는 것이기 때문에 어려운 것이고, 그 불확실성에는 그 사람의 감정이 크게 기여한다고 생각한다. 이런 이유로 전 직장에서는 아침마다 “체크인”이라는 활동을 통해 자신의 현재 컨디션을 1과 10 사이의 숫자로 표현하는 방법을 사용하기도 했다.</p>\n<p>건강한 피드백 문화라는 것은 단순히 솔직함이라는 키워드 만으로 만들어지는 것이 아니다. 여기에는 “솔직하게” 그리고 “따뜻하게” 상대방을 배려하고 존중하면서 피드백을 줄 수 있는 문화가 함께 동반되어야한다.</p>\n<h2 id=\"부드러운-어투로-피드백을-주면-된다\" style=\"position:relative;\">부드러운 어투로 피드백을 주면 된다?<a href=\"#%EB%B6%80%EB%93%9C%EB%9F%AC%EC%9A%B4-%EC%96%B4%ED%88%AC%EB%A1%9C-%ED%94%BC%EB%93%9C%EB%B0%B1%EC%9D%84-%EC%A3%BC%EB%A9%B4-%EB%90%9C%EB%8B%A4\" aria-label=\"부드러운 어투로 피드백을 주면 된다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>여기까지 이야기를 하고나면 많은 분들이 “그럼 부드러운 어투로 피드백을 주면 되는 것 아닌가?”라고 하실텐데, 사실 이것도 굉장히 애매한 부분이다. “부드럽게 말하다”의 기준 또한 사람마다 주관적이기 때문이다.</p>\n<p>필자는 전 직장에서 딱 한번 말투로 인해서 피드백을 받았던 적이 있었다. 필자는 당시 모든 팀이 이슈 관리용으로 사용하는 JIRA라는 솔루션을 관리하고 있었는데, 어느 날 살펴보니 팀이나 개인 단위로 무분별하게 보드를 생성해서 어떤 것이 진짜 사용하는 보드이고 어떤 것이 사용하지 않는 보드인지 한 눈에 파악하기가 힘들었다.</p>\n<p>그래서 필자는 각 팀에게 현재 이 보드를 사용하고 있는지에 대한 여부를 물어보고 더 이상 사용하지않는 보드는 백업 후 삭제하는 작업을 하게되었는데, 문제는 CX(고객경험)팀에 필자가 질문을 하러 갔을 때 발생했다.</p>\n<blockquote>\n<p>- 똑똑똑 -<br />\n<strong>에반</strong>: 저기 죄송한데, 혹시 CX팀에서 SCX 보드 현재 사용하시나요?,<br />\n<strong>CX 팀원</strong>: 네…? (놀람) 아뇨 저희 지금 안 쓰고 있어요.<br />\n<strong>에반</strong>: 넵 감사함다.</p>\n</blockquote>\n<p>필자는 확인도 받았으니 해당 보드를 백업하고 삭제했는데, 조금 시간이 지난 뒤에 CX 팀원으로부터 “저희가 혹시 뭐 잘못 했나요…?”라는 슬랙 메세지를 받았다.</p>\n<p>메세지를 받고 순간 “왜…?”라는 생각이 들었는데, 조금 생각해보니 그럴만 했다는 결론을 내렸다. CX팀 입장에서는 갑자기 개발자가 자기네 부서에 오더니 아무런 앞 뒤 설명없이 “이 보드 쓰세요?”라고 물어보고 간 상황이었던 것이다.</p>\n<p>게다가 보통 개발자가 다른 팀에 이런 질문을 하는 경우는 다른 팀에서 뭔가 만졌는데 데이터가 꼬였다던가 하는 경우 였음을 생각해보면 필자에게 저런 질문을 하는 것이 이상한 일도 아니였다. 필자 입장에서는 저 작업 외에도 일이 많고 바쁘기 때문에 용건만 간단히 물어본 것이지만, 듣는 사람 입장에서는 당황스러웠을 것이다. <small>(지금 생각해보니 표정도 딱딱했던 것 같다)</small></p>\n<p>물론 이후에 자초지종을 설명하고 오해가 풀렸지만, 이 사건은 필자가 커뮤니케이션에 대해서 깊은 고민을 하게 만드는 기폭제가 되기도 했다.</p>\n<p>사실 필자는 스스로 말투가 그렇게 부드러운 편이 아니라는 사실을 알고 있었다. 그래서 필자에 대해서 잘 모르는 사람들과 이야기할때는 나름 말투에 신경을 쓰는 편이고, CX팀에 가서 저 질문을 했을때도 나름대로 신경쓴 편이었다. 하지만 CX팀에서는 필자의 말투가 너무 딱딱해서 무섭다고 했다.</p>\n<p>결국은 “내가 받아들이는 것”과 “상대방이 받아들이는 것”이 다를 수 있다는 것이며, 원활한 커뮤니케이션을 위해서는 이 사실을 인지하고 있어야한다는 것이다. 그리고 이런 경우, 필자가 아무리 신경을 썼다고 해도 상대방이 딱딱한 말투라고 느꼈다면 필자가 더 부드럽게 말하거나 표정같은 비언어적인 커뮤니케이션을 사용하여 보완하는 것이 맞다.</p>\n<p>“부드러운 말투로 피드백을 준다”라는 말도 결국 마찬가지다. 내 입장에서는 아무리 부드럽게 말한다고 해도 상대방이 그렇게 받아들이지 않을 확률은 늘 존재하며, 솔직한 피드백을 주고 받는 문화가 성공적으로 정착하려면 이런 이슈들에 대한 구성원들의 성숙한 고민과 발전이 끊임없이 계속 되어야한다.</p>\n<p>물론 패티 맥코드도 “적대적이거나 거들먹거리는 말투”로 피드백을 주지 말라는 이야기는 간단히 언급했으나 필자는 개인적으로 이런 상대방에 배려와 존중 또한 솔직함이라는 키워드와 동일하게 중요하다고 생각하는 편이라서, 이 책에서는 너무 “솔직함”에만 집중한 것이 아쉽다는 생각이 들었다.</p>\n<h2 id=\"경영진과-직원-사이의-피드백\" style=\"position:relative;\">경영진과 직원 사이의 피드백<a href=\"#%EA%B2%BD%EC%98%81%EC%A7%84%EA%B3%BC-%EC%A7%81%EC%9B%90-%EC%82%AC%EC%9D%B4%EC%9D%98-%ED%94%BC%EB%93%9C%EB%B0%B1\" aria-label=\"경영진과 직원 사이의 피드백 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>패티 맥코드는 직급의 고하와 상관없이 피드백을 주고 받을 수 있어야 한다고 말하며, 이런 피드백 매커니즘은 위에서 아래로 내려오는 탑다운(Top-Down)으로 전파되어야 한다고 한다. 음, 하지만 현실적으로 이게 제일 어려운 부분이 아닐까?</p>\n<p>아무리 의사결정을 각 실무자에게 위임하고 수평적인 의사소통을 지향한다고 해도 경영진이라는 자리는 회사 전체를 리딩하는 자리인 만큼 가지는 책임이나 권한이 일반적인 직원보다 크기도 하고, 20년 넘게 학교나 알바, 군대 등 온갖 수직적인 구조를 겪으며 살아온 우리에게는 아직 “사장님과 수평적인 관계”라는 사실 자체가 어색하니 말이다. <small>(이건 특별히 한국이라서 그런게 아니라 만국 공통이다)</small></p>\n<p>그런 이유로 직원의 입장에서 경영진에게 피드백을 건넨다는 것은 솔직히 부담스러울 수 밖에 없다. 물론 많은 기업들이 수평적인 문화를 지향하고 또 실제로 그런 문화를 실천하고 있기는 하지만, 경영진이라는 타이틀을 가진 사람을 내 동료처럼 편하게 대한다는 것은 꽤나 어려운 일이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b467e1ac8bac2c38cc6d1c7699bf5180/c84e8/friends.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAb1Atik//8QAGRAAAwADAAAAAAAAAAAAAAAAAAECAxIh/9oACAEBAAEFAt2R0jIz/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEDAQE/ATSb/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEx/9oACAECAQE/AbqP/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECMRFRUv/aAAgBAQAGPwKS5osktPB//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARQSEx/9oACAEBAAE/IQzRIhqACYnhCnHZ/9oADAMBAAIAAwAAABAID//EABcRAQEBAQAAAAAAAAAAAAAAAAEAIRH/2gAIAQMBAT8QwrJ67f/EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQIBAT8Q6QML/8QAGhABAQADAQEAAAAAAAAAAAAAAREAIUExUf/aAAgBAQABPxBgK7Uilyno34JG9+412BCqh11n/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"friends\" title=\"\" src=\"/static/b467e1ac8bac2c38cc6d1c7699bf5180/c08c5/friends.jpg\" srcset=\"/static/b467e1ac8bac2c38cc6d1c7699bf5180/0913d/friends.jpg 160w,\n/static/b467e1ac8bac2c38cc6d1c7699bf5180/cb69c/friends.jpg 320w,\n/static/b467e1ac8bac2c38cc6d1c7699bf5180/c08c5/friends.jpg 640w,\n/static/b467e1ac8bac2c38cc6d1c7699bf5180/c84e8/friends.jpg 743w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>직원이 경영진을 \"동료\"로 느끼게 만드는 일은 생각보다 쉬운 일이 아니다</small>\n</center>\n<p>그래서 패티 맥코드 또한 이런 피드백 매커니즘을 정착시키려면 탑다운으로 전파되어야한다고 했던 것이다. 여기서 말하는 탑다운은 “명령”이 아니라, 경영진이 먼저 다가서라는 의미이다.</p>\n<p>당연히 수평적인 문화를 지향하는 많은 회사의 대표들도 이런 사실을 알고 있기에 꾸준하게 “저한테 편하게 대해주세요”라는 제스처를 취한다. 하지만 이상하게도 직원들 마음은 그렇게 쉽게 열리지 않는 경우가 많다. 그 이유는 무엇일까?</p>\n<p>이건 마치 연애와 비슷한 느낌인데, 말로는 사랑한다고 하지만 상대방에게 무심한 행동만 보여준다면 상대방이 진짜 이 사람이 자신을 사랑한다고 믿을 수 있을까? 오히려 말로는 사랑한다고 하지 않아도 늘 따뜻하고 배려있는 행동을 보여준다면 더 믿을 수 있을 것 같다. <small>(오히려 이런 츤데레가 더 매력적일 수도 있다)</small></p>\n<p>마찬가지로 필자는 경영진이 정말 수평적인 커뮤니케이션과 피드백을 원한다면 “편하게 대해달라”라는 말보다는, 경영진이 먼저 직원들에게 편하게 다가오고 주기적인 교육을 통해 우리는 수평적인 관계라는 사실을 이야기하며, 실제로 피드백을 받았을 때도 긍정적인 반응을 보이는 등의 행동을 실천함으로써 직원들에게 꾸준한 신뢰를 줘야한다고 생각한다.</p>\n<p>그 신뢰란, 내가 이 사람에게 피드백을 줘도 나에게 불이익이 없을 것이라는 신뢰, 그리고 내 피드백이 이 사람에게 받아들여질 수 있다는 신뢰, 이 피드백으로 인해 우리 조직이 전체적으로 발전할 수 있을 것이라는 신뢰다.</p>\n<p>그래서 직급과 관계없이 자유롭게 피드백을 주고 받는 문화를 가지고 있는 기업들을 보면 주기적으로 타운홀 미팅을 하면서 공개적으로 직원들에게 피드백을 받거나, 대표가 먼저 피드백에 대해서 물어보고, 피드백에 대한 교육을 실시하는 등 지속적으로 노력하고 있는 모습을 볼 수 있다.</p>\n<p>즉, 직원과 경영진 간 투명한 피드백을 주고받는 문화는 “솔직함” 뿐만 아니라 경영진이 직접 노력하는 모습을 보여줌으로써 직원들과 신뢰를 쌓는 과정 또한 중요하다고 할 수 있다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>패티 맥코드의 파워풀은 넷플릭스의 핵심 기업 문화인 “자유와 책임”에 대한 전반적인 내용을 재미있게 설명하고 있는 책이다. 필자 또한 지금까지 스타트업에서 일을 해오면서 자연스럽게 자유와 책임을 함께 가져야하는 문화를 몸에 익혔기 때문에 여러모로 공감이 갔다.</p>\n<p>그리고 패티 맥코드가 이야기한 “솔직함”에 대한 내용 또한 많은 공감이 갔다. 뒤에서 이야기하지말고 당사자에게 직접 이야기하라는 것이나, 서로의 발전을 위해 솔직한 피드백을 주고 받으라는 것, 조직 내의 모든 사람은 비즈니스에 대해 뭐든지 질문하고 대답할 수 있어야한다는 것들 말이다.</p>\n<p>넷플릭스는 이러한 자유와 책임이라는 기업 문화를 이끌어나가기 위해 직원들을 프로페셔널리즘을 가진 “어른”으로 대하고, 또 그런 사람을 채용하려고 많은 노력을 기울인다.</p>\n<p>그러나 어른이라고 한들 감정이 없는 로봇은 아니라는 점을 잊어서는 안된다.</p>\n<p>사실 프로페셔널한 어른이라면 자기 감정 정도는 스스로 컨트롤하고 건설적인 마인드로 일을 한다. 하지만 위에서 언급했듯이 감정을 도저히 숨기기 힘든 상황도 있을 것이다. 그럴때는 솔직한 피드백보다는 커피 한잔과 함께 건네는 따뜻한 위로가 팀워크를 더 향상시켜줄 수도 있지 않을까?</p>\n<p>우리는 사회에서 많은 사람과 일을 하고 경험을 쌓으며 무의식적으로 상대방의 감정을 건드리는 선을 넘지 않는 법을 배운다. 그러나 무의식적으로 선을 넘지 않는 것과 의식적으로 동료를 배려하고 존중하는 마음은 엄연히 다른 것이다.</p>\n<p>함께 일을 하면서 서로에게 자극이 되는 동료, 어려운 문제를 함께 해결할 수 있는 동료도 물론 좋지만, 단순히 그것만으로 팀워크가 돈독해지지는 않는다. 튼튼한 팀워크를 만들기 위해서는 훌륭한 동료라는 조건 저변에 팀원에 대한 인간적인 신뢰도 함께 동반되어야한다고 생각한다.</p>\n<p>이상으로 솔직한 피드백으로 좋은 팀워크를 만들 수 있을까? 포스팅을 마친다.</p>","fields":{"slug":"20191204-about-honestly-feedback","path":"/2019/12/04/about-honestly-feedback/","lang":"ko"},"frontmatter":{"title":"솔직한 피드백으로 좋은 팀워크를 만들 수 있을까? - 파워풀을 읽고","subTitle":"넷플릭스의 피드백 문화에서 배울 점과 한계","date":"Dec 04, 2019","categories":["에세이","소프트스킬"],"tags":["Feedback","피드백","자유와 책임","넷플릭스","Netflix","Freedom & Responsibility","소프트스킬"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/ee71a5a1bff039d4752fed19ed2c5818/d803c/thumbnail.png","srcSet":"/static/ee71a5a1bff039d4752fed19ed2c5818/8c230/thumbnail.png 80w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/23e25/thumbnail.png 160w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/d803c/thumbnail.png 320w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ee71a5a1bff039d4752fed19ed2c5818/3e5ca/thumbnail.webp 80w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/b72f1/thumbnail.webp 160w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/fc5c5/thumbnail.webp 320w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#080808","images":{"fallback":{"src":"/static/ee71a5a1bff039d4752fed19ed2c5818/08c98/thumbnail.png","srcSet":"/static/ee71a5a1bff039d4752fed19ed2c5818/61846/thumbnail.png 750w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/d5395/thumbnail.png 1080w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/cc835/thumbnail.png 1366w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/08c98/thumbnail.png 1581w","sizes":"100vw"},"sources":[{"srcSet":"/static/ee71a5a1bff039d4752fed19ed2c5818/6858b/thumbnail.webp 750w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/f5547/thumbnail.webp 1080w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/29310/thumbnail.webp 1366w,\n/static/ee71a5a1bff039d4752fed19ed2c5818/b32a3/thumbnail.webp 1581w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5003162555344718}}}}}},{"node":{"id":"a461c2a8-2bad-5337-b071-76edeb6e8aee","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%98%BC%EC%9E%A1-%EC%9C%88%EB%8F%84%EC%9A%B0congestion-window-cwnd\">혼잡 윈도우(Congestion Window, CWND)</a></p>\n<ul>\n<li><a href=\"#%ED%98%BC%EC%9E%A1-%EC%9C%88%EB%8F%84%EC%9A%B0-%ED%81%AC%EA%B8%B0-%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0\">혼잡 윈도우 크기 초기화하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%98%BC%EC%9E%A1-%ED%9A%8C%ED%94%BC-%EB%B0%A9%EB%B2%95\">혼잡 회피 방법</a></p>\n<ul>\n<li><a href=\"#aimd\">AIMD</a></li>\n<li><a href=\"#slow-start\">Slow Start</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%98%BC%EC%9E%A1-%EC%A0%9C%EC%96%B4-%EC%A0%95%EC%B1%85\">혼잡 제어 정책</a></p>\n<ul>\n<li><a href=\"#3-ack-duplicated-timeout\">3 ACK Duplicated, Timeout</a></li>\n<li><a href=\"#slow-start-%EC%9E%84%EA%B3%84%EC%A0%90ssthresh\">Slow Start 임계점(ssthresh)</a></li>\n<li><a href=\"#tcp-tahoe\">TCP Tahoe</a></li>\n<li><a href=\"#tcp-reno\">TCP Reno</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"혼잡 제어란, 말 그대로 네트워크의 혼잡 상태를 파악하고 그 상태를 해결하기 위해 데이터 전송을 제어하는 것을 이야기한다. 네트워크는 워낙 광대한 블랙박스이기 때문에 정확히 어디서 어떤 이유로 전송이 느려지는지는 파악하기 힘들지만, 단순히 “느려지고있다”라는 상황 정도는 각 종단에서도 충분히 파악할 수 있다. 그냥 데이터를 보냈는데 상대방으로부터 응답이 늦게 오거나 안오면 뭔가 문제가 있다는 것이니 말이다. 이때 위에서 이야기한 흐름 제어나 오류 제어 기법들만을 사용하다보면 자연스럽게 재전송이라는 작업이 계속 반복될 수 밖에 없다…","html":"<p>혼잡 제어란, 말 그대로 네트워크의 혼잡 상태를 파악하고 그 상태를 해결하기 위해 데이터 전송을 제어하는 것을 이야기한다.</p>\n<p>네트워크는 워낙 광대한 블랙박스이기 때문에 정확히 어디서 어떤 이유로 전송이 느려지는지는 파악하기 힘들지만, 단순히 “느려지고있다”라는 상황 정도는 각 종단에서도 충분히 파악할 수 있다. 그냥 데이터를 보냈는데 상대방으로부터 응답이 늦게 오거나 안오면 뭔가 문제가 있다는 것이니 말이다.</p>\n<p>이때 위에서 이야기한 흐름 제어나 오류 제어 기법들만을 사용하다보면 자연스럽게 재전송이라는 작업이 계속 반복될 수 밖에 없다.</p>\n<p>이게 한두 녀석이 그러면 별 문제가 안될지도 모르지만, 네트워크는 워낙 다양한 친구들이 함께 이용하는 공간이다보니까 한번 네트워크가 뻑나기 시작하면 여기저기서 “나도 재전송할꺼야!”가 반복되면서 문제가 점점 악화될 것이다. 이를 네트워크의 혼잡 붕괴라고 부른다.</p>\n<p>그래서 이런 식으로 네트워크의 혼잡 상태가 감지되면, 이런 최악의 상황을 최대한 회피하기 위해 송신 측의 윈도우 크기를 조절하여 데이터의 전송량을 강제적으로 줄이게 되는데, 이것이 바로 혼잡 제어인 것이다.</p>\n<h2 id=\"혼잡-윈도우congestion-window-cwnd\" style=\"position:relative;\">혼잡 윈도우(Congestion Window, CWND)<a href=\"#%ED%98%BC%EC%9E%A1-%EC%9C%88%EB%8F%84%EC%9A%B0congestion-window-cwnd\" aria-label=\"혼잡 윈도우congestion window cwnd permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 <a href=\"/2019/11/22/tcp-flow-control-error-control/\">패킷의 흐름과 오류를 제어하는 TCP</a> 포스팅에서 TCP의 흐름 제어를 설명할 때 송신 측의 윈도우 크기는 수신 측이 보내준 윈도우 크기와 네트워크 상황을 함께 고려해서 정해진다는 이야기를 했었다.</p>\n<p>송신 측은 자신의 최종 윈도우 크기를 정할 때 수신 측이 보내준 윈도우 크기인 수신자 윈도우(RWND), 그리고 자신이 네트워크의 상황을 고려해서 정한 윈도우 크기인 혼잡 윈도우(CWND) 중에서 더 작은 값을 사용한다.</p>\n<p>즉, 아래 후술할 혼잡 제어 기법들이 늘였다 줄였다 하는 윈도우 크기는 송신 윈도우가 아니라 송신 측이 가지고 있는 “혼잡 윈도우 크기”인 것이다.</p>\n<p>참고로 RWND나 CWND가 그냥 윈도우라는 의미를 가지고 있기 때문에, 슬라이딩 윈도우에서 사용하는 윈도우와 같은 개념이라고 생각할 수 있는데, 얘네는 각각 수신자 윈도우 크기와 혼잡 윈도우 크기를 의미하는 숫자다.</p>\n<p>그럼 통신 중에는 어떻게든 네트워크의 혼잡도를 파악해서 혼잡 윈도우 크기를 유연하게 변경한다고 해도, 통신을 시작하기 전에는 이 혼잡 윈도우 크기를 어떻게 초기화하는 것일까?</p>\n<h3 id=\"혼잡-윈도우-크기-초기화하기\" style=\"position:relative;\">혼잡 윈도우 크기 초기화하기<a href=\"#%ED%98%BC%EC%9E%A1-%EC%9C%88%EB%8F%84%EC%9A%B0-%ED%81%AC%EA%B8%B0-%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"혼잡 윈도우 크기 초기화하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>통신을 하는 중간에는 ACK가 유실된다거나 타임아웃이 난다거나 하는 등의 정보를 사용하여 네트워크의 혼잡 상황을 유추할 수 있지만, 통신을 시작하기 전에는 그런 정보가 하나도 없기 때문에 혼잡 윈도우의 크기를 정하기가 조금 애매하다. 여기서 등장하는 것이 바로 “MSS(Maximum Segement Size)“이다.</p>\n<p>MSS는 한 세그먼트에 최대로 보낼 수 있는 데이터의 양을 나타내는 값인데, 대략 다음과 같은 계산을 통해 구할 수 있다.</p>\n<blockquote>\n<p><strong>MSS</strong> = MTU - (IP헤더길이 + IP옵션길이) - (TCP헤더길이 + TCP옵션길이)</p>\n</blockquote>\n<p>여기서 등장하는 MTU(Maximum Transmission Unit)라는 친구는 한번 통신 때 보낼 수 있는 최대 단위를 의미한다.</p>\n<p>즉, MSS는 한번 전송할 때 보낼 수 있는 최대 단위가 정해져있는 상황에서 IP 헤더, TCP 헤더 등 데이터가 아닌 부분을 전부 발라내고 진짜 데이터를 담을 수 있는 공간이 얼마나 남았는지를 나타내는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5b899382aa98f56f7c00f116ac55322e/d4b10/mtu-setting.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVR42u2UTWvbQBCG/UsM/pZlrVa7UqwoFlFqJ/ZBliyToIZeGsgtl5IcShqb9tyfbFh4OyPZJZdS0XMPDzPD7j6aRcy2xuNxaLveq22LZ8uyXobDYSOsYafGotyy+Owru1qTyWQvog8IowujtYJSNb7vQ2td8T6v92gIdQHhx7AdCRIZxxEc963RaLSTroQQ4hBFkdlutybLMlMURRWz9dps8tzklDNFnpl0Uxo/35mg/GnsMDWuYx1c6YFdLNzzlz3PMwSklJwjSRLMb24QX17iaj7HgvKr+QL+2Rkkd6gDuJ6q9vJZvhW7KiEXJ2EFSYPpFJ9W13hYLfDt8TPeiC/3d3i63RA57vNHBPqcGnD/LlSEQ9IH38FTco79XY4fHwt8Lzf4mi3xkl7jeXWLRAVwPNmgw5OYpNqlDoSAOsJ1jaA9suGV3yGrqI54f6K5sCH/hf8g5AFw6W8fY3X2JNyxkBYOvNAEGlOae23CMDzFw5QGoRo9fhy4sG3bEGgCvSyYzWYoyxJxHCNNU7NcLusOu93ugJ6jYjAYpP1+f92UTqfzm3a7nfZ6vYJdvwDAltCnclfZvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mtu setting\" title=\"\" src=\"/static/5b899382aa98f56f7c00f116ac55322e/6af66/mtu-setting.png\" srcset=\"/static/5b899382aa98f56f7c00f116ac55322e/69538/mtu-setting.png 160w,\n/static/5b899382aa98f56f7c00f116ac55322e/72799/mtu-setting.png 320w,\n/static/5b899382aa98f56f7c00f116ac55322e/6af66/mtu-setting.png 640w,\n/static/5b899382aa98f56f7c00f116ac55322e/d9199/mtu-setting.png 960w,\n/static/5b899382aa98f56f7c00f116ac55322e/21b4d/mtu-setting.png 1280w,\n/static/5b899382aa98f56f7c00f116ac55322e/d4b10/mtu-setting.png 1394w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>시스템 환경 설정에서 잘 찾아보면 기본 MTU를 변경할 수 있는 설정이 있다</small>\n</center>\n<p>OSX 같은 경우는 MTU 기본 값으로 이더넷 표준인 <code class=\"language-text\">1500 bytes</code>가 설정되어있다. 이때 TCP와 IP의 헤더크기가 각각 20 bytes라고 하면 MSS는 <code class=\"language-text\">1500 - 40 = 1460 bytes</code>가 되는 것이다.</p>\n<p>송신 측은 처음 통신을 시작할 때 이렇게 계산한 MSS를 사용하여 혼잡 윈도우의 크기를 <code class=\"language-text\">1 MSS</code>로 설정한다. 이후 통신을 하면서 네트워크의 혼잡 상황을 고려하며 혼잡 윈도우 크기를 증가시키거나 감소시키는 것이다.</p>\n<h2 id=\"혼잡-회피-방법\" style=\"position:relative;\">혼잡 회피 방법<a href=\"#%ED%98%BC%EC%9E%A1-%ED%9A%8C%ED%94%BC-%EB%B0%A9%EB%B2%95\" aria-label=\"혼잡 회피 방법 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>할배 프로토콜인 TCP는 지난 50년 동안 지속적으로 개선된 다양한 혼잡 제어 정책들을 가지고 있다.</p>\n<p>각 혼잡 제어 정책은 어떤 시점을 혼잡한 상태라고 파악할 것인지, 혼잡 윈도우 크기를 줄이거나 키우는 방법을 개선하여 점점 발전해왔지만, 가장 기본적인 혼잡 제어 방법은 AIMD와 Slow Start라는 혼잡 회피 방법을 상황에 맞게 조합하는 것이다.</p>\n<p>그래서 이 포스팅에서도 기본적인 혼잡 회피 방법인 AIMD와 Slow Start를 먼저 설명하고나서 대표적인 혼잡 제어 정책인 Tahoe와 Reno를 이야기할 것이다.</p>\n<h3 id=\"aimd\" style=\"position:relative;\">AIMD<a href=\"#aimd\" aria-label=\"aimd permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>AIMD(Additive Increase / Multicative Decrease) 방식은 우리 말로 직역하면 합 증가 / 곱 감소 방식이라는 뜻이다. 즉, 네트워크에 아직 별 문제가 없어서 전송 속도를 더 빠르게 하고 싶다면 혼잡 윈도우 크기를 1씩 증가시키지만, 중간에 데이터가 유실되거나 응답이 오지 않는 등의 혼잡 상태가 감지되면 혼잡 윈도우 크기를 반으로 줄인다.</p>\n<p>늘어날 때는 <code class=\"language-text\">ws + 1</code>, 줄어들 때는 <code class=\"language-text\">ws * 0.5</code>이므로 말 그대로 합 증가 / 곱 감소인 것이다. 이렇게 늘어날 때는 선형적으로 조금씩 늘어나고 줄어들 때는 반으로 확 줄어드는 AIMD 방식의 특성 상, 이 방식을 사용하는 연결의 혼잡 윈도우 크기를 그래프로 그려보면 다음과 같은 톱니 모양이 나타난다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 571px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1f8521aeeab86f9056a053a93f69adb1/17d73/aimd.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFElEQVR42oVRi26DMAzk/3+xUmkF0rpAV5oEJ3ZiZw70RTdtkWXsC3ecjkamqYjgPAdrS0qF6P9CLHratikxWueGYcAVKkXK+5G3QZZn1zV0vSJRAFjJshT/FNiI3cn9bjcDpJRijOvVnGVEfv3UGQVyHcOq+iCPXaeejTEnX8k+i0+i3S5dEZfkQkxcVxMrLyS+kU/7vdoWEeOCy/VVxUeUz8iqomtkQa5e5kXxmoQyP22P57OdLh8u2lQeztXhgMqsK/LNxRdW/GnbHA7W+9l7iPgWbJbfM3+S2Xsdcs6PwP7+WxuyAKxkH0JUCY39XoHIAWh/BSuOCMyl75viXNEpJdmW6hFA17ao6jlvbolqFMfjN/U+hHTP2SsOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"aimd\" title=\"\" src=\"/static/1f8521aeeab86f9056a053a93f69adb1/17d73/aimd.png\" srcset=\"/static/1f8521aeeab86f9056a053a93f69adb1/69538/aimd.png 160w,\n/static/1f8521aeeab86f9056a053a93f69adb1/72799/aimd.png 320w,\n/static/1f8521aeeab86f9056a053a93f69adb1/17d73/aimd.png 571w\" sizes=\"(max-width: 571px) 100vw, 571px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>증가할 때는 점진적으로, 감소할 때는 확 줄어드는 모습을 볼 수 있다</small>\n</center>\n<p>이 방식은 굉장히 심플하지만 생각보다 공평한 방식이다. 예를 들어 여러 친구들이 이미 네트워크를 점유하고 있는 상태에서 한 친구가 뒤늦게 이 네트워크에 합류했다고 생각해보자.</p>\n<p>당연히 나중에 진입한 쪽의 혼잡 윈도우 크기가 작기 때문에 처음에는 불리하다. 그러나 네트워크가 혼잡해지면 혼잡 윈도우 크기가 작은 놈보다 혼잡 윈도우 크기가 큰 놈이 무리하게 데이터를 왕창 보내려다가 유실될 확률도 더 크다.</p>\n<p>이런 상황이라면 네트워크에 일찍 참여해서 이미 혼잡 윈도우 크기가 큰 놈은 자신의 윈도우 크기를 줄여서 혼잡 상황을 해결하려고 할 것이고, 이때 남은 대역폭을 활용하여 나중에 들어온 놈들이 자신의 혼잡 윈도우 크기를 키울 수 있는 것이다.</p>\n<p>그런 이유로 시간이 가면 갈수록 네트워크에 참여한 순서와 관계 없이 모든 호스트들의 윈도우 크기가 평행 상태로 수렴하게 되는 것이다.</p>\n<p>그러나 AIMD의 문제점은 네트워크 대역이 펑펑 남아도는 상황에도 윈도우 크기를 너무 조금씩 늘리면서 접근한다는 것이다. 그런 이유로 AIMD 방식은 네트워크의 모든 대역을 활용하여 제대로 된 속도로 통신하기까지 시간이 조금 걸린다.</p>\n<h4 id=\"윈도우-크기가-수렴한다고\" style=\"position:relative;\">윈도우 크기가 수렴한다고?<a href=\"#%EC%9C%88%EB%8F%84%EC%9A%B0-%ED%81%AC%EA%B8%B0%EA%B0%80-%EC%88%98%EB%A0%B4%ED%95%9C%EB%8B%A4%EA%B3%A0\" aria-label=\"윈도우 크기가 수렴한다고 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>사실 AIMD는 워낙 단순한 방식이다 보니 간단한 예제를 통해 네트워크의 상황을 재현해볼 수도 있다. 이렇게 직접 구현해보면 말로만 들었을 때는 애매한 호스트들의 윈도우 크기가 평행으로 수렴한다는 것이 어떤 의미인지 직접 눈으로 확인해볼 수도 있다.</p>\n<p>코드를 직접 포스팅에 첨부하려고 했는데, 최대한 실제 네트워크와 비슷한 환경을 재현하려고 하다보니 코드가 생각보다 길어져서 결과만 첨부하려고 한다. 우선 필자의 실험 방식은 다음과 같다.</p>\n<blockquote>\n<ol>\n<li>네트워크의 혼잡도 최고치는 <code class=\"language-text\">50</code>이며, 이 혼잡도는 네트워크에 참여한 호스트들이 가진 혼잡 윈도우 크기의 총합으로 결정된다.</li>\n<li>네트워크에 호스트를 <code class=\"language-text\">300ms</code>에 하나씩 생성해서 추가한다.</li>\n<li>각 호스트는 <code class=\"language-text\">100 ~ 200ms</code> 마다 네트워크의 현재 혼잡도를 계산하고 자신의 윈도우 크기를 조절한다.</li>\n<li>각 호스트는 윈도우 크기 조절을 300회까지 수행하고 네트워크를 빠져나간다.</li>\n</ol>\n</blockquote>\n<p>참고로 이 테스트에는 약간의 허점이 있다. 필자는 호스트들의 연산에 동시성을 부여하기 위해 <code class=\"language-text\">setInterval</code>을 사용했는데, <code class=\"language-text\">setInterval</code>의 콜백도 이벤트 루프를 거친 후 결국 콜 스택을 쌓아가며 수행되기 때문에 실제 네트워크처럼 호스트들의 연산에 완전한 병렬성이 보장되지는 않는다.</p>\n<p>그래서 테스트의 목적인 네트워크에 늦게 참여한 호스트들도 충분한 혼잡 윈도우 크기를 가질 수 있는지 확인하는 용도로는 딱히 별 문제가 없기 때문에 그대로 진행했다.</p>\n<p>이에 대한 자세한 개념은 <a href=\"/2019/08/01/nodejs-event-loop-workflow/\">로우 레벨로 살펴보는 Node.js 이벤트 루프</a>에 자세히 설명되어있으니 확인해보도록 하자.</p>\n<p>어쨌든 이렇게 테스트를 해보고 나온 데이터들을 시계열 그래프로 시각화해보았다. 먼저 각 호스트들의 혼잡 윈도우 크기 변화를 살펴보자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/019ed4a2768805580d59e27bb7099b7a/42267/cwnd-chart.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVR42q2PC27EIAxEuf8lGyUbIKRhtyp/Q2Yn6RG2lkbPRuMPylqLGCOuOM8Tn4YSEfxbjBNqjPHxdec9i3OkQ5WSIU2oDpHGwQODm6R3tCHMBa1X1o2efHtqqehkbxUxBJRLKdw+Zc0DevmCNQs5YdMP7FbDmRVW803P5AyzLuQEw1zPE9w6Y2ePf37fSikjlAR1bSulIOeEWiuZ8fMb8Do2+MPBbzv5ZO3JF7x3cP5AiH9+aQ2Zv6zt6i14AwNI1E8L97aCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cwnd chart\" title=\"\" src=\"/static/019ed4a2768805580d59e27bb7099b7a/6af66/cwnd-chart.png\" srcset=\"/static/019ed4a2768805580d59e27bb7099b7a/69538/cwnd-chart.png 160w,\n/static/019ed4a2768805580d59e27bb7099b7a/72799/cwnd-chart.png 320w,\n/static/019ed4a2768805580d59e27bb7099b7a/6af66/cwnd-chart.png 640w,\n/static/019ed4a2768805580d59e27bb7099b7a/d9199/cwnd-chart.png 960w,\n/static/019ed4a2768805580d59e27bb7099b7a/21b4d/cwnd-chart.png 1280w,\n/static/019ed4a2768805580d59e27bb7099b7a/42267/cwnd-chart.png 2670w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>그래프를 살펴보니 먼저 네트워크에 들어와있던 호스트들과 뒤늦게 네트워크에 합류한 호스트들의 혼잡 윈도우 크기에 그렇게 큰 차이가 없는 모습을 확인할 수 있었다. 마지막에 혼자 치솟고 있는 친구는 다른 호스트들이 다 빠져나간 후에 네트워크가 텅텅 비어서 그런 것이다.</p>\n<p>이런 식으로 시각화를 해보니 각 호스트들의 혼잡 윈도우 크기가 큰 차이 없이 어느 부분에 수렴하고 있다는 것을 확인할 수 있었다. 그렇다면 네트워크에 들어와있는 호스트들의 전체 윈도우 크기는 시계열 그래프로 시각화해보면 어떨까?</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cf2d9c677da47dfd6436a1e7c31ef13d/1192d/total-cwnd-chart.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLUlEQVR42p2Qy3KjMBBF+f9/SxYm2OIlAQI9MA8Bg+MpV3JGk+Usp6vOpvv2qa5OnHWEEOD7m/+qf/aSM9w5TMfsNfPYck6Oc/bss+WxTjy2Kc5atr/9yfK53HmOltd58PXr5HfT8YpHvab5h0T3NXn2TpWlCCkQuqHsFaK7cpEZuUjJ8pSyEBTygiw/EJFS3TDVhSF/RxdvTDHzTK8kk8qZpGZRI1vZcHSOpb0zSEMrO7y44a6Ce11jqwot2yhqcXqgUJI8HnCzksJdWUVGImKwURWqiUT50Hzg2iIKFabJaLqM1tzoBoEtUroyo68UoS4ZlaIeN3y/YgeHVClJOB5sx8G6B8Kx/+CXBeM0xg+YGLR+xjpPH39lxh7tLcsaOPaNz/3kuUWiJ+wrfwA1Vr7W2+QK4gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"total cwnd chart\" title=\"\" src=\"/static/cf2d9c677da47dfd6436a1e7c31ef13d/6af66/total-cwnd-chart.png\" srcset=\"/static/cf2d9c677da47dfd6436a1e7c31ef13d/69538/total-cwnd-chart.png 160w,\n/static/cf2d9c677da47dfd6436a1e7c31ef13d/72799/total-cwnd-chart.png 320w,\n/static/cf2d9c677da47dfd6436a1e7c31ef13d/6af66/total-cwnd-chart.png 640w,\n/static/cf2d9c677da47dfd6436a1e7c31ef13d/d9199/total-cwnd-chart.png 960w,\n/static/cf2d9c677da47dfd6436a1e7c31ef13d/21b4d/total-cwnd-chart.png 1280w,\n/static/cf2d9c677da47dfd6436a1e7c31ef13d/1192d/total-cwnd-chart.png 2662w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>확실히 네트워크 내 전체 호스트의 혼잡 윈도우 크기를 보니 필자가 설정해놓은 네트워크 혼잡도인 <code class=\"language-text\">50</code>을 넘어가지 않는 선에서 자기들끼리 엎치락뒤치락 윈도우 크기를 조절하고 있는 모습을 확인할 수 있었다.</p>\n<p>마찬가지로 이 그래프를 확인해보아도 호스트들이 네트워크에 입퇴장하는 초반부와 후반부를 제외하면 중간 즈음에서는 각 호스트들의 혼잡 윈도우 크기가 크게 차이나지 않는다.</p>\n<p>이렇게 직접 상황을 시뮬레이션해보고 데이터를 확인하니 말로만 들었을 때는 잘 와닿지 않았던 “윈도우 크기가 평행 상태로 수렴한다”라는 이야기를 조금 더 잘 이해할 수 있었다.</p>\n<p>만약 이 코드를 직접 실행시켜서 모든 과정을 확인하고 싶은 분들은 필자가 올려놓은 <a href=\"https://github.com/evan-moon/tcp-congestion-test\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에서 클론받아서 실행시켜보면 된다.</p>\n<h3 id=\"slow-start\" style=\"position:relative;\">Slow Start<a href=\"#slow-start\" aria-label=\"slow start permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>위에서 이야기했듯이 AIMD 방식은 윈도우 크기를 선형적으로 증가시키기 때문에, 제대로 된 속도가 나오기까지 시간이 조금 걸리는 단점이 있다.</p>\n<p>사실 요즘에는 네트워크의 대역폭이 워낙 넓고 통신 인프라도 좋다보니 예전에 비해서 네트워크의 혼잡 상황 발생하는 빈도가 많이 줄어들었기 때문에, 혼잡이 발생하지도 않았는데 제대로 속도를 내는데까지 오래걸리는 AIMD 방식의 단점이 점점 부각되었다.</p>\n<p>반면, Slow Start는 기본적인 원리는 AIMD와 비슷하지만 윈도우 크기를 증가시킬 때는 지수적으로 증가시키다가 혼잡이 감지되면 윈도우 크기를 <code class=\"language-text\">1</code>로 줄여버리는 방식이다.</p>\n<p>이 방식은 보낸 데이터의 ACK가 도착할 때마다 윈도우 크기를 증가시키기 때문에 처음에는 윈도우 크기가 조금 느리게 증가할지 몰라도, 시간이 가면 갈수록 윈도우 크기가 점점 빠르게 증가한다는 장점이 있다.</p>\n<p>기본적으로 AIMD와 어떤 방식으로 윈도우 크기를 증가시키냐, 감소시키냐의 차이만 존재하기 때문에, 위에서 작성한 예시에서 윈도우 사이즈를 변경하는 부분만 변경하면 Slow Start의 차트를 그려볼 수 있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/88ad13152143dd8acea98a68b149d91e/963fa/slow-start-chart.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA90lEQVR42lWRi27DIAxF+///uE1qt5BACoSEBMLjzM20SUNcXWzZx5a4aa3x3lHLCb3L/dHr/Hrr7Z/31mmt/dVUiXutl27btpFSoJ6RnjOlV0orV3E5s3RArlmsX37l08lxHAJr5FwJqZD9ShHdjnQQD097AY+dVE9ySxco7dJUMnuKAknEUwbXfgFfizTZKO6FReLsN8oiwBhXpvGNyXyyzhPKGmyYWZcNqw1BK+xz5qnu3Md3zKAIUjd8Kpy8H4Pmy1jMx4M4W25JVvfeYkVhDSxhwYeA1iPmqdFKYQSsJ8WoRskPMlzjnCc4J25x8gfWOpYl8A3H6YItahN4cgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"slow start chart\" title=\"\" src=\"/static/88ad13152143dd8acea98a68b149d91e/6af66/slow-start-chart.png\" srcset=\"/static/88ad13152143dd8acea98a68b149d91e/69538/slow-start-chart.png 160w,\n/static/88ad13152143dd8acea98a68b149d91e/72799/slow-start-chart.png 320w,\n/static/88ad13152143dd8acea98a68b149d91e/6af66/slow-start-chart.png 640w,\n/static/88ad13152143dd8acea98a68b149d91e/d9199/slow-start-chart.png 960w,\n/static/88ad13152143dd8acea98a68b149d91e/21b4d/slow-start-chart.png 1280w,\n/static/88ad13152143dd8acea98a68b149d91e/963fa/slow-start-chart.png 2666w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>데이터를 확인해보면 필자가 정해놓은 네트워크 혼잡도의 최고치인 <code class=\"language-text\">50</code>보다 호스트들의 혼잡 윈도우 크기가 커지는 경우가 발생하는데, 이건 자바스크립트가 <code class=\"language-text\">setInterval</code>의 콜백을 처리하는 과정에서 발생한 문제이므로 실제 네트워크에서는 이러지 않는다. <small>(애초에 혼잡도를 이렇게 간단히 계산하지도 않는다)</small></p>\n<p>AIMD와 Slow Start 그래프의 가장 큰 차이점은 네트워크 혼잡도의 최고치에 도달하는 시간이다.</p>\n<p>AIMD는 윈도우 크기를 선형적으로 키워나가기 때문에 다른 호스트들이 새로 들어올 때 많은 부분을 점유할 수 없었지만, Slow Start 방식을 사용하면 처음에는 윈도우 크기를 느리게 키우다가 아직 여유가 있다고 판단되면 지수적으로 팍팍 증가시킬 수 있으므로 결과적으로 AIMD보다 윈도우 크기를 더 빠르게 키울 수 있는 것이다.</p>\n<p>최근의 TCP에서 사용하고 있는 Tahoe나 Reno와 같은 정책들은 AIMD와 Slow Start를 적절히 섞어서 사용하되, 네트워크 혼잡 상황이 발생했을 때 어떻게 대처하는 지에 따라서 나뉘어지게 된다.</p>\n<h2 id=\"혼잡-제어-정책\" style=\"position:relative;\">혼잡 제어 정책<a href=\"#%ED%98%BC%EC%9E%A1-%EC%A0%9C%EC%96%B4-%EC%A0%95%EC%B1%85\" aria-label=\"혼잡 제어 정책 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>TCP에는 Tahoe, Reno, New Reno, Cubic, 최근 나온 Elastic-TCP까지 일일히 나열하기에도 숨 가쁠 정도로 다양한 혼잡 제어 정책이 존재한다.</p>\n<p>이러한 혼잡 제어 정책들은 공통적으로 혼잡이 발생하면 윈도우 크기를 줄이거나, 혹은 증가시키지 않으며 혼잡을 회피한다는 전제를 깔고 있고, 최근에 나온 방법은 예전 방법들에 비해서 더 똑똑하게 혼잡 상황을 감지하고 네트워크 대역을 최대한 빠르고 안전하게 활용할 수 있는 방향으로 개발된 것이다.</p>\n<p>하지만 이 친구들을 이 포스팅에서 전부 설명하기는 힘드니, 이 중에서 가장 대표적이고 유명한 정책인 Tahoe와 Reno를 위주로 혼잡 제어의 기본 방식에 대해서 설명하려고 한다.</p>\n<p>Tahoe와 Reno는 기본적으로 처음에는 Slow Start 방식을 사용하다가 네트워크가 혼잡하다고 느껴졌을 때는 AIMD 방식으로 전환하는 방법을 사용하는 정책들이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ee0d539b474748716d8e1199b313356/1ac29/taheo_reno.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTUlEQVR42jWR2W7cMAxF/f+/0y8IigB9aoAm89RinIkXWV4lUQu1l/a050UUyQuKV42/SClFIl3EmFMqpeRc2G7bSd4nYTE8W2I8g5wzRU0IgcRn50VMOZUK2nDOJz6//Ly9vN1+3DpwodZycR61VmpuhBDGmKcy5PL66/Ht+/vrR6+0WI/BovRJk4zmLPM8jmM3PCxSptITm/u9lVJRzVqLQsiB8aE9YMGgaUJyqJbRewQFSstDcbGOARRqbYxt2rYFpRQAa1u9rrXUADJEF0OEiblt1+vk0Gz7ssxfou/stjtjNBwAuiGhQ0zOeSlzrWSap4zW7M/v/vPT+eD0Ifd5490x9HxkI2Nkx3PNJuWMAG5bYwhkMl291noYOGNCStrNGnns3eNx/+r68t804p/baIxHxOvP8MIAhBjdCRWNc/YQgta2F5Q9N1XqL8UGx+8sa/crAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"taheo reno\" title=\"\" src=\"/static/8ee0d539b474748716d8e1199b313356/6af66/taheo_reno.png\" srcset=\"/static/8ee0d539b474748716d8e1199b313356/69538/taheo_reno.png 160w,\n/static/8ee0d539b474748716d8e1199b313356/72799/taheo_reno.png 320w,\n/static/8ee0d539b474748716d8e1199b313356/6af66/taheo_reno.png 640w,\n/static/8ee0d539b474748716d8e1199b313356/d9199/taheo_reno.png 960w,\n/static/8ee0d539b474748716d8e1199b313356/1ac29/taheo_reno.png 1022w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>붉은 색이 Tahoe, 녹색이 Reno의 윈도우 크기를 나타낸다</small>\n</center>\n<p>위 그래프의 Y축은 혼잡 윈도우, X축은 시간으로 하여 Tahoe와 Reno의 작동 방식을 설명하고 있다. 본격적으로 Tahoe와 Reno를 알아보기에 앞서, 일단 이 그래프가 뭘 설명하고 있는지 빠르게 이해하기 위해 간단한 용어를 몇 가지만 짚고 넘어가도록 하겠다.</p>\n<p>그래프가 꺾이는 곳에 적혀있는 3 ACK Duplicated, Timeout과 그래프의 상승 폭이 변하고 있는 Threshold에 대해서 알아보도록 하자. <small>(그림의 철자가 이상한 이유는 영어가 아니라 이탈리아어라서 그런 것이니 신경쓰지말자)</small></p>\n<h3 id=\"3-ack-duplicated-timeout\" style=\"position:relative;\">3 ACK Duplicated, Timeout<a href=\"#3-ack-duplicated-timeout\" aria-label=\"3 ack duplicated timeout permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>일단 두 방식 모두 3 ACK Duplicated와 Timeout이라는 두 가지 시나리오가 발생하면 윈도우 크기를 줄이는 것을 확인해볼 수 있다. 즉, 이 두 상황이 혼잡 제어 정책들이 혼잡 발생을 감지하는 기본적인 상황인 것이다.</p>\n<p>타임아웃은 말 그대로 여러가지 요인으로 인해 송신 측이 보낸 데이터 자체가 유실되었거나, 수신 측이 응답으로 보낸 ACK가 유실되는 경우를 뜻하는 것이다.</p>\n<p>3 ACK Duplicated, 즉 송신 측이 3번 이상 중복된 승인 번호를 받은 상황 또한 정상적으로 데이터가 전송된 상황은 아닌데, 수신 측은 자신이 정상적으로 처리한 데이터에 대해서만 ACK를 보내기 때문에 동일한 승인 번호를 세 번이나 받은 상황은 어떤 이유로 인해 수신 측이 특정 시퀀스 번호 이후의 데이터를 제대로 처리하지 못한 상황이라고 볼 수 있다.</p>\n<p>단, 패킷 전송 방식을 사용하는 TCP의 특성 상 수신 측이 받는 패킷의 순서가 늘 순서대로 받으리라는 보장은 없으므로, 한 두개의 중복 승인 번호가 발생했다고 해서 바로 네트워크가 혼잡하다고 판단하지는 않는다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/41dd4882153e87b8f1db9ae7f6353451/813c1/fast-transmit.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.12499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVR42o1T223CQBAcx287NsGghIBBSWpASgtpIQ3wTy9UQXNpIXt4VlkdtnMrjVl79+ZmHwBAhMEWgqPgA+Omee+CT8EbAuxZ8Ch4ECQTOS7WmAtm7UlQCmpBQb8geWyU1iFkOAPdF9CegAoD3MGcqgtz2ZJ+Mkv4DawvcvhHlF7/SlfilhW07N+eF81a7/ooj7IbDqqyVJDRd/17EaxCSneJa6pQwoa/NUkTxhIi5/fYnxyYWNDX5NIQuriIx5YbsaG/YezOdAixUaDEOii3rwcS9eznjvvrqrkp0jV5ZeMjEqVmZSx0YLEXv1Xamdu2fG/MMMb+MWF76O1WZtRXfE9JWP1HFI0Q+vGcaNizIMv98U+QTyr8BdWrC5EqySd2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"fast transmit\" title=\"\" src=\"/static/41dd4882153e87b8f1db9ae7f6353451/6af66/fast-transmit.png\" srcset=\"/static/41dd4882153e87b8f1db9ae7f6353451/69538/fast-transmit.png 160w,\n/static/41dd4882153e87b8f1db9ae7f6353451/72799/fast-transmit.png 320w,\n/static/41dd4882153e87b8f1db9ae7f6353451/6af66/fast-transmit.png 640w,\n/static/41dd4882153e87b8f1db9ae7f6353451/d9199/fast-transmit.png 960w,\n/static/41dd4882153e87b8f1db9ae7f6353451/21b4d/fast-transmit.png 1280w,\n/static/41dd4882153e87b8f1db9ae7f6353451/813c1/fast-transmit.png 2004w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>TCP는 현재까지 누적된 정상 데이터 중 가장 마지막 데이터에 대한 승인 번호를 보내주는 누적 승인 방식(Cumulative Acknowledgement)을 사용하기 때문에, 송신 측이 같은 승인 번호를 계속 중복해서 받는다면 해당 데이터까지는 정상적으로 전송되었으나 그 이후부터는 뭔가 문제가 발생했다고 알 수 있는 것이다.</p>\n<p>이때 3번의 중복 승인 번호로 인해 송신 측이 바로 해당 승인 번호에 해당하는 데이터를 전송하고나면 수신 측은 Go back N이나 Selective Repeat과 같은 오류 제어 방식에 따라서 다음에 어떤 패킷부터 보내줘야하는지 알려줄 것이다.</p>\n<p>이런 상황일 경우, 송신 측은 자신이 설정한 타임아웃 시간이 지나지 않았어도 바로 해당 패킷을 재전송할 수 있는데, 이 기법을 <a href=\"https://www.isi.edu/websites/nsnam/DIRECTED_RESEARCH/DR_HYUNAH/D-Research/fast-retransmit.html\" target=\"_blank\" rel=\"nofollow\">빠른 재전송(Fast Retransmit)</a>이라고 한다.</p>\n<p>만약 빠른 재전송 기법을 사용하지 않는다면, 송신 측은 자신이 설정한 타임아웃 시간이 지난 이후에야 대처할 수 있기 때문에 에러난 데이터를 재전송하기까지 시간이 낭비되게 될 것이다.</p>\n<h3 id=\"slow-start-임계점ssthresh\" style=\"position:relative;\">Slow Start 임계점(ssthresh)<a href=\"#slow-start-%EC%9E%84%EA%B3%84%EC%A0%90ssthresh\" aria-label=\"slow start 임계점ssthresh permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Tahoe와 Reno를 비교하는 그래프를 보면 Threshold(임계점)라는 단어가 꽤 많이 등장하고 있는 것을 볼 수 있는데, 이 임계점은 Slow Start Threshold(ssthresh)를 뜻하는 것으로, “여기까지만 Slow Start를 사용하겠다”라는 의미를 가진다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 539px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4dd1f6d8c7b9d31ff90f21619da03947/10f9a/ssthresh.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFUlEQVR42pWSSW6FQAxEuf/N2HABJMQkJiEQ8/zJC/VFfkhvUouW2+6yXW1b53nWde37fhRF4zie/4HV932WZWVZ7vt+HMf+G/Ks64phIA/DUBRF0zT7H2zbNs/zeAG+gTxNUxAESZJsH4ApGsbrAk4DmZR03rYtLz4DMJdlkW0k47RkUedBRg5ljWT1RVUrDMM4jpHNRToV67oOj64YqLsNOtL/fX8YHfKUu+TxgrDEy0NIEjjJ+6P5Vnh/r97pw2+ypkXoU50lSYyqvUAW8dXRdAGDEP7HLN+VqSnN92IoxXFBHUmOQMaqqt5klUI5q4pXw8vzvLigLXgMMk1T6x4GJ0vK53ueh6GddxzHtm3XdY27/QXAbvf3UeGvvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ssthresh\" title=\"\" src=\"/static/4dd1f6d8c7b9d31ff90f21619da03947/10f9a/ssthresh.png\" srcset=\"/static/4dd1f6d8c7b9d31ff90f21619da03947/69538/ssthresh.png 160w,\n/static/4dd1f6d8c7b9d31ff90f21619da03947/72799/ssthresh.png 320w,\n/static/4dd1f6d8c7b9d31ff90f21619da03947/10f9a/ssthresh.png 539w\" sizes=\"(max-width: 539px) 100vw, 539px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이 값을 사용하는 이유는 Slow Start를 사용하며 윈도우 크기를 지수적으로 증가시키다보면 어느 순간부터는 윈도우 크기가 기하급수적으로 늘어나서 제어가 힘들어지기도 하고, 네트워크의 혼잡이 예상되는 상황에서는 빠르게 값을 증가시키는 것보다 돌다리 두들겨 건너듯이 조금씩 증가시키는 편이 훨씬 안전하기 때문이다.</p>\n<p>쉽게 생각해서 현재 윈도우 크기가 <code class=\"language-text\">10</code>이고 현재 네트워크에 남은 공간이 <code class=\"language-text\">15</code>라고 할 때, Slow Start 방식으로 윈도우 크기를 증가시키면 <code class=\"language-text\">20</code>을 넘겨버리지만 합 증가를 하게 되면 앞으로 한 5번은 윈도우 크기를 더 증가시킬 수 있다.</p>\n<p>그래서 특정한 임계점을 정해놓고, 임계점을 넘어가게되면 AIMD 방식을 사용하여 선형적으로 윈도우 크기를 증가시킨다. 그래서 이 임계점을 칭하는 단어가 Slow Start Threshold(ssthresh)인 것이다.</p>\n<p>송신 측은 본격적인 통신이 시작하기 전에 ssthresh 값을 자신의 혼잡 윈도우의 절반 크기인 <code class=\"language-text\">0.5 MSS</code>으로 초기화하고, 이후 어떤 혼잡 제어 방법을 사용하냐에 따라 다르게 대처하게된다.</p>\n<h3 id=\"tcp-tahoe\" style=\"position:relative;\">TCP Tahoe<a href=\"#tcp-tahoe\" aria-label=\"tcp tahoe permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP Tahoe는 Slow Start를 사용한 혼잡 제어 정책의 초기 버전으로, 위에서 설명한 빠른 재전송(Fast Retransmit) 기법이 처음으로 도입된 방법이다. Tahoe 이후의 혼잡 제어 정책은 Tahoe와 마찬가지로 빠른 재전송 기법을 기본으로 사용하되, 효율을 위해 몇 가지 양념을 더 치게 된다.</p>\n<p>참고로 TCP Tahoe는 미국 네바다주에 있는 타호 호수의 이름을 따서 지어졌으므로 그냥 “타호”라고 읽으면 된다. <small>(타호에가 아니다!)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/672252932977a8df688679a0e462d3c2/01ab0/lake_tahoe.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABds1gbSUt/8QAGhABAQACAwAAAAAAAAAAAAAAAQIAAwQRIf/aAAgBAQABBQKd9mOyXHkyM0invQZ//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AbGP/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEDERP/2gAIAQIBAT8BUlGjP//EABoQAAICAwAAAAAAAAAAAAAAAAAREDEhMqH/2gAIAQEABj8CpmWzXpc//8QAGBABAQEBAQAAAAAAAAAAAAAAAQARIXH/2gAIAQEAAT8h4i4gJ9EkBucKiJWxoAwv/9oADAMBAAIAAwAAABCIH//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxClZf/EABcRAQADAAAAAAAAAAAAAAAAAAABEUH/2gAIAQIBAT8Q0puf/8QAGhABAQADAQEAAAAAAAAAAAAAAREAITGRgf/aAAgBAQABPxDQakEYn2byleO1e5XKjFlvmIg5Ig9Mhy8zWEPDP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lake tahoe\" title=\"\" src=\"/static/672252932977a8df688679a0e462d3c2/c08c5/lake_tahoe.jpg\" srcset=\"/static/672252932977a8df688679a0e462d3c2/0913d/lake_tahoe.jpg 160w,\n/static/672252932977a8df688679a0e462d3c2/cb69c/lake_tahoe.jpg 320w,\n/static/672252932977a8df688679a0e462d3c2/c08c5/lake_tahoe.jpg 640w,\n/static/672252932977a8df688679a0e462d3c2/6a068/lake_tahoe.jpg 960w,\n/static/672252932977a8df688679a0e462d3c2/eea4a/lake_tahoe.jpg 1280w,\n/static/672252932977a8df688679a0e462d3c2/01ab0/lake_tahoe.jpg 1300w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>왜 여기서 이름을 따왔는지는 모르겠지만 호수가 이쁘긴 하다</small>\n</center>\n<p>Tahoe는 처음에는 Slow Start를 사용하여 자신의 윈도우 크기를 지수적으로 빠르게 증가시키다가 Slow Start Threshold를 만난 이후부터는 AIMD에서 사용하는 합 증가 방식을 사용하여 선형적으로 윈도우 크기를 증가시킨다.</p>\n<p>그러다가 위에서 언급한 ACK Duplicated나 Timeout이 발생하면 네트워크에 혼잡이 발생했다고 판단하고, Slow Start Threshold와 자신의 윈도우 크기를 수정하게 된다. 조금 더 편한 이해를 위해 Tahoe의 혼잡 윈도우 크기 변화 그래프를 살펴보도록 하자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1a6a5314e2aa526f2fa7a406638af3ac/ccf0c/tahoe-ssthresh.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACf0lEQVR42mNgYGBgB2JWIGb4//8/Iwgz4AAweXwYpE5IREREEshhrq+vZwNilpvLl9teXb0y7Nrq5UHX168Jvr5iafCN1cv91/f3C4SuWgVTxzZz5kxWdDbIQG4gEAOZDjIMJHB37Zq1F5Yv/XF1xfIn55Ysen184fwPV1ateHJ//nwFkDxQHRMIh4aGMq8CYaAloVAaJC/BxcUlATMwLS2NdX98PcexR8c45zTWWh7zdLWe+f8/64mJE/kubVkq+P/YMaH/u3cL71y0iBtqMAsyBhkoIyoqKrF//36QABvIlvj18wUSVs3TTVs6U6Nw3mRdkKLz69cLPNy04fKpJYuenFu25NvLbVuaQOLz58/ngAUVzMsy4uLiYmABBgYmVQsLM7/qEpesKVN4coGuyly9QA+kCOhdjpcH97lfbWlovDtrevLNzZv1gcJMIAcUL+rmzp07V7Te3h7sQnk+Pj4hECMNGLDxs3uMXWNiuIFcFvv4eIGY6b36wsLCvIJSgrIiNXmqSY0lloW99UKwmM9et1A4e/Uck4y1i8RgYlIgL4NiGeSijNULDf8zMDDWr1rFBgrobKDX4+vrOcwiAp0svV11EidOFI1uazQF6hMMqK0wzloyy6B+5kwuUOTAvMwrIiciCWKkz5+ukLlwtibIQJAhYBesWGyUtXqBdvnu9br/gd4r2rRUJHZGv6VJsI+nXUK06f96BibkpAPSw8nDwyNSvWO9bPbaeUYzz5xhBbqWCZYE8jYuE89ZM1+jHhiG4JQAdHnOzlWKnQ/PSoH4oHS5CpI24Xp45GxMlDxrynUFlZT4QXwgBtF8UJoLiEFe4YXyQTQnFMPUwTAvAI+yOQfWAhMfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tahoe ssthresh\" title=\"\" src=\"/static/1a6a5314e2aa526f2fa7a406638af3ac/6af66/tahoe-ssthresh.png\" srcset=\"/static/1a6a5314e2aa526f2fa7a406638af3ac/69538/tahoe-ssthresh.png 160w,\n/static/1a6a5314e2aa526f2fa7a406638af3ac/72799/tahoe-ssthresh.png 320w,\n/static/1a6a5314e2aa526f2fa7a406638af3ac/6af66/tahoe-ssthresh.png 640w,\n/static/1a6a5314e2aa526f2fa7a406638af3ac/d9199/tahoe-ssthresh.png 960w,\n/static/1a6a5314e2aa526f2fa7a406638af3ac/21b4d/tahoe-ssthresh.png 1280w,\n/static/1a6a5314e2aa526f2fa7a406638af3ac/ccf0c/tahoe-ssthresh.png 1428w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>위 그래프에서 청록색 선은 송신 측의 혼잡 윈도우 크기를, 굵은 검정선은 ssthresh 값을 보여주고 있다. 이 시나리오에서 송신 측의 혼잡 윈도우 크기는 <code class=\"language-text\">8</code>로 초기화되었고, 그에 따라 ssthresh는 <code class=\"language-text\">8 * 0.5 = 4</code>로 설정된 것을 볼 수 있다.</p>\n<p>송신 측은 임계점을 만나기 전까지 Slow Start 방식을 사용하여 자신의 윈도우 크기를 지수적으로 증가시키다가 ssthresh를 넘어선 이후부터는 선형적으로 증가시키고 있다. 이때 3 ACK Duplicated나 Timeout과 같은 혼잡 상황이 발생하면 어떻게 될까?</p>\n<p>그래프를 보면 가장 처음 혼잡 상황이 발생한 상태의 혼잡 윈도우 크기는 <code class=\"language-text\">6</code>이다. 이때 송신 측은 ssthresh를 6의 절반인 <code class=\"language-text\">3</code>으로 변경하고, 자신의 혼잡 윈도우 크기를 다시 <code class=\"language-text\">1</code>로 변경하는 모습을 확인할 수 있다. 이후 다시 Slow Start로 시작하여 임계점에 도달하면 합 증가로 변경하는 방법을 반복하게 된다.</p>\n<p>즉, 이전에 한 대 맞았던 지점을 기억하고 그 지점이 가까워지면 조금씩 몸을 사리는 원리인 것이다. 이런 접근법은 나름 합리적인 방법이다.</p>\n<p>그러나 실버 불렛은 없는 법. Tahoe의 단점은 초반의 Slow Start 구간에서 윈도우 크기를 키울때 너무 오래 걸린다는 것이다. 물론 전체적으로 보았을 때 합 증가 방식보다는 지수 증가 방식이 빠르겠지만, 그래도 혼잡 상황이 발생했을 때 다시 윈도우 크기를 <code class=\"language-text\">1</code>부터 키워나가야 한다는 점은 어찌보면 낭비일 수도 있다.</p>\n<p>그래서 나온 방법이 빠른 회복(Fast Recovery) 방식을 활용한 TCP Reno이다.</p>\n<h3 id=\"tcp-reno\" style=\"position:relative;\">TCP Reno<a href=\"#tcp-reno\" aria-label=\"tcp reno permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP Reno는 TCP Tahoe 이후에 나온 정책으로, Tahoe와 마찬가지로 Slow Start로 시작하여 임계점을 넘어서면 합 증가로 변경하는 방법이다.</p>\n<p>그러나 Tahoe는 명확한 차이가 있는데, 바로 3 ACK Duplicated와 Timeout을 구분한다는 것이다. Reno는 3개의 중복 ACK가 발생했을 때, 윈도우 크기를 1로 줄이는 것이 아니라 AIMD처럼 반으로만 줄이고 sshthresh를 줄어든 윈도우 값으로 정하게 된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9ab8c0fb62bc0bfe27f965026b6a01d5/ccf0c/reno-ssthresh.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVR42mNgYGBgB2JWIGb4//8/Iwgz4AAweXwYpE5IREREEshhrq+vZwNilpvLl9teXb0y7Nrq5UHX168Ivr5iafCN1cv9N3R28oJNDg1ltgeqmzlzJisIg/TBaJA0NxCIgUwHGQYSuLt2zdoLy5f+uLpi+ZNzSxa9PrFowfsrK1c8uzFnjvPLVatU3q1fr3tp9mxxoFLGVatWMYMwSC+IBumX4OLikoAZmJaWxro/vp7j2KNjnHMaay2P+3jYAP3KdH3ZHKnnO7bfurR2zavL69f8f7V7eztI87Zt29hB+v7X1zPBHCQjKioqsX//fhaQk0G2xK+fLxC3bLZe4tyJWpkLJuiBFM00Blq0Zb3BvoyU7DOlpbbXtq+VtLe3BxtUOHu2UO7iWTJwA8XFxcVAnHoGBiZVCwsz7+oSl6Q5c3hnnpnJmr1+ie78/fs5yrevVwjYtk65ZMksg4pp7YIgjatA4b5/m0zB6oUmIENDgWELEpfn4+MTAjHSgAEbP7vH2DUmhtvY2BgU8yLuxdkOgS1V3nZpCbpAPr95fLiCR3GmKZDN61FdZOOSm2IhaSzJBdIPdBQTiJYCeRkUy7kTJ/JlrF5o+B8Y2DPPnGFVUVHh4xPlU+YVEVEFqpMDYkVlCwsj41AfGx13Z0s9UPgCfaimpiZSDwqy0FBwLPOKyIlIghjp86crZC6crQkyMDc3lx0cQUCFIAy0kAUccTtWCZXtWWdWvnu97kRghIAcAkoyILWwZMPJw8MjUr1jvWz22nlGIJcBFTFBkwKYBoUNCIP4II3pS+epAoOHH2QxSBxZLchAHjkbEyXPmnJdQSUlfhAfFFZAzIcHc0DVoYvzAgAyVDLF8aGvfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reno ssthresh\" title=\"\" src=\"/static/9ab8c0fb62bc0bfe27f965026b6a01d5/6af66/reno-ssthresh.png\" srcset=\"/static/9ab8c0fb62bc0bfe27f965026b6a01d5/69538/reno-ssthresh.png 160w,\n/static/9ab8c0fb62bc0bfe27f965026b6a01d5/72799/reno-ssthresh.png 320w,\n/static/9ab8c0fb62bc0bfe27f965026b6a01d5/6af66/reno-ssthresh.png 640w,\n/static/9ab8c0fb62bc0bfe27f965026b6a01d5/d9199/reno-ssthresh.png 960w,\n/static/9ab8c0fb62bc0bfe27f965026b6a01d5/21b4d/reno-ssthresh.png 1280w,\n/static/9ab8c0fb62bc0bfe27f965026b6a01d5/ccf0c/reno-ssthresh.png 1428w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>위 그래프는 앞서와 마찬가지로 청록색으로 송신 측의 혼잡 윈도우 크기를, 굵은 검정선으로 ssthresh를 표현하고 있다.</p>\n<p>Reno는 Tahoe와 다르게 3개의 중복 ACK가 발생했을 때는 혼잡 윈도우 크기를 1로 줄이는 것이 아니라 반으로 줄인 후 합 증가를 하게 되는데, 이 방식은 혼잡 윈도우 크기를 1로 줄이고 처음부터 다시 시작하는 Tahoe에 비해서 빠르게 원래 윈도우 크기에 도달할 수 있기 때문에 빠른 회복(Fast Recovery)이라고 불린다.</p>\n<p>이때 ssthresh는 줄어든 윈도우의 크기와 동일하게 설정하게 된다. 위 그래프에서도 혼잡 상황이 발생하자 혼잡 윈도우 크기를 <code class=\"language-text\">6</code>에서 <code class=\"language-text\">3</code>으로 줄이고 ssthresh 또한 <code class=\"language-text\">3</code>으로 설정하는 모습을 볼 수 잇다.</p>\n<p>그러나 만약 타임아웃에 의해 데이터가 손실되면 Tahoe와 마찬가지로 윈도우 크기를 바로 1로 줄여버리고 Slow Start를 진행하고 이때는 ssthresh를 변경하지 않는다.</p>\n<p>즉, ACK가 중복된 상황과 타임아웃이 발생한 상황을 구분하면서 대처를 다르게 하고 있는 것이다. ACK 중복은 타임아웃에 비해 그리 큰 혼잡이 아니라고 가정하고 혼잡 윈도우 크기를 <code class=\"language-text\">1</code>로 줄이지도 않는다는 점에서 어느 정도 혼잡 상황에 경중을 따지고 있다는 것도 알 수 있다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이번에는 TCP의 혼잡 제어 정책에 대해서 알아보았다. 사실 필자가 포스팅에서 소개한 Taheo와 Reno 같은 혼잡 제어 정책은 최근에는 많이 사용되지 않는 구식이다.</p>\n<p>예전에 개발된 Tahoe나 Reno 같은 경우는 말 그대로 예전의 네트워크 환경을 고려하며 설계된 친구들이라 최근의 대역폭 빵빵한 네트워크에는 다소 맞지 않는 것이 현실이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 398px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/dec2a168ed319557e87c6c34fa3afc85/692d4/cubic_vs_tahoe.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACbklEQVR42oWSzW7TQBCA3QYhWiEhcWlTiVDuPAHPkEsRUg/QoB7KAcRrIPomNBbqAZWUQzGKFFFU4kaImJBfx47b+i+xE+en9nqH2bhGKRQx0mhmZzXfzswOl81mExyKKIoPOpqzpyjaTq32k6/X63ytVuNt2+Ydx/lLbdvhTdPhXdfhe73eG9d1c7IsP+YEQbiGvJv5fH4TUNyeSxRVgU6nA4qigO/7MCuURtbzAAwj8sMwDJg1DGObS6fTiwhMFIvFJywYBP5kNBoFk8kk8DwvYMLCsYZhZLtdCFqtyCcExiwXu3nFLS0trSLweqlU2oheoySu4iqJ72wboFq9XKFlWa+5ZDKZQuAizjATA1Evkuk/gaxdVb0CuLy8fHe2QkIomTb5nwoZUJIA+v0pcppxcoLAlZWVOwxYLEbAXo+Sw8PLyczGijMETQNwHIBKBUCWIyC7UxQE4gzvIXAhBppGSI6OosRZUAxnIFGM/DF+ha6zjwzZZ+EdAlOpVBKB88fH36a/bJqEWFYIPyQKdDpLCq5LwdApWCbFdaIwGkZx9kpbpqB1SBA9hkC0bLETX0TxKQvq6rlPKJAzHUhThnA0BlKpAvkuAanWgJg2hGzUiCPMnhlA2iqc/16bCyAntpsZ6Bjgfm0Q6Dtw3h2ALnlglIcwUF3sCzfZHwKMBlgKngcDNnDs24NwPIgW27K2GXCOAXO53OrpqbF+sPduq1QobDTL5fX8x93nk7629unD+2eFA2HzTNHWdrPZlyeNxqPPgrAp7O9v6S314dsd/kVTkjJ1SbrPXSFzM/78jL/A9vWPeyY3UG+j3mLb8gt3bCsK4xoUeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cubic vs tahoe\" title=\"\" src=\"/static/dec2a168ed319557e87c6c34fa3afc85/692d4/cubic_vs_tahoe.png\" srcset=\"/static/dec2a168ed319557e87c6c34fa3afc85/69538/cubic_vs_tahoe.png 160w,\n/static/dec2a168ed319557e87c6c34fa3afc85/72799/cubic_vs_tahoe.png 320w,\n/static/dec2a168ed319557e87c6c34fa3afc85/692d4/cubic_vs_tahoe.png 398w\" sizes=\"(max-width: 398px) 100vw, 398px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>높은 대역폭에서의 Tahoe와 CUBIC의 효율 차이를 보면 어마무시하다</small>\n</center>\n<p>사실 Tahoe나 Reno가 개발된 시절의 네트워크 대역폭에 비교하면 최근의 네트워크 대역폭은 적어도 1,000배는 더 여유가 있지 않을까?</p>\n<p>그 말인 즉슨, 송신 측이 자신의 혼잡 윈도우 크기를 마음 놓고 팍팍 늘렸을 때 문제가 발생할 확률이 예전보다 많이 낮아졌다는 뜻이다. 그래서 최근의 혼잡 제어 정책들은 얼마나 더 빠르게 혼잡 윈도우 크기를 키우고, 어떻게 혼잡 감지를 더 똑똑하게 할 것이냐에 대해 초점이 맞춰져있다.</p>\n<center>\n  <img src=\"/2eb82cf5c7758194f2ec3b424cd04b32/cubic_function.gif\" width=\"100%\">\n  <small>\n    3차 함수의 특성을 사용하는 TCP CUBIC은 혼잡을 회피할 때는 거의 윈도우 크기를 증가시키지 않다가, 혼잡이 해결되면 다시 폭발적으로 증가시킬 수 있다\n  </small>\n  <br>\n  <br>\n</center>\n<p>그러나 필자가 굳이 예전 방식인 Tahoe와 Reno를 소개한 이유는 TCP 사용 초반에 개발된 혼잡 제어 방식인 만큼 원리가 간단하기도 하고, 이후 개발된 방식들도 큰 틀은 Tahoe와 Reno와 같은 매커니즘에서 크게 벗어나지 않기 때문이다.</p>\n<p>이 포스팅은 다양한 혼잡 제어 정책을 알아보는 것이 아니라, 혼잡 제어라는 매커니즘 자체가 어떤 식으로 흘러가는지 아는 것이 목표이므로 굳이 다른 혼잡 제어 정책은 소개하지 않았다.</p>\n<p>만약 최근에 사용하는 혼잡 제어 정책이 궁금하신 분들은 아래 첨부한 링크에서 조금 더 살펴보도록 하자.</p>\n<blockquote>\n<ul>\n<li><a href=\"http://squidarth.com/rc/programming/networking/2018/08/01/congestion-cubic.html\" target=\"_blank\" rel=\"nofollow\">CUBIC</a></li>\n<li><a href=\"http://squidarth.com/rc/programming/networking/2018/08/01/congestion-red.html\" target=\"_blank\" rel=\"nofollow\">RED</a></li>\n<li><a href=\"https://ieeexplore.ieee.org/document/8642512\" target=\"_blank\" rel=\"nofollow\">Elastic TCP</a></li>\n</ul>\n</blockquote>\n<p>이상으로 사이 좋게 네트워크를 나눠 쓰는 방법, TCP의 혼잡 제어 포스팅을 마친다.</p>","fields":{"slug":"20191126-tcp-congestion-control","path":"/2019/11/26/tcp-congestion-control/","lang":"ko"},"frontmatter":{"title":"사이 좋게 네트워크를 나눠 쓰는 방법, TCP의 혼잡 제어","subTitle":"윈도우 크기 조절로 네트워크를 조율하는 TCP의 전략 알아보기","date":"Nov 26, 2019","categories":["프로그래밍","네트워크"],"tags":["TCP","Congestion Control","혼잡 제어","AIMD","Slow Start","CWND","TCP Tahoe","TCP Reno"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#085898","images":{"fallback":{"src":"/static/45252c4560c0c973b1e5157d6a3c19ce/d803c/thumbnail.png","srcSet":"/static/45252c4560c0c973b1e5157d6a3c19ce/8c230/thumbnail.png 80w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/23e25/thumbnail.png 160w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/d803c/thumbnail.png 320w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/45252c4560c0c973b1e5157d6a3c19ce/3e5ca/thumbnail.webp 80w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/b72f1/thumbnail.webp 160w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/fc5c5/thumbnail.webp 320w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#085898","images":{"fallback":{"src":"/static/45252c4560c0c973b1e5157d6a3c19ce/3fbb4/thumbnail.png","srcSet":"/static/45252c4560c0c973b1e5157d6a3c19ce/61846/thumbnail.png 750w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/d5395/thumbnail.png 1080w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/cc835/thumbnail.png 1366w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/45252c4560c0c973b1e5157d6a3c19ce/6858b/thumbnail.webp 750w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/f5547/thumbnail.webp 1080w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/29310/thumbnail.webp 1366w,\n/static/45252c4560c0c973b1e5157d6a3c19ce/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"b23c6c7a-7079-5796-b01b-91b0667d3e9e","tableOfContents":"<ul>\n<li>\n<p><a href=\"#tcp%EC%9D%98-%ED%9D%90%EB%A6%84-%EC%A0%9C%EC%96%B4\">TCP의 흐름 제어</a></p>\n<ul>\n<li><a href=\"#stop-and-wait\">Stop and Wait</a></li>\n<li><a href=\"#sliding-window\">Sliding Window</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tcp%EC%9D%98-%EC%98%A4%EB%A5%98-%EC%A0%9C%EC%96%B4\">TCP의 오류 제어</a></p>\n<ul>\n<li><a href=\"#%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%96%88%EB%8B%A4%EB%8A%94-%EA%B2%83%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%95%8C-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94\">오류가 발생했다는 것은 어떻게 알 수 있나요?</a></li>\n<li><a href=\"#stop-and-wait-1\">Stop and Wait</a></li>\n<li><a href=\"#go-back-n\">Go Back N</a></li>\n<li><a href=\"#selective-repeat\">Selective Repeat</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"TCP(Transmission Control Protocol)는 원활한 통신을 위해 전송하는 데이터 흐름을 제어하고 네트워크의 혼잡 상태를 파악해서 대처하는 기능을 프로토콜 자체에 포함하고 있다. 만약 TCP가 이런 기능들을 제공해주지 않는다면 개발자가 일일히 데이터를 어떤 단위로 보낼 것인지 정의해야하고, 패킷이 유실되면 어떤 예외처리를 해야하는 지까지 신경써야하기 때문에 TCP가 제공해주는 이러한 기능들 덕분에 우리는 온전히 상위 레이어의 동작에만 집중할 수 있는 것이다. 보통 TCP의 전송 제어 방법은 전송되는 데이터의 양을…","html":"<p>TCP(Transmission Control Protocol)는 원활한 통신을 위해 전송하는 데이터 흐름을 제어하고 네트워크의 혼잡 상태를 파악해서 대처하는 기능을 프로토콜 자체에 포함하고 있다.</p>\n<p>만약 TCP가 이런 기능들을 제공해주지 않는다면 개발자가 일일히 데이터를 어떤 단위로 보낼 것인지 정의해야하고, 패킷이 유실되면 어떤 예외처리를 해야하는 지까지 신경써야하기 때문에 TCP가 제공해주는 이러한 기능들 덕분에 우리는 온전히 상위 레이어의 동작에만 집중할 수 있는 것이다.</p>\n<p>보통 TCP의 전송 제어 방법은 전송되는 데이터의 양을 조절하는 흐름 제어, 통신 도중에 데이터가 유실되거나 잘못된 데이터가 수신되었을 경우 대처하는 방법인 오류 제어, 네트워크 혼잡에 대처하는 혼잡 제어로 나누어진다.</p>\n<p>물론 TCP 같은 전송 계층의 프로토콜을 어플리케이션 레이어에서 활동하는 개발자가 건드릴 일은 많이 없다. 그러나 혹시라도 이 부분에서 뭔가 문제가 발생했을 경우, TCP가 어떤 식으로 작동하는지 모른다면 고치는 건 둘째치고 원인 파악조차 하지 못하는 슬픈 상황이 발생할 수 있으므로 여러모로 알아두는 것이 좋다고 생각한다. <small>(더불어 야근도 따라올 것이다)</small></p>\n<p>그런 의미에서 이번 포스팅에서는 TCP의 흐름 제어 기법들과 오류 제어 기법들에 대한 이야기를 한번 해보려고 한다.</p>\n<h2 id=\"tcp의-흐름-제어\" style=\"position:relative;\">TCP의 흐름 제어<a href=\"#tcp%EC%9D%98-%ED%9D%90%EB%A6%84-%EC%A0%9C%EC%96%B4\" aria-label=\"tcp의 흐름 제어 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>송신 측과 수신 측이 서로 데이터를 주고 받을 때, 여러가지 요인에 따라 이 두 친구들의 처리 속도가 달라질 수 있다. 이때 데이터를 받는 수신 측의 처리 속도가 송신 측보다 빠른 경우는 사실 별 문제가 없다.</p>\n<p>주는 족족 빠르게 처리해주니 딱히 문제될 것이 없는 것이다. 그러나 수신 측의 처리 속도보다 송신 측이 더 빠른 경우 문제가 생긴다.</p>\n<p>송신 측과 수신 측은 모두 데이터를 저장할 수 있는 버퍼를 가지고 있다. 이때 수신 측이 자신의 버퍼 안에 있는 데이터를 처리하는 속도보다 송신 측이 데이터를 전송하는 속도가 더 빠르다면, 당연히 수신 측의 버퍼는 언젠가 꽉 차버릴 것이기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ffb20ecdb68523bcd2bca1b47ccabf1c/79384/overflow.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBAUC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe9PPk3qhnsK9iP/xAAcEAEAAgEFAAAAAAAAAAAAAAABAgMAEBESITP/2gAIAQEAAQUCdUk2cJuV7kHq5XKvP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABkQAAMAAwAAAAAAAAAAAAAAAAABEBEhIv/aAAgBAQAGPwKvc6eWOI//xAAeEAEAAwAABwAAAAAAAAAAAAABABEhEDFBUWFxsf/aAAgBAQABPyHZLO/Dne3C6qJsz2wkKDrNkzCCI7R8/Z//2gAMAwEAAgADAAAAECvPPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABcRAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8Qys//xAAeEAEAAgIBBQAAAAAAAAAAAAABABEhYRAxQZGh0f/aAAgBAQABPxAAi0WQToPPGZREFg7HH2ICj7UYl4WIg3Bb1NlOiXgcxHFqr2n/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"overflow\" title=\"\" src=\"/static/ffb20ecdb68523bcd2bca1b47ccabf1c/c08c5/overflow.jpg\" srcset=\"/static/ffb20ecdb68523bcd2bca1b47ccabf1c/0913d/overflow.jpg 160w,\n/static/ffb20ecdb68523bcd2bca1b47ccabf1c/cb69c/overflow.jpg 320w,\n/static/ffb20ecdb68523bcd2bca1b47ccabf1c/c08c5/overflow.jpg 640w,\n/static/ffb20ecdb68523bcd2bca1b47ccabf1c/6a068/overflow.jpg 960w,\n/static/ffb20ecdb68523bcd2bca1b47ccabf1c/eea4a/overflow.jpg 1280w,\n/static/ffb20ecdb68523bcd2bca1b47ccabf1c/79384/overflow.jpg 3488w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>마치 꽉 찬 물컵에 물을 계속 붓는 상황이랄까</small>\n</center>\n<p>수신 측의 버퍼가 꽉 찬 상태에서 도착한 데이터는 더 이상 담아둘 공간이 없기 때문에 폐기 처분된다. 물론 이런 상황에서는 송신 측이 다시 데이터를 보내주기는 하겠지만, 데이터 전송이라는게 네트워크 환경에 따라 변수가 워낙 많은 작업이기 때문에 사실 이 작업을 줄일 수 있으면 줄이는 것이 가장 좋다.</p>\n<p>그래서 송신 측은 수신 측의 데이터 처리 속도를 파악하고 자신이 얼마나 빠르게, 많은 데이터를 전송할 지 결정해야한다. 이것이 바로 TCP의 흐름 제어인 것이다.</p>\n<p>수신 측은 자신이 처리할 수 있는 데이터의 양을 의미하는 윈도우 크기(Window Size)를 자신의 응답 헤더에 담아서 송신 측에게 전해주게 되고, 송신 측은 상대방에게 데이터를 보낼 때 이 윈도우 크기와 네트워크의 현재 상황을 참고해서 알맞은 양의 데이터를 보냄으로써 전체적인 데이터의 흐름을 제어하게 된다.</p>\n<h3 id=\"stop-and-wait\" style=\"position:relative;\">Stop and Wait<a href=\"#stop-and-wait\" aria-label=\"stop and wait permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Stop and Wait 방식은 이름 그대로 상대방에게 데이터를 보낸 후 잘 받았다는 응답이 올 때까지 기다리는 모든 방식을 통칭하는 말이다. 이때 데이터를 받는 수신 측은 “잘 받았어!”와 “못 받았어…” 등의 대답을 해주게 되는데, 수신 측이 어떤 대답을 해주냐에 따라 사용할 수 있는 오류 제어 방법이 나눠지기도 한다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/65ff8e861f0894835574fb210cb11888/e9d87/stop-and-wait.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1klEQVR42pVVz2saYRDdXdfEqGuSJhtsaWpNraCFQistQewP2ksPpZS0QkqhQkshl+Cf4D3kkmNyzCnouSKJv6KgxhSxaKtUq1L0JuToTTtjZ2Gz0Y1ZeHzL7rfzzZt585ZhGOYV4AngJWCW+X+xjPolvdcDXgCeAp4DXPhwGWAH3AZMKT4aYjAYjDtAA1gCOABWgFl6sQgQADxgmla17FgFC8zUIN80Tw+Q8hxhXhCEBVhnwuHwo729vZu4cUy2FwLOKbNyuVzazc1NzJYJBoMft7e3sT56u92ObK4BTFQirSyhcwG1CkqXUZ4iRhjogayh5zOUKDWbTUe73d6oVCqf4/H4F1xPTk6+FovFdb/fP0cBp2UZCvKAFuq2xul0GvHB6enph1ar9aNer2eSyWQuk8lkDw8Pv0ej0W+BQABpM16vV0PfG5WUl2QncAgVqTCTNAVTngHoSFtD6hKoMRrIjEeMkI5BGVCkzgmSZBCiKCIVPhKJ2I6OjtSmyKgmG1ai7Xa78QBtKBTa2NnZceNHZrNZpAA6YjWWsnbCOWYokECBcX08VjZXuDgCT+Uyyl8uSLO8uro6pFEul980Go1mrVb7eXx8XMnn879Aj79TqVQepgbNhLNYLDpiNqukfIvchrHZbChWDoJYu93u+06n8xaa8i6dTq/FYrG1RCLxen9/3zDCxi50WaBC6yaso6ps5mVpGyWn8Xg8IrnNs93d3Tu4ETLkRxx4qduwIGAOgPPKHxwceLe2tu4jCyiJSPulINOjanhV2bAkHT2V6KGabFgaPaHX662Au1ihIStnZ2dWMAsrONCyz+fT0X6eRtWklM0Nkg4HDjKUTaFQ+ASy+Qu2hXKp5nK5CrjNH7hPQynw38GSIjSU3bmAaF3XZZu4arW6CFne6/f7jlKp5Mhmsw44xAm4SwahKpurTgqrWC/IxjSihmhdGgRaF0K6HzPbQ6P4B8hy+YLbIMmSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"stop and wait\" title=\"\" src=\"/static/65ff8e861f0894835574fb210cb11888/6af66/stop-and-wait.png\" srcset=\"/static/65ff8e861f0894835574fb210cb11888/69538/stop-and-wait.png 160w,\n/static/65ff8e861f0894835574fb210cb11888/72799/stop-and-wait.png 320w,\n/static/65ff8e861f0894835574fb210cb11888/6af66/stop-and-wait.png 640w,\n/static/65ff8e861f0894835574fb210cb11888/d9199/stop-and-wait.png 960w,\n/static/65ff8e861f0894835574fb210cb11888/e9d87/stop-and-wait.png 1176w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>Stop and Wait로 흐름 제어를 할 경우의 대원칙은 단순히 “상대방이 응답을 하면 데이터를 보낸다”이기 때문에 구현 자체도 간단하고 개발자가 어플리케이션의 작동 원리를 파악하기도 쉬운 편이다.</p>\n<p>기본적인 ARQ(Automatic Repeat Request)를 구현한다고 생각해보면, 수신 측의 윈도우 크기를 1 byte로 설정하고 <code class=\"language-text\">처리 가능 = 1</code>, <code class=\"language-text\">처리 불가능 = 0</code>과 같은 식으로 대충 구현해도 돌아가기는 하기 때문이다.</p>\n<p>하지만 서로 처리 가능, 처리 불가능 정도의 의미만 주고받는 방식은 간단한만큼 비효율적이라고 할 수도 있다. 왜냐하면 송신 측은 자신이 직접 데이터를 보내봐야 이 데이터를 수신 측이 처리할 수 있는지 알 수 있기 때문이다. 쉽게 말해서 이런 기초적인 Stop and Wait 방식은 그냥 될 때까지 주구장창 보내는 방식이라고 봐도 무방하다.</p>\n<p>그런 이유로 Stop and Wait 방식을 사용하여 흐름 제어를 할 경우에는, 이런 비효율성을 커버하기 위해 이런 단순한 구현이 아닌 여러가지 오류 제어 방식을 함께 도입해서 사용한다.</p>\n<h3 id=\"sliding-window\" style=\"position:relative;\">Sliding Window<a href=\"#sliding-window\" aria-label=\"sliding window permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>방금 알아본 바와 같이 Stop and Wait를 사용하여 흐름 제어를 하게 되면 비효율적인 부분이 있기 때문에, 오늘날의 TCP는 특별한 경우가 아닌 이상 대부분 슬라이딩 윈도우(Sliding Window) 방식을 사용한다.</p>\n<p>슬라이딩 윈도우는 수신 측이 한 번에 처리할 수 있는 데이터를 정해놓고 그때그때 수신 측의 데이터 처리 상황을 송신 측에 알려줘서 데이터의 흐름을 제어하는 방식이다.</p>\n<p>Stop and Wait과 여러 가지 차이점이 있겠지만, 사실 가장 큰 차이점은 송신 측이 수신 측이 처리할 수 있는 데이터의 양을 알고 있다는 점이다. 이 정보를 알고 있기 때문에 굳이 수신 측이 “처리 가능”이라는 대답을 일일히 해주지 않아도 데이터를 보내기 전에 이게 처리될 지 어떨지 어느 정도 예측이 가능하다는 말이다.</p>\n<p>송신 측과 수신 측은 각각 데이터를 담을 수 있는 버퍼를 가지고 있고, 별도로 윈도우라는 일종의 마스킹 도구를 가지고 있다. 이때 송신 측은 이 윈도우에 들어있는 데이터를 수신 측의 응답이 없어도 연속적으로 보낼 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1b3989f922769714854cd9b45b5bd9ca/11f9c/window.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVR42hXM2UoCYQCGYe8qiIpKCbyacBmXGBV3Z0YdQ/GgTgrSNLcRKXGBkBxs1Nx+JZfUEekg6Rb0yw5eeI5eBZ2YFp3P35leNF1aUI7mF81KawsrjSm3NDN7pLWVk6ZmRpJN7sZLslEwZVc5Z2YuxMVfwZqeC7b0vzeCMydnLal5UXEaGEAdHu4K3hhaWjfeDRyIPYy2I4q2LYw+zUOkOHT1XgRCFRzzBGq+B0N6BWWgi4u9tckl1Nf97Tk/guKQ6UHJD3Z5TwxNjQsNigVxRPDhu0XXe4OBJYS6jkFX5wEbLOOAG0Dl7+wnMk7YDs64Di4fF1AFe9sjP4FC/zB5o4V1qRVJilPKPpzQDFlaGDKinGRs9BDZypLPKx9ZmFz9fEx81TwtK3RyVr2vbarGxKxq2ndX+6nSqUXZEJ/W/wAfQdwulAraEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"window\" title=\"\" src=\"/static/1b3989f922769714854cd9b45b5bd9ca/6af66/window.png\" srcset=\"/static/1b3989f922769714854cd9b45b5bd9ca/69538/window.png 160w,\n/static/1b3989f922769714854cd9b45b5bd9ca/72799/window.png 320w,\n/static/1b3989f922769714854cd9b45b5bd9ca/6af66/window.png 640w,\n/static/1b3989f922769714854cd9b45b5bd9ca/d9199/window.png 960w,\n/static/1b3989f922769714854cd9b45b5bd9ca/21b4d/window.png 1280w,\n/static/1b3989f922769714854cd9b45b5bd9ca/11f9c/window.png 1707w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>윈도우 안에 들어있는 프레임은 수신 측의 응답이 없이도 연속으로 보낼 수 있다</small>\n</center>\n<p>송신 측의 윈도우 크기는 맨 처음 TCP의 연결을 생성하는 과정인 3 Way Handshake 때 결정된다. 이때 송신 측과 수신 측은 자신의 현재 버퍼 크기를 서로에게 알려주게 되고, 송신 측은 수신 측이 보내준 버퍼 크기를 사용하여 “음, 대충 이 정도 처리 가능하겠군”이라는 과정을 통해 자신의 윈도우 크기를 정하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">localhost.initiator <span class=\"token operator\">></span> localhost.receiver: Flags <span class=\"token punctuation\">[</span>S<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">1487079775</span>, win <span class=\"token number\">65535</span>\nlocalhost.receiver <span class=\"token operator\">></span> localhost.initiator: Flags <span class=\"token punctuation\">[</span>S.<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">3886578796</span>, ack <span class=\"token number\">1487079776</span>, win <span class=\"token number\">65535</span>\nlocalhost.initiator <span class=\"token operator\">></span> localhost.receiver: Flags <span class=\"token punctuation\">[</span>.<span class=\"token punctuation\">]</span>, ack <span class=\"token number\">1</span>, win <span class=\"token number\">6379</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">tcpdump</code>를 통해 3 Way Handshake를 관찰해보면 처음의 <code class=\"language-text\">SYN</code>과 <code class=\"language-text\">SYN+ACK</code> 패킷에는 각자 자신의 버퍼를 알려준 후 마지막 <code class=\"language-text\">ACK</code> 패킷 때 송신 측이 자신이 정한 윈도우 사이즈를 상대방에게 통보하는 것을 볼 수 있다.</p>\n<p>이때 송신 측과 수신 측 모두 자신의 버퍼 크기라 <code class=\"language-text\">65535</code>라고 이야기했지만 최종적으로 송신 측이 정한 자신의 윈도우 크기는 <code class=\"language-text\">6379</code>이다. 왜 송신 측은 수신 측 버퍼 크기의 10분의 1로 자신의 윈도우 크기를 정한 것일까?</p>\n<p>사실 송신 측의 윈도우 크기는 수신 측의 버퍼 크기로만 정하는 것이 아니라 다른 여러가지 요인들을 함께 고려해서 결정된다. 상대방이 보낸 버퍼 크기만 믿고 자신의 윈도우 크기를 정하기에는 네트워크는 너무나도 험난한 환경이기 때문이다. 이때 사용하는 대표적인 값이 바로 패킷의 왕복 시간을 의미하는 RTT(Round Trip Time)이다.</p>\n<p>송신 측은 자신이 처음 <code class=\"language-text\">SYN</code> 패킷을 보내고, 다시 수신 측이 <code class=\"language-text\">SYN+ACK</code> 패킷으로 응답하는 시간을 재고, 이 값을 통해 현재 네트워크 상황을 유추한다. 이때 이 값이 너무 크다면 왕복 시간이 느리다는 것이므로 네트워크 상태가 좋지 않다고 생각하고 윈도우 크기를 조금 더 줄이게 되는 것이다.</p>\n<p>그리고 이때 정해진 윈도우 크기는 고정이 아니라 통신을 하는 과정 중간에도 계속 네트워크의 혼잡 환경과 수신 측이 보내주는 윈도우 크기를 통해 동적으로 변경될 수 있다. 윈도우의 크기, 즉 연속적으로 보낼 데이터의 양을 변경해가면서 유연하게 흐름 제어를 할 수 있다는 말이다.</p>\n<p>윈도우에 대해 대략적으로 이해를 했다면 이제 이 기법을 왜 <strong>슬라이딩</strong> 윈도우라고 하는 지 한번 살펴보도록 하자.</p>\n<p>먼저, 송신 측이 <code class=\"language-text\">0 - 6</code>번의 시퀀스 번호를 가진 데이터를 상대방에게 전송하고 싶어하는 상황을 상상해보자. 이때 송신 측의 버퍼에는 전송해야할 데이터들이 이렇게 담겨져 있을 것이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/232f15946f1a7d8a42025e582ef6400f/8d9a9/sw-0.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 14.375000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVR42n2OOwpEIRAE3/2vZeodRDAwUFHxi2gvMyC83WCzoqfpqaeUgpwzvPf45ZTSF4cQUGtFjJGZcmLnHM45EELgUUqh9445J5fGGGitQWvNTLc3G2O4S2OUr7X4mbUWUko8bysa+md4+RpeWzLce7PhB0qX47bPh+fNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw 0\" title=\"\" src=\"/static/232f15946f1a7d8a42025e582ef6400f/6af66/sw-0.png\" srcset=\"/static/232f15946f1a7d8a42025e582ef6400f/69538/sw-0.png 160w,\n/static/232f15946f1a7d8a42025e582ef6400f/72799/sw-0.png 320w,\n/static/232f15946f1a7d8a42025e582ef6400f/6af66/sw-0.png 640w,\n/static/232f15946f1a7d8a42025e582ef6400f/d9199/sw-0.png 960w,\n/static/232f15946f1a7d8a42025e582ef6400f/21b4d/sw-0.png 1280w,\n/static/232f15946f1a7d8a42025e582ef6400f/8d9a9/sw-0.png 2244w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이때 송신 측은 수신 측에게 받은 윈도우 크기와 현재 네트워크 상황을 고려하여 윈도우 크기를 3으로 잡았고, 윈도우 안에 있는 데이터를 우선 주르륵 전송한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/16d1ae2726a8f3f4e63bad71de5db069/8d9a9/sw-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 30.624999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVR42q2OzUrDQBDHt2A9qBXfoAiFQl/CqydveYW8hg/mB7T5aLJBSrHVqyTEEMk2m91kUyGZcRssKHhQcODH/ze7MDOEfK9jzTn5h+p95oHm6Mtb78+TjMnk5HI0Ot3nxXB4djUeD3bs/NowDk3T7P8WImbTYEt9Xzm2r7y5r93bu3KtgK1WVCpFpRA0yzJa1zUVP3jTNDSKIkq2iwd8ubvB9nGJ78sFbjwX8XmNIqAY398iJK/IOMe3NMW2bTHVWZYl6gEYxzFWVYVKKUySpPsjwp4Bd22QjgXl3AHpuVDqXmgX1hQ2T2vgUkKe5x36IuCcd14URQdjDPQSCMMQPgC0vexT2sGI+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw 1\" title=\"\" src=\"/static/16d1ae2726a8f3f4e63bad71de5db069/6af66/sw-1.png\" srcset=\"/static/16d1ae2726a8f3f4e63bad71de5db069/69538/sw-1.png 160w,\n/static/16d1ae2726a8f3f4e63bad71de5db069/72799/sw-1.png 320w,\n/static/16d1ae2726a8f3f4e63bad71de5db069/6af66/sw-1.png 640w,\n/static/16d1ae2726a8f3f4e63bad71de5db069/d9199/sw-1.png 960w,\n/static/16d1ae2726a8f3f4e63bad71de5db069/21b4d/sw-1.png 1280w,\n/static/16d1ae2726a8f3f4e63bad71de5db069/8d9a9/sw-1.png 2244w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이때 윈도우 안에 들어있는 데이터는 어떤 상태일까? 일단 데이터를 전송하기는 했지만 아직 수신 측으로부터 잘 받았다는 응답을 받지 못한 상태일 것이다.</p>\n<p>즉, 윈도우에 들어있는 데이터들은 항상 `전송은 했지만, 상대방이 처리했는지는 모르는 상태라고 할 수 있다. 물론 데이터를 윈도우에 넣고 나서 블록킹이 걸려 데이터를 처리하지 못하는 상태도 존재할 수 있지만, 그런 것까지 다 고려하면 너무 복잡하니까 간단하게 생각하도록 하자.</p>\n<p>이후 수신 측은 자신의 처리 속도에 맞게 데이터를 처리한 후 응답으로 현재 자신의 버퍼에 남아있는 공간의 크기를 알려준다. 만약 수신 측이 응답으로 <code class=\"language-text\">Window Size: 1</code>을 보냈다면 “내 버퍼 공간이 1 byte만큼 남았으니까 그 만큼만 더 보내봐”라는 의미가 된다.</p>\n<p>이제 송신 측은 자신이 데이터 한 개를 더 보낼 수 있다는 사실을 알았으니, 자신의 윈도우를 한 칸 옆으로 밀고 새롭게 윈도우에 들어온 3번 데이터를 수신 측에게 전송한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ad1acdaf42325f81a805f9972417f525/8d9a9/sw-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVR42q2OP0vDQBiHA+pmwUmjDo6VgoObk5MO9SP0E4iL36MiCkIdHALiFChtIZN/6FC99pq01GKtOFQNgSO0plySS5NGeb0Uqh07+MLDPdy9v+MntNvtWMRBKrW2sxlfuTg73VURunxttaTHWu0qc3KU3EskxOT21kYul1swTXN+nJmk2+3G8vl8TGCMEce2iadVjUG1YvhqRffQQ8fFqMPKqDOoIN1XscHqmm71esTzPNLv94llWb/e4/cAQEqlEhF0XYfA9wFenuET3cOw2YBvzvvdDYT8/OJ83F5D8NSEAWNACIEgCIAXAcMwIAxDoJQCbwiapoHAHyn/kHp1jXoqHsEwom71zx1ctp2aSh2eDIZDyptR13VplI3ctm3KG1KMMRUURRFlWRbfJEl0ZUk0IyJX5JFDNruYOdyPo/Pj1UKhsDTej5j0YrEoptNpUZhyljmzwj/NDGedMzfN9g/YBTGIBWRq1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw 2\" title=\"\" src=\"/static/ad1acdaf42325f81a805f9972417f525/6af66/sw-2.png\" srcset=\"/static/ad1acdaf42325f81a805f9972417f525/69538/sw-2.png 160w,\n/static/ad1acdaf42325f81a805f9972417f525/72799/sw-2.png 320w,\n/static/ad1acdaf42325f81a805f9972417f525/6af66/sw-2.png 640w,\n/static/ad1acdaf42325f81a805f9972417f525/d9199/sw-2.png 960w,\n/static/ad1acdaf42325f81a805f9972417f525/21b4d/sw-2.png 1280w,\n/static/ad1acdaf42325f81a805f9972417f525/8d9a9/sw-2.png 2244w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이때 윈도우를 옆으로 이동시키며 새로 들어온 데이터를 전송하기 때문에 <strong>슬라이딩</strong> 윈도우라고 하는 것이다. 만약 수신 측이 윈도우 크기를 1이 아니라 더 큰 수를 보냈다면, 송신 측은 그 만큼 윈도우를 옆으로 밀고 더 많은 데이터를 연속적으로 전송할 수 있을 것이다.</p>\n<p>단, 이 경우 송신 측의 윈도우 크기가 3이기 때문에 수신 측이 4를 보냈다고 해서 4칸을 밀지는 않고, 자신의 윈도우 크기인 3만큼만 밀 수 있다. 그러나 이 경우에는 송신 측이 수신 측의 퍼포먼스가 더 좋아졌다는 것을 알았으니 자신의 윈도우 크기를 늘리는 방법으로 대처할 수 있을 것이다.</p>\n<p>이렇게 데이터를 전송하는 송신 측의 버퍼는 대략 3가지 상태로 나눠질 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/db7ce/sw-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42oWOz0vCYBzG56VuXfph/0AheZDqP+jQOf+A/hPFk9fasUsQSBdh+OMgghNzc7nZnFIyECEp0BGibu/GtndTvr2Oea0HPjwPvC/P96GorQAiG8tms1GGZZNcr3dTFUSCEJArFpOZTOYo/B2h/hKeNW7B6jys58Kd/lK/B0lK23wjBVI7wOWbKVDk9KLF3f9oGm3bNj2dTmmEEK3repDX6zU9Ho/pcNzweYVV8GzV90cqWOoA4OsTrMEH4R3gewxLpQt4NAQTGWAgBL7vAykE0zTB8zwwDAM0TYOg0F8KuZUuAZ61bSS2PEN8xXZHxPMWR+Cx8ybhGdfEiDgpdDHGDsEkSyeO40xItlzXdUihGy6UjvGingAkxKDfPwVZjmmlUhzX6wGbDDwfRyx7VigULqvVaqJcLl93u90nWZYfGYa5qtVq58QvNn1RwgHhMGSfsEf9o0qlstsnxxVFOcnn8zvbh1+TxRfeE68QWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw 3\" title=\"\" src=\"/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/6af66/sw-3.png\" srcset=\"/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/69538/sw-3.png 160w,\n/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/72799/sw-3.png 320w,\n/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/6af66/sw-3.png 640w,\n/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/d9199/sw-3.png 960w,\n/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/21b4d/sw-3.png 1280w,\n/static/a04bfa93161e2a1c8ef37a6f19e1b0dc/db7ce/sw-3.png 2404w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>즉 슬라이딩 윈도우 방식은 “보내고 > 응답받고 > 윈도우 밀고”를 반복하면서, 현재 자신이 보낼 수 있는 데이터를 최대한 연속적으로 보내는 방법이라고 할 수 있다.</p>\n<p>이게 지금 <code class=\"language-text\">0 - 6</code> 밖에 안되는 단순화된 그림으로 봐서 잘 와닿지 않을 수도 있지만, 아무런 옵션도 적용하지 않은 TCP의 최대 윈도우 크기는 65,535 bytes이고, WSCALE 옵션을 최대로 적용하면 1GB로 설정하는 것도 가능하다.</p>\n<p>게다가 연속적으로 한번에 보내는 데이터도 이렇게 한 개, 두 개 정도가 아니라 몇 백 바이트 단위로 보내는 경우가 많기 때문에 실제 환경에서는 Stop and Wait로 흐름 제어를 하는 것과 비교해봤을때 상당히 좋은 효율을 뽑아낼 수 있다. 즉, 이론적으로는 수신 측의 ACK 응답 없이도 최대 1GB를 연속적으로 전송할 수 있다는 말이다.</p>\n<p>이렇게 슬라이딩 윈도우 방식은 일일히 하나 보내고, 응답 받고 하는 Stop and Wait보다 확실히 전송 속도 측면에서 빠르기도 하고, 송신 측과 수신 측의 지속적인 커뮤니케이션을 통해 윈도우 크기 또한 유연하게 조절할 수 있기 때문에 최근의 TCP에서는 기본적으로 슬라이딩 윈도우를 사용하여 흐름 제어를 하고 있다.</p>\n<h2 id=\"tcp의-오류-제어\" style=\"position:relative;\">TCP의 오류 제어<a href=\"#tcp%EC%9D%98-%EC%98%A4%EB%A5%98-%EC%A0%9C%EC%96%B4\" aria-label=\"tcp의 오류 제어 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>TCP는 기본적으로 ARQ(Automatic Repeat Request), 재전송 기반 오류 제어를 사용한다. 말 그대로 통신 중에 뭔가 오류가 발생하면 송신 측이 수신 측에게 해당 데이터를 다시 전송해야한다는 말이다.</p>\n<p>하지만 재전송이라는 작업 자체가 했던 일을 또 해야하는 비효율적인 작업이기 때문에, 이 재전송 과정을 최대한 줄일 수 있는 여러가지 방법을 사용하게 된다.</p>\n<h3 id=\"오류가-발생했다는-것은-어떻게-알-수-있나요\" style=\"position:relative;\">오류가 발생했다는 것은 어떻게 알 수 있나요?<a href=\"#%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%96%88%EB%8B%A4%EB%8A%94-%EA%B2%83%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%95%8C-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94\" aria-label=\"오류가 발생했다는 것은 어떻게 알 수 있나요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP를 사용하는 송수신 측이 오류를 파악하는 방법은 크게 두 가지로 나누어진다.</p>\n<p>수신 측이 송신 측에게 명시적으로 <code class=\"language-text\">NACK(부정응답)</code>을 보내는 방법, 그리고 송신 측에게 <code class=\"language-text\">ACK(긍정응답)</code>가 오지 않거나, 중복된 ACK가 계속 해서 오면 오류가 발생했다고 추정하는 방법이다.</p>\n<p>간단히 생각해보면 왠지 NACK를 사용하는 방법이 더 명확하고 간단할 것 같지만, NACK를 사용하게되면 수신 측이 상대방에게 ACK를 보낼 지 NACK를 보낼 지 선택해야하는 로직이 추가적으로 필요하기 때문에, 일반적으로는 ACK만을 사용해서 오류를 추정하는 방법이 주로 사용되고 있다.</p>\n<p>이때 타임아웃은 말 그대로 송신 측이 보낸 데이터가 중간에 유실되어, 수신 측이 아예 데이터를 받지 못해 ACK를 보내지도 않았거나, 수신 측은 제대로 응답했지만 해당 ACK 패킷이 유실되는 경우에 발생하게 된다.</p>\n<p>어쨌든 두 경우 모두 송신 측은 데이터를 전송했는데 수신 측이 응답하지 않고 일정 시간이 경과한 경우라고 생각하면된다.</p>\n<p>그리고 두 번째 방법인 송신 측이 중복된 ACK를 받는 경우 오류라고 판별하는 방법은 대략 이런 느낌이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/02ea09db0f12e0cdfcf4b209c00ccf68/9ac09/duplicated-ack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1UlEQVR42o2SSQrCQBBFv2ZOHHBC4wQO4M6NIF7E87h24U29g/42P9BmICl4dFJJ/ZoaADrIbEKuOmH5UfjnQvZoaWMSE5d0C6K5xfrWWjAhoXWGVgJjUU2isr0o+KDAnUFHIFA1kcT7yHwbMmsleqPgk4EfCryBgSoLLEHj25ElcdoUuVZQbwuMrJY9iTtazKBpjnn5K1Vkgn38t50va6gkUQWlMSQ1rTgSD9WySZyShdqf6/0XawY8lSNVFa7Vple4QnHTQg7kRM569isutm2RlaAIvrJoCfc06g3RAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"duplicated ack\" title=\"\" src=\"/static/02ea09db0f12e0cdfcf4b209c00ccf68/6af66/duplicated-ack.png\" srcset=\"/static/02ea09db0f12e0cdfcf4b209c00ccf68/69538/duplicated-ack.png 160w,\n/static/02ea09db0f12e0cdfcf4b209c00ccf68/72799/duplicated-ack.png 320w,\n/static/02ea09db0f12e0cdfcf4b209c00ccf68/6af66/duplicated-ack.png 640w,\n/static/02ea09db0f12e0cdfcf4b209c00ccf68/d9199/duplicated-ack.png 960w,\n/static/02ea09db0f12e0cdfcf4b209c00ccf68/21b4d/duplicated-ack.png 1280w,\n/static/02ea09db0f12e0cdfcf4b209c00ccf68/9ac09/duplicated-ack.png 2204w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이 상황을 조금 더 쉽게 풀어보자면, 송신 측은 이미 <code class=\"language-text\">SEQ 2</code> 데이터를 보낸 상황인데 수신 측이 계속 “야, 이번에 2번 보내줄 차례야”라고 말하는 상황인 것이다. 그럼 송신 측은 자신이 보낸 2번 데이터에 뭔가 문제가 발생했음을 알 수 있다.</p>\n<p>단, 패킷 기반 전송을 하는 TCP의 특성 상 각 패킷의 도착 순서가 무조건 보장되는 것이 아니기 때문에 위 예시처럼 중복된 ACK를 한 두번 받았다고 해서 바로 에러라고 판별하지는 않고, 보통 3회 정도 받았을 때 에러라고 판별하게 된다.</p>\n<h3 id=\"stop-and-wait-1\" style=\"position:relative;\">Stop and Wait<a href=\"#stop-and-wait-1\" aria-label=\"stop and wait 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Stop and Wait는 흐름 제어 때 한번 살펴보았던, 한번 데이터를 보내면 제대로 받았다는 응답이 올 때까지 대기하고 있다가 다음 데이터를 보내는 방식이다.</p>\n<p>이 친구가 오류 제어에서 다시 나오는 이유는 그냥 이렇게만 해도 기본적인 오류 제어가 가능하기 때문이다. 일석이조랄까. 애초에 제대로 받았다는 응답이 오지 않는다면 제대로 받을 때까지 계속 데이터를 재전송하는 방법이니까 흐름 제어도 되지만 오류 제어도 가능하다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8beaea3d1aff1e971396525f6b9fbd36/eb2ef/stop-and-wait-error.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 120%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACsElEQVR42pWUPWxSURTH3ydfbYEHWIVGnxqsg8FEqYbEuJgY2ZyYuzUm2r1TWRrTicSFgXTo4lIYWBz4SGiHpkBIKg0BUvkKJjAwsLhfz8Hz4pPywvMmv/Aeue/cc+7/fw7H/V0R4C3wBrBwyxdPv0+BKPAaeKnfsAKowC3dZjPLCviBDcA9f5oCOIE1QgYkhDHGIwZBZdp/YznpRFHb5HK58FQ5lUq9SyQSr/A6gsGgVTvITEBp0V01Gg1PuVx20n822ovYgYfAnaUBscTRaKTW6/XH/X7//ng8ftBsNjcvLy83aItEAdcBzyLF8JT1cDiMJci7u7vOwWDwrdfrtSC7erVa/X56evojn88fU5kyfWuZL1kLiAq76FlAhsOhHTJ15HK5lVqt5sD36+tr6zJR5lXWRBFNetFQFMzOAaxq1lEUBf+zHR0dbWUymUe4ia7EtG30KvPb29uoKJfNZrcg6DM8MBQKaZVoCSiEKdsYLZEQzNpG2NnZkbvd7kewzOH5+fnB1dXVQalUOgQ+kbmtpLCdvr1xudiTdzVRotGotdPpxH8Oh8dgmxQCtjkuFov78XhcoOx4CnxT5Rcc5/0MMOxdCMbAKibL/0eUAPnvNqbNVNUGAe1sb2+TZbMfZs+RiOeXz+dvxGKWOGMC+5OdYcB7wHPgCbWPqLUdK5UkCCgAPOBhxoIZGttNQTVLrJBI4hfojhpjskFAi14Uni5Xr7KgCaOqKh4ipdPp98lkcjbNyeyyrpv+a3zNFlhFOjk5EXUeXNONr6Dp8TWdTt3tdtsHHlTgXalUKl4YDk6qTD8DFo4vH95dLBbDDCw4vsDUBTB3/+Liog3BWpDpsFAofKUyNWPbjEQJkH1m94rmBWOvTyaTAAxW/9nZmb/VagUgoNfscFg1MbKMbDNrgt+w9OsqEzQqSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"stop and wait error\" title=\"\" src=\"/static/8beaea3d1aff1e971396525f6b9fbd36/6af66/stop-and-wait-error.png\" srcset=\"/static/8beaea3d1aff1e971396525f6b9fbd36/69538/stop-and-wait-error.png 160w,\n/static/8beaea3d1aff1e971396525f6b9fbd36/72799/stop-and-wait-error.png 320w,\n/static/8beaea3d1aff1e971396525f6b9fbd36/6af66/stop-and-wait-error.png 640w,\n/static/8beaea3d1aff1e971396525f6b9fbd36/d9199/stop-and-wait-error.png 960w,\n/static/8beaea3d1aff1e971396525f6b9fbd36/21b4d/stop-and-wait-error.png 1280w,\n/static/8beaea3d1aff1e971396525f6b9fbd36/eb2ef/stop-and-wait-error.png 1324w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <br>\n  </div>\n</center>\n<p>그러나 위에서 살펴본 슬라이딩 윈도우를 사용하여 흐름 제어를 하는 경우에는 윈도우 안에 있는 데이터를 연속적으로 보내야 하기 때문에, 오류 제어에 Stop and Wait를 사용해버리면 슬라이딩 윈도우를 쓰는 이점을 잃어버린다.</p>\n<p>그런 이유로 일반적으로는 이런 단순한 방법보다 조금 더 효율적이고 똑똑한 ARQ를 사용하게 된다.</p>\n<h3 id=\"go-back-n\" style=\"position:relative;\">Go Back N<a href=\"#go-back-n\" aria-label=\"go back n permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Go Bank N 방법은 데이터를 연속적으로 보내다가 그 중 어느 데이터부터 오류가 발생했는지를 검사하는 방식이다.</p>\n<p>위에서 이야기했듯이 오류를 판별하는 방법에는 ACK의 이상 징후를 파악하는 방법을 더 많이 사용하기는 하지만, NACK를 사용하고 있다고 가정하는 것이 다이어그램을 이해하기가 편하므로 오류 제어 기법을 설명할 때는 수신 측이 NACK를 사용하고 있다고 가정할 것이다.</p>\n<p>이 섹션에서는 오류 제어 기법을 설명하는 것이 목적이니, 오류를 어떻게 판별하는지보다는 오류를 어떻게 제어하는지에 대해서만 집중해보도록 하자.</p>\n<p>Go Back N 방식을 사용하면 데이터를 연속적으로 보낸 후 한 개의 ACK나 NACK만을 사용하여 수신 측의 처리 상황을 파악할 수 있으므로, 연속적으로 데이터를 보낼 수 있는 흐름 제어 방식인 슬라이딩 윈도우와 아주 잘 들어맞는다고 할 수 있다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1bc040f7f4090114bb5b65db8e769d5b/e9d87/go-back-n.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 133.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD10lEQVR42o1VSUtbURR+0ZjEmLyYxLk1FomhjVpL01hX2i5aui3FTaEoLVRLV/0FQldC3QhWiFAiVLAVjG4c4ggOcUAjOIBWs2iwFDW6EGoWpr5+JzmhLxrFCx/33dx7vzPc75wIgiA8BaqBx0CGEBsK4XpDzfdqgEdAJf14C7jNc5rssCIOSZIuM5AC5AB2oAQoiG9kAxogla0qr/BKIUN80F29/BARZgJGQGQYMGitHh4ernC5XPlXGLlAmMMklEMdkdHa4XBoyevu7u63ra2tDnyrYCSTjes4RUo+n0CYy94ZeYMsihaLhdYpCwsL9UtLS/fJW6PRSJfT+ZwJIKNlgFlOaJblUMceiEVFRTQrh4aGGjs7O8lDgQkNsmiIvBTIkhMa+cUSRm1trYrm/v7+6paWFhuRkBEmFdkRIrayt0kJr6vBVM6fOlnICR5ub29bp6enq3Z2dh4EAgHn+vp6pd/vd25ubjqDwaBza2urcnR0lAjSrFarmkMX5YQ3KQc1NTWUR2FiYuLL4ODg8erq6s+1tbXd2dnZXa/Xuzs/P787MzMTHBkZCQ0MDDyhs01NTcoLhDBRzF5GQz47O1OjOjIA7d7enk6OyclJHTzWMdGlOsyKi5mtpTAU16iYi4TPBSG/B6/UhI3X2LDHXkxkEau/9fW9+NjcTNIQniFnjsSav0iImspyQ3sSPAQyGDoJwp7ES657vfUT7e2kQ61MMgbWKwk7j78TKiWTrYh4IVMtLnzKzSWNpUl9fa+krq5yGFFKZrOeDC8BiEjrAtBi7iWVDUhSEa6K9ZXBpZf63eNp/OxyOcmbl2gYH1AdX2FYikWlAWxvzgnbxEJNOn74/dlBny+dlyoOU8NzOkKr0MU6VgKhgqVSCNncPDk5KVxcXCyEgC1utztvf38/H4K+cXBwUIAzUfwKBCzuujoNN9b/ObTZbNHCjkQiDSDDWenP8fFx2OfzhdFlwuPj4+GNjY0wDIRBGsb+ySkGzv+GNqmOVdxI2D2TiVq4HlXxDuUm4fIpBPx3ZWUlAhFHUHKR5eXlyNjYWHRGtZxOTU1Jc3NzIVRREUXHrx8bWq2WurG+t7c3/+joqOLw8LAUNVuG73JCKBS6g3U5vKsggOwuzTBYCsPxBiGe79gGWU9Uyh8JoafzxcuGNlnHzqTK0Ov15lzoD2kQi4uLyZASjeF9R0dHFb0o5cput1PONNxpktaySfZvp2FvDSCkWdnT09PQ1tb2kHJFhvi8KOvc5Vf2w/hAR4n+5vF4KtGxC+kyJ1/PhPHqKjnfsQ3nCBXX6DRpMtjj7e8fXQh0aZiMba4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"go back n\" title=\"\" src=\"/static/1bc040f7f4090114bb5b65db8e769d5b/6af66/go-back-n.png\" srcset=\"/static/1bc040f7f4090114bb5b65db8e769d5b/69538/go-back-n.png 160w,\n/static/1bc040f7f4090114bb5b65db8e769d5b/72799/go-back-n.png 320w,\n/static/1bc040f7f4090114bb5b65db8e769d5b/6af66/go-back-n.png 640w,\n/static/1bc040f7f4090114bb5b65db8e769d5b/d9199/go-back-n.png 960w,\n/static/1bc040f7f4090114bb5b65db8e769d5b/e9d87/go-back-n.png 1176w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <br>\n  </div>\n</center>\n<p>위 그림을 보면 수신 측이 4번 데이터부터 에러가 발생함을 감지하고 송신 측에게 “4번부터 다시 보내줘”라고 하고 있다.</p>\n<p>Go back N 방식에서 수신 측이 4번 데이터에서 에러가 발생했음을 감지하면, 4번 데이터 이후 자신이 받았던 모든 데이터를 폐기하고 송신 측에게 NACK를 보내게 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/393dda4bf3efb487525f9567f2d08f12/b88bf/go-back-n-example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR42p2KSShEcRzHnywlOWiuzhwcmTJlSZpQ8zRIWU5qsmTLkiVN2ZeQJWGs72BpJs00svaII8+8mf/M65kZxgENN7yiJHw9cVAc8KtP38/v9/tS1B9GrVaHpSSqklKVSsXnKeBbCUCgTPAvCJEJSNA1ReV+eNAPnUBqYO3SrJsRRP2Kz9FqPiO6aRfpWzsndYseUjYvkn7ZyxmRVC35yCHrJGfLZuFkhyNt635SOOcm3Rt+0mI5txcxXu/g1jVDlS6cXMV12aAZcb5qxwTEdhwg3yAipZ+HqptDnuEYyb0cEoZF8OPLQKced6PjqOrZAV1hQrWcxe3bL9rGTeinbQ6q0ei7yBh2QDcrvpYwbqQNHqFm6RR5E05kjthRK3v2qB05Bjc40y4kwyT8RivqGQEFzdaXZsaFyin7c+6QDe1GD0+xLkllsd1qWeFes00k2sLd0PvCA73BS/Qq/+4fuSrvnFuieeFazptM9gLprq65kr3jR41VxuR4yGI9T0rqv6OIVoQ3RITFxEdGhn59vAEdrBxc2iz0dAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"go back n example\" title=\"\" src=\"/static/393dda4bf3efb487525f9567f2d08f12/6af66/go-back-n-example.png\" srcset=\"/static/393dda4bf3efb487525f9567f2d08f12/69538/go-back-n-example.png 160w,\n/static/393dda4bf3efb487525f9567f2d08f12/72799/go-back-n-example.png 320w,\n/static/393dda4bf3efb487525f9567f2d08f12/6af66/go-back-n-example.png 640w,\n/static/393dda4bf3efb487525f9567f2d08f12/d9199/go-back-n-example.png 960w,\n/static/393dda4bf3efb487525f9567f2d08f12/21b4d/go-back-n-example.png 1280w,\n/static/393dda4bf3efb487525f9567f2d08f12/b88bf/go-back-n-example.png 1702w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>에러가 발생하면 그 뒤에 있던 멀쩡한 데이터도 같이 날려버리는 쏘쿨한 방식이다</small>\n</center>\n<p>즉, 송신 측은 수신 측으로 NACK를 받고나면 오류가 발생한 4번 데이터와 그 이후 전송했던 모든 데이터를 다시 전송해줘야 한다는 말이 된다. 이때 송신 측은 비록 5번까지 전송했지만 오류가 발생하면, 오류가 발생한 4번 데이터로 되돌아가서 다시 전송해야하므로 Go Back N이라고 부르는 것이다.</p>\n<h3 id=\"selective-repeat\" style=\"position:relative;\">Selective Repeat<a href=\"#selective-repeat\" aria-label=\"selective repeat permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Selective Repeat은 말 그대로 선택적인 재전송을 의미한다. Go Back N 방법도 Stop and Wait에 비하면 많이 효율적인 방법이지만, 에러가 발생하면 그 이후에 정상적으로 전송되었던 데이터까지 모두 폐기 처분되어 다시 전송해야한다는 비효율이 아직 존재한다.</p>\n<p>그래서 나온 방식이 “에러난 데이터만 재전송해줘” 방식인 것이다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a16fa4ea93d682445ee5ce78e4673ab5/e9d87/selective-repeat.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 153.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEaElEQVR42p1WTUxjZRR9pYWWtvT1h06nRqnDMAOCKQqBQKJ0ZjayYFsTN6MbG01kYeJCk6ksjInMwmBgFoQIU0mGyIRpIuU/gK/8g/yEv0AxSHAoC5WN45REST23vWUehRJmvuTkvdLvO/d+955ziyAIwjtAFXALyBLiSyFcbGmAm4ALuAGU0R9fAfIBB5Au26xIIBqNpgqQBliBAiAXuJz4gv6oBZSAGlCdk5VChsTKBPTyTdmAiWFgiFj0Wd3d3V3c3NxsPyfIKcJLRMBZ6vlddDqdOipDR0eHp7GxsYTeEcSIp5H3ZfBtTGcRyjOkiIacnBz6nDY3N3d7dXX1DcrWZDKJie8BCyfxOp89XhbuGNVQxxkYcnNz6bCqr6/vo9bWVuqggjMUeZ+eyYsAs5zQxGQnlsfjiXW9s7Pzrfr6+mtE4HA4jJxlIkMdq8SYivCiGlTKVFF4HqGwsbFRIEnSrc3NzbeBqsXFxRuzs7OutbW1qu3t7ar19XVXb28vSU2Vl5enZkNkyQlfBmwul4vqKIyMjDTjwD/Ly8u/oxnhycnJ8ODgYHh6ejo8Pj7+eGho6K9AIHCTy6HkWj4jRIgrsqKmySORSxJ4Hh1auHNGjqRiKC/gmNOEbnhwEhmOQjrfoXsV8WyzuJuaBw8fvvf13btO2utyODSFcUGnzhBv2Z+jMVFkCegAPZAVhbDxVP0aCHww0dBAOtSazeaENY3cTB33QEx2SuK6Inaby3HIY7eTCzL+6+q6Hb1/30nkURBS4D/xfScy+wlBrgpCSbJTYrLBRoU7XjdqjJatp3zw6NGHDffuxTJ0wSkoSeY38dsYAQ1w/f0zdKiSdVYJpCU6Gw6FrJCRgZxTXl5ueKmgwCLCMXx1LezkNJxhPZXwnKsON+Eb2Zn8GSFEHSPE3Mvu6en5Hk75AWL2Qdg+iNkHsftGR0d98/PzbXj+iO8+odKwU/TJTslXq9U0woX29vZ8WK1rZWXFPzU15afnzMyMHwFiT7ima2Jiog/Ed2TnTxGaamtr1Vy/j4+Ojv7G4cfw7z5I92HBfdhtH+T0Ht7d3f0D+zaQ6auUJY+0E1e+ZrPZyH7CwMDAp9gYxeEnQAQDIYJsDoeHh59i0D5Fpk+Af1GG35qammI/Sva4vE5Yz8Y6VCC6eWxsrIgmzuHhYQyRSCQPU+e1nZ2dQgyIwq2trSJMnOt1dXWJRp4itDKhyLXQyLsOEgOuqErh5zMJj+eh2+1W0kiqqKjILCsro6GR4ff7P2tpaSmlOhUXFxtLS0u1/AOmSjVtTNiUHgqF1ASIWA25ZCCrdMrs4OBARF31bW1tGgQUKysrL1VXV1shtcsc9M1zJ/YLLGtyl3W45hVkJaEZEjKU0BgJ4pWCwaAEqUhogrSwsIAGS0FIKLi0tPQzxP5Lf3//t1QWHnXH62pNTU3J3t7eF+jklzjkhQ5jAJEXZYgBJF7o0gtheyGhOwj2FQK/S7W0WCwnhC2+iJeT/gujTgv/Ayrd38q3b/JAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"selective repeat\" title=\"\" src=\"/static/a16fa4ea93d682445ee5ce78e4673ab5/6af66/selective-repeat.png\" srcset=\"/static/a16fa4ea93d682445ee5ce78e4673ab5/69538/selective-repeat.png 160w,\n/static/a16fa4ea93d682445ee5ce78e4673ab5/72799/selective-repeat.png 320w,\n/static/a16fa4ea93d682445ee5ce78e4673ab5/6af66/selective-repeat.png 640w,\n/static/a16fa4ea93d682445ee5ce78e4673ab5/d9199/selective-repeat.png 960w,\n/static/a16fa4ea93d682445ee5ce78e4673ab5/e9d87/selective-repeat.png 1176w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <br>\n  </div>\n</center>\n<p>얼핏 보면 이 방식이 굉장히 효율적이고 좋기만 한 것 같지만 Stop and Wait와 Go Back N 방식과 다르게, 이 방식을 사용하는 수신 측의 버퍼에 쌓인 데이터가 연속적이지 않다는 단점이 존재한다.</p>\n<p>위 예시만 봐도 수신 측의 버퍼에는 <code class=\"language-text\">0, 1, 2, 3, 4, 5</code>가 순차적으로 들어있는 것이 아니라, 중간에 폐기 처분된 4를 제외한 <code class=\"language-text\">0, 1, 2, 3, 5</code>만 버퍼에 존재할 것이기 때문이다. 이때 송신 측이 4를 재전송하게되면 수신 측은 이 데이터를 버퍼 중간 어딘가에 끼워넣어서 데이터를 정렬해야한다.</p>\n<p>이때 같은 버퍼 안에서 데이터를 정렬할 수는 없으니, 별도의 버퍼가 필요하게 된다.</p>\n<p>결국 재전송이라는 과정이 빠진 대신 재정렬이라는 과정이 추가된 것인데, 이 둘 중에 재전송이 좀 더 이득인 상황에서는 Go Bank N 방식을, 재정렬이 좀 더 이득인 상황에서는 Selective Repeat 방식을 사용하면된다.</p>\n<p>만약 TCP 통신에서 Selective Repeat 방식을 사용하고 싶다면, TCP의 옵션 중 <code class=\"language-text\">SACK</code> 옵션을 1로 설정하면 된다…만 사실 기본적으로 켜져 있는 경우가 많다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sysctl</span> net.inet.tcp <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> sack:\nnet.inet.tcp.sack: <span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>OSX 같은 경우, <code class=\"language-text\">sysctl</code> 명령어를 사용하여 TCP와 관련된 커널 변수들을 확인해보면 그 중 <code class=\"language-text\">net.inet.tcp.sack</code> 값이 1로 잡혀있는 것을 확인할 수 있다.</p>\n<p>아무래도 대부분의 경우에는 정글이나 다름 없는 네트워크를 다시 사용하는 쪽보다는 그냥 수신 측이 재정렬을 하는 것이 이득인 경우가 많다보니 기본적으로 Selective Repeat을 사용하는 것이 아닌가싶다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자가 최근에 TCP에 대해 공부하면서 가장 어려운 점은, TCP라는 주제 안에 굉장히 다양한 개념들이 서로 얶혀있다는 점이다.</p>\n<p>아무래도 개발된 지 50년이 다 되어가는 할배 프로토콜이다보니 초반에 개발된 버전에 비해서 개선사항도 굉장히 많고 옵션 또한 다양하다. 그래서 TCP의 어떤 동작 하나를 파헤쳐보려고해도 무슨 줄줄이 소세지처럼 이것저것 전부 엮여나온다.</p>\n<p>예를 들어 슬라이딩 윈도우 기법을 설명할 때 나왔던 윈도우 크기의 경우, 단순히 수신 측이 보내준 윈도우 크기를 사용하는 것이 아니라 RTT, MTU, MSS 등 네트워크의 상황과 관련된 다양한 변수를 종합적으로 고려하여 결정된다. 정확히 말하면 수신 측이 보내준 윈도우 크기와 송신 측이 네트워크 혼잡도를 고려해서 정한 윈도우 크기 중 더 작은 값이 송신 측의 최종 윈도우 크기가 되는 식이다.</p>\n<p>또한 오류 제어 섹션에서 이야기했던 오류 판별 기법은 사실 혼잡 제어에서도 중요한 부분으로 설명되며, 이후 방금 말한 로직을 통해 송신 윈도우 크기를 재설정하고 송수신 측이 합의본 오류 제어 기법을 사용하여 패킷을 재전송하는 과정으로 진행된다.</p>\n<p>결국 이 포스팅에서는 다루지 않았지만 흐름 제어라는 주제 안에 혼잡 제어와 관련된 내용도 섞여있는 것이다.</p>\n<p>개인적으로 흐름, 혼잡, 오류와 같이 주제를 나눠놓아서 오히려 더 헷갈리는 것도 있는 것 같다. 그래서 이런 구분없이 따로 정리해서 포스팅을 작성하려고도 했었지만, 아무래도 이런 구분이 모두에게 익숙한 상황이니 그냥 필자도 거기에 편승하기로 했다.</p>\n<p>사실 이런 점 때문에 혼잡 제어도 함께 포스팅에 작성하려고 했지만 포스팅 라인 수가 500줄이 넘어가는 것을 보고 그냥 분리했다. 글이 너무 길어지면 읽는 사람도 힘들다.</p>\n<p>다음 포스팅에서는 마지막으로 TCP의 혼잡제어에 대한 이야기를 한 번 해보려고 한다.</p>\n<p>이상으로 패킷의 흐름과 오류를 제어하는 TCP 포스팅을 마친다.</p>","fields":{"slug":"20191122-tcp-flow-control-error-control","path":"/2019/11/22/tcp-flow-control-error-control/","lang":"ko"},"frontmatter":{"title":"패킷의 흐름과 오류를 제어하는 TCP","subTitle":"TCP가 패킷을 안전하게 보내는 법, 흐름 제어와 오류 제어 기법 정리","date":"Nov 22, 2019","categories":["프로그래밍","네트워크"],"tags":["TCP","흐름 제어","오류 제어","Flow Control","Error Control","Stop and Wait","Go bacK N","Selective Repeat","슬라이딩 윈도우","Sliding Window"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#8878c8","images":{"fallback":{"src":"/static/2ebbc07e03d747e529b6345b51c1196d/d803c/thumbnail.png","srcSet":"/static/2ebbc07e03d747e529b6345b51c1196d/8c230/thumbnail.png 80w,\n/static/2ebbc07e03d747e529b6345b51c1196d/23e25/thumbnail.png 160w,\n/static/2ebbc07e03d747e529b6345b51c1196d/d803c/thumbnail.png 320w,\n/static/2ebbc07e03d747e529b6345b51c1196d/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/2ebbc07e03d747e529b6345b51c1196d/3e5ca/thumbnail.webp 80w,\n/static/2ebbc07e03d747e529b6345b51c1196d/b72f1/thumbnail.webp 160w,\n/static/2ebbc07e03d747e529b6345b51c1196d/fc5c5/thumbnail.webp 320w,\n/static/2ebbc07e03d747e529b6345b51c1196d/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#8878c8","images":{"fallback":{"src":"/static/2ebbc07e03d747e529b6345b51c1196d/3fbb4/thumbnail.png","srcSet":"/static/2ebbc07e03d747e529b6345b51c1196d/61846/thumbnail.png 750w,\n/static/2ebbc07e03d747e529b6345b51c1196d/d5395/thumbnail.png 1080w,\n/static/2ebbc07e03d747e529b6345b51c1196d/cc835/thumbnail.png 1366w,\n/static/2ebbc07e03d747e529b6345b51c1196d/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/2ebbc07e03d747e529b6345b51c1196d/6858b/thumbnail.webp 750w,\n/static/2ebbc07e03d747e529b6345b51c1196d/f5547/thumbnail.webp 1080w,\n/static/2ebbc07e03d747e529b6345b51c1196d/29310/thumbnail.webp 1366w,\n/static/2ebbc07e03d747e529b6345b51c1196d/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"bf7fffc2-8817-50bd-8e71-84ed7cbdb5aa","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%97%B0%EA%B2%B0-%EC%A7%80%ED%96%A5%EC%9D%98-%EC%9D%98%EB%AF%B8%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C\">연결 지향의 의미에 대해서</a></p>\n</li>\n<li>\n<p><a href=\"#3-way-handshake\">3 Way Handshake</a></p>\n<ul>\n<li><a href=\"#closed\">CLOSED</a></li>\n<li><a href=\"#listen\">LISTEN</a></li>\n<li><a href=\"#syn_sent\">SYN_SENT</a></li>\n<li><a href=\"#syn_recv\">SYN_RECV</a></li>\n<li><a href=\"#established%EC%9A%94%EC%B2%AD%EC%9E%90\">ESTABLISHED(요청자)</a></li>\n<li><a href=\"#established%EC%88%98%EC%8B%A0%EC%9E%90\">ESTABLISHED(수신자)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-way-handshake\">4 Way Handshake</a></p>\n<ul>\n<li><a href=\"#fin_wait_1\">FIN_WAIT_1</a></li>\n<li><a href=\"#close_wait\">CLOSE_WAIT</a></li>\n<li><a href=\"#fin_wait_2\">FIN_WAIT_2</a></li>\n<li><a href=\"#last_ack\">LAST_ACK</a></li>\n<li><a href=\"#time_wait\">TIME_WAIT</a></li>\n<li><a href=\"#closed%EC%88%98%EC%8B%A0%EC%9E%90\">CLOSED(수신자)</a></li>\n<li><a href=\"#closed%EC%9A%94%EC%B2%AD%EC%9E%90\">CLOSED(요청자)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"저번에 작성했던 TCP의 헤더에는 어떤 정보들이 담겨있는걸까? 포스팅에 이어 이번에는 TCP의 핸드쉐이크 과정과 그 속에서 변화하는 TCP 상태에 대해서 한번 알아보려고 한다. TCP는 신뢰성있는 연결을 추구하기 때문에 연결을 생성하고 종료하는 순간에도 나름의 신뢰성 확보를 위해 핸드쉐이크(Handshake)라고 하는 특별한 과정을 거치게 된다. TCP를 사용하여 통신을 하는 각 종단은 핸드쉐이크 과정을 통해 어떤 TCP 옵션들을 사용할 지, 패킷의 순서 번호 동기화와 같이 통신에 필요한 몇 가지 정보를 주고 받는다. 하지만 말로…","html":"<p>저번에 작성했던 <a href=\"/2019/11/10/header-of-tcp/\">TCP의 헤더에는 어떤 정보들이 담겨있는걸까?</a> 포스팅에 이어 이번에는 TCP의 핸드쉐이크 과정과 그 속에서 변화하는 TCP 상태에 대해서 한번 알아보려고 한다.</p>\n<p>TCP는 신뢰성있는 연결을 추구하기 때문에 연결을 생성하고 종료하는 순간에도 나름의 신뢰성 확보를 위해 핸드쉐이크(Handshake)라고 하는 특별한 과정을 거치게 된다. TCP를 사용하여 통신을 하는 각 종단은 핸드쉐이크 과정을 통해 어떤 TCP 옵션들을 사용할 지, 패킷의 순서 번호 동기화와 같이 통신에 필요한 몇 가지 정보를 주고 받는다.</p>\n<p>하지만 말로만 설명하면 재미가 없으니, C를 사용하여 직접 간단한 클라이언트와 서버를 작성해보고 이 친구들이 핸드쉐이크 과정에서 주고 받는 패킷을 몰래 엿본 결과물도 조금씩 첨부하려고 한다.</p>\n<h2 id=\"연결-지향의-의미에-대해서\" style=\"position:relative;\">연결 지향의 의미에 대해서<a href=\"#%EC%97%B0%EA%B2%B0-%EC%A7%80%ED%96%A5%EC%9D%98-%EC%9D%98%EB%AF%B8%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C\" aria-label=\"연결 지향의 의미에 대해서 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>핸드쉐이크를 이야기하기에 앞서, TCP가 생성하고 종료하는 연결이라는 개념에 대한 이야기를 먼저 하려고 한다. 아마 TCP에 대해서 공부해보신 분들은 TCP의 대표적인 특징 중 하나인 연결 지향(Connection Oriented)이라는 키워드에 대해서 들어보았을 것이다.</p>\n<p>연결 지향은 말 그대로 연결되어 있는 상태를 지향한다는 의미이다. 사실 연결과 비연결은 네트워크를 공부하다보면 여러 번 마주치게 되는 단어인데, 필자는 개인적으로 이 단어들의 의미가 조금 헷갈렸었다.</p>\n<p>상식적으로 두 기기가 통신을 하려면 케이블이든 뭐든 연결이 되어있어야 할텐데, 굳이 왜 연결 지향과 비연결 지향을 나누어 놓은 것인지 이해가 되지 않았기 때문이다.</p>\n<p>이게 헷갈리는 이유는 물리적인 연결과 논리적인 연결의 차이 때문이다.</p>\n<p>우리가 일반적으로 기기와 다른 기기를 연결했다고 할 때 떠올리는 생각은 컴퓨터와 모니터를 연결하거나, USB와 컴퓨터를 연결하는 등의 상황이다. 즉, 기기 간의 물리적인 연결이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bc0e263eb63d5f0929e13c98fe3ced73/91608/physical-connection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 19.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVR42mNggIL//xkY/9czMIHwqlAGZh93JyMvN0crd3dnS2dnZ0MnJyc9L1cHcw8XextvN0d9kBqY+v8MDIwMcIPO+wv8v5US8v9SpiDMYLgkQygziFxVaMG5KsueB8KvZ4JgBPh3K5f9383MoH+3UmQY/j8pKvr/f/n/n5dSJtwp1jB+Ptna4Vm/pd2rSWa2LyeY27ydbGr5dIJF4ItJlpFvp1pagcTeTTG3AakBqX1YoWH87Xhsxf//a///f1E+jeH/3RK9/3fLF/w6l2l6RYuB7c1ED77XnVa8yPhpvTHX//n2HOjiILX34+U5fhyPVP1/v3HO/ztFzgCVcHv231n+BwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"physical connection\" title=\"\" src=\"/static/bc0e263eb63d5f0929e13c98fe3ced73/6af66/physical-connection.png\" srcset=\"/static/bc0e263eb63d5f0929e13c98fe3ced73/69538/physical-connection.png 160w,\n/static/bc0e263eb63d5f0929e13c98fe3ced73/72799/physical-connection.png 320w,\n/static/bc0e263eb63d5f0929e13c98fe3ced73/6af66/physical-connection.png 640w,\n/static/bc0e263eb63d5f0929e13c98fe3ced73/d9199/physical-connection.png 960w,\n/static/bc0e263eb63d5f0929e13c98fe3ced73/91608/physical-connection.png 1251w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>케이블을 사용하여 두 개의 장치를 물리적으로 연결한다</small>\n</center>\n<p>반면, 연결 지향이라는 단어에서 사용하고 있는 연결의 의미는 논리적인 연결(Logical Connection)을 의미한다. 이때 당연히 여러 개의 기기가 서로 통신을 하기위해서는 물리적인 연결 또한 동반되어야한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/025135c6a12488fad9c15e904f065386/690c6/logical-connection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42mNgwA4YtbVtZR0cHKzdHB2tjH18NExdXQ1c7O1N7O3tLXR17WUYcIH//xkYQRhV7D/j55Mp2uv74wVA/Pf8/IrPxfkVQOwzM9P4P13O1MRqDgOSOf/rGZggdD3L+/X1Av8vpmX//79Q7r+rq9h/AZ6s/4I8af8DAoT/v5yi8v9ietb/VVN4QGpBhsD0Qgy6ECj2/3KgPtRlLEDMAWLf/3+f47u5usJ/EQG7/1PqgZpDef6L8zv8M1ORAclB1XMAMTOYfTXW8P+1WGGG/w8qd/5/3/f/f69T8n8GfsP/3Kx6QFt1//NyF/1XlfO+te0f+//rJcH/b1X43J9/n+O/smTAP17OAqAa7f9crPo/GbgM/8z0z/r/Y/b//w+qljP8v1vZ9P9B/Yn/qyP0Ptl4iH5w0xICKub6Jy1m8Xl2nvjT/0+5fl4o1vl/qUgD6BrO/1OyJEByQDWc/wNMhT/Z24v83xpr8v9hy7n/t8tKGJDDABQZ//+f4QLSrP//nxf4dGOmyJf9UyT+X5om+P9MB/+Xk1MkPj5ZKPz//13+K///s0HVMsLiABwp/xmAhoAwVAIseayX89+NjILvF5oVwfxbuSH/b+T6Q8K8Xu3/1fT8/2dmssLVI5kBAOyQ/gHAEaq2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"logical connection\" title=\"\" src=\"/static/025135c6a12488fad9c15e904f065386/6af66/logical-connection.png\" srcset=\"/static/025135c6a12488fad9c15e904f065386/69538/logical-connection.png 160w,\n/static/025135c6a12488fad9c15e904f065386/72799/logical-connection.png 320w,\n/static/025135c6a12488fad9c15e904f065386/6af66/logical-connection.png 640w,\n/static/025135c6a12488fad9c15e904f065386/d9199/logical-connection.png 960w,\n/static/025135c6a12488fad9c15e904f065386/690c6/logical-connection.png 1201w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>조금 더 쉽게 이야기해보자면, 두 기기가 서로 연결되어 있는 상태를 유지하는 것이다.</p>\n<p>전화를 예로 들자면, 전화가 전화선에 연결되어있는 것이 물리적인 연결이고 실제로 다른 전화와 통화를 하고 있는 상황이 논리적인 연결, 즉 연결되어 있는 상태인 것이다.</p>\n<p>그렇다면 왜 TCP는 이런 연결 상태를 유지하는 걸까? 그 이유는 간단하다. 바로 연속적인 데이터 전송의 신뢰성을 위해서이다.</p>\n<p>기본적으로 TCP는 패킷 전송 방식을 사용하기 때문에 보내려고 하는 데이터를 여러 개의 패킷으로 쪼개서 보낸다. 이때 네트워크를 통해 모든 데이터를 한번에 팍! 보내는 것이 아니라 일정 단위로 묶어서 스트림처럼 상대방에게 흘려보내게 된다.</p>\n<p>그럼 한번 데이터를 받는 수신자 입장에서 생각해보자. 패킷 전송 방식의 장점 중 하나는 회선을 점유하지 않고 적은 양의 회선으로도 동시에 통신을 할 수 있다는 점이다.</p>\n<p>그렇다는 것은 각 종단이 동시다발적으로 여러 기기들과 패킷을 주고 받고 있다는 의미인데, 이때 “누가 보낸 몇 번째 패킷”이라는 정보가 없다면 수신 측은 굉장히 혼란스러울 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3ba48da98f25bb75ddd3da9a66e171e0/f2331/pipes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACzUlEQVR42n2Sz08TQRTHB/HCvyGJwYuJ/wAxqZqQGPWg0Xgw8Vc8QeLJRCMcNEYTgUp/7lZol1ZKS0lpqYBCbSnsj/6g7Xa7RbZ0u21QoxjAA4FY6fi2VNMDMMnb75s3M5/35s0iml+VEUJNi2nJG0kt345EeQ2dWU1ADPX04GOoYbgxblaV4aVhOvX5UYhOtDFZmYfQ8VkmtRwVChcRzedrQCaTd4bZZD+bK4ucqERrQHw4MBwTH8/QdBsjyLxe2/diKsTi5W+bZxGXW9uNxIQbADal5XVM89ICk5bmDqoQ14GcUCQt1Ig08SHYPj0fw7oBrTjHpOSYWOxATEb+yQryF04s7XC50rPalfl89EhgVtG6vQFstVHlySCzfr1DczKWKwUjCfEKZJOF+cXEhbj0dY/jpatRfqWdE4vxfWDPgVdmswUqLZW7X73uo8LxnKLGolmZ5fj8ZcRkFXb/GiUS+niNTktnGEGZOqpCNiP3cxn5QWB24QSc/7SfRJlgMoVzKKVsagNOy6nYSrmXXsrcWWDj55Plre6DHgXX50l542myuHFTkEqtaWXLWospv0xL8o92FP+8hmNCvposfK8uraxV42IRHmZ12+/3axoh4DWp397ehy2jHu/OiHs8ZHeM6HxTHzFlpTrHfe/xu1G3HXkmJrHbN7035p/GY/4Z7PIGKl5fADscjvu1vrndzfUCm+rzFqPBsGsyGsNms1k3+NaCCcLSRRBmbDIZ7UgNGHQDewb9AFbNqNdVbFYrJkny7mFAgiB2Yb0GpCgKgETX4OCQqnY0NAQOSVYIgqyqBht/U9QwZDMdBdwGWBD0jXoeznSCqUAKuVwubLVa/6gLoKpVPB4Pttls9xqB0Mv/QGjHjt1uD0N1epir7elyOp2q2hFQRyEbDZoBS4MfAjWBtTaC/g3134S1J3CDW7BXA/rSYrGcBv85xC/9BYcvGjU7koP9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"pipes\" title=\"\" src=\"/static/3ba48da98f25bb75ddd3da9a66e171e0/6af66/pipes.png\" srcset=\"/static/3ba48da98f25bb75ddd3da9a66e171e0/69538/pipes.png 160w,\n/static/3ba48da98f25bb75ddd3da9a66e171e0/72799/pipes.png 320w,\n/static/3ba48da98f25bb75ddd3da9a66e171e0/6af66/pipes.png 640w,\n/static/3ba48da98f25bb75ddd3da9a66e171e0/d9199/pipes.png 960w,\n/static/3ba48da98f25bb75ddd3da9a66e171e0/21b4d/pipes.png 1280w,\n/static/3ba48da98f25bb75ddd3da9a66e171e0/f2331/pipes.png 1427w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>연결 상태가 없는 패킷을 구분한다는 것은 한 양동이에 담긴 물을 구분하고 싶다는 말과 같다</small>\n</center>\n<p>위 그림에서 파이프는 물리적인 연결, 각 파이프 끝의 구멍은 포트, 양동이는 패킷을 처리할 프로세스라고 생각해보자. 이때 연결 상태에 대한 구분을 하지 않고 패킷을 구분하고 싶다는 것은 마치 한 양동이에 담긴 물 중에서 어떤 한 파이프 구멍에서 나온 물을 구분해내고 싶다는 말과 비슷하다.</p>\n<p>그렇기 때문에 TCP는 A와 B의 연결 상태, A와 C의 연결 상태 등 각 기기간의 연결 상태를 따로 구분하고 있는 것이다. 이때 TCP는 상대방과 연결 상태를 만들거나 해제하기 위해 특별한 과정을 거치는데, 이 과정을 핸드쉐이크(Handshake)라고 한다.</p>\n<h2 id=\"3-way-handshake\" style=\"position:relative;\">3 Way Handshake<a href=\"#3-way-handshake\" aria-label=\"3 way handshake permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>먼저, 연결을 만드는 과정부터 살펴보도록 하자. 연결을 생성할 때 거치는 핸드쉐이크 과정을 3 Way Handshake라고 하는데, 3 Way라는 말 그대로 총 3번의 통신 과정을 거친다.</p>\n<p>이 과정을 거치면서 통신을 하는 양 종단은 내가 누구랑 통신하고 있는지, 내가 받아야할 데이터의 시퀀스 번호가 몇 번인지와 같은 정보를 주고 받으면서 연결 상태를 생성하게 된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39c2c760f38c6bd21705f9e01d1aa41c/7575b/3way-handshake.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSklEQVR42nVUS0sbYRRNa9VYo1GTmBptm7bWRdqdTVtQkFqlUCK48Q+40EILgn/ArRvFjSt1o0hQioLvB4ggogZJIE3MS5OYd2JM1GDQwjg99+vE+mgG7sydjzPnu+fc+43I5/NxJycnXCKR4KLRKLe2tsatr69zR0dHbC2ZTHKxWIwLBAIsJ+z+/j7DbWxscMFgkOFSqRRns9k40fT09Ge32/3BbrdrDQaDdnBwkIXRaNTSmtPp/Li1tVU/Nzf3iXAWi+U9NrzGbW5uamkNG70bGBjQiXBJ6NbQ0PBod3c3l+d5FpTTmujvRc/CbLja2tpcAVdBtwKTyVQCiQmSc3BwcLm3t3eJnEeEu7q6SgRC8c7Ojgy4OElHtQyHnHChyclJKkxJhGJ4JwHQAS/CkOmHF34AIwCa29vbi4B5iMinjeGnjXAul4vhkEeBNYOwABjFteSRkRFFJBJRLi4uqvV6fU04HC6nNUFKbkYyPlSYzWbl8vLyC8KhQeVDQ0PKm5LFML74+Pg4BpILSD63Wq3nqOTy7OzMD8/kmQpBVBqPxyPpdPoCFaYhOY3u/j49PfXNzMw8zlTIJIPADsIwCElKAO8RSPmlUqlqGhsbK5uamqRogBRYC22EyjwUwAQh23hPck9PjxhdEw8PDxd1d3fLPR6PuK+vj0Ci+fn5b+Pj452Uw5IKzG7lysrKa5Bo4L0K36huSpYILw/ujkhmbWFhIR+PIoxHM0QkUWUa1THJ8J1JHh0dLbxVYRZCRgZ/5K2tra90Ol09CFywIwpCmghyKQ7J1nuS8WExJEvHxsYqent7nyEvbWtry8FJ+rq9va3HMfu5tLTUnNmE7Ojo6JACl6PRaPJudRmNkGLnFIaVdzgcV+jgldfr5bH7uVqt/lJVVVWAbkvwcUbFrVESpuAfIXU5FArZQRyCDB/GyAfyENatIHvb0tKipEbdsSYr4bWHVMGdYMDZ2dkfExMT3ylfXV2VYV0GK5729/e/RF42NTUl+x9h1gsjRR6V1NXVNUPJhd/v56HmigK/LzrLcZyce13Oegmm51F16KgJpO7Dw0Mn5tEBQi9Oi4HmFphywj9HlCHkWYLkPBFw9OeRV1dXK26GQFSMePMHzD+L1nW+DwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way handshake\" title=\"\" src=\"/static/39c2c760f38c6bd21705f9e01d1aa41c/6af66/3way-handshake.png\" srcset=\"/static/39c2c760f38c6bd21705f9e01d1aa41c/69538/3way-handshake.png 160w,\n/static/39c2c760f38c6bd21705f9e01d1aa41c/72799/3way-handshake.png 320w,\n/static/39c2c760f38c6bd21705f9e01d1aa41c/6af66/3way-handshake.png 640w,\n/static/39c2c760f38c6bd21705f9e01d1aa41c/d9199/3way-handshake.png 960w,\n/static/39c2c760f38c6bd21705f9e01d1aa41c/21b4d/3way-handshake.png 1280w,\n/static/39c2c760f38c6bd21705f9e01d1aa41c/7575b/3way-handshake.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이때 요청자(Initiator)는 연결 생성 요청을 먼저 보낸 쪽, 수신자(Receiver)는 연결 생성 요청을 받은 쪽을 의미한다. 이렇게 표현하는 이유는 일반적으로 우리가 생각하는 클라이언트와 서버, 둘 중에 어느 쪽이든 자유롭게 먼저 연결 생성 요청을 보낼 수 있기 때문이다.</p>\n<p>그럼 한 번 각각의 상태가 어떤 것을 의미하는지, 두 기기가 서로 주고 받고 있는 <code class=\"language-text\">SYN</code>과 <code class=\"language-text\">ACK</code>는 무엇을 의미하는지 살펴보도록 하자.</p>\n<h3 id=\"closed\" style=\"position:relative;\">CLOSED<a href=\"#closed\" aria-label=\"closed permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b234afd5db4ad276398327e6c8e1a562/7575b/3way-closed.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADl0lEQVR42nVU3U9SYRymDxMLRRMlycrKvLDuiGqzjWW6tqabN/4L1FZX/gPe2oUfN1647CKdOVmT/AA/2ERFwjmnG6KAHEBBOQckD0iQth1Pz4sHE4t3+3He8/Kc5/09v9/zviK/38+xLMvt7+9zDMNwMzMz3OzsLLe3t5daI/+Fw2FuZ2cnNY9GoxxFUSmc2Wzmdnd3U7h4PM45HA5OpNPpXnq93qdOp1O1tLKi6u7pUXV1d6tW1tZUa1jb3Nx8ZrVan4+Pj78gOLvL9cRosaQwBGtZWlKRNWz0uKurq0GEISE/vFp9mddocniePwkyx5roZJDntROc6DLf05OBW1YqcwRcGfnJY02mwp8W8z5rMXNew/iR85vuKGox8wnrd3q1s7NQIBTHjMZi4CIE55vQHzlOcZYgbzeRxOSEUMzb7ZKfC3Mudn6OpkZHAq4RXSC6MM8krQs2x4cP+cBcROTyZOOFeQdrnqM9Y8B9Gw6w87OhhMVs4/3+PGBKTiUbtNoSnmHkqyZThXFwsIqn6VKD9lOJICUnLZngGJtNvjgyclf/+XNVnKJKv3z8KD8rWYzCF0R+/AgHafrQ4/Um7OvriVA4fBQ7OAio1WpZOkObzVa0F4kwyV+/Dt0UldzY2EgexOO/o7GYf3R09Go6Q3EoFJLAGk4aw+PxBND+HbwzsMmaQqGoqq2tvVlXVyddXl6WAms/wEawjo8EMLuwzYpWq82U3NraKkbXxL29vfktLS0yn88nbm9vJyCRXq9/OzAw8IbMJyYmyuDdm9PT0w9AUg2/KvCN4qxkifBy4bxF0msGgyEXj3ylUlkPESyyTFKCZByG3zFI7uvru5aRYRbCFBnqI2tqarrf0NDwHARulCMEQhqHgVQpAsnr/0jGhwWQLO3v7y9ra2u7jXlRc3PzJZyk14uLi4M4Zl8nJyfr05uQcmg0Gilwl6qrq69kdBmNkGLnOI4W73K5jt1u9/HW1hacQycqKipelZeX56HbEnycVpFhJcEFfwlJl4PBoBPEQcjww0Z+kAexvg6yR42NjXLSqHOlyUp4WkOSwblIAcfGxt4PDQ29I3Mjjh/Wi1GKWx0dHfcwvz48PFz8P8KsA5YiNSqsqamph5LDQCDAQ80xCVxfPG6ayNTU1D9dzjqEol8h2aGjqyD1bm9vb8KPLhBu4S5cIr4FppTg7yCuI2RZgsi5IeDIzSOrrKwsORsCUQHi4R/sy4j4AHHV7wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way closed\" title=\"\" src=\"/static/b234afd5db4ad276398327e6c8e1a562/6af66/3way-closed.png\" srcset=\"/static/b234afd5db4ad276398327e6c8e1a562/69538/3way-closed.png 160w,\n/static/b234afd5db4ad276398327e6c8e1a562/72799/3way-closed.png 320w,\n/static/b234afd5db4ad276398327e6c8e1a562/6af66/3way-closed.png 640w,\n/static/b234afd5db4ad276398327e6c8e1a562/d9199/3way-closed.png 960w,\n/static/b234afd5db4ad276398327e6c8e1a562/21b4d/3way-closed.png 1280w,\n/static/b234afd5db4ad276398327e6c8e1a562/7575b/3way-closed.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>아직 연결 요청을 시작하지 않았기 때문에 아무런 연결도 없는 상태이다.</p>\n<h3 id=\"listen\" style=\"position:relative;\">LISTEN<a href=\"#listen\" aria-label=\"listen permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3c45f32dfd1bd86fe51fd1d639070fc7/7575b/3way-listen.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADfklEQVR42nVUTU8TURStIloUKEqhUlFRkQW6Q9QEEyJKTAwkbPgDLNBEExL+AFs2kG7YGNhAkNAY0LZ8WUOQQgukKUbpFy0tTGln+kELrW3AZBjPHVsEtC+5nTu3Z8675977noRhGD4Wi/HRaJTnOI6fnZ3l5+bm+HA4LMbov1AoxG9vb4v+7u4u73a7RZzBYOD9fr+ISyQSvN1u5yXj4+PPPB7PI4fDUbuyslLb19cnmsViqaXY+vr6Y5PJ9ESn0z0l3Nra2kNseIRbXFyspRg2eqBSqZokWPn0U19ff85sNucKgiAa+RST/Fn0vJQNV1NTk5vGldFP3urqahEkRknOxsbGgc1mO4AvwNiOjo6iNKF0eXm5GLgISUe2Ig4+4QJqtZoSUxChNBgM5gPoRC1YyPShFj4AOQC/t7W1FQBzFnaBNg5FIvZoLMa6XC6fHVj4wRhwIMwDpuRI8sDAQAmaopiamqoYGRmpYlm2lGJpKbkZyfOEM5kUS58+3Zp4964q8e1b6XuVSnFcshSFL9zZ2QmBZB+Sk1arNYnOHsTjcR9qJs9kKBgMl38uzHPJZdO+W6dJ2T+OpeLGhV8/jQuM4DdfzGQoSgaBA4QsCEnyNt45yP6hVCqrGhoartU8fy4T9HpZfP7rWsK44PPoNN4Nnda7uzjvTxoNFoExnpTc1dUlRdek/f39BZ2dnXKv1yvt6ekhkGRiYuL18PDwK/LNX6fKBIa5ZvmsvftFra4WwmHl5/f9yuOS89MvZ06PSCY2OTl5AY8CjEcjy3KxYDCUcrndKavNluK44K+9vTgzODh46USGWQhFMo1GI29pabnT1NT0BI1zoRxBnBaaCKpSBNNh/afL+LAQkmVDQ0Nl3d3dN+Bfbm1tzcFJerm0tDSCY/Zhenq6MbMJlaO9vV0GXE51dfX5E11GI2TYOYFhFZxO5yFm7HBzc1PA7smKiooX5eXleeh2Pj7OqDgxSukp+EtIXQ4EAg4QByCDwRgxIA8gbgXZ/ebmZgU16lRpshIe1ZAyOGUiUKvVvh0dHX1Dvl6vL0a8GKW43tvbexv+lbGxseL/EWZdGCmqUVFdXV0jlOz7fD4Bag7JcH3RWY7MzMz80+WsK13085QdOroKUs/W1tY67lInCDdxF67Q3AJTSvibsCsweRYjOVfTOLp55JWVlSXHLU1UCLv3G5OfidZiiQDBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way listen\" title=\"\" src=\"/static/3c45f32dfd1bd86fe51fd1d639070fc7/6af66/3way-listen.png\" srcset=\"/static/3c45f32dfd1bd86fe51fd1d639070fc7/69538/3way-listen.png 160w,\n/static/3c45f32dfd1bd86fe51fd1d639070fc7/72799/3way-listen.png 320w,\n/static/3c45f32dfd1bd86fe51fd1d639070fc7/6af66/3way-listen.png 640w,\n/static/3c45f32dfd1bd86fe51fd1d639070fc7/d9199/3way-listen.png 960w,\n/static/3c45f32dfd1bd86fe51fd1d639070fc7/21b4d/3way-listen.png 1280w,\n/static/3c45f32dfd1bd86fe51fd1d639070fc7/7575b/3way-listen.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>수신자가 요청자의 연결 요청을 기다리고 있는 상태이다.</p>\n<p>이후 요청자가 연결 요청을 보내기 전까지 수신자는 계속 이 상태로 대기하게 된다. 즉, 적극적으로 상대방에게 대시하지 않는다는 것인데, 그래서 이 상태를 수동 개방(Passive Open)이라 하고, 수신자를 Passive Opener라고도 한다.</p>\n<p>소켓 프로그래밍을 할 때, 소켓 바인딩을 한 후 <code class=\"language-text\">listen</code> 함수를 호출하게 되면 수신자가 LISTEN 상태로 들어가게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>sockfd<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen failed...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server listening..\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이후 수신자는 요청자의 연결 요청이 확인되면 <code class=\"language-text\">accept</code> 함수를 호출하여 다음 단계로 넘어가게 된다.</p>\n<h3 id=\"syn_sent\" style=\"position:relative;\">SYN_SENT<a href=\"#syn_sent\" aria-label=\"syn_sent permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f1c7fdb63dd76b25c40467801dcd2d5a/7575b/3way-synsent.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADiElEQVR42nVUS08TURSuD7RooTxakIeKisSgu4oaISEixMRA4oaFWxbVRA0Jf6BbXEBwwUIpCyGGQJTGUsujvKQChTQ0qZU+KC10aGdaalvANsVkGL87tsjD3uRMT89897vnO/ecEXg8HjYcDrOhUIhlGIadnJxkp6en2c3NTT5G3gUCAXZjY4P3I5EI63Q6eZxer2e9Xi+P29nZYa1WKytQqVQPXS7XXZvNVrG4uFjR2dnJ29LSUgWJORyOe/Pz81UajeYBwVksljs4cB83OztbQWI46HZHR0e9AEtEHtXV1aeNRmMax3G8EZ/EBH8X+T2fCieTydISuALySDeZTFmQGCJyVldXd5eXl3fhczC6ubk5K0EoXFhYyAUuSKQjWx4Hn+B8AwMDJLF8Qij0+/0iAO2hcJi22e2U1WajwpEIAzM3NTVlAHMSdpYcjHpaUTN6ZWWFQs0o+H6QmkGYDox0X/JMd7eUM5vzTSpVie79uzLO6czTdr+RJqSkJSVjo9QM3Ojo6JW+vr4yXFBeV1dX/kHJwj2DITM69y3gG9fFXVpNdHnwYzQwNbEbn5+lvE+fSpIZgig7GAwysVgsjgxjkBzD7f7e2tryqNXqc8kMhZzFIvqln7ExE+O0e1hDOT6rNgLTk0x0Tv89fuNG2VBNTdHV2lrxqtEoRnks29vbFDJzE4NcL2QvHZM8pVAIObdbaFUqM97K5RLiz7W1EZBg7suX518/fHhG/E/DwwXo3aKxsbHrIClH7QuVSmXhQcmixJ8TR1skGXul1Z59LRBkeGWyup80Hab9/hiy4yVjGHjJPT095w9lmIJQoAXZlFotuf/kybWW+vqqTYZZ8QcCfhDSaHwaKwjJP45JxsZMNKq4t7e3oLW19RL87MbGxlOYpMcGg6EPY/ZxZGSkLnlIG8ohl8vFwJ0qLy8/c+iW0cxipL6DZuXsdvsebnBvbW2Nw+nRkpKSR8XFxemYEBE2J1UcaqVEF/wjJI3t8/lsIPZBhgfz6wG5D/EfILvV0NCQ39LSIjlSmpSE+zUkGRwxHjg0NPSyv7//BfF1Ol0u4rkoxcX29var8HMGBwdz/0eYcikUClKjrMrKyjooiVMUxUHNHjF8vsgsBzE5x2455UoU/QzJDjdqAqlrfX3dgX60g3AN07LoRt8Ck0fwl2E5MEkKI3IuJHDkyyMpLS2VHrQEUSbs5h+zi4w8rnD0PAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way synsent\" title=\"\" src=\"/static/f1c7fdb63dd76b25c40467801dcd2d5a/6af66/3way-synsent.png\" srcset=\"/static/f1c7fdb63dd76b25c40467801dcd2d5a/69538/3way-synsent.png 160w,\n/static/f1c7fdb63dd76b25c40467801dcd2d5a/72799/3way-synsent.png 320w,\n/static/f1c7fdb63dd76b25c40467801dcd2d5a/6af66/3way-synsent.png 640w,\n/static/f1c7fdb63dd76b25c40467801dcd2d5a/d9199/3way-synsent.png 960w,\n/static/f1c7fdb63dd76b25c40467801dcd2d5a/21b4d/3way-synsent.png 1280w,\n/static/f1c7fdb63dd76b25c40467801dcd2d5a/7575b/3way-synsent.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>요청자가 수신자에게 연결 요청을 하면서 랜덤한 숫자인 시퀀스 번호를 생성해서 <code class=\"language-text\">SYN</code> 패킷에 담아 보낸 상태이다. 이제 요청자와 수신자는 이 시퀀스 번호를 사용하여 계속 새로운 값을 만들고 서로 확인하며 연결 상태와 패킷의 순서를 확인하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">localhost.initiator > localhost.receiver: Flags [S], seq 3414207244, win 65535</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>TCP 세그먼트를 캡쳐할 수 있는 <code class=\"language-text\">tcpdump</code> 유틸리티로 이 과정을 확인해보면 요청자가 패킷의 플래그를 SYN 패킷을 의미하는 <code class=\"language-text\">S</code>로 설정하고 시퀀스 번호로 <code class=\"language-text\">3414207244</code>라는 값을 생성해서 수신자에게 보내고 있음을 알 수 있다.</p>\n<p>이 경우는 요청자가 수신자에게 연결을 생성하자고 적극적으로 대시하는 상황이므로 이 상태를 능동 개방(Active Open)이라고 하고, 요청자를 Active Opener라고도 한다.</p>\n<h3 id=\"syn_recv\" style=\"position:relative;\">SYN_RECV<a href=\"#syn_recv\" aria-label=\"syn_recv permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5bd44caabf2f0d8fa07c3974a108337d/7575b/3way-synrecv.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADg0lEQVR42nVUTU8TYRCuH0hRoCAtlYqKih6QG6ImmDQiRGLkSLhzQBNNSPgDvXKBQAwn6IkQhCA1BYqINtXaIKRpSaX0kwJb6Lal0NJKAybL+szaIh/2TWZ3dvbZZ+eZmfcVMQzDRaNRbnt7mwsGg5xer+cMBgO3ubkpxOhdOBzm1tfXBT8Wi3Fer1fAGY1GbmNjQ8AlEgnO4XBwIo1G89Tn8z10Op3V8/Pz1b29vYJZLJZqirnd7kezs7OPJyYmnhBucXHxAX54iDOZTNUUw4/ud3d3vxBh5dJFqVSeN5vNWTzPC0Y+xUR/F90vZcJVVVVlpXAldMmxWq0FkLhNcpaXl/eXlpb24fMwtq2trSBFKJ6bmysCLkLSka2Ag0+4wMjICCUmJ0JxKBTKBdCFWrCQ6Uct/AAGAbS1tLTkAXMWlk0/Rj0dhPN4PAIOfghYGwhzgJEdSlar1TI0RT41NVU2NDR0l2XZYoqlpGSlJeNDmc1mk09PT98kHBpU3NfXJz8qWYzC529tbYVBsgfJu3a7fReZ7MfjcT9qJk1nCKLCSCQSTCaTe8gwCclJdPf3zs4Oo9VqL6YzFCSDwAlCFoQkZR3PQUj5qVAo7tbW1l6tq6uToAGSUDi8GE8k/B6vd4UsGottoPiWU5JVKpUYXRP39/fntbe3S1dWVsSdnZ0EEk1OTr56Nzj4knzz+/clu1brVcvo6J3PanUF73AoPr19qzgqOTf1cObkiKRjup6ebNzymior62Nf9dGg/nPSO6FNOj6MJdkvM79/zZoYfmHh0rEMMxCK3Dpdtkqrleqam2+bGxoex78ZPGGDPuTTjbMe7QcW5JGEyWjnGea4ZJ1Olw/JkoGBgZKOjo7r8AtFTU3nvms0zx0/fgxZjMZR48eP9YTl3e5sBuXoaG2VAHdOVVFx4ViX0QgJRiaBYeVdLtcBOnjgW13loyy7+7Os7BlfWpojUypz8XFaxbFRSk3BP0LqciAQcII4gMFmMEbMss8X2AyF7PWlpZW1jY1yatSJ0mQkPKwhZXDCBOD4+Pib4eHh1+TPzMwUIV6EQ+VaV1fXLfiXx8bGiv5HmHFhpKhGBTU1NfVQsuf3+3moOSDD8UV7OYKdc6rLGVfF36JfoOywd60g9a2trblxlrpAuIrdMk9zC0wx4W/ALsOkGYzkXEnh6OSRlpeXy45aiigfdu8PYW6M66s3vdgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way synrecv\" title=\"\" src=\"/static/5bd44caabf2f0d8fa07c3974a108337d/6af66/3way-synrecv.png\" srcset=\"/static/5bd44caabf2f0d8fa07c3974a108337d/69538/3way-synrecv.png 160w,\n/static/5bd44caabf2f0d8fa07c3974a108337d/72799/3way-synrecv.png 320w,\n/static/5bd44caabf2f0d8fa07c3974a108337d/6af66/3way-synrecv.png 640w,\n/static/5bd44caabf2f0d8fa07c3974a108337d/d9199/3way-synrecv.png 960w,\n/static/5bd44caabf2f0d8fa07c3974a108337d/21b4d/3way-synrecv.png 1280w,\n/static/5bd44caabf2f0d8fa07c3974a108337d/7575b/3way-synrecv.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><code class=\"language-text\">SYN_RECV</code>는 요청자가 보낸 SYN 패킷을 수신자가 제대로 받은 상태를 의미한다.</p>\n<p>이후 수신자는 제대로 된 시퀀스 번호를 받았다는 확인의 의미인 승인 번호(Acknowledgement) 값을 만들어서 다시 요청자에게 돌려줘야한다. 이때 승인 번호는 처음 <code class=\"language-text\">요청자가 보낸 시퀀스 번호 + 1</code>이 된다.</p>\n<p>이 승인 번호 만드는 과정은 어렵게 생각할 필요가 없는게, 저번 포스팅에서 이야기했듯이 TCP를 사용하여 실제로 데이터를 주고 받을 때에는 <code class=\"language-text\">상대방이 보낸 시퀀스 번호 + 상대방이 보낸 데이터의 byte</code>를 합쳐서 승인 번호를 만들어낸다. 즉, 내가 여기까지 받았으니, 다음에는 여기부터 보내달라는 일종의 마킹인 것이다.</p>\n<p>그러나 이런 핸드쉐이크 과정에서는 아직 데이터를 주고 받지 않기 때문에 시퀀스 번호에 더할게 없다. 그렇다고해서 시퀀스 번호를 같은 번호로 주고 받자니 패킷의 순서를 구분할 수 없지 않은가? 그래서 그냥 1을 더하는 것이다.</p>\n<p>방금 전과 마찬가지로 tcpdump 유틸리티를 사용하여 이 과정을 확인해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">localhost.receiver > localhost.initiator: Flags [S.], seq 435597555, ack 3414207245, win 65535</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>수신자가 요청자에게 보내는 패킷을 캡처해보았더니 패킷의 플래그가 <code class=\"language-text\">S.</code>로 설정되어있다. 이때 <code class=\"language-text\">.</code>가 의미하는 것은 헤더의 <code class=\"language-text\">ACK</code> 플래그 필드가 1이라는 것이므로 이 패킷에는 유효한 승인 번호가 담겨있음을 알 수 있다.</p>\n<p>수신자는 이번 통신을 통해 요청자에게 <code class=\"language-text\">3414207245</code> 이라는 승인 번호를 전달하고 있는데, 이 값은 방금 전 요청자가 보냈던 시퀀스 번호인 <code class=\"language-text\">3414207244</code>에 1을 더한 값이다.</p>\n<p>또한 랜덤한 수로 자신의 시퀀스 번호인 <code class=\"language-text\">435597555</code>를 다시 생성하여 함께 요청자에게 보내주고 있는 것을 확인할 수 있다.</p>\n<h3 id=\"established요청자\" style=\"position:relative;\">ESTABLISHED(요청자)<a href=\"#established%EC%9A%94%EC%B2%AD%EC%9E%90\" aria-label=\"established요청자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/71081fa52243d495fece15995bd54306/7575b/3way-established-client.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADgklEQVR42n1US0sbURQea6OJxvcjVgVLKy4CUtGmLaUQGumituAqG3+AiK0b/QFZiSC4EHQhVgSfVVDUJDagrYnRaK1Ym0ajSTSaTN4m8UFjsxin302TEKX2wpk5995vzj3fd84dym63X56enl4FAgHG5/Mxi4uLzPLyMuN2u5lgMBgxr9fL0DQd8YFlDg8PmaWlJUaj0TD4PrJ+cXHB7O3tMdTMzMxLAJ4aDIYnW1tbot7e3ohtbGyIABCZTKZna2trLxQKRRynVqvjuNXVVRFZw0GPMX9DYfDJQywW3+3r6+OwLBuxzc1NDlmj/g7yTo/hyF4irqamhhPFCcgjbX19PRN0PYQ6sgjv7u6GIcHV2dmZp729vQCYZBhPq9XmAOcCxTgOPgvzqFSqXGAIluJtb2+nQycDgrjNZrPdaDTa/X6/GwcYOjo6coBJgnGxngGcnuD29/cjOOIjoGF+fj4TmLw45YGBgQIUQgCx709PT1dA5MKhoaHCKBVOjDLB6fX6CG58fLzCYrEU9vf3CxIpcyEqHyfRLpcrfHBw8GtnZyeE4L8R1NHc3FwUzTAVemWdnJzYQqFQGExCoBwCJgxpaByQHcswTtnj8bgRkFChMXeB8k5VVZVQIpGU1NfXZ6+srBDK38/Pz2lkZiUGujTk+UH2rlGWyWRcq9XKRRtltLa25hMfa2lkT6lUNo2MjDQRf2pq6p7NZitBRuWTk5NCFKl4bGysOJEyPzpJutkisbXu7u5UvDIqKytrnU6nD0wuY5QhTZhknEj5fwGpwcFB7sLCQl5DQ8ODurq65whgBG0vpHGi0i7MfdDfSFrvWkDT8HAmywayvvb0FH1oaytD02azUmny3Nzca51O9xHXcQq99opg0SKpXV1dvMbGxizgkoVCYcq1KrMQ9EyrDhyp5lmTfPbKDLPC935euGyorn5LUaU8qVjMx8cxFtdaCeNOYkAeiyoHNeqfR5+ULot81maRz9msKqUzoPlitIoeVeklEoG0paXghjS3BoxrSDJINFSRXDlKI5e/105MvCO+SqfLxV4eaJd2dnY+hJ87Ojqa/6+Atw6pTJbSSFFZlyJRrd/huLDRNIuiXBFzOBwsqhwg9/xmlW8d0b9JCqtQ5AT9/m9oncPj42MT+nEfvhW3ZZPc81jAMhj5U+TfYgRUFMVFeq28vLwg0aJ/GdI2wj/W6IuG9QJJxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way established client\" title=\"\" src=\"/static/71081fa52243d495fece15995bd54306/6af66/3way-established-client.png\" srcset=\"/static/71081fa52243d495fece15995bd54306/69538/3way-established-client.png 160w,\n/static/71081fa52243d495fece15995bd54306/72799/3way-established-client.png 320w,\n/static/71081fa52243d495fece15995bd54306/6af66/3way-established-client.png 640w,\n/static/71081fa52243d495fece15995bd54306/d9199/3way-established-client.png 960w,\n/static/71081fa52243d495fece15995bd54306/21b4d/3way-established-client.png 1280w,\n/static/71081fa52243d495fece15995bd54306/7575b/3way-established-client.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>요청자는 자신이 맨 처음에 보냈던 시퀀스 번호와 수신자가 응답으로 보내준 승인 번호, 즉 <code class=\"language-text\">내 시퀀스 번호 + 1</code>를 사용하여 연결이 제대로 성립되었는지 확인할 수 있다. 자신이 보냈던 시퀀스 번호와 이번에 받은 승인 번호의 차가 1이라면 제대로 연결이 되었다고 판단하는 것이다.</p>\n<p>이후 요청자는 연결이 성립되었다고 판단하고 <code class=\"language-text\">ESTABLISHED</code> 상태로 들어가면서, 이번에는 수신자가 새롭게 만들어서 보내줬던 시퀀스 번호에 1을 더한 값을 다시 승인 번호로 사용하여 다시 수신자에게 보내준다.</p>\n<p>즉, 마지막으로 수신자가 보내줬던 시퀀스 번호인 <code class=\"language-text\">435597555</code>에 1을 더한 값인 <code class=\"language-text\">435597556</code>이 요청자의 승인 번호가 될 것이다…만 tcpdump의 동작은 필자의 예상과 달랐다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">localhost.initiator > localhost.receiver: Flags [.], ack 1, win 6379</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0d802ed236b13cf140bc5d184c65e2a3/d7854/why.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABWi/YjmxwZ//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwAEExL/2gAIAQEAAQUCWY881M+a5rKGCzQZtzVa/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BiP/EABsQAAICAwEAAAAAAAAAAAAAAAABESECEEEi/9oACAEBAAY/Asr5ro5Uj8opRR//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUHw/9oACAEBAAE/IacrYwEBHs+TEgqPsUrwgQrNsn//2gAMAwEAAgADAAAAEGAf/8QAFhEBAQEAAAAAAAAAAAAAAAAAACEB/9oACAEDAQE/ENRX/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQBx/9oACAECAQE/EELbv//EABsQAQEAAwEBAQAAAAAAAAAAAAERACFBMVHw/9oACAEBAAE/ECaIzaEBEwiQHmL93iWhk/OY5kgRZj8a+ZTd5g8g2JC15n//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"why\" title=\"\" src=\"/static/0d802ed236b13cf140bc5d184c65e2a3/d7854/why.jpg\" srcset=\"/static/0d802ed236b13cf140bc5d184c65e2a3/0913d/why.jpg 160w,\n/static/0d802ed236b13cf140bc5d184c65e2a3/cb69c/why.jpg 320w,\n/static/0d802ed236b13cf140bc5d184c65e2a3/d7854/why.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>왜 1이 거기서 나와...?</small>\n</center>\n<p>원래대로라면 <code class=\"language-text\">435597556</code>이 되어야할 요청자의 마지막 승인 번호가 뜬금없이 <code class=\"language-text\">1</code>이 되었다. <small>(당황…)</small></p>\n<p>사실 이건 TCP의 자체 동작은 아니고 <code class=\"language-text\">tcpdump</code>가 제공하는 기능이다. <code class=\"language-text\">tcpdump</code>가 패킷들의 시퀀스 번호를 알아보기 쉽게끔 “상대적인 위치”로 알려주기 때문이다. 이후 이 두 종단이 주고 받는 데이터를 <code class=\"language-text\">tcpdump</code>로 캡처해보면 이게 무슨 말인지 조금 더 쉽게 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">localhost.initiator > localhost.receiver: Flags [P.], seq 1:81, ack 1, win 6379, length 80: HTTP</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>원래대로라면 요청자가 마지막으로 보내는 승인 번호는 <code class=\"language-text\">435597556</code>이 될 것이기 때문에 첫 번째로 전송하는 데이터의 시퀀스 번호의 범위 또한 <code class=\"language-text\">435597556:435597637</code>로 출력되어야한다.</p>\n<p>그러나 인간이 이렇게 큰 숫자를 계속 보면서 분석하기는 쉽지 않기 때문에 승인 번호를 <code class=\"language-text\">1</code>로 보여주고, 이후 주고받는 첫 번째 시퀀스 번호를 1부터 시작해서 알아보기 쉽게 만들어주는 것이다. 확실히 <code class=\"language-text\">435597556:435597637</code>보다는 <code class=\"language-text\">1:81</code>이 알아보기 쉽다.</p>\n<p>하지만 이건 인간이 알아보기 쉽게 <code class=\"language-text\">tcpdump</code>가 친절함을 베푼 것일뿐 실제로 값이 1로 변경된 것은 아니기 때문에 <code class=\"language-text\">tcpdump</code>의 <code class=\"language-text\">-S</code> 옵션을 사용하여 이 기능을 비활성화하면 원래 승인 번호와 시퀀스 번호를 그대로 출력할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> tcpdump <span class=\"token parameter variable\">-S</span>\nlocalhost.initiator <span class=\"token operator\">></span> localhost.receiver: Flags <span class=\"token punctuation\">[</span>.<span class=\"token punctuation\">]</span>, ack <span class=\"token number\">435597556</span>, win <span class=\"token number\">6379</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"established수신자\" style=\"position:relative;\">ESTABLISHED(수신자)<a href=\"#established%EC%88%98%EC%8B%A0%EC%9E%90\" aria-label=\"established수신자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/be47dca10f68741755f229c81dba5895/7575b/3way-established-server.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADYUlEQVR42nVU3U9ScRimTMX8QAUk0crKvKAu3Izqws1lWlvTzRv/AS+srTY3/wEu88bNG67UC3WOyVpuighYjM3hB3OwESj4AQz5FlEkSduOp+c9gfkRv+095z0/nvP83ud53wPP7/czBwcHTCKRYCKRCGM0GhmTycTs7e1xe/RbLBZjAoEAlx8eHjLb29scbnFxkQkGgxwulUoxGxsbDG96evq1x+N54XK55BaLRa5UKrmwWq1y2tvc3Hy5vLzcrNFoXhHO4XA8x4HnOLPZLKc9HPRsaGiog4dVQpeWlpZba2tr+SzLckE57fH+LroX58I1NTXlZ3DVdCmy2WzlkJggOTs7O6fr6+unyFlEuK+vrzxDyF9dXRUCFyfpqJbDISdcSK1WU2ESIuRHo9ESAN3wIgyZu/BiF8AIgPaenp5SYG4iCulg+LlBuK2tLQ6HPAqsHYRFwIjPJY+OjorRFMn8/HydSqVqCIfDVbSXkZKflYwXxXa7XaLX6x8QDg2qGh4ellyUzIfxZfv7+zGQnEDysdPpPEYlp0dHR7vwTJStEEQV8Xg8kk6nT1BhGpLT6O7vZDLpn5mZuZ2tkJMMAhcIwyAkKQE8RyDlh1QqbWhtba1pa2sToAECYB10ECrzUgAThGzrNckKhYKPrvFHRkZK+/v7RV6vlz84OEgg3tzc3IfJycn3lMOSasxujcFgeAwSGbyX4h3pRcklmYcbV0cku6fVagtxK8V4tEPEAapMozpOMnznJI+PjxdfqjAHIUcGf0RdXV2POjo6mkGwBTuiIKSJIJfikOy8JhkvlkGyYGJionpgYOAe8oru7u48fEnvVlZWVPjMvuh0uvbsIWRHb2+vALg8mUxWcKnLaIQAJ6cwrKzb7T5DB898Ph+L04/r6ure1tbWFqHbJXg5q+LSKGWm4B8hdTkUCrlAHIIMP8bID/IQ9p0ge9rZ2SmhRl2xJifhuYdUwZXggLOzs5+mpqY+Uh5Y+CpkkwGhRam8O/lZ8ZBlDyvXx8aE/yPMudQKBXlU/gZdTpiMJ36DjvVoNWcUwW8G9ueSOQ5/rnU558qYXkCV/FpZskW+L3gCet1m0KB3R4wLvpPVZQvNMDBVhL+PqESIcgTJuZPB0T+PqLm+XsxFY6O4EfcMURniyR8gPYl1Eyx9hwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way established server\" title=\"\" src=\"/static/be47dca10f68741755f229c81dba5895/6af66/3way-established-server.png\" srcset=\"/static/be47dca10f68741755f229c81dba5895/69538/3way-established-server.png 160w,\n/static/be47dca10f68741755f229c81dba5895/72799/3way-established-server.png 320w,\n/static/be47dca10f68741755f229c81dba5895/6af66/3way-established-server.png 640w,\n/static/be47dca10f68741755f229c81dba5895/d9199/3way-established-server.png 960w,\n/static/be47dca10f68741755f229c81dba5895/21b4d/3way-established-server.png 1280w,\n/static/be47dca10f68741755f229c81dba5895/7575b/3way-established-server.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>요청자와 마찬가지로 수신자 또한 자신이 보냈던 시퀀스 번호와 이번에 받은 승인 번호의 차가 1이라면 제대로 연결이 되었다고 판단하고 <code class=\"language-text\">ESTABLISHED</code> 상태로 들어가게된다. 여기까지 오면 요청자와 수신자는 안전하고 신뢰성있는 연결이 생성되었다고 판단하고 본격적인 통신을 시작할 수 있다.</p>\n<h2 id=\"4-way-handshake\" style=\"position:relative;\">4 Way Handshake<a href=\"#4-way-handshake\" aria-label=\"4 way handshake permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>연결을 생성할 때와 마찬가지로, 연결을 종료할 때도 특정한 과정을 거쳐서 연결을 종료해야한다.</p>\n<p>그냥 연결을 끊어버리면 안되냐고 할 수도 있지만, 한 쪽에서 일방적으로 연결을 끊어버리면 다른 한 쪽은 연결이 끊어졌는지 지속되고 있는지 알 방법이 없다.</p>\n<p>또한 연결을 종료하기 전에 아직 다 처리하지 못한 데이터가 있을 수도 있기 때문에 양 쪽이 다 정상적으로 연결을 종료할 준비가 되었는 지를 확인하는 과정이 필요한 것이다.</p>\n<p>이때 요청자와 수신자가 총 4번의 통신 과정을 거치기 때문에, 이 과정을 4 Way Handshake라고 부른다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0801c4db6e47a4d1aed92a4a4424bf16/7575b/4way-handshake.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 120%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEFElEQVR42pVUSUtbURSObaMxxiimMYNtBbHQZldstAsXLYoItW6KqxakpQjFghURdOUv0I1uxAkRxAFxFkVExVnEBquJcYqkMYnGOMShPvHl9TuvLzZxKO2Fm3tyc3Lu/YZzRVarld3f3+enzWZjh4eH2ZGREXZ3d5fd29vj93d2dvjfKD44OGDX19fZoaEhdnR0lN+nvOPjY9ZoNLKi9vb2lI2NjaTFxcXE2dlZfVNTk762tlY/Pz+vX15e1q+srLyYmppK7unpeeXLm5iY0Dc0NPB5FBsMhiQc9LysrOyNCCOcPkpKSu5xHCf2n7Qn+j1oDbstLycnRyzkaelDCggRDodj12QyeZeWlhjcjDGbzZzb7Xbm5eVFCgUlgKRAnht5BI/BygAB5W11dXVJkaOmgqHb29syJBo3Nzcda2trP2gidoKb74WFhYTgDmaIxWKJtNvta1hdyHGsrq46ELtdLtdSX19fCHJUl5Db2to0uH7M5ORkfEtLiw6xlvYEKGIf5Lq6Ogl+k4BDeVFRkQJxSH5+fqg/5FBcPRynOKD4GSCc4PsJSGYwbRkZGfcpSalUyoQ/BV09REDwpyCUkzmdTjOg70BJO6YDFnGBG1NsbOwTlUoVnZWVFfGvBcP9N0kxnU7H3wbQ79La0dHxrqqq6j3FMzMzBFMBuz2ETeIQR9XX1ytuKhh01SK+PVglmPISExNfQ5RzCMjBGV4I4gUqDqZ24XDiMfqfCiJZJpVK1SkpKc9Q0Ayut6AyUbOF4QQ1BtAWHKByf39/FEGBsg8ICgSJGhwc5KHAY4Uo+sGfBoFDqRDfDRAFysrhuUP0LEcwcLr39PSUDHsCQV7Gx8fL09PT5cKfROh3CdqxAOvXK+h+FwQnYVDZCD7sKGiFqa1kIzwQi8nJycorthHhAiG9vb2fmpubP95U0Mfh38alRQYGBqI9Ho+yoqJClpubqzg6OopubGxU/VdB2IgIF5eXl2tR4ASDw7PlBTKeGoZhXKWlpddUvmnwUKqrq8M1Gs2j1NTUp+D5O+ghWixQ2QKabOB67prKaG4lkjTwlJomXhMN3jr+xNbW1o94J99SDCfwDZCQkOCvckCnSKanp+WHh4ceMikpjFfEi+8clP8JMdKQEwy1w4SCQX4FfW9kYC/DnFJAGQMnCyj4DdMAhRcwx9RqtS4zM1NbXFysvKGXpbf2MnpVRTBh5jg8UU8ohon5B7Ozs/ML4s8Uj4+Pa9EpMd3d3Y9ramp0sJcWva4NgEzGhnoelmU5JPOQKT4/P9/Lzs6OFG4VgV5OAw3MxcXFZR4o4M7OzgJ6mYcM/ibxZBmh3AIafwGxCXOsoKAgzPdiV1ZW3kfeNIr65y1D5dG5uTmxT2W5cIPbJl9MoOZvOTzkX+JaE9Cfxie/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way handshake\" title=\"\" src=\"/static/0801c4db6e47a4d1aed92a4a4424bf16/6af66/4way-handshake.png\" srcset=\"/static/0801c4db6e47a4d1aed92a4a4424bf16/69538/4way-handshake.png 160w,\n/static/0801c4db6e47a4d1aed92a4a4424bf16/72799/4way-handshake.png 320w,\n/static/0801c4db6e47a4d1aed92a4a4424bf16/6af66/4way-handshake.png 640w,\n/static/0801c4db6e47a4d1aed92a4a4424bf16/d9199/4way-handshake.png 960w,\n/static/0801c4db6e47a4d1aed92a4a4424bf16/21b4d/4way-handshake.png 1280w,\n/static/0801c4db6e47a4d1aed92a4a4424bf16/7575b/4way-handshake.png 1608w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이번에도 요청자(Initiator)와 수신자(Receiver)라는 용어를 사용하고 있는데, 3 Way Handshake와 마찬가지로 클라이언트와 서버, 둘 중에 어느 쪽이든 연결 종료 요청을 시작할 수 있기 때문에 이런 용어를 사용하는 것이다.</p>\n<p>먼저 연결 생성 요청을 했던 쪽이 먼저 연결 종료 요청을 보낼 수도 있고, 반대로 처음에는 연결 생성 요청을 당했던 쪽이 이번에는 먼저 연결 종료 요청을 보낼 수도 있다.</p>\n<p>사실 개발자들은 3 Way Handshake보다 연결을 종료하는 과정인 4 Way Handshake에 더 예민하게 반응할 수 밖에 없는데, 연결을 생성하는 과정에서 문제가 발생하여 연결이 생성되지 않는다면 다시 시도하면 그만이지만, 이미 생성된 연결을 종료하는 과정인 4 Way Handshake에서 문제가 발생하면 그대로 연결이 남아있기 때문이다.</p>\n<p>게다가 4 Way Handshake는 3 Way Handshake처럼 순차적으로 주고받는 방식이 아니라 상대방이 응답을 줄 때까지 대기하는 과정이 포함되어있기 때문에 중간에 뭐 하나 엇나가면 서로 계속 대기만 하고 있는 데드락(Deadlock) 상황이 연출될 수도 있다.</p>\n<p>물론 조건에 따라 일정 시간이 지나면 타임아웃이 되며 연결을 강제로 종료하거나 다음 단계로 넘어갈 수도 있지만 그래도 그 시간 동안 프로세스가 메모리와 포트를 점유하고 있으므로 트래픽이 많은 서버라면 이로 인해 병목이 발생할 가능성은 늘 있다.</p>\n<h3 id=\"fin_wait_1\" style=\"position:relative;\">FIN_WAIT_1<a href=\"#fin_wait_1\" aria-label=\"fin_wait_1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b07b2ad2c9241e70aa0b8c9de86237af/5eb90/4way-finwait1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEWklEQVR42pVV3U9aZxw+XSfSARpkioy0yVy6rmb2xuGMmTE28WYzbF6QLE22XdUba3bVxO3G/8BE442hkRjiF1anxTHNqqCi25zR1Vik8iHfB1FRURGmh7PnPT0YdGxzb/LC77w85/d7n+f3AeX3+5m9vT1uE3t6epqxWCzMzs4OE41GufOtrS0mEAhw9sHBAeN0OpmpqSlmdnaWCQaDzP7+/unR0RG7vb3tpcbGxu673e6P7Xa7an5+XjUwMKDq7u5WLS8vq8jZxsZGpdVqrR4fH68luLW1tQoEVOn1eg5H3iG49fX1qsXFRRWFJSYfra2tb7Ism5O5yRn1euVgi4jR2NiYcxlXU1OTxnHfQpvNJqNpeh9RGNhJREziZuzu7m5ArVZLysvLicNcl8slJzhgOBzwCdAnuE2NRkMudp04zIVW+SGadrjcbtrhdPkdTqd/0+PZ2o1GV+rr69/igQLoKAuFQptYEYfDEcamYUeh9wqCEty1c8pLer2CPT5WvjQ+vW3Rau+yvlfK33S64gzK5AVKp9MJQVMIDfNaWlpkxIY0wkzKuezcnDQ2N7PjnfwpsfFsNG4f/eF4zzr759GC1bv/4DMpiSznNUzfIjNIxhnvcGkp/2DO4g5PP494TD/SvgkTvTc/tx2bn11LKJW3h0tKiso1mvyrOhTzD29w1Lu6curu3eNuozEYOJF/NRq/ft7V9SWxn5nNb4OmzGAw3Oro6HgXdgFKSprNYWaUC/TgWPCYoiTe6urPd8Lhs2AoxLpdrpTH42EikQgbj8cDdXV1ogtJ+TeHo0+eSPBV/L1a/REdDDpRAUGUUAiFDt+hLXTQYmVl5Y0LDicmJgoIlf7+/pttbW0lpETIGfkN3fTdU4PhK2IbeBmIhgqFIntSvF6vFLUYR8+yqKsUijV1cnLCgs6hWCz+pKKiIo8UOP8StbCwcAP78czMzCPq4nrtENfPD4fDG9ikan0I4EWx0mj2F2VlZVL+BmkZKGCESETj0NDQN9kciqn/Xue9DPryWCxW2NnZKW5qapIdHh4WQYZCHnf9Sg5LS0sFJHpPT88tjKkEnLDQOIW+ZhKJBHt6ehoARnw5y9kWB2hvb8+TSqU3GxoaPoSuNkjjRclsIsub0D0I/Rf+luXh4eEigBS4QTHZmCaKycnJIvIbtHrY29v7BbFRCVwD8BMoe5YxNAugSxyRWSQohdGVIrSQlGORSHSfTBq5XC7iHV677DB9dj4P8aIEVH6BJi/gcAVl8wdorCLTFoFAcAezTtnc3Fz4v3pZq9XKCWWTyfQeRtQHhLKOH19Go/HbwcHBh3wNKn0+n3JkZOR9JOkuLvOO2WwuzswyRxkUT87OzliAUxicKSw2mUxGqqqqJJh3RLe82traT8kfEhaLUiUNwIAuwQXwN3CeZY4ysrUImjZkbhW0V9GfdjybARSmJ3ZfX58cuN9x/jID9wrPP/M4LmES3vM/bQLKvSJO8BeWZwg1dMYKUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way finwait1\" title=\"\" src=\"/static/b07b2ad2c9241e70aa0b8c9de86237af/6af66/4way-finwait1.png\" srcset=\"/static/b07b2ad2c9241e70aa0b8c9de86237af/69538/4way-finwait1.png 160w,\n/static/b07b2ad2c9241e70aa0b8c9de86237af/72799/4way-finwait1.png 320w,\n/static/b07b2ad2c9241e70aa0b8c9de86237af/6af66/4way-finwait1.png 640w,\n/static/b07b2ad2c9241e70aa0b8c9de86237af/d9199/4way-finwait1.png 960w,\n/static/b07b2ad2c9241e70aa0b8c9de86237af/21b4d/4way-finwait1.png 1280w,\n/static/b07b2ad2c9241e70aa0b8c9de86237af/5eb90/4way-finwait1.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>먼저 연결을 종료하고자 하는 요청자가 FIN 패킷을 상대방에게 보내면서 <code class=\"language-text\">FIN_WAIT1</code> 상태로 들어서게 된다.</p>\n<p>이때 FIN 패킷에도 시퀀스 번호가 포함되어있긴한데, 이번에는 랜덤한 값으로 생성해서 보내는 것이 아니다. 3 Way Handshake는 시퀀스 번호가 없는 상황에서 새로 만들어야하는 상황이라 랜덤한 값으로 초기화했지만, 이번에는 시퀀스 번호를 새롭게 생성할 필요가 없으므로 그냥 자신이 이번에 보내야할 순서에 맞는 시퀀스 번호를 사용하면 되는 것이다.</p>\n<blockquote>\n<ul>\n<li>요청자 ---<strong>SEQ: 1</strong>---> 수신자</li>\n<li>요청자 &#x3C;---<strong>ACK: 2</strong>--- 수신자</li>\n<li>요청자 ---<strong>FIN: 2</strong>---> 수신자</li>\n</ul>\n</blockquote>\n<p>즉, FIN 플래그만 1로 변경해서 보낸다고 생각하는 게 편하다. 이 플래그의 의미를 쉽게 얘기해보자면 “나 더 이상 할 말 없음” 정도이다.</p>\n<p>이때 요청자가 먼저 적극적으로 연결 종료 요청을 보내는 것이기 때문에 요청자를 Active Closer, 이 상태를 능동 폐쇄(Active Close)라고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">localhost.initiator > localhost.receiver: Flags [F.], seq 701384376, ack 4101704148, win 6378</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>하지만 요청자가 수신자에게 보낸 연결 종료 요청 패킷을 캡처해보니 <code class=\"language-text\">F</code> 플래그가 아니라 <code class=\"language-text\">FIN+ACK</code>를 의미하는 <code class=\"language-text\">F.</code> 플래그가 설정되어있다. tcpdump를 사용하여 패킷을 캡처한 다른 블로그를 봐도 대부분 필자와 같은 상황을 겪고 있음을 알 수 있었다.</p>\n<p>분명 이론적으로는 <code class=\"language-text\">FIN</code> 패킷을 보내야하는데 왜 승인 번호를 함께 묶어서 <code class=\"language-text\">FIN+ACK</code>로 보내고 있는 것일까?</p>\n<h4 id=\"half-close-기법\" style=\"position:relative;\">Half-Close 기법<a href=\"#half-close-%EA%B8%B0%EB%B2%95\" aria-label=\"half close 기법 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>요청자가 <code class=\"language-text\">FIN+ACK</code> 패킷을 보내는 이유는 바로 Half-Close라는 기법을 사용하고 있기 때문이다. Half-Close 기법은 말 그대로 연결을 종료하려고 할 때 완전히 종료하는 것이 아니라 반만 종료하는 것이다.</p>\n<p>Half-Close 기법을 사용할 때는 요청자가 처음 보내는 <code class=\"language-text\">FIN</code> 패킷에 승인 번호를 함께 담아서 보내게 되는데, 이때 이 승인 번호의 의미는 “일단 연결은 종료할 건데 귀는 열어둔다. 이 승인 번호까지 처리했으니까 마저 보낼 거 있으면 보내”라는 의미가 된다.</p>\n<p>즉, 반만 닫겠다는 말의 의미는 연결을 종료할 때 전송 스트림과 수신 스트림 중 하나만 우선 닫겠다는 것을 의미하는 것이다.</p>\n<p>이후 수신자는 미처 못 보낸 데이터가 있다면 열심히 보낼 것이고, 이에 요청자는 아직 살아있는 수신 스트림을 사용하여 데이터를 처리한 후 <code class=\"language-text\">ACK</code> 패킷을 응답으로 보낼 수 있다. 이후 수신자가 모든 데이터를 처리하고나면 다시 요청자에게 FIN 패킷을 보냄으로써 모든 데이터가 처리되었다는 신호를 보내준다.</p>\n<p>그럼 요청자는 그때 나머지 반을 닫으면서 조금 더 안전하게 연결을 종료할 수 있는 것이다.</p>\n<p>소켓 프로그래밍을 할 때 연결 종료 함수로 <code class=\"language-text\">close()</code>와 <code class=\"language-text\">shutdown()</code>을 사용할 수 있는데, 이때 <code class=\"language-text\">shutdown()</code> 함수를 사용하면 Half-Close를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span>sockfd<span class=\"token punctuation\">,</span> SHUT_WR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>만약 요청자가  <code class=\"language-text\">close()</code> 함수를 사용하면 호출 즉시 OS에게 소켓의 리소스를 반환하며 모든 스트림이 파기되므로 FIN 패킷을 받은 수신자가 미처 못 보낸 데이터를 뒤늦게 전송하더라도 더 이상 처리할 수 없는 상황이 된다.</p>\n<p>위의 예제에서는 <code class=\"language-text\">SHUT_WR</code> 값을 두 번째 인자로 사용함으로써 전송 스트림만 우선 닫겠다고 선언한 것이다.</p>\n<p>이와 관련된 더 자세한 정보는 구글에 “Half-Close”나 “우아한 종료” 등의 키워드로 검색하면 많은 자료가 나오니 한번 살펴보도록 하자.</p>\n<h3 id=\"close_wait\" style=\"position:relative;\">CLOSE_WAIT<a href=\"#close_wait\" aria-label=\"close_wait permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f08ce32e213678f2016221fe117de99c/5eb90/4way-closewait.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAESElEQVR42pVVXUhbZxg+rjXGJVFipkkWWpijayvTG5dMZEMsvRri5oWwm3W7qTdOSikFd+VF76WCDIqiiMSfiEJmlkWcJrpouxS0FRf/8/9jEo1RE02qJ2fPd3q0x5Bt7oMv58uX57zf9zzP+76hvF4vvbe3x06ynp6epi0WC72zs0NHo1F2PxQK0T6fj13v7+/Tm5ub9NTUFD07O0v7/X46FoudxONxJhKJuCm9Xn/H4XB8vrq6qp6bm1MPDQ2pe3p61AsLC2qyt76+XmW1Wr80GAy1BLe8vKzBger+/n4WR94huJWVlWqbzaamMMTko62t7SrDMLn8SfaotyMXU0QWTU1NuZm4mpqaMxz7FNrtdlkwGIzhFBrrFE5M4WbM7u6ur76+XlJZWUkC5m1tbckJDhgWB3wS9AnO2djYSC52hQTMg1aFgUBgA5SCAHg3Nja8LpcrBOBiXV3d+xxQAB1lwDkxwsBsYwaxjkLvRRxKcDnnlEdHR5W4vgr63BgbG7udSCRUOp1OwaNMXqB6e3uFwAmhYUFra6uMrCGNkE85z+12S8Ph8A6eybW1tSNQScC5N3DVXV5eLuVOFnEv5WQewtt7GxDaFCI1HNvb22Gsg4Q6AkZAZVkikdwoLS0tgUaFlw0o5r68d+ZiRUUFextQZkUeHx+/1/3s2bdk7f9F+wEDLSefPr2ue/LkIyYWK1rSaqXZAvJPuUAPgQV4SH7QaL6OzVhO/b9PMg6jIe0yGenIjJl58/JP36tHj0QXTPm3gI+7uyW9FKVw3737WdQyvekxGf1OoyHg+u1Xf2BqMhR/brV5Hj7MvxDQZDIVwTHZ4ODgtfb29tJ90NJhj/z2h17/06xO9x1fBqKhUqnMbgpxGbl4BGMY5FUauZhOHB8z8XD4cEss/sKo0RTcRIJzL1HzHk++9cWLx+aZmR+pi+Ody3B4HZNkrQcHuOFwcC8Sef0zlzbydzJQwAhR200jIyPfZwsopv5jVPJqGc1EfnBwUNzZ2Slubm6WHR4elkCGYg565VIBy8rKiMtX+/r6rqNNJREEmeNLo67pZDLJnJyc+IARZ7qcbbCAjo6OAqlUeq2hoeFTVJQd0rhR604UgBO6+6H/fFVVVX5mLZcApMQNFGSimygnJiZKyG/Q6r5Wq/2GrJEJbAFwHSi7y2iaRdDlCCczMCiN1pUmtNCBEyKR6A7pNHK5XMQFzMkMeLZ33g/xogRUnkOT1wi4iLR5BRpLcNoiEAhuoo5VLS0txf+rlru6uuSEstFo/Bgt6hahjKeCq+UHw8PD99kcnJ9XeTweFVrcJzDpNi7zodlsVvBdZimD4vHp6SkDcBqNM43BpFKpcHV1tQT9juhWUFtb+xX5Q8JgkKqkAGjQJTgf/gbOXWYpwy0baNrh3BJoL6EXruK7GUDhWcceGBiQA/cS+3/xcGv4PsnhWMMkXOR/mgSUd0mc4G+aEgkbh9qDcgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way closewait\" title=\"\" src=\"/static/f08ce32e213678f2016221fe117de99c/6af66/4way-closewait.png\" srcset=\"/static/f08ce32e213678f2016221fe117de99c/69538/4way-closewait.png 160w,\n/static/f08ce32e213678f2016221fe117de99c/72799/4way-closewait.png 320w,\n/static/f08ce32e213678f2016221fe117de99c/6af66/4way-closewait.png 640w,\n/static/f08ce32e213678f2016221fe117de99c/d9199/4way-closewait.png 960w,\n/static/f08ce32e213678f2016221fe117de99c/21b4d/4way-closewait.png 1280w,\n/static/f08ce32e213678f2016221fe117de99c/5eb90/4way-closewait.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>요청자으로부터 <code class=\"language-text\">FIN</code> 패킷을 받은 수신자는 <code class=\"language-text\">요청자가 보낸 시퀀스 번호 + 1</code>로 승인 번호를 만들어서 다시 요청자에게 응답해주면서 <code class=\"language-text\">CLOSE_WAIT</code> 상태로 들어간다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">localhost.receiver <span class=\"token operator\">></span> localhost.initiator: Flags <span class=\"token punctuation\">[</span>.<span class=\"token punctuation\">]</span>, ack <span class=\"token number\">701384377</span>, win <span class=\"token number\">6378</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>아까 요청자가 FIN 패킷의 시퀀스 번호로 <code class=\"language-text\">701384376</code>을 보냈으니 이번에 수신자가 응답해줄 승인 번호는 <code class=\"language-text\">701384377</code>이 되는 것이다.</p>\n<p>이후 수신자는 자신이 전송할 데이터가 남아있다면 이어서 계속 전송한 후, 모든 전송이 끝났다면 명시적으로 <code class=\"language-text\">close()</code>나 <code class=\"language-text\">shutdown()</code>과 같은 함수를 호출하여 다음 단계로 넘어갈 것이다.</p>\n<p>즉, 요청자는 언제 수신자의 데이터 처리가 끝날지 모르는 상태이기 때문에 수신자가 작업을 마치고 다시 연결 종료 승인을 의미하는 <code class=\"language-text\">FIN</code> 패킷을 보내줄 때까지 대기해야한다는 말이 된다.</p>\n<p>만약 이 단계에서 수신자의 데이터 처리가 끝나도 연결 종료 함수가 명시적으로 호출되지 않으면 다음 상태로 넘어갈 수 없기 때문에 데드락이 발생할 가능성이 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0bd0fc4fa229c60f0980e590aafde785/229ad/deadlock.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzUlEQVR42q2T2wrDIBBE+///GHKD3Bujxkg0yXTXktKXQohdmAdBjruz48N7DykliqJAmqboug5cx3FckhACShrMywbrdjyc37AsFsPwxDRJeDrTvctyzpE8/HaQGEgHpRTqukbTNNBa427t+xewbdswNoPPkW8DtZ5p5CEAGfwHoA7ALMtQVVU8UBGQOyvLkhYzxXvIHfJC2L88z9H3ffxSGMhKkgTGmBigCx1yoM8u7/j3AVprQ6AZeEaHH+Af9A7tb63rinEUQew9s15AXl7Gmc11bgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"deadlock\" title=\"\" src=\"/static/0bd0fc4fa229c60f0980e590aafde785/6af66/deadlock.png\" srcset=\"/static/0bd0fc4fa229c60f0980e590aafde785/69538/deadlock.png 160w,\n/static/0bd0fc4fa229c60f0980e590aafde785/72799/deadlock.png 320w,\n/static/0bd0fc4fa229c60f0980e590aafde785/6af66/deadlock.png 640w,\n/static/0bd0fc4fa229c60f0980e590aafde785/d9199/deadlock.png 960w,\n/static/0bd0fc4fa229c60f0980e590aafde785/21b4d/deadlock.png 1280w,\n/static/0bd0fc4fa229c60f0980e590aafde785/229ad/deadlock.png 1356w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>구글의 자동 완성 검색어가 데드락에 잡아먹힌 개발자들의 심정을 대변해주고 있다</small>\n</center>\n<p>이때 수신자는 상대방으로부터 연결 종료 요청을 받은 후에야 수동적으로 연결을 종료할 준비를 하기 때문에 수신자를 Passive Closer, 이 상태를 수동 폐쇄(Passive Close)라고 한다.</p>\n<h3 id=\"fin_wait_2\" style=\"position:relative;\">FIN_WAIT_2<a href=\"#fin_wait_2\" aria-label=\"fin_wait_2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/608e421d25ac8fa76021750f0110bed6/5eb90/4way-finwait2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEPElEQVR42pVVTUxjVRR+OEPp2D5IqaWtzUwizowOETZYJERCmISNQ1AWJG7U1bBhiCsTXHXpGsIsCARCCARKICEwIFHoj4XROgGnwfL/0/8foJSfdlrh9fmdNw8sWBVvcvtO7/vuufc73znnMR6Phzs4OBAm2bOzs5zZbOb29va4SCQirIdCIc7r9Qr24eEht7Gxwc3MzHBWq5Xz+XxcNBo9PTk54Xd3d13M2NjYw62trY9WVlb0c3Nz+sHBQX13d7d+YWFBT2tra2vlNputcmJioppwS0tLZThQ39fXJ+BoD+GWl5cr7Ha7nsGQ04/BYLjJ83x2+qQ15vXIxpSR0djYmH0VV1VVdY4TnlKn06kMBAJRnMLBTuLEJG7G7+/ve+vq6tjS0lJymLO5uakmHDACDvgE6BNuu6GhgS52gxzmIFZ5fr9/HZQCAHjW19c9Ozs7IQAXa2tr3xSBEsRRCdw2RhiYIGYAdgTxXsShhMu6oDwyMqLF9XWIz73R0dEHsVhMZzQaNWmUaQPT09MjBU6KGOa2tLQoyUZopOmUc1wulyIcDu/hmVhdXY2DSgzK/QFVXcXFxQrxZJm4KevqIWlrrx0iNnlIja1gMBiGHSDqcLgLKkssy94rLCwsQIzyrutQLv5541zFkpIS4TagLAR5fHz8y46Ojs/JNplMb4GmEu/utLW1vQM7HymlyOQw/ZRL9LBZggdbWVn5KVicQRgeTFIQjkOo+Hg87q2pqZFdEuXfHHZ1dbF4aJBCH6IyNuDIB4d+hMYH5yHE2l5eXn7rkkO3sTOf9zqVlqdPb/cbDIW88xel+3tjPr1DNX2LW36RHgaKoVarzSwK73AoYs9t8aBpht+ZmkxtPhtPvbL/zEes5uP7KtXHd8vKcinBxU3M/Pz8LcxvLBbLE+byEB2+eJEX/cmyFpz90e+aeuZ2T0+59q3mwKHN8vK7R4+EtFH/FQYGySyFEI3Dw8NfZXIoZ/57XNQy6KuPjo5U7e3t8qamJuXx8XEBwqAScTeu5bCoqIhUvtnb23sHbSoBJzzKMIW65hKJBH96euoFRn5V5UxDALS2tuYqFIrb9fX1HyBNnEgdF5TehsrbKAgfesH831RGLRcApMUNNDTRTbTT09MF9A6xetzf3/8Z2UhkoQDEDpRZZTTNfMQljpOFhEXrShEtdOCYTCZ7SJ1GrVbLRIdZVx2er130Q2xkQeU5YvISDhfRwn4DDQdq2SyRSN5DHeuam5tV/6uWOzs71UR5cnLyXbSo94kynhqxlr8eGhp6LOagzu1269Di7kOkB7jM26hvTbrKAmVQfHV2dsYDnELjTGHwyWQyXFFRwaLfUdxyq6urP6EPEgaPVpeijxXoEs6Lz8CFygJlqGUHTSeUc4C2A/W5gv8mAKXnHXtgYEAN3K9Y/z0Nt4r/P4g4QTBW9PxPk0A518RJ/gTqwAStpoJTXQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way finwait2\" title=\"\" src=\"/static/608e421d25ac8fa76021750f0110bed6/6af66/4way-finwait2.png\" srcset=\"/static/608e421d25ac8fa76021750f0110bed6/69538/4way-finwait2.png 160w,\n/static/608e421d25ac8fa76021750f0110bed6/72799/4way-finwait2.png 320w,\n/static/608e421d25ac8fa76021750f0110bed6/6af66/4way-finwait2.png 640w,\n/static/608e421d25ac8fa76021750f0110bed6/d9199/4way-finwait2.png 960w,\n/static/608e421d25ac8fa76021750f0110bed6/21b4d/4way-finwait2.png 1280w,\n/static/608e421d25ac8fa76021750f0110bed6/5eb90/4way-finwait2.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>요청자는 수신자로부터 승인 번호를 받고 자신이 보냈던 시퀀스 번호와 승인 번호의 차가 1이 맞는지 확인한다. 하지만 아직 수신자의 데이터 전송이 전부 끝나지 않았을 수도 있기에 <code class=\"language-text\">FIN_WAIT2</code> 상태로 들어가서 수신자가 연결 종료를 허락하는 <code class=\"language-text\">FIN</code> 패킷을 보내줄 때까지 기다린다.</p>\n<p>방금 <code class=\"language-text\">CLOSE_WAIT</code> 섹션에서 설명했듯이 여기서부터는 수신자가 다시 <code class=\"language-text\">FIN</code> 패킷을 보내줄 때까지 요청자는 계속 대기하는 시간이다.</p>\n<p>하지만 <code class=\"language-text\">CLOSE_WAIT</code>와 다르게 무한정 대기만 하는 것은 아니고 커널 파라미터로 타임아웃이 정해져있는 경우, 일정 시간이 경과하면 자동으로 다음 단계로 넘어갈 수 있다.</p>\n<h3 id=\"last_ack\" style=\"position:relative;\">LAST_ACK<a href=\"#last_ack\" aria-label=\"last_ack permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4450fb7c2d129c97c1c1b5c1d9910fd4/5eb90/4way-lastack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEQElEQVR42pVV30+aVxj+ulbEARpkCoy0yVy6rWZ6Q7HGzBibeLMa543JbrZd1YtmZunFEnvlf2Bal10YrcaY+jOaGC3RrQIaoClmao1DBRT5JfJDRRGQjY/T53x+WrS2cyc5nPc73/O95zzv874vjMfjYff29rhJbZ1OxxoMBjYcDrO7u7vcfiAQYL1eL2fv7++zDoeDnZ6eZmdnZ1mfz8dGIpF/Dw8PSSgUcjFjY2N3NzY27qyurmpMJpNmYGBA09XVpZmfn9fQPZvNVm40GisnJiaqKW55ebkMB2p6e3s5HP2G4lZWViosFouGwRDTn5aWlmuEkKzMSfeY45GFKaJGY2Nj1nlcVVXVCY5bhVarVeb3+yM4hYWdxIlJ3Izs7Ox46+rqJGq1mjrMXl9fl1McMBwO+CPQpzhnQ0MDvdhV6jAbscrb2tqyg5IfAI/dbvdsbm4GAFyora39mAcKEEcZcE6MIDDbmH7Yu4j3Ag6luCunlEdGRpS4vgrxuTk6OnorFouphoaGFBmU6QdMd3e3EDghYpjb3NwsozZCI8yknO1yuaTBYDCM9WhtbS0OKjEo9w9UdZWUlEj5k0X8R1fOH5Kxd+wQsclDamxsb28HYfspdTgMgcqyRCK5WVRUVIgY5V3WoZh/+OhExdLSUu42oMwFeXx8/Mf29vbvqa3X6z8BTRne3Whra/sMdj5SSnqRw8xTztDDxwIsksrKyu/AIgVhCJikIRyLUJF4PO6tqakRnRHlQw47OzslWBRIoduoDAcc+eBwC6HxwXkAsbaUl5fnnHE4OTmZT6n09/dfb21tLaIpQvfoO1TTI9zyh8ww0BgqlcqLRaEqIxfjEIYgr9LIxXQikSCgExWLxd+UlZXl0gTnP2LMZnMO5q8zMzM/M2fHW5URGxsmzVo3DnBBYT+K/fUFacPonU7hmFbbODg8/NNFDsXMf4/TWl7q65AT23yBHqX2W329jDgWC21DTwt43NVLOSwuLqYqXyOPH99Izb06OnhpIr4Xf6T9uhdsYu4VIYt/efUPHojPq/zOIDyg6cmT3N+l0uvk3r2vo8ZZa0A/7XJPPXe6Jp87wwad79BsMpsfPsw5X8uFSAclGqWCTnQT5cjUVCF9Zxwevq9/9qyea3OEcAWgVn9AZTTN/IODgzhE4RLWbrOlI9EoiYVCMZNIdBc3FTByORdDpNa7pfd277gfQk0JUuQlet1rOFxA2iwijZb2wmHDbYHgS9Sx6lFTU8H/quWOjg45pazVaj9Hi/qKUsaq4Gv5l8HBwft8DqrcbrcKLe6Lnp6eW7jMp6hvRabKHOVoNJpIpVIE4DQaZxqDJJPJYEVFhQT9jsYtt7q6+lv6h4RBkKq0AFiEgOK8+Bs4VZmjjCqxgKYV9bkE2kuoz1U86wEUnnTsvr4+OXBz2P87A7eG5z95HCeYhPf8vklB2ZfECd4A2pIHyYStE2kAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way lastack\" title=\"\" src=\"/static/4450fb7c2d129c97c1c1b5c1d9910fd4/6af66/4way-lastack.png\" srcset=\"/static/4450fb7c2d129c97c1c1b5c1d9910fd4/69538/4way-lastack.png 160w,\n/static/4450fb7c2d129c97c1c1b5c1d9910fd4/72799/4way-lastack.png 320w,\n/static/4450fb7c2d129c97c1c1b5c1d9910fd4/6af66/4way-lastack.png 640w,\n/static/4450fb7c2d129c97c1c1b5c1d9910fd4/d9199/4way-lastack.png 960w,\n/static/4450fb7c2d129c97c1c1b5c1d9910fd4/21b4d/4way-lastack.png 1280w,\n/static/4450fb7c2d129c97c1c1b5c1d9910fd4/5eb90/4way-lastack.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>수신자는 자신이 처리할 데이터가 더 이상 없다면 연결을 종료하는 함수를 명시적으로 호출하고, 아까 요청자가 보냈던 연결 종료 요청에 합의한다는 의미로 요청자에게 다시 <code class=\"language-text\">FIN</code> 패킷을 보낸다.</p>\n<p>이때 수신자가 보내는 <code class=\"language-text\">FIN</code> 패킷에 담기는 시퀀스 넘버는 자신이 이번에 전송해야 하는 데이터의 시퀀스 번호를 그대로 사용하며, 승인 번호는 마지막으로 자신이 응답했던 승인 번호를 그대로 사용한다.</p>\n<p>이후 수신자는 <code class=\"language-text\">LAST_ACK</code> 상태로 들어가며 요청자가 다시 승인 번호를 보내줄 때까지 대기한다.</p>\n<h3 id=\"time_wait\" style=\"position:relative;\">TIME_WAIT<a href=\"#time_wait\" aria-label=\"time_wait permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9d3cabeb3e6e66223cb4475d42aba133/5eb90/4way-timewait.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAERklEQVR42pVV309aVxy/tlXo5GrwTpGRNplL19VMXxzOmBljE18W4+YDyZJl21N9sc2elrgn/wMTjS8mRmMN1co0odDMbSI/hnRhja6GgQqCCIjgbwWE4eXsc27RoWObO8nhfjn3c77f8/18vt9zmUAgwO/v7wuT2nNzc7zJZOJ3dnb4vb09YT0SifDBYFCwDw8PeY/HwxsMBt5isfChUIg/ODhIx2Ixsr297We0Wu19r9f74fLysnJ+fl45MTGhHB4eVi4sLCjp2urqaoPVam3S6/UtFOdwOOoRUDk2Nibg6B6Kc7lcjXa7XclgSOhPT0/PDUJIYe6ka8zrUYhZTI3Ozs7Cy7jm5uYznPAUO51OLhwOHyAKDzuFiCmcjOzu7gbb29vZuro66lC0trYmozhgBBzwSaRPcT6VSkUPdp06FIGr0s3NTTdSCgMQcLvdgfX19QiAi21tbW9kgUXgkQPOhxEFZgszDHsPfC8iKMUVnKc8NTUlx/EV4OfO9PT0vXg8rpicnKzMSZluYEZGRsTAicFhSXd3N0dtUCPOTVnk9/ul0Wh0B8/kyspKAqnEodwfUNVfU1MjzUYuzm4quBwkZ+21Q3BTitLwbm1tRWGHaepwuI1UHCzL3qmqqqoAR6VXdSjJ/rl2pmJtba1wGqQskKzT6b4cHBz8jNpGo/FNpMnh3e3+/v63YZehpKT5HOZGuZAeNhfhwTY1NX2CLE4hDEEmGQjHgyqSSCSCra2txRdE+TeHQ0NDLB6VKKEP0BkeOArB4SaoCcF5BFzbGxoabl5wODMzU0ZTGR8fv9Xb21tFS4Su0Xfopm9xyi9yaaAcyuXy/KJQlVGLCQhDUFcZ1GLm5OSEIJ1jiUTyUX19fQkt8Owmxmaz3cT8xmw2P2Qujr9UBjermLRqNxDAD4XDaPZXecqGAUYMITo1Gs1X+RxKmP8e572M9GVHR0flAwMDkq6uLu74+LgCNJRncdev5LC6upqqfGN0dPQ2rqkknBBwnEFf88lkkqTT6SAwkssq5xsCoK+vr0Qqld7q6Oh4H7w6QY0fSvugsg+8h8C/7W8qex4/riAvX8qJw1EpTPP38vAPUxX03bRG80CtVn9KbVSC0ADZGyi/ygTlkbL/kgjPGYj3uS7j1j/LHL2wkUOLKd7CcffpTSOTyYqzDgsuOzxbO78PicvKxqzmFxHDj6/Wnz9b9Om1v+1bjEuxn00mF8fdXVSpFKpHj8r/Vy9rZ2dlsWhUbjUY3vlOrX4PXMlRGsL1ZdLpvrY+ffqA2rM2m2JjY0OBK+5diHQPpfUW+rsyV2URvhNlUO7k9PSUAJzBxZnBIKlUKtre2Mji+3Dtc4YpibW0fBzDBymVThOUKm0AHulSXBCfgXOVxYjCQi071HJCuSUU+hL6cxn/jQCKz27srSdPZNFI5Fes/56DW8H/n7I4QTA26/mfJgWJuKvhiv4EPZUHkwvVy94AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way timewait\" title=\"\" src=\"/static/9d3cabeb3e6e66223cb4475d42aba133/6af66/4way-timewait.png\" srcset=\"/static/9d3cabeb3e6e66223cb4475d42aba133/69538/4way-timewait.png 160w,\n/static/9d3cabeb3e6e66223cb4475d42aba133/72799/4way-timewait.png 320w,\n/static/9d3cabeb3e6e66223cb4475d42aba133/6af66/4way-timewait.png 640w,\n/static/9d3cabeb3e6e66223cb4475d42aba133/d9199/4way-timewait.png 960w,\n/static/9d3cabeb3e6e66223cb4475d42aba133/21b4d/4way-timewait.png 1280w,\n/static/9d3cabeb3e6e66223cb4475d42aba133/5eb90/4way-timewait.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>수신자가 보낸 <code class=\"language-text\">FIN</code> 패킷을 받은 요청자는 다시 <code class=\"language-text\">수신자가 보낸 시퀀스 번호 + 1</code>로 승인 번호를 생성하여 수신자에게 <code class=\"language-text\">ACK</code> 패킷으로 응답한다. 이후 요청자는 <code class=\"language-text\">TIME_WAIT</code> 상태로 들어가며, 실질적인 연결 종료 과정에 들어가게 된다. 즉 <code class=\"language-text\">TIME_WAIT</code> 상태의 역할은 의도하지 않은 에러로 인해 연결이 데드락에 빠지는 것을 방지하는 것이다.</p>\n<p><code class=\"language-text\">TIME_WAIT</code> 상태에서 대기하는 시간은 2MSL(Maximum Segement Lifetime)으로 정의되어 있으며, 정확한 MSL의 시간 값은 커널 파라미터로 정의되어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sysctl</span> net.inet.tcp <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> msl\nnet.inet.tcp.msl: <span class=\"token number\">15000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>필자의 컴퓨터인 OSX의 MSL은 15초로 설정되어있다. 즉, 필자의 컴퓨터는 <code class=\"language-text\">TIME_WAIT</code> 상태에서 30초 정도 대기한다는 것이다. 참고로 이 값은 변경할 수 없기 때문에 <code class=\"language-text\">TIME_WAIT</code>에서 소비되는 시간은 변경할 수 없다.</p>\n<p>보통 TCP 타임아웃 파라미터로 많이 언급되는 <code class=\"language-text\">net.ipv4.tcp_fin_timeout</code>은 <code class=\"language-text\">FIN_WAIT2</code>의 타임아웃을 조절할 수 있는 값이라 <code class=\"language-text\">TIME_WAIT</code> 상태에는 해당 사항이 없다.</p>\n<p>하지만 <code class=\"language-text\">CLOSE_WAIT</code>와 마찬가지로 여기서도 데드락이 발생할 수 있다. 그런 이유로 많은 네트워크 엔지니어들이 여기서 소비되는 시간을 줄이거나 운 나쁘게 발생한 데드락을 없애기 위해 <code class=\"language-text\">tcp_tw_reuse</code> 커널 파라미터를 변경하는 등 여러가지 방법을 사용하고 있다. <small>(데드락 피하자고 만든 상태인데 데드락이 발생하는 현실)</small></p>\n<p>하지만 역시 그냥 가만 냅두는 게 제일 좋다고들 한다.</p>\n<h3 id=\"closed수신자\" style=\"position:relative;\">CLOSED(수신자)<a href=\"#closed%EC%88%98%EC%8B%A0%EC%9E%90\" aria-label=\"closed수신자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7d21721d413da9a3d6803c77909963be/5eb90/4way-closed-server.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAERElEQVR42pVVS09bRxg1TTBObYOMC7ZrJVKp0jSosKGmyCpCjcSmRbQskLpJuwqLUJRVJbriH5CA2BAQCCHESyAhuwTagjExTuUUSCxq3viNsTFgHn7VXN+e73KhhrptOtIw47lnvplzzjcfArfbzRwcHHCd5tPT08zMzAwTDAaZ/f19bt3v9zMej4ebHx4eMhsbG8zU1BQzOzvLeL1eJhQKJU5OTtjd3V2nYGxs7N7W1tYnKysrmrm5Oc3AwICmq6tLs7CwoKG1tbW1MpPJVK7X6z8j3NLSUikO1PT29nI42kO45eVlrcVi0QjQJPSnqanpOsuymamd1gRnLRNdTJO6urrMq7iKiopzHDeKbDab3OfzhXAKg3kcJ8ZxM3Zvb89TXV0tLSkpoYBZm5ubCsIBw+GAj4E+4ey1tbV0sWsUMAta5Wxvb6+Dkg8A9/r6utvhcPgBXKyqqnqbBwqhoxw4O1oAmB10H+b70HsRhxIu44LyyMiICtdXQ5/bo6Ojd8PhsHpoaEiZQpk2CLq7u0XAiaBhdmNjo5zmkEaUSjnL6XTKAoFAEGNsdXU1AiphOPcHXHUWFRXJ+JPF/KaMq4ekrJ0FhDY5SI2tnZ2dAOY+oo6Au6CyJJVKbxcUFORDo5w3DSjhf7x17mJxcTF3G1DmRNbpdN+0t7d/TXODwfAOaMrx7VZra+t7mOcipWTpAqaecokeNgsxSMvLy78Ei1MYw4JJEsYxkIqNRCKeyspK8SVT/i1gZ2enFIMSKfQxXsYGAnkRcBvSeBHcD60tZWVlNy4FnJiYyCUq/f39N5ubmwsoRWiNvuE1/YBb3k+VgTRUqVTpTSGXkYsRGMMir5LIxWQ0GmVB51gikXxaWlqaTQnObxKYzeYb6N8bjcbvBJfbXy5DmzV0yloXDnDCYR8e++s0aSMARgQj6oaHh79NF1Ai+O928ZZBX3F0dJTX1tYmqa+vlx8fH+dDhjwed+2NAhYWFpLL13t6em6hTMUQhIXGSbxrJhaLsYlEwgOM5KrL6RoHaGlpyZbJZDdramo+gq42SOOE03a4bIfuXuhv/pvLeMv5AKlwAyV1VBPV5ORkPn2DVg/6+vq+ojkygXsAfAVK7zKKZi50ieBkLmFRupJEC6aExWLxPao0CoVCzAfMuBrwfO2iHmKjFFReQJPXCLiItHkFGlY4PSMUCu/gHasbGhry/tdb7ujoUBDl8fHx91GiPiTKGJX8W340ODj4gOZBnU7Nms3q2adPP/jp8eO77Pz8u369XpnqMkcZFKOnp6esy+VKonAm0dh4PB7QarVS1DvSLfsLrfbz6K/mRHz+JeuafJbc/FHPsNZXLLPwm8fw8OGFyxxluGUBTRucs4K2Fe9zBb8N+H8hOq/Yvzx5ojh6bnwZMhl/dzzTWx3jemto7vlq+IXpZ/tZkeUMk/KR/6kTKCsVx1KHEbwZqTjhn+PqDKvbZq2WAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way closed server\" title=\"\" src=\"/static/7d21721d413da9a3d6803c77909963be/6af66/4way-closed-server.png\" srcset=\"/static/7d21721d413da9a3d6803c77909963be/69538/4way-closed-server.png 160w,\n/static/7d21721d413da9a3d6803c77909963be/72799/4way-closed-server.png 320w,\n/static/7d21721d413da9a3d6803c77909963be/6af66/4way-closed-server.png 640w,\n/static/7d21721d413da9a3d6803c77909963be/d9199/4way-closed-server.png 960w,\n/static/7d21721d413da9a3d6803c77909963be/21b4d/4way-closed-server.png 1280w,\n/static/7d21721d413da9a3d6803c77909963be/5eb90/4way-closed-server.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>요청자가 보낸 <code class=\"language-text\">ACK</code> 패킷을 받은 수신자는 <code class=\"language-text\">CLOSED</code> 상태로 들어가며 연결을 완전히 종료한다.</p>\n<h3 id=\"closed요청자\" style=\"position:relative;\">CLOSED(요청자)<a href=\"#closed%EC%9A%94%EC%B2%AD%EC%9E%90\" aria-label=\"closed요청자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/dc94254134e7f891452d785d1de2120f/5eb90/4way-closed-client.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 119.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEUElEQVR42pVVTUxiVxTGzghMAQ1SBUpmktpMp2OqG4s1TY1xEjeNsXVh0k3bpMm4cUxXk9iVKzeTxkTjxsRojfE/mlpJ1TaKEmAaamUkFlT+5E/kT1AEYejj9bvPh0VL2+lNLu9w33fPvef7zjmP4/F4qGg0ykxir6+vUxsbG1Q4HKZOTk6Y9UAgQHm9XsY+PT2lbDYbtba2Rmk0Gsrn81GxWCxzfn5Oh0IhF2dxcfGRw+H4YG9vT6nT6ZTT09PKkZER5fb2tpKsHRwc1Gu12gaVStVEcLu7u3U4UDk+Ps7gyB6Cs1gsHxoMBiUHQ0h+enp6btM0XZw/yRrnchRjCojR0dFRfBPX2NiYwzFPvtlslvj9/hhOoWCncWIaN6MjkYi3tbVVVFtbSxzy7Ha7lOCAYXDApxA+wTnb29vJxW4RhzxwVXp0dGRFSH4APFar1XN4eBgA0NjS0vI6C+SCRwlwTowgMMeYftgn4NuIQwmu6Crk+fl5Oa6vAD/3FxYWHiYSCcXs7KwsL2SygTM6OsoHjg8OS7q7uyXEBjX8/JB5LpdLHAwGw3im9vf3kwglAeVeQlVXdXW1mD1ZwG4qunlI3tqlQ3BTitRwHB8fB2H7SehwGEIouyKR6H5lZWUFOCp9VYdC9s9rORVramqY2yBkhuSlpaUvhoaGPiO2Wq1+A2FK8O7ewMDAW7DLkFLiQg7zT7kWHjZz8RA1NDR8gij+gDA0IslCOApU0clk0tvc3Cy4Jsq/ORweHhbhIUMKvY/KsMGRDw6PQI0PzgPg2lBfX3/nmsOVlZUyEsrU1NTdvr6+SpIiZI28QzV9g1t+nk8D4VAulxcWhaiMXExCGBp5lUUuZi8uLmiEExcKhR/V1dWVkARnN3H0ev0dzKebm5tPONfHXyqDmwNMkrVuHOCCwn4U+06BtOEAw4cQHXNzc18Wcijk/Pe4qmWELz07OysfHBwUdnZ2SuLxeAVoKGdxt17JYVVVFVH59tjY2D20qRSc0OA4i7qmUqkUnclkvMAIb6pcaDCA/v7+ErFYfLetre098GoGNS4o7YTKTvDuA//6v6mMWq4ASI4byMhEN5Gvrq5WkHfg6vHExMSnxEYmMAXAdqDCKqNploGXJE5mEhatK0vCgigJgUDwiHQaqVQqYB0W3XSYW7vqh9goCoZCz/2BwI7N4TBa7fYX4WjUFI5ENrhc7gPUsaKrq6v8f9Xy895eKb28LN/6bujtH77tffcctvrZMxlby1/PzMw8ZnNQ4Xa7FWhx70Ckh7jMm6hvWb7KPFqvL8tsGS5eGn+j3T+tZG2qpWx2x0hTxq3g90+/EuH7QHgraWpq+ph8kDBopCopAArh0ul02ovPwJXKfNpiEcW1GkNUqzEfLqtMzh9VpphOs5f4Rad2XjZPpmNPTk5KoeqvUPV3KGwC3ybU8T7+/wyH/FzHErGei2gyQTBLcm4SEC8f9w+T4Lh/AhK1DBDx/1/XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4way closed client\" title=\"\" src=\"/static/dc94254134e7f891452d785d1de2120f/6af66/4way-closed-client.png\" srcset=\"/static/dc94254134e7f891452d785d1de2120f/69538/4way-closed-client.png 160w,\n/static/dc94254134e7f891452d785d1de2120f/72799/4way-closed-client.png 320w,\n/static/dc94254134e7f891452d785d1de2120f/6af66/4way-closed-client.png 640w,\n/static/dc94254134e7f891452d785d1de2120f/d9199/4way-closed-client.png 960w,\n/static/dc94254134e7f891452d785d1de2120f/21b4d/4way-closed-client.png 1280w,\n/static/dc94254134e7f891452d785d1de2120f/5eb90/4way-closed-client.png 1612w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><code class=\"language-text\">TIME_WAIT</code> 상태에서 2MSL만큼 시간이 지나면 요청자도 <code class=\"language-text\">CLOSED</code> 상태로 변경된다. 위에서 설명했듯이 이 시간은 커널 파라미터에 고정되어 있고, 필자가 사용하고 있는 OSX의 경우 30초 정도이다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이렇게 두 번째 TCP 주제인 핸드쉐이크에 대한 포스팅을 마쳤다. TCP에 대해서 학교에서 배우긴 했지만 이렇게 각 상태에 대해서 자세히 공부하진 않았기 때문에 나름 새로운 경험이었다.</p>\n<p>이 포스팅을 작성하면서 TCP가 단순히 연결을 생성하고 종료하는데만 해도 신뢰성을 확보하기 위해 얼마나 많은 작업을 하는지 알 수 있었다. <small>(더불어 구글이 왜 HTTP/3에 UDP를 사용했는지 알 것 같았다…)</small></p>\n<p>처음에는 필자 블로그 로컬 서버와 브라우저의 핸드쉐이크를 캡처해보려고 했는데, 이 친구들은 단순한 몇 개의 메세지를 주고 받는 수준이 아니라 대량의 데이터를 주고 받는 사이다보니 필자가 원하는 부분을 추적하기가 쉽지 않았다.</p>\n<p>그래서 오랜만에 간단한 소켓 프로그래밍을 하게 되었는데, 음… 하도 오랜만에 C를 사용하다보니 손에 안 익어서 꽤나 고생하긴 했지만 나름 재미있었다. C는 역시 가끔 해야 재밌는 것 같다.</p>\n<p>혹시 필자가 예제로 사용한 어플리케이션을 직접 실행해보고 싶으신 분은 필자의 <a href=\"https://github.com/evan-moon/simple-tcp-example\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에서 클론 받을 수 있다. 간단한 메세지만 서로 주고 받는 어플리케이션이니 <code class=\"language-text\">tcpdump</code>를 사용해서 패킷을 들여다보기도 한결 편할 것이다.</p>\n<p>이상으로 TCP가 연결을 생성하고 종료하는 방법, 핸드쉐이크 포스팅을 마친다.</p>","fields":{"slug":"20191117-tcp-handshake","path":"/2019/11/17/tcp-handshake/","lang":"ko"},"frontmatter":{"title":"TCP가 연결을 생성하고 종료하는 방법, 핸드쉐이크","subTitle":"TCP는 어떻게 신뢰성 있는 연결을 보장할까?","date":"Nov 17, 2019","categories":["프로그래밍","네트워크"],"tags":["TCP","SYN","ACK","FIN","TCP Handshake","TCP 핸드쉐이크","3 Way Handshake","4 Way Handshake","TCP 플래그","CLOSE_WAIT"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/9b35e703a61bc05176f93cfe0d8e390c/d803c/thumbnail.png","srcSet":"/static/9b35e703a61bc05176f93cfe0d8e390c/8c230/thumbnail.png 80w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/23e25/thumbnail.png 160w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/d803c/thumbnail.png 320w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/9b35e703a61bc05176f93cfe0d8e390c/3e5ca/thumbnail.webp 80w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/b72f1/thumbnail.webp 160w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/fc5c5/thumbnail.webp 320w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#080808","images":{"fallback":{"src":"/static/9b35e703a61bc05176f93cfe0d8e390c/3fbb4/thumbnail.png","srcSet":"/static/9b35e703a61bc05176f93cfe0d8e390c/61846/thumbnail.png 750w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/d5395/thumbnail.png 1080w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/cc835/thumbnail.png 1366w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/9b35e703a61bc05176f93cfe0d8e390c/6858b/thumbnail.webp 750w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/f5547/thumbnail.webp 1080w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/29310/thumbnail.webp 1366w,\n/static/9b35e703a61bc05176f93cfe0d8e390c/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"2466963d-a76b-5655-a20d-84e9124eccff","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%82%98%EB%8A%94-%EB%B6%88%EC%95%88%ED%96%88%EB%8B%A4\">나는 불안했다</a></p>\n<ul>\n<li><a href=\"#%ED%98%84%EC%8B%A4%EA%B3%BC-%EC%9D%B4%EC%83%81%EC%9D%98-%EA%B4%B4%EB%A6%AC\">현실과 이상의 괴리</a></li>\n<li><a href=\"#%EC%8A%A4%EC%8A%A4%EB%A1%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%8B%A4%EB%A7%9D%EA%B0%90\">스스로에 대한 실망감</a></li>\n<li><a href=\"#%EC%A3%BC%EB%AA%A9%EB%8B%B9%ED%95%98%EB%8A%94-%EA%B2%8C-%EB%B6%80%EB%8B%B4%EC%8A%A4%EB%9F%BD%EB%8B%A4\">주목당하는 게 부담스럽다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EA%B5%AD%EC%9D%80-%EB%A7%88%EC%9D%B8%EB%93%9C%EC%9D%98-%EB%AC%B8%EC%A0%9C%EB%8B%A4\">결국은 마인드의 문제다</a></p>\n<ul>\n<li><a href=\"#%EB%8F%99%EA%B8%B0-%EB%B6%80%EC%97%AC%EB%A5%BC-%ED%99%95%EC%8B%A4%ED%9E%88-%ED%95%98%EC%9E%90\">동기 부여를 확실히 하자</a></li>\n<li><a href=\"#%EB%A9%B4%EC%A0%91%EC%9D%80-%EA%B7%B8%EB%83%A5-%EB%A9%B4%EC%A0%91%EC%9D%BC-%EB%BF%90\">면접은 그냥 면접일 뿐</a></li>\n<li><a href=\"#%EB%B8%94%EB%A1%9C%EA%B7%B8%EB%8A%94-%EA%B7%B8%EB%83%A5-%EA%BE%B8%EC%A4%80%ED%9E%88-%EC%93%B0%EC%9E%90\">블로그는 그냥 꾸준히 쓰자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"지난 달, 다니고 싶었던 회사의 면접에서 기초 실력 부족으로 시원하게 박살났다. 다행히 면접이 끝난 직후 필자가 대답하지 못했던, 풀어내지 못했던 질문들과 문제를 깃허브에 정리해두었기 때문에 어떤 것을 공부해야하는지 바로 알 수 있었고, 한 달동안 컴퓨터 사이언스의 기초에 대한 내용을 집요하게 파헤쳤다. 대학생 시절 이후로 꺼내보지 않았던, 먼지 쌓인 전공 서적을 다시 펼쳐놓고 정독하기 시작했고, 자바스크립트의 기초 지식을 닥치는대로 구글링하면서 스크랩했다. 사실 작성한 포스팅들의 주제만 봐도 지난 한 달 동안 필자가 공부한 것들…","html":"<p>지난 달, 다니고 싶었던 회사의 면접에서 기초 실력 부족으로 시원하게 박살났다. 다행히 면접이 끝난 직후 필자가 대답하지 못했던, 풀어내지 못했던 질문들과 문제를 깃허브에 정리해두었기 때문에 어떤 것을 공부해야하는지 바로 알 수 있었고, 한 달동안 컴퓨터 사이언스의 기초에 대한 내용을 집요하게 파헤쳤다.</p>\n<p>대학생 시절 이후로 꺼내보지 않았던, 먼지 쌓인 전공 서적을 다시 펼쳐놓고 정독하기 시작했고, 자바스크립트의 기초 지식을 닥치는대로 구글링하면서 스크랩했다. 사실 작성한 포스팅들의 주제만 봐도 지난 한 달 동안 필자가 공부한 것들이 어떤 주제였는지 대충 보인다.</p>\n<p>필자가 프라하에서 지냈던 한 달 동안 5편의 에세이 포스팅과 1편의 기술 포스팅을 작성한 것과 비교해보면 최근 한 달간의 포스팅들은 전부 기술 포스팅이다. 그것도 기초적인 내용들인 힙, JS 프로토타입, 수학으로 알고리즘 문제 풀기, 최근의 TCP 집중 분석까지…</p>\n<p>그렇게 한 달동안 미친듯이 컴퓨터 사이언스의 기초를 공부하다가, 오늘 오전에 다른 회사의 면접 기술 과제를 만들기 위해 IDE를 켰는데 문득 이런 생각이 스쳤다.</p>\n<blockquote>\n<p>내가 마지막으로 뭘 만들어 본게 언제였지?</p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8f31b14909143eca5873ad30e9833abd/7cc5e/commit.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAH/xAAXAQEBAQEAAAAAAAAAAAAAAAABAAID/9oADAMBAAIQAxAAAAHXKLBc66WO4KQX/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERAiES/9oACAEBAAEFAmekU02xHS9wqQ//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAWEQEBAQAAAAAAAAAAAAAAAAABEiD/2gAIAQIBAT8BVrH/xAAZEAACAwEAAAAAAAAAAAAAAAAAIQEgMeH/2gAIAQEABj8C0cnBW//EAB0QAQEAAQUBAQAAAAAAAAAAAAERACExQWFxUYH/2gAIAQEAAT8hULD86zSGR5vl8DOs0wQMBbuHLlW0/XDVMpaumQd+5//aAAwDAQACAAMAAAAQFDj9/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAwEBPxCpFFn/xAAYEQEBAAMAAAAAAAAAAAAAAAABEBEhMf/aAAgBAgEBPxAoDkxuf//EAB0QAQACAwEAAwAAAAAAAAAAAAEAESExUUFhcfD/2gAIAQEAAT8QG2Lgx0wLsUWMFX1ViQAPfv3lEp2pbsoXevI5Qq5yEQpCYc/q8grHein4hZE33mz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"commit\" title=\"\" src=\"/static/8f31b14909143eca5873ad30e9833abd/7cc5e/commit.jpg\" srcset=\"/static/8f31b14909143eca5873ad30e9833abd/0913d/commit.jpg 160w,\n/static/8f31b14909143eca5873ad30e9833abd/cb69c/commit.jpg 320w,\n/static/8f31b14909143eca5873ad30e9833abd/7cc5e/commit.jpg 480w\" sizes=\"(max-width: 480px) 100vw, 480px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>지난 한 달동안 필자는 어플리케이션을 개발한 적이 없었던 것이다. 만드는 것이 너무 즐거워서 개발자가 되었건만, 정작 한 달동안이나 아무것도 만들지 않고 있었다.</p>\n<p>필자의 지난 한 달은 기초에 대한 공부의 연속이었고, 지금까지 놓치고 있었던 것들을 다시 한번 살펴보는 복습의 시간이었다. 하지만 딱히 공부를 하면서 즐겁지는 않았던 것 같다. 아니, 사실 즐겁게 공부하려는 마음도 없었다고 말하는 게 맞을지도 모른다.</p>\n<p>여기까지 생각이 닿고나니 갑자기 현타가 와서 잠시 공부를 접고 스스로를 돌아보는 시간을 가지려고 한다.</p>\n<h2 id=\"나는-불안했다\" style=\"position:relative;\">나는 불안했다<a href=\"#%EB%82%98%EB%8A%94-%EB%B6%88%EC%95%88%ED%96%88%EB%8B%A4\" aria-label=\"나는 불안했다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>지난 한 달 동안 필자는 현실에 쫓기고 있었다. 프라하에서 다짐했던 “여유를 가지며 살자”라는 마음은 서울에 도착하고 몇 주가 지나자 온데 간데 없어져버렸다.</p>\n<p>사실 이런 불편한 감정의 근본적인 원인은 바로 불안감이다. 이런 불안감은 필자의 일상을 흑백으로 바꿔버렸다. 친구들을 만나면 순간순간은 즐거웠지만, 틈만 나면 빨리 집에 가서 바로 책과 노트북을 피고 공부해야한다는 생각이 떠올랐다.</p>\n<p>그냥 딱 봐도 건강한 마음의 상태는 아니다. 물론 겉으로는 아닌 척하고 있지만 속에서부터 곪아가고 있는 상태인 것이다. 그래서 필자는 공부를 잠깐 멈추고, 도대체 무엇 때문에 이렇게 불안해하며 쫓기고 있는 것인지 생각해보기 시작했다.</p>\n<p>물론 간만에 면접에서 털려보면서 필자의 약점을 날 것으로 마주하게 되었다는 이유가 크겠지만, 단순히 이것 때문에 이 정도까지 불안한 마음이 생긴다는 것은 조금 이상했다. 솔직히 면접 털려본 것이 한 두번도 아니니 말이다.</p>\n<p>그렇게 하루 정도 깊게 고민을 해보고나니 몇 가지 불안 요인이 정리가 되었고, 이후 필자는 이 요인들을 리스트업하고 하나씩 살펴보기 시작했다.</p>\n<h3 id=\"현실과-이상의-괴리\" style=\"position:relative;\">현실과 이상의 괴리<a href=\"#%ED%98%84%EC%8B%A4%EA%B3%BC-%EC%9D%B4%EC%83%81%EC%9D%98-%EA%B4%B4%EB%A6%AC\" aria-label=\"현실과 이상의 괴리 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>어릴 때 부모님이나 어른들이 했던 이야기 중에서 가장 이해되지 않았던 말은 “하고 싶은 것만 하면서 살 수는 없다”였다. <small>(물론 여기에는 반드시 “공부해라”라는 말이 따라온다)</small></p>\n<p>시간이 지나 군대를 다녀오고 대학교에 복학하면서 당시 어른들이 했던 이 말의 의미를 조금씩 이해하게 되었다. 세상 만사 내 맘대로 되는 일만 있는 것은 아니니 어느 정도는 마음을 내려놓으라는 가르침이었으리라.</p>\n<p>죽어도 공부하기 싫은 날에도 장학금을 위해 밤새워가며 공부를 해야했고, 군대에 가기 싫었지만 국방의 의무 때문에 23개월동안 구르다 왔던 경험을 하고 나니 “음, 그 말이 바로 이런 느낌이군”이라는 생각을 했던 것 같다.</p>\n<p>그래도 하기 싫은 일을 돈 때문에 억지로 하면서 평생 살고 싶지는 않았기에, 내 인생의 행복을 위해서는 “하고 싶은 일”을 가장 우선 순위로 높게 잡고 있었고, 다행히도 개발자라는 직업을 가지게 되면서 사회의 일원으로써의 자리와 직장인으로써의 안정적인 수입, 그리고 내가 즐기며 할 수 있는 일까지 거머쥔 덕업일치의 생활을 할 수 있었다.</p>\n<p>그러나 개발자로 일을 하게되면 행복하기만 할 것이라는 필자의 생각과는 달리 개발자로의 삶은 치열했다. 이제부터는 시험 등수나 장학금을 위한 경쟁이 아닌 진짜 생존을 건 경쟁이 시작된 것이다.</p>\n<p>아직 성 차별, 학력 차별 등 여러가지 문제가 산재하기는 하지만 기본적으로 2019년의 대한민국은 모든 사람에게 평등한 기회를 주려고 노력하는 사회이고, 그런 기회는 보통 개인의 능력이나 실력으로 거머쥘 수 있다.</p>\n<p>그 중에서도 특히 IT업계의 대표적인 전문직인 개발자는 진짜 실력 하나로 비벼서 먹고 살아가는 실력몰빵주의라고 할 수 있다. 도태되지 않기 위해서는 끊임없이 공부를 하면서 빠르게 변화하는 기술 트렌드나 패러다임을 따라가야하는 것이다. 그래서 개발자들 사이에서는 치킨 집을 차리기 전까지는 계속 공부해야한다는 자조섞인 농담을 나누기도 한다.</p>\n<p>그래도 필자는 프로그래밍 공부를 한다는 것 자체가 너무 재밌고 좋았다. 애초에 내가 하고 싶은 일을 선택한 것이기도 하고 공부하면 할수록 내가 만든 어플리케이션이 더 좋은 구조, 좋은 성능을 가질 수 있으니까.</p>\n<p>하지만 앞서 이야기 했듯이, 최근 한 달 동안 컴퓨터 사이언스의 기초를 공부하면서 필자는 마냥 즐겁지만은 않았다.</p>\n<p>사실 필자가 즐겁지 않은 공부를 하며 가장 의아했던 부분은 이렇게 기초를 공부하는 과정은 이미 대학생 때 한번 겪었던 경험인데 그때 당시와 지금 느끼는 감정이 너무나도 다르다는 것이었다. 당시에는 똑같은 공부를 해도 하나하나 신기하고 너무 재미있었기 때문이다.</p>\n<p>그럼 대학생 때는 그렇게 재미있었던 내용들이 왜 지금와서는 재미가 없어진 것일까?</p>\n<p>그 이유는 바로 공부의 동기 때문이다. <a href=\"/2019/08/26/how-does-developer-study/\">개발자가 공부로 살아남는 방법</a> 포스팅에서도 한 번 이야기한 적이 있지만, 사실 공부라는 것은 주제의 난이도보다도 건강한 동기 부여가 더 중요하다.</p>\n<p>하지만 필자는 현재 자의적으로 컴퓨터 사이언스 기초에 대한 공부를 하는 것이 아니라 구직 중이라는 외부 상황에 떠밀려서 공부를 하고 있는 상황이다. 더 쉽게 이야기해보자면, 필자가 원하는 주제를 필요에 따라 공부하는 것이 아니라 당장 하고 싶지 않은데 외부 상황 때문에 억지로 하고 있는 공부인 것이다.</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1207b2871c1ea2db64733f985a5a49b8/80e3c/study-motivation.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 118.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7UhooMNCKiX/xAAaEAEAAgMBAAAAAAAAAAAAAAABADESICEi/9oACAEBAAEFAm60Hgo+mZJP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AXT/xAAbEAABBAMAAAAAAAAAAAAAAAABAAIQESAhUf/aAAgBAQAGPwKsnHsaC//EAB4QAAICAgIDAAAAAAAAAAAAAAEhABFBYRCBUXGR/9oACAEBAAE/Ie0XPMsa4GD9hICF1mEwv1CsdlqGxgPcCQOzP//aAAwDAQACAAMAAAAQYwh9/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8Qh4Uj/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAQ/9oACAECAQE/EMFZV//EAB4QAQEAAgICAwAAAAAAAAAAAAERACExQRBxgZGh/9oACAEBAAE/EB1ryBYe8u8EQo4648NsVJscj6wiFGp0BjhXGqhHGnAaFdIE+8MJgSafu8oAR2br8Z//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"study motivation\" title=\"\" src=\"/static/1207b2871c1ea2db64733f985a5a49b8/c08c5/study-motivation.jpg\" srcset=\"/static/1207b2871c1ea2db64733f985a5a49b8/0913d/study-motivation.jpg 160w,\n/static/1207b2871c1ea2db64733f985a5a49b8/cb69c/study-motivation.jpg 320w,\n/static/1207b2871c1ea2db64733f985a5a49b8/c08c5/study-motivation.jpg 640w,\n/static/1207b2871c1ea2db64733f985a5a49b8/80e3c/study-motivation.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>어차피 나중에 공부할건데 엄마가 지금 공부하라고 하면 왠지 더 하기 싫어지는 마음이랄까</small>\n  <br>\n  <br>\n</center>\n<p>사실 공부할 주제를 선택할 때 “이걸 공부하면 내가 어떤 점이 더 나아질까?”라는 생각으로 두근거려야 하는데, 최근 한 달간의 공부는 “이걸 면접에서 물어볼까?”라는 마음으로 주제를 선택했으니 재미있을리가 만무하다.</p>\n<p>그래도 어릴 적 어른들이 이야기했던 하고 싶은 것만 하면서 살 수는 없다는 말처럼 필자가 면접에 합격하기 위해서 부족한 부분을 채우는 과정이 필요하다는 것 또한 분명한 사실이다.</p>\n<p>필자는 일을 재미있게 하고 싶어서 개발자라는 직업을 선택했는데, 현실적인 상황 때문에 재미없게 공부를 하고 있는 이 상황에 대해서 괴리감과 불편함을 느끼기 시작한 것이다.</p>\n<h3 id=\"스스로에-대한-실망감\" style=\"position:relative;\">스스로에 대한 실망감<a href=\"#%EC%8A%A4%EC%8A%A4%EB%A1%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%8B%A4%EB%A7%9D%EA%B0%90\" aria-label=\"스스로에 대한 실망감 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사실 지금까지 필자는 별 생각없이 회사를 선택해왔었다. 재밌게만 일할 수 있으면 됐지, 어디서 일하느냐가 그렇게 중요하지 않다고 생각했기 때문이다.</p>\n<p>그런 식으로 직장을 고르다보니까 스스로 좀 더 많은 권한을 부여받고 많은 일을 할 수 있는 작은 규모의 스타트업을 주로 다니게 되었다.</p>\n<p>그러나 최근 주변에 있는 많은 개발자분들이 “작은 곳도 경험해보고 큰 곳도 경험해봐라”라는 조언을 많이 해주셨다. 조금 더 다양한 경험을 해보고 성장하라는 의미인 것이다. 그런 이유로 이번에는 지금까지 다녔던 직장보다는 조금 더 규모가 있는 곳을 목표로 잡고 있다.</p>\n<p>그러나 큰 회사들의 경우, 채용 과정과 원하는 인재상까지 필자가 지금까지 다녔던 규모의 회사들과는 조금 다르다.</p>\n<p>규모가 작은 스타트업의 경우 말 그대로 일당백의 당장 일할 수 있는 개발자가 필요하다. 만들어야하는 프로덕트는 산더미같은데 리소스는 늘 부족하다보니 한 사람 한 사람이 많은 역할을 할 수 밖에 없는 것이다. 게다가 리소스가 부족하다보니 누군가를 체계적으로 교육하거나 스스로 학습할 수 있는 여유도 큰 회사에 비해 상대적으로 부족한 경우가 많다.</p>\n<p>이에 반해 큰 회사들은 당장 입사해서 일할 수 있는 개발자를 급하게 찾는 입장은 아니다. 물론 어떤 회사던지 개발자라는 자원은 많으면 많을수록 좋기 때문에 계속 채용을 하기는 하지만, 규모가 작은 스타트업에 비교해봤을 때 당장 일할 사람이 부족해서 허덕이고 있는 정도의 상황은 아닐 가능성이 높다.</p>\n<p>게다가 시스템의 규모 또한 해당 개발팀의 규모에 비례해서 늘어날 수 있기 때문에, 이미 많은 개발자를 보유하고 있는 회사의 시스템은 크기도 방대하고 구조도 복잡한 경우가 많다.</p>\n<p>이런 이유들로 인해 규모가 큰 곳일수록 특정 프레임워크에 익숙한지 물어보기보다는 “네가 이걸 진짜 제대로 알고 쓰는거니?”에 집중하는 경우가 많기 때문에 컴퓨터 사이언스나 사용하는 언어에 대한 기초를 깊게 물어보는 것이다.</p>\n<p>필자도 당연히 이런 사실들을 알고는 있었지만, 한국에 돌아오고 처음 면접을 볼 때까지만 해도 솔직히 별 걱정이 없었다. 그냥 “붙으면 다니고 아니면 다른 데 가지 뭐” 정도의 마음이었던 것 같다. 실제로 첫 면접에 떨어진 직후에는 불안한 마음이고 뭐고 멘탈에 별 타격이 없었다.</p>\n<p>그래도 면접에 떨어졌으니 필자가 현재 부족한 것이 무엇인지 알 수 있었고, 당연히 이 부분을 보완하고 싶다는 마음이 생기게 되었다. 하지만 이상하게도 공부를 하면 할수록 뭔가 마음이 싱숭생숭해지기 시작했다.</p>\n<p>얼마 전 SNS에서 여친이랑 헤어진 남자의 심리 변화라는 짤을 본 적이 있다. 여친이랑 헤어진 직후는 후련하고 자유로운 기분이지만 시간이 지나면서 그리운 감정이 커지게되고 후회한다는 그런 내용이었다. 뭔가 그런 느낌이랄까.</p>\n<p>공부를 하면 할수록 면접장에서 제대로 대답하지 못했던 상황들이 계속 떠올랐고, 뒤늦은 부끄러움과 후회가 밀려온 것이다. 그와 동시에 스스로에 대한 실망감도 들기 시작했다.</p>\n<p>솔직히 말하자면 나름 컴퓨터 사이언스에 대해서 알고 있다고 생각했다. 학교에서도 이미 한 번씩 배운 내용들이고, 나름 이것저것 분석해보면서 쌓은 지식들도 있었기 때문이다. 그러나 현실은 달랐다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/32fed26596b7dca5ba59de968d154e49/f537d/snl.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAIA/9oADAMBAAIQAxAAAAGtcxwtsgDf/8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDAAQREjL/2gAIAQEAAQUCuOyRQBucFGfYejI9fX//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bh//EABwQAQACAgMBAAAAAAAAAAAAAAECEQAQEiFBcf/aAAgBAQAGPwL45yAOvNBJsvIkWtf/xAAZEAEAAwEBAAAAAAAAAAAAAAABABFRYUH/2gAIAQEAAT8hIxpAa2eFQ6j3MooiUQhZCIvJ/9oADAMBAAIAAwAAABA7L//EABURAQEAAAAAAAAAAAAAAAAAABEQ/9oACAEDAQE/EAE//8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8QYz//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMWFxkaH/2gAIAQEAAT8QN1CLWDQ+xmXuzSyJfOGANIO2JMtFwrTGpHAFOYrAUr9Z/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"snl\" title=\"\" src=\"/static/32fed26596b7dca5ba59de968d154e49/c08c5/snl.jpg\" srcset=\"/static/32fed26596b7dca5ba59de968d154e49/0913d/snl.jpg 160w,\n/static/32fed26596b7dca5ba59de968d154e49/cb69c/snl.jpg 320w,\n/static/32fed26596b7dca5ba59de968d154e49/c08c5/snl.jpg 640w,\n/static/32fed26596b7dca5ba59de968d154e49/f537d/snl.jpg 854w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>막상 면접장에 들어서고나서 “GC에 대해서 설명해주세요”와 같은 질문을 들으면 머리가 하얘졌다. 이런 질문을 들을 때 마다 필자의 머릿 속에는 수많은 개념들과 그림들이 동시에 떠올랐지만 정작 이걸 말로 정리해서 말하지 못했다. 즉, 제대로 알고 있지 않은 것이다.</p>\n<p>이런 경험을 몇 번 하고나니 지금까지 내가 알고있다고 생각했던 지식들이 사실은 제대로 알고 있는 것이 아니었다는 것을 깨닫게 되었고, 지금까지 헛공부한 게 아닌가라는 생각, 다른 개발자들에 비해서 내가 뒤쳐질 수도 있다는 불안감이 스물스물 피어나게 되었다.</p>\n<h3 id=\"주목당하는-게-부담스럽다\" style=\"position:relative;\">주목당하는 게 부담스럽다<a href=\"#%EC%A3%BC%EB%AA%A9%EB%8B%B9%ED%95%98%EB%8A%94-%EA%B2%8C-%EB%B6%80%EB%8B%B4%EC%8A%A4%EB%9F%BD%EB%8B%A4\" aria-label=\"주목당하는 게 부담스럽다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>아이러니하게도 지금 글을 작성하고 있는 바로 이 블로그도 필자의 불안감의 요인 중 하나이다. 정확히 말하면 불안정한 필자의 심리 상태에 불을 붙혀서 불안감을 증폭시킨 요인이라고 할 수 있겠다.</p>\n<p>지금까지 필자는 포스팅을 적고 다른 사람들과 내 지식과 생각을 공유하기 위한 목적으로 약간의 홍보를 통해 포스팅을 공유해왔다. 그러다보니 필자의 글을 재밌게 읽어주신 분들이 “포스팅 잘 읽었다”, “좋은 정보 공유 감사하다” 정도의 말씀을 해주시는 경우가 생기게 되었는데, 이때까지는 내 지식이 다른 사람들에게 도움이 될 수 있다는 사실에 그냥 기분이 좋았다.</p>\n<p>하지만 최근 오프라인에서 필자를 알아보는 사람이 나타나는 경험을 몇 번 겪으면서 약간의 부담감이 스물스물 피어나게 되었다. <small>(이럴거라고는 진짜 상상도 못 했다)</small></p>\n<p>이 감정이 최대로 증폭되는 경우는 바로 면접관이 “평소에 블로그 잘 보고 있어요”라고 하는 경우인데, 이때의 당혹감과 부담감이란 말로 표현할 수가 없다. 긴장을 안하고 있다가도 한 순간에 긴장하게 만들어버리는 마법의 단어인 것 같다.</p>\n<p>그냥 사람들이 알아보는 것 자체가 부담스럽다는 뜻은 아니다. 사람들이 필자를 알아보기 시작하면서 조금씩 타인의 시선을 신경쓰기 시작했다는 것이 문제다.</p>\n<p>사실 필자가 블로그 포스팅을 작성하는 이유는 필자의 지식을 타인에게 공유하고 싶다는 목적도 있지만 기본적으로는 공부한 내용을 정리하려는 목적이 크다. 자신의 지식을 글로 정리하는 과정에서 공부의 효율성을 높히고 기억에 오래 남는 효과를 기대하는 것이다.</p>\n<p>하지만 필자가 엄청 뛰어난 기억력을 가지고 있지 않은 이상, 몇 번 공부한 내용이라고 한들 실제로 그 지식을 사용하지않고 오랜 기간이 지난다면 기억에서 점점 잊혀지기 마련이다. 결국 뭐가 되었든 공부의 기본은 반복 학습이고, 한 번 포스팅을 작성했다고 해서 그 지식이 온전히 필자의 것이 되는 게 아니라는 말이다.</p>\n<p>그런 이유 때문에 필자는 계속 스스로 과거에 작성했던 포스팅을 읽어보면서 되새김질하기도 한다.</p>\n<p>그러나 글을 읽는 독자 입장에서는 포스팅을 작성한 사람이 이 지식을 완벽하게 알고 있다는 생각이 들 수도 있다. 필자만 해도 다른 개발자 분들의 블로그 포스팅을 읽어보면서 막연하게 블로그 포스팅을 잘 쓰는 사람과 실력이 좋은 사람을 동일시했었다. 이 내용에 대해서 빠삭하게 잘 아니까 이렇게 글도 잘 쓰겠지라는 생각 때문이었다.</p>\n<p>하지만 글을 잘 쓰고 정리를 잘 한다는 것이 필자의 프로그래밍 실력이 좋다는 것을 의미하진 않는다. 독자들이 생각하고 기대하는 것보다 필자의 실력이 만족스럽지 않을 수도 있다는 것이다.</p>\n<p>필자가 느끼는 부담감은 이런 상황에서 비롯된 것이었다. 다른 사람이 “에반님 그때 정리해주신 그 내용 말이에요~“라고 운을 떼는 순간, “이거 대답 못하면 어쩌지?”라는 생각이 들게 된다. 특히 그 사람이 면접관이라면 더 그렇다.</p>\n<p>또한 간혹 고수, 존경과 같은 과분한 말을 해주시는 경우도 있는데, 애초에 필자는 고수도 아니고 누군가에게 존경받을 만한 사람은 더더욱 아닌, 그저 일개 4년차 꼬꼬마 개발자이기 때문에 감사한 마음과 동시에 약간의 부담감이 생기기도 햇다.</p>\n<p>그래서 이런 상황들을 겪을 때마다 이런 생각이 들기 시작했다.</p>\n<blockquote>\n<ul>\n<li>내 실력은 3 정도 밖에 안 되는데, 사람들이 내 실력을 6이나 7 정도로 생각하면 어떡하지?</li>\n<li>내가 쓴 포스팅에 대한 질문에 제대로 답변하지 못하면 어떡하지?</li>\n<li>난 존경받을만한 사람도 아니고 고수도 아닌데… 내가 이런 말을 들을 자격이 되는건가…?</li>\n</ul>\n</blockquote>\n<p>그런 이유로 언젠가부터 점점 “사람들이 생각하는 나”라는 껍데기를 만들어야한다는 강박관념이 스물스물 피어나기 시작했고, 그 와중에 면접에서 거하게 털리면서 이 불안감 또한 함께 증폭된 것이다.</p>\n<h2 id=\"결국은-마인드의-문제다\" style=\"position:relative;\">결국은 마인드의 문제다<a href=\"#%EA%B2%B0%EA%B5%AD%EC%9D%80-%EB%A7%88%EC%9D%B8%EB%93%9C%EC%9D%98-%EB%AC%B8%EC%A0%9C%EB%8B%A4\" aria-label=\"결국은 마인드의 문제다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 이런 불안한 마음들은 사람이라면 자연스럽게 생길 수 있는 마음이다. 그러나 이런 감정들은 막연하게 “불안하다” 정도의 느낌이라서, 명확하게 “무엇 때문에 내가 불안하다”라는 생각까지는 평소에 잘 생각하지 않는다.</p>\n<p>하지만 자신이 불안한 이유를 확실히 파악하지 못하면 그 문제를 해결할 수 없다. 그래서 필자는 불안함의 원인에 대해서 리스트업을 하면서 이 문제들과 정면으로 마주한 것이다.</p>\n<p>필자는 스스로 불안감의 요인에 대한 원인을 정리하고 리스트업하면서, 자연스럽게 이 문제에 대해 스스로 질문하고 답변하는 과정을 통해 나름의 해결 방법들을 정의할 수 있었다.</p>\n<h3 id=\"동기-부여를-확실히-하자\" style=\"position:relative;\">동기 부여를 확실히 하자<a href=\"#%EB%8F%99%EA%B8%B0-%EB%B6%80%EC%97%AC%EB%A5%BC-%ED%99%95%EC%8B%A4%ED%9E%88-%ED%95%98%EC%9E%90\" aria-label=\"동기 부여를 확실히 하자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>앞서 이야기했듯이 필자가 컴퓨터 사이언스 기초 공부를 하며 재미없다고 느끼게 된 이유는 하기 싫어도 해야한다는 마음 때문이다. 물론 현실적으로 보면 틀린 말은 아니다. 면접에 합격하기 위해서는 필자의 약점을 보완해야하니 말이다.</p>\n<p>그러나 이번 한 번만 공부하고 말 것이 아니라면 이런 식의 동기 부여는 좋지 않다. 외압에 의한 동기 부여는 잠깐 동안 스스로를 몰아 세우며 빠르게 성장할 수는 있어도, 지속적인 성장에는 오히려 걸림돌이 된다.</p>\n<p>사실 근본적으로 생각해보면 대학생 때나 지금이나 공부하고 있는 내용은 크게 다르지 않다. 하지만 그때는 기초 공부가 재미있었고 지금은 아니었던 이유가 바로 여기에 있다.</p>\n<p>당시에는 내가 이걸 공부함으로써 성장할 수 있다는 사실이 동기가 되었지만, 지금은 면접에 붙어야한다는 사실이 동기가 되었기 때문에 같은 것을 공부해도 상당히 다른 느낌을 받을 수 밖에 없다는 것이다.</p>\n<p>그래서 필자는 다시 초심으로 돌아가 성장 자체에 초점을 맞춰 보려고 한다. 비록 빡센 기초 공부의 시작은 면접 때문이었을지 몰라도, 결과적으로는 필자가 성장할 수 있는 좋은 기회이기도 하기 때문이다.</p>\n<h3 id=\"면접은-그냥-면접일-뿐\" style=\"position:relative;\">면접은 그냥 면접일 뿐<a href=\"#%EB%A9%B4%EC%A0%91%EC%9D%80-%EA%B7%B8%EB%83%A5-%EB%A9%B4%EC%A0%91%EC%9D%BC-%EB%BF%90\" aria-label=\"면접은 그냥 면접일 뿐 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사실 기껏해야 한 두시간의 짧은 면접 시간 동안 한 사람의 역량을 오롯히 파악하는 것 자체가 굉장히 어려운 일이다.</p>\n<p>그래서 대부분의 회사는 1차 기술, 2차 임원 등으로 면접 전형을 나눠서 평가하고 있지만, 이렇게 하더라도 컴퓨터 사이언스라는 학문의 범위가 너무 넓기 때문에 진짜 그 사람의 모든 강점과 약점을 파악한다는 것은 거의 불가능하다.</p>\n<p>하지만 회사든 구직자든 면접 한번 보자고 서로 며칠 씩이나 붙어있을 수는 없는 노릇이니 최대한 짧은 시간 안에 객관적이고 효율적으로 실력을 평가할 수 있는 방법이나 질문을 통해 구직자를 평가하려고 노력하는 것이다.</p>\n<p>당연히 이러한 사실은 회사도 알고 있기 때문에 면접관 스스로 혹은 회사의 가이드대로 어느 정도 객관성을 띄고 있는 질문을 준비하기는 하지만, 이 질문이 구직자의 강점이나 약점을 얼마나 캐낼 수 있는지는 며느리도 모르는 일이다.</p>\n<p>그 말인 즉슨, 면접의 평가 결과는 어느 정도 단편성을 지니고 있을 수 밖에 없다는 것이다.</p>\n<p>하지만 면접 과정에서 구직자가 면접관이 물어본 질문에 대답을 못했을 경우, 그 질문이 구직자의 약점을 관통했다는 것 자체는 물론 사실이다. 그래서 필자도 질문에 대답하지 못했던 내용을 정리하고 공부했던 것이다.</p>\n<p>그러나 약점이 존재한다는 것이 실력없고 형편없다는 의미는 아니다. 약점은 보완하면 되는 것이고, 면접은 무슨 수능처럼 1년에 한 번만 볼 수 있는 것도 아니니까 다음 기회에 다시 도전하면 된다.</p>\n<p>필자의 보컬 선생님 말을 빌리자면, 오히려 그런 기회를 통해 자신의 약점을 발견할 수 있음에 감사하라고 한다. 이런 기회조차 없는 상황이라면 오히려 더 성장하기 힘들 것이라는 이야기도 들었다.</p>\n<p>이게 그저 정신승리라고 생각하는 사람도 있겠지만, 스스로 건강한 마음을 가질 수 있어야만 꾸준한 도전이 가능하기 때문에 이런 식의 멘탈 케어는 개인의 성장이나 발전에도 도움이 된다고 생각한다.</p>\n<p>중요한 것은 면접에 떨어졌다는 것이 아니라, 면접을 통해 자신의 약점을 발견하고 올바른 동기 부여를 통해 꾸준한 공부를 할 수 있는 원동력을 확보하는 것이기 때문이다.</p>\n<h3 id=\"블로그는-그냥-꾸준히-쓰자\" style=\"position:relative;\">블로그는 그냥 꾸준히 쓰자<a href=\"#%EB%B8%94%EB%A1%9C%EA%B7%B8%EB%8A%94-%EA%B7%B8%EB%83%A5-%EA%BE%B8%EC%A4%80%ED%9E%88-%EC%93%B0%EC%9E%90\" aria-label=\"블로그는 그냥 꾸준히 쓰자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>필자는 애초에 자기 자신에게 후한 평가를 주는 성격은 아니다. 그냥 이건 필자 본연의 성격이기 때문에 개발자가 아니라 그냥 한 명의 인간으로써도 그렇다. 그래서 필자의 글을 읽은 분들이 칭찬과 격려의 의미로 해주시는 말들도 잘 받아들이지 못했던 것 같다. <small>(칭찬을 잘 안 받아들이는 타입이다)</small></p>\n<p>사실 앞서 이야기했던 두 가지 케이스는 나름 혼자 생각해보면서 결론을 내렸지만, 이 문제만은 아직 명확한 결론을 내지 못한 상태이다. 그냥 다들 큰 의미없이 좋은 뜻으로 하는 말이니까 듣고 흘리라는 조언도 듣긴 했지만, 성격이 성격인지라 그러기도 쉽지 않기 때문이다.</p>\n<p>그렇다고 블로그 작성을 그만 둘거냐면 그것도 아니다. 블로그 포스팅 작성은 공부와 공유의 목적도 있지만 그 전에 필자의 취미 생활이기도 하기 때문이다. 그래서 처음에는 포스팅은 꾸준히 쓰되 홍보를 하지말까라는 생각도 했었지만, 뭔가 명확한 결론이 나기 전까지는 그냥 하던대로 하는 것이 좋겠다는 결론을 내렸다.</p>\n<p>사실 이건 필자 스스로 느끼는 부담감이고, 이것 외에는 블로그 포스팅 작성이 필자에게 득이 되었으면 되었지 실이 될 만한 것은 없기 때문이다. 그래서 이런 저런 생각보다는 글쓰기라는 행위 자체에만 집중하려고 한다. 그래서 지금도 아무 생각없이 일단 글을 쓰고 있다.</p>\n<p>그리고 이런 이유 때문에 생기는 불안한 마음은 필자가 꾸준히 공부해서 점점 성장하고 자신감이 많이 붙게 된다면 자연스럽게 흐려질 것이라고 생각한다. 이런 과정 또한 필자가 성장하는 과정이고 컴포트 존을 벗어날 수 있는 좋은 기회일테니, 정면으로 부딪혀서 극복해봐야 하는 것 아닐까싶다.</p>\n<p>일단 지금은 그냥 필자에게 관심을 가지고 지켜봐주시는 분들이 있다는 것에 감사하며 꾸준히 글이나 끄적이는 게 최선인 것 같다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이번 포스팅은 어떻게 보면 실로 오랜만에 적어본, 남들을 위한 글이 아닌 나를 위한 글이었다. 글을 적으면서 생각을 정리하다보니 불안했던 마음도 어느 정도 사그러드는듯 하다.</p>\n<p>비단 필자 뿐만 아니라, 필자와 비슷한 상황에 있는 다른 사람들도 비슷한 감정을 느낄 것이라고 생각한다. 일 안하고 하고 싶은 거 하면서 사는 백수 생활이라는 것이 물론 편하긴 하지만 그에 따른 부담감과 불안함도 당연히 따라오는 것이니 말이다.</p>\n<p>게다가 이런 상태에서 발생한 불안감은 사소한 일상의 좌절만으로도 쉽게 증폭되기 때문에, 더욱 더 이런 멘탈 관리가 중요한 것 같다.</p>\n<p>그래도 이렇게 글로 생각을 정리하는 과정을 거치면서 필자가 왜 불안한 마음이 드는 지 확실히 알 수 있었고, 이에 따른 나름의 해결책 또한 정의해볼 수 있었다. 이런 게 바로 글이 가진 매력이 아닐까.</p>\n<p>물론 완전히 떨쳐내지는 못할 것이다. 사람인 이상 불확실한 미래를 걱정하며 불안한 감정이 생기는 것은 자연스러운 것이니까.</p>\n<p>하지만 막연하게 불안함에 떨고 쫓기면서 하기 싫은 공부를 억지로 하거나 부담감을 가지고 포스팅을 작성하는 상황보다는 내가 이 공부를 함으로써 어떤 방향으로 성장할 수 있을 지 확실히 인지하고, 내가 작성한 글들이 타인에게 좋은 영향을 줄 수 있을거란 믿음을 가지는 것이 훨씬 건강한 마인드라는 것은 자명하다.</p>\n<p>면접 떨어진 건 아쉽긴 하지만, 부족한 실력은 공부해서 채우면 된다. 어차피 백수니까 공부할 시간도 남아돈다. 사실 이 시간 또한 언젠가 다시 직장인이 되면 그리워질 시간일테니, 최대한 마음 편하게 즐겨보려고 한다.</p>\n<p>이렇게 불안한 마음을 다스릴 수 있는 글쓰기라는 취미 생활을 가지고 있다는 것도 어찌보면 행복일지도.</p>","fields":{"slug":"20191116-the-way-to-control-anxiety","path":"/2019/11/16/the-way-to-control-anxiety/","lang":"ko"},"frontmatter":{"title":"불안한 마음 정면으로 마주보기","subTitle":"면접에서 털린 후, 불안을 정리하며 얻은 깨달음","date":"Nov 16, 2019","categories":["에세이"],"tags":["불안감","개발자 면접 불안","개발자 면접","개발자 면접 팁","취업준비","면접준비"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#2888e8","images":{"fallback":{"src":"/static/7018dfd5358e1aa8885d537af3b58b49/d803c/thumbnail.png","srcSet":"/static/7018dfd5358e1aa8885d537af3b58b49/8c230/thumbnail.png 80w,\n/static/7018dfd5358e1aa8885d537af3b58b49/23e25/thumbnail.png 160w,\n/static/7018dfd5358e1aa8885d537af3b58b49/d803c/thumbnail.png 320w,\n/static/7018dfd5358e1aa8885d537af3b58b49/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/7018dfd5358e1aa8885d537af3b58b49/3e5ca/thumbnail.webp 80w,\n/static/7018dfd5358e1aa8885d537af3b58b49/b72f1/thumbnail.webp 160w,\n/static/7018dfd5358e1aa8885d537af3b58b49/fc5c5/thumbnail.webp 320w,\n/static/7018dfd5358e1aa8885d537af3b58b49/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#2888e8","images":{"fallback":{"src":"/static/7018dfd5358e1aa8885d537af3b58b49/95d3f/thumbnail.png","srcSet":"/static/7018dfd5358e1aa8885d537af3b58b49/61846/thumbnail.png 750w,\n/static/7018dfd5358e1aa8885d537af3b58b49/d5395/thumbnail.png 1080w,\n/static/7018dfd5358e1aa8885d537af3b58b49/cc835/thumbnail.png 1366w,\n/static/7018dfd5358e1aa8885d537af3b58b49/95d3f/thumbnail.png 1536w","sizes":"100vw"},"sources":[{"srcSet":"/static/7018dfd5358e1aa8885d537af3b58b49/6858b/thumbnail.webp 750w,\n/static/7018dfd5358e1aa8885d537af3b58b49/f5547/thumbnail.webp 1080w,\n/static/7018dfd5358e1aa8885d537af3b58b49/29310/thumbnail.webp 1366w,\n/static/7018dfd5358e1aa8885d537af3b58b49/a1b55/thumbnail.webp 1536w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a0eedb52-b942-551c-9288-bbeab2d50e3d","tableOfContents":"<ul>\n<li>\n<p><a href=\"#tcp-transmission-control-protocol\">TCP, Transmission Control Protocol</a></p>\n</li>\n<li>\n<p><a href=\"#tcp%EB%8A%94-%EC%99%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%84%EA%B1%B8%EA%B9%8C\">TCP는 왜 만들어진걸까?</a></p>\n<ul>\n<li><a href=\"#%ED%95%B5%EC%A0%84%EC%9F%81%EC%9D%B4-%EB%82%98%EB%8F%84-%EC%82%B4%EC%95%84%EB%82%A8%EB%8A%94-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC\">핵전쟁이 나도 살아남는 네트워크</a></li>\n<li><a href=\"#%ED%8C%A8%ED%82%B7-%EA%B5%90%ED%99%98-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90\">패킷 교환 방식의 문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tcp%EC%9D%98-%ED%97%A4%EB%8D%94%EB%A5%BC-%EA%B9%8C%EB%B3%B4%EC%9E%90\">TCP의 헤더를 까보자</a></p>\n<ul>\n<li><a href=\"#source-port--destination-port\">Source port / Destination port</a></li>\n<li><a href=\"#sequence-number\">Sequence Number</a></li>\n<li><a href=\"#acknowledgment-number\">Acknowledgment Number</a></li>\n<li><a href=\"#data-offset\">Data Offset</a></li>\n<li><a href=\"#reserved-3-bits\">Reserved (3 bits)</a></li>\n<li><a href=\"#flags-ns--fin\">Flags (NS ~ FIN)</a></li>\n<li><a href=\"#window-size\">Window Size</a></li>\n<li><a href=\"#checksum\">Checksum</a></li>\n<li><a href=\"#urgent-pointer\">Urgent Pointer</a></li>\n<li><a href=\"#options\">Options</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"저번에 HTTP/3는 왜 UDP를 선택한 것일까? 포스팅을 진행하며 TCP에 대해 간단한 언급을 했었지만, 해당 포스팅에서는 기존의 HTTP에서 사용하던 TCP에 어떤 문제가 있었는지에 집중해서 이야기했었지만 이번에는 TCP 자체에 조금 더 집중해서 이야기해보려고 한다. 원래는 이 포스팅에서 TCP의 개괄적인 내용을 모두 다루려고 했으나 생각보다 양이 너무 많아서 몇 개의 포스팅으로 나누어 작성하려고 한다. (파도파도 끝이 없는 이 놈의 할배 프로토콜…) 그런 이유로 이번 포스팅에서는 TCP의 헤더 안에 들어 있는 필드들이 어떤 …","html":"<p>저번에 <a href=\"/2019/10/08/what-is-http3/\">HTTP/3는 왜 UDP를 선택한 것일까?</a> 포스팅을 진행하며 TCP에 대해 간단한 언급을 했었지만, 해당 포스팅에서는 기존의 HTTP에서 사용하던 TCP에 어떤 문제가 있었는지에 집중해서 이야기했었지만 이번에는 TCP 자체에 조금 더 집중해서 이야기해보려고 한다.</p>\n<p>원래는 이 포스팅에서 TCP의 개괄적인 내용을 모두 다루려고 했으나 생각보다 양이 너무 많아서 몇 개의 포스팅으로 나누어 작성하려고 한다. <small>(파도파도 끝이 없는 이 놈의 할배 프로토콜…)</small></p>\n<p>그런 이유로 이번 포스팅에서는 TCP의 헤더 안에 들어 있는 필드들이 어떤 의미를 가지고 있는지에만 집중해서 이야기 해보도록 하겠다.</p>\n<h2 id=\"tcp-transmission-control-protocol\" style=\"position:relative;\">TCP, Transmission Control Protocol<a href=\"#tcp-transmission-control-protocol\" aria-label=\"tcp transmission control protocol permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>TCP(Transmission Control Protocol)는 OSI 7계층 중 전송 계층에서 사용되고 있는 프로토콜로, 장비들 간의 통신 과정에서 정보를 안정적으로, 순서대로, 에러없이 교환할 수 있도록 하는 것에 목적을 둔 프로토콜이다.</p>\n<p>컴퓨터 공학에서는 컴퓨터에게 가까운 부분일 수록 “낮다”, “뒤에 있다”는 표현을, 사람에게 가까운 “높다”, “앞에 있다”라는 표현을 자주 사용하는데, OSI 7계층에서도 마찬가지로 낮은 계층일수록 기계에 가까운 부분이고 높은 부분일수록 사람에게 가까운 부분이라고 생각하면 편하다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/eaf99e668d4cb90c964bcff2ad9bcb9e/d3f96/osi.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD1UlEQVR42mPgNbHt5DW13c1tbLNJws51i5KrzxYFIFZy890i4+i5RdbJc4skUJzb2Hozj4nNDh5j20VyNjaC9QwMTFpaWmzGxsasQMzl5uYm5OHhwcfAZeRwkNvI8T+brs1XJbeg73ZxWd9Nw5K+W0Smftf2jfxuFp78XdUz5DuHvt1XLkOHP9yGDo+ULexV/KyseC0sLIRsgIa7uLjIOTo66gOxMoOSp+xUBXfZi4qessfVfFVOqvgon1T2Ujqp7Kl0UslD/qSSpwJQTOmkoofsCUV32XMKnjKbtEJFeRgggJEBHah7Cx5W9xH8r+Yl8M0t1ehHQJ7Nj+AChx+hRY4/3NNMfvjn2Pzwy7b6oebF/03dW+CvupfAI0UnbnGodiaooYxQNhODUYbUZKN0yfOG6ZJHDdIkjptmyR03zpQC0rIotEG65DGjdKkzQPUb9IrFuXG60LRU6rhFlcx/IP3XokL2f3S/y//4SZ7/o/qc/4d02/6PnuD637pSASxvXglW98I8TwziwnoUF0JA8CSr/tDJVidDJlnuD51kdTB8svXBECAdMsniYMRkm4NAuYPBQDZQ7kDoJMtjQHp1TLceuguZgDHM/v//f0aGnDUBJwo2hfzPWu3/t2Bd2P+O3YX/u/aW/G8H0o3bs/737q/4X7ox5n/mar+/+RuC/+esDngZXeOubqbiwecc4Czs7OwsDEwyssCYNrG3txdgqN6S3F+zNeUkEO8H4oONOzIPtu7OPdiyKxvIzgCz67alHwSqOwCUPwakV2etCuXB4mUIe+qxuuMzTzf9B9K/pxyp/du0ouBv0/KCvy2rCv92bCj927K68O+kA9V/px1v+D39ROP/KUfqXpT2Z6irCJnxBQQECHt7ewsC0586KC2CLZl3qqtv3qnuk/NOdu0Hsg/OO9FzcO5xEA3EQBrMBomf7DoAVHcMSK+es6GTF6Q3dFUoc319PRMot4SGhjKDDdx2beXRXbfX/N9+Y8XPTZeW/p67bfLvxQdm/F5ycObvZYdn/Z6/c8rvDecX/d5xc9XPHTdW/t9+fcWTnRcWiYH0giMBHey5vb5vz631x/bc3rBn1811+7ZdXLVv55W1+3ZeW7tvO5DeCuTvurFu3+5b6/cC1R0G0iv3X1nFg9PAe+9vHnvx69H/Bx9v/b377vr/E9cO/z998ygYn7936v/pW8f+33l7DSz/9Nv9/0D1z289OyeK08AbLy+13nh5eevN11fW3Hh1ed3p20fXHbmyf93x64fA+Mjl/euuP7+47sarS2tvvrq06ebrS3Ouvz7Ci8tAAAaq+RhRBRVjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"osi\" title=\"\" src=\"/static/eaf99e668d4cb90c964bcff2ad9bcb9e/6af66/osi.png\" srcset=\"/static/eaf99e668d4cb90c964bcff2ad9bcb9e/69538/osi.png 160w,\n/static/eaf99e668d4cb90c964bcff2ad9bcb9e/72799/osi.png 320w,\n/static/eaf99e668d4cb90c964bcff2ad9bcb9e/6af66/osi.png 640w,\n/static/eaf99e668d4cb90c964bcff2ad9bcb9e/d9199/osi.png 960w,\n/static/eaf99e668d4cb90c964bcff2ad9bcb9e/d3f96/osi.png 1093w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이때 우리에게 친숙한 HTTP(Hypertext Tranfer Protocol), SMTP(Simple Mail Transfer Protocol), FTP(File Transfer Protocol)와 같은 프로토콜 친구들이 가장 높은 계층인 응용 계층에 위치한다. 그에 비해 더 낮은 계층에 존재하는 TCP, UDP, IP 같은 프로토콜들은 상대적으로 접할 일이 많이 없기는 하다.</p>\n<p>이런 프로토콜들은 대부분 OS에서 알아서 처리해주기 때문에 상위 계층에서 프로그래밍을 하는 개발자가 굳이 여기서 일어나는 일까지 하나하나 신경쓸 필요가 없기 때문이다.</p>\n<p>애초에 이게 레이어 모델이 존재하는 이유 중 하나이다. 네트워크라는 것이 수많은 기술의 집약체인 만큼 한 명의 개발자가 모든 것을 다 알기는 힘들다. 그래서 각 계층 간 철저한 역할 분담을 통해 어떤 작업을 할 때 신경써야하는 범위를 좁혀주는 것이다.</p>\n<p>덕분에 우리는 HTTP를 사용할 때 DNS는 어디를 사용할지, 패킷은 어떻게 처리할지 등 여러 가지 작업을 한번에 신경쓸 필요가 없다.</p>\n<p>하지만 아무리 레이어가 나누어져 있다고 한들 하위 레이어에서 일어나는 일을 전혀 모르고 있다면, 어플리케이션 레이어에서는 아무 문제 없지만 하위 레이어에서 문제가 발생했을 때 전혀 손도 못 대는 케이스도 발생할 수 있다.</p>\n<p>이런 이유로 자신이 사용하고 있는 프로토콜의 대략적인 작동 원리와 개요 정도는 알고 있으면 좋다고 생각하기 때문에, 이번 포스팅을 작성하며 그 동안 대략적인 몇 가지 특징으로만 알고 있던 TCP를 조금 뜯어보려고 한다.</p>\n<h2 id=\"tcp는-왜-만들어진걸까\" style=\"position:relative;\">TCP는 왜 만들어진걸까?<a href=\"#tcp%EB%8A%94-%EC%99%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%84%EA%B1%B8%EA%B9%8C\" aria-label=\"tcp는 왜 만들어진걸까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>개인적으로 어떤 기술을 공부할 때, 무작정 외우는 것이 아니라 이게 왜 필요한 것인지를 제대로 알고 그 이유에 대해 공감하며 공부하는 편이 효과적이라고 생각한다.</p>\n<p>TCP는 워낙 옛날에 나온 기술이니 당시 상황을 100% 공감하기는 쉽지 않겠지만, 그래도 이 프로토콜이 개발된 이유를 살펴보면 당시 엔지니어들의 고충을 알아볼 수 있다.</p>\n<h3 id=\"핵전쟁이-나도-살아남는-네트워크\" style=\"position:relative;\">핵전쟁이 나도 살아남는 네트워크<a href=\"#%ED%95%B5%EC%A0%84%EC%9F%81%EC%9D%B4-%EB%82%98%EB%8F%84-%EC%82%B4%EC%95%84%EB%82%A8%EB%8A%94-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC\" aria-label=\"핵전쟁이 나도 살아남는 네트워크 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP는 방금 이야기 했듯이 1970년 냉전 당시 미 국방성이 개발하던 알파넷 프로젝트의 일부로 개발되었는데, 그 당시 알파넷을 연구할 때 관심을 가진 주제 중에 하나가 바로 “핵전쟁이 나도 살아남는 네트워크”였다. <small>(핵전쟁의 상대방은 당연히 마더 러씨아…)</small></p>\n<p>왜냐하면 1970년대의 네트워크는 회선 교환 방식을 사용하고 있었기 때문에 중계국이 폭격을 맞아서 박살나거나 중간에 연결된 선이 하나가 잘려나가면 그대로 통신이 끊어져 버렸기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/872ac67a7c6196542ca4a5ece19b54b5/b17f8/old-telephone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFTc92ECoH/xAAaEAEBAQADAQAAAAAAAAAAAAACAQMAERIh/9oACAEBAAEFAjCplj1xGlevmegp0Qt//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAERAgMhMRAiQf/aAAgBAQAGPwLWRq5T5uCGo4SqeTspP//EABoQAQADAAMAAAAAAAAAAAAAAAEAESExQVH/2gAIAQEAAT8hblDo9XAam4UPrzxnOewigEzdgO1hzP/aAAwDAQACAAMAAAAQHz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhQWFRcf/aAAgBAQABPxB40ewW5Foq+MIw3qjFsL/SKiPfDifSCePKeSoMJR403SJNZQNZbU//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"old telephone\" title=\"\" src=\"/static/872ac67a7c6196542ca4a5ece19b54b5/c08c5/old-telephone.jpg\" srcset=\"/static/872ac67a7c6196542ca4a5ece19b54b5/0913d/old-telephone.jpg 160w,\n/static/872ac67a7c6196542ca4a5ece19b54b5/cb69c/old-telephone.jpg 320w,\n/static/872ac67a7c6196542ca4a5ece19b54b5/c08c5/old-telephone.jpg 640w,\n/static/872ac67a7c6196542ca4a5ece19b54b5/6a068/old-telephone.jpg 960w,\n/static/872ac67a7c6196542ca4a5ece19b54b5/eea4a/old-telephone.jpg 1280w,\n/static/872ac67a7c6196542ca4a5ece19b54b5/b17f8/old-telephone.jpg 1600w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>직접 보지는 않았지만 이런 느낌이지 않았을까...?</small>\n</center>\n<p>저 당시 중계국이 하는 일은 그냥 이거다. A가 중계국에 “B랑 연결해주세요!”라고 하면, 위의 사진과 같이 케이블이 마구 꽂혀있는 패치 테이블에서 A 라벨이 붙은 구멍과 B 라벨이 붙은 구멍을 찾아서 케이블로 연결해준다.</p>\n<p>말 그대로 회선을 교환하는 방식인 것이다. 저러다가 A가 C랑 통신하고 싶으면 B 구멍에서 케이블을 빼서 C 구멍에 꽂으면 된다.</p>\n<p>이렇게 회선 교환 방식의 경우에는 통신을 하고 싶은 상대방과 물리적으로 회선을 하나 딱 잡아놓고 계속 통신을 하는 것이기 때문에 회선의 효율이 낮을 수 밖에 없다. 우리가 전화를 걸 때 상대방이 통화 중이면 “상대방이 통화 중이니…” 어쩌고 나오는 것과 같은 원리이다.</p>\n<p>물론 회선을 독점하기 때문에 대량의 데이터를 빠른 속도로 주르륵 보낼 수 있는 등의 장점도 있긴 하지만, 이때 미국에게 중요한 것은 핵이 터져도 끊기지 않는 연결이었기 때문에 하나의 회선에 전적으로 의존하는 연결이라는 건 큰 단점으로 다가왔을 것이다.</p>\n<p>그래서 나온 아이디어가 바로 패킷 교환 방식이다. 데이터를 하나의 회선을 사용하여 보내다가 해당 회선이나 중계국이 개박살나면 전송되던 데이터와도 영원히 이별하게 되니, 데이터를 잘게 쪼갠 후 여러 개의 회선을 통해 보내자는 것이다. 일종의 분산투자랄까.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/200a4648f12fe0e8e32c2a9308df4465/0d98f/packets.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 29.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVR42mPw9vZWsnXXkGQAgv//GRhDQ0OZgSymX6fTrX/dyMkCiX861yr653Jm9f/96QpgdQ9SUtf196fGuB5UhOirZ2KAgSS/hUnxnkum/d/PwALit6SvMqtMWp8LYu/ff5/jye7Jwk/WVQjv3/+f5cm6NuHGjDXB9fVX2KrTNztMLlhmAjPn/yZJrv/zGTgYurLqJdZOXvXi+an2m/8veOv8X5opWBK/1mN1zzSf/w8ynJ7v7Ob+/38R9+/rBb7HdqwSas7YGP90b2nk//+hQsWBi8Q6s5bH/t8bpv//Qced/w8adkFMf1Sx5v/9xhufdkRq/H9kwVmRsMkUbODXBNPijKM6U8vmBf2/n+Vx+PAWQZD671eLnP8/zJaqj1kkVpu13f/D4USl/w/brv170LQNYuAVLbZ/2xjYwexVhZz/z6Rx/f//nxEYpkyza1dYV2ducAHJXdh5gfvIkeu8Z86cYb1y5QobiAapA8n926bC/v8MAys8LP8zMIAMYITxf57MMvh/PSsdKMP48uUUnl/X8/IfXZktBJL7cyMn+d/NMk0Qu76+nglZHwDNUtCZl2fElwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"packets\" title=\"\" src=\"/static/200a4648f12fe0e8e32c2a9308df4465/6af66/packets.png\" srcset=\"/static/200a4648f12fe0e8e32c2a9308df4465/69538/packets.png 160w,\n/static/200a4648f12fe0e8e32c2a9308df4465/72799/packets.png 320w,\n/static/200a4648f12fe0e8e32c2a9308df4465/6af66/packets.png 640w,\n/static/200a4648f12fe0e8e32c2a9308df4465/d9199/packets.png 960w,\n/static/200a4648f12fe0e8e32c2a9308df4465/0d98f/packets.png 1276w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이렇게 되면 노드 하나가 박살나도 모든 데이터가 유실되진 않을 것이다</small>\n</center>\n<p>최악의 경우 중간에 있는 회선이나 중계국이 박살나서 데이터가 약간 유실될 수는 있겠지만 전체 네트워크를 한 번에 타격하지 않는 이상 모든 데이터가 유실될 가능성은 적다. 또한 하나의 회선을 잡아놓고 계속 통신하는 것이 아니라 패킷에 목적지를 마킹해놓고 그냥 보내기만 하면 되니, 회선의 사용 효율 또한 높아질 수 있다.</p>\n<p>이런 이유로 미 국방성은 이 아이디어를 채택하여 알파넷에 적용했고, 초기 테스트도 대성공하여 패킷 교환 방식의 실용성을 증명했다.</p>\n<p>이후 몇 개의 대학과 군에서만 사용되던 알파넷이 대중들에게 공개되고 전 세계적으로 연결되며 인터넷으로 발전하게 되었고, 덩달아 알파넷의 통신 프로토콜이었던 TCP도 함께 떡상하게 된 것이다.</p>\n<h3 id=\"패킷-교환-방식의-문제점\" style=\"position:relative;\">패킷 교환 방식의 문제점<a href=\"#%ED%8C%A8%ED%82%B7-%EA%B5%90%ED%99%98-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"패킷 교환 방식의 문제점 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>하지만 패킷 교환 방식도 당연히 만능이 아니기에, 몇 가지 문제가 있었다. 우리가 TCP를 공부할 때 함께 따라오는 ARQ나 SYN, ACK 등의 개념들이 바로 이런 문제들을 해결하기 위해 과거의 엔지니어들이 머리를 싸맨 결과인 것이다.</p>\n<blockquote>\n<p>Q: 전송 중간에 패킷이 쥐도새도 모르게 사라지거나 훼손되면 어떡해요?<br />\nA: <strong>그럼 그 패킷만 다시 보내라고 해! (ARQ)</strong></p>\n<p>Q: 송신 측이 패킷을 쪼갠 순서를 알아야 수신 측이 재조립할 수 있겠는데요?<br />\nA: <strong>그럼 순서번호를 패킷이랑 같이 보내! (시퀀스 번호)</strong></p>\n<p>Q: 수신 측이 처리할 수 있는 속도보다 송신 측이 패킷을 빠르게 보내버리면 어떡하죠?<br />\nA: <strong>그럼 수신 측이 처리할 수 있는 양을 송신 측에 알려주고 그 만큼만 보내라고 해!  (슬라이딩 윈도우)</strong></p>\n</blockquote>\n<p>TCP가 가지고 있는 많은 기능과 개념들은 마냥 글로만 봤을 땐 복잡해보이고 뭔가 외울 것도 많아보이지만, 당시 상황을 생각해보면 반드시 필요한 것들이었음을 알 수 있다.</p>\n<p>그리고 이런 기능들은 상대방이 보낸 세그먼트의 헤더에 들어있는 정보를 파악하여 작동하기 때문에, 이 기능들을 하나씩 알아보기 전에 TCP의 헤더에는 어떤 정보들이 들어있고, 이 정보들이 의미하는 것이 무엇인지 살펴보려고 한다.</p>\n<h2 id=\"tcp의-헤더를-까보자\" style=\"position:relative;\">TCP의 헤더를 까보자<a href=\"#tcp%EC%9D%98-%ED%97%A4%EB%8D%94%EB%A5%BC-%EA%B9%8C%EB%B3%B4%EC%9E%90\" aria-label=\"tcp의 헤더를 까보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>HTTP, TCP, IP와 같은 프로토콜들은 각자 자신이 맡은 역할이 있고, 보내고자 하는 데이터에 자신의 헤더를 붙혀서 데이터의 정보를 표현한다.</p>\n<p>TCP는 전송의 신뢰성과 흐름 제어, 혼잡 제어 등의 역할을 맡고 있는 프로토콜이기 때문에, TCP 헤더에도 이러한 기능을 사용하기 위한 여러가지 값들이 담겨있다.</p>\n<p>즉, 이 헤더를 보면 개괄적인 TCP의 기능들을 한 차례 쓱 훑어볼 수 있다는 말이고, 그런 이유로 필자는 TCP 포스팅의 첫 번째 스텝으로 헤더 까보기를 골랐다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ac69210c44cd473bcb737665d590b124/c7bb6/tcp-header.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABWUlEQVR42j2P147CMBRE8/9/x4IQkEKq4zi9YofA7NjS7sOR43jKvV6YSMh2xbJs6PoR47Rg5vc0rxjGGbKq8fADVKpx/5q2d5o/rKbtBvTDhO2l4V0fCcK0gpAKWSGRCYkozvBMcqR5ibQoIVWLsmrce5wWjuvNx+0RIMkEYmr9KEHbD/ByoVz7/j6gzU4M20ZOucLsb9cqK4W8ENTVWLeXo6N5GCfnsTpNzL7DS3PJ9hrLurmQhUyzXWfGwDWSNEMYPSFK6mQFVTeuxIZuRGuDF9mIYbib0K7UsLHuejwZkNEsaVRtB9W06DiJOQ4c3y/eZKXZvlv9y05ntyOGeGFcoMwKHFxTM0A3HaoogopjTJxoYvggSow8F65uTxGEKMOIuif6vIC2wSw23MwTNSdIUnx9H0cQ4BOG2Pk9ns+O6XJx9KfT/338OaPjXd/v+LLcej7WrxR+AYjFDnQh+N9MAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tcp header\" title=\"\" src=\"/static/ac69210c44cd473bcb737665d590b124/6af66/tcp-header.png\" srcset=\"/static/ac69210c44cd473bcb737665d590b124/69538/tcp-header.png 160w,\n/static/ac69210c44cd473bcb737665d590b124/72799/tcp-header.png 320w,\n/static/ac69210c44cd473bcb737665d590b124/6af66/tcp-header.png 640w,\n/static/ac69210c44cd473bcb737665d590b124/d9199/tcp-header.png 960w,\n/static/ac69210c44cd473bcb737665d590b124/21b4d/tcp-header.png 1280w,\n/static/ac69210c44cd473bcb737665d590b124/c7bb6/tcp-header.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>TCP는 여러 개의 필드로 나누어진 20 bytes, 즉 160 bits의 헤더를 사용하며, 각 필드의 비트를 0 또는 1로 변경하여 전송하고자 하는 세그먼트의 정보를 나타낸다.</p>\n<p>하지만 이 20 bytes라는 것은 아무 옵션도 없는 기본적인 헤더일 때의 용량이고, TCP의 여러가지 옵션들을 사용하면 헤더 맨 뒤에 옵션 필드들이 추가로 붙기 때문에 최대 40 bytes가 더해진 60 bytes까지도 사용할 수도 있다.</p>\n<p>그럼 이 그림에 표기된 순서대로 각 필드가 어떤 정보를 담고 있는지 한번 살펴보도록 하자.</p>\n<h3 id=\"source-port--destination-port\" style=\"position:relative;\">Source port / Destination port<a href=\"#source-port--destination-port\" aria-label=\"source port  destination port permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ebf97ac44242ba7ca213c1611c94dc7c/c7bb6/header-source-destination.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVR42j2Q2ZKiQBBF+f+PmiUmpqft1VZ7WlRAFNl3QYpFziQ8zMOJqsy6N5fSDNvHzxuuqiO53shvilL1FE1HViu8JEO3bPy0kFxLXFTkkp90+a0VTUNS1qRVQ931aJ+Gg7XcELwucN9e8AT78YHT4oHLyxOuEK+WhMt33Ndnzk+PM7sf39j9/I7zvJD4D9bvX+T6F5oTJETbL+5Hg/5k0dkm5faT+qAznC3a44Fo9SbNpPD6ncbco6w9xXbDdfdXPObs68XXOzbayfHw4pRKxp3WnihltUJWyqobtutjnBzcKBZdQpjl3PphXq/uBpphFO4zStAcN8QPY+I0I0pSLPuE43qSiwglDqVImhe0UmQYR/r7SK3U/D7pm7ZDSfGJdvpD43jBO18YxKREoGTawDQJj0dKP6D0fHJpUMhZBeF8ugcDzzBFZ5E5F5QM00jj9lqhuZFMIFON+z3D4cDdMOjkXqzXM+VmM5N9fPyPi9WaVGKl64zSfPLcJ38Y8g/pAAhNJ6xOXQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header source destination\" title=\"\" src=\"/static/ebf97ac44242ba7ca213c1611c94dc7c/6af66/header-source-destination.png\" srcset=\"/static/ebf97ac44242ba7ca213c1611c94dc7c/69538/header-source-destination.png 160w,\n/static/ebf97ac44242ba7ca213c1611c94dc7c/72799/header-source-destination.png 320w,\n/static/ebf97ac44242ba7ca213c1611c94dc7c/6af66/header-source-destination.png 640w,\n/static/ebf97ac44242ba7ca213c1611c94dc7c/d9199/header-source-destination.png 960w,\n/static/ebf97ac44242ba7ca213c1611c94dc7c/21b4d/header-source-destination.png 1280w,\n/static/ebf97ac44242ba7ca213c1611c94dc7c/c7bb6/header-source-destination.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이 필드들은 세그먼트의 출발지와 목적지를 나타내는 필드로, 각각 16 bits 를 할당받는다. 이때 출발지와 목적지의 주소를 판별하기 위해서는 IP 주소와 포트 번호가 필요하다.</p>\n<p>IP 주소는 당연히 한 계층 밑인 네트워크 계층에 있는 IP의 헤더에 담기기 때문에, TCP 헤더에는 IP 주소를 나타내는 필드가 없고 포트를 나타내는 필드만 존재한다.</p>\n<h3 id=\"sequence-number\" style=\"position:relative;\">Sequence Number<a href=\"#sequence-number\" aria-label=\"sequence number permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/98943a4651928dcb5ab4fb58fc381649/c7bb6/header-sequence.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABfklEQVR42j2R23abMBBF+f+v6kPzkrQrJXaIbe5gg7gJEGDjGHt3TNfqw16aOZozGkmWHytUMzFOF3Rn6IeJQWIznunMiCprDl5AUTWrVute9Gmte9KZgaY1tP3AeZ6xHDfBjxRZmpHGR47JicALCf2QJEpES1F5QXbK1zgKIiHG2TrsnB1xmKyau/doGo11LDW1/ZvHl83iOiz7LcOfN87bd+7uJ9+7D+rXn+QvP2jeXpgdm6tg3l8Z7V9r/f3w+W91v7DiU4FKj0x1xVjXK0NVYcqCTimSw4HA+SQPAlQUUqUJl1Zz1g0XrZm7TmiZRbuaXibMSlQlU8r7VW1PKM1TJYfUDaXuKOUaujdclzsLcHvAdL2t+1XbcbktzMtj5Vlj+dGJPD2xdD2zmGcpLPyAMoww0tjkiu6U0Wc5o+R9npN5PrlQBCGtDPD0XapaJhywMvk9HSc8XJfF87j7Pt8S95vNitluV1rb/p/3Hxu05PN+z0Oe4um5P/1lyV++PwgKyWhZIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header sequence\" title=\"\" src=\"/static/98943a4651928dcb5ab4fb58fc381649/6af66/header-sequence.png\" srcset=\"/static/98943a4651928dcb5ab4fb58fc381649/69538/header-sequence.png 160w,\n/static/98943a4651928dcb5ab4fb58fc381649/72799/header-sequence.png 320w,\n/static/98943a4651928dcb5ab4fb58fc381649/6af66/header-sequence.png 640w,\n/static/98943a4651928dcb5ab4fb58fc381649/d9199/header-sequence.png 960w,\n/static/98943a4651928dcb5ab4fb58fc381649/21b4d/header-sequence.png 1280w,\n/static/98943a4651928dcb5ab4fb58fc381649/c7bb6/header-sequence.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>시퀀스 번호는 전송하는 데이터의 순서를 의미하며, 32 bits를 할당받는다. 최대 4,294,967,296 까지의 수를 담을 수 있기 때문에 시퀀스 번호가 그리 쉽게 중복되지는 않는다.</p>\n<p>이 시퀀스 번호 덕분에, 수신자는 쪼개진 세그먼트의 순서를 파악하여 올바른 순서로 데이터를 재조립할 수 있게 된다.</p>\n<p>송신자가 최초로 데이터를 전송할 때는 이 번호를 랜덤한 수로 초기화 하며, 이후 자신이 보낼 데이터의 1 bytes당 시퀀스 번호를 1씩 증가시키며 데이터의 순서를 표현하다가 최대 값인 4,294,967,296를 넘어갈 경우에는 다시 0부터 시작한다.</p>\n<h3 id=\"acknowledgment-number\" style=\"position:relative;\">Acknowledgment Number<a href=\"#acknowledgment-number\" aria-label=\"acknowledgment number permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39c82afd470e6193a6a529065650699b/c7bb6/header-ack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABfUlEQVR42j2QWZOTQBSF+f8/ywetUkudJBMTwhqgabrDTtiSmc87WPpw6q7nLsfxY40uB4b+TlW1tG1PL37XDTRNh9YG1/UoCrvlyrLeev6haVrKqqGuW8Zxwjm6MX5qUaYkyS2JtgRXRZgorqrgmhv0rUbZSuqGKM0FmqPrc/JC4qwgSnK8KKGUA5xU3zBhyLNQrEXOohVN6NMnMQ+jmfMMcz6Sve6w7okxS5hUsvV0cSicv7xVeOvN4MRylTnsmM4H7v6Z0Ttxv/xmcI90p1fSr5+Jvnyi+PEN8+s75f4nS3hh8l3m4MIa+SyRt+UeAidV8pLoc7MWawxhEJAmCTrPsYXB6IK6rFiXhefjwXNdGYf7Vr9J/zSOLNPEIvajx/GjjFz0eorAs4g7VzU6jCjiK50samVok2taGdwbu1nlB+RBSBHF1JlirhsmWbr0A46yJZWQ3y8Xnp7Hm++zit/u9xu6w2FD/fLyP253eyqJ5/OZd/nog/P2wTeGP93kCAjG+USDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header ack\" title=\"\" src=\"/static/39c82afd470e6193a6a529065650699b/6af66/header-ack.png\" srcset=\"/static/39c82afd470e6193a6a529065650699b/69538/header-ack.png 160w,\n/static/39c82afd470e6193a6a529065650699b/72799/header-ack.png 320w,\n/static/39c82afd470e6193a6a529065650699b/6af66/header-ack.png 640w,\n/static/39c82afd470e6193a6a529065650699b/d9199/header-ack.png 960w,\n/static/39c82afd470e6193a6a529065650699b/21b4d/header-ack.png 1280w,\n/static/39c82afd470e6193a6a529065650699b/c7bb6/header-ack.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>승인 번호는 데이터를 받은 수신자가 예상하는 다음 시퀀스 번호를 의미하며, 32 bits를 할당받는다.</p>\n<p>연결 설정과 연결 해제 때 발생하는 핸드쉐이크 과정에서는 <code class=\"language-text\">상대방이 보낸 시퀀스 번호 + 1</code>로 자신의 승인 번호를 만들어내지만, 실제로 데이터를 주고 받을 때는 <code class=\"language-text\">상대방이 보낸 시퀀스 번호 + 자신이 받은 데이터의 bytes</code>로 승인 번호를 만들어낸다.</p>\n<p>예를 들어 1 MB짜리 데이터를 전송한다고 생각해보자. 이렇게 큰 데이터를 한번에 전송할 수는 없으므로, 송신자는 이 데이터를 여러 개의 세그먼트로 쪼개서 조금씩 전송해야한다. 이때 송신자가 한번에 전송할 수 있는 데이터 양은 네트워크나 수신자의 상태에 따라 가변적이긴 하지만, 그냥 100 bytes 라고 가정해보자.</p>\n<p>송신자는 첫 전송으로 100 bytes 만큼만 데이터를 전송하며 시퀀스 번호를 0으로 초기화한다. 시퀀스 번호는 1 bytes당 1씩 증가하기 때문에 첫 번째 바이트 뭉치는 0, 두 번째 바이트 뭉치는 1, 세 번째 바이트 뭉치는 2와 같은 순서로 매겨질 것이다.</p>\n<p>즉, 이번 전송을 통해 수신자는 0-99까지 총 100개의 바이트 뭉치를 받았고, 그 다음 전송 때 받아야할 시퀀스 번호는 2가 아닌 100이 되는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4c5dc85683ae837d23500d773f219316/05244/ack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvElEQVR42mOor69nCg0NFY2JiRED4fisLAkYziguFvPw8FCW1NS0XWZoaDLPxUXVo7JSNC0tTTI+PksCpgeEfX19xUFmMSRlZ0tFJyZqgTi5Hh7s/xkYGBmIACD19fb2HCAcumoVc3h8vEJMcTE3Q9Gi1deKF62+Wbps/bz9//+zHL/5s2H/5V9L913+Me/A1d/z913+Nf/ojR8LTt/+MR+E91/+MffglR8rT936mQQy+P///4ylSzcsKFq0BmjO2isM7Vv2/m/fduB/zYpN926n1Ghfv//u8Z27l/5fv3723+3bl/7fuH7y/7WH7/9ffvr//xUgvnr9wp+Hz57+v/Lk/xagbzTf8/M71W/ac69j6/7/bUCzGLq27vvfs/PQ/5pl6x7cCcgzvv/4/pOfL1b8//x46b8vj5f9//547v97j+//P3n33/9zD///f/9k058fH479v3jv/3aggUZfeHk9Gzbuut+74+D/7m37/zMULlpzs2jxmtslS9YuA3n57K3PrZfvvVp98c7LJUB66dV7L5eevftp6YmbP5aeuP1j6cU7bxZfvPt2/Ymbv9JgXi5ZvG5F0aK1t0AYAHD8D+xKjCj6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ack\" title=\"\" src=\"/static/4c5dc85683ae837d23500d773f219316/6af66/ack.png\" srcset=\"/static/4c5dc85683ae837d23500d773f219316/69538/ack.png 160w,\n/static/4c5dc85683ae837d23500d773f219316/72799/ack.png 320w,\n/static/4c5dc85683ae837d23500d773f219316/6af66/ack.png 640w,\n/static/4c5dc85683ae837d23500d773f219316/d9199/ack.png 960w,\n/static/4c5dc85683ae837d23500d773f219316/21b4d/ack.png 1280w,\n/static/4c5dc85683ae837d23500d773f219316/05244/ack.png 1752w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>100 bytes 만큼 하나의 세그먼트로 묶어서 전송한다</small>\n</center>\n<p><code class=\"language-text\">tcpdump</code>를 사용하여 패킷을 캡쳐해보면 실제로 송신 측이 보낸 데이터의 길이만큼 수신 측의 승인 번호가 증가하는 모습을 확인해 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">localhost.http-alt <span class=\"token operator\">></span> localhost.49680: Flags <span class=\"token punctuation\">[</span>P.<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">160</span>:240, ack <span class=\"token number\">161</span>, win <span class=\"token number\">6374</span>, length <span class=\"token number\">80</span>\nlocalhost.49680 <span class=\"token operator\">></span> localhost.http-alt: Flags <span class=\"token punctuation\">[</span>.<span class=\"token punctuation\">]</span>, ack <span class=\"token number\">240</span>, win <span class=\"token number\">6374</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>송신 측이 보낸 세그먼트를 보면 시퀀스 번호가 <code class=\"language-text\">seq 160:240</code>로 찍혀있고, 수신 측은 자신의 승인 번호로 콜론 뒤 쪽의 값을 사용하고 있다.</p>\n<p>이때 시퀀스 번호의 형식은 <code class=\"language-text\">n 이상:m 미만</code>의 범위를 나타낸다. 콜론 뒤쪽의 번호는 송신 측의 시퀀스 범위에 포함되지 않으므로 수신 측이 저 번호를 그대로 가져다 쓰는 것이다.</p>\n<p>즉, 승인 번호는 다음에 보내줘야하는 데이터의 시작점을 의미한다는 것을 알 수 있다.</p>\n<h3 id=\"data-offset\" style=\"position:relative;\">Data Offset<a href=\"#data-offset\" aria-label=\"data offset permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e1e371de646e3735c414e9a897af2db6/c7bb6/header-data-offset.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABZklEQVR42j1Q6ZKiMBjk/Z9uRmenVATDnQQIEM4g0ttQtfujK1dfX7wgkpD1iGGYYJoOnR3Qc2/7EW3XQ6oSD/8Jpavzrqqbk/MPB6c2LZrWYpoXeL9+hCBWyKVCkhVIM4VQJHhFKeK0QMw7qWsUquK7hIizE783H7fHE1GSQ5DrhxHqpoWX5RqyMnA7sLw3LM4xrWPLEW59n6lSaQblbFlinOYThuK2s+SvJ28h3LrCi/IS6n7DLAKMscDQD7A062yPlmNEcYIgfCEvJApOocvqDDlMJ2JZHGZiIhzNvVQZlJcv1CJE/eeCVxAioVBSqGsDXdUwbOK2Ddu+402MFB/vpWkwH+2OyQhHeEHMP7rfsT8fcJHAQhMVhtBCwNLYslmbF+i4Dhz9WPNngILBis2bNMNyGDPYcTov54ebJMXnJbCRsAcBVt9Hd72esD8/J5rv7//n7nKF4Xk5ijD8Q82Hmk1r/AVxsA1M+2D96gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header data offset\" title=\"\" src=\"/static/e1e371de646e3735c414e9a897af2db6/6af66/header-data-offset.png\" srcset=\"/static/e1e371de646e3735c414e9a897af2db6/69538/header-data-offset.png 160w,\n/static/e1e371de646e3735c414e9a897af2db6/72799/header-data-offset.png 320w,\n/static/e1e371de646e3735c414e9a897af2db6/6af66/header-data-offset.png 640w,\n/static/e1e371de646e3735c414e9a897af2db6/d9199/header-data-offset.png 960w,\n/static/e1e371de646e3735c414e9a897af2db6/21b4d/header-data-offset.png 1280w,\n/static/e1e371de646e3735c414e9a897af2db6/c7bb6/header-data-offset.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>데이터 오프셋 필드에는 전체 세그먼트 중에서 헤더가 아닌 데이터가 시작되는 위치가 어디부터인지를 표시한다.</p>\n<p>이 오프셋을 표기할 때는 32비트 워드 단위를 사용하며, 32 비트 체계에서의 <code class=\"language-text\">1 Word = 4 bytes</code>를 의미한다. 즉, 이 필드의 값에 4를 곱하면 세그먼트에서 헤더를 제외한 실제 데이터의 시작 위치를 알 수 있는 것이다.</p>\n<p>이 필드에 할당된 4 bits로 표현할 수 있는 값의 범위는 0000 - 1111, 즉 0 - 15 Word이므로 기본적으로 0 - 60 bytes의 오프셋까지 표현할 수 있다. 하지만 옵션 필드를 제외한 나머지 필드는 필수로 존재해야 하기 때문에 최소 값은 20 bytes, 즉 5 Word로 고정되어 있다.</p>\n<p>이 필드가 필요한 이유는, 밑에서 설명할 옵션(Option) 필드의 길이가 고정되어 있지 않기 때문이다.</p>\n<h3 id=\"reserved-3-bits\" style=\"position:relative;\">Reserved (3 bits)<a href=\"#reserved-3-bits\" aria-label=\"reserved 3 bits permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0349ac9a4c277a5a0090feab26782143/c7bb6/header-reserved.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVR42j2RyZKjMBBE+f8v65hbtx0OYwy2WCWxil0YOztRzMzhhSjIqkwVXigkZD1hHGc0rYHpRwx87ocJnRkgVYlbcIfSlXtX1a3T/OPQ1E2HtusxLyu8y00gjBVyqZFkBVISPRI8RIo4LRCzlrpGoSp+l3jGmeNyDXC93SGSHE9qg0igbjt4aa6d+/basZJlf6Ol6zCMsNvLuUqlaZRTV2KaF0fD5s70WO3mdCux2wYvTiUKWWJcLKZUYA59jErCjLxyZyDiBGH0QF4cOgVdVs7kGDqTdbVYyEwsh7uEkgnLnru4nCH+fCE7/0ByL7pqSI2GSey+Y/988CITmyUHl02L5Uj393aWeOEzQ5Fk2DnQJjGsf4Hyr9BCoGeinsm6vIDhOfLqx5nfQxRhBMXkbZphPQbT2HJNXl4ygYjxCQLsUYT3U2DjXzWnk6M/nx3t9/f/2vyc0LBefR+foycM8T76tcYvjnYNZW+98D0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header reserved\" title=\"\" src=\"/static/0349ac9a4c277a5a0090feab26782143/6af66/header-reserved.png\" srcset=\"/static/0349ac9a4c277a5a0090feab26782143/69538/header-reserved.png 160w,\n/static/0349ac9a4c277a5a0090feab26782143/72799/header-reserved.png 320w,\n/static/0349ac9a4c277a5a0090feab26782143/6af66/header-reserved.png 640w,\n/static/0349ac9a4c277a5a0090feab26782143/d9199/header-reserved.png 960w,\n/static/0349ac9a4c277a5a0090feab26782143/21b4d/header-reserved.png 1280w,\n/static/0349ac9a4c277a5a0090feab26782143/c7bb6/header-reserved.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>미래를 위해 예약된 필드로, 모두 0으로 채워져야 한다. 상단의 헤더 그림에도 그냥 <code class=\"language-text\">0 0 0</code>으로 찍혀있는 것을 확인해볼 수 있다.</p>\n<h3 id=\"flags-ns--fin\" style=\"position:relative;\">Flags (NS ~ FIN)<a href=\"#flags-ns--fin\" aria-label=\"flags ns  fin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3697f03f06af5fe2bce48b43a1d9ee56/c7bb6/header-flags.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeElEQVR42jWQ527jMBAG9f4PdocEAQLHjousYhVLlKjerGJ7biXgfgxIkPsNd2nYnkLlPV03UJQ1ddPRyr5pe6q6RSUa82qRpNl2luXlVvOftSYvKsqqYXiMGEfTw/YTIpUS3NWG4/q4XoAfRgRhLNKMWOnt7uaF3Pw7x/OVs2nhBdF2dnU88rLCCKN0e31enozTzDjPFGuX/YPp+WaYFlRWEMaKNNX0w2OjkHBVN1tmmhfJLbLOGH6oiGWsrh9EMtBVNb11pvVcatci+Pnm9vGH2LwQi3CVrqOt0kEYx4mHMAiTyLcOVZqTlSVaZK5pEn/+JQl8Ms9DBwGliJc4ZAGW15tewkpn6KLksXa3TidMgmHf7sTBnafIRvnwUWv01wfZ9xfd6Zf2dKA57Gi8G618TS2jR5ZNbDskjksZ3hlXcZYztR1GpHMKz+dtXXlaFi/HYZbi6ve40RxP1EK531MLzeFA/bOn2O0YLxfeUv+ybV5Xyacp/wCQHgwqbb+AcgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header flags\" title=\"\" src=\"/static/3697f03f06af5fe2bce48b43a1d9ee56/6af66/header-flags.png\" srcset=\"/static/3697f03f06af5fe2bce48b43a1d9ee56/69538/header-flags.png 160w,\n/static/3697f03f06af5fe2bce48b43a1d9ee56/72799/header-flags.png 320w,\n/static/3697f03f06af5fe2bce48b43a1d9ee56/6af66/header-flags.png 640w,\n/static/3697f03f06af5fe2bce48b43a1d9ee56/d9199/header-flags.png 960w,\n/static/3697f03f06af5fe2bce48b43a1d9ee56/21b4d/header-flags.png 1280w,\n/static/3697f03f06af5fe2bce48b43a1d9ee56/c7bb6/header-flags.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>9개의 비트 플래그이다. 이 플래그들은 현재 세그먼트의 속성을 나타낸다. 기존에는 6개의 플래그만을 사용했지만, 혼잡 제어 기능의 향상을 위해 <code class=\"language-text\">Reserved</code> 필드를 사용하여 <code class=\"language-text\">NS</code>, <code class=\"language-text\">CWR</code>, <code class=\"language-text\">ECE</code> 플래그가 추가되었다.</p>\n<p>먼저 기존에 존재하던 플래그들의 의미는 다음과 같다.</p>\n<table>\n<thead>\n<tr>\n<th>필드</th>\n<th>의미</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>URG</td>\n<td>Urgent Pointer(긴급 포인터) 필드에 값이 채워져있음을 알리는 플래그. 이 포인터가 가리키는 긴급한 데이터는 높게 처리되어 먼저 처리된다. 요즘에는 많이 사용되지 않는다.</td>\n</tr>\n<tr>\n<td>ACK</td>\n<td>Acknowledgment(승인 번호) 필드에 값이 채워져있음을 알리는 플래그. 이 플래그가 0이라면 승인 번호 필드 자체가 무시된다.</td>\n</tr>\n<tr>\n<td>PSH</td>\n<td>Push 플래그. 수신 측에게 이 데이터를 최대한 빠르게 응용프로그램에게 전달해달라는 플래그이다. 이 플래그가 0이라면 수신 측은 자신의 버퍼가 다 채워질 때까지 기다린다. 즉, 이 플래그가 1이라면 이 세그먼트 이후에 더 이상 연결된 세그먼트가 없음을 의미하기도 한다.</td>\n</tr>\n<tr>\n<td>RST</td>\n<td>Reset 플래그. 이미 연결이 확립되어 <code class=\"language-text\">ESTABLISHED</code> 상태인 상대방에게 연결을 강제로 리셋해달라는 요청의 의미이다.</td>\n</tr>\n<tr>\n<td>SYN</td>\n<td>Synchronize 플래그. 상대방과 연결을 생성할 때, 시퀀스 번호의 동기화를 맞추기 위한 세그먼트임을 의미한다.</td>\n</tr>\n<tr>\n<td>FIN</td>\n<td>Finish 플래그. 상대방과 연결을 종료하고 싶다는 요청인 세그먼트임을 의미한다.</td>\n</tr>\n</tbody>\n</table>\n<p>기존의 Reserved 필드를 사용하여 새롭게 추가된 <code class=\"language-text\">NS</code>, <code class=\"language-text\">CWR</code>, <code class=\"language-text\">ECE</code> 플래그는 네트워크의 명시적 혼잡통보(ECN, Explicit Congestion Notification)을 위한 플래그이다.</p>\n<p>ECN을 사용하지 않던 기존의 네트워크 혼잡 상황 인지 방법은 타임아웃을 이용한 방법이었다. 그러나 처리 속도에 민감한 어플리케이션에서는 이런 대기 시간 조차 아깝기 때문에, 송신자와 수신자에게 네트워크의 혼잡 상황을 명시적으로 알리기 위한 특별한 매커니즘이 필요하게 되었는데, 이것이 바로 ECN이다.</p>\n<p>이때 <code class=\"language-text\">CWR</code>, <code class=\"language-text\">ECE</code>, <code class=\"language-text\">ECT</code>, <code class=\"language-text\">CE</code> 플래그를 사용하여 상대방에게 혼잡 상태를 알려줄 수 있는데, 이 중 <code class=\"language-text\">CWR</code>, <code class=\"language-text\">ECE</code>는 TCP 헤더에 존재하고 <code class=\"language-text\">ECT</code>, <code class=\"language-text\">CE</code>는 IP 헤더에 존재한다.</p>\n<table>\n<thead>\n<tr>\n<th>필드</th>\n<th>의미</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NS</td>\n<td>ECN에서 사용하는 CWR, ECE 필드가 실수나 악의적으로 은폐되는 경우를 방어하기 위해 RFC 3540에서 추가된 필드</td>\n</tr>\n<tr>\n<td>ECE</td>\n<td><code class=\"language-text\">ECN Echo</code> 플래그. 해당 필드가 1이면서, SYN 플래그가 1일 때는 ECN을 사용한다고 상대방에게 알리는 의미. SYN 플래그가 0이라면 네트워크가 혼잡하니 세그먼트 윈도우의 크기를 줄여달라는 요청의 의미이다.</td>\n</tr>\n<tr>\n<td>CWR</td>\n<td>이미 ECE 플래그를 받아서, 전송하는 세그먼트 윈도우의 크기를 줄였다는 의미이다.</td>\n</tr>\n</tbody>\n</table>\n<p>ECN은 이 포스팅의 주제와는 또 다른 이야기이므로 궁금하신 분들은 MR.ZERO님의 <a href=\"https://mr-zero.tistory.com/20\" target=\"_blank\" rel=\"nofollow\">Explict Congestion Notification?</a> 블로그를 참고하길 바란다.</p>\n<h3 id=\"window-size\" style=\"position:relative;\">Window Size<a href=\"#window-size\" aria-label=\"window size permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/c7bb6/header-window-size.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeElEQVR42k2Q646bQAxGef8na7VttVUS2CWBAMNlhvs1AUL21KGq1B9H47Hsz/5seaFGVxPjeKNuOrp+ZJC4HybabkCbAvd8weTlniurZq/5x6umqluatud2n7FsN8SLDKnOUYlGpRo/UFzDmCjOiJIMnVekWYGSfyD5IIqxHZePzwuhSiSnOHvBLmzFab5PXx8b87IKi0zrZMuJZX3sU3UuYjLQVDXjvDJJXd0PtFJz354s/2FFsSYTW+N020VGoR9edqRBbIQqxj+f0b9/YZwT5afDnCjucSRvxJLFLKkguTVVfzd8WSqblqJuuEYKlcldi5JcNspf9zGGLfLZbje2vuNelZjAp1Qi2tQsbcPctTwCD8sLEjK5wyY2ZxGYyxrj++RBQK/NThsnDB8nJmGwD+i3b5gf3yl+vtEd3lk9l9V1WLMEKy0q6jDiS2xtlwtPz2OVuDscdvrjcac5nuhsm95x6E429eHIfPH4CkKe10D6xEFZ8gfP2wrLCGEJRgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header window size\" title=\"\" src=\"/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/6af66/header-window-size.png\" srcset=\"/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/69538/header-window-size.png 160w,\n/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/72799/header-window-size.png 320w,\n/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/6af66/header-window-size.png 640w,\n/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/d9199/header-window-size.png 960w,\n/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/21b4d/header-window-size.png 1280w,\n/static/e52f571cc6bb5aef8d85fb2f7f95d1e9/c7bb6/header-window-size.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>윈도우 사이즈 필드에는 한번에 전송할 수 있는 데이터의 양을 의미하는 값을 담는다. <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>=</mo><mn>65535</mn></mrow><annotation encoding=\"application/x-tex\">2^{16} = 65535</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">16</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">65535</span></span></span></span></span> 만큼의 값을 표현할 수 있고 단위는 바이트이므로, 윈도우의 최대 크기는 <code class=\"language-text\">64KB</code>라는 말이 된다.</p>\n<p>하지만 이 최대 크기는 옛날 옛적에 생긴 기준이라 요즘같이 대용량 고속 통신 환경에는 맞지 않는 경우도 있다. 그래서 비트를 왼쪽으로 시프트하는 방식으로 윈도우 사이즈의 최대 크기를 키울 수 있는 방식도 사용하고 있으며, 몇 번 시프트할 지는 옵션 필드의 <code class=\"language-text\">WSCALE</code> 필드를 사용하여 표기한다.</p>\n<h3 id=\"checksum\" style=\"position:relative;\">Checksum<a href=\"#checksum\" aria-label=\"checksum permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6bfb87b2db56498f2d05a0b7d8ae7525/c7bb6/header-checksum.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABdklEQVR42jWP2WrbQBhG9f7PU0qhpSm0pstVHJvUsSzZ2kf7LmtxdPproBcHZqRvG8NyFCrv6bqBoqypm45Wzk3bU9UtKk45mxfiJNPfsrzUmv9smryoKKuG4T5ivJ4dLDcmVAleoPBChX3zuDo+rh/hBhEqyYniTP+/uYHm9WRyOl9wvJCbaE3bIS8rDD9MdPu8PBinWZikrZaVPdO86FYVJ/hBKLqUfrhrCjFXdaM9m24UpnnGcH2l2zsRtf2gaSSsbjttcDwf6+oQRqJTMUma6ZItdBDGceIuDMIk4bIwRUUxWZqSClf7ii8hSgJSWZTIujIvmKX9scKyrvRiVhKcFiX3bd32OmESjIsvrb9+wM9vLH92LL+/k3/+QP7lI8PuK/3uie7pE+3fI21WUIcR4cUismxiKS/9gHELznImeZURpjnF9cb69sa7eWY1TebTifr5WdO+7GmEcr+nPhxojkfqlwOF3EfxrLbNu2WJ1+SRJPwD5hELaAgKsR8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header checksum\" title=\"\" src=\"/static/6bfb87b2db56498f2d05a0b7d8ae7525/6af66/header-checksum.png\" srcset=\"/static/6bfb87b2db56498f2d05a0b7d8ae7525/69538/header-checksum.png 160w,\n/static/6bfb87b2db56498f2d05a0b7d8ae7525/72799/header-checksum.png 320w,\n/static/6bfb87b2db56498f2d05a0b7d8ae7525/6af66/header-checksum.png 640w,\n/static/6bfb87b2db56498f2d05a0b7d8ae7525/d9199/header-checksum.png 960w,\n/static/6bfb87b2db56498f2d05a0b7d8ae7525/21b4d/header-checksum.png 1280w,\n/static/6bfb87b2db56498f2d05a0b7d8ae7525/c7bb6/header-checksum.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>체크섬은 데이터를 송신하는 중에 발생할 수 있는 오류를 검출하기 위한 값이다.</p>\n<p>TCP의 체크섬은 전송할 데이터를 16 Bits씩 나눠서 차례대로 더해가는 방법으로 생성한다. 방식은 단순하지만 16 bits의 덧셈을 그대로 보자니 숫자가 너무 길어질 것이 뻔하므로 간단하게 반토막인 8 bits로만 한번 해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">  11010101\n+ 10110100\n-----------\n 110001001</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>앗, 8 bits인 두 수를 더 했더니 자리 수가 하나 올라가서 9 bits가 되었다. 이렇게 자리 수가 넘쳐버리면 체크섬 필드에 담을 수 없다.</p>\n<p>이렇게 두 개의 수를 더했을 때 자리 수가 하나 올라간 부분을 캐리(Carry)라고 하는데, 계산 결과에서 이 부분만 떼어내서 다시 계산 결과에 더해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">  10001001\n+        1 (방금 해에서 넘친 부분)\n-----------\n  10001010</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 방식을 Warp Around라고 한다. 이제 마지막 계산 결과에 1의 보수를 취해주면 체크섬이 된다. 1의 보수라고 하면 뭐지 싶겠지만 그냥 비트를 반전하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">10001010\n01110101 (1의 보수를 취한 모습)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이제 <code class=\"language-text\">01110101</code>이 이 데이터의 체크섬이 되는 것이다. 이 예제에서는 8 bits를 가지고 진행했기 때문에 8 bits짜리 체크섬이 나왔지만, 실제로는 16 bits 단위로 데이터를 잘라서 이 과정을 진행하기 때문에 16 bits인 체크섬 필드에 딱 들어맞는 이쁜 값이 나온다.</p>\n<p>수신 측은 데이터를 받으면 위의 과정을 동일하게 거치되 1의 보수를 취하지 않은 값인 <code class=\"language-text\">10001010</code>까지만 만든 다음, 이 값과 송신 측이 보낸 체크섬을 더해서 모든 비트가 1이라면 이 데이터가 정상이라고 판단할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">  10001010\n+ 01110101\n-----------\n  11111111</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 이 값에 0이 하나라도 있으면 송신 측이 보낸 데이터에 뭔가 변조가 있었음을 알 수 있다.</p>\n<h3 id=\"urgent-pointer\" style=\"position:relative;\">Urgent Pointer<a href=\"#urgent-pointer\" aria-label=\"urgent pointer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/555aeadb010efbf3bcfcac8043546218/c7bb6/header-urgent.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABfklEQVR42jWPW2vcMBSE/f//TUMfmlBKIJRCCElzIdmu7V3LV1m25Kts2WtnciTow4eENGdmjhcyDi41xnGCajp0/YiB7v2g0XYDeFnh6AcoRe3eatk4zX+sRqoWTdtjmg289yNDGJfIuUCScSQ5xylKcGYp4rRAnBXgQqIoa/cfxZnj/eDjcAzAkhwRaf0Tg2xaeGkuXPp62WCWlVgoraOWGst6cam8FEiznHQV9DQ7FA23Xe9mrM4Qy7rCi1NO6RVGPTmTkegHu86AltZgcYLwHCEvrE5A1BKTWcjUuDBrOBP2zRq7hnalmhIr1eBMBgkN86qGkIoMFBQ1Xo3BRltcLtRaa3DSVNR4praG/iwL4YVRhiLJsNGQIQNDBuXpBBFF6HmJnlp1jEHfXmP+/Qv67ifEj2+orq8gb75joPft/g7bn1vsLw/w8kpCsRifvo8tCLCHIVa6d6+vjv7tzdE8PaF//ovh5RkdnerxEcvHBz4DH7t/xP7vgJ1zfAE0ggsWfcStyAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header urgent\" title=\"\" src=\"/static/555aeadb010efbf3bcfcac8043546218/6af66/header-urgent.png\" srcset=\"/static/555aeadb010efbf3bcfcac8043546218/69538/header-urgent.png 160w,\n/static/555aeadb010efbf3bcfcac8043546218/72799/header-urgent.png 320w,\n/static/555aeadb010efbf3bcfcac8043546218/6af66/header-urgent.png 640w,\n/static/555aeadb010efbf3bcfcac8043546218/d9199/header-urgent.png 960w,\n/static/555aeadb010efbf3bcfcac8043546218/21b4d/header-urgent.png 1280w,\n/static/555aeadb010efbf3bcfcac8043546218/c7bb6/header-urgent.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>말 그대로 긴급 포인터이다. URG 플래그가 1이라면 수신 측은 이 포인터가 가르키고 있는 데이터를 우선 처리한다.</p>\n<h3 id=\"options\" style=\"position:relative;\">Options<a href=\"#options\" aria-label=\"options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d6d70f7f103f663d79397716f4598afb/c7bb6/header-options.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABfElEQVR42jWRbW/TQBCE/f//D7QqUFSoQJQUitQaN67T+P1sx+92YjtxHtYHfBjN6nZ2du7OcFyFynu6bk9R1tRNRyt10/ZUdYtKMtb2C0m602e7vNSa/1g0eVFRVg37w4Bhrl0cLyFSKX6o8CPFZuvz6gZ4QYwXxqg0J052ur/1Qg3TsrHWL7h+xFa09sYlLyuMIEr19ul4YhgnwSjbaknZM05HvVUlKUEYiS6j3x80Chmu6kbPLLpBME4ThhcoYpXJlXvattPcCNcirsTY83wcZ0MUxcSxIhXT/WLa7zUPw8hBli71KGF0QrUr2IlBKgavQYgv14/zglRSJEVJ0TSM88wJOAp6SaOkn4n+cJoZ5rPGKLXhePJGpsl5YzMtcNakP1ZkD/d0lklrPdGYj7S/n+ifTc1qdUdy/53s54r68dffOdtiCj2MqJCf/XYLN1ecv36CLzecbj/Svr+gEXQfLjWad2+FL+ivL3WvunrD9Pka/s0gM/PDHX8A7lcIgtr6L4IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"header options\" title=\"\" src=\"/static/d6d70f7f103f663d79397716f4598afb/6af66/header-options.png\" srcset=\"/static/d6d70f7f103f663d79397716f4598afb/69538/header-options.png 160w,\n/static/d6d70f7f103f663d79397716f4598afb/72799/header-options.png 320w,\n/static/d6d70f7f103f663d79397716f4598afb/6af66/header-options.png 640w,\n/static/d6d70f7f103f663d79397716f4598afb/d9199/header-options.png 960w,\n/static/d6d70f7f103f663d79397716f4598afb/21b4d/header-options.png 1280w,\n/static/d6d70f7f103f663d79397716f4598afb/c7bb6/header-options.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>옵션 필드는 TCP의 기능을 확장할 때 사용하는 필드들이며, 이 필드는 크기가 고정된 것이 아니라 가변적이다. 그래서 수신 측이 어디까지가 헤더고 어디서부터 데이터인지 알기 위해 위에서 설명한 데이터 오프셋 필드를 사용하는 것이다.</p>\n<p>데이터 오프셋 필드는 20 - 60 bytes의 값을 표현할 수 있다고 했는데, 아무런 옵션도 사용하지 않은 헤더의 길이, 즉 Source Port 필드부터 Urgent Pointer 필드까지의 길이가 20 bytes이고, 옵션을 모두 사용했을 때 옵션 필드의 최대 길이가 40 bytes이기 때문이다.</p>\n<p>만약 데이터 오프셋 필드의 값이 5, 즉 20 bytes보다 크지만 TCP의 옵션을 하나도 사용하고 있지 않다면, 초과한 bytes 만큼 이 필드를 0으로 채워줘야 수신 측이 헤더의 크기를 올바르게 측정할 수 있다.</p>\n<p>대표적인 옵션으로는 윈도우 사이즈의 최대 값 표현을 확장할 수 있는 <code class=\"language-text\">WSCALE</code>, Selective Repeat 방식을 사용하기 위한 <code class=\"language-text\">SACK</code> 등이 있으며, 이외에도 거의 30개 정도의 옵션을 사용할 수 있기 때문에 이 친구들을 하나하나 설명하는 것은 조금 힘들 것 같다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이렇게 간략한 TCP의 개요와 헤더 구조에 대해서 알아보았다. 사실 이 내용들은 TCP라는 놈의 껍데기 한 겹 정도에 불과한 내용이지만, 이게 거의 50년 묵은 프로토콜이다보니 포스팅 하나로 정리하기에는 내용이 굉장히 방대하다.</p>\n<p>서두에서 이야기 했듯이 TCP나 IP 같은 프로토콜은 소켓 프로그래밍이라도 하지 않는 이상 직접적으로 마주할 기회가 흔치 않은 것이 사실이다.</p>\n<p>하지만 직접 마주하지 않더라도 필자는 매일 HTTP를 사용하는 웹 개발자이기 때문에, 자신이 매일 사용하는 프로토콜이 어떤 식으로 굴러가는 지 정도는 알고 있는 것이 좋다고 생각한다.</p>\n<p>TCP가 커널에 어떻게 구현되어있는지 직접 확인해보고싶은 분은 깃허브에 올라가있는 리눅스 소스인 <a href=\"https://github.com/torvalds/linux/tree/master/net/ipv4\" target=\"_blank\" rel=\"nofollow\">linux/net/ipv4</a> 안에 있는 구현체들을 통해 확인해볼 수 있다. <small>(리눅스 소스 자체가 너무 커서 클론 받는 데 한 세월이라는 게 함정)</small></p>\n<p>혹시 자신이 직접 TCP 통신 과정을 확인해보고 싶은 분은 간단한 <a href=\"https://github.com/evan-moon/simple-tcp-example\" target=\"_blank\" rel=\"nofollow\">TCP 예제 프로그램</a>과 <code class=\"language-text\">tcpdump</code>, <code class=\"language-text\">netstat</code> 등의 유틸리티를 통해 확인해볼 수 있다. <code class=\"language-text\">tcpdump</code>를 클라이언와 서버가 주고 받는 패킷의 내용을 확인해보고, <code class=\"language-text\">netstat</code>을 사용하여 클라이언트와 서버의 TCP 상태를 확인해볼 수도 있다.</p>\n<p>다음 포스팅에서는 TCP의 핸드쉐이크나 흐름 제어, 혼잡 제어 기법에 대해서 한번 다뤄보도록 하겠다.</p>\n<p>이상으로 TCP의 헤더에는 어떤 정보들이 담겨있는걸까? 포스팅을 마친다.</p>","fields":{"slug":"20191110-header-of-tcp","path":"/2019/11/10/header-of-tcp/","lang":"ko"},"frontmatter":{"title":"TCP의 헤더에는 어떤 정보들이 담겨있는걸까?","subTitle":"패킷 교환부터 체크섬까지, TCP 헤더의 모든 것","date":"Nov 10, 2019","categories":["프로그래밍","네트워크"],"tags":["TCP","헤더","ECN","TCP 플래그","SYN","ACK","TCP Header","TCP 헤더","패킷 교환","TCP Checksum","TCP 체크섬"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#78a8a8","images":{"fallback":{"src":"/static/08849868fcdd6a15a88abb391dccacf7/d803c/thumbnail.png","srcSet":"/static/08849868fcdd6a15a88abb391dccacf7/8c230/thumbnail.png 80w,\n/static/08849868fcdd6a15a88abb391dccacf7/23e25/thumbnail.png 160w,\n/static/08849868fcdd6a15a88abb391dccacf7/d803c/thumbnail.png 320w,\n/static/08849868fcdd6a15a88abb391dccacf7/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/08849868fcdd6a15a88abb391dccacf7/3e5ca/thumbnail.webp 80w,\n/static/08849868fcdd6a15a88abb391dccacf7/b72f1/thumbnail.webp 160w,\n/static/08849868fcdd6a15a88abb391dccacf7/fc5c5/thumbnail.webp 320w,\n/static/08849868fcdd6a15a88abb391dccacf7/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#78a8a8","images":{"fallback":{"src":"/static/08849868fcdd6a15a88abb391dccacf7/3fbb4/thumbnail.png","srcSet":"/static/08849868fcdd6a15a88abb391dccacf7/61846/thumbnail.png 750w,\n/static/08849868fcdd6a15a88abb391dccacf7/d5395/thumbnail.png 1080w,\n/static/08849868fcdd6a15a88abb391dccacf7/cc835/thumbnail.png 1366w,\n/static/08849868fcdd6a15a88abb391dccacf7/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/08849868fcdd6a15a88abb391dccacf7/6858b/thumbnail.webp 750w,\n/static/08849868fcdd6a15a88abb391dccacf7/f5547/thumbnail.webp 1080w,\n/static/08849868fcdd6a15a88abb391dccacf7/29310/thumbnail.webp 1366w,\n/static/08849868fcdd6a15a88abb391dccacf7/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a68402da-72bc-542c-8f78-31e89e80ec7c","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%88%98%ED%95%99%EC%A0%81%EC%9D%B8-%EC%82%AC%EA%B3%A0-%EB%B0%A9%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%AC%B8%EC%A0%9C%EB%A5%BC-%EB%8B%A8%EC%88%9C%ED%99%94%ED%95%98%EC%9E%90\">수학적인 사고 방식으로 문제를 단순화하자</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%98%A4%EB%8A%98%EB%A1%9C%EB%B6%80%ED%84%B0-100%EC%96%B5%EC%9D%BC-%ED%9B%84%EB%8A%94-%EB%AC%B4%EC%8A%A8-%EC%9A%94%EC%9D%BC%EC%9D%BC%EA%B9%8C\">오늘로부터 100억일 후는 무슨 요일일까?</a></p>\n<ul>\n<li><a href=\"#10100000000%EC%9D%BC-%ED%9B%84%EC%9D%98-%EC%9A%94%EC%9D%BC%EB%8F%84-%EA%B5%AC%ED%95%B4%EB%B3%B4%EC%9E%90\"><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후의 요일도 구해보자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9A%95%EC%8B%A4-%EB%B0%94%EB%8B%A5%EC%97%90-%ED%83%80%EC%9D%BC-%EA%B9%94%EA%B8%B0\">욕실 바닥에 타일 깔기</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%9C-%EB%B6%93-%EA%B7%B8%EB%A6%AC%EA%B8%B0-%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%EC%9D%98-%EB%8B%A4%EB%A6%AC-%EC%A6%9D%EB%AA%85%ED%95%98%EA%B8%B0\">한 붓 그리기, 쾨니히스베르크의 다리 증명하기</a></p>\n<ul>\n<li><a href=\"#%EC%B0%A8%EC%88%98%EC%9D%98-%ED%99%80%EC%A7%9D-%EC%97%AC%EB%B6%80%EC%97%90-%EC%A7%91%EC%A4%91%ED%95%98%EC%9E%90\">차수의 홀짝 여부에 집중하자</a></li>\n<li><a href=\"#%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%99%80-%EB%8F%84%EC%B0%A9%EC%A7%80%EA%B0%80-%EA%B0%99%EC%9D%80-%EA%B2%BD%EC%9A%B0\">출발지와 도착지가 같은 경우</a></li>\n<li><a href=\"#%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%99%80-%EB%8F%84%EC%B0%A9%EC%A7%80%EA%B0%80-%EB%8B%A4%EB%A5%B8-%EA%B2%BD%EC%9A%B0\">출발지와 도착지가 다른 경우</a></li>\n<li><a href=\"#%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%EC%9D%98-%EB%8B%A4%EB%A6%AC%EB%8A%94-%EC%99%9C-%ED%95%9C-%EB%B6%93-%EA%B7%B8%EB%A6%AC%EA%B8%B0%EA%B0%80-%EB%B6%88%EA%B0%80%EB%8A%A5%ED%95%A0%EA%B9%8C\">쾨니히스베르크의 다리는 왜 한 붓 그리기가 불가능할까?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"최근 많은 IT 기업들이 개발자를 채용할 때 코딩 테스트를 시행하고 있다. 회사마다 어떤 스타일의 문제를 출제하는지 차이는 있지만, 대부분 간단한 알고리즘 풀이 또는 Codility나 프로그래머스와 같은 사이트처럼 실무에서 겪을 만한 상황을 살짝 섞어놓는 느낌의 문제를 선호하는 것 같다. 이런 문제들의 특성 상 CS 기초와 문제 분석 능력, 직감 등을 다양하게 사용하여 해결해야 하기 때문에 단기간 연습한다고 실력이 확 느는 것은 아닌 것 같다. 이런 문제들은 우리에게 단순히 “너 이 알고리즘 알아?”라고 물어보는 것이 아니라 “어…","html":"<p>최근 많은 IT 기업들이 개발자를 채용할 때 코딩 테스트를 시행하고 있다. 회사마다 어떤 스타일의 문제를 출제하는지 차이는 있지만, 대부분 간단한 알고리즘 풀이 또는 Codility나 프로그래머스와 같은 사이트처럼 실무에서 겪을 만한 상황을 살짝 섞어놓는 느낌의 문제를 선호하는 것 같다.</p>\n<p>이런 문제들의 특성 상 CS 기초와 문제 분석 능력, 직감 등을 다양하게 사용하여 해결해야 하기 때문에 단기간 연습한다고 실력이 확 느는 것은 아닌 것 같다.</p>\n<p>이런 문제들은 우리에게 단순히 “너 이 알고리즘 알아?”라고 물어보는 것이 아니라 “어떤 방법을 사용해서 풀어볼래?”라고 물어본다.</p>\n<p>사실 자료구조나 알고리즘 자체는 보면 공부하고 몇 번 구현해보면 어느 정도 숙달될 수 있지만, 이렇게 문제를 분석하고 단순화해서 적합한 방법을 선택할 수 있는 능력은 단순히 공부로 만들어 낼 수 있는 종류의 것은 아닌 것 같다.</p>\n<p>필자는 최근 취업 준비를 하면서 이런 문제를 종종 풀어보고 있는데, 확실히 CS 기초도 부족하긴 하지만, 문제를 분석하고 좋은 방법을 선택할 수 있는 능력이 많이 부족함을 느꼈다.</p>\n<p>그래서 자료구조나 알고리즘을 처음부터 다시 공부하면서, 동시에 문제 해결 능력을 기르기 위한 방법이 어떤 것이 있을지 고민해보기 시작했다.</p>\n<h2 id=\"수학적인-사고-방식으로-문제를-단순화하자\" style=\"position:relative;\">수학적인 사고 방식으로 문제를 단순화하자<a href=\"#%EC%88%98%ED%95%99%EC%A0%81%EC%9D%B8-%EC%82%AC%EA%B3%A0-%EB%B0%A9%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%AC%B8%EC%A0%9C%EB%A5%BC-%EB%8B%A8%EC%88%9C%ED%99%94%ED%95%98%EC%9E%90\" aria-label=\"수학적인 사고 방식으로 문제를 단순화하자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 최근 면접에 거하게 털리고 나서 CS 기초나 자바스크립트 기초를 처음부터 다시 공부하기 시작했는데, 막상 이렇게 공부한 지식을 가지고 코딩 테스트 문제를 한번 풀어보려고 했더니, 생각처럼 잘 되지 않았다.</p>\n<p>대부분 알고 있겠지만, 많은 코딩 테스트 문제은행 서비스에서는 문제를 해결하고 나면 다른 사람들은 이 문제를 어떤 방식으로 해결했는지도 함께 보여준다. 필자같은 경우는 사실 이게 궁금해서 문제를 푸는 것도 있는 것 같다.</p>\n<p>그러던 와중에 대부분의 사람들이 완전탐색으로 풀었던 문제를 어떤 굇수 분이 단순한 산수 연산 몇 번으로 풀어내는 것을 본 적이 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdXJvYQtD//EABsQAAIDAAMAAAAAAAAAAAAAAAISAQMEACEi/9oACAEBAAEFAmQdVb6cwLXBCPK59jHX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHhAAAgICAgMAAAAAAAAAAAAAAREAAhIhA0EQIlH/2gAIAQEABj8CFQOvs9aZE1cV03MeWux2m5a9hi9Dx//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVFh/9oACAEBAAE/ISuLQrA5KXGe1B9i6eVB5B7bjBiclySilNE2ns//2gAMAwEAAgADAAAAEEMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFBgf/aAAgBAQABPxAgmKdw9RyWBw8lSp3hjsCIHRpO/c0cu0AeE9jHNVpcN8qcWrMuglWJn//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"genius\" title=\"\" src=\"/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg\" srcset=\"/static/27a2afda0a9a543f086498edf0c8c59a/0913d/genius.jpg 160w,\n/static/27a2afda0a9a543f086498edf0c8c59a/cb69c/genius.jpg 320w,\n/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg 350w\" sizes=\"(max-width: 350px) 100vw, 350px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>역시 세상은 넓고 굇수는 많다</small>\n</center>\n<p>당연히 필자도 해당 문제를 완전탐색으로 풀었고 그 방법 밖에 없을 것이라고 생각했지만, 그 굇수분은 문제의 패턴을 찾아내어 문제를 단순화 시킨 것이다.</p>\n<p>물론 조금 난해한 감이 있어서 실무에서 사용하기에는 조금 이견이 갈릴 수 있는 코드이긴 했지만, 대부분의 사람들이 완전탐색으로 풀었던 복잡한 문제를 단순한 식 몇개로 풀어냈다는 사실이 충격이었다.</p>\n<p>이때 필자가 느낀 점은 바로 수학적인 사고에 대한 필요성이었다. 물론 알고리즘 역시 이런 수학적인 사고를 바탕으로 효율적인 해결 방식을 일반화한 것이긴 하지만, 필자가 원했던 것은 좀 더 근본적인 문제 해결 능력이었다.</p>\n<p>물론 수학적인 사고라고 해서 문제를 읽고 막 복잡한 식을 세우는 것이 아니다. 자연어로 이루어진 문제를 분석하고, 해결 가능한 수준으로 나누고, 패턴을 찾아내는 과정 또한 수학적인 사고에서 비롯된다. 애초에 수학 자체가 복잡한 문제를 단순화하고 패턴을 찾아내어 일반화하는 학문이다.</p>\n<p>그리고 <a href=\"/2019/07/17/programmer-with-math/\">개발자는 수학을 잘해야할까?</a> 포스팅에서 한번 이야기한 적 있지만, 필자가 이야기하고싶은 수학은 어려운 이론이나 공식을 말하는 것이 아니다.</p>\n<p>개인적인 생각이기는 하지만, 필자는 “수의 성질”을 이해하는 것이 제일 중요하다고 생각했다. 예를 들면 홀수에 1을 더하면 짝수가 된다던가, 1부터 100까지의 합을 구할 때 <code class=\"language-text\">101 * 100 / 2</code>를 하면 된다던가와 같은 것들이 그렇다.</p>\n<p>그런 이유로 최근 <a href=\"http://www.yes24.com/Product/goods/61791203\" target=\"_blank\" rel=\"nofollow\">프로그래머, 수학으로 생각하라</a>라는 책을 읽게 되었는데, 이 책의 초입부부터 재미있는 문제 해결 방법이 몇개 나와서 그 문제들과 해결 방법에 대해서 공유를 해볼까 한다.</p>\n<h2 id=\"오늘로부터-100억일-후는-무슨-요일일까\" style=\"position:relative;\">오늘로부터 100억일 후는 무슨 요일일까?<a href=\"#%EC%98%A4%EB%8A%98%EB%A1%9C%EB%B6%80%ED%84%B0-100%EC%96%B5%EC%9D%BC-%ED%9B%84%EB%8A%94-%EB%AC%B4%EC%8A%A8-%EC%9A%94%EC%9D%BC%EC%9D%BC%EA%B9%8C\" aria-label=\"오늘로부터 100억일 후는 무슨 요일일까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>일 후의 요일을 구하는 문제는 수학적인 사고를 필요로 하는 대표적인 문제 중 하나이다.</p>\n<p>게다가 굳이 코딩 테스트까지 가지 않고 일상 속에서 비즈니스 로직만 만지고 있더라도 꽤나 자주 접할 수 있는 문제이다. 그래서 워밍업으로 상대적으로 익숙한 요일 구하기 문제를 먼저 살펴보려고 한다.</p>\n<blockquote>\n<p>필자가 이 글을 작성하고 있는 2019년 10월 29일은 “화요일”이다. 그럼 오늘로부터 100억일 후는 과연 무슨 요일일까?</p>\n</blockquote>\n<p>음, 단순하게 생각해보면 오늘은 화요일이니까 1일 후는 수요일, 2일 후는 목요일과 같은 순차적인 방법으로 접근할 수도 있겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'일'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'월'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'화'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'목'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'금'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'토'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> shift <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  shift <span class=\"token operator\">=</span> i <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ntoday <span class=\"token operator\">+=</span> shift<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">></span> week<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  today <span class=\"token operator\">-=</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>today<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">토\ncalc: 60948.138ms</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>아무리 요즘 컴퓨터가 연산 능력도 좋고 무보수로 일해주는 SCV라고 하지만 100억회를 반복하는 루프를 계산하게 하는 것은 너무나도 가혹한 처사이다. 이 알고리즘은 시간 복잡도가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>이기에, 루프만 돌았을 뿐인데도 수행 시간이 1분이 넘는다.</p>\n<p>이렇게 무식하게 풀어낼 수는 없으니, 다른 방법을 찾아야한다. 다행히 우리는 요일이 7일 마다 반복된다는 것을 알고 있다. 오늘이 화요일이라면 7일 후도 당연히 화요일이고, 14일 후도 화요일이다.</p>\n<p>즉, 요일이 반복된다는 “주기성”이 존재한다는 것이다. 오늘부터 7의 배수만큼 지난 날은 무조건 화요일이라는 패턴을 찾았다면 그 다음부터는 간단해진다.</p>\n<p>어떤 수를 1씩 증가시켜가면서 계속 7로 나누면 0 - 6이 순차적으로 나타나는 주기성이 있으므로, 배수를 구할 때와 마찬가지로 100억을 7로 나누고 그 나머지를 확인하면 되기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'일'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'월'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'화'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'목'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'금'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'토'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> shift <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\ntoday <span class=\"token operator\">+=</span> shift<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">></span> week<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  today <span class=\"token operator\">-=</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>today<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">토\ncalc: 0.156ms</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>수행 시간이 <code class=\"language-text\">60000ms</code>에서 <code class=\"language-text\">0.156ms</code>로 줄었다. 이렇게 문제에서 주기성을 찾아내고, 나머지의 주기성과 연관지을 수만 있다면, 완전탐색을 하지 않고도 나머지를 사용하여 문제를 가볍게 풀 수 있다.</p>\n<h3 id=\"10100000000일-후의-요일도-구해보자\" style=\"position:relative;\"><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후의 요일도 구해보자<a href=\"#10100000000%EC%9D%BC-%ED%9B%84%EC%9D%98-%EC%9A%94%EC%9D%BC%EB%8F%84-%EA%B5%AC%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"10100000000일 후의 요일도 구해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>자, 그럼 여기서 한번 더 나아가보자. 이런 방법으로 우리가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>일 이후의 요일도 구할 수 있을까? 10의 1억승을 뭐라고 부르는지는 모르겠지만, 관측 가능한 우주의 모든 원자 개수가 약 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>78</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{78}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">78</span></span></span></span></span></span></span></span></span></span></span></span></span>개 정도라고 하니 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>이 어마무시하게 큰 수인 것은 분명하다.</p>\n<p>당연히 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>은 자바스크립트의 <code class=\"language-text\">Number.MAX_SAFE_INTEGER</code> 값을 아득히 넘어서는 숫자이기 때문에 위와 같은 방식으로는 계산이 불가능 하다. 여기서부터는 컴퓨터한테 계산을 맡기는 것보다는 문제를 단순화하고 주기성을 찾아내는 일이 더 중요해진다.</p>\n<p>오늘은 10월 29일 화요일이니 오늘부터 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>일 후의 요일을 쭉쭉 살펴보도록 하자. 방금 예제로 만들었던 로직을 활용하여 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>30</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{30}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">30</span></span></span></span></span></span></span></span></span></span></span></span></span>일 이후까지 살펴보니, 대략 다음과 같은 패턴이 있다는 것을 알 수 있었다. 모든 결과를 적으면 너무 표가 길어지니, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span></span></span></span></span></span></span></span></span>일 이후의 결과만 기재하도록 하겠다.</p>\n<table>\n<thead>\n<tr>\n<th>일자</th>\n<th>요일</th>\n<th>인덱스</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>0</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>수</td>\n<td>3</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>1</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>금</td>\n<td>5</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>목</td>\n<td>4</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>월</td>\n<td>1</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>토</td>\n<td>6</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>일</td>\n<td>0</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>6</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>수</td>\n<td>3</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>7</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>금</td>\n<td>5</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>8</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>목</td>\n<td>4</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>월</td>\n<td>1</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>10</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>토</td>\n<td>6</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>11</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{11}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>일</td>\n<td>0</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후</td>\n<td>수</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p>필자는 이 과정에서 두 가지 정보를 얻을 수 있었다. 요일이 <code class=\"language-text\">수, 금, 목, 월, 토, 일</code>의 순서로 계속 반복되고 있다는 것과 오늘 요일인 <code class=\"language-text\">화요일</code>이 등장하지 않는다는 것이다.</p>\n<p>즉, 10의 지수가 6 증가할 때마다 같은 요일이 돌아온다. 바꿔말하면 0의 개수가 6개씩 늘어날 때마다 같은 요일이 돌아온다는 말과 같다.</p>\n<p>그렇다면 결국 10의 지수를 6으로 나눈 나머지 값을 사용하여 방금 전과 동일한 방법으로 요일을 구할 수 있다는 말이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'금'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'목'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'월'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'토'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'일'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> exp <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>exp <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">토</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>비록 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>이라는 어마무시한 수를 컴퓨터가 담아낼 수 없기 때문에 직접 계산할 수는 없지만, 지수의 증가로 인한 요일의 주기를 파악함으로써 상상도 안가는 먼 미래의 요일을 구할 수 있게 되었다. <small>(사실 이걸 구하는 게 뭔 의미가 있겠냐만…)</small></p>\n<p>만약 위에서 요일을 구했던 정직한 방법으로 이 문제를 풀려고 했다면 불가능했겠지만, 문제를 분석하고 주기성을 찾아냄으로써 어찌어찌 풀 수는 있었다.</p>\n<h2 id=\"욕실-바닥에-타일-깔기\" style=\"position:relative;\">욕실 바닥에 타일 깔기<a href=\"#%EC%9A%95%EC%8B%A4-%EB%B0%94%EB%8B%A5%EC%97%90-%ED%83%80%EC%9D%BC-%EA%B9%94%EA%B8%B0\" aria-label=\"욕실 바닥에 타일 깔기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 방금 풀어보았던 요일 맞추기 문제처럼 눈에 띄게 일정한 주기를 가지고 반복되는 숫자를 찾아내는 문제는 익숙해지는데 그렇게 오랜 시간이 걸리지는 않는다.</p>\n<p>그러나 우리가 일상에서 겪는 대부분의 문제는 저렇게 패턴을 대놓고 보여주지 않는 경우가 많다.</p>\n<p>이때 필요한 것이 문제를 분석하고 패턴을 찾아내는 일이다. 사실 주기성이라는 수의 성질을 이용할 수 있다는 것의 진짜 의의는 바로 패턴을 만들고 찾아낼 수 있다는 것에 있다. 이번에는 그 패턴을 이용하여 유효성을 검사하는 문제이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/29114/tile.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVR42oWS6Q6CQAyEef93JAGWQ+SSK7Bc6xcaFjEa5kczYGemtDrmimVZuq7r+37btqZphmEw/+FYtq7rNE1t27qu6/s+FlEUlWV5IyaESk6apnS/dkDCMLwXk1nXdZIkRD12wLMsU0rdi5n2uQNZdsAmYz2OI7v4LZ7nmShyPM9TB5iCj8elKIo4ju0IJGmtv5OJRcBnQ6h5npPMe3zhVVWJAF9MTzEjYU8IMrqFUIMgwI5uXoqYGLYDh5ynYnJ9AE4Uc0omVU7wOeNFbCFnYxAyWYFUHqVb7oKX7M/5eQP+YXTItghHY39iLjEyxrwBlOx32KwMnxoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tile\" title=\"\" src=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/6af66/tile.png\" srcset=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/69538/tile.png 160w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/72799/tile.png 320w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/6af66/tile.png 640w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/d9199/tile.png 960w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/21b4d/tile.png 1280w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/29114/tile.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p>에반은 타일 시공 업체에 취직해서 첫 욕실 바닥 시공을 하게 되었다. 그러나 오늘이 첫 출근인 에반은 실수로 가로 1cm, 세로 2cm의 직사각형 타일들만 챙겨나와버린 상황.</p>\n<p>다행히 모든 욕실 바닥은 표준화가 되어있어서 가로 1cm, 세로 1cm의 정사각형 칸으로 이루어져있지만, 욕실 바닥 모양과 칸의 수는 모두 제각각이다.</p>\n<p>에반은 자신의 직사각형 타일로 욕실 바닥을 빠짐없이 메꿔야하지만, 욕실 바닥의 모양에 따라 작업이 불가능한 곳도 있다. 게다가 에반은 힘이 없어서 타일을 반으로 쪼개서 사용할 수도 없다.</p>\n<p>에반은 어떻게 작업의 가능 여부를 알 수 있을까?</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> floor <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 문제의 경우, 타일로 욕실 바닥을 채울 수 있는 경우의 수를 하나씩 검사해볼 수도 있겠지만, 그렇게 풀어내기에는 워낙 경우의 수가 많기도 하고 로직도 복잡해질 것이 뻔하다.</p>\n<p>그렇다면 욕실 바닥에 있는 칸의 개수를 세어보면 어떨까? 타일은 두 칸이 한 세트이기 때문에 만약 바닥 칸의 개수가 홀수라면 에반이 가진 타일로는 절대 바닥을 채울 수가 없을 것이다.</p>\n<p>하지만 이 문제에 나와있는 바닥의 총 칸 수는 슬프게도 짝수인 34칸이기도 하고, 어차피 바닥 칸의 홀짝 여부를 알아내는 것만으로 이 문제를 해결할 수는 없다. 조금 더 확실한 검증 방법이 없을까?</p>\n<p>이 문제는 주기성과 전혀 관련이 없을 것 같지만, 사실 굉장히 간단한 패턴이 숨어있다. 바로 에반이 가지고 있는 타일이 두 개의 칸으로 이루어져 있다는 것이다.</p>\n<p>조금 더 생각을 쉽게 하기 위해 타일과 바닥에 색을 칠해보도록 하자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1176e8fe1e16c230190fc00d483d8535/29114/tile-fill.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVR42oWSP8uCUBTG+1RBuIRTH8BFgsAo8BMINRTREmEtQUW4OQgROkZO/aGlaEqXtlpqESnTyuzPQxcCX5L3DMdzL/e553eea+wVjiAIzuez67rP5/N4PHqe94qOGPk8Hg+cRgHBbrc7HA6n08myLOR/xFAi67qey+VQd7vder2OnXw+rygKwYkUo+dkMmk2m4VCod/v12q1arWqqiqWo9Hoe3skdiaTqVQqjuMkEonhcLhYLCiKMgwD8/u+b9s28m/x9Xq93W6yLEOJIQVByGaz8CyZTEqShPnj8fhsNiMIwSdC2J1OB7TQl0ol1NCUy+XBYNBqtQCvadp2uyUC0zSXy2UIu1gswicgpNPp+Xy+Xq9Zlh2PxxDzPI/T+/2enIQdHMeFxIj7/X65XECBAo+Ei2ia7vV6kAF7Op0S7NVqhZqQx/54QIzFhKlUCgiNRoNhGKDCOdLA+8RvMflVNpuNKIrojydst9tk8wv4df4NB4UwbmGxoHcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tile fill\" title=\"\" src=\"/static/1176e8fe1e16c230190fc00d483d8535/6af66/tile-fill.png\" srcset=\"/static/1176e8fe1e16c230190fc00d483d8535/69538/tile-fill.png 160w,\n/static/1176e8fe1e16c230190fc00d483d8535/72799/tile-fill.png 320w,\n/static/1176e8fe1e16c230190fc00d483d8535/6af66/tile-fill.png 640w,\n/static/1176e8fe1e16c230190fc00d483d8535/d9199/tile-fill.png 960w,\n/static/1176e8fe1e16c230190fc00d483d8535/21b4d/tile-fill.png 1280w,\n/static/1176e8fe1e16c230190fc00d483d8535/29114/tile-fill.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이렇게 색을 칠하고나니 에반이 가지고 있는 타일은 검은색 1칸과 흰색 1칸으로 이루어진 두 칸짜리 타일이 되었다. 즉, 만약 에반이 가지고 있는 타일로 욕실의 바닥을 빈틈없이 메꿀 수 있다면, 욕실 바닥의 검은색 칸의 수와 흰색 칸의 수가 같아야 한다는 것이다.</p>\n<p>그러나 우리에게 주어진 욕실 바닥의 검은색 칸의 수는 <code class=\"language-text\">16</code>칸, 흰색 칸의 수는 <code class=\"language-text\">18</code>칸이다. 즉, 이 욕실 바닥은 에반이 가진 타일로는 채울 수 없는 바닥이라는 뜻이 된다.</p>\n<p>이 문제는 단순히 두 칸으로 이루어진 에반의 타일에 “검은색과 흰색이라는 주기성”을 부여하여 풀어나가는 문제이다. 에반의 타일이 가지고 있는 색의 주기와 욕실 바닥의 주기가 동일하지 않다면 그 욕실 바닥은 채울 수 없는 바닥이 되는 것이다.</p>\n<p>그럼 검은색 칸을 <code class=\"language-text\">-1</code>, 흰색 칸을 <code class=\"language-text\">1</code>으로 정의하고, 욕실 바닥의 해당 칸을 만날 때마다 <code class=\"language-text\">-1</code>과 <code class=\"language-text\">1</code>을 번갈아가며 더한 후 마지막에 값이 <code class=\"language-text\">0</code>이 되면 검은색 칸과 흰색 칸의 수가 동일하다고 생각할 수 있겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> floor <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> tileIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\nfloor<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">row<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  tileIndex <span class=\"token operator\">=</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  row<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">col</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>col <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      count <span class=\"token operator\">+=</span> tile<span class=\"token punctuation\">[</span>tileIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    tileIndex <span class=\"token operator\">=</span> tileIndex <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">검은 타일과 흰 타일의 개수 차이는 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 입니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">검은 타일과 흰 타일의 개수 차이는 2 입니다.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>각 <code class=\"language-text\">row</code>를 순회할 때 <code class=\"language-text\">tileIndex</code>를 다시 교정해주는 이유는, 이 행렬의 컬럼의 개수가 짝수이기 때문이다. 타일의 주기 또한 짝수이기에 다음 줄에서는 이전 줄의 가장 마지막에 있던 타일의 색이 다시 한번 나오게 된다. <small>(컬럼을 홀수로 만들면 이 과정이 필요없는데, 문제 잘못 만들었다…)</small></p>\n<p>문제만 보면 전혀 주기성과 관련이 없어보이는 문제였지만, 이렇게 문제 내에서 반복되는 패턴을 찾아내고 주기성을 부여함으로써 조금 더 간단한 방법으로 문제를 해결할 수 있다.</p>\n<h2 id=\"한-붓-그리기-쾨니히스베르크의-다리-증명하기\" style=\"position:relative;\">한 붓 그리기, 쾨니히스베르크의 다리 증명하기<a href=\"#%ED%95%9C-%EB%B6%93-%EA%B7%B8%EB%A6%AC%EA%B8%B0-%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%EC%9D%98-%EB%8B%A4%EB%A6%AC-%EC%A6%9D%EB%AA%85%ED%95%98%EA%B8%B0\" aria-label=\"한 붓 그리기 쾨니히스베르크의 다리 증명하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>쾨니히스베르크의 다리는 현대 위상 수학의 시작을 이끌었던 굉장히 유명한 문제로, 프로이센의 쾨니히스베르크<small>(현재 러시아 칼리닌그라드)</small>라는 도시에 있는 다리를 사용한 문제이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/01ceca6d071c0587b998af2d102b848b/2bef9/Konigsberg_bridges.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 69.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXklEQVR42jVUaVNiRxTlD08qyadYMZWUMy6Asi+yP/bH8sCRTXCMxIkBrLigDhiMohFHEHEpYoAH9El3T01X3er1nrud24opHQDIVxmNRqTX65Fut0s6nQ65uLggNzc35OzsjFSrVVKv18nV1RW5v78nl5eXfH19fc31Xl5eporJZMKAQGc8PDxgf38fiUQCfr8fXq8XhUIB2WwWoVAIgUCAn2cyGRiNRphMJuh0OhgMBtRqNbRaLaJgyAzw9fUV8XicKzkcDq4YDofh8/m4ktVqhdlsRj6fRyqV4m+YsPdarRbpdBoHBwdEMRwOOeDp6SlcLhcEQYDH4+GATqcTdrsdy8vLUKlU/I55y8CZd+xMrVZjYWEBs7OzsFgsRDEYDAgd2N3dhc1m46GweWZmBmaTEaFgAFI8hmg0wtfJhERTwYy6KagRb9/OQbm0iKXFeXz/3bdE0e/3Cctfo9GAKIrQ6/Vw0lDevPkGc/NK6IyriErv4XT74PQEEBLjcHm8EHwhWG0u/PDjz1BpTDDbvVCt6GkOhwNyfFxFqVRCJBKBRrNCc2XBLyob5tVGLGmsUOuYrMJk88HqkeCJ5OCLbcDup4aCKQjRPNYKFQTXfiOK1l2XSIkkLUAIAg3DQsN4pxXw05wa2pUluJ02rFqMWEvEEfS64PFHEE1m4bBbkUwmsVcp4696Dd37Nm5ZlQuVaxLJ/QmzsA6NTYR6NQJX/COUeicMDhEWdxRKow+LBh/0Tgli7gDJ91lsbOSwvV1E9fgEo5HM6oqnx95U8TclbkxKgongC8DmcCMsRrCezsHh9uLdghKLqhUagQh7MIu1zT18LH5ApVxCvf4Jd7c3+Pz5Fq32Iz6d//OFNu1OG5ucwBlKDQ/PZSwWRZwK24tiGLXTKjLFQ2xWmsgVfoXgF7FTOsB2uYbUTgPZ3xv4sNckvFNYlbe2tjjHJEnC+vo67wyWI0bYePzLWSwWQ1DKQ4gVuLeZnRr2anfoPL7ykMfycKpg/Tsej3F4eEjzsoFiscjncrnMwRkIM3Z0dES5+gdy2TQ6NCJZHoHx9+t4enqirdsjCvo3jKiHMm1B+fn5WaYXcrvdlumHIDebTfn8/Fw+OTnhe2pYpu9ZBeTJZCqPqR4Ttv5vMJD7/X9H/wO3joG6nQwATQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Konigsberg bridges\" title=\"\" src=\"/static/01ceca6d071c0587b998af2d102b848b/6af66/Konigsberg_bridges.png\" srcset=\"/static/01ceca6d071c0587b998af2d102b848b/69538/Konigsberg_bridges.png 160w,\n/static/01ceca6d071c0587b998af2d102b848b/72799/Konigsberg_bridges.png 320w,\n/static/01ceca6d071c0587b998af2d102b848b/6af66/Konigsberg_bridges.png 640w,\n/static/01ceca6d071c0587b998af2d102b848b/d9199/Konigsberg_bridges.png 960w,\n/static/01ceca6d071c0587b998af2d102b848b/2bef9/Konigsberg_bridges.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p>쾨니히스베르크의 한 가운데에는 프레골라 강이 흐르고 있고, 여기에는 가운데의 섬들과 연결되어있는 7개의 다리가 있다.</p>\n<p>임의의 지점에서 출발하여 이 다리들을 한 번씩만 건너서 모든 다리를 건널 수 있을까?</p>\n</blockquote>\n<p>즉, 한 붓 그리기 문제인 것이다. 이 문제를 그대로 보면 생각하기가 어려우니, 조금 더 그림을 단순하게 그리고 각 지역에 식별자를 부여한 후, 문제의 조건들을 정리해보도록 하자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/30994aef6d3b47d307b472255c8cc5a7/29114/bridges.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42mOwKJM1K5EwK5E0LZHUK5IwL5E0LpbUL5YwLRZ3qFZ1rFEzKRY3A0sBSTTEYF+tZVulblWp5lWnU9tra1ahGtqoX9ZtbVqu7NlkAkSWFSouNVpAKYdqDZsqdVskxDB179Wpey9P3ndz2f7z13fNmnTw8YZ9Ry7sXjT5wIMpey5M3nNxyt5rc/ddvL5z5uz916bvvzVj/00gmrYPqOsKw8JjbxYdezv7yKsFu49e2TGte8+11bt3n90xu3//vYXH3y04/m7u8Q8LDt6+tnPWnIM3Zxy8N/PgXSBacPTlwmNvGeYdebL01OfKlQscK2QLO80sKpUD6rXTW3T9WuyWH7q+4sjdpYduJPYGFrQbO9fqOtToOlRrW1co165esvTkJ4a5R54uO/WtdOlU3TxulTzB4A4Lq0pFxRzexl6rG7tnX9w1F0g299kq5vJZl8t6NekaFgrr5XEWLZ6w7PR3oM1Pl5z8WL9uXVCzZdskD6dGm/gOx5peh+CeyPlHHi089nzu4YeR3QF1PRYumDYvOv4OiOaf+LT68M2bu+fNOPZ+66Ezl/csm33845IT7xYff7fw+Iclh+9f3zVn3qG7sw49mn3oIRCBQur4O2BoXwOG26S9NxbvPXl15/T+/XfX7tl/fue8CftuTwEG9Z5LU/Zen7v3wrUdM2btuzJt343p+64D0bR9QF1XGRxqdOyqNW2qNDzqdAo7LSwq1QMb9HM6zM0rVL2azTybTK0r1ZxrtYFSjjVattWadkiIwaJMxqwEmIYkTEskwClMwrhYApjCTIpFXWrVnWvVTYpEzUBS4uCEiIIAhkVMbQ+U2WIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bridges\" title=\"\" src=\"/static/30994aef6d3b47d307b472255c8cc5a7/6af66/bridges.png\" srcset=\"/static/30994aef6d3b47d307b472255c8cc5a7/69538/bridges.png 160w,\n/static/30994aef6d3b47d307b472255c8cc5a7/72799/bridges.png 320w,\n/static/30994aef6d3b47d307b472255c8cc5a7/6af66/bridges.png 640w,\n/static/30994aef6d3b47d307b472255c8cc5a7/d9199/bridges.png 960w,\n/static/30994aef6d3b47d307b472255c8cc5a7/21b4d/bridges.png 1280w,\n/static/30994aef6d3b47d307b472255c8cc5a7/29114/bridges.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<ul>\n<li>임의의 지점에서 출발할 수 있다.</li>\n<li>모든 다리를 건너야 한다.</li>\n<li>한번 건넌 다리는 다시 건널 수 없다.</li>\n<li>각 구역은 몇 번을 들리든 상관없다.</li>\n<li>출발한 구역으로 다시 돌아와도 되고 안 돌아와도 상관없다.</li>\n</ul>\n</blockquote>\n<p>사실 몇 번 펜으로 쭉쭉 그어보면 대충 불가능하다는 감이 온다. 하지만 “절대로 건널 수 없다”라는 결론을 내리기 위해서는 왜 불가능하다는 것인지 증명하는 과정이 필요하다. 혹시 방법이 있는데 단순히 못 찾을 것일수도 있으니 말이다.</p>\n<p>우선 이 문제를 조금 더 쉽게 생각해보기 위해 복잡한 지도 모양의 그림이 아닌, 단순화된 그래프로 다시 그려보도록 하겠다.</p>\n<center>\n  <div style=\"width: 150px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 174.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAECElEQVR42p1WXUhbSRRO6irGn8QEjX+xtrutFrE+VBd8C4iuu0t3oQ8+BBUUBBHxQV/0QZDKiiiiiILIgj6IL7ILq4IKuui27tYmGlOrRPGnKoKKD/5GYmzu3e9cZtrbYKO5A4c5d+bOmTPnfOebUTU2NqYuLi6+Pjg4ENHbWltbM1RoDQ0N91RK2vLy8isRbXNz00O90+m0YliZMWr7+/vuvb09b25urnB0dCScnZ25EhMTlXu5sbExf3p6Ko6NjV3DmLi7u/sOw491Ol0U+0UdkMHKysr81dXVdZzWg363trb2FxqPjIxMRadRcmoTvNGbzeYHcXFxMfhOYONk7BHkm4CshYaG3k9OTg4lPTY2Nlyj0Zhk03rIg0A9TCK7TA+HJDKdJyQemyTcOZ5lZWUPq6urpVh1d3dHlJeXc4/UiKtktK+vL29ra+v3O7k3PT39l81myyO9p6fnxfj4+N98bmhoKIj6wcFBMzZ7z0Pj19OmpqZ/Ozo6fiW9paWlsKur6z2fg4dq1msBr0yCEyTYr4cw8qy/v1/CXGdnZ0x7e/szP15oId/dFkt5UsJkSVHLPeXHJzCwNTdvGhUVlZydnS0lJSMjI1yv1yf58ZCP3YcYfcKi5jrhLqKgoEDHyi3hBg/v8YzL5h6xdUEoiuhPsS0uLjYvLS0toI6vHA7HCkpRyjj9yBaqfQypOWmUlJT8jHK1Hx8ffwRrzSHB6SoMvPV6vaLVar0m+kI2HbzceNwuLi7yQRr5PgwUvLOzM09rFhYWOPX9pwJluWHMm5OTI6ysrIhut/vcYDBk09FNJhMdS4Ps/wn5A7pOq9VSluOzsrK+Pzk5uZycnBSam5sFeCnC1gl5+MblcokjIyPXgiAQ0drJSGZmZjBP1sDAgGV4eNhCOoGb5ggR29vbVo/HI05NTUkerq2tvVZZLBYzPHPg24U4OFF6ebeRK89maWnpT+vr6+/w7YYNmxRDlmXCn4EB9yYiUPts8CnLTCdsBnH6+gKHMvryVw2EwxgOKV8c3lopPt9Gdir52Od/cZQnRFsMexEVFRXf3qGWv94mJibG5ubmfiC9rq4upa2t7aVvUnCUMEgSi5t/tsFFPwW2+ZExTyrA/Bs3yIENziweHR1dgxpya3zppdDb26sjvbCwUFtTU5PCF7HyUxUVFZUiFONK7pSwm+6U6Ojo+DvfKURfKDENv/Vk9CVNQx4GfC+npaUZUKum9PT0WBmww1gSggJ+OYAlnOfn516Uzwdk+jmNh4SEKHs5oKDnr66uxNnZWYm+cF3S2yZF8dvm8PDQbbfbvVVVVQJ4Tbi8vHQZjcanil9fOO0MOFCcmZnhFPQmYK/krb6+/jFoa5Lehej/4RSk9AX7P/dqAvLlyMqBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graph\" title=\"\" src=\"/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png\" srcset=\"/static/d45e49c295c93e41171d55c8b167aca8/69538/graph.png 160w,\n/static/d45e49c295c93e41171d55c8b167aca8/72799/graph.png 320w,\n/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png 640w,\n/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png 644w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <br>\n  </div>\n</center>\n<p>이때 그래프 내에서 <code class=\"language-text\">A</code>, <code class=\"language-text\">B</code>, <code class=\"language-text\">C</code>, <code class=\"language-text\">D</code> 구역의 역할을 하는 점을 정점(Vertex)이라고 하고, <code class=\"language-text\">a</code> - <code class=\"language-text\">g</code> 다리의 역할을 하는 선을 간선(edge)라고 하며, 각 정점에 붙어있는 간선의 개수를 차수(Degree)라고 한다.</p>\n<p>쾨니히스베르크의 문제에서 다리를 건넌다는 것은 어떤 한 정점에서 다른 정점으로 넘어가는 것을 의미하며, 한번 건넌 다리는 다시 건널 수 없다는 것은 다른 정점으로 넘어갈 때 사용한 간선을 삭제해야한다는 것을 의미한다.</p>\n<p>다리를 건너 이동할 수 있는 케이스를 한번 쭉 살펴보면 대략 처음 출발할 때, 마지막 도착할 때, 통과할 때의 3가지 케이스로 분류해볼 수 있는데, 이 3가지 케이스에서 간선이 삭제되는 개수에는 패턴이 숨어있다.</p>\n<h4 id=\"처음-출발할-때\" style=\"position:relative;\">처음 출발할 때<a href=\"#%EC%B2%98%EC%9D%8C-%EC%B6%9C%EB%B0%9C%ED%95%A0-%EB%95%8C\" aria-label=\"처음 출발할 때 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/c9c44/start.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42mNgAIL///8zguje+v0q05qPxk5qPqiILE4S+H8rtfnPteRz/1+GZAENy14y+fb/SU3H4kBy9fX7WXDq+88Atuz//XqO/zdT2v9djz/170ZKOcP/d4X//z+v/P3/ee7/46v7umycl6tFRtqLeHt7C+LCoaGh/HFx3tIMDKYSP64kV/5/X/r//8vm3/9f5f5n+P+25P//JzO//n9W+n//8vkbGRj0FbzdHPWdnJz0sGFHR7Cclp+3s4uyhk3qp9upS/6/qfr/78ncb//f5AMNvJ328f/LvP9A+vX/uwm6EO/UMxEMKqgaoHdt/99J//z/Re7//7fSXzD8v5Sp9P9GWvj/25myIAWhoQzMQIqJGAz0OjPY0CvJKv+vJof/v5kuDQB5t6HogMe9+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"start\" title=\"\" src=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/6af66/start.png\" srcset=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/69538/start.png 160w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/72799/start.png 320w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/6af66/start.png 640w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/d9199/start.png 960w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/c9c44/start.png 1245w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>어느 정점에서 출발하던 다른 정점으로 이동하는 경우는 출구 역할을 하는 간선만 삭제될 것이다. 즉, 출발 정점의 차수가 <code class=\"language-text\">1</code> 줄어든다.</p>\n<h4 id=\"마지막-도착할-때\" style=\"position:relative;\">마지막 도착할 때<a href=\"#%EB%A7%88%EC%A7%80%EB%A7%89-%EB%8F%84%EC%B0%A9%ED%95%A0-%EB%95%8C\" aria-label=\"마지막 도착할 때 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/dd696d0493d19659168fc2ce6cf3f31d/27e9a/end.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR42mNgAIL/5+MF/t/IUfy/KpQZyGUEYiZc2N6+ngWkZ1LjoarJzUdXLm3fIvj/WZT8vxO5fAxgw24k6/27kfro/6PM//+vp81mIADq6/+DDGaY2nyuZG7X8em/rqZv+v846///m2k3/t9IUWT4/zS99//7qv//H3b//Pso/ceqmdF+Uoo2ar6+HnouLi666NjJyUkvwMtLU11b3be1vL3p242K//+f9n///676/7+naeUM/68mZfx/V/L//+f6///uZt7fPytQhoHBgz001J7H1dWVGxuOiXHlFpXXkpjf2mj983bem/9fmv7/f1kE9GFSMMP///8Z/99ITP5/PXHy/5vp+uBgAIoR8jpMzf/bSZb/r8dP/X8zMRIkAQBm3ZVwBqCyZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"end\" title=\"\" src=\"/static/dd696d0493d19659168fc2ce6cf3f31d/6af66/end.png\" srcset=\"/static/dd696d0493d19659168fc2ce6cf3f31d/69538/end.png 160w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/72799/end.png 320w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/6af66/end.png 640w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/d9199/end.png 960w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/27e9a/end.png 1253w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>출발할 때와는 반대로, 도착하는 정점은 입구의 역할을 했던 간선만 삭제하면 되므로, 해당 정점의 차수는 <code class=\"language-text\">1</code> 줄어든다.</p>\n<h4 id=\"통과할-때\" style=\"position:relative;\">통과할 때<a href=\"#%ED%86%B5%EA%B3%BC%ED%95%A0-%EB%95%8C\" aria-label=\"통과할 때 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/8affb/cross.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABdUlEQVR42mOor//PxAAENVkntae2nNk1qfGoN4i/KnQVMwOJ4D8DAyOE8TjM8f6+xtUrpx8611l1xggkBrMIp+b/EM3/r2Wr/buRWPf/RqonROJqUsD/J7n//78p+P/nauypdQuzheXl7TliYly5fXx8uLDhtDQfLkElF/5NM0Pl/t9Lu/X/Y9X//4+BZlxJ8mP4/zq7+f/riv9vLjV++3i+6v/U5iUlAhIC8h4eHnqOjo7a6Nje3l4nwNNZTUffNnpKb3jO/6dpf/8+mf3z/4f6//+fpzUy/H+QZvTjcvrzr5dK/v+/m7b1/357FmQv4fXumTTW/7fStvx/mPn//8205/+vZhiCFWye264/q31By///WmwogUtMRFwo5v5/Pdnh/+1MWbigi4sLv5OTjRYkMhiYiDYM6FK4a5HYDP7+9gLe3q46UHWMJCeX/6HM////Z0RzoZMWuQZiAGCM8lHVQJALgYZSz0BXV1duZ2dnJWoYCADZfLQQLFEFEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cross\" title=\"\" src=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/6af66/cross.png\" srcset=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/69538/cross.png 160w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/72799/cross.png 320w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/6af66/cross.png 640w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/d9199/cross.png 960w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/8affb/cross.png 1254w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>통과할 때는 입구의 역할을 하는 간선과 출구의 역할을 하는 간선을 삭제해야하므로, 해당 정점의 차수가 <code class=\"language-text\">2</code>씩 줄어든다.</p>\n<p>즉, 어떤 그래프에서 한 붓 그리기가 성공했다는 것은 정점을 순회하다가 더 이상 건널 수 있는 간선이 없어졌을 때, 반드시 “모든 정점의 차수가 0이어야 한다는 것”이다. 만약 차수가 0이 아닌 정점이 존재한다면 그 정점에는 아직 건너지 않았던 간선이 연결되어 있다는 말이 되므로 한 붓 그리기는 실패한 것이 된다.</p>\n<p>이때 우리는 각 정점의 차수가 <code class=\"language-text\">1</code>이나 <code class=\"language-text\">2</code> 씩 줄어들고 있다는 점에서 이 문제를 풀 수 있는 힌트를 얻을 수 있다.</p>\n<h3 id=\"차수의-홀짝-여부에-집중하자\" style=\"position:relative;\">차수의 홀짝 여부에 집중하자<a href=\"#%EC%B0%A8%EC%88%98%EC%9D%98-%ED%99%80%EC%A7%9D-%EC%97%AC%EB%B6%80%EC%97%90-%EC%A7%91%EC%A4%91%ED%95%98%EC%9E%90\" aria-label=\"차수의 홀짝 여부에 집중하자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>차수가 1씩 줄어드는 경우는 한번 수행될 때마다 차수의 홀짝 여부가 변경되고, 2씩 줄어드는 경우는 차수의 홀짝 여부가 절대 변하지 않는다.</p>\n<p>정점 차수의 홀짝 여부를 이야기하고 있는 이유는 바로 “0이 짝수이기 때문”이다.</p>\n<p>즉, 정점에서 출발, 도착, 통과 시 변하는 차수의 홀짝 패턴을 파악하면 모든 경우의 수를 그려보지 않더라도 간단하게 이 그래프가 한 붓 그리기가 가능한 그래프인지 아닌지 알 수 있다.</p>\n<h3 id=\"출발지와-도착지가-같은-경우\" style=\"position:relative;\">출발지와 도착지가 같은 경우<a href=\"#%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%99%80-%EB%8F%84%EC%B0%A9%EC%A7%80%EA%B0%80-%EA%B0%99%EC%9D%80-%EA%B2%BD%EC%9A%B0\" aria-label=\"출발지와 도착지가 같은 경우 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우선 위에서 살펴본 바와 같이 중간에 통과하는 정점의 차수는 무조건 2씩 줄어들기 때문에 몇 번을 통과하든 차수의 홀짝 여부가 절대 변하지 않는다.</p>\n<p>즉, 어떤 방식으로 건너든 통과 정점의 차수가 0이 되려면, 해당 정점의 차수는 처음부터 짝수여야한다는 것이다.</p>\n<p>만약 통과 정점의 차수가 홀수라면 반드시 마지막에는 차수가 1이 되고, 이 간선을 타고 해당 정점에 도착하게되면 더 이상 남아있는 간선이 없기 때문에 다른 정점으로 건너갈 수 없게 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 112.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe9rHmWVXWTVgsg//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACEBETIUH/2gAIAQEAAQUCW4aKd05LQBj/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAXEQADAQAAAAAAAAAAAAAAAAACICEx/9oACAECAQE/ASmJ/8QAHRAAAQQCAwAAAAAAAAAAAAAAEQABAhASQSExcf/aAAgBAQAGPwJaoldriTDyoPhE7ev/xAAbEAEAAgMBAQAAAAAAAAAAAAABAEERITEQUf/aAAgBAQABPyFa8NxUWcFeWmBJBQhu8TdsnlUx8n//2gAMAwEAAgADAAAAENDIPP/EABYRAQEBAAAAAAAAAAAAAAAAAAEgUf/aAAgBAwEBPxBDY//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxBKIuP/xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhUTFBYXH/2gAIAQEAAT8QBeveHhY/LlB3G5HxE3i8FUEGz5MVwnYVCduUG3C9wr7D6IlA1W51Qcz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cant get out\" title=\"\" src=\"/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg\" srcset=\"/static/000298206bf4e8d3922da6d4597311b7/0913d/cant-get-out.jpg 160w,\n/static/000298206bf4e8d3922da6d4597311b7/cb69c/cant-get-out.jpg 320w,\n/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg 440w\" sizes=\"(max-width: 440px) 100vw, 440px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>차수가 홀수인 통과 정점에 들어서면 맘대로 나갈 수 없다</small>\n</center>\n<p>또한 출발지와 목적지가 같은 경우에는 맨 처음 출발할 때 출발 정점의 차수를 1 줄이고 도착할 때 다시 1을 줄여야하기 때문에, 최종적으로는 해당 정점의 차수가 총 2만큼 줄어들게 된다.</p>\n<p>이 경우에도 출발 정점의 차수는 홀짝 여부가 변경될 수 없기 때문에 반드시 처음부터 짝수인 차수를 가지고 있어야 한다는 말이 된다. 즉, 출발지와 도착지가 같은 경우 한 붓 그리기가 성공하려면 “모든 정점의 차수가 짝수여야 한다는 결론”이 나온다.</p>\n<h3 id=\"출발지와-도착지가-다른-경우\" style=\"position:relative;\">출발지와 도착지가 다른 경우<a href=\"#%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%99%80-%EB%8F%84%EC%B0%A9%EC%A7%80%EA%B0%80-%EB%8B%A4%EB%A5%B8-%EA%B2%BD%EC%9A%B0\" aria-label=\"출발지와 도착지가 다른 경우 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>출발지와 도착지가 다른 경우에도 통과 정점의 차수는 처음부터 짝수여야 한다는 점은 달라지지 않지만, 이번에는 출발지와 도착지가 다르기 때문에 출발 정점과 도착 정점의 차수는 반드시 홀수여야 한다는 점이 다르다.</p>\n<p>중간에 통과하는 정점은 반드시 차수가 2씩 줄어들기 때문에 홀짝이 변하지 않지만, 출발과 도착 시에는 차수가 1만 줄어들기 때문에 홀짝 여부가 변하기 때문이다.</p>\n<p>즉, 출발지와 도착지가 다른 경우는 “출발지와 도착지는 홀수 차수, 그 외 정점은 짝수여야한다”라는 결론이 나온다.</p>\n<h3 id=\"쾨니히스베르크의-다리는-왜-한-붓-그리기가-불가능할까\" style=\"position:relative;\">쾨니히스베르크의 다리는 왜 한 붓 그리기가 불가능할까?<a href=\"#%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%EC%9D%98-%EB%8B%A4%EB%A6%AC%EB%8A%94-%EC%99%9C-%ED%95%9C-%EB%B6%93-%EA%B7%B8%EB%A6%AC%EA%B8%B0%EA%B0%80-%EB%B6%88%EA%B0%80%EB%8A%A5%ED%95%A0%EA%B9%8C\" aria-label=\"쾨니히스베르크의 다리는 왜 한 붓 그리기가 불가능할까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>이 두 가지 조건을 정리해보자면 그래프의 정점을 순회하며 한 붓 그리기가 가능한 경우는 “모든 정점이 짝수 차수를 가지고 있거나 홀수 차수가 2개인 경우”라고 정리해볼 수 있다. 다시 쾨니히스베르크의 다리를 도식화한 그래프를 살펴보고 이 조건에 맞아떨어지는지 확인해보자.</p>\n<center>\n  <div style=\"width: 150px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 174.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAECElEQVR42p1WXUhbSRRO6irGn8QEjX+xtrutFrE+VBd8C4iuu0t3oQ8+BBUUBBHxQV/0QZDKiiiiiILIgj6IL7ILq4IKuui27tYmGlOrRPGnKoKKD/5GYmzu3e9cZtrbYKO5A4c5d+bOmTPnfOebUTU2NqYuLi6+Pjg4ENHbWltbM1RoDQ0N91RK2vLy8isRbXNz00O90+m0YliZMWr7+/vuvb09b25urnB0dCScnZ25EhMTlXu5sbExf3p6Ko6NjV3DmLi7u/sOw491Ol0U+0UdkMHKysr81dXVdZzWg363trb2FxqPjIxMRadRcmoTvNGbzeYHcXFxMfhOYONk7BHkm4CshYaG3k9OTg4lPTY2Nlyj0Zhk03rIg0A9TCK7TA+HJDKdJyQemyTcOZ5lZWUPq6urpVh1d3dHlJeXc4/UiKtktK+vL29ra+v3O7k3PT39l81myyO9p6fnxfj4+N98bmhoKIj6wcFBMzZ7z0Pj19OmpqZ/Ozo6fiW9paWlsKur6z2fg4dq1msBr0yCEyTYr4cw8qy/v1/CXGdnZ0x7e/szP15oId/dFkt5UsJkSVHLPeXHJzCwNTdvGhUVlZydnS0lJSMjI1yv1yf58ZCP3YcYfcKi5jrhLqKgoEDHyi3hBg/v8YzL5h6xdUEoiuhPsS0uLjYvLS0toI6vHA7HCkpRyjj9yBaqfQypOWmUlJT8jHK1Hx8ffwRrzSHB6SoMvPV6vaLVar0m+kI2HbzceNwuLi7yQRr5PgwUvLOzM09rFhYWOPX9pwJluWHMm5OTI6ysrIhut/vcYDBk09FNJhMdS4Ps/wn5A7pOq9VSluOzsrK+Pzk5uZycnBSam5sFeCnC1gl5+MblcokjIyPXgiAQ0drJSGZmZjBP1sDAgGV4eNhCOoGb5ggR29vbVo/HI05NTUkerq2tvVZZLBYzPHPg24U4OFF6ebeRK89maWnpT+vr6+/w7YYNmxRDlmXCn4EB9yYiUPts8CnLTCdsBnH6+gKHMvryVw2EwxgOKV8c3lopPt9Gdir52Od/cZQnRFsMexEVFRXf3qGWv94mJibG5ubmfiC9rq4upa2t7aVvUnCUMEgSi5t/tsFFPwW2+ZExTyrA/Bs3yIENziweHR1dgxpya3zppdDb26sjvbCwUFtTU5PCF7HyUxUVFZUiFONK7pSwm+6U6Ojo+DvfKURfKDENv/Vk9CVNQx4GfC+npaUZUKum9PT0WBmww1gSggJ+OYAlnOfn516Uzwdk+jmNh4SEKHs5oKDnr66uxNnZWYm+cF3S2yZF8dvm8PDQbbfbvVVVVQJ4Tbi8vHQZjcanil9fOO0MOFCcmZnhFPQmYK/krb6+/jFoa5Lehej/4RSk9AX7P/dqAvLlyMqBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graph\" title=\"\" src=\"/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png\" srcset=\"/static/d45e49c295c93e41171d55c8b167aca8/69538/graph.png 160w,\n/static/d45e49c295c93e41171d55c8b167aca8/72799/graph.png 320w,\n/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png 640w,\n/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png 644w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n</center>\n<p>이 그래프의 정점들의 차수를 정리해보면 <code class=\"language-text\">A=3, B=5, C=3, D=3</code>으로 모든 정점의 차수가 홀수이므로, 위에서 찾아낸 어떤 조건과도 맞지 않는다.</p>\n<p>즉, 쾨니히스베르크의 다리는 한 붓 그리기가 불가능한 구조라는 것이 증명된 것이다.</p>\n<p>그래프 이론에서 이렇게 한 붓 그리기, 즉, 그래프의 모든 경로를 단 한 번씩만 통과하는 경로를 오일러 경로(Eulerian Trail)라고 부르는데, 그 이유는 갓 레온하르트 오일러 형님이 이미 1735년에 이 문제를 증명하고 자기 논문에 써먹었기 때문이다.</p>\n<p>해당 논문은 <a href=\"http://eulerarchive.maa.org//docs/originals/E053.pdf\" target=\"_blank\" rel=\"nofollow\">Solutio Problematis ad Geometriam Situs Pertinentis</a>에서 확인할 수 있지만, 제목에서도 느껴지듯이 이게 영어가 아니다. 이 시대의 가방끈 기신 분들이 작성한 논문이 다들 그러하듯 라틴어로 작성되어있기 때문에 읽어보는 건 사실 힘들다. 그래도 혹시 필자의 상상을 뛰어넘어 라틴어가 가능하신 굇수분들이 있을 수 있으니 일단 첨부하겠다.</p>\n<p>어쨌든 오일러 형님의 문제 풀이에서 주목해야하는 아이디어는 각 정점의 차수를 조사할 때 차수 자체가 아닌 홀수와 짝수라는 성질에 주목했다는 점이다. 정점에서 출발할 때, 도착할 때, 통과할 때 정점이 가진 차수의 상태가 홀짝으로 변화하는 그 패턴을 파악하지 못했다면 이 문제를 해결하기는 힘들었을 것이다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이번 포스팅에서 살펴본 3개의 문제는 어려운 수학 공식을 사용하는 문제가 아니다.</p>\n<p>7일마다 반복되는 패턴에서 착안하여 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span>일 후의 요일도 뭔가 패턴이 있을 것이라는 추론, 두 칸짜리 타일을 보고 검은색과 흰색이 반복되는 패턴을 떠올릴 수 있는 것, 그래프 순회의 모든 경우의 수를 따져보지 않고 각 정점의 차수가 홀짝으로 변화하는 패턴을 생각해낼 수 있는 것 등은 복잡한 수학 공식을 모르더라도 수의 성질만 알고 있다면 누구든지 접근할 수 있는 문제 해결 방식이다.</p>\n<p>이렇게 수의 근본적인 성질을 파악하고 이용하면 복잡한 문제를 단순하게 풀 수 있다. 슬픈 점은 이게 단순히 공부로 얻어질 수 있는 능력이 아니라는 것이다. 이런 능력을 키우기 위해서는, 그냥 이렇게 생각하는 연습을 많이 해야하는 것 같다.</p>\n<p>코딩 테스트를 많이 풀어보는 것도 물론 좋지만, 일상 속에서 겪는 다양한 문제들 속에서 이렇게 패턴을 찾아내고 분석해보는 것도 나름 도움이 되지 않을까? 예를 들면 친구가 11월 10일에 약속을 잡자고 했는데, 그때가 무슨 요일인지 핸드폰으로 확인하는 것이 아니라 한번 직접 계산해본다던가 하는 식으로 말이다.</p>\n<p>이상으로 수학과 함께 복잡한 문제를 단순하게 만들자! 포스팅을 마친다.</p>","fields":{"slug":"20191030-make-simple-with-math","path":"/2019/10/30/make-simple-with-math/","lang":"ko"},"frontmatter":{"title":"수학과 함께 복잡한 문제를 단순하게 만들자","subTitle":"수학이 어렵다고? 패턴만 봐도 문제 해결이 쉬워진다","date":"Oct 30, 2019","categories":["프로그래밍","알고리즘"],"tags":["수학","프로그래밍","알고리즘","코딩테스트","개발자 수학"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e8e8e8","images":{"fallback":{"src":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/d803c/thumbnail.png","srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/8c230/thumbnail.png 80w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/23e25/thumbnail.png 160w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/d803c/thumbnail.png 320w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/3e5ca/thumbnail.webp 80w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/b72f1/thumbnail.webp 160w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/fc5c5/thumbnail.webp 320w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#e8e8e8","images":{"fallback":{"src":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/3fbb4/thumbnail.png","srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/61846/thumbnail.png 750w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/d5395/thumbnail.png 1080w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/cc835/thumbnail.png 1366w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/6858b/thumbnail.webp 750w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/f5547/thumbnail.webp 1080w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/29310/thumbnail.webp 1366w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a9680e03-58e1-5f68-82fa-94e0e953b3fa","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%EC%99%80-%EB%A9%94%EC%86%8C%EB%93%9C%EB%8A%94-%EC%9B%90%EB%B3%B8-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%ED%86%B5%ED%95%B4-%EA%B3%B5%EC%9C%A0%EB%90%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\">프로퍼티와 메소드는 원본 객체를 통해 공유될 수 있다</a></p>\n<ul>\n<li><a href=\"#%EC%83%9D%EC%84%B1%EC%9E%90-%ED%95%A8%EC%88%98-%EB%82%B4%EC%97%90%EC%84%9C-this%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">생성자 함수 내에서 this를 사용하는 방법</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EA%B0%9D%EC%B2%B4%EC%97%90-%EC%A0%95%EC%9D%98%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">프로토타입 객체에 정의하는 방법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EB%A3%A9%EC%97%85\">프로토타입 룩업</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%83%81%EC%86%8D\">프로토타입을 사용한 상속</a></p>\n<ul>\n<li><a href=\"#objectcreate%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\">Object.create를 사용하자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 이전 포스팅에 이어, 프로토타입을 사용한 다양한 상속 패턴에 대한 이야기를 해볼까 한다. 사실 자바스크립트에는 상속이나 캡슐화와 같은 개념이 명시적으로 존재하지는 않기 때문에 자바나 C++ 같은 클래스 기반 언어를 사용하던 개발자들은 자바스크립트에 클래스가 없다는 사실에 혼란스러워한다. 즉, 자바스크립트에서의 상속이나 캡슐화 등은 OOP(객체지향프로그래밍)에 익숙한 개발자들이 자바스크립트에서도 이런 개념들을 가져다 사용하기 위해 프토토타입을 사용하여 이를 유사하게 구현한 일종의 디자인 패턴이라고 할 수 있다. 자…","html":"<p>이번 포스팅에서는 <a href=\"/2019/10/23/js-prototype/\">이전 포스팅</a>에 이어, 프로토타입을 사용한 다양한 상속 패턴에 대한 이야기를 해볼까 한다.</p>\n<p>사실 자바스크립트에는 상속이나 캡슐화와 같은 개념이 명시적으로 존재하지는 않기 때문에 자바나 C++ 같은 클래스 기반 언어를 사용하던 개발자들은 자바스크립트에 클래스가 없다는 사실에 혼란스러워한다.</p>\n<p>즉, 자바스크립트에서의 상속이나 캡슐화 등은 OOP(객체지향프로그래밍)에 익숙한 개발자들이 자바스크립트에서도 이런 개념들을 가져다 사용하기 위해 프토토타입을 사용하여 이를 유사하게 구현한 일종의 디자인 패턴이라고 할 수 있다.</p>\n<p>자바스크립트에서의 상속은 프로토타입 체인을 사용하여 구현하고, 캡슐화는 클로저를 사용해서 구현하게 되는데, 이번 포스팅에서는 이 중 프로토타입을 사용한 상속 패턴에 집중해서 설명해볼까 한다.</p>\n<h2 id=\"프로퍼티와-메소드는-원본-객체를-통해-공유될-수-있다\" style=\"position:relative;\">프로퍼티와 메소드는 원본 객체를 통해 공유될 수 있다<a href=\"#%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%EC%99%80-%EB%A9%94%EC%86%8C%EB%93%9C%EB%8A%94-%EC%9B%90%EB%B3%B8-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%ED%86%B5%ED%95%B4-%EA%B3%B5%EC%9C%A0%EB%90%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"프로퍼티와 메소드는 원본 객체를 통해 공유될 수 있다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>객체의 상속을 알아보기 전에 객체를 생성할 때 프로퍼티와 메소드를 부여하는 방법에 대해서 알아보도록 하자. <a href=\"/2019/10/23/js-prototype/\">이전 포스팅</a>에서 필자는 자바스크립트는 클래스가 아닌 함수를 사용하여 객체를 생성한다고 이야기 했었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이때 <code class=\"language-text\">User</code> 함수를 생성자로 호출하면서 생성된 <code class=\"language-text\">evan</code> 객체는 <code class=\"language-text\">User.prototype</code> 객체를 원본 객체로 하여 복제된 객체이다.</p>\n<p>이때 두 가지 방법을 사용하여 새롭게 생성되는 객체들에게 프로퍼티나 메소드를 부여할 수 있는데, 첫 번째는 생성자 함수 내에서 <code class=\"language-text\">this</code>를 사용하여 선언하는 방법, 두 번째는 새롭게 생성되는 객체들이 복사할 원본 객체인 프로토타입 객체에 선언하는 방법이다.</p>\n<p>먼저, <code class=\"language-text\">this</code>를 사용하여 프로퍼티나 메소드를 정의하는 방법에 대해서 살펴보자.</p>\n<h3 id=\"생성자-함수-내에서-this를-사용하는-방법\" style=\"position:relative;\">생성자 함수 내에서 this를 사용하는 방법<a href=\"#%EC%83%9D%EC%84%B1%EC%9E%90-%ED%95%A8%EC%88%98-%EB%82%B4%EC%97%90%EC%84%9C-this%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"생성자 함수 내에서 this를 사용하는 방법 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>자바스크립트도 생성자 역할을 하는 함수 내에서 <code class=\"language-text\">this</code>를 사용하여 다른 언어와 비슷한 느낌으로 객체들에게 프로퍼티나 메소드를 부여할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, World!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Hello, World!</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>참고로 생성자 함수 내에서 <code class=\"language-text\">strict</code> 모드를 사용한 이유는, 해당 생성자 함수가 실수로 <code class=\"language-text\">new</code> 예약어 없이 호출되어 <code class=\"language-text\">this</code>가 전역 객체로 평가되는 불상사를 방어하기 위해서이다. <small>(이 내용은 프로토타입과는 관련이 없기 때문에 자세히 다루지는 않겠다)</small></p>\n<p>이 방법은 일반적인 생성자의 사용 방법과 비슷해서 직관적으로 이해가 되는 편이다. 이때 생성자 함수 안의 <code class=\"language-text\">this</code>는 새롭게 생성된 객체를 의미하기 때문에, 함수 내에서 <code class=\"language-text\">this</code>를 통해 정의한 프로퍼티나 메소드는 이 생성자 함수를 사용하여 객체가 생성될 때마다 새롭게 정의된다.</p>\n<p>무슨 말인지 조금 더 쉽게 알아보기 위해 생성자 함수를 통해 두 개의 새로운 객체를 생성하고, 이 객체들의 메소드를 비교해도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> john <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>say <span class=\"token operator\">===</span> john<span class=\"token punctuation\">.</span>say<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>생성자 함수가 호출될 때 <code class=\"language-text\">this</code>는 각각 <code class=\"language-text\">evan</code> 객체와 <code class=\"language-text\">john</code> 객체를 의미했을 것이고, <code class=\"language-text\">say</code> 메소드 또한 이 객체들에게 직접 할당되었을 것이다. 자바스크립트의 완전항등연산자(<code class=\"language-text\">===</code>)는 다른 메모리에 적재된 객체는 다르다고 평가하므로 이 두 객체의 메소드들은 각자 다른 메모리에 담긴, 전혀 다른 함수라고 할 수 있다.</p>\n<p>이때 <code class=\"language-text\">evan</code> 객체나 <code class=\"language-text\">john</code> 객체를 출력해보면, 객체 내부에 <code class=\"language-text\">say</code> 메소드가 정의되어 있는 모습 또한 확인해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">User <span class=\"token punctuation\">{</span><span class=\"token function-variable function\">say</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 이와 같은 당연한 이야기를 강조하는 이유는 바로 밑에서 후술할 프로토타입 객체에 정의하는 방법과의 차이점을 분명히 하기 위해서이다. 프로토타입 객체를 사용해서 프로퍼티나 메소드를 정의하게되면 지금과는 전혀 다른 결과가 나온다.</p>\n<h3 id=\"프로토타입-객체에-정의하는-방법\" style=\"position:relative;\">프로토타입 객체에 정의하는 방법<a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EA%B0%9D%EC%B2%B4%EC%97%90-%EC%A0%95%EC%9D%98%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"프로토타입 객체에 정의하는 방법 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>이번에는 <code class=\"language-text\">User</code> 생성자 함수의 프로토타입 객체인 <code class=\"language-text\">User.prototype</code>을 사용하여 메소드를 한번 정의해보도록 하자. <code class=\"language-text\">this</code>를 통해서 정의하는 방법과 어떤 차이가 있을까?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, World!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Hello, World!</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>일단 <code class=\"language-text\">this</code>를 사용하여 정의했던 메소드와 동일한 느낌으로 작동하고 있다. 그래서 동일한 동작이라고 생각할 수도 있지만, 사실 두 방법들 사이에는 중요한 차이가 존재한다.</p>\n<p>바로 생성자 함수를 통해 생성된 모든 객체들이 해당 메소드를 “공유하고 있냐, 없냐”의 차이이다. 이전과 마찬가지로 두 개의 객체를 생성하고, 두 객체의 메소드를 비교해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> john <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>say <span class=\"token operator\">===</span> john<span class=\"token punctuation\">.</span>say<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>음? 이번에는 아까와는 다르게 두 객체의 메소드가 같다고 한다. 방금 전과는 다르게 이번에는 <code class=\"language-text\">evan.say</code>와 <code class=\"language-text\">john.say</code>가 객체에 따로따로 정의된 메소드가 아닌, 원본 객체의 메소드를 공유하고 있는 상황이기 때문이다.</p>\n<p>생성된 <code class=\"language-text\">evan</code> 객체를 한번 콘솔에 출력해보면, 원본 객체의 프로퍼티나 메소드를 공유하고 있다는 말이 무엇인지 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">User <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">evan</code> 객체를 출력해보니, 이 객체는 아무 메소드나 프로퍼티도 가지고 있지 않고 텅 비어있는 친구다.</p>\n<p>즉, 생성자 함수 내에서 <code class=\"language-text\">this</code>를 사용하지 않고, 원본 객체에 메소드나 프로퍼티를 정의하게 되면 객체들에게는 해당 프로퍼티가 없고, 원본 객체의 프로퍼티나 메소드를 참조한다는 것이다.</p>\n<p>이 특징을 제대로 인지하지 못하면 이런 상황도 발생할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>john<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Evan\nEvan</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>그렇기 때문에 각 객체마다 고유한 프로퍼티를 부여하고 싶다면 원본 객체에 정의하는 것이 아니라, 생성자 함수 내에서 <code class=\"language-text\">this</code>를 사용하여 정의해야한다. 다시 말하지만 <strong>원본 객체에 정의한 프로퍼티나 메소드는 생성된 객체들끼리 공유된다</strong>.</p>\n<p>한 가지 이상한 점은, 분명히 <code class=\"language-text\">evan</code> 객체에는 아무런 프로퍼티나 메소드도 없었는데, 필자는 분명히 <code class=\"language-text\">evan.say</code>를 통해 해당 메소드에 접근할 수 있었다는 것이다. 어떻게 이런 일이 가능한 것일까?</p>\n<h2 id=\"프로토타입-룩업\" style=\"position:relative;\">프로토타입 룩업<a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EB%A3%A9%EC%97%85\" aria-label=\"프로토타입 룩업 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>그 질문에 대한 해답은 바로 자바스크립트가 객체 내에서 프로퍼티를 찾는 방법 중 하나인 프로토타입 룩업(Prototype Lookup)에서 알아볼 수 있다. 방금 전 자바스크립트가 <code class=\"language-text\">evan</code> 객체에서 <code class=\"language-text\">say</code> 메소드를 찾아냈던 과정은 다음과 같다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3caa593b82cbd86bf7af67e4dff11475/a2498/prototype_lookup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAD2EAAA9hAHVrK90AAABiUlEQVR42pVSu2oCURDdGC0sbVKE4B9YWfkLWiSF+YCkskt62TqQ3xERF0VECxE1yKKID1B84BOX9YFys07mLG5YjJJkYJh7Z86cO/fcK0knRkTXiK1W63G1WlG5XDbS6fShWCwauq4T8nbcr2YBJ5NJeDqdglBUq9XPfD4v5vM5If9fQgdiPB6PYML1em1w7sCOSIlEImLH/YXwioMjFosF2+12NpfLJTkqfN3kYrHIMmEI9SPuLIEzk8mYXiqVXEegm9114Uzk3cABb/WCB346GeJdoVB47nQ6IUsnW83Jj3LPD/TE61t77dvG47Fcr9flRqMhj0ajKPu7oiivtVrtwTrRRujiBwqnUqmXwWDwxr1R9MLB02w2ZYCINSImMEXfbDYfXq/XA50uXNmBOnDAq6pq8NRYEmtMEhfEcDgU2+12jySLXwkEAjd+v/+shsijrmlaZbfbEU+6ZxPcKmazmZD4itTr9Wi5XJoT8l49TvhDH2vv8/k83W5Xxb/kXvPD82DU7/fpC7lobzt/8ly5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"prototype lookup\" title=\"\" src=\"/static/3caa593b82cbd86bf7af67e4dff11475/6af66/prototype_lookup.png\" srcset=\"/static/3caa593b82cbd86bf7af67e4dff11475/69538/prototype_lookup.png 160w,\n/static/3caa593b82cbd86bf7af67e4dff11475/72799/prototype_lookup.png 320w,\n/static/3caa593b82cbd86bf7af67e4dff11475/6af66/prototype_lookup.png 640w,\n/static/3caa593b82cbd86bf7af67e4dff11475/d9199/prototype_lookup.png 960w,\n/static/3caa593b82cbd86bf7af67e4dff11475/21b4d/prototype_lookup.png 1280w,\n/static/3caa593b82cbd86bf7af67e4dff11475/a2498/prototype_lookup.png 1764w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<blockquote>\n<ol>\n<li><code class=\"language-text\">evan.say</code>로 접근 시도</li>\n<li>어, <code class=\"language-text\">say</code> 프로퍼티가 없네? <code class=\"language-text\">__proto__</code>를 통해 원본 객체로 올라가보자!</li>\n<li><code class=\"language-text\">User.prototype</code>객체야, 너는 <code class=\"language-text\">say</code> 프로퍼티 가지고 있니?</li>\n<li>있네? Profit!</li>\n</ol>\n</blockquote>\n<p>이런 식으로 우리가 어떤 객체의 프로퍼티에 접근을 시도했을 때, 자바스크립트는 먼저 그 객체가 해당 프로퍼티를 가지고 있는지를 확인하고, 해당 프로퍼티가 없다면 그 객체의 원본 객체로 거슬러 올라가서 다시 확인하게 된다.</p>\n<p>이 집요한 확인 과정은 모든 객체의 조상인 <code class=\"language-text\">Object.prototype</code>에 다다를 때까지 계속되고, 만약 여기에도 존재하지 않는 프로퍼티라면 그때서야 <code class=\"language-text\">undefined</code>를 반환하게 된다.</p>\n<p>이 말인 즉슨, 모든 객체는 자신의 프로토타입 체인 내에 있는 모든 원본 객체들의 프로퍼티나 메소드에 접근할 수 있다는 뜻이다.</p>\n<p>쉽게 말해, 방금 생성한 <code class=\"language-text\">evan</code> 객체는 아무 프로퍼티나 메소드도 가지고 있지 않지만, 자신의 원본 객체인 <code class=\"language-text\">User.prorotype</code>에 정의된 <code class=\"language-text\">say</code> 메소드도 사용할 수 있고, <code class=\"language-text\">Object.prototype</code>에 있는 <code class=\"language-text\">toString</code>이나 <code class=\"language-text\">hasOwnProperty</code>와 같은 메소드도 사용할 수 있다는 것이다.</p>\n<center>\n  <div style=\"width: 200px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7b54dda3a84203718b2412b4631d61b5/31493/prototype_lookup2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 220.00000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAYAAABloJjNAAAACXBIWXMAAD2EAAA9hAHVrK90AAAGZUlEQVR42q1XW0xUVxQdrNZiqhapoQVKrJ22SGqTxsQ2fjWm6ZdJv0x/TKyNf36ppdGERBIzxqTph4kzVKdm5OEEjU9QER+8BhWfKIiACCKIKDigyEXg3svuWif3TGcQpJie5GSfOffeffbeZ611zrhc/7a41atXx8Mm5OXl7X/y5Im0tbWNoFu6t7S0WPfv37du376txg8ePFDznOvu7rZKSkqsKH+u9xcuXOiG/aGgoKBU0Gw02rGxMRoJh8NSXV0t58+fF8uyRDfnNamrq5Noh/Pi4+OTOdi7d+9PFy9e/PPSpUvbYT26h0Ihz+nTpz3nzp3zXL58OWb+xo0bHmTmccHxTPS4tLS0hAULFqRyvG3btpmu/6HNQ/9I1xOO33mbzgjLsQFlN2/erEIa1b29vZWYK0L/mJ5hZzlZTNnLy8tnuvr6+towaD1x4kR7UVFROxx3YK4GiyQ5DuOmlSfqNYN2z54989evX5/K8aFDhzIbGhpq79y5U3H37t0QIBK6d+9eCIuF+BtQCTU3N0fm6+vr1dzx48dD0b7npqSkKIc1NTU5DlwsQgYvy/Xr1wU4E2QiFRUVUllZqWDS09MTgc9rsElNTU3h4Nq1a16+gNWtjo4OaW1tFYBXEJEA1ILngggFGcjTp09lcHBQOUSkMQ7nADZLYN8DePcTuLm5uVZ2drbs3LlTCgsLBaUQlEaNvV6vAK8SCARky5YtaiEuElPP5cuXEzouANfPFfv7+y1SELQSbJQw2sePH8vz58/l2bNnKt3Ozk559OiRmKYpV69ejXWoth3typUrKuVXr15ZpNXo6CjHimK0TJFzdEI7MjKiUsamTewQlPMyAlgLVJNTp07J0aNHhePi4mJBBlJVVSXHjh1Tz06ePDlhDaMd+rg60rH4AXeY9amtrZWuri4B+AVIULvOkkB1JtzlmAhfvnzJKKzS0lK5deuW0B45ckRFg81S9sKFCzI8PBxRo/EO41asWDEX9gN8nMu6ANwW6Kg+ZJSECSNkLXVn01I23uFc6OFnsD8CCqWMEGnakCeBPElTU5McPnw4kh6d6chi9JCkprf09PTEZcuWpTlM8QEyfGEYhTeRukmLeprt7e0mvjHhRFl2RKgssGjGMCWKej6uCOxR2hX2WPwXL14omIxv4yP8FfX6Bd43oNC/4ffPqF0JHhajZv7Gxsb9SDcAUQhgPoANCgBvMR1qrZ6DSQE6VJAAmFn4MYfsPYZhpDryNWNa8gWofHX27NklAO13Pp9vJRx+AY6uzMrK+mbTpk3pW7duzWCHzGXk5ORk7Nq1S409Hk+GfrZ582Zl161blzFhDcvKyv5gvcDZAZx0BhYxwFcD6RkogYGaGpA0A/VVz8AqA3g0ICoGhXWW3uWlS5d+yTGg4nfqrbhMyLAkyCZCN8KJ2CQuJ9PD2YmJiek86JF+Hl/Ay6MQVBuObOy8Dac2eGzjuQ3w2wC8DaG14ZjbbGPD7DeqDRxa1D5SjWyhWpOCtGfOnFF6uG/fPjXHRk2c0CFW9Wn50mygWJCOLAGppqVMSxh/syyTigOdYGMsKsvAwIByRiHgx7rTGTvn2ahGMeKwatWqObBJ0LwDpB4WsPx+vzqkou84UzFFAXfx4sXz3W43xeH7/Pz8EooD2ggcmyi6iYKbEAkT0UQ4PCWXk5OTP9FcZn3wosXzgsXGCahgwvTH8zkmQrzwIcYJiOBTpPc1xrOBtd/BzSI4yAdPg8BhEA6DOEaD/I35IOoV6ZwD4IPgcpAp9+FHH7a+H4DtwxnMXOvQ3+4q8vDhw79RGz9ok4t+AM79oFjB7t27v127du2izMzMzzdu3OjG2esGh907duxQY935TD9fs2aNe8KbA8RiO+AyDI72oocxDoOzYSweRgZhcDkMHqt5/WxoaCgMIQ4ruGiHSUlJizjAOfKXU2x1WPBI5VWYxySEQ3VuEM9h4nCyQ+pdh8uJoFWe43CU92xstg19tFEanjGKwzhi1TwbnL6Zy/qyxNuXhgbphuuaHDx4UN1tcLZEwD7ZpT0iZZrLuHJYiExxFjWKHJ10rq8kfO6QYHIuA9heJyqlh/yAgkteR99pNJf/092GJx0+sng35L2G1w78bVD3QS0GU/1Pea2GlC9Gxih0vZg6052WQ0Tk5XmM6Pj3K3J7paXyMGr+1p2nJjnP+84/JJLSlavYgYkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"prototype lookup2\" title=\"\" src=\"/static/7b54dda3a84203718b2412b4631d61b5/6af66/prototype_lookup2.png\" srcset=\"/static/7b54dda3a84203718b2412b4631d61b5/69538/prototype_lookup2.png 160w,\n/static/7b54dda3a84203718b2412b4631d61b5/72799/prototype_lookup2.png 320w,\n/static/7b54dda3a84203718b2412b4631d61b5/6af66/prototype_lookup2.png 640w,\n/static/7b54dda3a84203718b2412b4631d61b5/31493/prototype_lookup2.png 664w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>evan 객체는 프토토타입 체인 내에 있는 모든 원본 객체의 프로퍼티를 공유받는다</small>\n  <br>\n  <br>\n</center>\n<p>이 프로토타입 룩업 과정은 객체의 프로퍼티나 메소드에 접근하는 그 순간마다 수행되기 때문에, 클래스가 정의될 때 모든 상속관계가 함께 평가되는 클래스 기반 언어의 상속과는 조금 다른 느낌이다.</p>\n<p>그러나 추상적으로 생각해보면 원본 객체(부모)의 속성을 물려받고 있다는 점에서 착안하여, 프로토타입 룩업을 토대로 상속을 구현할 수 있다.</p>\n<h2 id=\"프로토타입을-사용한-상속\" style=\"position:relative;\">프로토타입을 사용한 상속<a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%83%81%EC%86%8D\" aria-label=\"프로토타입을 사용한 상속 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자바스크립트에서 프로토타입을 사용하여 상속을 구현하는 방법은 크게 <code class=\"language-text\">Object.create</code> 메소드를 사용하는 방법과 이 메소드를 사용하지않는 <small>(더러운)</small> 방법, 두 가지로 나누어질 수 있다.</p>\n<p>사실 <code class=\"language-text\">Object.create</code>만 사용해도 프로토타입을 사용한 상속은 충분히 구현이 가능하다. 하지만 굳이 두 가지를 나눠서 이야기한 이유는, <code class=\"language-text\">Object.create</code> 메소드가 Internet Explorer 9부터 지원이 되기 때문이다.</p>\n<p>하지만 필자의 행복을 위해 쓰는 포스팅에서 IE 8 이하 환경에 대한 자세한 이야기는 별로 하고 싶지 않으므로 <code class=\"language-text\">Object.create</code>를 사용하지 않는 방법에 대한 코드를 간단하게 <a href=\"https://gist.github.com/evan-moon/a7e5a51e20d22016ea443a03480765b7\" target=\"_blank\" rel=\"nofollow\">필자의 Github Gist 링크</a>로 첨부하겠다.</p>\n<h3 id=\"objectcreate를-사용하자\" style=\"position:relative;\">Object.create를 사용하자<a href=\"#objectcreate%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"objectcreate를 사용하자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">Object.create</code> 메소드는 첫 번째 인자로 생성할 객체의 원본 객체가 될 객체, 두 번째 인자로 새로 생성할 객체에 추가할 프로퍼티를 객체 타입으로 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>proto<span class=\"token operator\">:</span> Object<span class=\"token punctuation\">,</span> properties<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이때 두 번째 인자는 선택사항이며, 단순하게 <code class=\"language-text\">{ test: 1 }</code>처럼 넘기는 것이 아니라, <code class=\"language-text\">Object.defineProperties</code> 메소드를 사용할 때 처럼 데이터 서술자와 접근 서술자를 지정해줘야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">configurable</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">enumerable</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'I am Foo!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>자세한 프로퍼티들의 의미는 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties\" target=\"_blank\" rel=\"nofollow\">MDN Web Docs: Object.defineProperties</a>에서 확인해보도록 하자.</p>\n<p>이 메소드에서 중요한 포인트는 객체의 프로토타입 객체를 지정할 수 있다는 것이며, 이 말인 즉슨 객체의 프로토타입 체인을 내 맘대로 만져줄 수 있다는 것이다. 심지어 동적으로 변경도 가능하다. <small>(사실 이게 JS의 변태적인 면…)</small></p>\n<p>그럼 이제 <code class=\"language-text\">Object.create</code> 메소드와 프로토타입을 사용하여 상속을 한번 구현해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">SuperClass</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">SuperClass</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">I am </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우선 부모 클래스 역할을 할 <code class=\"language-text\">SuperClass</code> 생성자 함수를 생성하고, 이 함수의 프로토타입 객체에 <code class=\"language-text\">say</code> 메소드를 정의했다. 그럼 이제 자식 클래스 역할을 할 생성자 함수를 구현하고, 이 두 개의 함수의 상속 관계도 함께 정의해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">SubClass</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">SuperClass</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">SubClass</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SuperClass</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">SubClass</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> SubClass<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">SubClass</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">run</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is running</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>뭘 이것저것 많이 만진 것 같지만, 막상 하나하나 뜯어보면 별 거 없다.</p>\n<h4 id=\"superclasscallthis\" style=\"position:relative;\">SuperClass.call(this)<a href=\"#superclasscallthis\" aria-label=\"superclasscallthis permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">Function.prototype.call</code> 메소드는 호출된 함수의 실행 컨텍스트를 첫 번째 인자로 받은 녀석으로 변경한다. 즉, <code class=\"language-text\">this</code>의 타겟을 변경하는 것이다.</p>\n<p>즉, <code class=\"language-text\">SuperClass.call(this, name)</code>의 의미는 부모 생성자 함수의 생성자를 호출하되, 실행 컨텍스트를 자식 생성자 함수로 변경하라는 의미이다. 자바로 치면 <code class=\"language-text\">super</code> 메소드를 호출하는 것과 비슷한 느낌이랄까.</p>\n<p>필자는 이때 <code class=\"language-text\">call</code> 메소드를 사용했지만, 뭐가 됐든 부모 생성자 함수의 실행 컨텍스트만 변경해주면 장땡이기 때문에 <code class=\"language-text\">apply</code>나 <code class=\"language-text\">bind</code> 메소드를 사용해도 상관없다.</p>\n<h4 id=\"subclassprototype-변경\" style=\"position:relative;\">SubClass.prototype 변경<a href=\"#subclassprototype-%EB%B3%80%EA%B2%BD\" aria-label=\"subclassprototype 변경 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>그 후 <code class=\"language-text\">Object.create</code> 메소드를 사용하여 <code class=\"language-text\">SuperClass.prototype</code> 객체를 원본 객체로 하는 새로운 객체를 생성하고, 이 객체를 <code class=\"language-text\">SubClass</code>의 프로토타입 객체로 할당해준다. 자식 생성자 함수의 프로토타입 객체와 부모 생성자 함수의 프로토타입 객체 간의 프로토타입 체인, 쉽게 말해 부모 자식 관계를 만들어 주는 것이다.</p>\n<h4 id=\"subclassprorotypeconstructor-변경\" style=\"position:relative;\">SubClass.prorotype.constructor 변경<a href=\"#subclassprorotypeconstructor-%EB%B3%80%EA%B2%BD\" aria-label=\"subclassprorotypeconstructor 변경 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>우리는 부모 생성자 함수의 프로토타입 객체를 토씨 하나 안바꾸고 그대로 복제했기 때문에, 새롭게 생성한 자식 생성자 함수의 프로토타입 객체의  <code class=\"language-text\">constructor</code> 프로퍼티는 여전히 부모 생성자 함수인 <code class=\"language-text\">SuperClass</code>를 참조하고 있다.</p>\n<p>하지만 자식 생성자 함수인 <code class=\"language-text\">SubClass</code>를 통해 생성된 객체가 <code class=\"language-text\">SuperClass</code>를 사용하여 생성된 것처럼 처리되면 안되므로, 다시 <code class=\"language-text\">constructor</code> 프로퍼티를 <code class=\"language-text\">SubClass</code>로 변경해줘야한다.</p>\n<p>이런 과정들을 거치면 다음과 같은 관계가 성립된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ad5010e348e3ea93ea8ee00b6a3a94b/a3c4c/extends.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAD2EAAA9hAHVrK90AAAB/klEQVR42qVSOYtaURR2BrKQFCkCmSappphJkTbFFCEIQggYcILKaBIdAhbpUoRMZ+ef0NZWHTQyATfEQm0EN8R9eS+uuO++d2++e3EmPyAHDufB+d453z3fpxiPx1SSJJrJZGggEGBVpojhcPjHZDKd+ny+r8gfGo3m+Wg0ut5utzSdTkvhcJjG43FaKBRkQgirSgULURRJs9kkvV6PzGYzslwuJTZwvV63bDbb00ql8qpUKp0BegDc9XQ6pYPBYAsiBN8ElePdbvdHPnCxWFC2geU+OMPNZiMqlcojl8t14fF4vgP6pFwu/8Yw2u12JfovOD4Wi73nAxuNhh5b9O12Wy8IAqu6Tqdzge8PWq32vsViuWe1Wh8ybLVafVMsFj+Bse4Wj9T1+31DMBg89vv9DxT/EyB2sK+PIpHIt0QicaWo1+tG3NGIzTxrtZoBT/rcarXOGbv9D4esovcWvUvGKJvNGnFTI+5uwBlMDofjRKVSPeY3ZAHqNBqNsspvAnFEDDwNhUIWKHplNptfzOdzD+vhyVIymaSpVIqCDMeD3TtOG7cgYEMmkwmBskRiHkLAHgKs8sxut790Op2vAT3Esl9MFCi/Q5+sVqs7V9yJAr9RbGaqcqV3ux3fCLCgVquPvF7vF/jwJ1M5l8vd5PN5iudKsizTfXL8rQ//Atnk4klMaXG1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"extends\" title=\"\" src=\"/static/8ad5010e348e3ea93ea8ee00b6a3a94b/6af66/extends.png\" srcset=\"/static/8ad5010e348e3ea93ea8ee00b6a3a94b/69538/extends.png 160w,\n/static/8ad5010e348e3ea93ea8ee00b6a3a94b/72799/extends.png 320w,\n/static/8ad5010e348e3ea93ea8ee00b6a3a94b/6af66/extends.png 640w,\n/static/8ad5010e348e3ea93ea8ee00b6a3a94b/d9199/extends.png 960w,\n/static/8ad5010e348e3ea93ea8ee00b6a3a94b/21b4d/extends.png 1280w,\n/static/8ad5010e348e3ea93ea8ee00b6a3a94b/a3c4c/extends.png 2196w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이제 한번 <code class=\"language-text\">SubClass</code> 생성자 함수를 사용하여 객체를 생성해보고, 제대로 부모 생성자 함수의 속성들을 물려받았는지 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SubClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Evan'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">SubClass <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Evan'</span> <span class=\"token punctuation\">}</span> <span class=\"token comment\">// 에반 객체</span>\nSubClass <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">constructor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Function<span class=\"token operator\">:</span> SubClass<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">run</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Function<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token comment\">// 에반 객체의 원본 객체</span>\nSuperClass <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">say</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Function<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token comment\">// 에반 객체의 원본 객체의 원본 객체</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">evan</code> 객체는 <code class=\"language-text\">SubClass</code>의 프로토타입 객체를 복제해서 정상적으로 생성되었고, <code class=\"language-text\">evan</code> 객체의 원본 객체와 원본 객체의 원본 객체도 잘 체이닝되어있다.</p>\n<p>즉, <code class=\"language-text\">evan</code> -> <code class=\"language-text\">SubClass.prototype</code> -> <code class=\"language-text\">SuperClass.prototype</code>으로 이어지는 프로토타입 체인이 완성된 것이다. 이때 <code class=\"language-text\">evan</code> 객체의 <code class=\"language-text\">run</code>이나 <code class=\"language-text\">say</code> 메소드를 호출하면, 위에서 언급한 프로토타입 룩업을 통해 원본 객체의 메소드를 호출할 수 있다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"/2019/10/23/js-prototype/\">이전 포스팅</a>에 이어 이번에는 자바스크립트에서 프로토타입을 활용한 상속 패턴에 대한 내용을 한번 다뤄보았다.</p>\n<p>솔직히 말해서, 필자가 실무에서 이러한 패턴을 사용해서 상속을 구현해본 경험은 거의 없다. 필자가 개발자로 일을 시작하고 얼마 되지 않아 ES6가 나오기도 했었고, 필자는 당시 자바가 더 익숙했기 때문에 새로 추가된 <code class=\"language-text\">class</code> 키워드에 흠뻑 빠져있었다.</p>\n<p>하지만 일을 시작하고 몇 년이 지나면서 레거시 코드에서 이 상속 패턴을 꽤 마주치기도 했고, 면접에서 이런 패턴에 대해서 물어보는 경우도 있었기 때문에 확실히 공부할 필요는 있는 것 같다.</p>\n<p>아무리 요즘 ES5를 거의 사용하지 않는다고 하지만, 사실 이런 상속 패턴이 자바스크립트를 사용한 프로그램 아키텍처의 근간이기도 하니 말이다.</p>\n<p>이상으로 프로토타입을 사용하여 상속하기 포스팅을 마친다.</p>","fields":{"slug":"20191027-inheritance-with-prototype","path":"/2019/10/27/inheritance-with-prototype/","lang":"ko"},"frontmatter":{"title":"[JS 프로토타입] 프로토타입을 사용하여 상속하기","subTitle":"자바스크립트에서 상속을 구현하는 진짜 방법, 프로토타입 체인의 모든 것","date":"Oct 27, 2019","categories":["프로그래밍","자바스크립트"],"tags":["프로토타입","자바스크립트","JavaScript","Prototype","자바스크립트 기초","프론트엔드 기초","자바스크립트 상속","자바스크립트 클래스"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#d8d8e8","images":{"fallback":{"src":"/static/ffc88c93a54f1c5d1783f61478e57588/d803c/thumbnail.png","srcSet":"/static/ffc88c93a54f1c5d1783f61478e57588/8c230/thumbnail.png 80w,\n/static/ffc88c93a54f1c5d1783f61478e57588/23e25/thumbnail.png 160w,\n/static/ffc88c93a54f1c5d1783f61478e57588/d803c/thumbnail.png 320w,\n/static/ffc88c93a54f1c5d1783f61478e57588/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ffc88c93a54f1c5d1783f61478e57588/3e5ca/thumbnail.webp 80w,\n/static/ffc88c93a54f1c5d1783f61478e57588/b72f1/thumbnail.webp 160w,\n/static/ffc88c93a54f1c5d1783f61478e57588/fc5c5/thumbnail.webp 320w,\n/static/ffc88c93a54f1c5d1783f61478e57588/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#d8d8e8","images":{"fallback":{"src":"/static/ffc88c93a54f1c5d1783f61478e57588/3fbb4/thumbnail.png","srcSet":"/static/ffc88c93a54f1c5d1783f61478e57588/61846/thumbnail.png 750w,\n/static/ffc88c93a54f1c5d1783f61478e57588/d5395/thumbnail.png 1080w,\n/static/ffc88c93a54f1c5d1783f61478e57588/cc835/thumbnail.png 1366w,\n/static/ffc88c93a54f1c5d1783f61478e57588/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/ffc88c93a54f1c5d1783f61478e57588/6858b/thumbnail.webp 750w,\n/static/ffc88c93a54f1c5d1783f61478e57588/f5547/thumbnail.webp 1080w,\n/static/ffc88c93a54f1c5d1783f61478e57588/29310/thumbnail.webp 1366w,\n/static/ffc88c93a54f1c5d1783f61478e57588/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"cbf11ad3-1e69-5178-91bb-d088b7b4453b","tableOfContents":"<ul>\n<li>\n<p><a href=\"#es6%EB%B6%80%ED%84%B0-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%A5%BC-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94%EB%8D%B0%EB%8F%84-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%84-%EA%B5%B3%EC%9D%B4-%EC%95%8C%EC%95%84%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94\">ES6부터 클래스를 지원하는데도 프로토타입을 굳이 알아야 하나요?</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%80-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%8B%A4\">프로토타입은 디자인 패턴이다</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85\">자바스크립트의 프로토타입</a></p>\n<ul>\n<li><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EA%B0%80-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">자바스크립트가 객체를 생성하는 방법</a></li>\n<li><a href=\"#%EB%8F%84%EB%8C%80%EC%B2%B4-%EB%AD%98-%EB%B3%B5%EC%A0%9C%ED%95%B4%EC%84%9C-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A7%8C%EB%93%9C%EB%8A%94-%EA%B1%B8%EA%B9%8C\">도대체 뭘 복제해서 객체를 만드는 걸까?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EC%B2%B4%EC%9D%B8\">프로토타입 체인</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 자바스크립트(JavaScript)하면 빠질 수 없는 프로토타입(Prototype)에 대해서 한번 이야기해보려고 한다. 프로토타입은 자바스크립트를 ES5 시절부터 사용해오던 분들에게는 매우 익숙하지만 ES6부터 시작하신 분들은 대부분 클래스를 사용하기 때문에 익숙한 개념은 아닐 것이라고 생각한다. 필자가 처음 프론트엔드 개발을 시작했을때는 자바스크립트의 ES5 버전에서 막 ES6로 넘어가고 있던 시절이었는데, 기존에는 자바(Java)를 주로 사용하고 있던 필자가 프론트엔드 개발로 넘어오면서 제일 애먹었던 부분이 바…","html":"<p>이번 포스팅에서는 자바스크립트(JavaScript)하면 빠질 수 없는 프로토타입(Prototype)에 대해서 한번 이야기해보려고 한다.</p>\n<p>프로토타입은 자바스크립트를 ES5 시절부터 사용해오던 분들에게는 매우 익숙하지만 ES6부터 시작하신 분들은 대부분 클래스를 사용하기 때문에 익숙한 개념은 아닐 것이라고 생각한다.</p>\n<p>필자가 처음 프론트엔드 개발을 시작했을때는 자바스크립트의 ES5 버전에서 막 ES6로 넘어가고 있던 시절이었는데, 기존에는 자바(Java)를 주로 사용하고 있던 필자가 프론트엔드 개발로 넘어오면서 제일 애먹었던 부분이 바로 이 프로토타입이었다. <small>(물론 애먹는 건 현재진행형이다)</small></p>\n<p>물론 지금은 자바스크립트의 위상이 많이 올라가면서 프로토타입 패턴에 대한 관심도 많아지기 시작했지만, 그래도 당시나 지금이나 여전히 주류는 C 계열 언어나 Java에서 사용하는 클래스를 기반으로한 객체 생성 방식이다.</p>\n<p>그래서 자바스크립트를 처음 접하는 개발자에게 프로토타입 기반 프로그래밍은 상대적으로 낯선 방식일 수 밖에 없고, 이로 인해 기존 개발자들이 자바스크립트로 진입하는데 어려움이 있었다. 그런 이유로 ES6에서는 <code class=\"language-text\">class</code> 예약어가 등장한 것이다.</p>\n<p>사실 필자도 아직 클래스 기반의 객체 생성 방식이 익숙하기 때문에 프로토타입에 대한 공부가 더 필요하다.</p>\n<p>그래서 이번 포스팅에서는 프로토타입 패턴이 무엇인지, 자바스크립트 내에서 프로토타입이 어떤 방식으로 사용되고 있는지에 집중해서 한번 이야기해보려고 한다.</p>\n<h2 id=\"es6부터-클래스를-지원하는데도-프로토타입을-굳이-알아야-하나요\" style=\"position:relative;\">ES6부터 클래스를 지원하는데도 프로토타입을 굳이 알아야 하나요?<a href=\"#es6%EB%B6%80%ED%84%B0-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%A5%BC-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94%EB%8D%B0%EB%8F%84-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%84-%EA%B5%B3%EC%9D%B4-%EC%95%8C%EC%95%84%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94\" aria-label=\"es6부터 클래스를 지원하는데도 프로토타입을 굳이 알아야 하나요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자바스크립트는 ES6부터 <code class=\"language-text\">class</code> 키워드를 사용하여 클래스를 지원하고 있다. 정확히 말하면 프로토타입으로 클래스를 흉내내서 구현한 것이라고 말하는 것이 맞다.</p>\n<p>그런 이유로 많은 개발자들이 자바스크립트의 클래스를 단순한 문법 설탕(Syntactic Sugar)이라고 이야기하지만, 사실 개인적으로 자바스크립트의 클래스는 ES5 시절 프로토타입을 사용하여 객체를 생성했던 방법보다 더 엄격한 제약을 가지고 있기 때문에 단순한 문법 설탕이라기보다는 상위 요소(Superset)라고 하는게 맞지 않나 싶다.</p>\n<p>그러면 그냥 클래스를 쓰면 되는데 왜 프로토타입을 알아야 하는 것일까?</p>\n<p>그 이유는 ES6에서 <code class=\"language-text\">class</code> 키워드를 통해 클래스를 지원하고 있기는 하지만, 이건 자바스크립트가 클래스 기반 언어가 되었다는 의미는 아니기 때문이다. 결국 자바스크립트 안에서의 클래스는 클래스의 탈을 쓴 프로토타입이다.</p>\n<p>그리고 예전에 작성된 레거시 프론트엔드 코드의 경우에는 ES5로 작성된 것도 많기 때문에 아직까지 프론트엔드 개발자들은 ES5를 만져야하는 경우가 왕왕 있는 것이 현실이다. 물론 ES5를 ES6 이상의 버전으로 마이그레이션하려고 해도 기존의 프로토타입 기반의 객체 생성이나 상속이 구현된 코드를 이해할 수 없다면 마이그레이션 또한 불가능하다.</p>\n<h2 id=\"프로토타입은-디자인-패턴이다\" style=\"position:relative;\">프로토타입은 디자인 패턴이다<a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%80-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%8B%A4\" aria-label=\"프로토타입은 디자인 패턴이다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>프로토타입이라고 하면 일반적으로 자바스크립트를 떠올리지만, 사실 프로토타입은 자바스크립트에서만 사용되는 것은 아니고, 그냥 일종의 디자인 패턴 중 하나이다. 자바스크립트 뿐만 아니라 ActionScript, Lua, Perl 등 프로토타입 기반 프로그래밍을 지원하는 다른 언어도 많다.</p>\n<p>그래서 자바스크립트의 프로토타입을 자세히 알아보기 전에 디자인 패턴으로써의 프로토타입을 먼저 알아볼까 한다.</p>\n<p>프로토타입 패턴은 객체를 효율적으로 생성하는 방법을 다루는 패턴 중 하나인데, 주로 객체를 생성하는 비용이 클 때 이를 회피하기 위해 사용된다.</p>\n<p>객체를 생성할 때의 비용이 크다는 말은, 말 그대로 객체를 생성할 때마다 뭔가 일을 많이 해야한다는 뜻이다.</p>\n<p>예를 들어 RPG 게임의 캐릭터를 하나 구현해본다고 생각해보자. 이 캐릭터는 여러가지 장비를 장착할 수 있는 기능을 가지고 있는데, 처음 캐릭터가 생성될 때 딸랑 맨 몸으로 시작하면 유저들이 싫어할 것 같으니 기본적인 장비 몇 가지를 장착한 상태로 생성될 수 있도록 만들어주려고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">// Player.java</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Weapon</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Armor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BasicSward</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Weapon</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BasicArmor</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Armor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Weapon</span> weapon<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Armor</span> armor<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weapon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicSward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 초심자의 목도</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>armor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicArmor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 초보자용 갑주</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>간단하게 만들어보면 대충 이런 느낌이다. <code class=\"language-text\">Player</code> 객체는 자신이 생성될 때 <code class=\"language-text\">BasicSward</code> 객체와 <code class=\"language-text\">BasicArmor</code> 객체까지 함께 생성해야한다.</p>\n<p>이런 경우 그냥 <code class=\"language-text\">Player</code> 객체만 생성하는 상황보다는 객체의 생성 비용이 높다고 할 수 있다. 게다가 캐릭터 생성 시 처음 부여하는 아이템의 종류가 많아질수록 <code class=\"language-text\">Player</code>의 객체의 생성 비용 또한 계속 높아질 것이다.</p>\n<p>음… 근데 곰곰히 생각해보니 캐릭터가 처음 생성되며 가지고 있는 아이템이 항상 같다는 전제 조건이 있다면 생성 비용이 높은 <code class=\"language-text\">Player</code>객체를 딱 한번만 생성하고 그 다음부터는 생성된 객체를 복사해서 사용해도 될 것 같다는 생각이 든다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">// 이건 너무 객체 생성 비용이 높으니까...</span>\n<span class=\"token class-name\">Player</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> john <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> wilson <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 이런 방법으로 접근해보는 것은 어떨까?</span>\n<span class=\"token class-name\">Player</span> player <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> evan <span class=\"token operator\">=</span> player<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> john <span class=\"token operator\">=</span> player<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> wilson <span class=\"token operator\">=</span> player<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 관점으로 접근하는 것이 바로 프로토타입 패턴이라고 할 수 있다. 프로토타입, 즉 원본 객체가 존재하고 그 객체를 복제해서 새로운 객체를 생성하는 방법인 것이다.</p>\n<p>실제로 자바에서 프로토타입 패턴을 사용할때, 복제 대상이 되는 클래스는 보통 <code class=\"language-text\">Cloneable</code> 인터페이스를 사용하여 구현한다. Cloneable 인터페이스에는 <code class=\"language-text\">clone</code> 메소드가 정의되어 있기 때문에, 이 인터페이스를 사용하는 클래스는 반드시 <code class=\"language-text\">clone</code> 메소드를 오버라이딩해서 구현해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Cloneable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Player</span> clone <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">CloneNotSupportedException</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Player</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">clone</code> 메소드를 구현하고나면 이제 <code class=\"language-text\">Player</code> 객체는 복사 가능한 객체가 된다. 즉, 다른 객체들의 원본 객체가 될 수 있는 기능을 가지게 되었다는 것이다.</p>\n<p>이제부터는 <code class=\"language-text\">Player</code> 객체를 추가로 생성하고 싶을 때는 기존에 생성되어 있던 객체를 그대로 복사하면 되기 때문에 높은 객체 생성 비용이 드는 것을 피할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">Player</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Player</span> evanClone <span class=\"token operator\">=</span> evan<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>또한 <code class=\"language-text\">Player</code> 객체는 복사되어 새로운 메모리 공간을 할당받지만, 깊은 복사를 하지 않는 이상 <code class=\"language-text\">Player</code>객체가 가지고 있는 <code class=\"language-text\">BasicSward</code> 객체와 <code class=\"language-text\">BasicArmor</code> 객체는 새롭게 생성되지 않고 기존에 이 객체들이 할당된 메모리 공간을 참조하기만 한다.</p>\n<p>즉, 잘만 쓴다면 메모리 공간을 아낄 수도 있다는 것이다. 자바스크립트에서 원시 자료형은 Call by value, 그 외 자료형은 Call by reference를 사용하는 것과 동일한 원리이다.</p>\n<p>여기까지 듣고 나서 예상하신 분들도 있겠지만, 그 말인 즉슨 잠깐 정신줄 놓고 코딩하다보면 이런 슬픈 상황도 발생할 수 있다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">Player</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Player</span> evanClone <span class=\"token operator\">=</span> evan<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    evanClone<span class=\"token punctuation\">.</span>weapon<span class=\"token punctuation\">.</span>attackPoint <span class=\"token operator\">=</span> <span class=\"token number\">40</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에반 무기 공격력 -> \"</span> <span class=\"token operator\">+</span> evan<span class=\"token punctuation\">.</span>weapon<span class=\"token punctuation\">.</span>attackPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에반 복사본 무기 공격력 -> \"</span> <span class=\"token operator\">+</span> evanClone<span class=\"token punctuation\">.</span>weapon<span class=\"token punctuation\">.</span>attackPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">에반 무기 공격력 -> 40\n에반 복사본 무기 공격력 -> 40</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd3f0d7227b1bc002df8850727239515/14007/overtime_work.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 69.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHSsUgYAP/EABkQAAIDAQAAAAAAAAAAAAAAAAECABAREv/aAAgBAQABBQJtCg0zTrFn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAABABESFBYf/aAAgBAQAGPwLFHVcLZ//EABwQAAICAgMAAAAAAAAAAAAAAAEhABExUWFxkf/aAAgBAQABPyHMexUwArSVxCAWMJw1jtwgGn6n/9oADAMBAAIAAwAAABAwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQEBAQABBQAAAAAAAAAAAAERIQBBMVFxoeH/2gAIAQEAAT8QswKlv8uFyIWNGGx9usMy6R5Gi7WvH68u4sIfRrPrrBBnjHf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"overtime work\" title=\"\" src=\"/static/cd3f0d7227b1bc002df8850727239515/14007/overtime_work.jpg\" srcset=\"/static/cd3f0d7227b1bc002df8850727239515/0913d/overtime_work.jpg 160w,\n/static/cd3f0d7227b1bc002df8850727239515/cb69c/overtime_work.jpg 320w,\n/static/cd3f0d7227b1bc002df8850727239515/14007/overtime_work.jpg 582w\" sizes=\"(max-width: 582px) 100vw, 582px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>디버깅 지옥이 펼쳐진다...</small>\n</center>\n<p>정리해보자면 프로토타입 패턴이란, 객체를 생성할 때 원본이 되는 객체를 복사해서 생성하는 패턴이라고 할 수 있다.</p>\n<p>물론 자바스크립트의 프로토타입은 단순히 몇 개의 객체가 복제 관계를 가지는 것이 아니라, 자바스크립트 내의 모든 객체 전체가 복제 관계로 얽혀있기 때문에 이것보다는 약간 더 복잡하긴 하지만, 근본적인 원리 자체는 프로토타입 패턴을 따라간다.</p>\n<p>그럼 이제 자바스크립트가 객체를 생성할 때 프로토타입 패턴을 어떤 식으로 사용하고 있는 지 한번 알아보도록 하자.</p>\n<h2 id=\"자바스크립트의-프로토타입\" style=\"position:relative;\">자바스크립트의 프로토타입<a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85\" aria-label=\"자바스크립트의 프로토타입 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>앞서 설명했듯이 프로토타입 패턴은 객체를 생성할 때 사용하는 패턴이다. 필자가 위에서 예시로 사용한 언어인 자바는 클래스 기반 프로그래밍을 지원하기 때문에, 특수한 패턴을 사용해야지만 프로토타입이라는 개념을 사용할 수 있다.</p>\n<p>그러나 애초에 프로토타입 기반 프로그래밍을 지원하는 자바스크립트의 경우에는 애초에 모든 객체를 생성할 때 프로토타입을 사용하기 때문에, 객체를 생성하기만 해도 위에서 필자가 설명한 프로토타입 패턴이 적용된다.</p>\n<p>그렇기 때문에 우선 자바스크립트에서 말하는 객체(Object)가 무엇인지, 그리고 그 객체가 생성된다는 것이 무엇을 의미하는 것인지 알아볼 필요가 있다.</p>\n<h3 id=\"자바스크립트가-객체를-생성하는-방법\" style=\"position:relative;\">자바스크립트가 객체를 생성하는 방법<a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EA%B0%80-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"자바스크립트가 객체를 생성하는 방법 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>컴퓨터 공학에서의 객체(Object)는 “현실의 대상을 프로그램에 반영한 것”이다. 즉, 여러 개의 프로퍼티(특징)와 메소드(행위)를 가지고 현실 세계의 무언가를 흉내내는 존재인 것이다.</p>\n<p>클래스 기반 언어에서는 클래스를 생성하고 그 클래스를 사용하여 객체를 생성해야하지만, 자바스크립트는 간단한 문법만으로 객체를 생성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">say</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hi, I am </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 방식을 우리는 “리터럴(Literal)로 객체를 선언한다”고 한다. 리터럴은 소스 코드의 고정된 값을 대표하는 일종의 단축어 같은 개념이기 때문에, 우리는 간단한 문법만으로 객체를 생성했다고 느끼지만 내부적으로는 객체를 생성하는 일련의 매커니즘이 작동하고 있다.</p>\n<p>예를 들어, 다른 언어에서는 이런 리터럴 문법을 사용하여 객체를 생성할 때 내부적으로 클래스를 사용하게된다. 파이썬 같은 경우, 딕셔너리를 리터럴로 선언하고 타입을 찍어보면 <code class=\"language-text\">dict</code> 클래스가 출력되는 것을 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">29</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>my_dict<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;class 'dict'></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>우리는 <code class=\"language-text\">dict({ 'name': 'Evan', 'age': 29 })</code>와 같이 클래스를 명시적으로 사용하지않고 리터럴로 딕셔너리를 생성했지만 내부적으로는 제대로 <code class=\"language-text\">dict</code> 클래스를 사용해서 객체를 생성했다는 것이다.</p>\n<p>자바 또한 리터럴 문법을 지원하는 배열(Array)을 선언한 후 출력해보면 결국 클래스를 기반으로 배열 객체를 생성한다는 것을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"Evan\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"29\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[Ljava.lang.String;@7852e922</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 말인 즉슨, 다른 언어와 마찬가지로 자바스크립트의 객체도 갑자기 혼자서 뿅 하고 생성되는 것이 아니라 분명히 뭔가를 사용해서 만들어내고 있다는 말이다.</p>\n<p>하지만 자바스크립트에는 클래스라는 개념 자체가 없는데 뭘 사용해서 객체를 만들어내고 있는 것일까?</p>\n<blockquote>\n<p>답은 바로 함수(Function)이다.</p>\n</blockquote>\n<p>자바스크립트에서 객체가 생성되는 원리를 조금 더 파헤쳐보기 위해서 위에서 리터럴로 선언했던 <code class=\"language-text\">evan</code> 객체를 이번에는 다른 방법으로 선언해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>왠지 클래스 기반 언어에서 클래스를 사용하여 객체를 생성하는 것과 유사한 문법이 나타났다. 이런 방식을 생성자(Constructor)를 사용하여 객체를 생성한다고 한다.</p>\n<p>클래스 기반 언어라면 <code class=\"language-text\">Object</code>는 클래스겠지만, 자바스크립트에서는 클래스가 아닌 함수이다.</p>\n<p>즉, 자바스크립트에서의 생성자는 함수가 가지고 있다는 것이다. 저게 진짜 함수인지 알고 싶으니, 브라우저 콘솔 창을 열고 <code class=\"language-text\">Object</code>를 한번 출력해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">ƒ <span class=\"token function\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>native code<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n<span class=\"token string\">\"function\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>음, 콘솔로 찍어보니 <code class=\"language-text\">Object</code>는 확실하게 빼박캔트 함수가 맞다.</p>\n<p>필자가 처음 자바스크립트를 사용하기 시작했을 때 받아들이기 어려웠던 부분이 바로 이 부분이었다.</p>\n<p>클래스 기반 프로그래밍에 익숙했던 필자에게 <code class=\"language-text\">new</code> 키워드와 생성자는 클래스만 가질 수 있는 것이었는데 갑자기 뜬금없이 함수가 나와버리니 받아들이기 힘들었던 것 같다. <small>(머리로는 알겠는데 마음이…)</small></p>\n<p>어쨌든 이제 자바스크립트가 객체를 생성할 때 함수를 사용해서 생성한다는 것을 알게되었다. 지금까지 알아낸 내용을 정리해보자면 다음과 같다.</p>\n<blockquote>\n<ol>\n<li>프로토타입 패턴이란 객체를 생성할 때 원본 객체를 복제하여 생성하는 방법이다.</li>\n<li>자바스크립트는 객체를 생성할 때 프로토타입 패턴을 사용한다.</li>\n<li>자바스크립트는 객체를 생성할 때 함수를 사용한다.</li>\n</ol>\n</blockquote>\n<p>그렇다는 것은 자바스크립트가 함수를 사용하여 객체를 생성할 때 무언가를 참조하고 복제해서 객체를 생성한다는 말이다. 이제부터 그 “무언가”의 정체를 알아 볼 시간이다.</p>\n<h3 id=\"도대체-뭘-복제해서-객체를-만드는-걸까\" style=\"position:relative;\">도대체 뭘 복제해서 객체를 만드는 걸까?<a href=\"#%EB%8F%84%EB%8C%80%EC%B2%B4-%EB%AD%98-%EB%B3%B5%EC%A0%9C%ED%95%B4%EC%84%9C-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A7%8C%EB%93%9C%EB%8A%94-%EA%B1%B8%EA%B9%8C\" aria-label=\"도대체 뭘 복제해서 객체를 만드는 걸까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사실 디자인 패턴으로써의 프로토타입 패턴은 생각보다 그렇게 어렵지 않다. 그저 객체를 생성할 때 원본 객체를 복제해서 생성한다는 개념이기 때문이다.</p>\n<p>마찬가지로 자바스크립트 또한 뭔가를 복제해서 새로운 객체를 생성하고 있다. 그럼 이제 자바스크립트가 도대체 뭘 복제해서 객체를 생성하고 있는 것인지 알아보기 위해 간단한 함수를 하나 선언해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> evan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">User <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__proto__</span><span class=\"token operator\">:</span> Object <span class=\"token punctuation\">}</span>\nobject</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>위에서 이야기했듯이 자바스크립트는 함수를 사용하여 객체를 생성하기 때문에, 이렇게 클래스를 사용하는 것과 유사한 느낌으로 객체를 생성할 수 있다.</p>\n<p>그렇다면 <code class=\"language-text\">evan</code> 객체는 무엇으로부터 복제된 것일까? 간단하게 생각하면 <code class=\"language-text\">User</code> 함수라고 생각해볼수 있겠지만, 사실은 <code class=\"language-text\">User</code> 함수를 복제한 것이 아니라 ”<code class=\"language-text\">User</code> 함수의 프로토타입 객체”를 복제한 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f720bb5dac9cb6fe226a654ae54db785/fce5f/surprise.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBAb/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQIE/9oADAMBAAIQAxAAAAFjUkXw3JljGf/EABwQAQEAAAcAAAAAAAAAAAAAAAECAAMREhMhMf/aAAgBAQABBQKVI5mqno3aYzfaVf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AVf/xAAZEQADAAMAAAAAAAAAAAAAAAAAARECFGH/2gAIAQIBAT8ByVUNTp//xAAbEAACAQUAAAAAAAAAAAAAAAAAAVEQEUFh0f/aAAgBAQAGPwKyQliTtNEn/8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhETFBUWH/2gAIAQEAAT8hVAo9hRosh1Dk3tgPbfsQWMK8HIpVfpZ//9oADAMBAAIAAwAAABDH/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCD/8QAGhEBAAEFAAAAAAAAAAAAAAAAAQARIVGh4f/aAAgBAgEBPxCr5xbd17P/xAAcEAEAAgMBAQEAAAAAAAAAAAABESEAMUFhgZH/2gAIAQEAAT8QnyZjiXvhjJENEh5v8yCLNaFZfPMRXWpBfwytwJBUtfcWGOrEZ//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"surprise\" title=\"\" src=\"/static/f720bb5dac9cb6fe226a654ae54db785/fce5f/surprise.jpg\" srcset=\"/static/f720bb5dac9cb6fe226a654ae54db785/0913d/surprise.jpg 160w,\n/static/f720bb5dac9cb6fe226a654ae54db785/cb69c/surprise.jpg 320w,\n/static/f720bb5dac9cb6fe226a654ae54db785/fce5f/surprise.jpg 497w\" sizes=\"(max-width: 497px) 100vw, 497px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이렇게 갑자기 프로토타입이 나온다고...?</small>\n</center>\n<p>뜬금없어서 바로 이해가 안될 수도 있겠지만, 단순하게 생각해보면 쉽다. 만약 객체를 생성하면서 함수를 복제했다면 생성된 객체도 <code class=\"language-text\">Object</code> 타입이 아니라 <code class=\"language-text\">Function</code> 타입이어야 하지 않겠는가?</p>\n<p>하지만 <code class=\"language-text\">evan</code> 객체는 <code class=\"language-text\">Object</code> 타입을 가지고 있다. 즉, 이 함수 자체가 아니라 다른 객체 타입의 무언가를 복제했다는 것이고, 그 원본 객체가 <code class=\"language-text\">User</code> 함수의 프로토타입 객체인 것이다.</p>\n<p>필자는 <code class=\"language-text\">User</code> 함수의 프로토타입을 명시적으로 선언하지 않았지만, 자바스크립트는 함수가 생성될 때 자동으로 그 함수의 프로토타입 객체(Prototype Object)도 함께 생성하고 해당 함수의 <code class=\"language-text\">prototype</code> 프로퍼티에 연결해둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">constructor</span><span class=\"token operator\">:</span> f <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">__proto__</span><span class=\"token operator\">:</span> Object <span class=\"token punctuation\">}</span>\nobject</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>분명히 필자는 함수만 선언했는데, <code class=\"language-text\">User.prototype</code> 프로퍼티에 뭔가 이것저것 가지고 있는 객체 녀석이 1+1으로 붙어나왔다. 함수를 생성하면 무조건 그 함수의 프로토타입 객체도 함께 생성된다는 것이 키포인트다.</p>\n<p>그리고 이 프로토타입 객체는 함수를 사용해서 새로운 객체를 생성할 때 원본 객체 역할을 해줄 객체를 의미한다.</p>\n<p>즉, <code class=\"language-text\">new User()</code>라는 문법을 사용하여 새로운 객체를 만들게 되면 <code class=\"language-text\">User</code> 함수 자체가 아니라 <code class=\"language-text\">User.prototype</code>에 할당되어있는 프로토타입 객체를 복제해서 새로운 객체를 만든다는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/038db1dd67c62b78ef0c8473d3468899/21e8f/prototype.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAD2EAAA9hAHVrK90AAABqklEQVR42qWSSWoCURCGmwwgRMgiBJNVLpBjtLucwlu4ktDdSAIhBCSriHgED+BGXCiKA+KIOKA4i5hWW7uVyl+PFsywEFLw07zqel8Nr6TFYkHz+ZzK5TLF43FKJBLU7XZJ13WTYM1m80mCZbPZdz4j1oKPYrEYRaNRgp+m0ymZpkmVSoUkxFis1WplJZNJq9VqWfjJMhgwHo9VBubz+Q8+b7dbq1gsUi6XI8QL8HA45F+EuyQxvdfr0WazoUPb7XaciBqNxisD6/X6C5JyJ2an0xEVHcSKL/ularXqR0Y/2vQPBgOh0WjkR1YN1b0VCoUHBqIdFWdKpVIzVPJpGMYCCVYAf67Xax08HaPQpWMtEAg4VVW9jUQirmAweO3xeO7cbvd9OBy+8vl8N5qmubxer0v6h51BF7+8mKGCVpR2u62USiWlVqsp/X6ffY+TyeQFI5E5Di2d/Lh6/idwP1i8nlgZfil70GLqgGt23NlRFVqw5XIpVsd+2b2MQ2AoFHLYENYp5PgTyAudTqf5Is1mM0KbQmhZrE0mk3nmOFmWL23AXk4b/s2+AN9ErkY8uSpGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"prototype\" title=\"\" src=\"/static/038db1dd67c62b78ef0c8473d3468899/6af66/prototype.png\" srcset=\"/static/038db1dd67c62b78ef0c8473d3468899/69538/prototype.png 160w,\n/static/038db1dd67c62b78ef0c8473d3468899/72799/prototype.png 320w,\n/static/038db1dd67c62b78ef0c8473d3468899/6af66/prototype.png 640w,\n/static/038db1dd67c62b78ef0c8473d3468899/d9199/prototype.png 960w,\n/static/038db1dd67c62b78ef0c8473d3468899/21b4d/prototype.png 1280w,\n/static/038db1dd67c62b78ef0c8473d3468899/21e8f/prototype.png 1684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>evan 객체야, 내가 아니라 내 프로토타입 객체를 복제하렴</small>\n</center>\n<p>이때 <code class=\"language-text\">User</code> 함수가 생성되며 함께 생성된 User 함수의 프로토타입 객체를 프로토타입 프로퍼티(Prototype Property)라고 한다.</p>\n<p>그럼 이 프로토타입 객체가 가지고 있는 프로퍼티인 <code class=\"language-text\">constructor</code>와 <code class=\"language-text\">__proto__</code>는 뭘 의미하는 걸까?</p>\n<h4 id=\"constructor\" style=\"position:relative;\">constructor<a href=\"#constructor\" aria-label=\"constructor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>함수가 생성되며 함께 생성된 프로토타입 객체는 모두 <code class=\"language-text\">constructor</code>라는 프로퍼티를 가지고 있다. 그리고 이 프로퍼티에는 이 프로토타입 객체가 생성될 때 선언했던 함수가 들어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">constructor</span><span class=\"token operator\">:</span> f <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">__proto__</span><span class=\"token operator\">:</span> Object\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>함수를 선언하면 함수와 함께 해당 함수의 프로토타입 객체도 함께 생성되며 이 둘을 연결하게 된다. 이때 함수는 프로토타입 객체의 <code class=\"language-text\">constructor</code> 프로퍼티로 연결되고, 프로토타입 객체는 함수의 <code class=\"language-text\">prototype</code> 프로퍼티로 연결되는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7a8216c54a105c3b1df15c379d0cb707/2b984/prototype_connection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 15.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAD2EAAA9hAHVrK90AAAA4UlEQVR42i2OvWqEUBCF7VMkVYogSbkvJQiyiLC9gTQWNoGYB/AFfARFsRBrG0FErAS18gf/ua5yZ+eGnGKGM5wzfFzf9wdTVVVHEARHURT3bdvoPM+jrusfoii+hGH45fv+pyAIT5IkXZZlue/7DnEcU9d1IYoiYL4sS+DGcQRCCJznCf+ibOCNKIpysSzrLcuyW5IkNyy/aprGI8Re1zUgBMXngP6v2DQNcHmeG2maGhgw1nU1hmH4mabpt23bb1mWn23b5h3HuXqedzVN811VVR6zBDvQdR1lIIyObUb4AEHCviv5bRQfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"prototype connection\" title=\"\" src=\"/static/7a8216c54a105c3b1df15c379d0cb707/6af66/prototype_connection.png\" srcset=\"/static/7a8216c54a105c3b1df15c379d0cb707/69538/prototype_connection.png 160w,\n/static/7a8216c54a105c3b1df15c379d0cb707/72799/prototype_connection.png 320w,\n/static/7a8216c54a105c3b1df15c379d0cb707/6af66/prototype_connection.png 640w,\n/static/7a8216c54a105c3b1df15c379d0cb707/d9199/prototype_connection.png 960w,\n/static/7a8216c54a105c3b1df15c379d0cb707/21b4d/prototype_connection.png 1280w,\n/static/7a8216c54a105c3b1df15c379d0cb707/2b984/prototype_connection.png 2164w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>함수와 프로토타입 객체는 서로 연결되어있다</small>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> User<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 생성자 프로퍼티는 이 함수를 통해 생성된 객체 입장에서 보았을 때 “나를 만들 때 어떤 함수가 호출되었냐?”를 의미한다. 만약 이 연결이 없다면 새로 생성된 객체는 자신을 만들 때 어떤 생성자 함수가 호출되었는지 알 수가 없다.</p>\n<p>새롭게 생성된 객체는 자신을 생성할 때 어떤 원본 객체를 복사했는지에 대한 링크는 가지고 있지만 어떤 생성자가 호출되었는지에 대한 링크는 가지고 있지 않기 때문이다.</p>\n<p>하지만 원본 객체의 <code class=\"language-text\">constuctor</code> 프로퍼티에 생성자 함수가 연결되어있기 때문에 새롭게 만들어진 객체는 자신의 원본 객체에 접근해서 이 프로퍼티를 참조함으로써 자신이 만들어질때 어떤 생성자 함수가 호출되었는지를 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span><span class=\"token class-name\">__proto__</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> User<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이때 생성된 객체가 자신의 원본 객체에 접근할 수 있는 프로퍼티가 바로 <code class=\"language-text\">__proto__</code> 프로퍼티이다.</p>\n<h4 id=\"__proto__\" style=\"position:relative;\">__proto__<a href=\"#__proto__\" aria-label=\"__proto__ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>방금 생성자를 설명하면서 함수를 통해 새롭게 생성된 객체는 원본 객체와의 연결을 가지고 있다고 했다. 이때 이 연결을 프로토타입 링크(Prototype Link)라고 한다.</p>\n<p><code class=\"language-text\">Object.prototype</code>을 제외한 자바스크립트 내의 모든 객체는 원본 객체를 기반으로 복사되어 생성되었기 때문에, 자신의 원본 객체로 연결되어있는 프로토타입 링크 또한 모든 객체가 가지고 있다. 이때 이 링크가 담기는 프로퍼티가 <code class=\"language-text\">__proto__</code> 프로퍼티이다.</p>\n<p><code class=\"language-text\">Object.prototype.__proto__</code>가 존재하지 않는 이유는 밑에서 후술하도록 하겠다. 우선은 객체들이 자신의 원본 객체로 통하는 프로토타입 링크를 가지고 있다는 사실에만 집중하자.</p>\n<blockquote>\n<p>이 포스팅에서는 이해를 돕기위해 <code class=\"language-text\">__proto__</code> 프로퍼티를 그대로 사용하고 있다.\n그러나 해당 프로퍼티는 ECMAScript 2015에서는 표준이었지만 현재는 표준이 아니므로 <code class=\"language-text\">Object.getPrototypeOf()</code>를 사용하는 것을 추천한다.</p>\n</blockquote>\n<p>즉 <code class=\"language-text\">User</code> 함수를 사용하여 생성한 객체는 <code class=\"language-text\">User.prototype</code> 객체를 복사하여 생성된 객체이기 때문에, 이 객체들은 원본인 <code class=\"language-text\">User.prototype</code> 객체를 자신의 <code class=\"language-text\">__proto__</code> 프로퍼티에 연결해두는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evan<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>그렇다면 이 프로토타입 링크를 사용해서 계속 해서 원본 객체를 추적하다보면, 결국은 자바스크립트 내의 모든 객체들이 최종적으로 어떤 원본 객체를 복사해서 생성된 것인지 알 수 있지 않을까?</p>\n<h2 id=\"프로토타입-체인\" style=\"position:relative;\">프로토타입 체인<a href=\"#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EC%B2%B4%EC%9D%B8\" aria-label=\"프로토타입 체인 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자바스크립트 내의 사용되는 모든 객체들은 전부 이런 프로토타입 기반 방식으로 정의되고 생성된다. 즉, <code class=\"language-text\">String</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Array</code>와 같이 우리가 일반적으로 사용하고 있는 빌트인 객체들도 모두 같은 방식을 사용해서 만들었다는 것이다.</p>\n<p>그렇다면 이 객체들은 어떤 프로토타입 객체를 복사해서 만들어진 것일까?</p>\n<p><code class=\"language-text\">String</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Array</code>든 뭐가 됐든 자바스크립트 내에 존재하는 모든 것들은 바로 <code class=\"language-text\">Object</code> 함수의 프로토타입인 <code class=\"language-text\">Object.prototype</code>을 시작으로 해서 복제된다.</p>\n<p>위에서 <code class=\"language-text\">__proto__</code>를 설명하면서 <code class=\"language-text\">Object.prototype</code> 객체는 프로토타입 링크, 즉 원본 객체로 통하는 링크가 없다고 이야기했었는데, 그 이유는 바로 <code class=\"language-text\">Object.prototype</code>이 모든 객체들의 조상님이기 때문이다.</p>\n<p>이게 정말인지 확인해보고 싶다면, 아무 객체나 골라잡아서 그 객체의 <code class=\"language-text\">__proto__</code> 프로퍼티를 통해 쭉쭉 올라가보면 된다.</p>\n<p>일단 만만한 <code class=\"language-text\">String</code>을 사용해서 조상을 추적해보려고 하는데, <code class=\"language-text\">String</code> 객체를 생성하는 함수부터 출발할 것인지, <code class=\"language-text\">String</code> 객체부터 출발할 것인지에 따라 조상까지 올라가는 길이 달라진다.</p>\n<p><code class=\"language-text\">String</code> 객체를 생성하는 함수와 <code class=\"language-text\">String</code> 객체는 당연히 원본이 다르기 때문이다. 필자는 그 중 <code class=\"language-text\">String</code> 객체를 생성할 수 있는 생성자 함수를 선택했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> first <span class=\"token operator\">=</span> String<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> second <span class=\"token operator\">=</span> first<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'첫번째 조상 -> '</span><span class=\"token punctuation\">,</span> first<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'두번째 조상 -> '</span><span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">첫 번째 조상 -> Function\n두 번째 조상 -> Object</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>자바스크립트의 모든 함수는 자신의 원본으로 <code class=\"language-text\">Function.prototype</code> 객체를 원본으로 가진다. 그리고 Function.prototype은 결국 객체이기 때문에, 당연히 원본으로 <code class=\"language-text\">Object.prototype</code> 객체를 원본으로 가진다.</p>\n<p>그럼 여기서 한번 더 올라가면 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> third <span class=\"token operator\">=</span> second<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>third<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Uncaught TypeError: Cannot read property 'constructor' of null at &lt;anonymous>:1:28</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>앗, <code class=\"language-text\">TypeError</code>가 발생했다. 에러메세지를 보아하니 <code class=\"language-text\">Object.prototype</code> 객체의 원본 객체인 <code class=\"language-text\">Object.prototype.__proto__</code>는 <code class=\"language-text\">null</code>인 모양이다.</p>\n<p>즉, <code class=\"language-text\">Object</code>의 위로는 더 이상 조상이 없는 것이다. 지금 살펴본 이 관계를 간단한 다이어그램으로 나타내어보면 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/93b117acac7ef6b38673300c3c764241/0f96c/prototype-chain.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAD2EAAA9hAHVrK90AAACRUlEQVR42n1STWgTURDeJlVrFdSLkGO1gkLwkot4MEiPBvXkIQS9yNoqC40WPIR2L1I8leKpuYaeckhIAhVEEpKANuSH/Jl/8rO4+V02/z00m7zOrFsxFx/Mm3kz874338yjKIpaMJvNl0FT4XD4I4FVKpVOA4HA1O/3T9FGXy6Xe4s5LMsugVKDvlitVlcgfgfCy9T5SiaTtzwejxbtRqPxDi+Px2NpNBqhxqOEWyqV2sQck8l0BdQFq9V6LZ1OmyORyKder7eKMUhboDKZzA464XATbH29Xnd0u10bAB4C4OFwOLS1221HsVh8jJfsdruaml9Ysepfh0qn08kl5/P5RwB2UC6X99xu977L5doH354oigcA+FCpYu6yRqNZngPEF41G4w0FcOucMlRGBoOBbKOv0+nQCuAi3vH5fItgq/V6/VXsJ55R5AoNBoNcYTAYfAWNTvE8/xOSQyiSJP3o9/u/OI5/rgD+nzJQeRkKhV5D4nXooVYQBAvHcR9gwlsolUrlfbPZtMCU7ytTVsGDz6ANDDCinU4nE4vFNoDNejabXaei0ehTqOwF9gZovSF/lgR9JPAYmc1mMuVMTZCnzDDMJRhYEH2ValUCEFIoFMh0OiXwMJEp0zQtU4bAJnwBAhVKCvBfwN+t1gYQVutZ35IoCkeddot0RWEymZzOxicnMmCtViPy38GmKj18kEgkduPx+A58FRboo2yD/ZnjSlqL7Xjl23cv6/V6v3w9zjxxRAf3to86a5Ecf7fXa90GtqtnOODSpjeTadoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"prototype chain\" title=\"\" src=\"/static/93b117acac7ef6b38673300c3c764241/6af66/prototype-chain.png\" srcset=\"/static/93b117acac7ef6b38673300c3c764241/69538/prototype-chain.png 160w,\n/static/93b117acac7ef6b38673300c3c764241/72799/prototype-chain.png 320w,\n/static/93b117acac7ef6b38673300c3c764241/6af66/prototype-chain.png 640w,\n/static/93b117acac7ef6b38673300c3c764241/d9199/prototype-chain.png 960w,\n/static/93b117acac7ef6b38673300c3c764241/21b4d/prototype-chain.png 1280w,\n/static/93b117acac7ef6b38673300c3c764241/0f96c/prototype-chain.png 2248w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>뭔가 복잡해보이지만 별 것 없다. <code class=\"language-text\">String</code> 생성자 함수의 원본 객체는 <code class=\"language-text\">Function.prototype</code>이다. 그리고 <code class=\"language-text\">const a = 'evan'</code>과 같이 선언된 <code class=\"language-text\">String</code> 객체는 자신을 생성한 <code class=\"language-text\">String</code> 생성자 함수의 프로토타입인 <code class=\"language-text\">String.prototype</code>을 원본으로 가질 것이고, <code class=\"language-text\">String.prototype</code>은 객체이기 때문에 당연히 <code class=\"language-text\">Object.prototype</code>을 원본으로 가지는 것이다.</p>\n<p>이렇게 프로토타입으로 이루어진 객체들의 관계를 프로토타입 체인(Prototype Chain)이라고 한다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 필자가 프로토타입에 대한 포스팅을 쓰려고 했던 이유는 얼마 전 면접에서 자바스크립트의 프로토타입을 사용하여 Private Static 메소드를 구현하라는 문제를 받았다가 결국 못 풀었기 때문이다.</p>\n<p>자바스크립트의 클로저와 프로토타입을 활용하여 풀어야하는 문제였는데, 필자는 기본기가 부족한 나머지 풀어내지 못했다.</p>\n<p>그래서 원래는 프로토타입을 사용한 다양한 상속 기법들과 클로저를 사용한 멤버의 은닉 등도 함께 소개해보려고 했지만, 늘 그렇듯 분량 조절 실패로 인해 다른 포스팅에서 별도로 다뤄야할 것 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8d8688b810398dcf20c57de5e7c319b4/066f9/no_think.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 116.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7phJsAgUH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEAAQUCH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABUQAQEAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/AhT/AP/EABoQAQACAwEAAAAAAAAAAAAAAAEAERAxQYH/2gAIAQEAAT8hZ3CXuFnrDyJcNT//2gAMAwEAAgADAAAAEL/3w//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQEAAgMBAQAAAAAAAAAAAAERACEQMVFBcf/aAAgBAQABPxByHuCEGn6XrgkAEfcaMRdFll1s42f1kmu8KQ5//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no think\" title=\"\" src=\"/static/8d8688b810398dcf20c57de5e7c319b4/066f9/no_think.jpg\" srcset=\"/static/8d8688b810398dcf20c57de5e7c319b4/0913d/no_think.jpg 160w,\n/static/8d8688b810398dcf20c57de5e7c319b4/cb69c/no_think.jpg 320w,\n/static/8d8688b810398dcf20c57de5e7c319b4/066f9/no_think.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>사실 애초에 분량 조절 따위를 생각하고 쓰지 않는다</small>\n</center>\n<p>필자처럼 기존의 클래스 기반 객체 생성방식에 익숙한 개발자들에게 자바스크립트의 프로토타입은 꽤나 복잡하게 느껴진다. 디자인 패턴으로써의 프로토타입은 단순히 객체를 복제해서 새로운 객체를 생성한다는 정도의 개념에 그치지만 자바스크립트의 프로토타입 체인은 그것보다 훨씬 더 복잡하게 연결되어있기 때문이다.</p>\n<p>하지만 프로토타입 체인이나 프로토타입을 사용한 각종 상속 기법은 어렵게 느껴질 수 있어도, 프로토타입의 뼈대 자체는 그렇게 어렵지 않다고 생각한다.</p>\n<blockquote>\n<ol>\n<li>객체는 함수를 사용해서 만들어지고, 객체는 함수의 프로토타입 객체를 복제하여 생성된다.</li>\n<li>모든 객체는 자신이 어떤 원본 객체를 복제하여 생성된 것인지에 대한 정보를 가지고 있다.</li>\n</ol>\n</blockquote>\n<p>물론 원본 객체에 대한 정보를 런타임에 동적으로 변경할 수 있는 등 변태같은 짓들이 가능하기도 하고, 이를 사용한 다양한 기법들도 있기는 하지만 기본은 결국 저 두 가지라고 할 수 있을 것 같다. 다음 포스팅에서는 본격적으로 프로토타입을 사용한 상속 기법과 객체의 프로퍼티를 탐색하는 방법인 프로토타입 룩업 등에 대해서 설명하도록 하겠다.</p>\n<p>이상으로 자바스크립트의 프로토타입 훑어보기 포스팅을 마친다.</p>","fields":{"slug":"20191023-js-prototype","path":"/2019/10/23/js-prototype/","lang":"ko"},"frontmatter":{"title":"[JS 프로토타입] 클래스보다 깊은 세계, 자바스크립트 프로토타입 완전 정복","subTitle":"클래스 문법 뒤에 숨겨진 자바스크립트의 진짜 객체 생성 원리","date":"Oct 23, 2019","categories":["프로그래밍","자바스크립트"],"tags":["프로토타입","자바스크립트","JavaScript","Prototype","자바스크립트 기초","프론트엔드 기초"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#98c878","images":{"fallback":{"src":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/d803c/thumbnail.png","srcSet":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/8c230/thumbnail.png 80w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/23e25/thumbnail.png 160w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/d803c/thumbnail.png 320w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/3e5ca/thumbnail.webp 80w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/b72f1/thumbnail.webp 160w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/fc5c5/thumbnail.webp 320w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#98c878","images":{"fallback":{"src":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/3fbb4/thumbnail.png","srcSet":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/61846/thumbnail.png 750w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/d5395/thumbnail.png 1080w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/cc835/thumbnail.png 1366w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/c4c3f4bd82adfc1f6422180eedbd4fb0/6858b/thumbnail.webp 750w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/f5547/thumbnail.webp 1080w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/29310/thumbnail.webp 1366w,\n/static/c4c3f4bd82adfc1f6422180eedbd4fb0/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"67beef61-375c-5350-835e-920406b53ae9","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%9E%99heap%EC%9D%B4%EB%9E%80\">힙(Heap)이란?</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%99%84%EC%A0%84-%EC%9D%B4%EC%A7%84-%ED%8A%B8%EB%A6%ACcomplete-binary-tree\">완전 이진 트리(Complete Binary Tree)</a></p>\n<ul>\n<li><a href=\"#%EB%B0%B0%EC%97%B4%EC%9D%B4-%EB%8D%94-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%9C%A0\">배열이 더 효율적인 이유</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%99%84%EC%A0%84-%EC%9D%B4%EC%A7%84-%ED%8A%B8%EB%A6%AC%EC%99%80-%ED%9E%99%EC%9D%98-%EC%B0%A8%EC%9D%B4\">완전 이진 트리와 힙의 차이</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%9E%99%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90\">힙을 구현해보자</a></p>\n<ul>\n<li><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%92%EC%9D%98-%EC%82%BD%EC%9E%85-%EB%B2%84%EB%B8%94-%EC%97%85\">새로운 값의 삽입. 버블 업!</a></li>\n<li><a href=\"#%EB%A3%A8%ED%8A%B8%EC%97%90%EC%84%9C-%EA%B0%92%EC%9D%84-%EB%B9%BC%EC%98%A4%EC%9E%90-%ED%8A%B8%EB%A6%AD%ED%81%B4-%EB%8B%A4%EC%9A%B4\">루트에서 값을 빼오자. 트릭클 다운!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 대표적인 자료 구조 중 하나인 힙(Heap)에 대한 설명과 구현을 한번 해보려고 한다. 이전의 포스팅에서 몇 번 언급한 적이 있지만 필자는 지금 백수다. 이제 프라하에서 한 달간의 힐링도 끝났으니 슬슬 면접을 보러 다녀야 하는데, 모두들 알다시피 면접에서는 기초 알고리즘이나 자료 구조에 대한 질문이 들어올 확률이 굉장히 높다. 하지만 필자는 최근 1년 정도 기초 공부를 게을리 했기 때문에 다시 공부를 해야하는 상황이다. 그래서 일단은 자료 구조부터 다시 살펴볼 생각인데, 그 중 제일 기억이 잘 나지 않는 힙(He…","html":"<p>이번 포스팅에서는 대표적인 자료 구조 중 하나인 힙(Heap)에 대한 설명과 구현을 한번 해보려고 한다.</p>\n<p>이전의 포스팅에서 몇 번 언급한 적이 있지만 필자는 지금 백수다. 이제 프라하에서 한 달간의 힐링도 끝났으니 슬슬 면접을 보러 다녀야 하는데, 모두들 알다시피 면접에서는 기초 알고리즘이나 자료 구조에 대한 질문이 들어올 확률이 굉장히 높다. 하지만 필자는 최근 1년 정도 기초 공부를 게을리 했기 때문에 다시 공부를 해야하는 상황이다.</p>\n<p>그래서 일단은 자료 구조부터 다시 살펴볼 생각인데, 그 중 제일 기억이 잘 나지 않는 힙(Heap)부터 한번 부셔볼까 한다.</p>\n<h2 id=\"힙heap이란\" style=\"position:relative;\">힙(Heap)이란?<a href=\"#%ED%9E%99heap%EC%9D%B4%EB%9E%80\" aria-label=\"힙heap이란 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>힙은 기본적으로 완전 이진 트리(Complete Binary Tree)를 기본으로 한 자료 구조이며, 부모 노드와 자식 노드 간의 대소관계가 성립하는 자료 구조이다. 그렇기 때문에 힙의 루트 노드는 힙 내의 데이터들 중 가장 큰 값이거나 가장 작은 값이라고 할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/26d27d27a40c51726b85a6765778022c/29114/heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVR42o1Sy0oDMRTt5/gH7gU/wB9w4UrQn9CFvyCC24obV1KhC0GhilAUoVCkUGydSWbUeSeZRx43TmZaQaelvYuThNxz77knaelGAECJnudhZLn4Iwh8vSRayy60zG+e8HF7lBBmKq5LBqWUWU87eOdkFCZ5JUc1KyzuLIRwMA6jhGYSI5tSulK2KQwi5n4P2RPG0pl8KTF26GcPMus3rUEGWUKGroLbjczrV1IlaDOA5CS432RvR/M0+Ec2Z5bmrjXM3Y6D3qWE2vrKeZ/YXd/uhxFdJBsKRmMbYc55eYpj4jpTyLFWlARjx/2qPSs3sT/Ron48mJHTwb7/cihkbXZRIhmfJY9bbHAQPmyLglRZSoGOnvfY6+6fzvn0nKP2XL+ZU5FhgS6Ed1egy/mQBsV3l7vXqz7JGvEDXwN3AjESS6YAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"heap\" title=\"\" src=\"/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png\" srcset=\"/static/26d27d27a40c51726b85a6765778022c/69538/heap.png 160w,\n/static/26d27d27a40c51726b85a6765778022c/72799/heap.png 320w,\n/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png 640w,\n/static/26d27d27a40c51726b85a6765778022c/d9199/heap.png 960w,\n/static/26d27d27a40c51726b85a6765778022c/21b4d/heap.png 1280w,\n/static/26d27d27a40c51726b85a6765778022c/29114/heap.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    루트에 최대 값이 오게 되는 Max Heap의 모습<br>\n    생긴 건 완전 이진 트리랑 똑같이 생겼다\n  </small>\n</center>\n<p>즉, 힙 내의 가장 큰 값이나 가장 작은 값에 접근하고 싶을 때 비교 연산없이 한번에 접근할 수 있다는 의미이며, 이 접근 연산의 시간 복잡도는 당연히 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>이다. 이런 힙의 성격 때문에 힙은 여러 개의 데이터 중에서 가장 크거나 작은 값을 빠르게 찾아야 하는 영역에서 유용하게 사용된다.</p>\n<p>사실 단순히 어떤 데이터 뭉치 안에서 최대 값이나 최소 값에 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>의 시간 복잡도로 접근하고 싶다면 그냥 링크드 리스트(Linked List)나 배열(Array)을 정렬해서 사용해도 무방하긴 하다. 한번 정렬만 해놓으면 그 다음부터는 그냥 헤드에서 값을 쏙쏙 뽑아다 쓰면 되기 때문이다.</p>\n<p>그러나 이렇게 정렬되어 있는 데이터 뭉치에 새로운 데이터를 추가할 때는 전체 데이터 뭉치를 싹 다 뒤져서 다시 최대, 최소 값이 무엇인지 찾아내고 재정렬하는 과정을 거쳐야한다.</p>\n<p>배열과 링크드 리스트과 같은 선형 자료 구조는 이 과정에 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>의 시간 복잡도가 소요되는 반면, 부모가 자식보다 크거나 작게 정렬된 이진 트리의 경우는 새로운 추가된 노드의 부모 노드들과만 비교해도 정렬 상태를 유지할 수 있기 때문에 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>의 시간 복잡도만 소요된다.</p>\n<p>즉, 정렬하고 싶은 데이터가 많을 수록 더 유리하다는 소리다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVR42pWSzUoDMRDH+zi+gldBfBVBH8KjB19AUG+Klx48eFNQ1F5aCrJYkVq02Oxmt7vb/c7HJBOztLUHbdWBBDLML/+Zf9IwywOZQqlXFDSWgagM+FfsZR9Z8R8YrZpWwiRPB1Frq0qosfqo/6oMAK5HszDQVUw8v0gSA7/AWC9IZXRPRu9lWdU5CcC56wc5udVJf1ryE2ynNIaRZny9xsL2bG7UKJViSXy3Xvb2UNoEfIfr+8qK048ep5ceeVMKp8bZbex52eAicjuTSWZH+tKewyjKIh0RV0ppT2maU2+I3DW6yONX6o+NNlqAH4xpSIosMBoXcOVsR91dUFOzhd3zwWHW2iidncnDJoi8zkuBXDQfT5rOsa6Y1Z/BfHgkyem8/9pYnfcEOYPwRpDzhUna9En3edS2Rq74JMvDNjx/tk8Qa3f4BKGthQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compares\" title=\"\" src=\"/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png\" srcset=\"/static/47f8478a4454f5e1e36018547cc390aa/69538/compares.png 160w,\n/static/47f8478a4454f5e1e36018547cc390aa/72799/compares.png 320w,\n/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png 640w,\n/static/47f8478a4454f5e1e36018547cc390aa/d9199/compares.png 960w,\n/static/47f8478a4454f5e1e36018547cc390aa/21b4d/compares.png 1280w,\n/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>전체 데이터를 비교할 필요없이 이 부분만 비교하면 다시 재정렬할 수 있다</small>\n</center>\n<p>힙은 완전 이진 트리를 기초로 하기 때문에 구현하는 방법 또한 완전 이진 트리와 흡사하다. 그렇기 때문에 힙을 구현해보기에 앞서 완전 이진 트리의 특징을 먼저 이야기 해보려고 한다.</p>\n<h2 id=\"완전-이진-트리complete-binary-tree\" style=\"position:relative;\">완전 이진 트리(Complete Binary Tree)<a href=\"#%EC%99%84%EC%A0%84-%EC%9D%B4%EC%A7%84-%ED%8A%B8%EB%A6%ACcomplete-binary-tree\" aria-label=\"완전 이진 트리complete binary tree permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>먼저, 힙의 기본이 되는 완전 이진 트리의 특징을 한번 살펴보자. 이진 트리(Binary Tree)란 어떤 하나의 노드가 자식 노드를 최대 2개까지만 가질 수 있는 트리를 말한다.</p>\n<p>그 말인 즉슨, 한 레벨에 최대로 들어설 수 있는 노드의 개수가 정해져있다는 뜻이고, 노드들에게 고유한 인덱스를 부여할 수 있다는 것을 의미한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR42n1Qu07DMBTNH8IHMDPxB+wwIXVi4BdAzLAjoS7AwkMoIokD5GHydFPXrxwSJ61aoFiyr2zfc8/DwT+rbbWtM3KB/O4AZdVASgmt1VpPu4FxtoyyZw+MogRZQtCUAXw/QJqmYIzZLYSAMWYD5mxTN+cchBALXC6leoIIWZZbpXX3V5Wl7dFcAEL9GNhZ7LXN3RPQp1MMho21Za2N9or4EdX9PlpVw2iNRY+5PoOc7P1WWDEO6l0hC286lfrPMGjsofTPEUfhMh2Ytwfo28v1gQacfSIMic1FdvZCEkA08aDStjAkkYcsLyyC0i/Q7g4zW9E5aIdQTeOinO5C8mJFIdg7qukOWv4x5PpyiPp1MvIvbKmfj8Dd4/FN4Rtc0Rneo/vvfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"not allow new node\" title=\"\" src=\"/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png\" srcset=\"/static/e856823cf8415cb0c25f814a983547b7/69538/not_allow_new_node.png 160w,\n/static/e856823cf8415cb0c25f814a983547b7/72799/not_allow_new_node.png 320w,\n/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png 640w,\n/static/e856823cf8415cb0c25f814a983547b7/d9199/not_allow_new_node.png 960w,\n/static/e856823cf8415cb0c25f814a983547b7/21b4d/not_allow_new_node.png 1280w,\n/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png 1807w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>부모 노드는 반드시 2개 이하의 자식 노드를 가져야 한다.</small>\n</center>\n<p>완전 이진 트리(Complete Binary Tree)는 이진 트리의 노드를 생성할 때 트리의 왼쪽부터 차곡차곡 채워 나가는 트리를 의미한다. 이때 완전 이진 트리의 한 레벨이 꽉 차기 전에는 다음 레벨에 노드를 생성할 수 없다. 즉, 마지막 레벨을 제외한 모든 레벨에는 노드가 꽉 차 있어야 한다는 뜻이다.</p>\n<p>트리는 보통 링크드 리스트(Linked List)나 배열(Array)과 같은 선형 자료 구조를 사용하여 구현하는데, 이때 링크드 리스트와 배열의 특징에 따라 장단점이 갈리기 때문에 선택이 필요하다. <small>(링크드 리스트와 배열의 차이에 대한 내용은 이 포스팅의 주제가 아니므로 따로 설명하지는 않겠다.)</small></p>\n<p>일반적으로 트리는 링크드 리스트를 사용하여 구현하지만 완전 이진 트리의 경우에는 배열로 구현하는 것이 더 효율적이다.</p>\n<h3 id=\"배열이-더-효율적인-이유\" style=\"position:relative;\">배열이 더 효율적인 이유<a href=\"#%EB%B0%B0%EC%97%B4%EC%9D%B4-%EB%8D%94-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%9C%A0\" aria-label=\"배열이 더 효율적인 이유 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사실 일반적으로 트리를 구현할 때 링크드 리스트를 사용하는 이유는 배열을 사용하여 트리를 구현하면 메모리 고정 할당 방식이라는 배열의 특성 상 불편한 점이 너무 많기 때문이다.</p>\n<p>그러나 완전 이진 트리에서는 이 불편한 점들이 사라지기 때문에 배열의 장점을 오롯이 가져갈 수 있다.</p>\n<h4 id=\"원하는-노드로의-접근이-쉽다\" style=\"position:relative;\">원하는 노드로의 접근이 쉽다<a href=\"#%EC%9B%90%ED%95%98%EB%8A%94-%EB%85%B8%EB%93%9C%EB%A1%9C%EC%9D%98-%EC%A0%91%EA%B7%BC%EC%9D%B4-%EC%89%BD%EB%8B%A4\" aria-label=\"원하는 노드로의 접근이 쉽다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이건 배열의 최대 장점인 인덱스만 알면 해당 원소에 바로 접근이 가능하다는 장점을 그대로 살린 것이다. 이진 트리는 각 레벨에 들어설 수 있는 노드의 최대 개수가 정해져 있기 때문에 간단한 수식만으로 특정 노드의 인덱스를 알아내어 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>의 시간 복잡도로 노드에 접근할 수 있다.</p>\n<p>먼저, 특정 노드를 기반으로 부모나 자식 노드에 접근하고 싶다면 다음과 같이 인덱스를 계산해볼 수 있다.</p>\n<blockquote>\n<p>루트 노드가 0번 인덱스를 가지고, 현재 노드가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>번 인덱스를 가지고 있을 때</p>\n<ul>\n<li>부모 노드: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">(i-1) / 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span></span></li>\n<li>왼쪽 자식 노드: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>오른쪽 자식 노드: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2i+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span></span></li>\n</ul>\n</blockquote>\n<p>위와 같이 특정 노드의 인덱스를 기반으로 부모와 자식들의 인덱스를 알아내는 방법도 있지만, 배열로 만든 완전 이진 트리의 진짜 장점은 간단한 수식을 통해서 원하는 레벨, 원하는 순번의 노드로 바로 접근할 수도 있다는 것이다.</p>\n<p>완전 이진 트리의 성질을 이용하면 특정 레벨까지의 최대 노드 개수인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span>를 간단히 계산할 수 있기 때문에 가능한 일이다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>c</mi><mo>=</mo><msup><mn>2</mn><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">c = 2^{level} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9824em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getAllNodeCountByLevel</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">**</span> level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">7</span> <span class=\"token comment\">// 3 레벨로 구성된 완전 이진 트리 내 노드의 최대 개수</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 식을 사용하면 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>번째 레벨의 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>번째 노드의 인덱스도 간단하게 알아낼 수 있다.</p>\n<p>예를 들어, 완전 이진 트리의 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> 레벨에 있는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>번째 노드의 인덱스인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>를 구하고 싶다면, 내가 접근하고 싶은 레벨의 바로 위 레벨인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> 레벨까지의 모든 노드의 개수 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span>을 구하고, 거기에 해당 레벨 내에서 내가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>번째 노드에 접근하고 싶은지만 더해주면 된다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>i</mi><mo>=</mo><mi>c</mi><mo>+</mo><mi>m</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i = c + m - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getNodeIndex</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span>level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getNodeIndex</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">5</span> <span class=\"token comment\">// 3 레벨의 3 번째로 위치한 노드의 인덱스</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>마지막에 1을 빼주는 이유는 우리가 구하고 싶은 것이 노드의 순번이 아닌 인덱스이기 때문이다. 배열의 인덱스는 <code class=\"language-text\">0</code>부터 시작한다는 사실을 잊지 말자.</p>\n<p>이처럼 배열로 구현한 완전 이진 트리는 간단한 계산만으로 원하는 노드에 접근하기가 용이하지만, 링크드 리스트로 구현하게되면 원하는 노드에 바로 접근할 수 없고, 트리를 순회하여 접근해야한다.</p>\n<h4 id=\"배열의-원소를-뒤로-밀어줘야-할-일이-없다\" style=\"position:relative;\">배열의 원소를 뒤로 밀어줘야 할 일이 없다<a href=\"#%EB%B0%B0%EC%97%B4%EC%9D%98-%EC%9B%90%EC%86%8C%EB%A5%BC-%EB%92%A4%EB%A1%9C-%EB%B0%80%EC%96%B4%EC%A4%98%EC%95%BC-%ED%95%A0-%EC%9D%BC%EC%9D%B4-%EC%97%86%EB%8B%A4\" aria-label=\"배열의 원소를 뒤로 밀어줘야 할 일이 없다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>배열은 메모리에 연속적인 공간을 할당하여 사용하기 때문에, 배열 중간에 원소를 끼워넣으려면 새로운 메모리 공간을 확보하기 위해 원소를 한 칸씩 뒤로 밀어줘야하는 슬픈 상황이 발생하지만, 링크드 리스트는 그냥 <code class=\"language-text\">prev</code> 값과 <code class=\"language-text\">next</code> 값만 변경함으로써 중간에 새로운 원소를 끼워넣기가 편하다.</p>\n<p>그러나 이진 트리의 경우, 자식 노드를 최대 2개까지만 가질 수 있다는 제약이 있기 때문에 높이가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span>인 트리는 최대 노드 개수가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>h</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{h} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9324em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>개로 정해져있다. 즉, 이 크기 만큼만 배열을 메모리에 할당하고 나면 중간에 노드를 새로 삽입하기 위해 배열의 원소를 뒤로 밀어야하는 경우가 발생하지 않는다는 것이다.</p>\n<h4 id=\"트리가-기울어지지-않는다\" style=\"position:relative;\">트리가 기울어지지 않는다<a href=\"#%ED%8A%B8%EB%A6%AC%EA%B0%80-%EA%B8%B0%EC%9A%B8%EC%96%B4%EC%A7%80%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4\" aria-label=\"트리가 기울어지지 않는다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>일반적으로 배열로 구현한 트리가 기울어지게 되면 메모리 공간에 심한 낭비가 생기게 되는데, 그 이유는 그림으로 보면 이해하기가 한결 편하다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvGiGav//EABcQAAMBAAAAAAAAAAAAAAAAAAEQESD/2gAIAQEAAQUCOIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAACAwADAAAAAAAAAAAAAAABEQAQUTFhof/aAAgBAQABPyEl3Gjr8pBk7AA4Ff/aAAwDAQACAAMAAAAQlw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAGxABAAIDAQEAAAAAAAAAAAAAAREhABAxUfD/2gAIAQEAAT8Qh0S8MFQ38H5GgiF9OPqQvdf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"balanced\" title=\"\" src=\"/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg\" srcset=\"/static/594a877d7281f11d27e067794310ed3f/0913d/balanced.jpg 160w,\n/static/594a877d7281f11d27e067794310ed3f/cb69c/balanced.jpg 320w,\n/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg 640w,\n/static/594a877d7281f11d27e067794310ed3f/6a068/balanced.jpg 960w,\n/static/594a877d7281f11d27e067794310ed3f/eea4a/balanced.jpg 1280w,\n/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>위 그림은 이상적으로 균형이 잡힌 균형 이진 트리(Balanced Binary Tree)의 모습이다. 만약 이 트리를 배열로 구현한다면 메모리에는 이렇게 값들이 담길 것이다.</p>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>E</td>\n<td>F</td>\n</tr>\n</tbody>\n</table>\n<p>배열 중간에 빈 공간이 없이 차곡차곡 메모리에 담겼다. 노드의 인덱스는 트리의 왼쪽부터 순차적으로 부여되기 때문에 자식 노드를 왼쪽부터 생성한다면 메모리에 빈 공간을 만들지 않을 수 있다.</p>\n<p>물론 자식 노드를 생성할 때 왼쪽을 건너 뛰고 오른쪽부터 생성하면 빈 공간이 생기긴 하지만, 더 큰 문제는 트리가 한 쪽으로 크게 기울어지게 되게 되는 편향 트리가 되는 경우이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvyqDVf//EABUQAQEAAAAAAAAAAAAAAAAAABBC/9oACAEBAAEFAmj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPwGn/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITEQcYH/2gAIAQEAAT8hWi2UuXyF1ncNuuf/2gAMAwEAAgADAAAAEFQP/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQMBAT8Qh//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EBj/xAAbEAADAAIDAAAAAAAAAAAAAAABESEAQRAxof/aAAgBAQABPxAbiY5EEFprIIirrKfoF7z/AP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unbalanced\" title=\"\" src=\"/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg\" srcset=\"/static/9b55af495204108a9d6c5989a4f0ee15/0913d/unbalanced.jpg 160w,\n/static/9b55af495204108a9d6c5989a4f0ee15/cb69c/unbalanced.jpg 320w,\n/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg 640w,\n/static/9b55af495204108a9d6c5989a4f0ee15/6a068/unbalanced.jpg 960w,\n/static/9b55af495204108a9d6c5989a4f0ee15/eea4a/unbalanced.jpg 1280w,\n/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>H</td>\n</tr>\n</tbody>\n</table>\n<p>위 그림처럼 한 쪽으로 크게 기운 편향 트리는 중간 인덱스를 건너뛰고 다음 레벨에 노드를 생성한 경우이기 때문에 메모리에 빈 공간이 생길 수 밖에 없다. 그렇기 때문에 메모리 공간이 낭비된다고 하는 것이다. 물론 오른쪽으로 기울었다면 건너뛰어야 하는 인덱스도 더 크기 때문에 메모리 공간의 낭비가 더 심해진다.</p>\n<p>그러나 완전 이진 트리는 노드를 왼쪽부터 차곡차곡 채워나가고, 한 레벨의 노드가 다 채워지기 전까지는 다음 레벨에 노드를 채울 수 없다는 제약들이 걸려있기 때문에 애초에 트리가 기울어질 일 자체가 없으니 메모리에 빈 공간이 생길 일도 없다.</p>\n<p>이런 이유들로 인해 완전 이진 트리는 원소에 바로 접근이 가능한 배열의 장점을 살려서 구현하는 경우가 많고, 완전 이진 트리를 기반으로 하는 힙(Heap) 또한 마찬가지 이유로 인해 주로 배열로 구현하게된다.</p>\n<h2 id=\"완전-이진-트리와-힙의-차이\" style=\"position:relative;\">완전 이진 트리와 힙의 차이<a href=\"#%EC%99%84%EC%A0%84-%EC%9D%B4%EC%A7%84-%ED%8A%B8%EB%A6%AC%EC%99%80-%ED%9E%99%EC%9D%98-%EC%B0%A8%EC%9D%B4\" aria-label=\"완전 이진 트리와 힙의 차이 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>힙(Heap)은 완전 이진 트리를 기초로 하기 때문에 기본적인 노드의 삽입 및 삭제 알고리즘은 일반적인 완전 이진 트리와 동일하다. 노드의 삽입은 반드시 배열의 끝에만 가능하며, 노드를 삭제하고 나면 빈 공간이 남지 않도록 남은 노드들을 다시 당겨서 빈 공간을 채워줘야한다.</p>\n<p>다만 힙은 부모와 자식 노드 간의 대소관계가 성립되어야 한다는 조건이 있기 때문에, “삽입 및 삭제 후 노드를 다시 정렬해주는 기능”이 추가로 필요하다.</p>\n<p>또한 힙은 사실 트리 내의 최대 값이나 최소 값을 쉽게 찾고자 하는 자료 구조이기 때문에, 트리 중간에 위치한 노드에 바로 접근할 일도 거의 없다. 항상 <code class=\"language-text\">Array[0]</code>에 위치한 루트 노드를 뽑아다 쓰면 되기 때문이다. 루트 노드를 뽑아온다는 것은 곧 루트 노드의 삭제를 의미하기 때문에 마찬가지로 힙을 다시 정렬해줘야한다.</p>\n<p>힙은 최대 힙(Max Heap)과 최소 힙(Min Heap)으로 나누어지는데, 최대 힙은 항상 부모의 값이 자식보다 커야하고, 최소 힙은 반대로 부모의 값이 자식보다 작아야 한다. 즉, “최대 힙의 루트는 힙 내에서 가장 큰 값”, “최소 힙의 루트는 힙 내에서 가장 작은 값”을 의미한다는 것이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAC4jAAAuIwF4pT92AAABYUlEQVR42nVS2ZKDIBDM/3/hvmw2ajwCiNyHEdxWEjebqowU1bTdM8PoabRSelPWTTCmODeCSk7EuIORSADJ1FTWIYbxJL1e98g5D33fXq91VRFCLj+Xru0A2uZKKQVu6gZgU+JZV+E1zOY4lxTLsuQ9UkovIJXjIYbxaS4snDmtHyLlD+a0syq6M23Ts4u3qNhAFT/E/yqHZdazd3NAirf6OJrZ2zno6Nw9lty72W0DA/tN23tagDtBa357NdfjMAgGAMHXUCHRw6y8icuMaiiLHRfjQaOICHYbVc4yWFSbgoZz46NV0aJN5e1JBVOzXgenve0nCl1DB1z7TFpIbfQV67d29lcDvrQzKtiaDdj/7ky9ZF4RJ1hQmOc+2VyKo53O8tHrmxMy2vwysMdPAlZGBwXafpszsiAvGh6Dxg4mLndmxIlbhe6xbHAmOPQJgCMSF74A8Cb4otHeVVPfCvILGpu2RzRW2cIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"min max heap\" title=\"\" src=\"/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png\" srcset=\"/static/7ef8339acc6f0333106978ece7c8b376/69538/min-max-heap.png 160w,\n/static/7ef8339acc6f0333106978ece7c8b376/72799/min-max-heap.png 320w,\n/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png 640w,\n/static/7ef8339acc6f0333106978ece7c8b376/d9199/min-max-heap.png 960w,\n/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png 1000w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>즉, 힙을 구현한다는 것은 완전 이진 트리를 구현하고, 최대 힙과 최소 힙에 맞는 정렬 기능을 추가하면 된다는 것을 의미한다.</p>\n<h2 id=\"힙을-구현해보자\" style=\"position:relative;\">힙을 구현해보자<a href=\"#%ED%9E%99%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"힙을 구현해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>일단 최대 힙과 최소 힙의 차이는 사실 정렬할 때 조건 밖에 없으니, 필자는 최대 힙만 구현해보려고 한다. 위에서 이야기 했듯이 완전 이진 트리의 경우는 링크드 리스트를 이용하는 것보다 배열을 이용하는 것이 더 효율적이기 때문에 배열을 이용하여 구현할 것이다.</p>\n<p>일단 작고 귀여운 <code class=\"language-text\">MaxHeap</code> 클래스를 하나 만들어주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxHeap</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 링크드 리스트로 구현하고자 한다면 <code class=\"language-text\">Node</code> 클래스를 별도로 선언해서 사용하겠지만 필자가 사용할 자료 구조는 배열이기 때문에 단촐하기 그지 없다. 그럼 이제 힙에 값을 삽입하는 메소드부터 한번 만들어보도록 하자.</p>\n<h3 id=\"새로운-값의-삽입-버블-업\" style=\"position:relative;\">새로운 값의 삽입. 버블 업!<a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%92%EC%9D%98-%EC%82%BD%EC%9E%85-%EB%B2%84%EB%B8%94-%EC%97%85\" aria-label=\"새로운 값의 삽입 버블 업 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>힙에 새로운 값을 삽입할 때는 완전 이진 트리의 규칙대로 무조건 트리의 왼쪽부터 채워나간다. 그 말인 즉슨, 그냥 <code class=\"language-text\">push</code> 메소드를 사용하여 배열의 꼬리로 값을 하나씩 쑤셔넣어주면 된다는 것이다. 잘 이해가 되지 않는다면 위의 완전 이진 트리 설명 부분을 다시 읽어보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>최대 힙은 항상 부모가 자식보다 큰 값을 가져야한다는 제약이 있으므로, 만약 우리가 힙에 삽입한 노드가 부모 노드보다 큰 값을 가지고 있다면 두 노드의 위치를 바꿔줘야한다.</p>\n<p>그리고 이 작업을 현재 삽입한 노드가 루트까지 올라가거나, 부모보다 작은 값을 가지게 되거나, 두 조건 중 하나를 만족할 때까지 반복한다.</p>\n<p>이때 새로 추가한 값이 부모 노드와 스왑되면서 점점 트리의 위로 올라가는 모양새가 거품이 뽀글뽀글 올라오는 모양새랑 비슷하다고 해서 “버블 업(Bubble Up)“이라고 부른다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42qWSy0rDQBSG+zi+gluh7yLoI/gIgmulW8VFXYlLoUgUQbTUQhWk1NJMpiGZ1GRmkrnljJmmFUpFK57Fv/g537lxGvYf0fjehrISQzpieAig/gJXJJQV/fF6RLxmweJlOdios9YaBTjLZqCZjzBj9NfOrjDoVBEP+e+c57VrjAkCzEIPxOQrbQ0GU0mBLpLrrSJ+cAZoa+fLS5rcbPPnAyssyALWYOfwXEwnAzG9wmhkzDwHnMYkoaNLMr6fJZmVyiq9CoPkLPVRoJS7bZrSKR6DCGzJKBniMKoAkDqM4pDgPA1X4Ly/S572tanvKiulw+Psbof392a3Ta2om4xmVpt2t9XundSLL2Axbil0upzf7VnSgURnOu5IdL44kjGWF2/o8SXq/fgkm33YJyCFeIuZ4cs3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bubbleup\" title=\"\" src=\"/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png\" srcset=\"/static/ba74af93911b1287276f76834eaa6b01/69538/bubbleup.png 160w,\n/static/ba74af93911b1287276f76834eaa6b01/72799/bubbleup.png 320w,\n/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png 640w,\n/static/ba74af93911b1287276f76834eaa6b01/d9199/bubbleup.png 960w,\n/static/ba74af93911b1287276f76834eaa6b01/21b4d/bubbleup.png 1280w,\n/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>부모와 자리를 바꾸면서 트리의 위쪽으로 점점 올라간다</small>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bubbleUp</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> currentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentIndex <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parentNode <span class=\"token operator\">>=</span> currentNode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parentNode<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> currentNode<span class=\"token punctuation\">;</span>\n  index <span class=\"token operator\">=</span> parentIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">bubbleUp</code> 메소드는 인자로 받은 인덱스의 노드의 값과 부모 노드의 값을 비교하여, 해당 노드가 부모 노드의 값보다 큰 값을 가지고 있다면 두 노드의 위치를 스왑하는 역할을 한다. 트리의 특성 상 이 작업은 분할 정복이 가능한 부분이므로 재귀 호출로 구현하였다.</p>\n<p>여기까지 작성하고 간단히 테스트를 해보면 힙 내의 가장 큰 값이 배열의 헤드, 즉 트리의 루트에 위치하게 된다는 것을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span> <span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n  <img src=\"/9e2a2f66409a09f23bc1717c7002b9fd/max-heap.gif\" width=\"100%\">\n  <br>\n  <small>부모보다 큰 값이 추가되면 부모와 자리를 바꾼다</small>\n  <br>\n  <br>\n</center>\n<h3 id=\"루트에서-값을-빼오자-트릭클-다운\" style=\"position:relative;\">루트에서 값을 빼오자. 트릭클 다운!<a href=\"#%EB%A3%A8%ED%8A%B8%EC%97%90%EC%84%9C-%EA%B0%92%EC%9D%84-%EB%B9%BC%EC%98%A4%EC%9E%90-%ED%8A%B8%EB%A6%AD%ED%81%B4-%EB%8B%A4%EC%9A%B4\" aria-label=\"루트에서 값을 빼오자 트릭클 다운 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>값의 삽입과 버블 업을 구현해보았으면 이번에는 루트에서 값을 빼오는 메소드를 만들어보자. 즉, 삭제 연산이다. 이 경우 루트 노드를 뽑아버리면 루트 노드의 자리가 비게 되니 힙을 재정렬해서 다시 루트 노드를 채워줘야한다.</p>\n<p>이때 기존 루트 노드의 자식 노드들을 루트 노드로 올리는 것이 아니라 트리의 가장 마지막에 위치한 노드를 가져와서 루트 노드로 삽입하게 되는데, 이는 수정될 힙에서 빈 공간이 생기지 않게 함으로써 연산량을 줄이기 위해서이다.</p>\n<p>바로 루트의 바로 밑에 있는 자식들을 끌어올려서 루트로 사용해버리면 자연스럽게 그 노드가 있던 곳은 공백이 생기게 되고, 그럼 또 다음 레벨에서 어떤 노드를 끌여올려야 할지 비교 연산이 필요하게 되기 때문이다.</p>\n<p>그리고 힙은 반드시 완전 이진 트리의 형태를 유지해야하기 때문에 이 과정에서 트리가 한 쪽으로 기울게 되버리면 또 트리의 균형을 맞춰줘야하는 번거로움도 생길 수 있다.</p>\n<p>그래서 가장 마지막에 위치한 노드를 새로운 루트 노드로 사용하고 자식들과 값을 비교해나가면서 자리를 바꿔나가는데, 이때 새로운 루트 노드가 트리의 아래 쪽으로 점점 이동하는 모양새가 물방울이 떨어지는 모양새랑 비슷하다고 해서 “트릭클 다운(Trickle Down)“이라고 부른다. <small>(컴퓨터 용어 주제에 왠지 갬성적이다…)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">extract</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> max <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> max<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">trickleDown</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> leftChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> largest <span class=\"token operator\">=</span> index<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>leftChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>leftChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> leftChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rightChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>rightChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> rightChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>largest <span class=\"token operator\">!==</span> index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span>largest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>트릭클 다운 또한 버블 업과 마찬가지로 재귀 호출을 통한 분할 정복으로 해결할 수 있다.</p>\n<p><code class=\"language-text\">trickleDown</code> 메소드는 부모 노드와 왼쪽 자식 노드, 오른쪽 자식 노드의 값을 비교한 후 자식 노드가 부모 노드보다 큰 값을 가지고 있다면 부모 노드와 해당 자식 노드의 위치를 변경한다.</p>\n<p>쉽게 말하면 세 개의 노드 중 가장 큰 값을 가지고 있는 놈이 부모 자리를 먹는 것인데, 만약 이 힘싸움에서 밀린 것이 부모 노드라면 자신의 자식이 있던 곳으로 좌천되는 것이라고 보면 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABmbOqp0WG417IykP/xAAeEAACAQQDAQAAAAAAAAAAAAAAAQIDERITISIxM//aAAgBAQABBQJLlpIujNFO7c49tbtFYmuTKf1Je//EABcRAQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BYuP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAgMBAAAAAAAAAAAAAAAAARAhAhExYf/aAAgBAQAGPwJI9LK6jtF5G09ocOf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBBcYGh/9oACAEBAAE/IbDdstdW1ElrTGsVgzENQ6ZmRS+osx0R0qutMVXVeWfMzs4v/9oADAMBAAIAAwAAABAA5/P/xAAZEQACAwEAAAAAAAAAAAAAAAAAEQEQMVH/2gAIAQMBAT8QiHouhsr/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQFB/9oACAECAQE/EF1Oo//EAB8QAQACAgICAwAAAAAAAAAAAAEAESExQVEQYXGBsf/aAAgBAQABPxA2yAWOtYgIOlXFG371BJrbqCQU6pp4SLULRVVtsI+Z+G7R1Eb7KnJ8kwQDRDS9zEj0IfOD8Sf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Arthas King\" title=\"\" src=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" srcset=\"/static/8cb9ae698e4cb007189258112e07a9b6/0913d/Arthas_King.jpg 160w,\n/static/8cb9ae698e4cb007189258112e07a9b6/cb69c/Arthas_King.jpg 320w,\n/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>썩씌딩하는 꼬라지가 왠지 이 놈을 닮았다</small>\n</center>\n<p>만약 이 과정에서 부모 노드와 자식 노드의 위치가 변경되었다면 변경된 부모 노드의 인덱스를 다시 <code class=\"language-text\">tickleDown</code> 메소드의 인자로 넘겨서 이 과정을 계속 반복한다.</p>\n<p>여기까지 작성했으면 버블 업과 마찬가지로 간단한 테스트를 한번 해보자. 힙에 들어가는 값은 이전에 버블 업에서 사용했던 값과 동일한 값들을 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MAX_VALUE = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HEAP = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">32</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">23</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <img src=\"/95d84ea96d74c0b03c6309156fa60dad/min-heap.gif\" width=\"100%\">\n  <br>\n  <small>트리의 맨 끝에서 노드를 빼와서 루트 노드로 사용한다는 것에 주의하자</small>\n  <br>\n  <br>\n</center>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>힙 자체는 단순히 데이터들이 느슨하게 정렬되어있는 완전 이진 트리이지만, 루트에는 항상 힙 내부에 있는 데이터들의 최대 값과 최소 값이 위치한다는 특징 때문에 다양하게 응용하여 사용할 수 있다.</p>\n<p>그 중 대표적인 것은 선형 자료 구조를 정렬할 때 사용하는 방법인데, 이 정렬 알고리즘을 힙 정렬(Heap Sort)라고 한다. 현재 V8의 <code class=\"language-text\">Array.prototype.sort</code> 메소드는 퀵 정렬(Quick Sort)을 사용하고 있지만, 초반에는 힙을 사용하는 정렬 알고리즘인 힙 정렬을 잠깐 사용하기도 했었다.</p>\n<p>어쨌든 그 동안 잊고 있었던 기초적인 자료 구조를 한번 다시 보니 왠지 기분이 좋다.</p>\n<p>힙은 굉장히 다양한 곳에서 사용되고 있는 자료 구조이니 만큼, 알고 있어서 나쁠 게 없기도 하고 면접 때도 꽤 자주 물어봤던 것 같다. 이제 필자는 회사의 비즈니스 로직과 전혀 관련 없는 백수 개발랭이 신분이 되었으니, 그 동안 소홀했던 기초 이론 부분을 이 기회에 조금 더 자세히 공부해봐야겠다.</p>\n<p>이상으로 최소 값과 최대 값을 빠르게 찾을 수 있게 도와주는 힙(Heap) 포스팅을 마친다.</p>","fields":{"slug":"20191012-introduction-data-structure-heap","path":"/2019/10/12/introduction-data-structure-heap/","lang":"ko"},"frontmatter":{"title":"최소 값과 최대 값을 빠르게 찾을 수 있게 도와주는 힙(Heap)","subTitle":"O(log n)의 마법, 힙을 활용한 빠른 최소·최대 값 탐색","date":"Oct 12, 2019","categories":["프로그래밍","알고리즘"],"tags":["Heap","힙","자료구조","자바스크립트","JavaScript","트리 탐색","트리 정렬","알고리즘"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#484848","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/8c230/thumbnail.png 80w,\n/static/bbb54a15b5551610fa2986be824555fd/23e25/thumbnail.png 160w,\n/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png 320w,\n/static/bbb54a15b5551610fa2986be824555fd/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/3e5ca/thumbnail.webp 80w,\n/static/bbb54a15b5551610fa2986be824555fd/b72f1/thumbnail.webp 160w,\n/static/bbb54a15b5551610fa2986be824555fd/fc5c5/thumbnail.webp 320w,\n/static/bbb54a15b5551610fa2986be824555fd/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#484848","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/3fbb4/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/61846/thumbnail.png 750w,\n/static/bbb54a15b5551610fa2986be824555fd/d5395/thumbnail.png 1080w,\n/static/bbb54a15b5551610fa2986be824555fd/cc835/thumbnail.png 1366w,\n/static/bbb54a15b5551610fa2986be824555fd/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/6858b/thumbnail.webp 750w,\n/static/bbb54a15b5551610fa2986be824555fd/f5547/thumbnail.webp 1080w,\n/static/bbb54a15b5551610fa2986be824555fd/29310/thumbnail.webp 1366w,\n/static/bbb54a15b5551610fa2986be824555fd/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"26553317-3b91-575a-a94a-167cb8e11d35","tableOfContents":"<ul>\n<li>\n<p><a href=\"#http3%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%86%8C%EA%B0%9C\">HTTP/3에 대한 간단한 소개</a></p>\n</li>\n<li>\n<p><a href=\"#tcp%EA%B0%80-%EC%99%9C-%EB%8A%90%EB%A6%AC%EB%8B%A4%EA%B3%A0-%ED%95%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\">TCP가 왜 느리다고 하는 걸까?</a></p>\n<ul>\n<li><a href=\"#3-way-handshake\">3 Way Handshake</a></li>\n<li><a href=\"#holbhead-of-line-blocking\">HOLB(Head of line Blocking)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#http3%EA%B0%80-udp%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">HTTP/3가 UDP를 사용하는 이유</a></p>\n<ul>\n<li><a href=\"#udp%EB%8A%94-%ED%95%98%EC%96%80-%EB%8F%84%ED%99%94%EC%A7%80-%EA%B0%99%EC%9D%80-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%9D%B4%EB%8B%A4\">UDP는 하얀 도화지 같은 프로토콜이다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#http3%EA%B0%80-udp%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A8%EC%9C%BC%EB%A1%9C%EC%8D%A8-%EA%B8%B0%EC%A1%B4-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EB%B3%B4%EB%8B%A4-%EB%82%98%EC%95%84%EC%A7%84-%EC%A0%90\">HTTP/3가 UDP를 사용함으로써 기존 프로토콜보다 나아진 점</a></p>\n<ul>\n<li><a href=\"#%EC%97%B0%EA%B2%B0-%EC%84%A4%EC%A0%95-%EC%8B%9C-%EB%A0%88%EC%9D%B4%ED%84%B4%EC%8B%9C-%EA%B0%90%EC%86%8C\">연결 설정 시 레이턴시 감소</a></li>\n<li><a href=\"#%ED%8C%A8%ED%82%B7-%EC%86%90%EC%8B%A4-%EA%B0%90%EC%A7%80%EC%97%90-%EA%B1%B8%EB%A6%AC%EB%8A%94-%EC%8B%9C%EA%B0%84-%EB%8B%A8%EC%B6%95\">패킷 손실 감지에 걸리는 시간 단축</a></li>\n<li><a href=\"#%EB%A9%80%ED%8B%B0%ED%94%8C%EB%A0%89%EC%8B%B1%EC%9D%84-%EC%A7%80%EC%9B%90\">멀티플렉싱을 지원</a></li>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EC%9D%98-ip%EA%B0%80-%EB%B0%94%EB%80%8C%EC%96%B4%EB%8F%84-%EC%97%B0%EA%B2%B0%EC%9D%B4-%EC%9C%A0%EC%A7%80%EB%90%A8\">클라이언트의 IP가 바뀌어도 연결이 유지됨</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EB%A7%81%ED%81%AC\">참고 링크</a></p>\n</li>\n</ul>","excerpt":"HTTP/3는 HTTP(Hypertext Transfer Protocol)의 세 번째 메이저 버전으로, 기존의 HTTP/1, HTTP/2와는 다르게 UDP 기반의 프로토콜인 QUIC을 사용하여 통신하는 프로토콜이다. HTTP/3와 기존 HTTP 들과 가장 큰 차이점이라면 TCP가 아닌 UDP 기반의 통신을 한다는 것이다. 필자는 최근에 다른 분들이 공유해주시는 포스팅을 보고 나서 HTTP/3가 나왔다는 것을 처음 알게 되었다. 그 포스팅은 HTTP/3: the past, the present, and the future라는 포스팅…","html":"<p>HTTP/3는 HTTP(Hypertext Transfer Protocol)의 세 번째 메이저 버전으로, 기존의 HTTP/1, HTTP/2와는 다르게 UDP 기반의 프로토콜인 QUIC을 사용하여 통신하는 프로토콜이다. HTTP/3와 기존 HTTP 들과 가장 큰 차이점이라면 TCP가 아닌 UDP 기반의 통신을 한다는 것이다.</p>\n<p>필자는 최근에 다른 분들이 공유해주시는 포스팅을 보고 나서 HTTP/3가 나왔다는 것을 처음 알게 되었다. 그 포스팅은 <a href=\"https://blog.cloudflare.com/http3-the-past-present-and-future/\" target=\"_blank\" rel=\"nofollow\">HTTP/3: the past, the present, and the future</a>라는 포스팅이었는데, 솔직히 처음 딱 제목만 보고나서 이런 생각을 했었다.</p>\n<blockquote>\n<p>아니, HTTP/2가 공개된지 4년 정도 밖에 안 지났는데 무슨 HTTP/3가 벌써 나와? 그냥 설계하고 있다는 거 아니야?</p>\n</blockquote>\n<p>그런데 포스팅을 읽어 보니 이미 Google Chrome은 HTTP/3를 지원하는 카나리 빌드도 배포되어 있어서 실제로 사용까지 해볼 수 있는 단계에 도달했다는 사실을 알게 되어 놀랐다. HTTP/1에서 HTTP/2로 가는 데만 해도 대략 15년 정도의 시간이 걸렸는데, 고작 4년 만에 바로 사용해볼 수 있는 정도의 완성도인 다음 메이저 버전이 배포되었다는 것이다.</p>\n<p>게다가 아직 전 세계의 HTTP/2 점유율을 보면 40% 정도 밖에 안된다. 그 정도로 HTTP/2가 나온지도 얼마 되지 않았다는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8a0a69c0fbc05eba2198cd4f552845d4/0a47e/ce-http2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABKklEQVR42pWS2W6DMBBF+f8vzAPYHryUBLyw2NikD70JqJGatErR0WgYrrnjsatt287nZO2ntdc3ce46DGVZSjVNM2OjUkXK/BKlnil1HYchVuM4CTEZs2ldjHmBlIXogLHSNIVzLEazsQph5DxApHVu20z0gLFc14gr5ysiaNtVylUpJNH7m/N8OoWmge5QfEN0SLU+QL6/ChGdi9U8L2h73wzMn3neM4pEaXeeOB/3X8LnHaA8nLGYsXAf7P8XL0vkfHp1Hr/yaBt7xrT3tt8EAyO6O6eEwY445D+sftwZiOHsXKq893X9IYQlsm3rhBiI3B0rZUCCT1L6HaVQgcByPvS9h3OKMeacQ/BCcK0VkUBUSgohLpczcmN0132g3nWm7/t8e9aU0hd/j8r0CkmYvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ce http2\" title=\"\" src=\"/static/8a0a69c0fbc05eba2198cd4f552845d4/0a47e/ce-http2.png\" srcset=\"/static/8a0a69c0fbc05eba2198cd4f552845d4/69538/ce-http2.png 160w,\n/static/8a0a69c0fbc05eba2198cd4f552845d4/72799/ce-http2.png 320w,\n/static/8a0a69c0fbc05eba2198cd4f552845d4/0a47e/ce-http2.png 600w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>W3Techs.com에서 조사한 2019년 8월 HTTP/2 사용률</small>\n</center>\n<p>프로그래밍 언어나 프레임워크같은 친구들은 배포하는 쪽에서 업데이트를 쫙 해버리고 유저들이 업데이트를 하면 그만이지만, 프로토콜은 일종의 규약이기 때문에 소프트웨어 제조사 간 합을 맞추는 기간이 필요하므로 이렇게 단기간 안에 급격한 변화가 자주 발생하지 않을 것이라고 생각했다.</p>\n<p>아무리 요즘 기술의 변화가 빠르다지만, HTTP는 나름 웹의 근간이 되는 프로토콜인데 꼴랑 4년 만에 이런 급격한 변화가 일어났다는 게 놀라울 따름이다. <small>(몇 달 전에 HTTP/2를 처음 도입해본 웹 개발자는 웁니다)</small></p>\n<p>그리고 또 한가지 놀랐던 점은 HTTP/3는 TCP가 아닌 UDP를 사용한다는 것이었다. 뭐 딱히 웹 프로토콜이 무조건 TCP만 사용해야 한다는 법이 있는 건 아니긴 하지만, 학교에서 배울 때도 그렇고 실무에서도 실제로 사용할 때도 그렇고 HTTP는 TCP 위에서 정의된 프로토콜이라는 사실이 너무 당연하게 인식되어 있었기 때문에 UDP를 사용한다는 점이 신기하기도 했고 “왜 멀쩡히 잘 돌아가는 TCP를 냅두고 UDP를 사용하는거지?”라는 의문도 들었다.</p>\n<p>사실 HTTP/3는 정식으로 배포된 프로토콜이라기보다 아직 테스트를 거치고 있는 단계라고 보는 게 맞다. 하지만 위에서 이야기 했듯이 Google Chrome은 이미 HTTP/3를 지원하는 카나리 빌드를 배포한 상태이고, Mozila Firefox도 조만간 Nightly 버전에서 HTTP/3를 지원할 예정이며, cURL에서도 HTTP/3를 실험적 기능으로 제공하고 있는 만큼 가까운 미래 안에 HTTP/3가 메인 프로토콜이 될 가능성이 높은 것도 사실이다.</p>\n<p>만약 Google Chrome에서 HTTP/3 프로토콜을 사용해보고 싶다면 터미널에서 <code class=\"language-text\">--enable-quic</code>과 <code class=\"language-text\">--quic-version=h3-23</code> 인자를 사용하여 실행하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">open</span> <span class=\"token parameter variable\">-a</span> Google<span class=\"token punctuation\">\\</span> Chrome <span class=\"token parameter variable\">--args</span> --enable-quic --quic-version<span class=\"token operator\">=</span>h3-23</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1d6e0c652510ca8a97827fff1fad7575/5a6dd/http3-demo.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACTElEQVR42lWRSXPTQBCF/QcgS0EVBwriRIvtaLVkS9Y20mixExNClkMqcQrHCVVw4sbff/S0i5AcXnVP98yn162elBK1rDB2bXiO9azAsxH6ziupWlNLnH1ZIokmnC+Xp8jSGXzXwjTw0Gtuf8NabPA5u4Em7qCVK+jVPd6Fl3jrfsWOd44d95zyc7yxz6i3woFYYZd6ZvMdo24DjWqmvMf7yRV6d7/+IOxuYJfXcOU1jotv+OgI7Bsz7GgRdrUYe5Tvmwl29RjD9Ayf/BZ7lFviAra4hFVcwKmu8MEq0fv5Y4OTroHIE8iygMgSBGQ/Ivtx6CEi+fYQI6PPytOYeyovixRS5BS3bz17gN7m8RGyaZHmAhmplA1yUUFUNeft/BRJlkM3DOi6jiTNEYRTOuvIihJFKSkK5GWFY8sm4GaDum7pYkbAAgXBFFhBgzBEOJnC98cM0zSN76m6rmtIs//3CwJaloXeIzmcL04IULKqmsanr6oLChaEEziuC88bwzBMBoZUM8hxzg4rioLfWDY5fHh4QNvNnyHxLEUQhPB8nx2ocSbTiOoJQ1R/HITsWPUKMrGNNPIxOVyv12jajoGy6Rg2Go34wdHREUuNqpMUMKV9KuemaTKEjRBU7dx2nC2wJtAsyXjctltgfrKE47gMeKntDnNeg/qgWpH4N3Iltzt8enqiP7lgoLqsonIxjWIMBoNXYof049QKTNNgSEnOlFNlRpngHfKBFt/vH+Dw8JBin0dVLl5KOZzQuK7rcT6NY96tihHF4XCEv+fijBWB+5EDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"http3 demo\" title=\"\" src=\"/static/1d6e0c652510ca8a97827fff1fad7575/6af66/http3-demo.png\" srcset=\"/static/1d6e0c652510ca8a97827fff1fad7575/69538/http3-demo.png 160w,\n/static/1d6e0c652510ca8a97827fff1fad7575/72799/http3-demo.png 320w,\n/static/1d6e0c652510ca8a97827fff1fad7575/6af66/http3-demo.png 640w,\n/static/1d6e0c652510ca8a97827fff1fad7575/5a6dd/http3-demo.png 802w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>http/2+quic/46이라고 되어있는 녀석들이 HTTP/3 프로토콜을 사용한 연결이다</small>\n</center>\n<p>필자는 웹 개발자이기 때문에 HTTP가 메이저 업데이트 된다는 사실을 그냥 넘기기는 힘들었고, UDP를 사용한다는 것이 뭘 의미하는지도 궁금하기도 해서 결국 HTTP/3에 대한 조사를 하게 되었다. 그래서 이번 포스팅에서는 필자가 여기저기 쑤셔보면서 알아본 HTTP/3에 대한 내용을 정리해볼까 한다.</p>\n<h2 id=\"http3에-대한-간단한-소개\" style=\"position:relative;\">HTTP/3에 대한 간단한 소개<a href=\"#http3%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%86%8C%EA%B0%9C\" aria-label=\"http3에 대한 간단한 소개 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 HTTP/3는 처음에는 “HTTP-over-QUIC”이라는 이름을 가지고 있었는데, IETF(Internet Engineering Task Force) 내 HTTP 작업 그룹과 QUIC 작업 그룹의 의장인 마크 노팅엄이 이 프로토콜의 이름을 HTTP/3로 변경할 것을 제안했고, 2018년 11월에 이 제안이 통과되어 HTTP-over-QUIC이라는 이름에서 HTTP/3으로 변경되게 되었다.</p>\n<p>즉, HTTP/3는 QUIC이라는 프로토콜 위에서 돌아가는 HTTP인 것이다. QUIC은 “Quick UDP Internet Connection”의 약자로, 말 그대로 UDP를 사용하여 인터넷 연결을 하는 프로토콜이다. <small>(참고로 발음은 그냥 “퀵”이라고 한다)</small></p>\n<p>HTTP/3는 QUIC을 사용하고, QUIC은 UDP를 사용하기 때문에 결과적으로 HTTP/3는 UDP를 사용한다고 이야기 할 수 있는 것이다.</p>\n<p>그렇다면 QUIC이 도대체 뭐길래 기존의 TCP보다 더 빠른 전송 속도를 가질 수 있다는 것일까? 그 이유를 알려면 먼저 TCP가 왜 느리다고 하는지, UDP를 사용함으로써 어떤 이득을 얻을 수 있는지 부터 알아야 한다.</p>\n<h2 id=\"tcp가-왜-느리다고-하는-걸까\" style=\"position:relative;\">TCP가 왜 느리다고 하는 걸까?<a href=\"#tcp%EA%B0%80-%EC%99%9C-%EB%8A%90%EB%A6%AC%EB%8B%A4%EA%B3%A0-%ED%95%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\" aria-label=\"tcp가 왜 느리다고 하는 걸까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 학교에서 네트워크 강의를 들을 때 TCP와 UDP의 차이에 대한 내용을 처음 배웠었는데, 교수님이 이건 반드시 시험에 나온다길래 이런 표를 보면서 열심히 외웠던 기억이 난다.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>TCP</th>\n<th>UDP</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>연결 방식</td>\n<td>연결형 서비스</td>\n<td>비연결형 서비스</td>\n</tr>\n<tr>\n<td>패킷 교환</td>\n<td>가상 회선 방식</td>\n<td>데이터그램 방식</td>\n</tr>\n<tr>\n<td>전송 순서 보장</td>\n<td>보장함</td>\n<td>보장하지 않음</td>\n</tr>\n<tr>\n<td>신뢰성</td>\n<td>높음</td>\n<td>낮음</td>\n</tr>\n<tr>\n<td>전송 속도</td>\n<td>느림</td>\n<td>빠름</td>\n</tr>\n</tbody>\n</table>\n<p>위 표를 보면 대략 “TCP는 신뢰성이 높고 느리다”, “UDP는 신뢰성이 낮고 빠르다” 정도로 정리가 되는데, 여기서 말하는 신뢰성이란 전송되는 데이터 패킷들의 순서, 패킷 유실 여부 등을 검사하여 송신 측이 보낸 모든 데이터가 수신 측에 온전하게 전달이 될 수 있느냐를 말하는 것이다.</p>\n<p>TCP는 클라이언트와 서버가 서로 신뢰성있는 통신을 할 수 있도록 몇 가지 방법을 사용하게되는데, 이 방법들 또한 결국은 클라이언트와 서버 간의 통신이기 때문에 레이턴시가 발생할 수 밖에 없다. 게다가 이 과정은 TCP라는 프로토콜이 생길 때부터 정의된 표준이므로 무시할 수도 없다.</p>\n<p>그렇다면 레이턴시를 줄이기 위해서는 TCP에서 정의한 기능 외에 다른 부분들을 건드려야 한다는 것인데, 여러모로 제한 사항이 많다. 아무리 회선의 대역폭을 늘린다고 해도 기술이 발전하면서 전송해야하는 데이터의 크기도 점점 커지기 때문에 결국 언젠가는 또 느려질 것이고, 회선의 전송 속도 자체를 높힌다고 해도 결국은 빛의 속도 보다 빠르게 전송할 수 없기 때문에 한계가 있다.</p>\n<p>HTTP/3이 UDP 기반인 QUIC 프로토콜을 사용하는 이유가 바로 이런 제약 조건을 뛰어넘기 위해 프로토콜 자체를 손보는 방법을 택한 것이다. 하지만 TCP는 워낙 오래된 프로토콜이기도 하고 커널까지 내려가는 로우 레벨에서 정의되어 있기 때문에 이걸 뜯어고치는 것도 만만치 않은 대작업이라 UDP를 선택한 것이다.</p>\n<p>그럼 한번 TCP가 신뢰성 있는 통신을 위해 사용하는 방법들이 왜 느리다고 하는지 알아보자.</p>\n<h3 id=\"3-way-handshake\" style=\"position:relative;\">3 Way Handshake<a href=\"#3-way-handshake\" aria-label=\"3 way handshake permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP는 굉장히 친절한 프로토콜이다. 통신을 시작할 때와 종료할 때 서로 준비가 되어있는지를 반드시 먼저 물어보고 패킷을 전송할 순서를 정하고 나서야 본격적인 통신을 시작하기 때문이다.</p>\n<p>이때 통신을 시작할 때 거치는 과정을 3 Way Handshake, 통신을 마칠 때 거치는 과정을 4 Way Handshake라고 한다. 이 포스팅의 목적은 이 과정을 자세히 다루는 것이 아니므로, TCP를 사용하여 통신을 시작할 때 거치는 과정인 3 Way Handshake가 어떤 원리로 작동하는지만 설명하겠다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/dd7f29fecd14fe5feebc6cf562123c48/dd45a/3way-handshake.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA9gAAAPYAF6eEWNAAACX0lEQVR42k1S227aQBD1//9EH/LQqhSpJNCE2IAvwXfWxvLd611fARHRgBSJW7A7wEvnYTS7O2fm7JlhTqdz27bb7Ycyldfr9fl8Ph6OTdO0/9nlcjkcDvCUpqltWbvdDhLgyCiKMpnwgiAihBzHCYIA/HK5BExzMwjKspzP557n2bataxrPC7wgTmWZEUW+8/MHxw0JwUmSYJwAvijKe8M7OM/zoijquoaiGGOOe+12O5I0YTx3riqS50Fpa2bOLAuZpllV9b0zwCEAtsPhkGVfx+NxHMfI1gWB8/w5A5TCMABKPM8PBgOWZf88PyfJtfNqtd5sPiAghMg3myGUxFhjPfaXYk19JooSWdaCIPZ93zCN668MI4qK/b5FqAj81R2sqSo8aRpkhqHrz3QjDkOGZdHDw/CpP03iCKGZaRqSJOVZBpjPz/3m7+fHtuUnCc9PBFBVkqIoTlLsuE61qJk0jZGlJ0kI5YG8YRij0SjPr+C5EUQOaY+thzA34uAevmZb9nOH6357El5Epi7r0I/LvAIlQBhCKQTEq067dk3279m+OYPaWYpxlmWQQAn1HM9UjSgIGNVRBmJ/oo+kN1EUhF7vd78/sJTqcmqrugbNrmpj/PjYAy0ty8rynGTE9d2yKpmRMey9dYbqE6UpMAflXc+lWXk8tba9CIJ3AGNMQSdCKDSnlBa0DNxgUS2YZb1c1Svwt03Iq6oCbuAB8/XVnE7NdttOp1TTVF3XLdvGBI8MtjvuyPM3BrZihkzQ2brZdVS6fgffFqy5jYrK8hTmZJowI7037na57y/C4z+QeJZeh7viqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3way handshake\" title=\"\" src=\"/static/dd7f29fecd14fe5feebc6cf562123c48/dd45a/3way-handshake.png\" srcset=\"/static/dd7f29fecd14fe5feebc6cf562123c48/69538/3way-handshake.png 160w,\n/static/dd7f29fecd14fe5feebc6cf562123c48/72799/3way-handshake.png 320w,\n/static/dd7f29fecd14fe5feebc6cf562123c48/dd45a/3way-handshake.png 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>통신을 시작할 때 3 Way Handshake를 하는 과정</small>\n</center>\n<p>위 그림을 보면 클라이언트가 처음 서버와 통신을 하기 위해 TCP 연결을 생성할 때 <code class=\"language-text\">SYN</code>와 <code class=\"language-text\">ACK</code>라는 패킷을 주고 받고 있다. 이 패킷 내부에 들어있는 값들을 사용하여 클라이언트와 서버가 서로 보낸 패킷의 순서와 패킷을 제대로 받았는 지를 확인할 수 있는 것이다.</p>\n<p>그리고 이 과정에는 총 3번의 통신이 필요하다. OSX나 Linux를 사용하고 있는 분이라면 터미널에서 <code class=\"language-text\">tcpdump</code> 유틸리티를 사용하여 이 과정을 직접 눈으로 확인해볼 수 있다.</p>\n<p>단, <code class=\"language-text\">tcpdump</code>를 아무 옵션 없이 사용하면 디바이스의 모든 패킷을 감시하고 출력하기 때문에 원하는 정보를 찾기 힘들다. 그래서 필자는 루프백에서 동작하고 있는 블로그 서버와의 통신만 캡쳐해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> tcpdump <span class=\"token function\">host</span> localhost <span class=\"token parameter variable\">-i</span> lo0\nIP localhost.53920 <span class=\"token operator\">></span> localhost.terabase: Flags <span class=\"token punctuation\">[</span>S<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">1260460927</span>, win <span class=\"token number\">65535</span>\nIP localhost.terabase <span class=\"token operator\">></span> localhost.53920: Flags <span class=\"token punctuation\">[</span>S.<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">3009967847</span>, ack <span class=\"token number\">1260460928</span>, win <span class=\"token number\">65535</span>\nIP localhost.53920 <span class=\"token operator\">></span> localhost.terabase: Flags <span class=\"token punctuation\">[</span>.<span class=\"token punctuation\">]</span>, ack <span class=\"token number\">3009967848</span>, win <span class=\"token number\">6379</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>보낸 놈 > 받은 놈: Flags [플래그 종류], 헤더의 값들</p>\n</blockquote>\n<p>원래는 이것보다 더 많은 정보가 나오지만, 여기에 전부 기재하기에는 양이 너무 많으니 설명에 필요한 정보만 추려보았다. 이 로그에서 중요한 키워드는 <code class=\"language-text\">Flag</code>, <code class=\"language-text\">seq</code>, <code class=\"language-text\">ack</code> 정도이다. 한번 하나하나 뜯어보도록 하자.</p>\n<p>먼저 <code class=\"language-text\">localhost.53920</code>은 클라이언트, <code class=\"language-text\">localhost.terabase</code>는 서버를 의미한다. 각 라인의 첫번째 필드는 <code class=\"language-text\">보낸 놈 > 받은 놈</code>을 의미하고 있으니, 첫 패킷은 클라이언트가 서버에게, 두 번째 패킷은 서버가 클라이언트에게 보낸 것이라고 할 수 있다. 그리고 각 라인에는 <code class=\"language-text\">Flag</code>라는 것이 붙어있는데, 플래그는 이 패킷이 어떤 타입의 패킷인지를 알려주는 역할을 한다.</p>\n<table>\n<thead>\n<tr>\n<th>Flag</th>\n<th>이름</th>\n<th>의미</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>S</td>\n<td>SYN</td>\n<td>연결을 생성할 때 클라이언트가 서버에 시퀀스 번호를 보내는 패킷</td>\n</tr>\n<tr>\n<td>S.</td>\n<td>SYN-ACK</td>\n<td>시퀀스 번호를 받은 서버가 ACK 값을 생성하여 클라이언트에게 응답하는 패킷</td>\n</tr>\n<tr>\n<td>.</td>\n<td>ACK</td>\n<td>ACK 값을 사용하여 응답하는 패킷</td>\n</tr>\n</tbody>\n</table>\n<p>이 통신 과정을 거치고 나면 클라이언트와 서버는 신뢰성 있는 TCP 연결을 생성할 수 있고, 이때 총 3회의 통신을 하기 때문에 3 Way Handshake라고 하는 것이다.</p>\n<p>그렇다면 이 과정에서 어떤 일이 벌어지길래 신뢰성 있는 연결을 생성할 수 있다는 것일까? 조금 더 자세히 들여다보면 클라이언트와 서버는 3 Way Handshake를 할 때 대략 이런 과정을 거치고 있다.</p>\n<blockquote>\n<p>1번 라인: 클라이언트가 서버로 시퀀스 번호를 <code class=\"language-text\">seq</code> 필드에 담아 보냄<br />\n2번 라인: 서버는 클라이언트가 보내준 시퀀스 번호를 1 증가시켜서 <code class=\"language-text\">ack</code> 필드에 담아 보냄<br />\n3번 라인: 클라이언트는 다시 서버로부터 받은 시퀀스 번호를 1 증가시켜서 자신의 <code class=\"language-text\">ack</code> 필드에 담아 보냄<br /></p>\n</blockquote>\n<p>새로운 TCP 연결을 생성하고자 할 때 클라이언트가 서버에게 랜덤한 시퀀스 번호를 전송함으로써 3 Way Handshake가 시작된다. 이때 생성된 시퀀스 번호는 이후 송신 측이 전송한 패킷을 수신 측이 재조립할때 패킷의 조립 순서를 알려주는 역할을 한다.</p>\n<p>이때 클라이언트와 서버는 상대방이 보내준 <code class=\"language-text\">seq(시퀀스 번호)</code>를 1 증가 시킨 후 자신의 <code class=\"language-text\">ack(승인 번호)</code> 필드에 담아서 보내는데, “지금 이 패킷이 니가 전에 보낸 시퀀스 번호의 다음으로 이어지는 패킷이야”라고 말하고 있는 것이다.</p>\n<p>이 3회의 통신이 바로 3 Way Handshake이다. 이 과정을 통해 클라이언트와 서버는 데이터를 주고 받을 준비가 되었다는 것을 서로에게 알려주고 이후 데이터 전송에 필요한 시퀀스 번호를 알 수 있게 된다. 연결을 끊을 때도 마찬가지로 이와 비슷한 과정인 4 Way Handshake를 거치고 나서야 세션을 종료할 수 있으며, 이때는 총 4회의 통신을 통해 연결을 종료한다.</p>\n<p>즉, TCP를 사용하는 이상 본격적인 통신을 시작하기 전에 무조건 저 번거로운 통신 과정을 거쳐야한다는 것이다.</p>\n<p>HTTP/1은 하나의 TCP 연결에 하나의 요청만 처리하고 연결을 끊어버렸기 때문에 매 요청마다 이 번거로운 핸드쉐이크를 거쳐야 했다. 그래서 HTTP/2에서는 핸드쉐이크를 최소화하기 위해서 단일 TCP 연결을 유지하면서 여러 개의 요청을 처리할 수 있도록 변경된 것이다.</p>\n<p>결국 HTTP/1에서 HTTP/2로 넘어갈 때도 핸드쉐이크 과정 자체는 건드리지 않았고 단지 핸드쉐이크가 발생하는 횟수를 최소화함으로써 레이턴시를 줄인 것이다. 이는 TCP를 사용하는 이상 핸드쉐이크가 반드시 필요한 과정이기 때문에 건드리지 못한 것이다.</p>\n<p>그러나 HTTP/3는 UDP를 사용함으로써 이 핸드쉐이크 과정 자체를 날려버리고 다른 방법으로 연결의 신뢰성을 확보함으로써 레이턴시를 줄이는 방법을 택했다.</p>\n<h3 id=\"holbhead-of-line-blocking\" style=\"position:relative;\">HOLB(Head of line Blocking)<a href=\"#holbhead-of-line-blocking\" aria-label=\"holbhead of line blocking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그 외에도 TCP를 사용하는 기존의 HTTP에는 한 가지 문제가 더 있는데, 바로 HOLB(Head of Line Blocking)라고 하는 문제이다. 사실 HTTP 레벨에서의 HOLB와 TCP 레벨에서의 HOLB는 다른 의미이기는 하나 결국 어떤 요청에 병목이 생겨서 전체적인 레이턴시가 늘어난다는 맥락으로 본다면 동일하다고 할 수 있다.</p>\n<p>TCP를 사용한 통신에서 패킷은 무조건 정확한 순서대로 처리되어야 한다. 수신 측은 송신 측과 주고받은 시퀀스 번호를 참고하여 패킷을 재조립해야하기 때문이다.</p>\n<p>그래서 통신 중간에 패킷이 손실되면 완전한 데이터로 다시 조립할 수 없기 때문에 절대로 그냥 넘어가지 않는다. 무조건 송신 측은 수신 측이 패킷을 제대로 다 받았다는 것을 확인한 후, 만약 수신 측이 제대로 패킷을 받지 못했으면 해당 패킷을 다시 보내야 한다.</p>\n<p>또한 패킷이 처리되는 순서 또한 정해져있으므로 이전에 받은 패킷을 파싱하기 전까지는 다음 패킷을 처리할 수도 없다. 이렇게 패킷이 중간에 유실되거나 수신 측의 패킷 파싱 속도가 느리다면 통신에 병목이 발생하게 되는 현상을 “HOLB”라고 부르는 것이다. 이건 TCP 자체의 문제이므로 HTTP/1 뿐만 아니라 HTTP/2도 가지고 있는 문제이다.</p>\n<p>이런 문제들을 해결하기 위해 HTTP/3는 UDP를 기반으로 만들어진 프로토콜인 QUIC 위에서 작동하는 것을 선택한 것이다. 그럼 이제 QUIC가 정확히 어떤 프로토콜인지, UDP를 사용한다는 것이 TCP에 비해서 어떤 장점이 있다는 것인지를 알아보자.</p>\n<h2 id=\"http3가-udp를-사용하는-이유\" style=\"position:relative;\">HTTP/3가 UDP를 사용하는 이유<a href=\"#http3%EA%B0%80-udp%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"http3가 udp를 사용하는 이유 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>HTTP/3는 QUIC을 기반으로 돌아가는 프로토콜이기 때문에 우리가 HTTP/3를 이해하려면 QUIC에 초점을 맞춰야 한다. QUIC은 TCP가 가지고 있는 이런 문제들을 해결하고 레이턴시의 한계를 뛰어넘고자 구글이 개발한 UDP 기반의 프로토콜이다.</p>\n<p>QUIC은 처음부터 TCP의 핸드쉐이크 과정을 최적화하는 것에 초점을 맞추어 설계되었고, UDP를 사용함으로써 이를 실현해낼 수 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8e3e92afbd86fb0b85dcbb6ef055c169/e8950/quic.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3klEQVR42o1U/UuTURT2H4gI+iGTgqB+S5McFqlJZDaz0LK0NHSpSYkmlbNiH1okiC00h6SULjQykrWK/MyVpqFoUzIlNXP4rdkHfmzpdren+95t2mxbXTjcc+8553mfe597XjcAC86MEOJy/YfNUTNTq3eDk2E2m9k8O69DQ1sX5nR6u/1VucTqNrs5A1oyGFHV1IYD0Slw38lHcEwq6lo6/spzCWhL0v1axCNVDbb5H8WWM2Lwyt9ia4IEG31CEHvxBj4OaO3yHQISk4nNlbWNOJYsQux1OQIq3oHXoIVPqRretYPg0dmDL8Am/wg8a2hZrnMMSCyAIlkx1vidgG/TGHaUqBEnkiFbdhfh6TnwftCIXXTf/aAA4tvF1jriGlCadx/r/I5jj6oLPGUnAkUFEOYWoVjxGOICBUIVdVgbEIVMmucS0GQ98vuefuyLuYANu8OwXVIEn5p+eKk+4EihElLKPrdQAQkF0/QMWOvM/xZlnj6RgjIlPPdHwSM4Dl6Z97CeHtPrsACvWjv/X2X2RZpoYzsyNYNLN+XwDDoJYbYco5Nfl0/DMXMKaDQa6bszMDMaLTFuNlkUxMTMj+VXwOXY2Blo3aKlzjnD1VdgY8sxMjnoEocMa5vbkZyVTy0P1bQ7uPHpyzCKKl4wv6SyCh3dfcyXlz/F1Mx35iuUNUgQ3YL0jmIFUE+7IiA6FWWqOjx8Xg/fiHMs8rpVg9CzV5gfmZbFYtwIPJ0G7dgkej9rWZ2qvhnqVs0K4NyCHv6nUjAyMY3x6W8IElxmkTf0h8BPyGB3GU47p+Klmu3z44VMHE1vP0ISM8ARon1vd2STJL+U0CA5lHSVbN4bSdq7+8jP2XkSK8wmYedFJCJVSgaHx4mRvuL4azmEMiQLOj1JFOWS4Ph0kiSWLVlFb2R3aLaagXZLS2cPhkYnV0Qxc7Nz4bg4FcyO4RDVcQirjJKxW1O1Xa0HqXEsnvwGZ3Pl7+F/khcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"quic\" title=\"\" src=\"/static/8e3e92afbd86fb0b85dcbb6ef055c169/6af66/quic.png\" srcset=\"/static/8e3e92afbd86fb0b85dcbb6ef055c169/69538/quic.png 160w,\n/static/8e3e92afbd86fb0b85dcbb6ef055c169/72799/quic.png 320w,\n/static/8e3e92afbd86fb0b85dcbb6ef055c169/6af66/quic.png 640w,\n/static/8e3e92afbd86fb0b85dcbb6ef055c169/d9199/quic.png 960w,\n/static/8e3e92afbd86fb0b85dcbb6ef055c169/21b4d/quic.png 1280w,\n/static/8e3e92afbd86fb0b85dcbb6ef055c169/e8950/quic.png 2000w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>UDP는 User Datagram Protocol이라는 이름에서도 알 수 있듯이 데이터그램 방식을 사용하는 프로토콜이기 때문에 애초에 각각의 패킷 간의 순서가 존재하지 않는 독립적인 패킷을 사용한다. 또한 데이터그램 방식은 패킷의 목적지만 정해져있다면 중간 경로는 어딜 타든 신경쓰지 않기 때문에 종단 간의 연결 설정 또한 하지 않는다. 즉, 핸드쉐이크 과정이 필요없다는 것이다.</p>\n<p>결론적으로 UDP는 TCP가 신뢰성을 확보하기 위해 거치던 많은 과정을 거치지 않기 때문에 속도가 더 빠를 수 밖에 없다는 것인데, 그렇다면 UDP를 사용하게되면 기존의 TCP가 가지던 신뢰성과 패킷의 무결함도 함께 사라지는 걸까?</p>\n<p>아니 그렇지 않다. UDP를 사용하더라도 기존의 TCP가 가지고 있던 기능을 전부 구현할 수 있다. UDP의 진짜 장점은 바로 커스터마이징이 용이하다는 것이기 때문이다.</p>\n<h3 id=\"udp는-하얀-도화지-같은-프로토콜이다\" style=\"position:relative;\">UDP는 하얀 도화지 같은 프로토콜이다<a href=\"#udp%EB%8A%94-%ED%95%98%EC%96%80-%EB%8F%84%ED%99%94%EC%A7%80-%EA%B0%99%EC%9D%80-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%9D%B4%EB%8B%A4\" aria-label=\"udp는 하얀 도화지 같은 프로토콜이다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>필자는 학교에서 UDP와 TCP의 가장 큰 차이점으로 “UDP는 TCP보다 신뢰성이 없는 대신 빠르다”라고 배웠었는데, 사실 이 말은 반은 맞고 반은 틀리다.</p>\n<p>왜냐면 애초에 UDP는 데이터 전송을 제외한 그 어떤 기능도 정의되어 있지 않은 프로토콜이기 때문에 프로토콜 자체적으로 신뢰성을 보장하지 않는 것은 맞지만, 다르게 말하자면 데이터 전송 기능을 제외한 아무 기능이 없는 백지 상태의 프로토콜이라고도 할 수 있기 때문이다. TCP가 신뢰성있는 연결과 혼잡 제어 등을 위해 얼마나 많은 기능을 가지고 있는 지는 TCP의 헤더를 보면 대충 각이 나온다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ac69210c44cd473bcb737665d590b124/c7bb6/tcp-header.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABWUlEQVR42j2P147CMBRE8/9/x4IQkEKq4zi9YofA7NjS7sOR43jKvV6YSMh2xbJs6PoR47Rg5vc0rxjGGbKq8fADVKpx/5q2d5o/rKbtBvTDhO2l4V0fCcK0gpAKWSGRCYkozvBMcqR5ibQoIVWLsmrce5wWjuvNx+0RIMkEYmr9KEHbD/ByoVz7/j6gzU4M20ZOucLsb9cqK4W8ENTVWLeXo6N5GCfnsTpNzL7DS3PJ9hrLurmQhUyzXWfGwDWSNEMYPSFK6mQFVTeuxIZuRGuDF9mIYbib0K7UsLHuejwZkNEsaVRtB9W06DiJOQ4c3y/eZKXZvlv9y05ntyOGeGFcoMwKHFxTM0A3HaoogopjTJxoYvggSow8F65uTxGEKMOIuif6vIC2wSw23MwTNSdIUnx9H0cQ4BOG2Pk9ns+O6XJx9KfT/338OaPjXd/v+LLcej7WrxR+AYjFDnQh+N9MAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tcp header\" title=\"\" src=\"/static/ac69210c44cd473bcb737665d590b124/6af66/tcp-header.png\" srcset=\"/static/ac69210c44cd473bcb737665d590b124/69538/tcp-header.png 160w,\n/static/ac69210c44cd473bcb737665d590b124/72799/tcp-header.png 320w,\n/static/ac69210c44cd473bcb737665d590b124/6af66/tcp-header.png 640w,\n/static/ac69210c44cd473bcb737665d590b124/d9199/tcp-header.png 960w,\n/static/ac69210c44cd473bcb737665d590b124/21b4d/tcp-header.png 1280w,\n/static/ac69210c44cd473bcb737665d590b124/c7bb6/tcp-header.png 1986w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이미 정보들이 뚱뚱하게 들어찬 TCP의 헤더</small>\n</center>\n<p>TCP의 경우 워낙 오래 전에 설계되기도 했고, 이런 저런 기능이 워낙 많이 포함된 프로토콜이다보니 이미 헤더가 거의 풀방이다. TCP에 기본적으로 정의되어 있는 기능 외에 다른 추가 기능을 구현하고 싶다면 가장 하단에 있는 <code class=\"language-text\">옵션(Options)</code> 필드를 사용해야 하는데, 옵션 필드도 무한정 배당 해줄 수는 없으니 최대 크기를 <code class=\"language-text\">320 bits</code>로 정해놓았다.</p>\n<p>그러나 TCP의 단점을 보완하기 위해 나중에 정의된 <code class=\"language-text\">MSS(Maximum Segment Size)</code>, <code class=\"language-text\">WSCALE(Window Scale factor)</code>, <code class=\"language-text\">SACK(Selective ACK)</code> 등 많은 옵션들이 이미 옵션 필드를 차지하고 있기 때문에 실질적으로 사용자가 커스텀 기능을 구현할 수 있는 자리는 거의 남지도 않았다.</p>\n<p>반면 UDP는 데이터 전송 자체에만 초점을 맞추고 설계되었기 때문에 헤더에 진짜 아무 것도 없다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f9ccf1094e8f9f057d72c004d4f0e0e8/73dae/udp-header.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 13.750000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAq0lEQVR42j2O226DMBAF+f/P60vTkNoO2GAuBoxNopJEky1S+zDSzh7tpVCVx0+ZdLszxcSSNtbtfhDzjXlN6KpGXesjiykTpoW4Zqm3gzmuTHNkkfnio3Qo7QjW4U1Nf7U0yqBOZ5pvg9cVvfQ7wTUdVqidp7Ytn6eS8qKxbU8l/kvRjYEwjOxy5WeJPOSjLN5q8+9/2T6OPIVXCOz9QPt1Zjbm8KfseQwDb9HI4QyOb6OzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"udp header\" title=\"\" src=\"/static/f9ccf1094e8f9f057d72c004d4f0e0e8/6af66/udp-header.png\" srcset=\"/static/f9ccf1094e8f9f057d72c004d4f0e0e8/69538/udp-header.png 160w,\n/static/f9ccf1094e8f9f057d72c004d4f0e0e8/72799/udp-header.png 320w,\n/static/f9ccf1094e8f9f057d72c004d4f0e0e8/6af66/udp-header.png 640w,\n/static/f9ccf1094e8f9f057d72c004d4f0e0e8/d9199/udp-header.png 960w,\n/static/f9ccf1094e8f9f057d72c004d4f0e0e8/21b4d/udp-header.png 1280w,\n/static/f9ccf1094e8f9f057d72c004d4f0e0e8/73dae/udp-header.png 2122w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>TCP와 비교해보면 확실히 휑한 UDP의 헤더</small>\n</center>\n<p>UDP의 헤더에는 출발지와 도착지, 패킷의 길이, 체크섬 밖에 없다. 이때 체크섬은 패킷의 무결성을 확인하기 위해 사용되는데, TCP의 체크섬과는 다르게 UDP의 체크섬은 사용해도 되고 안해도 되는 옵션이다.</p>\n<p>즉, UDP 프로토콜 자체는 TCP보다 신뢰성이 낮기도 하고 흐름 제어도 안되지만, 이후 개발자가 어플리케이션에서 구현을 어떻게 하냐에 따라서 TCP와 비슷한 수준의 기능을 가질 수도 있다는 것이다.</p>\n<p>물론 TCP가 신뢰성을 확보하기위해 이런 저런 기능을 제공해주는 것이 개발자 입장에서는 편하고 좋지만, 한가지 슬픈 점은 이 기능들이 프로토콜 자체에 정의된 필수 과정이라서 개발자가 맘대로 커스터마이징 할 수 없다는 것이다. 결국 여기서 발생하는 레이턴시들을 어떻게 더 줄여볼 시도조차 하기 힘들다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e0bf6f0a79b033925a91b04e4653d7af/e2310/tcp-tls.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 102.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADtklEQVR42s2TbUxTVxjHsWwuRMbclmWGKZoN3USigsFJ1A9kWZZJsixmbPHLFr84i2lLaUtf0uaEVpcimkDGQjYVBTK23ESBZnTicLp0AtG2lL5cyu1tb+9tb6G0lHaoHVR6dm4DRnRu9sOSneRJ7n2ec375n/P8n5yc/3IJBIICoVC4VSqVviWRSDbX1dW9WV9fvwnlihoaGjbKZLJCPp+/icuLRKL1y7XX0dE1q0AYBnO5UCi+elUuB1sAABuXgeUItEOr1W7V6XSb1Wr1dg4gFovfUCj4LwOgL5LJQCGEMBfFc6uhN0C+sllZqmxVvsb9Awh5T7sJBA9rPK1Wv0MJwDurNty5M9kyMkzYzL/jt1wW0jwViQ5csAY+PKb/9iUPjpcHg8GjDMMcpWm6hts/KLlcCnJq1vqmUx8RzPwEPX3PNhVJVj0Edl2yD7WfGoEXVFdT174zw5nYQqSfjB/JqEkmtyDYCYIgakmSPIYxWF5Pbc+7bvsUFp39M3U/uZRegjAdu5uC1vEZUQbonIgPOYgktDHzKR99D17rsET7iOgn3cbRAjYQEPn9/hORSIQfDoWlOIl/0S3o3nf7FiO1k3+kTWb2wc1RJm3xJhZ/tYU/yABn5lP6u6kl08JS2hhL3L9uHqaw86OB6isDv2xDykQul+szpPJjpPBIcDpY2av6abegWPDCb65Eo2ViDjqJWMpiC9X//YNDmLGA6opzby1oy08kIm+zLNuAVMpCodCXXK1H3ldmbDUWcN9zc3D3/AIs5c4hd/BWIJm2c2E2w+e5nOZHR8U57OorLEsfQCA+RVHHUVOOOwlnyQ+NvQe7JF3rHhPC+0eFwnOWnSMWx3afz/cNUncKx3Hd+Ph4u5/xSzvVxrK2Wiz/ETG5T52WFaCmw1oRjieLY+Hwrng8vndxcbECXf2g1z9Z/XO36dOaErD2mcZv5R1Of2+vnJ6Jtnk9nkuoGc1ut/uM3W4/zYYCHe7bDHhi3P5NoeKMaU9np6Fo0uU6xCmbnZ3dj6xTheobWoT9O8/L+l7MCqhqGiqn6UghgjUiy+i9Xq+OcBOtoXDg8681hspmyeC6rIBy7c0yg8FUhOPOk6jDOnRlDUGQzYEQdbhJZihvAzfyswJqNIN7jEaigKI8VUhdNTL3IYfNcdiOW99vaex976x4OC8roFp+fZfTSpSQpAfzeDw9KNopyt8ZYOm6JtXQsytEyAwQKAa2XbyIbRgbG1u/bHreit+Aor/4rBjLy/k/rDXZnvgLm+tNcqo265oAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tcp tls\" title=\"\" src=\"/static/e0bf6f0a79b033925a91b04e4653d7af/6af66/tcp-tls.png\" srcset=\"/static/e0bf6f0a79b033925a91b04e4653d7af/69538/tcp-tls.png 160w,\n/static/e0bf6f0a79b033925a91b04e4653d7af/72799/tcp-tls.png 320w,\n/static/e0bf6f0a79b033925a91b04e4653d7af/6af66/tcp-tls.png 640w,\n/static/e0bf6f0a79b033925a91b04e4653d7af/d9199/tcp-tls.png 960w,\n/static/e0bf6f0a79b033925a91b04e4653d7af/e2310/tcp-tls.png 968w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>TCP에 TLS까지 사용한다면 통신을 시작하기도 전에 이렇게 많은 과정을 거쳐야 한다</small>\n</center>\n<p>결국 레이턴시를 줄이려면 프로토콜 외적인 것들을 건드려야 하는데, 위에서 이야기 했듯이 일반적인 개발자가 통신 과정에서 건드릴 수 있는 영역은 한계가 있기 때문에 이 또한 어려운 것이 사실이다.<small>(통신 업계의 큰 손 형님들이 인프라를 깔아주시는 걸 기다리자)</small></p>\n<p>아직 TCP와 UDP의 차이가 잘 와닿지 않는다면 “좋은 기능이 다 들어있는 무거운 라이브러리”와 “필요한 기능만 들어있는 가벼운 라이브러리”로 비교해보면 조금 더 이해가 빠를 것 같다.</p>\n<p>예를 들어 JavaScript 진영에서 많이 사용하는 <a href=\"https://lodash.com/\" target=\"_blank\" rel=\"nofollow\">lodash</a>와 같은 라이브러리는 기능은 무궁무진하고 사용자에게 큰 편리함을 주지만, 보통 lodash의 모든 메소드를 다 사용하는 사람은 많지 않을 것이다. 결국 편하긴 하지만 내가 사용하지 않는 기능까지 전부 내 JS 번들에 포함시켜야 한다는 부담이 있다.</p>\n<p>반면 단순한 하나의 기능을 제공하는 라이브러리는 lodash보다 기능은 많지 않아도 내가 원하는 부분만 쏙쏙 골라서 사용할 수 있다는 장점이 있다. 하지만 해당 라이브러리에서 지원하지 않는 기능은 직접 구현해야하는 번거로움이 있을 수도 있다. 이때 lodash와 같은 만능 라이브러리가 TCP, 하나의 기능만 제공하는 작은 라이브러리가 UDP인 것이다.</p>\n<p>이렇듯 구글이 QUIC을 만들 때 UDP를 선택한 이유에는 기존의 TCP를 수정하기가 어려운데다가, 백지 상태나 다름 없는 UDP를 사용함으로써 QUIC의 기능을 확장하기 쉽다고 생각했기 때문이라는 것도 있다.</p>\n<h2 id=\"http3가-udp를-사용함으로써-기존-프로토콜보다-나아진-점\" style=\"position:relative;\">HTTP/3가 UDP를 사용함으로써 기존 프로토콜보다 나아진 점<a href=\"#http3%EA%B0%80-udp%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A8%EC%9C%BC%EB%A1%9C%EC%8D%A8-%EA%B8%B0%EC%A1%B4-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EB%B3%B4%EB%8B%A4-%EB%82%98%EC%95%84%EC%A7%84-%EC%A0%90\" aria-label=\"http3가 udp를 사용함으로써 기존 프로토콜보다 나아진 점 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>지금까지 HTTP/3의 뼈대로 사용되는 QUIC이 왜 TCP가 아닌 UDP를 사용했는지 간략하게 알아보았다. 그렇다면 실제로 UDP를 사용함으로써 얻는 이득에는 무엇이 있을까? 진짜로 HTTP/3는 UDP를 사용함으로써 기존의 HTTP + TCP + TLS를 사용했던 방법보다 더 좋아진 것 일까?</p>\n<p>그에 대한 해답은 Chromium Projects의 <a href=\"https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit\" target=\"_blank\" rel=\"nofollow\">QUIC Overview</a>라는 문서에서 찾을 수 있었다. 한번 구글이 이야기하는 QUIC의 장점에 대해서 살펴보자.</p>\n<h3 id=\"연결-설정-시-레이턴시-감소\" style=\"position:relative;\">연결 설정 시 레이턴시 감소<a href=\"#%EC%97%B0%EA%B2%B0-%EC%84%A4%EC%A0%95-%EC%8B%9C-%EB%A0%88%EC%9D%B4%ED%84%B4%EC%8B%9C-%EA%B0%90%EC%86%8C\" aria-label=\"연결 설정 시 레이턴시 감소 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>QUIC은 TCP를 사용하지 않기 때문에 통신을 시작할 때 번거로운 3 Way Handshake 과정을 거치지 않아도 된다. 클라이언트가 보낸 요청을 서버가 처리한 후 다시 클라이언트로 응답해주는 사이클을 “RTT(Round Trip Time)“라고 하는데, TCP는 연결을 생성하기 위해 기본적으로 1 RTT가 필요하고, 여기에 TLS를 사용한 암호화까지 하려고 한다면 TLS의 자체 핸드쉐이크까지 더해져 총 3 RTT가 필요하다.</p>\n<p>반면 QUIC은 첫 연결 설정에 1 RTT만 소요된다. 클라이언트가 서버에 어떤 신호를 한번 주고, 서버도 거기에 응답하기만 하면 바로 본 통신을 시작할 수 있다는 것이다. 즉, 연결 설정에 소요되는 시간이 반 정도 밖에 안된다.</p>\n<center>\n  <img src=\"/95f5c7e411d0b7f96d182abe284be551/gcp-cloud-cdn-performance.gif\" width=\"100%\">\n  <br>\n</center>\n<p>어떻게 이게 가능한 걸까? 그 이유는 생각보다 간단하다. 첫번째 핸드쉐이크를 거칠 때, 연결 설정에 필요한 정보와 함께 데이터도 보내버리는 것이다. TCP + TLS는 데이터를 보내기 전에 신뢰성있는 연결과 암호화에 필요한 모든 정보를 교환하고 유효성을 검사한 뒤에 데이터를 교환하지만, QUIC은 묻지도 따지지도 않고 그냥 바로 데이터부터 꽂아버리고 시작한다.</p>\n<p>이 과정에 대해서는 2015년 IEEE Symposium에서 발표된 ”<a href=\"https://youtu.be/vXgbPZ-1-us\" target=\"_blank\" rel=\"nofollow\">How Secure and Quick is QUIC?</a>“이라는 세션에서 자세히 들어볼 수 있다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/vXgbPZ-1-us?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>3분 33초 부터 보도록 하자.<br />한 손 주머니에 꽂고 발표하는 모습에서 스웩이 넘친다</small>\n  <br />\n  <br />\n</center>\n<p>결국 이 영상에서 말하고자 하는 것은 TCP + TLS는 서로 자신의 세션 키를 주고 받아 암호화된 연결을 성립하는 과정을 거치고 나서야 세션 키와 함께 데이터를 교환할 수 있지만, QUIC은 서로의 세션 키를 교환하기도 전에 데이터를 교환할 수 있기 때문에 연결 설정이 더 빠르다는 것이다.</p>\n<p>단, 클라이언트가 서버로 첫 요청을 보낼 때는 서버의 세션 키를 모르는 상태이기 때문에 목적지인 서버의 Connection ID를 사용하여 생성한 특별한 키인 초기화 키(Initial Key)를 사용하여 통신을 암호화 한다. 이 과정에 대한 자세한 설명은 QUIC 작업 그룹의 <a href=\"https://quicwg.org/base-drafts/draft-ietf-quic-tls.html#rfc.section.5.2\" target=\"_blank\" rel=\"nofollow\">Using TLS to Secure QUIC</a> 문서에서 확인 해볼 수 있다.</p>\n<p>그리고 한번 연결에 성공했다면 서버는 그 설정을 캐싱해놓고 있다가, 다음 연결 때는 캐싱해놓은 설정을 사용하여 바로 연결을 성립시키기 때문에 0 RTT만으로 바로 통신을 시작할 수도 있다. 이런 점들 때문에 QUIC은 기존의 TCP+TLS 방식에 비해 레이턴시를 더 줄일 수 있었던 것이다.</p>\n<p>참고로 이 세션이 발표될 당시에는 TLS 1.3이 나오기 전이라 따로 언급이 되지 않았지만, 지금은 TCP Fast Open과 TLS 1.3을 사용하여 QUIC와 비슷한 과정을 통해 연결을 설정함으로써 TCP를 사용하더라도 동일한 이점을 가져갈 수도 있긴하다.</p>\n<p>그러나 TCP SYN 패킷은 한 패킷당 약 <code class=\"language-text\">1460 Byte</code>만 전송할 수 있도록 제한하지만 QUIC은 데이터 전체를 첫 번째 라운드 트립에 포함해서 전송할 수 있기 때문에 주고 받아야할 데이터가 큰 경우에는 여전히 QUIC가 유리하다고 할 수 있다.</p>\n<h3 id=\"패킷-손실-감지에-걸리는-시간-단축\" style=\"position:relative;\">패킷 손실 감지에 걸리는 시간 단축<a href=\"#%ED%8C%A8%ED%82%B7-%EC%86%90%EC%8B%A4-%EA%B0%90%EC%A7%80%EC%97%90-%EA%B1%B8%EB%A6%AC%EB%8A%94-%EC%8B%9C%EA%B0%84-%EB%8B%A8%EC%B6%95\" aria-label=\"패킷 손실 감지에 걸리는 시간 단축 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>QUIC도 TCP와 마찬가지로 전송하는 패킷에 대한 흐름 제어를 해야한다. 왜냐면 QUIC든 TCP든 결국 본질적으로는 ARQ 방식을 사용하는 프로토콜이기 때문이다. 통신과정에서 발생한 에러를 어떻게 처리할 것인지를 이야기하는 것인데, ARQ 방식은 에러가 발생하면 재전송을 통해 에러를 복구하는 방식을 말하는 것이다.</p>\n<p>TCP는 여러 ARQ 방식 중에서 “Stop and Wait ARQ” 방식을 사용하고 있다. 이 방식은 송신 측이 패킷을 보낸 후 타이머를 사용하여 시간을 재고, 일정 시간이 경과해도 수신 측이 적절한 답변을 주지 않는다면 패킷이 손실된 것으로 판단하고 해당 패킷을 다시 보내는 방식이다.</p>\n<p>우선 2017년 구글에서 발표한 <a href=\"https://datatracker.ietf.org/doc/draft-ietf-quic-recovery/?include_text=1\" target=\"_blank\" rel=\"nofollow\">QUIC Loss Detection and Congestion Control</a>에 따르면, QUIC은 기본적으로 TCP와 유사한 방법으로 패킷 손실을 탐지하나, 몇 가지 개선 사항을 추가한 것으로 보인다.</p>\n<p>TCP에서 패킷 손실 감지에 대한 대표적인 문제는 송신 측이 패킷을 수신측으로 보내고 난 후 얼마나 기다려줄 것인가, 즉 타임 아웃을 언제 낼 것인가를 동적으로 계산해야한다는 것이다. 이때 이 시간을 RTO(Retransmission Time Out)라고 하는데, 이때 필요한 데이터가 바로 RTT(Round Trip Time)들의 샘플들이다.</p>\n<p>한번 패킷을 보낸 후 잘 받았다는 응답을 받을 때 걸렸던 시간들을 측정해서 동적으로 타임 아웃을 정하는 것이다. 즉, RTT 샘플을 측정하기 위해서는 반드시 송신 측으로 부터 ACK를 받아야하는데, 정상적인 상황에서는 딱히 문제가 없으나 타임 아웃이 발생해서 패킷 손실이 발생하게 되면 RTT 계산이 애매해진다.</p>\n<blockquote>\n<p>패킷 전송 -> 타임 아웃 -> 패킷 재전송 -> ACK 받음!<br />\n<small>(근데 이거 첫 번째로 보낸 패킷의 ACK야? 두 번째로 보낸 패킷의 ACK야?)</small></p>\n</blockquote>\n<p>이때 이 ACK가 어느 패킷에 대한 응답인지 알기 위해서는 타임스탬프를 패킷에 찍어주는 등 별도의 방법을 또 사용해야하고, 또 이를 위한 패킷 검사도 따로 해줘야 한다. 이를 재전송 모호성(Retransmission Ambiguity)이라고 한다.</p>\n<p>이 문제를 해결하기 위해 QUIC는 헤더에 별도의 패킷 번호 공간을 부여했다. 이 패킷 번호는 패킷의 전송 순서 자체만을 나타내며, 재전송시 동일한 번호가 전송되는 시퀀스 번호와는 다르게 매 전송마다 모노토닉하게 패킷 번호가 증가하기 때문에, 패킷의 전송 순서를 명확하게 파악할 수 있다.</p>\n<p>TCP의 경우 타임스탬프를 사용할 수 있는 상황이라면 타임스탬프를 통해 패킷의 전송 순서를 파악할 수 있지만, 만약 사용할 수 없는 경우 시퀀스 번호에 기반하여 암묵적으로 전송 순서를 추론할 수 밖에 없지만, QUIC는 이런 불필요한 과정을 패킷마다 고유한 패킷 번호를 통해 타파함으로써 패킷 손실 감지에 걸리는 시간을 단축할 수 있었다.</p>\n<p>이 외에도 QUIC는 대략 5가지 정도의 기법을 사용하여 이 패킷 손실 감지에 걸리는 시간을 단축시켰는데, 자세한 내용은 <a href=\"https://datatracker.ietf.org/doc/draft-ietf-quic-recovery/?include_text=1\" target=\"_blank\" rel=\"nofollow\">QUIC Loss Detection and Congestion Control</a>의 “3.1 Relevant Differences Between QUIC and TCP” 챕터를 한번 읽어보는 것을 추천한다.</p>\n<h3 id=\"멀티플렉싱을-지원\" style=\"position:relative;\">멀티플렉싱을 지원<a href=\"#%EB%A9%80%ED%8B%B0%ED%94%8C%EB%A0%89%EC%8B%B1%EC%9D%84-%EC%A7%80%EC%9B%90\" aria-label=\"멀티플렉싱을 지원 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>멀티플렉싱(Multiplexing)은 위에서 TCP의 단점으로 언급했던 HOLB를 방지하기 때문에 매우 중요하다. 여러 개의 스트림을 사용하면, 그 중 특정 스트림의 패킷이 손실되었다고 하더라도 해당 스트림에만 영향을 미치고 나머지 스트림은 멀쩡하게 굴릴 수 있기 때문이다.</p>\n<p>참고로 멀티플렉싱은 여러 개의 TCP 연결을 만든다는 의미가 아니라, 단일 연결 안에서 몇 가지 얌생이를 사용하여 여러 개의 데이터를 섞이지 않게 보내는 기법이다. 이때 각각의 데이터의 흐름을 스트림(Stream)이라고 하는 것이다.</p>\n<p>HTTP/1의 경우는 하나의 TCP 연결에 하나의 스트림만 사용하기 때문에 HOLB 문제에서 벗어날 수 없었다. 또한 한번의 전송이 끝나게 되면 연결이 끊어지기 때문에 다시 연결을 만들기 위해서는 번거로운 핸드쉐이크 과정을 또 겪어야 했다.</p>\n<p>비록 <code class=\"language-text\">keep-alive</code> 옵션을 통해 어느 정도의 시간 동안 연결을 유지할 수는 있지만 결국 일정 시간 안에 액세스가 없다면 연결이 끊어지게 되는 것은 똑같다.</p>\n<p>그리고 HTTP/2는 하나의 TCP 연결 안에서 여러 개의 스트림을 처리하는 멀티플렉싱 기법을 도입하여 성능을 끌어올린 케이스이다. 이 경우 한번의 TCP 연결로 여러 개의 데이터를 전송할 수 있기 때문에 핸드쉐이크 횟수도 줄어들게 되어 효율적인 데이터 전송을 할 수 있게 된다.</p>\n<center>\n  <img src=\"/40cb0bc1d62eba25c2e351d213d1700d/multiplexing.svg\">\n  <br>\n  <small>HTTP/3도 HTTP/2와 같은 멀티플렉싱을 지원한다.</small>\n  <br>\n  <br>\n</center>\n<p>QUIC 또한 HTTP/2와 동일하게 멀티플렉싱을 지원하기 때문에, 이런 이점을 그대로 가져가고 있다. 혹여나 하나의 스트림에서 문제가 발생한다고 해도 다른 스트림은 지킬 수 있게 되어 이런 문제에서 자유로울 수 있다.</p>\n<h3 id=\"클라이언트의-ip가-바뀌어도-연결이-유지됨\" style=\"position:relative;\">클라이언트의 IP가 바뀌어도 연결이 유지됨<a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EC%9D%98-ip%EA%B0%80-%EB%B0%94%EB%80%8C%EC%96%B4%EB%8F%84-%EC%97%B0%EA%B2%B0%EC%9D%B4-%EC%9C%A0%EC%A7%80%EB%90%A8\" aria-label=\"클라이언트의 ip가 바뀌어도 연결이 유지됨 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>TCP의 경우 소스의 IP 주소와 포트, 연결 대상의 IP 주소와 포트로 연결을 식별하기 때문에 클라이언트의 IP가 바뀌는 상황이 발생하면 연결이 끊어져 버린다. 연결이 끊어졌으니 다시 연결을 생성하기 위해 결국 눈물나는 3 Way Handshake 과정을 다시 거쳐야한다는 것이고, 이 과정에서 다시 레이턴시가 발생한다.</p>\n<p>게다가 요즘에는 모바일로 인터넷을 사용하는 경우가 많기 때문에 Wi-fi에서 셀룰러로 전환되거나 그 반대의 경우, 혹은 다른 Wi-fi로 연결되는 경우와 같이 클라이언트의 IP가 변경되는 일이 굉장히 잦아서 이 문제가 더 눈에 띈다.</p>\n<p>반면 QUIC은 Connection ID를 사용하여 서버와 연결을 생성한다. Connection ID는 랜덤한 값일 뿐, 클라이언트의 IP와는 전혀 무관한 데이터이기 때문에 클라이언트의 IP가 변경되더라도 기존의 연결을 계속 유지할 수 있다. 이는 새로 연결을 생성할 때 거쳐야하는 핸드쉐이크 과정을 생략할 수 있다는 의미이다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 HTTP/3와 QUIC을 제대로 설명하기 위해서는 네트워크에 대한 기본 개념들이 필수적으로 동반되야하기 때문에 이 짧은 포스팅 만으로 세부적인 설명을 하기 힘든 부분이 있었다. 최대한 자세하게 작성해보려고 했지만 생각보다 글이 너무 길어지게 되어서 분량 조절을 조금 하려고 한다.</p>\n<p>이번에 HTTP/3를 공부해보고 여러가지 자료를 찾아보면서 느낀 점은 “뭐가 이렇게 많이 바뀌었어?” 였던 것 같다. 일단 TCP부터 갖다 버렸으니 뭐가 많이 바뀔만 하긴 했지만, HTTP/2를 사용해본지도 몇 달 밖에 되지 않은 필자의 입장에서는 조금 당황스럽기는 했다. <small>(HTTP를 만든다면서 TCP를 갖다 버린 건 아직도 신기하다)</small></p>\n<p>사실 개발자들이 HTTP/2를 사용하든 HTTP/3를 사용하든 한국에서 인터넷을 사용하고 있는 사용자는 별로 큰 차이를 못 느낄 것이다. 한국은 워낙 땅덩이도 작고 통신 인프라도 좋다보니 핸드쉐이크 레이턴시고 나발이고 그냥 인프라로 대충 커버칠 수 있지만, 그래도 상대적으로 통신 인프라가 빈약한 나라의 경우에는 꽤 큰 차이가 느껴질 수도 있을 것 같다.</p>\n<p>필자가 이 포스팅에서는 HTTP/3와 UDP의 장점만을 이야기했지만, 사실 많은 사람들이 TCP를 버리고 UDP로 갈아타는 것에 대해서 걱정하고 있다. 당연히 완벽한 기술이란 없으니 문제도 있을 것이다.</p>\n<p>그러나 기존의 HTTP와 TCP가 가지고 있는 한계를 돌파하기 위한 시도로는 굉장히 좋은 것 같다. 마치 엔비디아의 RTX 시리즈 같은 느낌이랄까.</p>\n<p>이상으로 HTTP/3는 왜 UDP를 선택한 것일까? 포스팅을 마친다.</p>\n<h2 id=\"참고-링크\" style=\"position:relative;\">참고 링크<a href=\"#%EC%B0%B8%EA%B3%A0-%EB%A7%81%ED%81%AC\" aria-label=\"참고 링크 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/46403.pdf\" target=\"_blank\" rel=\"nofollow\">The QUIC Transport Protocol: Design and Internet-Scale Deployment</a></li>\n<li><a href=\"https://medium.com/codavel-blog/quic-vs-tcp-tls-and-why-quic-is-not-the-next-big-thing-d4ef59143efd\" target=\"_blank\" rel=\"nofollow\">QUIC vs TCP+TLS - and why QUIC is not the next big thing</a></li>\n<li><a href=\"https://blog.cloudflare.com/http3-the-past-present-and-future/\" target=\"_blank\" rel=\"nofollow\">HTTP/3: the past, the present, and the future</a></li>\n<li><a href=\"https://www.saturnsoft.net/network/2019/03/21/quic-http3-1/\" target=\"_blank\" rel=\"nofollow\">QUIC과 HTTP/3 - 1.UDP기반 전송 프로토콜의 대두</a></li>\n<li><a href=\"https://www.chromium.org/quic\" target=\"_blank\" rel=\"nofollow\">QUIC, a multiplexed stream transport over UDP</a></li>\n<li><a href=\"https://quicwg.org/base-drafts/draft-ietf-quic-tls.html#rfc.section.5.2\" target=\"_blank\" rel=\"nofollow\">Using TLS to Secure QUIC</a></li>\n<li><a href=\"https://blog.cloudflare.com/the-road-to-quic/\" target=\"_blank\" rel=\"nofollow\">The Road to QUIC</a></li>\n</ul>","fields":{"slug":"20191008-what-is-http3","path":"/2019/10/08/what-is-http3/","lang":"ko"},"frontmatter":{"title":"HTTP/3는 왜 UDP를 선택한 것일까?","subTitle":"웹의 표준이 바뀐다. HTTP/3, 빠른 속도를 위해 UDP를 선택하다","date":"Oct 08, 2019","categories":["프로그래밍","네트워크"],"tags":["HTTP3","TCP","UDP","네트워크"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e8d8e8","images":{"fallback":{"src":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/3a812/thumbnail.jpg","srcSet":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/1cda5/thumbnail.jpg 80w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/b1a47/thumbnail.jpg 160w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/3a812/thumbnail.jpg 320w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/3e5ca/thumbnail.webp 80w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/b72f1/thumbnail.webp 160w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/fc5c5/thumbnail.webp 320w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#e8d8e8","images":{"fallback":{"src":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/2c11c/thumbnail.jpg","srcSet":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/23110/thumbnail.jpg 750w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/da421/thumbnail.jpg 1080w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/a2093/thumbnail.jpg 1366w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/70cbe98ca5682a8f70aa5afe9a5533ed/6858b/thumbnail.webp 750w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/f5547/thumbnail.webp 1080w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/29310/thumbnail.webp 1366w,\n/static/70cbe98ca5682a8f70aa5afe9a5533ed/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"31af1492-4437-50e7-aa99-14e2168cf198","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%96%B4%EB%96%A4-%EC%A3%BC%EC%A0%9C%EB%A1%9C-%EA%B8%80%EC%9D%84-%EC%8D%A8%EC%95%BC%ED%95%A0%EA%B9%8C\">어떤 주제로 글을 써야할까?</a></p>\n<ul>\n<li><a href=\"#%EB%82%B4%EA%B0%80-%EC%95%8C%EA%B3%A0-%EC%9E%88%EB%8A%94-%EC%A7%80%EC%8B%9D%EC%9D%80-%EC%83%9D%EA%B0%81%EB%B3%B4%EB%8B%A4-%EA%B0%92%EC%A7%80%EB%8B%A4\">내가 알고 있는 지식은 생각보다 값지다</a></li>\n<li><a href=\"#%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%84%88%EB%AC%B4-%EC%96%B4%EB%A0%A4%EC%9A%B4-%EC%A3%BC%EC%A0%9C%EB%8A%94-%ED%94%BC%ED%95%98%EC%9E%90\">처음부터 너무 어려운 주제는 피하자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B8%B0%EC%88%A0-%EC%84%9C%EC%A0%81%EC%9D%B4-%EC%95%84%EB%8B%8C-%EC%B1%85%EB%8F%84-%EB%A7%8E%EC%9D%B4-%EC%9D%BD%EC%96%B4%EB%B3%B4%EC%9E%90\">기술 서적이 아닌 책도 많이 읽어보자</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%96%B4%EC%B2%B4%EC%97%90-%EC%9D%B5%EC%88%99%ED%95%B4%EC%A0%B8%EC%95%BC-%ED%95%9C%EB%8B%A4\">문어체에 익숙해져야 한다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%BC%EB%93%9C%EB%B0%B1%EC%9D%84-%EB%91%90%EB%A0%A4%EC%9B%8C-%ED%95%98%EC%A7%80-%EB%A7%90%EC%9E%90\">피드백을 두려워 하지 말자</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"과거에는 블로그를 운영하는 개발자들이 오히려 손에 꼽을 정도였지만, 최근 많은 개발자들이 블로그를 운영하며 다양한 주제에 대한 자신의 생각이나 특정 기술에 대한 분석을 포스팅으로 기재하고 공유하고 있다. 하지만 필자는 개인적으로 블로그를 운영하는 것이 생각보다 진입 장벽이 높다고 생각하는데, 그건 블로그 세팅과 같은 기술적인 이유 때문이 아니다. 블로그 세팅은 velog나 티스토리같은 블로그 전문 서비스를 사용할 수도 있고 깃허브 호스팅과 Gatsby나 Hexo같은 정적 사이트 생성기를 사용하여 세팅할 수도 있는데, 사실 뭘 사용…","html":"<p>과거에는 블로그를 운영하는 개발자들이 오히려 손에 꼽을 정도였지만, 최근 많은 개발자들이 블로그를 운영하며 다양한 주제에 대한 자신의 생각이나 특정 기술에 대한 분석을 포스팅으로 기재하고 공유하고 있다. 하지만 필자는 개인적으로 블로그를 운영하는 것이 생각보다 진입 장벽이 높다고 생각하는데, 그건 블로그 세팅과 같은 기술적인 이유 때문이 아니다.</p>\n<p>블로그 세팅은 velog나 티스토리같은 블로그 전문 서비스를 사용할 수도 있고 깃허브 호스팅과 Gatsby나 Hexo같은 정적 사이트 생성기를 사용하여 세팅할 수도 있는데, 사실 뭘 사용하든간에 그런 건 개발자들에게 크게 어려운 문제가 아니다. 회사나 학교에서 맨날 복잡한 문제로 삽질하면서 밥 벌어 먹고 사는 사람들한테 정적 사이트 생성기를 세팅할 때 발생하는 문제를 해결하는 것 정도는 꽤 쉬운 편이라고 생각한다.</p>\n<p>진짜 문제는 블로그를 세팅한 다음부터 발생한다. 이런저런 삽질 끝에 블로그 세팅을 끝내고 나면 이제 글만 쓰면 되는데, 음… 막상 하얗게 비어있는 에디터를 보고 있으면 머리 속도 함께 햐얘지는 기분이 들기 시작하기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ea4b082b07d3f728c0eef0304d39bedb/21b4d/blank_page.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVR42q2T3XKCMBCFeY9qO1YhvyT8hIAgYqdedKbv/zynG+gw9qJUqxdndmGSL2ez2YjJBnHikPAaMfMUPYrqHXnRIy+P4MLhaRVjtU5+1ctGYBcbrJ8ZIq4apMUJNj/AZA24rMF4hYQ5OsCNORN+UUKTKVqXkYnIpj1MdYZvP2bgJMrV5feyQmXOvyFSuoXKjnDDJ/ZdD6nJ4ZWQn8AKZXVCJAlo/RmWXErV3gy6BI4Ope6QU7kBykV9F3B0qE0Hkw9Q9kDl7v+tGSjo4kOneJCs7y9Z3NDJv4CFGx4HDBKkhwL5BNxPd0gPOeTXaH74cwx9+AZy6aDShkatxGZr8Lqzi9rGGW0uSWH+SxrPYoxK+/HfF5KHjs69FmF3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"blank page\" title=\"\" src=\"/static/ea4b082b07d3f728c0eef0304d39bedb/6af66/blank_page.png\" srcset=\"/static/ea4b082b07d3f728c0eef0304d39bedb/69538/blank_page.png 160w,\n/static/ea4b082b07d3f728c0eef0304d39bedb/72799/blank_page.png 320w,\n/static/ea4b082b07d3f728c0eef0304d39bedb/6af66/blank_page.png 640w,\n/static/ea4b082b07d3f728c0eef0304d39bedb/d9199/blank_page.png 960w,\n/static/ea4b082b07d3f728c0eef0304d39bedb/21b4d/blank_page.png 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>뭘 어떻게 쓰기 시작해야 하지...?</small>\n</center>\n<p>글쓰기도 프로그래밍과 마찬가지로 꾸준한 연습과 연구가 필요한 영역이다. 필자 같은 경우는 평균적으로 8000-10000 단어 정도의 포스팅을 작성하는데, 이렇게 하나의 주제를 가지고 긴 호흡으로 글을 작성하게 되면 조금만 딴 생각을 해도 금새 주제가 흐트러지기 쉽상이기 때문에 꽤 많은 집중을 요한다.</p>\n<p>사실 필자 같은 경우만 해도 평소에 글쓰기를 그렇게 많이 해볼 기회가 많지 않았다. 물론 최근에 <a href=\"http://www.yes24.com/Product/Goods/76639545\" target=\"_blank\" rel=\"nofollow\">커피 한 잔 마시며 끝내는 VueJS</a>라는 책을 집필하면서 글을 토할 정도로 쓰기는 했지만, 이건 조금 특이한 케이스이기 때문에 제외하고 생각해본다면 아마 대학교 때 과제로 레포트를 썼던 것이 자신의 생각을 길게 적어본 마지막 경험인 것 같다.</p>\n<p>필자가 주변 사람들한테 블로그를 써보라고 권했을 때 많은 분들이 뭘 써야할 지 모르겠다고 이야기하고는 했는데, 사실 일상 속에서 자기 생각을 글로 표현해볼 기회 자체가 많지 않기 때문에 글을 쓴다는 것에 많은 분들이 어려움을 느끼는 부분이 있는 것 같다.</p>\n<p>그래서 이번 포스팅에서는 블로그 개설을 망설이고 있는 분들이 고민하고 있는 몇 가지 주제에 대해서 이야기를 한번 해보려고 한다.</p>\n<h2 id=\"어떤-주제로-글을-써야할까\" style=\"position:relative;\">어떤 주제로 글을 써야할까?<a href=\"#%EC%96%B4%EB%96%A4-%EC%A3%BC%EC%A0%9C%EB%A1%9C-%EA%B8%80%EC%9D%84-%EC%8D%A8%EC%95%BC%ED%95%A0%EA%B9%8C\" aria-label=\"어떤 주제로 글을 써야할까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>일단 첫번째로 이야기하고 싶은 것은 바로 포스팅의 주제이다. 많은 분들이 첫 포스팅을 작성할 때 어떤 주제를 선정해야하는지 고민하시는데, 사실 주제는 뭐가 됐든 크게 의미없다.</p>\n<p>주제에 대해서 이야기한다고 하면서 주제는 큰 의미가 없다고 하니 이게 무슨 소리인가 싶겠지만, 진짜로 별 의미 없다. 그냥 아무거나 써도 된다는 것이다.</p>\n<p>필자 주변에 있는 분들의 이야기를 들어보면 첫 포스팅의 주제를 정할 때 고민하는 것이 대부분 비슷했다. 내가 알고 있는 지식은 남들도 다 알고 있을 것이라고 하시는 분도 있었고, 내가 알고 있는 지식이 너무 쉽고 간단한 것이라서 섣불리 공유하기가 조금 꺼려진다고 하시는 분도 있었다.</p>\n<p>그런데 이유가 뭐가 됐든 사실 별로 상관이 없는 것이, 일단 블로그 포스팅은 책과 같이 출판하고 나면 수정하기 힘든 컨텐츠가 아니다. 마음에 안들면 나중에 지워버릴 수도 있고, 내용을 수정하는 것도 자유롭다. 그렇기 때문에 나중에 다시 포스팅을 읽어 보았을 때 주제가 이상하다고 느껴지거나 문체가 오글거려서 도저히 못 봐주겠으면 그냥 미련없이 <code class=\"language-text\">rm</code> 명령어를 때려버리면 그만이다.</p>\n<p>그래서 필자는 “어떤 주제를 고르는 것이 좋다” 같은 이야기는 하지 않을 것이다. 대신 주제 자체가 왜 그리 중요하지 않은지, 그리고 필자가 실수했던 경험을 토대로 어떤 주제를 피해야하는지에 대한 이야기를 조금 해보려고 한다.</p>\n<h3 id=\"내가-알고-있는-지식은-생각보다-값지다\" style=\"position:relative;\">내가 알고 있는 지식은 생각보다 값지다<a href=\"#%EB%82%B4%EA%B0%80-%EC%95%8C%EA%B3%A0-%EC%9E%88%EB%8A%94-%EC%A7%80%EC%8B%9D%EC%9D%80-%EC%83%9D%EA%B0%81%EB%B3%B4%EB%8B%A4-%EA%B0%92%EC%A7%80%EB%8B%A4\" aria-label=\"내가 알고 있는 지식은 생각보다 값지다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>일단 필자가 주제는 별로 중요하지 않다고 하는 이유 중 하나는 여러분이 블로그 포스팅을 통해 무엇을 적든 간에 분명 누군가에게는 도움이 될 것이기 때문이다.</p>\n<p>의외로 많은 분들이 “내가 알고 있는 것은 남들도 알고 있을 것이다”라는 마음 때문에 자신이 알고 있는 것을 공개적으로 공유하기를 꺼려한다. 물론 이건 겸손한 마음에서 우러나오는 생각이지만 그래도 여러분이 알고 있는 지식을 공유하는 행위 자체가 생각보다 값지다는 사실을 알아야 한다.</p>\n<p>여러분이 선정한 주제가 이미 해당 분야에서 널리 알려진 지식일지라도 그 지식에 대해서 아직 모르는 사람도 분명 존재한다. 필자는 개인적으로 그 사람이 단 1명일지라도 내 포스팅을 읽고 그 사람에게 도움이 되었다면 잘 쓴거라고 생각한다.</p>\n<p>이렇게 자신의 지식이나 생각을 아무 대가 없이 타인과 공유하는 것에 대해 익숙한 문화가 개발자들의 장점이 아닐까?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e385171dd1f497122fc5646f94c21dfa/e5166/open_source.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHZUWLkCv/EABoQAQACAwEAAAAAAAAAAAAAAAIBEQASMRP/2gAIAQEAAQUCnoe2HgGqVmI9a//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAMAAQUAAAAAAAAAAAAAAAABIUECERKBkf/aAAgBAQAGPwJ3wm8M9mprIycUf//EABsQAQEBAQADAQAAAAAAAAAAAAERAEEhMVFh/9oACAEBAAE/IW/Gk6TQz4G9/cpF8HD9ufXXwEvcGFE8a7//2gAMAwEAAgADAAAAEBDP/8QAFhEBAQEAAAAAAAAAAAAAAAAAASEQ/9oACAEDAQE/EEsc/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EDWf/8QAHhABAQACAgIDAAAAAAAAAAAAAREAIUFRYXGh4fD/2gAIAQEAAT8QUJICbHv5wlBsIpDeHOsJmlAVV8+stKUuwn5wAyqHaAPTX7wMKDBC9tz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"open source\" title=\"\" src=\"/static/e385171dd1f497122fc5646f94c21dfa/c08c5/open_source.jpg\" srcset=\"/static/e385171dd1f497122fc5646f94c21dfa/0913d/open_source.jpg 160w,\n/static/e385171dd1f497122fc5646f94c21dfa/cb69c/open_source.jpg 320w,\n/static/e385171dd1f497122fc5646f94c21dfa/c08c5/open_source.jpg 640w,\n/static/e385171dd1f497122fc5646f94c21dfa/6a068/open_source.jpg 960w,\n/static/e385171dd1f497122fc5646f94c21dfa/e5166/open_source.jpg 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>우리가 좋아하는 오픈소스도 결국은 지식과 기술을 공유하는 것이다</small>\n</center>\n<p>사실 지금은 필자가 이렇게 말하고는 있지만, 필자도 본격적으로 블로그에 포스팅을 작성하기 시작했을 때 제일 고민했던 게 이런 문제였다.</p>\n<p>예를 들어 필자가 작성했던 <a href=\"/2019/06/18/javascript-let-const/\">JavaScript의 let과 const, 그리고 TDZ</a> 포스팅 같은 경우도 쓰기 전에 고민을 많이 했었다. 필자가 해당 포스팅을 작성할 당시인 2019년 6월은 이미 JavaScript ES6 버전이 배포된지 지나도 한참 지난 후였기 때문에 이제 와서 이 주제에 대해서 작성하기에는 너무 늦은 게 아닌가라는 생각을 했었다.</p>\n<p>그러나 막상 포스팅을 작성하고나니 생각보다 많은 분들에게서 도움이 되었다는 메세지를 받을 수 있었다. 필자는 이 지식이 별로 중요한 지식이 아니라고 생각했지만 누군가에게는 도움이 되었다는 것이다.</p>\n<p>비록 필자가 해당 포스팅을 작성한 시점은 JavaScript ES6가 배포된 지 3년이 지난 후였지만 그때도 JS를 처음 접하는 사람들은 있을 수밖에 없고, 그 분들에게는 필자의 포스팅이 큰 도움이 된 것이다.</p>\n<p>사람마다 알고 있는 지식과 모르고 있는 지식은 전부 다를 수 밖에 없다. 내가 A나 B를 알고 있다고 해서 다른 사람들도 모두 A나 B를 알고 있는 것이 아니라는 소리다. 개발자들은 모두 각자가 걸어온 길에 따라 각기 다른 기술에 대한 전문성을 보유한 사람들이기 때문에 이런 지식의 공유가 더 가치있는 것이다.</p>\n<p>그러니까 이미 내가 알고 있는 지식을 저평가 하지말고 일단 그 지식에 대한 주제로 포스팅을 한번 작성해보자. 포스팅을 작성하기 위해서는 기존에 알고 있는 지식이라고 할 지라도 다시 정리하는 과정이 필요하기 때문에 스스로도 지식의 깊이를 다질 수 있는 좋은 기회가 된다.</p>\n<h3 id=\"처음부터-너무-어려운-주제는-피하자\" style=\"position:relative;\">처음부터 너무 어려운 주제는 피하자<a href=\"#%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%84%88%EB%AC%B4-%EC%96%B4%EB%A0%A4%EC%9A%B4-%EC%A3%BC%EC%A0%9C%EB%8A%94-%ED%94%BC%ED%95%98%EC%9E%90\" aria-label=\"처음부터 너무 어려운 주제는 피하자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>이건 필자가 처음 블로그를 작성할 때 실수했던 것이다. 사실 필자가 본격적으로 블로그에 포스팅을 기재하기 시작한 것은 2019년 6월, 즉 약 3개월 전이지만 처음 포스팅을 작성하기 시작한 것은 2017년 쯤이다. 그 당시에는 포스팅을 상당히 뜸하게 올렸는데, 그 이유는 바로 “주제 선정에 대해 눈이 너무 높아서” 였다.</p>\n<p>당시 필자가 생각하기에는 이미 많은 개발자들이 블로그를 운영하고 있기 때문에 너무 일반적인 주제로 포스팅을 작성하면 별로 눈에 띄지도 않을 것이고 PR에도 별로 도움이 안될 것이라고 생각했었다.</p>\n<p>그래서 필자는 포스팅 주제를 선택할 때 남들이 많이 선택하지 않은 주제나 최신 기술, 난이도가 어느 정도 있다고 생각하는 것들 위주로 선택했는데, 지금 생각해보면 이거 그냥 허세다. 포스팅만 어려운 주제로 쓴다고 해서 내가 진짜로 가치있는 사람이 되는 것이 아니기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b3c9af93e17cb57d5047b0b88bfff77b/eea4a/bluffing.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABWqYgOcPkf//EABoQAQEAAgMAAAAAAAAAAAAAAAIBADMDESH/2gAIAQEAAQUCITi6Ktzg2vZPJ//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AUf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFX/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQACEBEhQTH/2gAIAQEABj8CNDxBmE9yK4nR/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFhgZHB/9oACAEBAAE/IdWNLoLhzCIUoRr0dRLavCY/aYAB5P/aAAwDAQACAAMAAAAQqD//xAAXEQADAQAAAAAAAAAAAAAAAAAAEUFR/9oACAEDAQE/EKhNP//EABYRAQEBAAAAAAAAAAAAAAAAAAARQf/aAAgBAgEBPxDKp//EABwQAQADAQADAQAAAAAAAAAAAAEAESExQVGB0f/aAAgBAQABPxC2LsWC3Ye8hSBLQg4a6/kVzhgYAivAeUu0VTBVp9Y6alXwz//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bluffing\" title=\"\" src=\"/static/b3c9af93e17cb57d5047b0b88bfff77b/c08c5/bluffing.jpg\" srcset=\"/static/b3c9af93e17cb57d5047b0b88bfff77b/0913d/bluffing.jpg 160w,\n/static/b3c9af93e17cb57d5047b0b88bfff77b/cb69c/bluffing.jpg 320w,\n/static/b3c9af93e17cb57d5047b0b88bfff77b/c08c5/bluffing.jpg 640w,\n/static/b3c9af93e17cb57d5047b0b88bfff77b/6a068/bluffing.jpg 960w,\n/static/b3c9af93e17cb57d5047b0b88bfff77b/eea4a/bluffing.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>뭔가 있어보이는 포스팅을 쓰고 싶었다</small>\n</center>\n<p>문제는 남들이 어렵다고 생각할 정도인 주제는 당연히 필자한테도 어렵다는 것이다. 알다시피 기술 포스팅을 작성하기 위해서는 그 주제에 대해서 단순한 이해 정도가 아니라 남들에게 쉽게 설명할 수 있을 정도의 이해도가 필요하기 때문에 일반적으로 투자하는 공부 시간보다 더 많은 시간을 투자해서 공부하게된다.</p>\n<p>어떻게 보면 포스팅을 작성하기 위해 어려운 주제에 대한 공부를 강제로 하게되니 좋다고 생각할 수도 있지만, 이렇게 되면 포스팅을 하나 작성하는데 투자해야하는 시간이 거의 몇 주 단위가 될 수도 있다.</p>\n<p>필자는 스스로도 많은 공부가 필요한 주제들로만 포스팅을 작성하려고 했기 때문에 하나의 포스팅을 작성하기 위해서 많은 연구가 필요했다. 그 결과 포스팅을 하나 작성하는데 걸리는 시간이 점점 늘어나기 시작하면서 포스팅 작성에 대한 의욕 또한 점차 떨어지게 되어, 결국 꾸준한 포스팅 업로드를 하지 못하게 되었다.</p>\n<p>블로그를 운영하면서 중요한 것은 주제의 난이도가 아니라 양질의 포스팅을 꾸준히 생산하는 습관을 들이는 것이다. 물론 컴포트존을 벗어나고자 하는 목적으로 가끔씩 본인의 수준보다 약간 더 어려운 수준의 주제를 선정하고 공부를 하는 것은 좋지만, 필자처럼 모든 포스팅을 그런 식으로 작성하려고 하면 꾸준히 포스팅을 작성하는 것이 점점 힘에 부칠 수 밖에 없다.</p>\n<p>여러분이 이미 알고 있는 분야의 지식은 상대적으로 모르는 분야의 지식에 비해 쉬운 것이라고 느껴질 지 모르지만, 분명 그 지식도 다른 사람들에게는 도움이 될 수 있는 가치있는 지식이다. 그 지식이 비록 단순한 변수 선언에 대한 내용일지라도 그 변수 선언에 대한 지식이 없는 누군가에게는 큰 도움이 될 것이다.</p>\n<p>그러니 필자처럼 “이건 너무 단순한 내용인데?”라는 생각으로 어려운 주제의 포스팅을 고집하다가 제 풀에 지쳐 나가떨어지는 것보다는, 우선 내가 이미 알고있는 분야에 대해서 정리하는 포스팅을 작성해보는 것이 좋다고 생각한다.</p>\n<h2 id=\"기술-서적이-아닌-책도-많이-읽어보자\" style=\"position:relative;\">기술 서적이 아닌 책도 많이 읽어보자<a href=\"#%EA%B8%B0%EC%88%A0-%EC%84%9C%EC%A0%81%EC%9D%B4-%EC%95%84%EB%8B%8C-%EC%B1%85%EB%8F%84-%EB%A7%8E%EC%9D%B4-%EC%9D%BD%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\"기술 서적이 아닌 책도 많이 읽어보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>블로그 포스팅을 작성할 때 물론 주제도 중요하지만 일단 포스팅이라는 행위 자체가 기본적으로 글을 쓰는 것이라는 사실을 잊어서는 안된다. 아무리 주제가 좋더라도 그 주제를 몰입력있게 풀어나갈 수 있는 능력이 없다면 사람들은 읽지 않는다.</p>\n<p>TIL(Today I Learned)처럼 본인의 기록용으로 짧은 포스팅을 남기는 경우에는 딱히 글쓰기 스킬의 중요성이 부각되지는 않지만 자신의 생각을 표현하거나 특정 기술에 대해서 깊히 파헤치는 등 어느 정도 컨텐츠성을 가지고 있는 포스팅의 경우는 저자의 글쓰기 스킬이 많이 중요해진다.</p>\n<p>글쓰기 스킬의 향상이라는 주제에서 제일 많이 언급되는 내용 중 하나는 아마 독서의 중요성일 것이다. 사실 개발자들은 평소에 책을 많이 읽는 편이기는 하다. 그러나 대부분 기술과 관련된 서적 위주의 독서를 하기 때문에 문어체 특유의 어휘력을 기르기에는 별로 도움이 안되는 것이 사실이다.</p>\n<p>애초에 이런 책들은 특정 기술의 사용법 같은 명확한 사실 전달에 초점을 맞추기 때문에 문체의 유려함은 중요한 포인트가 아니다. 필자도 VueJS 관련 서적을 집필할 때 딱히 문체는 신경쓰지 않았던 것 같다. 기술 서적을 집필해 보신 분들은 공감하시겠지만, 이런 책을 집필할 때는 문체보다 첨부된 코드의 오류를 검수하거나 확실한 정보를 전달하고 있는지 검증하는데만 해도 정신이 없다.</p>\n<p>반면 에세이나 소설 같은 장르는 자신의 생각이나 상상 속의 이야기를 긴 호흡으로 풀어나가야 하는 장르이다보니 다양한 접속사의 활용이나, 간결하고 논리적인 문장의 구조, 명확한 주제의 제시 등 독자가 이야기의 흐름을 놓치지 않도록 하는 여러가지 방법들이 많이 사용될 수 밖에 없다.</p>\n<p>이러한 방법들을 체득하기위해 따로 공부를 할 수도 있겠지만, 우리는 전공자도 아니고 프로 작가가 될 것도 아니므로 독서를 통해 자연스럽게 체득하는 방법을 추천하는 것이다. 요리도 많이 먹어본 사람이 잘하는 것처럼 글쓰기도 많이 읽어본 사람이 잘하기 마련이다.</p>\n<p>필자가 그런 방법들을 이 포스팅에서 모두 소개하기에는 지식도 짧고, 포스팅 분량도 길어질 것이므로 그 중에서 가장 기초라고 생각하는 문어체에 대한 이야기를 조금 해보려한다.</p>\n<h3 id=\"문어체에-익숙해져야-한다\" style=\"position:relative;\">문어체에 익숙해져야 한다<a href=\"#%EB%AC%B8%EC%96%B4%EC%B2%B4%EC%97%90-%EC%9D%B5%EC%88%99%ED%95%B4%EC%A0%B8%EC%95%BC-%ED%95%9C%EB%8B%A4\" aria-label=\"문어체에 익숙해져야 한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우리가 평소 말할 때 사용하는 구어체와 글을 쓸 때 사용하는 문어체는 각기 다른 특성을 가지고 있다. 구어체의 경우에는 화자의 생각을 실시간으로 표현하는 방식이기 때문에 어순이 변경되거나 필요한 표현이 생략되는 등 문법에 크게 구애 받지 않는다.</p>\n<blockquote>\n<p>야, 저번에 했던 그 게임 또 할까? 그 뭐였더라? 오버워치…가 아니고 배틀그라운드였다!</p>\n</blockquote>\n<p>참고로 구어체의 이런 특성은 한국어에만 국한되는 것은 아니고, 영어 같은 다른 언어들 또한 동일하다.</p>\n<p>구어체는 애초에 완벽한 문장을 만드는 것이 목적이 아니라 커뮤니케이션 자체에 초점을 맞춘 용법이기 때문에 한국어든 영어든 간에 문법은 딱히 중요하지 않다. 우리가 평소에 말할 때 딱히 문장의 구조를 생각하고 말하지 않는 것처럼 말이다.</p>\n<p>또한 위의 예시를 보면 알 수 있듯이 실시간으로 자신의 생각을 표현하는 구어체에서는 앞에서 말한 내용을 수정하는 경우 또한 자주 발생한다. 그렇기 때문에 글을  구어체로 작성하게 되면 문장이 명료하게 완성되지 않고 문체가 산만해질 수 있으며 독자가 글을 읽어나가는 흐름이 끊기게 된다.</p>\n<p>물론 글의 장르에 따라 이런 구어체를 글쓰기에 활용하는 경우도 있지만, 그건 대화를 하는 상황을 묘사하는 등 현실감을 불어넣기 위한 일종의 스킬이라 블로그 포스팅같은 컨텐츠에서는 많이 쓰이지 않는 방법이다.</p>\n<p>이런 이유로 블로그 포스팅과 같이 정보성을 띄고 있는 글은 하나의 문장을 깔끔하게 완성하는 문어체로 글을 작성하는 것이 좋다. 긴 글의 흐름을 끊기지 않게 이어나가기 위해서는 깔끔하고 논리적인 문장의 구사와 다양한 접속사의 활용과 같은 스킬들을 사용해야 하는데, 구어체에는 이런 요소들이 문어체에 비해 상대적으로 약하거나 없기 때문이다.</p>\n<p>하지만 문제는 문어체가 우리가 일상 속에서 잘 사용하지 않는 용법이기 때문에 익숙하지 않다는 것이다. 문어체에 익숙해지는 여러가지 방법이 있겠지만 그 중 필자가 추천했던 것은 기술 서적이 아닌 책, 그 중에서도 저자의 생각을 표현하는 주제를 가진 책을 많이 읽어보는 것이었다. 예를 들면 에세이 같은 것들 말이다.</p>\n<p>단, 필자가 말하는 에세이는 짤막한 감성 글귀들이 송송 박혀있는 그런 책을 말하는 게 아니다. 필자가 말하는 에세이는 서론에서는 주제를 제시하고 본론에서는 그 주제에 대한 실증적인 방법을 제시하며 결론에서는 그에 따른 자신의 의견을 제시하는, 명확하게 구조화 되어있는 에세이를 말하는 것이다.<small>(외국 학교나 기업에 들어갈 때 요구되는 그 에세이다)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2c07b478fc561c796dabc468d32bd2c5/80e3c/book.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHHrciKI6J//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAIBAxESISIx/9oACAEBAAEFAqUXGXYvJ6Ywf//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/AYf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPwGn/8QAGhAAAgIDAAAAAAAAAAAAAAAAACEBEBEiMf/aAAgBAQAGPwKc3qhnD//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMUH/2gAIAQEAAT8hJUCRBVXeYW/pEFezhf/aAAwDAQACAAMAAAAQRw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EFKGx//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxAHTP/EABkQAQADAQEAAAAAAAAAAAAAAAEAESExYf/aAAgBAQABPxAexHTmykwpdciU0xL1YUpHBWartzyT/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"book\" title=\"\" src=\"/static/2c07b478fc561c796dabc468d32bd2c5/c08c5/book.jpg\" srcset=\"/static/2c07b478fc561c796dabc468d32bd2c5/0913d/book.jpg 160w,\n/static/2c07b478fc561c796dabc468d32bd2c5/cb69c/book.jpg 320w,\n/static/2c07b478fc561c796dabc468d32bd2c5/c08c5/book.jpg 640w,\n/static/2c07b478fc561c796dabc468d32bd2c5/80e3c/book.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    빌 게이츠나 버락 오바마가 추천하는 책으로도 유명한 팩트풀니스<br>\n    장르 분류는 인문학으로 되어있지만 이런 주제도 크게 보면 에세이라고 할 수 있다\n  </small>\n</center>\n<p>개발자들은 주로 튜토리얼, 기술 분석, Dev Log와 같은 주제의 포스팅을 많이 작성한다. 이런 기술적인 포스팅에 왠 저자의 생각이냐고 반문할 수도 있겠지만, 결국은 포스팅의 주제가 남들에게 공유하고 싶은 무언가라면 그 포스팅에는 기본적으로 그 주제에 대한 저자의 의견, 정리 또는 생각이 어느 정도 묻어있을 수 밖에 없다.</p>\n<p>또한 개발자들이 작성하는 포스팅들은 논리적이고 실증적인 방법으로 주제를 풀어나가는 경우가 많기 때문에 저런 에세이를 추천하는 것이다. 이렇게 자신이 작성할 블로그 포스팅과 유사한 스타일의 글을 많이 읽다보면 점점 문어체에서 사용하는 문법과 단어들, 주제를 풀어나가는 구성 등에 대해서 익숙해지기 때문에 자신의 글쓰기에도 많은 도움이 된다.</p>\n<p>정 뭐부터 읽어봐야할지 모르겠다면 필자가 위에 올려놓은 <a href=\"https://m.yes24.com/Goods/Detail/69724044\" target=\"_blank\" rel=\"nofollow\">팩트풀니스</a>부터 한번 읽어보자. 사람마다 취향이 다르니 재미있을 것이라고는 할 수 없겠지만, 자신의 생각을 논리로 풀어나간다는 것이 어떤 전개로 이루어지는지는 알 수 있을 것이다.</p>\n<h2 id=\"피드백을-두려워-하지-말자\" style=\"position:relative;\">피드백을 두려워 하지 말자<a href=\"#%ED%94%BC%EB%93%9C%EB%B0%B1%EC%9D%84-%EB%91%90%EB%A0%A4%EC%9B%8C-%ED%95%98%EC%A7%80-%EB%A7%90%EC%9E%90\" aria-label=\"피드백을 두려워 하지 말자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>아무래도 블로그라는 것이 불특정 다수에게 노출되는 컨텐츠다 보니 다른 사람들이 주는 피드백에 대한 두려움이 있을 수 있다. 간단하게 말하자면 욕먹는 것에 대한 두려움이랄까. 잘못된 내용을 전파했다가 피드백을 받는 경우도 있고, 자신의 생각을 기재했다가 나와 생각이 다른 사람들이 그 생각에 대한 피드백을 주는 경우도 있다.</p>\n<p>일단 피드백을 받는 것을 두려워 해서는 안된다는 이야기를 먼저 하고 싶다. 피드백은 단순히 내 생각에 반대하는 의견, 나를 까는 의견이 아니라 나를 제 3자의 눈으로 바라본 냉정한 평가이기 때문이다.</p>\n<p>필자도 물론 포스팅을 배포하고 공유하다보면 피드백을 받게 되는데, 뭐 가끔씩 공격적으로 이야기하시는 분들도 있긴 하지만 결국 뭐가 됐든 그 분들은 필자의 포스팅을 읽어보고 거기에 대한 자신의 생각을 표현했을 뿐이니 딱히 기분 나쁘거나 한 것은 없다.</p>\n<p>그리고 그런 피드백은 대부분 필자의 포스팅에 뭔가 오류가 있었다거나, 필자의 생각과 다른 부분을 말씀해주시는 것이니 “음, 그렇군”하고 그냥 받아들이면 그만이다. 특히 잘못된 정보에 대한 피드백을 주시는 경우는 오히려 가만히 앉아서 오류를 파악하고 고칠 수 있으니 개이득아닌가.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e3be98c9702b4166ee7aaa752ec8fa01/91e7e/feedback.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3klEQVR42o2R5w6DMAyEef83ZO8lhtgbrj1XqdofrUD6ZIecL06sRUmGbpxxHAfO8/zJ3U+r6hrruj1ZhW175cuyvOG/24ZpmmKaplvi67qEv4aGYSAMQ5RliaZp0HWdxLZt33n9vMU8z/c6LIoCfd+DkaZVVQk0VHme5xJ5ALX/3lTTdR2WZcE0TTiOI9i2Dd/34bqumAzD8NX5vu8yxE/U8DQWBUEgRjT2PE/MlGGSJMiyDHEcy9NEUSR67jNnHXWso04MKeYGi9kdNzjdcRwFDo3wuuxWrQnXSseaB83MaDjKMzfhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"feedback\" title=\"\" src=\"/static/e3be98c9702b4166ee7aaa752ec8fa01/6af66/feedback.png\" srcset=\"/static/e3be98c9702b4166ee7aaa752ec8fa01/69538/feedback.png 160w,\n/static/e3be98c9702b4166ee7aaa752ec8fa01/72799/feedback.png 320w,\n/static/e3be98c9702b4166ee7aaa752ec8fa01/6af66/feedback.png 640w,\n/static/e3be98c9702b4166ee7aaa752ec8fa01/91e7e/feedback.png 692w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    최근 동기/비동기 포스팅에 대해 OKKY의 하마님께서 주신 피드백<br>\n    지금까지 필자가 받은 피드백 중 가장 상세한 피드백을 주셔서 굉장히 감사했다\n  </small>\n</center>\n<p>하지만 사람 마음이라는 것이 뭔가 지적받는 것에 대해서 한없이 무뎌질 수는 없는 법이다. 당연히 두렵기도 하고 부끄럽기도 하고 때로는 기분 나쁘기도 할 수 있다.</p>\n<p>솔직히 말하자면 필자도 포스팅을 공유할 때마다 마음 한켠으로는 비난 받고 싶지 않다는 마음이 든다. 개인적으로 정답이 명확한 기술 관련 포스팅을 작성할 때보다 지금 이 주제와 같이 필자의 생각을 표현하는 포스팅을 공유할 때가 더 그렇다.</p>\n<p>기술 포스팅같은 경우는 주로 필자가 잘못된 정보를 기재했을 경우에 피드백이 들어오기 때문에 잘못된 정보를 기재했음을 인정하고 고치면 되지만, 이렇게 자신의 생각을 표현하는 주제처럼 주관성을 가지고 있는 포스팅의 경우에는 필자와 다른 생각을 가지신 분들이 가끔 공격적인 피드백을 주시는 경우도 있기 때문이다.</p>\n<p>하지만 필자가 읽어 보았을 때 “좀 심한데…?”라는 생각이 들 정도로 거친 피드백을 주신 분은 지금까지 단 한 분밖에 없었고, 이 정도로 공격적인 피드백은 그냥 무시하면 그만이다. 개인적으로 그 피드백에 담긴 생각과는 별개로 타인에게 전달하는 말의 가치를 잘 모르는 사람과는 별로 생각을 나누고 싶지 않다. <small>(비판과 비난은 다르다는 것을 명심하자)</small></p>\n<p>아마도 이렇게 밑도 끝도 없이 비난하는 케이스가 사람들이 두려워 하는 “욕먹기 싫다”의 원인일 것 같은데, 생각보다 세상에 그렇게 이상한 사람들이 많지는 않다. 대부분은 여러분의 포스팅을 읽고 뭔가 아쉬운 마음에, 더 발전했으면 하는 좋은 마음으로 피드백을 주시는 분들이다.</p>\n<p>오히려 그런 피드백들을 통해 다양한 사람들의 다양한 생각을 들어볼 수도 있을 뿐더러 피드백을 토대로 자신이 성장할 수 있는 좋은 기회이기도 하니까 너무 피드백을 두려워하지 않았으면 한다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자가 글쓰기에 대한 포스팅을 작성한 이유는 많은 개발자들이 자신의 생각을 공유하는 생태계가 더욱 활성화되었으면 하는 마음에서 비롯되었다. 자신의 생각이나 지식을 공유하는 것이 얼마나 가치있는 행위인지는 매일 구글이나 스택오버플로우를 사용하면서 느끼고 있을 것이다.</p>\n<p>그리고 이런 공유 행위는 오픈소스 활동이나 블로그 포스팅, 발표 등 다양한 방법으로 이루어지고 있지만, 그 중에서도 글쓰기는 자신의 생각을 남들에게 보여줄 수 있는 가장 기초적인 수단 중 하나이다. 글쓰기를 잘하기 위해서는 기본적으로 올바른 문장 구성을 위한 어휘력과 논리력이 뒷받침되어야 하므로 글쓰기를 통해 커뮤니케이션에 대한 기본적인 소양을 기를 수 있다고 볼 수도 있다.</p>\n<p>이렇게 불특정 다수에게 자신의 생각을 공유하는 행위가 두려울 수도 있지만, 필자가 위에서 이야기했듯이 피드백을 두려워하지 않았으면 한다. 그런 피드백을 통해 나 자신도 조금씩 성장할 수 있는 것이고, 다른 사람의 생각을 다양하게 들어볼 수도 있는 좋은 기회이기 때문에 딱히 두려워할 이유가 없다.</p>\n<p>거듭 이야기하지만 “욕 먹는다”라고 표현할 수 있을 정도로 모욕적인 맹비난을 쏟아붓는 사람은 생각보다 많지 않고, 만약에라도 그런 비난을 받는다면 그냥 해당 메세지를 삭제하고 없었던 일로 생각하면 된다. 원래 이상한 사람과 술 취한 사람과는 아예 안 엮이는 게 스트레스 덜 받는 방법이다.</p>\n<p>피드백을 주시는 대부분의 사람들은 포스팅을 읽고 뭔가 아쉬운 마음에서, 좋은 마음으로 주시는 것이기 때문에 자신의 생각을 공유하는 것을 주저하지 않았으면 한다.</p>\n<p>그리고 블로그에 당장 뭐부터 써야할 지 모르겠다면, 일단 내가 알고있는 것이 무엇인지부터 한번 차근차근 정리해보자. 장담하건데 본인이 생각하는 것보다 많은 주제들이 나올 것이다. 그리고 위에서는 이야기하지 않았지만 진짜 아무리 생각해도 도저히 쓸 주제가 없다면 재밌게 읽었던 외국 포스팅을 번역해보는 것도 좋은 방법이다. <small>(생각보다 이런 포스팅은 인기도 많다)</small></p>\n<p>이상으로 블로그 개설을 망설이고 있는 사람들에게 포스팅을 마친다.</p>","fields":{"slug":"20190928-how-do-i-write-postings","path":"/2019/09/28/how-do-i-write-postings/","lang":"ko"},"frontmatter":{"title":"블로그 개설을 망설이고 있는 사람들에게","subTitle":"당신이 알고 있는 것이 누군가에겐 큰 도움이 될 수 있다","date":"Sep 28, 2019","categories":["에세이"],"tags":["글쓰기","개발자 블로그","개발자 블로그 수익","Gatsby","Hexo","개발자 블로그 주제"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8e8d8","images":{"fallback":{"src":"/static/c5c6a620d767a650fe8db1e0aa07fced/d803c/thumbnail.png","srcSet":"/static/c5c6a620d767a650fe8db1e0aa07fced/8c230/thumbnail.png 80w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/23e25/thumbnail.png 160w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/d803c/thumbnail.png 320w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c5c6a620d767a650fe8db1e0aa07fced/3e5ca/thumbnail.webp 80w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/b72f1/thumbnail.webp 160w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/fc5c5/thumbnail.webp 320w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#c8e8d8","images":{"fallback":{"src":"/static/c5c6a620d767a650fe8db1e0aa07fced/3fbb4/thumbnail.png","srcSet":"/static/c5c6a620d767a650fe8db1e0aa07fced/61846/thumbnail.png 750w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/d5395/thumbnail.png 1080w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/cc835/thumbnail.png 1366w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/c5c6a620d767a650fe8db1e0aa07fced/6858b/thumbnail.webp 750w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/f5547/thumbnail.webp 1080w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/29310/thumbnail.webp 1366w,\n/static/c5c6a620d767a650fe8db1e0aa07fced/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a38007c4-b4de-5cc9-bb3b-bb85930b5267","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B0%91%EC%9E%90%EA%B8%B0-%EC%B0%BE%EC%95%84%EC%98%A8-%EB%B2%88%EC%95%84%EC%9B%83\">갑자기 찾아온 번아웃</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EB%90%98%EA%B8%B0-%EC%A0%84%EC%97%90%EB%8A%94-%EC%97%86%EC%97%88%EB%8D%98-%EA%B2%BD%ED%97%98\">개발자가 되기 전에는 없었던 경험</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%82%B4%EA%B0%80-%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%82%B8-%EC%B1%84%EC%B0%8D\">내가 스스로 만들어낸 채찍</a></p>\n<ul>\n<li><a href=\"#%ED%9A%8C%EC%82%AC-%EC%97%85%EB%AC%B4%EB%8A%94-%ED%9A%8C%EC%82%AC-%EC%97%85%EB%AC%B4%EC%9D%BC-%EB%BF%90\">회사 업무는 회사 업무일 뿐</a></li>\n<li><a href=\"#%EC%8B%A4%EB%A0%A5%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%95%EB%B0%95%EA%B4%80%EB%85%90%EC%9D%84-%EB%B2%84%EB%A6%AC%EB%8B%A4\">실력에 대한 강박관념을 버리다</a></li>\n<li><a href=\"#%EC%97%B0%EB%B4%89-%EA%B7%B8%EB%A0%87%EA%B2%8C-%EC%A4%91%EC%9A%94%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4\">연봉? 그렇게 중요하지 않다</a></li>\n<li><a href=\"#%EC%BD%94%EB%94%A9-%EC%99%B8%EC%97%90-%EB%8B%A4%EB%A5%B8-%EC%B7%A8%EB%AF%B8%EB%A5%BC-%EA%B0%80%EC%A0%B8%EB%B3%B4%EC%9E%90\">코딩 외에 다른 취미를 가져보자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"필자는 작년인 2018년, 번아웃(Burn-out)이라 불리는 탈진 증상을 한 차례 격하게 겪은 적이 있다. 번아웃은 2019년 5월 WHO(세계보건기구)에서도 ICD-11에 정식으로 등록할 만큼 관심을 가지고 있는 증상 중 하나이다. WHO는 번아웃이 의학적인 질병에는 포함되지 않지만 직업 관련 증상 중 하나라고 이야기하고 있다. 흔히 번아웃은 “나 자신이 다 타버리고 더 태울 것이 없어 재만 남은 상태”에 비유되고는 한다. 필자 또한 처음 번아웃을 경험했을때 이런 비슷한 느낌을 받았었다. 사실 이런 경험은 필자 뿐만 아니라 많…","html":"<p>필자는 작년인 2018년, 번아웃(Burn-out)이라 불리는 탈진 증상을 한 차례 격하게 겪은 적이 있다. 번아웃은 2019년 5월 WHO(세계보건기구)에서도 ICD-11에 정식으로 등록할 만큼 관심을 가지고 있는 증상 중 하나이다. WHO는 번아웃이 의학적인 질병에는 포함되지 않지만 직업 관련 증상 중 하나라고 이야기하고 있다.</p>\n<p>흔히 번아웃은 “나 자신이 다 타버리고 더 태울 것이 없어 재만 남은 상태”에 비유되고는 한다. 필자 또한 처음 번아웃을 경험했을때 이런 비슷한 느낌을 받았었다. 사실 이런 경험은 필자 뿐만 아니라 많은 사람들이 이미 겪고 있는 경험이라 일상 속에서도 이제 번아웃이라는 단어를 자주 들을 수 있는 시대인 것 같다.</p>\n<p>무엇보다 필자가 번아웃을 경험했을때 힘들었던 것은, 이 증상이 어느 날 갑자기 예고없이 찾아왔기 때문이다. 어제까지만 해도 개발하는 것을 즐기던 내가 하루 아침에 변해버리는 경험은 꽤나 당혹스러웠다.</p>\n<p>물론 진짜로 하루 아침에 번아웃이 생길리는 없으니, 필자도 모르게 조금씩 쌓여왔던 요소들이 어떤 작은 사건 하나로 터져버린 것일테다. 평소에 “이 정도는 직장인으로써 당연한거지”, “회사에 개발 리소스가 부족하니 어쩔 수 없어”, “주말에라도 공부를 안하면 도태될거야” 라고 생각하면서 매일 야근하고 자신을 채찍질했던 것들이 조금씩 쌓여가면서 더 이상 견딜 수 없게 되었을 때 한번에 큰 폭탄이 되어 돌아왔던 것이다.</p>\n<p>그래서 이번 포스팅에서는 필자가 번아웃을 경험하며 느꼈던 점과 어떻게 대처했었는지에 대한 회고를 한번 해보려고 한다.</p>\n<h2 id=\"갑자기-찾아온-번아웃\" style=\"position:relative;\">갑자기 찾아온 번아웃<a href=\"#%EA%B0%91%EC%9E%90%EA%B8%B0-%EC%B0%BE%EC%95%84%EC%98%A8-%EB%B2%88%EC%95%84%EC%9B%83\" aria-label=\"갑자기 찾아온 번아웃 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 번아웃이 어느 날 갑자기 찾아왔다고 이야기 했다. 물론 조금씩 쌓여왔던 스트레스와 부담감들이 쌓여온 결과였겠지만, 필자는 그런 스트레스들을 당연한 것으로 생각하고 받아들이고 있었기 때문에 당황스러운 것은 마찬가지였다.</p>\n<p>처음 필자가 처음 개발에 재미를 붙히게 된 이유는, 그냥 뭔가를 만든다는 것이 너무 재미있었고 내 아이디어를 코딩을 통해 실현할 수 있다는 것이 너무 신기했기 때문이었다. 그래서 친구들과 루비콘이라는 팀도 만들어서 이것저것 만들어보고는 했었는데, 이 당시 팀원들과 평일, 주말 가리지 않고 매일 모여서 함께 아이디어를 논의하고 새로운 것을 만들어보는 재미에 흠뻑 빠져있었다.</p>\n<p>그 후 대학을 졸업하고 개발자로 회사에서 일을 할 때도 몇년 정도 이런 생활 패턴을 유지했었는데, 회사 생활을 오래 하면서 조금씩 생활 패턴이 흐트러지기 시작했다.</p>\n<p>밤 11시까지 야근을 하는 경우가 부지기수였지만 그래도 그냥 자기에는 오늘 하루가 아깝다는 생각에 매일 새벽 2-3시까지 코딩을 하고 주말에는 평일에 못한 만큼 더 많이 공부를 해둬야 한다는 생각에 아침부터 저녁까지 코딩만 했다.</p>\n<p>그러던 어느 날, 사무실에서 평소처럼 코딩을 하고 있었는데 갑자기 문득 이런 생각이 들었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/faa85dd77cfe0a3934dc3dd5cc69930f/eea4a/no-jam.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABl7sqOVgC/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIAAxIhBBMU/9oACAEBAAEFAguUxEXS8dF6FA9FmrP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bh//EABkQAAMAAwAAAAAAAAAAAAAAAAABERAhMf/aAAgBAQAGPwKZs2xKdGkf/8QAFxABAQEBAAAAAAAAAAAAAAAAASEAEf/aAAgBAQABPyFOBV00S8zQMc8+FdFHBTElAZv/2gAMAwEAAgADAAAAEBQ//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBa//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxAf/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFRgaHB/9oACAEBAAE/ENdYAPUDqg5RAU1xcINmH1T54j2ISwsbNyGdbg6Ln//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no jam\" title=\"\" src=\"/static/faa85dd77cfe0a3934dc3dd5cc69930f/c08c5/no-jam.jpg\" srcset=\"/static/faa85dd77cfe0a3934dc3dd5cc69930f/0913d/no-jam.jpg 160w,\n/static/faa85dd77cfe0a3934dc3dd5cc69930f/cb69c/no-jam.jpg 320w,\n/static/faa85dd77cfe0a3934dc3dd5cc69930f/c08c5/no-jam.jpg 640w,\n/static/faa85dd77cfe0a3934dc3dd5cc69930f/6a068/no-jam.jpg 960w,\n/static/faa85dd77cfe0a3934dc3dd5cc69930f/eea4a/no-jam.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>재미없네...</small>\n</center>\n<p>결국 코딩이라는 것에 권태기가 온 셈이다. 처음에는 맨날 똑같은 프레임워크인 Vue만 사용하니까 권태기가 온 것이라고 생각하고 React Native를 사용하고 있는 모바일 챕터로 넘어가서 일을 하기도 했었지만, 결국 새로운 프레임워크와 개발 환경이 주는 즐거움은 처음 일주일 정도만 지속됐고 그 이후 해당 기술들이 익숙해지면 권태감이 느껴지는 것은 똑같았다.</p>\n<p>분명 내가 좋아서 시작한 일이었는데 갑자기 재미없어지는 경험은 필자도 처음 겪는 일이었기 때문에, 처음에는 어떻게 대처해야할 지 감도 못 잡았었다. 분명 필자는 내일도 일을 똑같이 해야하고, 필자의 생산성이 떨어지면 다른 팀원들에게 피해가 갈 수도 있는 상황이기에 난감하기도 했다.</p>\n<p>게다가 필자가 이런 생각을 하고 있다는 것을 다른 팀원들이 알게 되면 괜히 팀원들도 분위기에 흔들릴까봐 팀에는 말도 하지 못하고 혼자만 꽁꽁 싸매고 있었다. 가끔 주변 지인들에게 이런 상황에 대해서 이야기하기도 했었는데, 대부분 돌아오는 대답은 “직장인이 다 그런거지 뭐” 또는 “좀 쉬어라” 였던 걸로 기억한다.</p>\n<p>필자는 회사에 다니고 있었기 때문에 마냥 쉴 수는 없었다. 그리고 주말에 아무리 푹 쉰다고 해도 평일이 되면 다시 권태감이 찾아왔다. 그래서 필자는 그냥 직장인이 다 그런거라고 생각하면서 어느 정도 포기하고 지내고 있었다.</p>\n<p>그러나 필자가 잘못 생각했던 것은 여기서 번아웃 증상이 더 심화될 것이라고 생각하지 못한 것이었다. 제대로 대처를 하지 않으니 권태감은 점점 심해졌고, 결국 필자는 개발팀 리더에게 회사를 그만두고 싶다고 말하기에 이르렀다.</p>\n<p>이때 필자의 감정은 매일 같은 업무에 지친 권태감과 이런 감정 상태로 일을 하면서 팀원들에게 피해를 주고 있다는 죄책감, 코딩이 싫어진 나 자신에 대한 실망감 등 꽤나 복합적인 감정이었다.</p>\n<p>필자는 원래 성격도 급한 편인데다가 늘 자기 자신을 채찍질하며 쫓기듯이 살아왔던 사람이었기 때문에 이 번아웃에 대한 결론도 “생각보다 빨리 안 낫네? 그럼 팀원들한테 더 피해주느니 그냥 퇴사하는게 좋겠다”라고 성급한 결론을 내려버린 것이다.</p>\n<p>하지만 당시 팀 리더는 필자에게 번아웃은 개인의 문제가 아니라 팀의 문제라고 말해주었고, 힘든 게 있으면 팀원들한테 언제든지 말하라는 말도 해주며 필자에게 용기를 북돋아 주었다. 사실 이 한마디가 필자에게는 굉장히 컸던 것 같다. 당시 팀 리더가 필자에게 해줬던 이 한마디가 필자에게 약간이지만 여유를 가져다 줬었다.</p>\n<p>이때부터 개발보다는 나 자신에 대한 생각을 하게 되면서 지금까지 잊고 지냈던 것들에 대해 다시 깨닫게 되는 계기가 되었다.</p>\n<h2 id=\"개발자가-되기-전에는-없었던-경험\" style=\"position:relative;\">개발자가 되기 전에는 없었던 경험<a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EB%90%98%EA%B8%B0-%EC%A0%84%EC%97%90%EB%8A%94-%EC%97%86%EC%97%88%EB%8D%98-%EA%B2%BD%ED%97%98\" aria-label=\"개발자가 되기 전에는 없었던 경험 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>번아웃을 극복하고자 본격적으로 나 자신에 대한 생각을 하게된 다음 가장 의아했던 것은 개발자가 되기 전에는 이런 경험을 해본 적이 한번도 없다는 것이다.</p>\n<p>개발자가 되기 전에는 학생이었으니까 당연하다고 생각할 수도 있겠지만, 필자는 2004년부터 2011년까지 프로팀에서 활동하는 비보이였기 때문에 어떻게 보면 학생임과 동시에 직업도 가지고 있었다고 할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b322d65b4fe141e60071c4dae77a74cb/a7172/dart.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABVkxdOmUOCP8A/8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIAERIhMUH/2gAIAQEAAQUCZVC8IFVGLRG3/8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQMBAT8BlL//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEv/aAAgBAgEBPwG1v//EABsQAAIBBQAAAAAAAAAAAAAAAAERAAIgITJh/9oACAEBAAY/AnSSTGs8mtn/xAAbEAEBAQACAwAAAAAAAAAAAAABABEhMUFRcf/aAAgBAQABPyESqe4OzZMdct54fXY2lHGX/9oADAMBAAIAAwAAABDTP//EABcRAQADAAAAAAAAAAAAAAAAAAABIWH/2gAIAQMBAT8QunT/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAECAQE/EHDCzl//xAAbEAEBAAMBAQEAAAAAAAAAAAABEQAhUUFhgf/aAAgBAQABPxDWrlVpJdmBBJDAJCvE4eYlQJqJi3QJNdwX77MAxdfc/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dart\" title=\"\" src=\"/static/b322d65b4fe141e60071c4dae77a74cb/a7172/dart.jpg\" srcset=\"/static/b322d65b4fe141e60071c4dae77a74cb/0913d/dart.jpg 160w,\n/static/b322d65b4fe141e60071c4dae77a74cb/cb69c/dart.jpg 320w,\n/static/b322d65b4fe141e60071c4dae77a74cb/a7172/dart.jpg 567w\" sizes=\"(max-width: 567px) 100vw, 567px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>거의 10년 전 추억이 되버린 배틀</small>\n</center>\n<p>그리고 알고 있을지는 모르겠지만 대한민국 비보이들의 하루 연습량은 직장인들이 사무실에서 근무하는 시간과는 비교할 데가 못된다.</p>\n<p>필자의 경우 기본적으로 평일에는 학교를 마치면 바로 연습실로 가서 밤 10시까지 매일 6시간 정도 연습을 했고, 주말이나 방학에는 오전 9시부터 밤 10시까지 매일 13시간 정도 연습을 했었다. 물론 공연이나 배틀이 잡히면 연습량을 늘려야 하기 때문에 밤새 새벽 연습을 하고 학교를 가는 경우도 있었다.</p>\n<p>솔직히 육체적으로나 정신적으로나 힘든 건 그때가 더 힘들었는데도 불구하고 이상하게도 필자는 비보잉을 할 때 번아웃을 겪어본 경험이 없었지만 개발을 할 때는 번아웃을 겪고 있는 것이다.</p>\n<p>직장 상사보다 더 직설적인 말로 갈구는 형들도 있었고, 심지어 연습을 제대로 안한다고 맞기도 했으며, 에어트랙이라는 기술을 연습할 때는 두 바퀴를 못해서 1년 동안 매일 5시간 넘게 이 기술만 연습했던 적도 있었다.</p>\n<center>\n  <img src=\"/82d13b1f11bc656d46d62ec6a172050f/airtrack.gif\" width=\"100%\">\n  <br>\n  <small>애증의 에어트랙, 결국 두 바퀴를 못 만들고 군대를 갔다</small>\n  <br>\n  <br>\n</center>\n<p>그래서 필자가 번아웃을 경험하면서 고민했던 것은 “왜 그때는 안그랬고, 지금은 번아웃이 온 것인가?”였다. 필자는 비보이로 활동할 당시에 매일 강도 높은 연습을 했고, 돈도 많이 못 벌었기 때문에 육체적으로나 정신적으로나 더 힘든 시기라고 생각했는데 그럼에도 불구하고 번아웃을 경험하지 않았다면 분명히 뭔가 이유가 있어서라고 생각했기 때문이다.</p>\n<h2 id=\"내가-스스로-만들어낸-채찍\" style=\"position:relative;\">내가 스스로 만들어낸 채찍<a href=\"#%EB%82%B4%EA%B0%80-%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%82%B8-%EC%B1%84%EC%B0%8D\" aria-label=\"내가 스스로 만들어낸 채찍 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자가 생각했을 때 비보이였던 당시와 개발자인 현재 필자의 마음에 차이가 있다면, 지금은 내가 좋아서 하는 것 자체로는 만족하지 못하고 있다는 것이였다.</p>\n<p>분명 비보잉을 할 때는 춤 자체를 즐기고 있었다. 배틀에서 우승하지 못해도 상관없었으며, 누군가에게 인정받지 않아도 상관없었다. 이 마인드는 처음 춤을 시작했을 때도, 7년 동안 춤을 추고 난 다음에도 바뀌지 않았었다. 그리고 비록 군대갔다와서 생각이 바뀌긴 했지만 한창 프로 팀으로 활동할 당시에는 돈도 딱히 중요하지 않았던 것 같다.</p>\n<p>하지만 개발자인 필자는 처음 개발을 시작할 때와는 다르게 여러가지를 신경쓰고 있었다. 남들에게 인정받는 실력을 가지고 싶다던가, 연봉이라던가, 좋은 회사에 들어가고 싶다던가 하는 것들 말이다. 이런 욕구들이 건강하게 작용하면 발전의 원동력이 되겠지만 필자는 조금 과했던 것 같다.</p>\n<p>오랜 기간 생각 끝에 필자가 내린 결론은 “내가 나를 너무 채찍질하고 있구나”였다. 외부에서는 필자에게 어떤 압력도 주지 않았다. 남들에게 인정받고 싶다는 것, 돈을 많이 버는 것, 좋은 회사에 들어가고 싶다는 것들은 모두 필자가 만들어낸 채찍이었던 것이다.</p>\n<h3 id=\"회사-업무는-회사-업무일-뿐\" style=\"position:relative;\">회사 업무는 회사 업무일 뿐<a href=\"#%ED%9A%8C%EC%82%AC-%EC%97%85%EB%AC%B4%EB%8A%94-%ED%9A%8C%EC%82%AC-%EC%97%85%EB%AC%B4%EC%9D%BC-%EB%BF%90\" aria-label=\"회사 업무는 회사 업무일 뿐 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>필자가 개발 뿐만 아니라 다른 것을 공부할 때도 가장 좋아했던 것은 바로 모르는 것을 이해하게 되었을 때 느끼는 카타르시스였다. 이런 카타르시스를 느끼면서 뭔가 내가 더 나은 사람이 되어가고 있다는 성취감이랄까, 내가 더 쓸만한 사람이 되었다는 안도감이랄까, 그런 것들을 느끼기 위해 계속 새로운 지식을 찾아서 헤매였던 것 같다.</p>\n<p>물론 신입 때는 회사에서 하는 모든 것들이 새로웠기 때문에 일만 해도 이런 카타르시스를 느낄 수 있었지만 점점 연차가 쌓일 수록 이런 느낌은 점점 무뎌졌고, 결국은 퇴근 후 따로 공부를 하면서 이 욕구를 충족시켜 나갔다. 그러나 퇴근 후에 매일 새벽 2-3시까지 공부를 하는 것이 점점 힘에 부치기 시작했다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/03af1e70f4bffdee54bcbd0e735520d4/c08c5/workout.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 57.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeysaof/xAAYEAACAwAAAAAAAAAAAAAAAAAAEAECMf/aAAgBAQABBQJVwhf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAcEAACAQUBAAAAAAAAAAAAAAAAAVEQESExQWH/2gAIAQEAAT8hzDLP0kOmzp//2gAMAwEAAgADAAAAEFPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAREhAEEQMVFhgf/aAAgBAQABPxAI/feA6895LoRHeTYqvRlpgqErj//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"workout\" title=\"\" src=\"/static/03af1e70f4bffdee54bcbd0e735520d4/c08c5/workout.jpg\" srcset=\"/static/03af1e70f4bffdee54bcbd0e735520d4/0913d/workout.jpg 160w,\n/static/03af1e70f4bffdee54bcbd0e735520d4/cb69c/workout.jpg 320w,\n/static/03af1e70f4bffdee54bcbd0e735520d4/c08c5/workout.jpg 640w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>29살인 지금, 슬슬 이 짤이 공감되기 시작했다</small>\n</center>\n<p>오랜 기간 쌓여온 피로 누적인지, 운동 부족인지, 아니면 그냥 나이를 먹어서인지는 모르겠지만 어쨌든 언제부턴가 집에 가면 그냥 기절하는 생활이 반복되었다. 그래서 필자는 회사 외적인 시간을 내는 것이 힘드니 최대한 회사에서 일을 하면서 새로운 것들을 배워나가야한다는 일종의 강박 관념을 가지게 되었다.</p>\n<p>그래서 회사에서 일을 하는 것과 내 실력이 느는 것을 같은 선상에 놓고 생각했던 것이다. 회사에서 일을 하면 무조건 내 실력도 함께 늘어야 한다는 그 생각 때문에, 연차가 쌓여가며 더 이상 회사에서 하는 일상적인 코딩으로는 실력이 늘지 않는다는 사실을 느끼게 되자 권태감이 찾아왔다고 생각한다.</p>\n<p>하지만 이 생각이 잘못 되었다는 것을 깨닫는 데는 그리 오랜 시간이 걸리지 않았다. 애초에 회사는 내 전문 지식을 사용하기위해 나와 계약한 클라이언트 아닌가? 회사에서 뭔가 하나를 하더라도 반드시 배워가야할 이유는 없는 것이다. 그래서 필자는 이때부터 마음 속으로 한가지 기준을 세웠다.</p>\n<blockquote>\n<p>회사는 내가 갈고 닦은 지식을 써먹는 곳이지 새로운 지식을 탐구하는 학교가 아니다. 돈 받는 만큼 제대로 하자.</p>\n</blockquote>\n<p>이 변화로 인해 필자는 돈 받는 만큼만 하자는 마인드를 가지게 되었는데, 어찌 보면 계산적이고 차가운 마인드일수도 있지만 어찌 보면 자신이 받는 연봉에 대한 책임감을 가지게 되는 마인드이기도 하다.</p>\n<p>당연히 야근도 할 수 있고 능동적으로 새로운 아이디어를 제시하기도 하지만 그건 어디까지나 필자가 돈을 받음으로써 회사에 제공해야 하는 전문성의 일종이고, 자발적인 의사인 것이다. “난 직장인이니까”라는 마인드때문에 하기 싫은데 하는 것이 아니란 얘기다.</p>\n<p>이렇게 생각을 바꾸고 나니 회사 업무를 할 때 “이 업무는 나한테 별 도움이 안되는데”라는 마음이 “내가 가진 기술로 최선의 결과를 만들어내보자”라는 마음으로 바뀌게 되었다. 이러한 생각의 변화가 필자의 부담도 덜어냄과 동시에 한층 더 개발자로써 프로페셔널한 마인드를 가지게 되었다고 생각한다.</p>\n<h3 id=\"실력에-대한-강박관념을-버리다\" style=\"position:relative;\">실력에 대한 강박관념을 버리다<a href=\"#%EC%8B%A4%EB%A0%A5%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%95%EB%B0%95%EA%B4%80%EB%85%90%EC%9D%84-%EB%B2%84%EB%A6%AC%EB%8B%A4\" aria-label=\"실력에 대한 강박관념을 버리다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그리고 필자가 또 한가지 다짐했던 것은, “매일 코딩하지 않기” 였다. 남들은 1일 1커밋하자고 하는 이 판국에 무슨 소리인가 싶겠지만, 필자는 1일 1커밋이 아니라 1일 10커밋을 4년 넘게 해오다가 이 사단이 난 것이므로 어느 정도 코딩과 거리를 두는 것이 더 좋다고 생각했다.</p>\n<p>이렇게 매일 코딩을 하는 습관은 대학생때부터 시작된 것인데, 처음에는 코딩이 너무 재밌고 좋아서 자연스럽게 매일 한 것이지만 어느 순간부터 반 정도는 습관처럼, 반 정도는 공부에 대한 강박관념으로 이어왔던 것 같다.</p>\n<p>주변의 개발자들을 보면 워낙 뛰어나신 분들이 많기에, 그 모습에 더 압박을 느꼈던 것 같기도 하다. 그래서 새로운 기술이나 패러다임에 대한 공부를 게을리 하게되면 결국 이 시장에서 도태되고 말 것이라고 생각했기 때문에 계속 기술 포스팅도 읽어보고 새로운 기술로 프로젝트를 만들고 했었다.</p>\n<p>사실 아무리 필자가 매일 공부를 하더라도 기술마다 러닝커브가 존재하기 때문에 모든 기술을 따라가는 것은 당연히 불가능하다. A라는 기술이 새로 나와서 그 기술을 공부하다가 어느 정도 이해가 될 때 쯤에는 새로운 패러다임을 가진 B라는 기술이 나오는 것이 IT업계의 현실이니 말이다. 결국 필자는 불가능한 목표에 압박을 느끼고 목을 메고 있던 것이다.</p>\n<p>그러나 곰곰히 생각해보니 필자는 다른 장점이 많은 사람이었다. 예전부터 워낙 이것저것 해왔다 보니까 WebGL이나 천체물리학, 사운드 엔지니어링 등 일반적인 웹 개발자들은 잘 모르고 관심도 없는 분야에 대한 어느 정도 지식이 있었기 때문이다. <small>(일종의 잡캐라고 할 수 있다)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/13c73e3939d36c2cafd64df245bf3e00/a8417/my-projects.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVR42mVS2W7DMAzL///jXrp1aBvk8iHJR8zJTrM2qQDCh2SZpN3Ni8VoI5wUlIITSsO6rggxYeEMCprAsSaECGaBhIDOWIfLfcG1tzDGwjoP7wlEhD3qIad7197hMXswMbzmvfftsj3qvLOaJHIQYaSU2mbDk92OnDyEPEprsNE717SGTQplSCoHRuV5oCJroYQEwyusWmNFR5W/rq+aVpczutk4fF0H9KNtMpxKrkzfoza3zuJym/D9MJhc9XNtHr5HY0gS1NDqRX7S3tid2ebECEKIQXSeDlIPkj0JfoYKxm0SRLUgpg319XLePHU+4DZH/E4Bo9N9JVBz77+irjtWhtYzFkcwiiqbRUDM2uQlv77+vR8UYxuHcWqXf0iuUpjpIPMcNZOi//8mu8SPulLwBzaWwkSIR6mPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"my projects\" title=\"\" src=\"/static/13c73e3939d36c2cafd64df245bf3e00/6af66/my-projects.png\" srcset=\"/static/13c73e3939d36c2cafd64df245bf3e00/69538/my-projects.png 160w,\n/static/13c73e3939d36c2cafd64df245bf3e00/72799/my-projects.png 320w,\n/static/13c73e3939d36c2cafd64df245bf3e00/6af66/my-projects.png 640w,\n/static/13c73e3939d36c2cafd64df245bf3e00/a8417/my-projects.png 941w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>열심히 홍보한 결과, 간혹 스타를 찍어주시는 고마운 분들도 있다</small>\n</center>\n<p>물론 일반적인 어플리케이션을 개발할 때는 딱히 쓸모없는 지식들이기는 하지만 간혹 이런 기술이 필요한 분야에서 사람을 구할 때 한번씩 기웃거려 볼 수라도 있기는 하다. <small>(그리고 워낙 비주류 전문 지식이라 돈도 많이 준다)</small></p>\n<p>필자는 이런 부분들이 다른 개발자들과 차별화되는 필자만의 무기가 아닐까라는 생각을 했었다. 결국은 처음 개발을 시작할 때 가졌던 마음이 정답이었던 것이다. 실력 향상 같은 것은 신경쓰지말고 그냥 내가 공부하고 싶은 것을 공부하고 만들고 싶은 것을 만들자는 마음 말이다.</p>\n<p>지금도 실력이라는 것은 그냥 내가 만들고 싶은 것을 만들다보면 자연스럽게 따라오는 것이라고 생각한다. 애초에 누가 실력이 좋고 나쁘고를 따지는 기준 자체도 굉장히 주관적이고 애매하기 때문에 그냥 그런 거 신경쓰지 않고 하고 싶은대로 하면서 살기로 했다.</p>\n<h3 id=\"연봉-그렇게-중요하지-않다\" style=\"position:relative;\">연봉? 그렇게 중요하지 않다<a href=\"#%EC%97%B0%EB%B4%89-%EA%B7%B8%EB%A0%87%EA%B2%8C-%EC%A4%91%EC%9A%94%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4\" aria-label=\"연봉 그렇게 중요하지 않다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>필자는 처음 개발자로 취업을 할 때 “30살이 되면 연봉을 n원 정도는 받아야지”하는 식의 일종의 기준이 있었다. 사실 30살이라는 나이는 그렇게 많은 나이는 아니지만 10대 이후 처음으로 나이의 앞 자리가 바뀌는 만큼 뭔가 이루고 싶었던 것 같다. <small>(지금 생각해보면 그게 뭔 의미가 있나 싶긴하다)</small></p>\n<p>그리고 필자는 내가 사회로부터 인정받은 결과가 숫자로 나타나는 것이 연봉이라고 생각했기 때문에 더 연봉에 집착했던 것도 있다.</p>\n<p>하지만 문제는 필자가 노련한 협상가가 아니라는 것이다. 연봉이라는 것은 기본적으로 협상을 통해 이루어지는 경우가 많은데, 이 협상이라는 것이 단순히 말을 잘해서 되는 것이 아니라 조직 내에서 지속적인 자기 어필과 홍보, 팀원들의 평가, 개발 실력 등 많은 요소들이 맞물렸을 때 비로소 연봉 협상 테이블에서 유리한 위치를 점할 수 있게 된다.</p>\n<p>게다가 연봉이라는 숫자가 완성되기까지는 변수가 너무 많다. 첫 직장이 어떤 곳이였는지, 그 곳에서 나의 실력을 어느 정도로 평가해주었는지, 게다가 어느 정도는 운빨도 따라줘야한다.</p>\n<p>나를 제외한 회사 내의 모든 프론트엔드 개발자가 그만 둬서 내가 이 회사의 유일한 프론트엔드 개발자가 되는 상황처럼 연봉 협상에 유리한 상황 같은 것 말이다.</p>\n<p>하지만 사회 생활 경험이 많지도 않은 필자가 이런 것들을 알 리가 없었고, 당연히 필자가 세운 무리한 목표와는 점점 멀어질 수 밖에 없었다. 지금 생각해보면 당연한 것인데 당시에는 목표에서 멀어진다는 불안감에 조바심을 냈었다.</p>\n<p>사실 필자의 연봉은 그런 조바심을 가질 만큼 적지도 않고, 많지도 않다. 뭐 돈에 대한 기준은 사람마다 다르겠지만 그냥 29살 청년이 혼자 먹고 살 수 있을 만큼의 돈을 벌고 있다고 생각한다.</p>\n<p>하지만 사람 마음이라는 것이 참 간사한 것이, 내가 먹고 살기에는 충분한 연봉을 받고 있다는 사실을 알고 있더라도 나보다 더 많은 연봉을 받는 사람을 보면 부러움이 샘솟기 마련이다. 돈이 가진 마력이란 참 무섭다.</p>\n<p>그런 이유로 필자는 연봉이 진짜 그렇게 중요한 것인가에 대해서도 다시 생각해보게 되었는데, 필자가 이때 내린 결론은 얼마를 받든 어차피 부질없다는 것이었다. 필자가 친구들에게 이런 얘기를 하면 무슨 스님이냐고 하는 친구들도 간혹 있는데, 이건 필자가 무슨 깨달음을 얻어서 내린 결론이 아니고 단지 계산기를 조금 두드려 보았을 뿐이다.</p>\n<p>필자의 첫 취업 이후 수입과 매달 지출, 그리고 지금까지 필자의 평균 연봉 인상률까지 적용해서 10년 뒤를 생각해보면 음, 딱히 답이 없다. 40대 쯤 되었을 때 3억 모으면 잘 모은 느낌이랄까. 어떤 분은 3억이 어디냐고 하시겠지만 필자는 2억 모으나 3억 모으나 어차피 인생의 큰 틀은 바뀌지 않는다고 생각했다.</p>\n<p>솔직히 필자 같은 일반인은 로또라도 당첨되거나 주식이나 코인이 대박나지 않는 이상, 그냥 능력 껏 먹고살 만큼만 벌고 나머지는 결국 대출로 영혼까지 끌어모아서 집 사고 차 사고 하면서 남들처럼 그렇게 살 수 밖에 없다는 것이다. 조금은 냉정한 생각일 수도 있지만 그냥 필자가 계산기 두들겨 봤을 때 나오는 월급쟁이의 현실은 이 정도인 것 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d04ee9778a481eb587266247d03463b2/ea522/bitcoin.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvsioT/8QAFhABAQEAAAAAAAAAAAAAAAAAEBEA/9oACAEBAAEFAm6n/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBAAAgMAAAAAAAAAAAAAAAAAARAAIVH/2gAIAQEAAT8hQIZWT//aAAwDAQACAAMAAAAQ8B//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUGh/9oACAEBAAE/EJTnAHQGBRQjlDJqfNy7+t//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bitcoin\" title=\"\" src=\"/static/d04ee9778a481eb587266247d03463b2/c08c5/bitcoin.jpg\" srcset=\"/static/d04ee9778a481eb587266247d03463b2/0913d/bitcoin.jpg 160w,\n/static/d04ee9778a481eb587266247d03463b2/cb69c/bitcoin.jpg 320w,\n/static/d04ee9778a481eb587266247d03463b2/c08c5/bitcoin.jpg 640w,\n/static/d04ee9778a481eb587266247d03463b2/6a068/bitcoin.jpg 960w,\n/static/d04ee9778a481eb587266247d03463b2/ea522/bitcoin.jpg 1028w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>필자 같은 일반인은 어차피 저걸 잡아탈 용기도 운도 없다</small>\n</center>\n<p>여기까지 생각이 닿고 다니까 고작 연봉 몇 백만원 인상에 일희일비 하는 것이 부질없다고 생각이 들게 되었다. 그래서 지금 필자는 연봉이 오르던 말던 딱히 신경쓰지 않는 편이다. 물론 당연히 돈은 많을 수록 좋으니까 오르면 좋기는 하지만 딱히 안 올라도 조바심 내지 않고 “언젠가 오르겠지 뭐” 하는 느낌이다.</p>\n<p>게다가 연봉 올라서 기쁜 기분이래봤자 어차피 몇 달 지나면 금방 또 그 액수에 익숙해져서 무뎌지기 마련이다.</p>\n<p>근데 참 웃긴 것이 이렇게 마음 먹는다고 돈이 안 벌리는 것도 아니더라. 연차가 쌓이며 연봉도 오르기는 올랐고, 책도 하나 출판했고, 블로그에서도 수익이 조금씩 나고 있으니 오히려 예전보다 점점 더 잘 벌고 있다고 할 수 있다. 그래서 딱히 돈에 집착하든 하지않든 그냥 자기 할 일만 잘하고 있으면 돈은 자연스럽게 따라오는 것이 아닌가하는 생각이 든다.</p>\n<p>이처럼 기존에 필자 스스로 채찍질하고 있던 것들에 대해 다시 한번 생각해보게 되면서 개발에 대한 중압감을 많이 덜게 되었던 것 같다.</p>\n<h3 id=\"코딩-외에-다른-취미를-가져보자\" style=\"position:relative;\">코딩 외에 다른 취미를 가져보자<a href=\"#%EC%BD%94%EB%94%A9-%EC%99%B8%EC%97%90-%EB%8B%A4%EB%A5%B8-%EC%B7%A8%EB%AF%B8%EB%A5%BC-%EA%B0%80%EC%A0%B8%EB%B3%B4%EC%9E%90\" aria-label=\"코딩 외에 다른 취미를 가져보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그리고 필자가 또 한가지 중요하게 생각한 것은 내가 어떤 사람인지를 다시 한번 생각해보는 것이였다. 개발자로 열심히 달려온 지난 4년 동안 필자는 취미나 문화 생활 같은 것은 거의 하지 않을 정도로 코딩에 빠져있었다. 즉, 일상이나 취미 등 모든 것이 코딩과 귀결되는 생활을 하고 있었다는 것이다.</p>\n<p>필자가 번아웃이 온 이유에는 물론 중압감과 스트레스도 한 몫 단단히 했겠지만, 내가 원래 어떤 사람인지를 놓쳐서라고도 생각했다. 이건 사실 필자가 딱히 개발자라서가 아니라 그냥 하루하루 업무에 치여사는 직장인이라 그런 것 같기도 하다.</p>\n<p>어쨌든 번아웃을 경험하면서 필자는 위에서 언급한 “매일 코딩하지 않기”를 실천하면서 남는 시간에 코딩 말고 내가 좋아하는 것을 해보자는 생각을 가지게 되었다. 사실 이렇게 블로그에 글을 쓰는 것도 어떻게 보면 취미의 일환이라고 볼 수 있겠지만 대표적인 건 아무래도 음악 정도인 것 같다.</p>\n<p>사실 필자는 비보잉 외에도 어릴 때부터 꾸준히 음악을 공부했었다. 슬프게도 천재들의 재능을 보고 쫄아서 포기하긴 했지만 나름 작곡 입시도 준비했었고, 연예 기획사에서 사운드 엔지니어로 일하기도 했을 정도로 음악을 좋아하는 편이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/720ade087e805804bc4cc437a8a52fad/e1596/sound-engineer.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABZ1DYdcFwb//EABkQAAMBAQEAAAAAAAAAAAAAAAABAgMSIf/aAAgBAQABBQLPdVWu/Iq8VNE2jmpP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAECAQE/Aco//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQESES/9oACAEBAAY/AmjFcYK0V0f/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAxYSFBof/aAAgBAQABPyFogThvO+jtxNYdFL1oAl6ed4MAnsu//9oADAMBAAIAAwAAABDvL//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAwEBPxCrj//EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQIBAT8QQctX/8QAHBABAQACAgMAAAAAAAAAAAAAAREAMSFhQYGR/9oACAEBAAE/ELiGCHynrI0mJEQVk7wGDfOGVG3C/d5vYuXU7uIgmENLP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sound engineer\" title=\"\" src=\"/static/720ade087e805804bc4cc437a8a52fad/c08c5/sound-engineer.jpg\" srcset=\"/static/720ade087e805804bc4cc437a8a52fad/0913d/sound-engineer.jpg 160w,\n/static/720ade087e805804bc4cc437a8a52fad/cb69c/sound-engineer.jpg 320w,\n/static/720ade087e805804bc4cc437a8a52fad/c08c5/sound-engineer.jpg 640w,\n/static/720ade087e805804bc4cc437a8a52fad/6a068/sound-engineer.jpg 960w,\n/static/720ade087e805804bc4cc437a8a52fad/eea4a/sound-engineer.jpg 1280w,\n/static/720ade087e805804bc4cc437a8a52fad/e1596/sound-engineer.jpg 2048w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>나름 행복했던 프로페셔널 베짱이 시절</small>\n</center>\n<p>그러나 개발자로 일을 하기 시작하면서 평일이고 주말이고 밤낮없이 매일 코딩만 하다보니, 자연스럽게 음악과도 멀어지게 되었다. 음악을 듣는 것은 매일 일상 속에서 하고 있었지만, 예전처럼 곡을 분석하거나, 악기를 연습하거나, 화성학을 공부하거나 하는 일은 우선 순위에서 밀려서 점점 하지 않게 되었다.</p>\n<p>그래서 필자가 번아웃을 극복하고자 마음먹고 집에 와서 가장 먼저 한 것이 바로 집에 있는 피아노를 청소하는 것이였다. 그 이후로도 필자는 꾸준히 피아노나 기타도 치고 보컬 레슨도 받고 화성학도 공부하면서 취미로 음악을 하고 있다. <small>(그 결과 회사에서 별명이 베짱이가 되었다)</small></p>\n<p>음악은 나이 먹어도 즐길 수 있는 평생 취미이기 때문에 여러분도 살면서 악기 하나 정도는 배워보는 것을 추천한다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자가 번아웃을 경험하기 전에 위에서 언급했던 것들을 실천하지 못했던 이유는 도태되고 싶지 않다는 불안감, 그리고 실력으로 인정받는 개발자가 되고 싶다는 압박감 때문이었다. 매일 코딩하고 공부하기도 하루는 짧으니까 취미 생활이나 여유는 사치라고 생각했었다.</p>\n<p>하지만 결국 이런 채찍들은 결국 필자에게로 다시 돌아와 번아웃이라는 결과를 안겨주었다. 필자는 스스로를 채찍질함으로써 짧은 시간안에 빠른 성장을 이룰 수 있었지만 지금 생각해보면 그게 결국 무슨 의미가 있었나 싶다.</p>\n<p>지금의 필자는 트렌드에 별로 관심도 없고 그냥 필요하거나 궁금하면 그때 공부하자는 마인드이기 때문에 새로운 기술을 습득하는 속도가 남들보다 확실히 느려졌기 때문이다. 요즘 겁나 핫한 쿠버네티스(Kubernetes)도 사람들 쓰기 시작한 지 한참 뒤에 친구가 말해줘서 알았다.</p>\n<p>하지만 적어도 예전보다는 나름 행복하게 개발을 하고 있다고 말할 수는 있을 것 같다.</p>\n<p>애초에 필자가 개발을 시작한 이유는 단지 재미있어서였기 때문에, 지금의 필자가 개발자로 살아가면서 가장 중요하게 여기는 가치도 재미이기 때문이다. 필자가 중요하게 생각하는 개발의 가치는 뛰어난 멘토가 만들어주는 것도 아니고 좋은 회사가 만들어주는 것도 아니기 때문에 더 이상 주위 환경에 신경쓰지 않는다.</p>\n<p>그리고 사실 지금 필자는 한국과 외주 계약을 체결하고 체코 프라하에서 지내면서 나름 디지털 노마드 체험을 하고 있는 중인데, 한 달이라는 공백기와 백수에게는 꽤 부담되는 금전적 비용을 감수하고 이런 큰 결심을 내리게 된 것도 이때의 경험이 도움이 되었던 것 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/93dbfc8132467f7fd3125876f3e88e7e/acb04/locco.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQBAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGrnmaKrTqnYgcCf//EAB4QAAEDBAMAAAAAAAAAAAAAAAABAgMREhMiITEz/9oACAEBAAEFAp+mK0dJzJJtl2qO9ULlP//EABgRAQEAAwAAAAAAAAAAAAAAAAEAEBES/9oACAEDAQE/AXTck4//xAAYEQEBAAMAAAAAAAAAAAAAAAABABAREv/aAAgBAgEBPwE2N0xj/8QAHRAAAQQCAwAAAAAAAAAAAAAAAAEQETECIVFygf/aAAgBAQAGPwJCI2UhHJXrY9H/AP/EAB4QAQADAAICAwAAAAAAAAAAAAEAESExURBhgZGx/9oACAEBAAE/IT8N71FBpClBqyVcm15zIYhY6eH0U/sNCC4T2T//2gAMAwEAAgADAAAAEIsggf/EABkRAAIDAQAAAAAAAAAAAAAAAAABEBExQf/aAAgBAwEBPxBUU9KOGI//xAAZEQADAAMAAAAAAAAAAAAAAAAAAREQMWH/2gAIAQIBAT8QexaOmEP/xAAfEAACAgEEAwAAAAAAAAAAAAABEQAhQVFhcYExkfD/2gAIAQEAAT8QBXmR3B96ggUUWWOYheGxBs9QGcEYBTwtocO2U0oPqG+kpsJyWMSAACEc1Nd+Z//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"locco\" title=\"\" src=\"/static/93dbfc8132467f7fd3125876f3e88e7e/c08c5/locco.jpg\" srcset=\"/static/93dbfc8132467f7fd3125876f3e88e7e/0913d/locco.jpg 160w,\n/static/93dbfc8132467f7fd3125876f3e88e7e/cb69c/locco.jpg 320w,\n/static/93dbfc8132467f7fd3125876f3e88e7e/c08c5/locco.jpg 640w,\n/static/93dbfc8132467f7fd3125876f3e88e7e/acb04/locco.jpg 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    카페랑 코워킹 스페이스가 함께 운영되는 꿀 카페<br>\n    프라하에서 디지털 노마딩 하실 분들께 추천한다.\n  </small>\n</center>\n<p>솔직히 프라하로 오기 전에 이런 것들에 대한 걱정을 안했다면 거짓말이겠지만, 어차피 백수된 마당에 눈치볼 것도 없으니 그냥 질러버렸다. 그리고 3주 정도 여기서 살아보니 음, 걱정했던 것과 다르게 딱히 문제는 없는 것 같다.</p>\n<p>사실 필자가 회사를 그만 두고 나서 몇몇 분들이 면접 제의를 해주셨는데, 퇴사하고 2주 뒤에 바로 프라하로 출발해야해서 아쉽게 다음을 기약했었다. 그래서 필자는 솔직히 한달 동안 유럽에 있는 동안 이런 제안들이 흐지부지 해질 것이라고 생각하고 별로 기대를 안하고 있었다.</p>\n<p>하지만 감사하게도 그 중 몇몇 분들과 꾸준히 연락을 주고 받고 있고, 한국에서 외주를 받아왔기 때문에 적당히 수입도 유지되고 있다. 그리고 결정적으로 생각보다 체코에서 체감하는 물가가 그리 비싸지도 않아서 지출이 별로 없다. 뭐 여행다니는 것도 아니고 기껏 해야 동네 산책이나 하는 정도라서 그런 걸 수도.</p>\n<p>과거의 필자였다면 한달 동안 유럽행이라는 결정을 내릴 수 있었을까? 아마 그렇게 하지 못했을 것 같다. 한 달이라는 공백기동안 뒤쳐진다고 생각했을테니까.</p>\n<p>번아웃을 겪으며 힘들기도 했지만 그 과정 속에서 불필요한 것들을 내려놓으면서 오히려 예전보다 더 건강하게 개발자로써의 삶을 살고 있는 것 같다. 코딩은 예전처럼 다시 즐거운 일이 되었으며, 나의 장점을 다시 생각해보면서 예전보다 자신감도 생겼고, 지금처럼 외국에서 한달 동안 살아보는 재미난 경험도 할 수 있으니 말이다.</p>\n<p>이상으로 내가 겪었던 번아웃, 그리고 극복했던 경험 포스팅을 마친다.</p>","fields":{"slug":"20190923-how-to-overcome-burnout","path":"/2019/09/23/how-to-overcome-burnout/","lang":"ko"},"frontmatter":{"title":"내가 겪었던 번아웃, 그리고 극복했던 경험","subTitle":"지치지 않으려면, 내가 만든 채찍을 내려놓아야 했다","date":"Sep 23, 2019","categories":["에세이"],"tags":["번아웃","Burn Out","번아웃 증후군","번아웃 극복"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#b8c8e8","images":{"fallback":{"src":"/static/89e6b571a1a59e725c099d90ca7e6397/d803c/thumbnail.png","srcSet":"/static/89e6b571a1a59e725c099d90ca7e6397/8c230/thumbnail.png 80w,\n/static/89e6b571a1a59e725c099d90ca7e6397/23e25/thumbnail.png 160w,\n/static/89e6b571a1a59e725c099d90ca7e6397/d803c/thumbnail.png 320w,\n/static/89e6b571a1a59e725c099d90ca7e6397/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/89e6b571a1a59e725c099d90ca7e6397/3e5ca/thumbnail.webp 80w,\n/static/89e6b571a1a59e725c099d90ca7e6397/b72f1/thumbnail.webp 160w,\n/static/89e6b571a1a59e725c099d90ca7e6397/fc5c5/thumbnail.webp 320w,\n/static/89e6b571a1a59e725c099d90ca7e6397/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#b8c8e8","images":{"fallback":{"src":"/static/89e6b571a1a59e725c099d90ca7e6397/dd00c/thumbnail.png","srcSet":"/static/89e6b571a1a59e725c099d90ca7e6397/61846/thumbnail.png 750w,\n/static/89e6b571a1a59e725c099d90ca7e6397/dd00c/thumbnail.png 1024w","sizes":"100vw"},"sources":[{"srcSet":"/static/89e6b571a1a59e725c099d90ca7e6397/6858b/thumbnail.webp 750w,\n/static/89e6b571a1a59e725c099d90ca7e6397/ef900/thumbnail.webp 1024w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"610ae3e4-0ca1-5845-a914-522dbddd8abc","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%8F%99%EA%B8%B0%EB%8A%94-%EC%A0%95%ED%99%95%ED%9E%88-%EB%AD%98-%EB%9C%BB%ED%95%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\">동기는 정확히 뭘 뜻하는 걸까?</a></p>\n<ul>\n<li><a href=\"#%EB%8B%A8%EC%96%B4%EC%9D%98-%EB%89%98%EC%95%99%EC%8A%A4%EB%A5%BC-%ED%8C%8C%EC%95%85%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4\">단어의 뉘앙스를 파악해야한다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99%EC%97%90%EC%84%9C%EC%9D%98-%EB%8F%99%EA%B8%B0\">컴퓨터 공학에서의 동기</a></p>\n<ul>\n<li><a href=\"#%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B8%94%EB%A1%9D%ED%82%B9-%EB%B0%A9%EC%8B%9D\">동기 방식 + 블록킹 방식</a></li>\n<li><a href=\"#%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%85%BC%EB%B8%94%EB%A1%9D%ED%82%B9-%EB%B0%A9%EC%8B%9D\">동기 방식 + 논블록킹 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99%EC%97%90%EC%84%9C%EC%9D%98-%EB%B9%84%EB%8F%99%EA%B8%B0\">컴퓨터 공학에서의 비동기</a></p>\n<ul>\n<li><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%B0%A9%EC%8B%9D\">비동기 방식 + 논블로킹 방식</a></li>\n<li><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%B0%A9%EC%8B%9D\">비동기 방식 + 블로킹 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 I/O와 네트워크 등 전반적으로 다양한 모델에서 사용하는 개념인 동기(Synchronous)가 정확히 무엇을 의미하는 것인지, 그리고 동기 방식과 비동기 방식의 차이에 대해서 한번 이야기 해보려고 한다. 그리고 이 두 가지 개념과 많이 혼동되는 개념인 블록킹(Blocking)과 논블록킹(Non-Blocking)에 대해서도 간단하게 짚고 넘어갈 예정이다. 본격적인 포스팅에 들어가기에 앞서 한가지 확실하게 이야기하고 싶은 것은 동기와 비동기는 프로세스의 수행 순서 보장에 대한 매커니즘이고 블록킹과 논블록킹은 프로세스…","html":"<p>이번 포스팅에서는 I/O와 네트워크 등 전반적으로 다양한 모델에서 사용하는 개념인 동기(Synchronous)가 정확히 무엇을 의미하는 것인지, 그리고 동기 방식과 비동기 방식의 차이에 대해서 한번 이야기 해보려고 한다. 그리고 이 두 가지 개념과 많이 혼동되는 개념인 블록킹(Blocking)과 논블록킹(Non-Blocking)에 대해서도 간단하게 짚고 넘어갈 예정이다.</p>\n<p>본격적인 포스팅에 들어가기에 앞서 한가지 확실하게 이야기하고 싶은 것은 동기와 비동기는 프로세스의 수행 순서 보장에 대한 매커니즘이고 블록킹과 논블록킹은 프로세스의 유휴 상태에 대한 개념으로 완전한 별개의 개념이라는 것이다.</p>\n<p>아무래도 동기와 블록킹, 비동기와 논블록킹의 작동 매커니즘이 더 직관적이기 때문에 많은 사람들이 이 개념들을 같은 것 혹은 비슷한 것으로 오해하고 있는데, 방금 이야기 했듯이 이 두가지 개념은 서로 전혀 다른 곳에 초점을 맞춘 개념들이므로 서로 직접적인 관련은 거의 없다고 봐도 된다. 단지 조합하여 사용되는 것 뿐이다.</p>\n<center>\n  <img src=\"/62da0c7a07594deebfee5e538995fe34/4elements.gif\" width=\"100%\">\n  <small>출처 - Boost application performance using asynchronous I/O, IBM</small>\n</center>\n<p>이미 많은 능력자 분들이 이 주제에 대해서 잘 정리해놓은 포스팅들이 있지만, 대부분 이 개념들을 묶어서 함께 다루고 있기 때문에 이 개념들을 처음 접하거나 컴퓨터 공학에 대해 잘 모르는 사람은 이 개념들이 서로 뭔가 연관이 있는 것으로 오해하기 쉽다. 하지만 많은 포스팅에서 이 주제들을 묶어서 다루는 이유는 단지 이 개념들을 구현한 구현체에서 이 두 가지 개념이 함께 사용되고 있기 때문에 이 개념을 분리해서 따로 설명하는 것이 더 어렵기 때문이다.</p>\n<p>그래서 필자도 어쩔 수 없이 이 개념들을 함께 설명하기는 하지만, 직관적인 개념인 블록킹 &#x26; 논블록킹보다는 좀 더 추상적인 개념인 동기 &#x26; 비동기에 초점을 맞춰서 진행할 것이다.</p>\n<h2 id=\"동기는-정확히-뭘-뜻하는-걸까\" style=\"position:relative;\">동기는 정확히 뭘 뜻하는 걸까?<a href=\"#%EB%8F%99%EA%B8%B0%EB%8A%94-%EC%A0%95%ED%99%95%ED%9E%88-%EB%AD%98-%EB%9C%BB%ED%95%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\" aria-label=\"동기는 정확히 뭘 뜻하는 걸까 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>동기에 관련된 포스팅들을 읽어보면 사람마다 동기라는 단어를 해석한 결과가 가지각색이다. 어떤 사람은 동시에 발생하는 것, 어떤 사람은 특정한 클럭을 정해 통신하는 것, 어떤 사람은 상태를 동일하게 만드는 것 등 동기라는 단어의 쓰임새가 다양한 만큼 다양한 해석들이 존재한다. 도대체 뭐가 맞는 건지 알기가 힘들다.</p>\n<p>필자 또한 처음 동기라는 개념을 배울 때 동기라는 단어와 매커니즘이 잘 와닿지 않아서 혼란스러웠었다. 뭐 블록킹 같은 단어는 농구같이 일상에서 접할 수 있는 스포츠에서도 사용하고 있는데다가 “뭔가를 막는다”라는 뜻이 바로 와닿기 때문에 조금 이해하기 쉬운 편이지만 동기는 아니다.</p>\n<p>일상에서 주로 접하는 동기의 쓰임새 중 대표적인 예는 <strong>동기화(Synchronization)</strong> 정도가 있을 것 같다. 아이폰에 음악을 넣을 때 아이튠즈에서 사용하는 동기화 기능 같은 것 말이다. 이때 동기화라는 행위는 “서로 다른 상태를 같은 것으로 만드는 것”을 의미한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/54ef639a4f73e6df84f47163440f0557/66465/itunes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGklEQVR42lVSyXLTQBTUzcibbMuS5b1iybaUyAuSvMUbgeAlTsCOHYcEgkucKE78CsWNA7/azJsgSA5dT5p506+7Z4Rxp4Nhv4PjugHLrKBe02GaJsrlMnK5HPL5PAqFwj/QWjab5TXYD1AsFiGcff0F9+En7A8/4Pi/YYzukVVlZFmzJEmIRCIIh8McoihCURRkMhkkEgm+T+vxeByxWAzpdBrC9vAdq9tvGM4/YnL5BSfOGFI8xpuj0SgnJCJCKBTi6mzbhmEYHKSKhlA/J9zf+1jvPmFydoHJqyUajZd8YgBqJDWBIk3TYFkWt6/rj/EQESlUVRXC+voOi4sNev0pBoMpm95CtWo8y+1pTpQbWSalRE4kzzJ8d3WN8/MlOt4Ave6QXYrFDmn8EOVDtgOQfVmWUSqVOAGpTqVSSCaT/Jtb3qxvMJ+v0O2cosdQr5lQtDyOKhVukQ4QiIj+SYXrupyUFNKg4NKoR5i9ZdmN38B1+kzhCGbdgqzkYFRrzJbGpxOINMiQnhStkaJAHWVIPYLjDNjER3jeKWrMsii+4FmRCok1x6X/lxM8o6dREES2xglb7S5a7R6otlk1TRuFYoGFnYGmsCzp3clpyH+tkypC8E1PRlVZj5JGnokQGk0XjaYHqq1WF3qtjqU3w35/ielhBH31GvpmhvcPd/A/H7DdbbHb7eD7PuaLBcveQ5PFVe3f4Kh6jD/2YjO/1wA8TwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"itunes\" title=\"\" src=\"/static/54ef639a4f73e6df84f47163440f0557/6af66/itunes.png\" srcset=\"/static/54ef639a4f73e6df84f47163440f0557/69538/itunes.png 160w,\n/static/54ef639a4f73e6df84f47163440f0557/72799/itunes.png 320w,\n/static/54ef639a4f73e6df84f47163440f0557/6af66/itunes.png 640w,\n/static/54ef639a4f73e6df84f47163440f0557/d9199/itunes.png 960w,\n/static/54ef639a4f73e6df84f47163440f0557/66465/itunes.png 1097w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>동기화 한번 잘못해서 아이폰에 있는 음악이 다 날아가는 경험은 다들 한번쯤 있지 않을까</small>\n</center>\n<p>하지만 컴퓨터 공학에서는 대부분 동기를 “동시에 발생하는 것”이라고만 설명하고 있기 때문에 느낌이 조금 다르다. 물론 데이터베이스 동기화와 같이 동일한 의미로 사용되는 경우도 있지만, 많은 포스팅이 I/O나 네트워크에 대한 내용을 다루고 있기 때문에 전자의 의미로 해석되는 경우가 많다.</p>\n<p>동기와 비동기라는 단어 중 비동기는 “동기가 아니다”라는 의미이기 때문에 우리는 동기가 정확히 무엇을 말하는 것인지에 초점을 맞춰서 생각해봐야한다.</p>\n<h3 id=\"단어의-뉘앙스를-파악해야한다\" style=\"position:relative;\">단어의 뉘앙스를 파악해야한다<a href=\"#%EB%8B%A8%EC%96%B4%EC%9D%98-%EB%89%98%EC%95%99%EC%8A%A4%EB%A5%BC-%ED%8C%8C%EC%95%85%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"단어의 뉘앙스를 파악해야한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>고등학교 때 언어 영역이나 외국어 영역을 공부할 때 “지문 안에 답이 있다”라는 말을 들어본 적이 있을 것이다. 공학이나 과학 분야에서 사용되는 용어는 주로 영어에서 파생되었고, 이를 한국어로 번역하는 과정에서 오히려 뜻을 알기가 어려운 단어로 번역되는 경우가 있기 때문에 원본인 영어 단어의 뜻을 제대로 파악하는 것이 중요하다.</p>\n<p>갑자기 분위기가 외국어 영역이 된 것 같지만, 필자는 개인적으로 이런 과정 또한 중요하다고 생각한다. 이 과정을 통해 왜 동기라는 단어가 상황에 따라 다른 의미를 가질 수 있는지 알 수 있기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9094539313df482f1f1f54d153a73b83/15ec7/memorize.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB9hMR2QMktEf/xAAZEAADAQEBAAAAAAAAAAAAAAAAARESAhD/2gAIAQEAAQUChDI+qcvJuDSMpef/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAABBAMAAAAAAAAAAAAAAAAAARAhMRFBUf/aAAgBAQAGPwKjrUYk20Fqf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExEEFRkbH/2gAIAQEAAT8hMwrnuNK6eeGp9QKA0uoEAnpFbLghRUph/9oADAMBAAIAAwAAABBf/wBD/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/ECML/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAEP/aAAgBAgEBPxCjqcrv/8QAHhABAAICAgMBAAAAAAAAAAAAAQARITFRYUFxgcH/2gAIAQEAAT8QyMNFZrG+YOJVOH56lHJFI2LdV5V39lgJwAHgsr7uFRIQPRjsl8ClNeSK6LoQn//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"memorize\" title=\"\" src=\"/static/9094539313df482f1f1f54d153a73b83/c08c5/memorize.jpg\" srcset=\"/static/9094539313df482f1f1f54d153a73b83/0913d/memorize.jpg 160w,\n/static/9094539313df482f1f1f54d153a73b83/cb69c/memorize.jpg 320w,\n/static/9094539313df482f1f1f54d153a73b83/c08c5/memorize.jpg 640w,\n/static/9094539313df482f1f1f54d153a73b83/15ec7/memorize.jpg 690w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>암기하지말고 이해하자</small>\n</center>\n<p>먼저 동기(同期)라는 단어의 한자를 보면 같을 동(同), 기약할 기(期)를 사용하고 있으며, 일반적으로 우리가 입사 동기, 군대 동기 등을 이야기 할 때 쓰는 동기와 같은 단어다. 이 단어의 한자만 보면 “같은 기간” 또는 “같은 주기”라는 뜻이다. 역시 우리가 일반적으로 사용하는 동기화의 의미랑은 조금 다른 것 같다.</p>\n<p>우리가 아이폰과 아이튠즈를 동기화하는 것이 이 두 대상의 기간이나 주기를 같게 맞추는 것은 아니지 않은가? 게다가 일반적으로 한국어에서 “~화”라고 함은 앞에 붙은 단어의 의미를 그대로 가져가는 경우가 많아서 더 헷갈린다.</p>\n<p>하지만 사실 우리가 동기의 번역으로 많이 사용하는 “Synchronous”는 살짝 다른 뉘앙스를 가지고 있다.</p>\n<blockquote>\n<p><strong>synchronous</strong> <small>[adjective]</small><br />\n: happening, existing, or arising at precisely the same time</p>\n<p><strong><a href=\"https://www.merriam-webster.com/dictionary/synchronous\" target=\"_blank\" rel=\"nofollow\">- 출처: Webster</a></strong></p>\n</blockquote>\n<p>자, 일단 Synchronous는 동기와 다르게 형용사다. 그래서 사실 한국어로 정확히 번역하면 “동기적인”과 같은 뜻이 되어야 하지만, 한국어로 형용사를 단독으로 사용하는 경우는 별로 없기 때문에 그냥 편의상 명사로 번역하는 것 같다. 그러나 이런 과정에서 한국어 단어와 영어 단어의 뉘앙스가 달라지는 경우가 발생한다.</p>\n<p>그리고 의미를 보면 “정확히 같은 시간에 발생, 존재하는 것”이라고 한다. 그리고 이 단어는 형용사이기 때문에 무엇이 정확하게 같은 시간에 발생하는지는 적혀있지 않다. 그럼 이제 동기화를 의미하는 명사인 “Synchronization”의 사전적 의미를 한번 살펴보자.</p>\n<blockquote>\n<p><strong>synchronization</strong><br />\n: the state of being synchronous</p>\n<p><strong><a href=\"https://www.merriam-webster.com/dictionary/synchronization\" target=\"_blank\" rel=\"nofollow\">- 출처: Webster</a></strong></p>\n</blockquote>\n<p>Synchronization은 “Synchronous한 상태”라고 한다. 즉, 동기와 동기화는 근본적으로 같은 뜻이라는 말이다. 같은 단어를 공유하는 이 두 단어가 한국어로 변형되며 다른 뜻이 되는 것은 영어를 한국어로 번역하는 과정에서 영어 특유의 뉘앙스를 제대로 표현하기가 어렵기 때문에 발생하는 문제이다.</p>\n<p>게다가 이 단어들의 원형인 “Synchro”는 단어 자체가 뜻을 의미하는 변태적인 단어이기 때문에 한국어로 번역하기도 쉽지 않다. <small>(한국어로 치면 “애매하다”같은 느낌이다. 이런건 반대로 영어로 번역하기 쉽지 않다.)</small></p>\n<p><strong>Synchro</strong>nize, <strong>Synchro</strong>nization, <strong>Synchro</strong>nous 등 Synchro를 공유하는 이 단어들이 공통적으로 가지는 뉘앙스는 바로 “동시에 똑같이 진행되는 느낌”이다. 그것이 상태이든 동작이든 사건이든 동시에 똑같이 진행되는 느낌을 말하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/edf9c97710f3443a11147da87d5eb3e8/01ab0/synchronized-swimming.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAME/9oADAMBAAIQAxAAAAGdM20qIEH/xAAWEAEBAQAAAAAAAAAAAAAAAAABABD/2gAIAQEAAQUCNJm//8QAFxEBAAMAAAAAAAAAAAAAAAAAAgEQUf/aAAgBAwEBPwEycr//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8BNX//xAAWEAADAAAAAAAAAAAAAAAAAAABECD/2gAIAQEABj8CgL//xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhcf/aAAgBAQABPyEE5k4TufUnb//aAAwDAQACAAMAAAAQFM//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QyMW//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxA67Bf/xAAaEAACAwEBAAAAAAAAAAAAAAABEQAhMUFh/9oACAEBAAE/EBBbrvILwNHQHHgA8hFsMktMX7Gtz//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"synchronized swimming\" title=\"\" src=\"/static/edf9c97710f3443a11147da87d5eb3e8/c08c5/synchronized-swimming.jpg\" srcset=\"/static/edf9c97710f3443a11147da87d5eb3e8/0913d/synchronized-swimming.jpg 160w,\n/static/edf9c97710f3443a11147da87d5eb3e8/cb69c/synchronized-swimming.jpg 320w,\n/static/edf9c97710f3443a11147da87d5eb3e8/c08c5/synchronized-swimming.jpg 640w,\n/static/edf9c97710f3443a11147da87d5eb3e8/6a068/synchronized-swimming.jpg 960w,\n/static/edf9c97710f3443a11147da87d5eb3e8/eea4a/synchronized-swimming.jpg 1280w,\n/static/edf9c97710f3443a11147da87d5eb3e8/01ab0/synchronized-swimming.jpg 1300w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>대표적인 싱크로의 예</small>\n</center>\n<p>즉, 아이폰과 아이튠즈의 상태를 동일하게 만드는 것은 작업이 끝남과 동시에 아이폰과 아이튠즈가 같은 상태가 되므로 Synchronous한 상태가 된 것이고, 일반적으로 컴퓨터 공학에서 이야기하는 동기의 해석인 동시에 발생하는 사건 또한 Synchronous한 사건이라고 할 수 있는 것이다.</p>\n<p>심지어 이 단어들의 어원인 “Syn-”은 단순히 “Together”라는 의미를 내포하는 단어이기 때문에 이런 상황에서도 사용할 수 있다.</p>\n<blockquote>\n<p>He and I are <strong>out of sync</strong> in everything<br />\n그와 나는 모든 면에서 <strong>맞지 않는다</strong></p>\n</blockquote>\n<p>이렇게 한국어로 직역하기 어려운 단어는 뉘앙스를 통해서 뜻을 이해하는 편이 더 좋다. 교수님들이나 과학자들이 한국어로 말하는 중간에 영어 단어를 섞어가면서 사용하는 것은 이런 이유도 있다고 생각한다. 사실 한국어의 동기라는 의미에만 초점을 맞추면 Synchro에서 변형된 단어들 간의 공통점을 연상하기가 쉽지 않다.</p>\n<p>다시 정리하자면, “Synchro-”를 사용하는 단어들은 모두 “동시에 똑같이 진행되는 느낌”의 뉘앙스를 가지는 단어이다. 결국 우리가 상태의 통일을 의미하는 동기화든 컴퓨터 공학에서 말하는 동시에 발생한 사건이든 모두 같은 뉘앙스를 가지고 있다는 것이다.</p>\n<h2 id=\"컴퓨터-공학에서의-동기\" style=\"position:relative;\">컴퓨터 공학에서의 동기<a href=\"#%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99%EC%97%90%EC%84%9C%EC%9D%98-%EB%8F%99%EA%B8%B0\" aria-label=\"컴퓨터 공학에서의 동기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>많은 포스팅에서 동기의 의미를 설명할 때 현재 작업의 요청과 응답이 동시에 발생하는 것으로 설명하고 있지만, 필자는 이 “동시”라는 단어가 가지는 의미와 다르게 요청과 응답 사이에는 일정한 시간이 존재할 수 밖에 없기 때문에 뭔가 모순이 느껴진다고 생각했다.</p>\n<p>사실 동시라는 단어는 동시다발적에서의 용법과 같이 반드시 찰나의 순간만을 의미하는 것이 아니기 때문에 이렇게 설명할 수도 있긴 하지만, 일반적인 동시라는 단어의 용법을 생각해보면 직관적이지 않다고 생각한다.</p>\n<p>그래서 필자는 동시에 발생하는 것은 현재 작업의 요청과 응답이 아니라 “현재 작업의 응답과 다음 작업의 요청”이라고 설명하는 게 더 맞지 않나 싶다. <small>(애초에 Synchronous는 형용사라 주어가 없다)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8aae3ca6cff4ddbe364a411fd31cf7d0/c9b31/sync.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 24.375000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd0RRX//xAAWEAADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCVP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABsQAAEEAwAAAAAAAAAAAAAAAAEAEBExQWGR/9oACAEBAAE/IY2erNln/9oADAMBAAIAAwAAABAMD//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QgX//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEhQXH/2gAIAQEAAT8QcIgSyz2o01P/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sync\" title=\"\" src=\"/static/8aae3ca6cff4ddbe364a411fd31cf7d0/c08c5/sync.jpg\" srcset=\"/static/8aae3ca6cff4ddbe364a411fd31cf7d0/0913d/sync.jpg 160w,\n/static/8aae3ca6cff4ddbe364a411fd31cf7d0/cb69c/sync.jpg 320w,\n/static/8aae3ca6cff4ddbe364a411fd31cf7d0/c08c5/sync.jpg 640w,\n/static/8aae3ca6cff4ddbe364a411fd31cf7d0/6a068/sync.jpg 960w,\n/static/8aae3ca6cff4ddbe364a411fd31cf7d0/eea4a/sync.jpg 1280w,\n/static/8aae3ca6cff4ddbe364a411fd31cf7d0/c9b31/sync.jpg 1853w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>동기 방식은 현재 작업의 응답과 다음 작업의 요청의 타이밍을 맞추는 방식이다</small>\n</center>\n<p>즉, 현재 작업의 응답이 발생함과 동시에 다음 작업을 요청한다는 것은 작업이 “어떠한 순서를 가지고 진행된다는 것”을 의미한다. 그리고 이 응답이라는 것도 사실 귀에 붙히면 귀걸이고 코에 붙히면 코걸이로, 네트워크 모델에서는 서버의 응답일 수도 있고 I/O 모델에서는 프로세스 제어권의 반납일 수도 있다.</p>\n<p>그럼 먼저 우리가 가장 흔하게 접할 수 있는 동기 방식의 예를 한번 보자.</p>\n<h3 id=\"동기-방식--블록킹-방식\" style=\"position:relative;\">동기 방식 + 블록킹 방식<a href=\"#%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B8%94%EB%A1%9D%ED%82%B9-%EB%B0%A9%EC%8B%9D\" aria-label=\"동기 방식  블록킹 방식 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우리가 가장 흔하게 접하는 동기 방식의 예는 바로 동기 &#x26; 블록킹 방식이다. 동기 방식이기 때문에 작업의 흐름도 순차적으로 진행되는 것이 보장되고, 블록킹 방식이기 때문에 어떠한 작업이 진행 중일 때는 다른 작업을 동시에 진행할 수가 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">employee</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">101</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">직원: 인형 눈알 붙히기 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">번 수행</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">boss</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 출근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">employee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 퇴근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">boss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">사장: 출근\n직원: 인형 눈알 붙히기 1번 수행\n직원: 인형 눈알 붙히기 2번 수행\n...\n직원: 인형 눈알 붙히기 100번 수행\n사장: 퇴근</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 코드를 보면 우리는 자연스럽게 이 작업들이 순서를 가지고 진행될 것이라는 것을 알 수 있다. 내부적으로는 하나의 콜 스택에 작업을 넣고 LIFO(Last In First Out)으로 진행되기 때문이라는 것을 알고 있지만, 여기서는 그런 내부 로직보다는 그냥 작업이 순서대로 진행된다는 것이라는 것에만 집중하자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fe251be8bc28c901b166ea3f99eb1302/0f98f/sync-block.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3lAH/8QAFRABAQAAAAAAAAAAAAAAAAAAIEH/2gAIAQEAAQUCp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAAIDAAAAAAAAAAAAAAAAAAABIDFB/9oACAEBAAE/IRgqh//aAAwDAQACAAMAAAAQcM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABExQRAhcf/aAAgBAQABPxCi7uo9oceQAAxN8//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sync block\" title=\"\" src=\"/static/fe251be8bc28c901b166ea3f99eb1302/c08c5/sync-block.jpg\" srcset=\"/static/fe251be8bc28c901b166ea3f99eb1302/0913d/sync-block.jpg 160w,\n/static/fe251be8bc28c901b166ea3f99eb1302/cb69c/sync-block.jpg 320w,\n/static/fe251be8bc28c901b166ea3f99eb1302/c08c5/sync-block.jpg 640w,\n/static/fe251be8bc28c901b166ea3f99eb1302/6a068/sync-block.jpg 960w,\n/static/fe251be8bc28c901b166ea3f99eb1302/eea4a/sync-block.jpg 1280w,\n/static/fe251be8bc28c901b166ea3f99eb1302/0f98f/sync-block.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>모든 인형의 눈알을 다 붙히기 전까지 퇴근은 없다</small>\n</center>\n<p>상위 프로세스인 <code class=\"language-text\">boss</code> 함수는 출근 작업을 수행한 뒤 하위 프로세스인 <code class=\"language-text\">employee</code> 함수에게 인형 눈알 붙히기 작업을 요청하고 있고, 이 인형 눈알 붙히기 작업이 완료되고나서야 <code class=\"language-text\">boss</code> 함수는 퇴근 작업을 수행한다.</p>\n<p>쉽게 말해서 작업을 시킨 놈인 상위 프로세스는 작업을 하는 놈인 하위 프로세스가 종료될 때까지 절대 퇴근할 수 없다는 것이다. 이 예제와 같이 동기 방식과 블록킹 방식을 함께 사용하는 매커니즘은 일반적으로 사람들이 동기 방식이라고 하면 가장 먼저 떠올리는 방식이고 직관적으로 이해하기도 쉬운 편이다.</p>\n<p>그렇다면 이 예제와 같이 동기적인 작업의 흐름을 유지하면서 <code class=\"language-text\">employee</code> 함수가 인형의 눈알을 붙히는 동안 <code class=\"language-text\">boss</code> 함수가 다른 일을 할 수도 있을까?</p>\n<h3 id=\"동기-방식--논블록킹-방식\" style=\"position:relative;\">동기 방식 + 논블록킹 방식<a href=\"#%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%85%BC%EB%B8%94%EB%A1%9D%ED%82%B9-%EB%B0%A9%EC%8B%9D\" aria-label=\"동기 방식  논블록킹 방식 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>물론 할 수 있다. 뭐가 어찌됐건 동기라는 것은 작업들이 순차적인 흐름을 가지고 있다는 것을 의미하기 때문에 이 전제만 지켜진다면 나머지는 어떻게 지지고 볶든 간에 동기 방식이라는 것은 변하지 않기 때문이다. 그래서 <code class=\"language-text\">동기 === 블록킹</code>이라고 말할 수 없는 것이다.</p>\n<p>JavaScript의 제너레이터를 사용하면 작업의 순서를 지키면서도 상위 프로세스가 다른 작업을 하도록 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">employee</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">101</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">직원: 인형 눈알 붙히기 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">번 수행</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">yield</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">boss</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 출근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> generator <span class=\"token operator\">=</span> <span class=\"token function\">employee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> generator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">사장: 유튜브 시청...</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 퇴근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">boss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">사장: 출근\n직원: 인형 깔알 붙히기 1번 수행\n사장: 유튜브 시청...\n직원: 인형 눈알 붙히기 2번 수행\n사장: 유튜브 시청...\n...\n직원: 인형 눈알 붙히기 100번 수행\n사장: 유튜브 시청...\n사장: 퇴근</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 예제를 보면 상위 프로세스인 <code class=\"language-text\">boss</code> 함수는 출근한 후 하위 프로세스인 <code class=\"language-text\">employee</code>를 호출하여 인형 눈알 붙히기 작업을 시키고 주기적으로 이 작업이 끝났는지를 검사하고 있다.</p>\n<p>그리고 아직 작업이 끝나지 않았다면 자신 또한 열심히 <code class=\"language-text\">유튜브 시청</code>을 수행하는 것을 볼 수 있다. 이 코드는 분명히 동기적인 흐름을 가지고 진행하고 있지만 <code class=\"language-text\">boss</code> 함수 또한 중간중간 자신의 작업을 수행하고 있으므로 블록킹이 아니라 논블록킹 방식을 사용하고 있는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6395f57fdd8a1d9b8bdbb83621f2157c/0f98f/sync-non-block.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3lAH/8QAFRABAQAAAAAAAAAAAAAAAAAAIEH/2gAIAQEAAQUCp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAABESEQMVH/2gAIAQEAAT8h6NoVIiyMf//aAAwDAQACAAMAAAAQEM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMVFx/9oACAEBAAE/EK2O1NQdPkAAclNVsp4QKKJ//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sync non block\" title=\"\" src=\"/static/6395f57fdd8a1d9b8bdbb83621f2157c/c08c5/sync-non-block.jpg\" srcset=\"/static/6395f57fdd8a1d9b8bdbb83621f2157c/0913d/sync-non-block.jpg 160w,\n/static/6395f57fdd8a1d9b8bdbb83621f2157c/cb69c/sync-non-block.jpg 320w,\n/static/6395f57fdd8a1d9b8bdbb83621f2157c/c08c5/sync-non-block.jpg 640w,\n/static/6395f57fdd8a1d9b8bdbb83621f2157c/6a068/sync-non-block.jpg 960w,\n/static/6395f57fdd8a1d9b8bdbb83621f2157c/eea4a/sync-non-block.jpg 1280w,\n/static/6395f57fdd8a1d9b8bdbb83621f2157c/0f98f/sync-non-block.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>니가 일하는 동안 난 짬짬히 유튜브를 보겠다</small>\n</center>\n<p>이 예제에서도 동기 &#x26; 블록킹 방식과 마찬가지로 <code class=\"language-text\">boss</code> 함수는 <code class=\"language-text\">employee</code> 함수의 작업이 끝나기 전까지는 절대 퇴근할 수 없다. 작업의 순서가 지켜지고 있는 것이다. 즉, 동기 방식이라는 것은 작업의 순차적인 흐름만 지켜진다면 블록킹이든 논블록킹이든 아무 상관이 없다고 할 수 있다.</p>\n<h2 id=\"컴퓨터-공학에서의-비동기\" style=\"position:relative;\">컴퓨터 공학에서의 비동기<a href=\"#%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99%EC%97%90%EC%84%9C%EC%9D%98-%EB%B9%84%EB%8F%99%EA%B8%B0\" aria-label=\"컴퓨터 공학에서의 비동기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 동기 방식을 현재 작업의 응답과 다음 작업의 요청의 타이밍이 일치하는 것이라고 이야기 했다. 비동기 방식은 말 그대로 동기 방식이 아니라는 의미이기 때문에 반대로 생각하면 된다. 즉, 현재 작업의 응답과 다음 작업의 요청의 타이밍이 일치하지 않아도 되는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ec1da404358cadaa685c34ecb3f1fb8a/6ca16/async.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHbkiwr/8QAFxABAAMAAAAAAAAAAAAAAAAAAQAQEv/aAAgBAQABBQLIwAr/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAh/9oACAEBAAY/AjFP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERMXH/2gAIAQEAAT8hehUwBcKf/9oADAMBAAIAAwAAABCMD//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxClf//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxCBf//EABkQAQADAQEAAAAAAAAAAAAAAAEAEZFRcf/aAAgBAQABPxCifMqmR/BVFnJ//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"async\" title=\"\" src=\"/static/ec1da404358cadaa685c34ecb3f1fb8a/c08c5/async.jpg\" srcset=\"/static/ec1da404358cadaa685c34ecb3f1fb8a/0913d/async.jpg 160w,\n/static/ec1da404358cadaa685c34ecb3f1fb8a/cb69c/async.jpg 320w,\n/static/ec1da404358cadaa685c34ecb3f1fb8a/c08c5/async.jpg 640w,\n/static/ec1da404358cadaa685c34ecb3f1fb8a/6a068/async.jpg 960w,\n/static/ec1da404358cadaa685c34ecb3f1fb8a/eea4a/async.jpg 1280w,\n/static/ec1da404358cadaa685c34ecb3f1fb8a/6ca16/async.jpg 1855w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>작업을 지시하고나면 그 작업이 언제 끝나는 지는 신경쓰지않는다.</small>\n</center>\n<p>동기 방식은 상위 프로세스가 하위 프로세스에게 작업을 지시할 때 작업의 종료 시점을 알고 있어야한다. 하위 프로세스의 작업이 완료되어 결과물을 뱉어내든 혹은 작업이 아직 진행 중이든 작업의 종료 시점은 항상 작업을 시킨 놈인 상위 프로세스가 신경쓰고있다.</p>\n<p>하지만 비동기 방식은 다르다. 상위 프로세스는 작업을 일단 지시했으면 그 다음부터는 작업이 진행 중이든 종료가 되었든 신경쓰지않는다. 동기 방식을 설명했을 때와 마찬가지로 이때 상위 프로세스가 자신의 작업을 할 수 있냐 없냐는 별개의 문제이다.</p>\n<p>또한 상위 프로세스가 하위 프로세스의 작업 종료 여부를 신경쓰지 않기 때문에 작업의 종료가 순차적으로 이루어지는 것을 보장하지 않는다. 그럼 먼저, 우리에게 익숙한 방식인 비동기 &#x26; 논블로킹 방식부터 한번 살펴보자.</p>\n<h3 id=\"비동기-방식--논블로킹-방식\" style=\"position:relative;\">비동기 방식 + 논블로킹 방식<a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%B0%A9%EC%8B%9D\" aria-label=\"비동기 방식  논블로킹 방식 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>비동기 방식과 논블로킹 방식을 조합한 방법은 우리에게 굉장히 익숙한 방식이다. 비동기 방식이기 때문에 상위 프로세스는 하위 프로세스의 작업 완료 여부를 따로 신경쓰지 않는다. 이후 하위 프로세스의 작업이 종료되면 스스로 상위 프로세스에게 보고를 하든 아니면 다른 프로세스에게 일을 맡기든 할 것이다.</p>\n<p>그리고 논블로킹 방식이기 때문에 상위 프로세스는 하위 프로세스에게 일을 맡기고 자신의 작업을 계속 수행할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">employee</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">maxDollCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> dollCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dollCount <span class=\"token operator\">></span> maxDollCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    dollCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">직원: 인형 눈알 붙히기 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dollCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">번 수행</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">boss</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 출근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">employee</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'직원: 눈알 결산 보고'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사장: 퇴근'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">boss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">사장: 출근\n사장: 퇴근\n직원: 인형 눈알 붙히기 1번 수행\n직원: 인형 눈알 붙히기 2번 수행\n...\n직원: 인형 눈알 붙히기 100번 수행\n직원: 눈알 결산 보고</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 예제를 보면 <code class=\"language-text\">boss</code> 함수는 <code class=\"language-text\">employee</code> 함수에게 인형 눈알 <code class=\"language-text\">100</code>개를 붙히라고 지시한 후 자신은 바로 퇴근해버렸다.</p>\n<p>상위 프로세스인 <code class=\"language-text\">boss</code> 함수는 <code class=\"language-text\">employee</code> 함수의 작업이 언제 끝나는지는 관심이 없으며 작업의 완료 신호는 콜백으로 넘겨진 <code class=\"language-text\">눈알 결산 보고</code> 작업이 대신 받아서 처리하고 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/576918463dddd506e08ef5a97177dd7e/0f98f/async-non-block.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd6LAD//xAAVEAEBAAAAAAAAAAAAAAAAAAAgQf/aAAgBAQABBQKn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAAIDAAAAAAAAAAAAAAAAEQABIDFB/9oACAEBAAE/ITaFBzH/2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQAhMRAR/9oACAEBAAE/ENsVH3obXbAAAw44wyf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"async non block\" title=\"\" src=\"/static/576918463dddd506e08ef5a97177dd7e/c08c5/async-non-block.jpg\" srcset=\"/static/576918463dddd506e08ef5a97177dd7e/0913d/async-non-block.jpg 160w,\n/static/576918463dddd506e08ef5a97177dd7e/cb69c/async-non-block.jpg 320w,\n/static/576918463dddd506e08ef5a97177dd7e/c08c5/async-non-block.jpg 640w,\n/static/576918463dddd506e08ef5a97177dd7e/6a068/async-non-block.jpg 960w,\n/static/576918463dddd506e08ef5a97177dd7e/eea4a/async-non-block.jpg 1280w,\n/static/576918463dddd506e08ef5a97177dd7e/0f98f/async-non-block.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>사장님은 작업만 지시하고 바로 퇴근하신다</small>\n</center>\n<p>비동기 &#x26; 논블로킹 방식은 여러 개의 작업을 동시에 처리할 수 있는 부분에서 효율적이라고 할 수 있지만, 너무 복잡하게 얽힌 비동기 처리 때문에 개발자가 어플리케이션의 흐름을 읽기 어려워지는 등의 문제가 있을 수 있다. JavaScript에서 <code class=\"language-text\">Promise</code>나 <code class=\"language-text\">async/await</code>와 같은 문법을 사용하는 이유도 이런 비동기 처리의 흐름을 좀 더 명확하게 인지하고자 하는 노력인 것이다.</p>\n<p>또한 NodeJS의 이벤트 루프와 같이 비동기 방식도 내부 구현을 뜯어보면 동기적인 패턴이 포함되어있기 때문에 남발하게되면 어딘가에 병목이 생길 수도 있다.</p>\n<h3 id=\"비동기-방식--블로킹-방식\" style=\"position:relative;\">비동기 방식 + 블로킹 방식<a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%B0%A9%EC%8B%9D\" aria-label=\"비동기 방식  블로킹 방식 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그럼 이제 마지막으로, 평소에 접하기 힘든 개념인 비동기 &#x26; 블로킹을 살펴보자. 이 방식은 일반적인 어플리케이션 레이어에서는 자주 사용되지 않고 Linux와 Unix 운영체제의 I/O 다중화 모델 정도의 저레벨에서 사용되고 있다. 그래서 지금까지 예제로 사용하던 사장님과 직원은 이제 그만 퇴근시켜주고 설명을 진행할 것이다.</p>\n<p>일단 이 개념은 얼핏 들으면 비효율적이기만 할 수도 있다. 비동기 방식의 장점은 하위 프로세스의 작업이 끝나는 것을 기다리지 않음으로써 여러 개의 작업을 동시에 처리할 수 있다는 것인데, 프로세스가 블록킹되어버려서 유휴 상태에 빠진다면 아무 것도 처리할 수 없기 때문이다.</p>\n<p>하지만 이 개념이 나오게 된 이유는 다음과 같다.</p>\n<blockquote>\n<ol>\n<li>동기 &#x26; 블록킹 I/O의 경우 직관적이나, 여러 개의 I/O를 동시에 처리할 수 없다.</li>\n<li>논블록킹 I/O는 프로세스들의 작업을 컨트롤하는 것이 까다롭다. <small>(대부분 이런 저레벨 프로그램은 C로 짠다. JS나 Python 같은 걸 생각하면 안된다.)</small></li>\n<li>그렇다고 동기 &#x26; 블록킹 I/O와 멀티 프로세싱이나 쓰레딩을 결합해서 쓰자니 자원 문제도 있고 프로세스/쓰레드 간 통신이나 동기화가 빡셈</li>\n</ol>\n</blockquote>\n<p>그래서 나온 개념이 바로 “그럼 그냥 프로세스를 블록킹해놓고 비동기로 여러 개의 I/O를 다중화해서 받아버리는 놈을 만들면 어때?”인 것이다. 즉, 직관적인 코드의 흐름을 유지하면서도 작업을 동시에 처리하겠다는 것이다.</p>\n<p>참고로 이 내용은 IBM에서 2006년에 작성한 <a href=\"https://developer.ibm.com/articles/l-async/\" target=\"_blank\" rel=\"nofollow\">Boost application performance using asynchronous I/O</a>이라는 포스팅에도 소개되어 있다.</p>\n<center>\n  <img src=\"/0855a1508418e6ca6cb4b933f2dc3e61/async-block.gif\" width=\"100%\">\n  <br>\n  <small>비동기 + 블록 방식의 워크 플로우</small>\n  <br>\n  <br>\n</center>\n<p>위 그림을 보면 중간에 <code class=\"language-text\">select()</code>라는 함수가 있는데, 이 친구가 바로 프로세스를 블록킹함과 동시에 여러 개의 I/O를 받아서 처리하는 역할을 한다. 이 함수는 C언어의 API로 제공되고 있으며, 그냥 <code class=\"language-text\">include &lt;sys/select.h></code>와 같이 헤더를 가져와서 쓰면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">select</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> nfds<span class=\"token punctuation\">,</span> fd_set <span class=\"token operator\">*</span>readfds<span class=\"token punctuation\">,</span> fd_set <span class=\"token operator\">*</span>writefds<span class=\"token punctuation\">,</span> \n    fd_set <span class=\"token operator\">*</span>exceptfds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">timeval</span> <span class=\"token operator\">*</span>timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이때 <code class=\"language-text\">nfds</code>는 감시할 파일의 개수를, <code class=\"language-text\">fd_set</code> 구조체들은 각각 읽을 데이터, 쓰여진 데이터, 예외처리가 발생한 것을 감시할 파일 목록이다. 이때 <code class=\"language-text\">fd...</code>는 <code class=\"language-text\">File Descriptor</code>의 약자이며, 파일을 감시하고 있다가 해당 I/O가 발생하면 자신이 가지고 있는 비트 배열 구조체의 해당 값을 <code class=\"language-text\">1</code>로 변경한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 파일 목록 중 3번째 파일에 변경사항이 있다면 FD의 비트 배열 구조체가 변경된다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>그리고 timeval 구조체인 <code class=\"language-text\">timeout</code> 인자는 감시할 시간을 의미한다. 즉, 이 <code class=\"language-text\">timeout</code> 인자에 넘겨준 시간 동안 상위 프로세스를 블록킹하면서 자신이 넘겨받은 파일 목록을 계속 감시하고 있는 것이다. 그리고 감시하고 있는 동안 파일에 읽기, 쓰기, 예외가 발생하면 <code class=\"language-text\">select</code> 함수가 종료될 때 자신이 감시하던 있는 파일들 중 해당 변경사항이 발생한, 즉 처리해야할 파일의 개수를 반환한다.</p>\n<p>대충 이 정도가 비동기 &#x26; 블록 방식의 대표적인 예인 <code class=\"language-text\">select</code> 함수가 작동하는 방식이다. 정리하자면 일정 시간동안 프로세스를 멈춰놓고 자신이 감시하고 있는 파일들에서 I/O가 발생하는지를 감시하는 것이다. 그리고 일정 시간이 지나면 함수가 종료되며 그동안 감시했던 파일들의 I/O 결과를 반환하고 프로세스의 블록킹이 풀린다.</p>\n<p>이 방식은 블록킹 방식으로 진행되기 때문에 개발자에게도 직관적으로 다가오고, 비동기 방식이기 때문에 여러 개의 I/O를 동시에 감시하며 처리할 수 있다. 하지만 성능이 그렇게 좋은 편은 아니므로 IBM에서는 높은 성능이 필요한 어플리케이션에서는 되도록 쓰지 말라고 한다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 대학교 때 네트워크 과목을 수강하며 동기에 대한 개념을 처음 배웠었는데, 사실 그때는 굉장히 단편적인 내용만을 알고 있었다. 단순히 두 디바이스간의 클럭과 일정 크기의 프레임을 맞추어 통신하는 것이 동기식 통신이라는 것 정도?</p>\n<p>하지만 개발자로 일을 하면서 공부를 더 하다보니까 동기식 I/O, 동기식 프로그래밍 등 동기에 대한 다른 개념들을 계속 해서 접하게 되었는데, 서문에서 이야기했듯이 누구는 동기라는 단어가 동시에 발생하는 것이라고 하고 누구는 특정한 클럭을 맞춰서 통신하는 것, 또 누구는 이전 작업이 끝날 때까지 기다리는 것이라고 하는 등 해석이 다 달라서 더 혼란스러웠다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1ac47e8dbaafebf35dc0419285bce15f/066f9/dont-know.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXfVybGcIAD//EABoQAAEFAQAAAAAAAAAAAAAAAAEAAhAREiH/2gAIAQEAAQUC31jiVdRS0TIX/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGhAAAQUBAAAAAAAAAAAAAAAAEAERICExYf/aAAgBAQAGPwJeDHFR/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFBgf/aAAgBAQABPyEbfzV15OuAl2zx+lzq672YDGJrLTYFcyPI8nqf/9oADAMBAAIAAwAAABCDxwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAeEAEBAAMAAgMBAAAAAAAAAAABEQAhMVGxQXGB4f/aAAgBAQABPxAqlmUwUPb+PjBbeRb1yaxcBhKD+MQQojb5nDLghRBoDdYy7KV0S6h5XPfnb6c9mf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dont know\" title=\"\" src=\"/static/1ac47e8dbaafebf35dc0419285bce15f/066f9/dont-know.jpg\" srcset=\"/static/1ac47e8dbaafebf35dc0419285bce15f/0913d/dont-know.jpg 160w,\n/static/1ac47e8dbaafebf35dc0419285bce15f/cb69c/dont-know.jpg 320w,\n/static/1ac47e8dbaafebf35dc0419285bce15f/066f9/dont-know.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>아니 왜 말하는 게 다 달라...?</small>\n</center>\n<p>그래서 이번 포스팅을 작성하면서 “Synchronous”라는 단어가 정확히 어떤 상태를 의미하는 것인지부터 다시 공부했었는데, 확실히 단어의 뉘앙스를 이해하고나니 왜 이렇게 다른 해석들이 나오게 되었는지 약간은 이해가 가는 것 같다. 단어 자체가 뜻을 의미하는 단어다보니 이건 그냥 해석하기 나름인것 같기도 하다.</p>\n<p>어쨌든 다른 건 다 차치하고서라도 Synchronous라는 단어가 “동시에 똑같이 진행되는 느낌”이라는 뉘앙스를 알게 된 것이 이번 포스팅의 최대 수확이 아닐까라는 생각을 해본다.</p>\n<p>이상으로 동기(Synchronous)는 정확히 무엇을 의미하는걸까? 포스팅을 마친다.</p>","fields":{"slug":"20190919-sync-async-blocking-non-blocking","path":"/2019/09/19/sync-async-blocking-non-blocking/","lang":"ko"},"frontmatter":{"title":"동기(Synchronous)는 정확히 무엇을 의미하는걸까?","subTitle":"실무에서 헷갈리기 쉬운 동기와 비동기의 개념 정리","date":"Sep 19, 2019","categories":["프로그래밍"],"tags":["Synchronous","Asynchronous","동기","비동기","Blocking","Non Blocking","블록킹","논블록킹","비동기 프로그래밍"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#8878c8","images":{"fallback":{"src":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/3a812/thumbnail.jpg","srcSet":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/1cda5/thumbnail.jpg 80w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/b1a47/thumbnail.jpg 160w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/3a812/thumbnail.jpg 320w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/3e5ca/thumbnail.webp 80w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/b72f1/thumbnail.webp 160w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/fc5c5/thumbnail.webp 320w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#8878c8","images":{"fallback":{"src":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/2c11c/thumbnail.jpg","srcSet":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/23110/thumbnail.jpg 750w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/da421/thumbnail.jpg 1080w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/a2093/thumbnail.jpg 1366w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/e075bee6dfcc71a33568cd0ef7b6f61c/6858b/thumbnail.webp 750w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/f5547/thumbnail.webp 1080w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/29310/thumbnail.webp 1366w,\n/static/e075bee6dfcc71a33568cd0ef7b6f61c/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}],"pageInfo":{"currentPage":4,"pageCount":7}}},"pageContext":{"limit":15,"skip":45,"lang":"ko","totalCount":102}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}