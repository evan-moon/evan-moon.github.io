{"data":{"allMarkdownRemark":{"group":[{"fieldValue":"businessWithProgramming","totalCount":1,"nodes":[{"id":"aac88ea6-e27a-5342-8c9c-31f7bf4334d0","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9A%B0%EB%A6%AC%EB%8A%94-%EA%B3%A0%EC%9A%A9%EB%90%98%EC%97%88%EB%8B%A4\">우리는 고용되었다</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%93%A4%EC%9D%80-%EC%A2%8B%EC%9D%80-%EC%84%A4%EA%B3%84%EB%A5%BC-%ED%95%98%EB%A0%A4%EA%B3%A0-%ED%95%98%EB%8A%94%EA%B1%B8%EA%B9%8C\">왜 개발자들은 좋은 설계를 하려고 하는걸까?</a></li>\n<li><a href=\"#%EC%9A%B0%EB%A6%AC%EB%8A%94-%EB%B0%A9%EB%A7%9D%EC%9D%B4-%EA%B9%8E%EB%8D%98-%EB%85%B8%EC%9D%B8%EC%9D%B4-%EC%95%84%EB%8B%88%EB%8B%A4\">우리는 방망이 깎던 노인이 아니다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4%EC%99%80-%EC%A2%8B%EC%9D%80-%EC%84%A4%EA%B3%84%EC%9D%98-%EA%B7%A0%ED%98%95%EC%9D%84-%EC%B0%BE%EC%95%84%EB%B3%B4%EC%9E%90\">비즈니스와 좋은 설계의 균형을 찾아보자</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4%EA%B2%8C-%EC%A0%95%EB%A7%90-%EC%84%A4%EA%B3%84%EB%A5%BC-%EA%B3%A0%EB%AF%BC%ED%95%A0-%EA%B0%80%EC%B9%98%EA%B0%80-%EC%9E%88%EC%9D%84%EA%B9%8C\">이게 정말 설계를 고민할 가치가 있을까?</a></p>\n<ul>\n<li><a href=\"#%ED%8A%BC%ED%8A%BC%ED%95%9C-%EC%84%A4%EA%B3%84%EB%B3%B4%EB%8B%A4-%EB%B9%A0%EB%A5%B8-%EA%B0%9C%EB%B0%9C-%EC%86%8D%EB%8F%84%EA%B0%80-%EC%A4%91%EC%9A%94%ED%95%A0-%EB%95%8C\">튼튼한 설계보다 빠른 개발 속도가 중요할 때</a></li>\n<li><a href=\"#%EC%A7%80%EC%9B%8C%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EB%A7%8C%EB%93%A4-%EB%95%8C%EB%8F%84-%EC%9E%88%EB%8B%A4\">지워야 하는 기능을 만들 때도 있다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 개발자와 멀고도 가까운 주제인 비즈니스에 대해서 한번 이야기를 해보려고 한다. 개발자들은 늘 좋은 설계와 튼튼한 어플리케이션을 만들기 위해 고심하고 노력하는 사람들이다. 하지만 언제나 좋은 설계를 위한 선택이 옳은 선택일 수는 없다. 왜냐하면 우리는 프로그래밍을 사용하여 돈을 벌기 위해 고용된 사람들이기 때문이다. 보통 개발자들에게 좋은 설계라고 했을 때 TDD, DDD, SOLID, 변경에 열린 구조, 순수 함수 등 기술적인 토픽들에 대해서 이야기하는 사람들은 굉장히 많지만 막상 비즈니스에 대한 이야기를 하는 …","html":"<p>이번 포스팅에서는 개발자와 멀고도 가까운 주제인 비즈니스에 대해서 한번 이야기를 해보려고 한다. 개발자들은 늘 좋은 설계와 튼튼한 어플리케이션을 만들기 위해 고심하고 노력하는 사람들이다. 하지만 언제나 좋은 설계를 위한 선택이 옳은 선택일 수는 없다. 왜냐하면 우리는 프로그래밍을 사용하여 돈을 벌기 위해 고용된 사람들이기 때문이다.</p>\n<p>보통 개발자들에게 좋은 설계라고 했을 때 TDD, DDD, SOLID, 변경에 열린 구조, 순수 함수 등 기술적인 토픽들에 대해서 이야기하는 사람들은 굉장히 많지만 막상 비즈니스에 대한 이야기를 하는 사람은 많지 않은데, 개발자가 단순히 프로그래밍만 하는 사람이 아니라 프로그래밍을 이용한 비즈니스를 하는 사람들이라는 사실을 생각해보면 조금은 이상한 상황이라는 생각이 들었다.</p>\n<h2>우리는 고용되었다</h2>\n<p>간혹 프리랜서 개발자로 살아가시는 분들도 계시지만 필자를 포함한 대부분의 개발자들은 회사에 고용되어 일을 하고 있다. 그런데 회사라는 조직이 개발자를 고용하는 이유는 무엇일까?</p>\n<p>당연히 여러분의 프로그래밍 스킬을 사용하여 돈을 벌기 위해서이다. 모두 알다시피 회사는 철저한 이익 집단이기 때문에 회사가 여러분에게 지급하는 연봉은 일종의 투자이다. 만약 회사가 여러분에게 3천만원의 연봉을 지급한다면, 당연히 회사는 최소 3천만원 혹은 그 이상의 가치를 가진 이익을 벌어다 주기를 바란다.</p>\n<p>그 말인 즉슨 개발자는 단순히 프로그래밍을 잘 해야 하는 사람이 아니라, 프로그래밍을 바탕으로 돈을 잘 만들어낼 수 있는 사람이어야 한다는 의미이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/eea4a/money.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAaGJnKKMj//EABoQAQEAAgMAAAAAAAAAAAAAAAECAxIEMTP/2gAIAQEAAQUCUnHVVqZROR5ZLdjr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRABAAIBBQEAAAAAAAAAAAAAAQACMQMQESFBkf/aAAgBAQAGPwJV4gJZtTLt17manyE//8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERMSFBof/aAAgBAQABPyGQwlqFuhihaaM0zafQ0noWus4f/9oADAMBAAIAAwAAABDTP//EABcRAAMBAAAAAAAAAAAAAAAAAAARIVH/2gAIAQMBAT8QaJh//8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8QGf/EAB4QAQACAQQDAAAAAAAAAAAAAAEAESExQWFxUYHB/9oACAEBAAE/EHRvrrHXMZgoAlFmWnOGmbMFwn3mVarAeBn04hh3NcjUUx2s9z//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"money\" title=\"\" src=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/c08c5/money.jpg\" srcset=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/0913d/money.jpg 160w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/cb69c/money.jpg 320w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/c08c5/money.jpg 640w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/6a068/money.jpg 960w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/eea4a/money.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>회사가 개발자를 채용하는 이유는 결국 돈을 만들어 내기 위해서이다</small>\n</center>\n<p>우리가 일하고 있는 IT업을 전통적인 제조업에 빗대어 생각해보면 개발자나 디자이너의 역할은 물건 만드는 장인이다. 단지 만들어 내는 것이 실물에서 소프트웨어로 변화했을 뿐이다. 그리고 장인은 단지 제품의 퀄리티만 신경쓰는 것이 아니라, 유저의 실제 만족도, 회사의 비즈니스적인 요구사항 등 많은 것을 동시에 책임져야하고 신경써야하는 사람이다.</p>\n<p>즉, 회사라는 이익 집단에는 그냥 프로그래밍만 잘 하는 사람보다는 프로그래밍을 이용해서 유저를 만족시킬 수 있고, 이에 따라오는 매출을 만들어 낼 수 있는 사람이 필요하다는 것이다.</p>\n<p>그렇기 때문에 많은 조직들이 좋은 장인들을 채용하기 위해 프로그래밍 스킬 외에도 원활한 제품 개발을 위해 필요한 이해관계자들과의 원활한 협업, 리더십, 비즈니스 인사이트, 유저 경험에 대한 이해 등 다양한 스킬을 요구하고 있는 것이다.</p>\n<p>게다가 원활한 협업 스킬이나 유저 경험에 대한 이해 같은 것들은 당장 돈이 되지는 않더라도 장기적으로 보면 회사의 브랜딩과 문화에도 큰 영향을 미치며, 결국 그 조직이 일하는 방식과 퍼포먼스까지도 변화시킬 수 있는 것들이기 때문에 제대로 된 조직이라면 이런 점을 소홀히 하지 않는다.</p>\n<p>즉, 개발자는 단지 프로그래밍을 하는 사람이 아니라 자신이 소속된 조직의 제품이 시장에서 성공하기 위해 달리는 많은 팀원들 중 하나라고 말할 수 있으며, 그렇기 때문에 개발자는 프로그래밍에만 집중하는 것이 아니라 전체적인 조직의 비즈니스 이슈들도 함께 볼 수 있는 넓은 시야를 가져야 한다.</p>\n<h3>왜 개발자들은 좋은 설계를 하려고 하는걸까?</h3>\n<p>사실 개발자로 일을 하다보면 내 자식같은 제품을 위해 시간을 들여서라도 좋은 설계를 하고 싶은 마음이 들 수 밖에 없다.</p>\n<p>개발자들은 경험적으로 지금 설계를 개판으로 해놓으면 그 부채가 언젠가 부메랑이 되어 반드시 돌아온다는 것을 알고 있다. 그 대표적인 예시가 개발자들 사이에서 흔한 밈으로 구사되고 있는 “레거시 코드”이다.</p>\n<p>프로그램의 흐름을 알아보기 힘들고 가독성이 떨어지는 코드는 잠재적으로 수 많은 버그의 가능성을 품고 있다. 심지어 버그가 발생해도 요상한 예외처리 때문에 버그 트래킹 툴에 잡히지 않는 경우도 허다하다. 결국 이렇게 잠재적인 버그를 품고 있는 설계는 유저에게는 큰 불편함으로 다가올 수 있으며 심한 경우에는 유저의 중요한 해피 모먼트를 해쳐 유저를 이탈시킬 수도 있다.</p>\n<p>더군다나 좋지 않은 설계를 개선하지 않고 그 위에 기능을 계속 붙힌다면 결국 좋지 않은 설계만 늘어날 수 밖에 없다. 개발은 매 기능을 만들 때마다 다 지우고 새로 시작하는 것이 아니라 이전에 만들어놓은 설계에 계속 이어 붙히는 것이기 때문이다.</p>\n<p>이렇게 한번 설계가 어긋나게 되면 작은 것 하나만 건드려도 예상하기 어려운 곳에서 버그가 발생하는 상황이 잦아지기 때문에 개발자는 더 신중해질 수 밖에 없고, 조직의 제품 개발 속도도 점점 느려진다. 심지어 나중에는 제품에 새로운 기능을 붙히고 싶어도 설계 때문에 정말로 불가능한 경우까지도 발생할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 327px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 156.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAL/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAP/2gAMAwEAAhADEAAAAW75jrwIlshSJkXJ/wD/xAAcEAEAAgIDAQAAAAAAAAAAAAABAgMAERASIRP/2gAIAQEAAQUCELd6k+r8c96ZKlUjvhsnuDIyNTI//8QAGREBAQADAQAAAAAAAAAAAAAAAQACERIT/9oACAEDAQE/ATBbzZ3dF//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPwGqxH//xAAcEAACAgMBAQAAAAAAAAAAAAAAARAREiFhUbH/2gAIAQEABj8CdmeNrsP05D2jUNZHwuz/xAAcEAEBAQACAwEAAAAAAAAAAAABEQAhMUFRoWH/2gAIAQEAAT8h/QjrUDqopcqMC+Dczb2995JV7aaO2aw7zFE8fdx7+aSrtN3ictyxEXxN/9oADAMBAAIAAwAAABCg6v7/xAAcEQACAgIDAAAAAAAAAAAAAAAAAREhMUFxkfD/2gAIAQMBAT8QyFcjS4IUpd6HNb90f//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPxBA3TimGrf/xAAfEAEAAwACAgMBAAAAAAAAAAABABEhMUFRYXGR8MH/2gAIAQEAAT8QRByImI31BIZqwejD1cuig+CYAcqNfxzE3a7V7+pXywwZQ9B3PcRqsKJqDjnmV5/z5iyo6hhb3VzaSDln5Mgt+N2Naz//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no\" title=\"\" src=\"/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg\" srcset=\"/static/4ae506992fda7327aecbb04a40446576/0913d/no.jpg 160w,\n/static/4ae506992fda7327aecbb04a40446576/cb69c/no.jpg 320w,\n/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg 327w\" sizes=\"(max-width: 327px) 100vw, 327px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>1년 전에 짠 내 코드를 보는 나의 심정...</small>\n</center>\n<p>결국 개발자들이 좋은 설계를 하려는 이유는 제품의 코드 퀄리티를 높혀 빠른 개발 속도를 유지하고 예상하기 힘든 버그를 예방하기 위해서이다. 하지만 앞서 이야기했듯이 좋은 장인은 단지 프로그래밍만 바라보는 것이 아니라 비즈니스까지 포괄하는 넓은 시야를 가질 수 있어야 한다. 개발자는 결국 제품을 만들어서 유저에게 제공하는 사람들이기 때문이다.</p>\n<p>유저에게 초점을 맞춰서 다시 생각해보면, 결국 개발자들이 좋은 설계를 하는 이유는 빠른 개발 속도를 유지함으로써 유저들에게 늘 빠른 속도로 개선된 제품을 제공할 수 있는 환경을 구축하고, 알 수 없는 버그로 인해 유저들이 이상한 경험을 하지 않게 하기 위한 것이라고 말할 수 있다.</p>\n<blockquote>\n<p>즉, 좋은 설계를 하는 것은 <strong>유저의 좋은 경험</strong>을 위한 것이다</p>\n</blockquote>\n<p>하지만 잘 생각해보면, 개발자가 유저의 좋은 경험을 위해 할 수 있는 것은 좋은 설계만 있는 것이 아니다. 좋은 설계라는 것은 유저에게 좋은 경험을 선사하기 위해 할 수 있는 수 많은 방법 중에서 하나일 뿐이기 때문이다. 좋은 개발자는 이런 여러가지 선택지 중에서 현재 상황에서 가장 적은 비용으로 최대의 이익을 가져올 수 있는 방법을 선택할 수 있어야한다.</p>\n<h3>우리는 방망이 깎던 노인이 아니다</h3>\n<p>흔히 장인 정신이라고 하면 대표적으로 이야기가 나오는 밈 중에 ”<a href=\"https://brunch.co.kr/@fishz/393\" target=\"_blank\" rel=\"nofollow\">방망이 깎던 노인</a>“이라는 수필이 있다. 이 수필은 중학교 국어 교과서에도 실려있기 때문에 대부분 한번 쯤은 읽어본 기억이 날 것이다.</p>\n<p>이 포스팅에 모든 내용을 작성하기에는 꽤나 내용이 길지만, 대략적으로 간추려 보자면 이런 내용이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAG8d2KrhNLQIR//xAAbEAEBAAIDAQAAAAAAAAAAAAABAgADEBESIf/aAAgBAQABBQJVdfuWKfMtU9UZWxmq+YvH/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEQAhESIWFR/9oACAEBAAY/AnodWL5D8Fi+Fman/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSFhgf/aAAgBAQABPyEo6C9yXlQmCIF8fY5N/EQZDgjpLYnZIlawn//aAAwDAQACAAMAAAAQj8gD/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQMBAT8QY//EABYRAAMAAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxAKP//EAB0QAQACAgMBAQAAAAAAAAAAAAEAESExQWGBkbH/2gAIAQEAAT8QrLumiDErcm2DO/I1A5DBhhBKW7nX2/JgJuBTYfkoGDsK4l8srsa5iTi3pqErNva3P//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"batman\" title=\"\" src=\"/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg\" srcset=\"/static/cd2e52ab949020fabea93b1cb50994d7/0913d/batman.jpg 160w,\n/static/cd2e52ab949020fabea93b1cb50994d7/cb69c/batman.jpg 320w,\n/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p><em>어느 날 동대문을 지나다가 길에서 방망이를 깎아 파는 노인에게 방망이를 한 벌 사려고 한다. 근데 이 노인이 가격을 꽤나 세게 불러버림…</em></p>\n<p><strong>주인공:</strong> “어르신 좀 싸게 해주세요”</p>\n<p><strong>노인:</strong> “방망이 하나 가지고 뭔 에누리? 그냥 다른데 가서 사”</p>\n<p><strong>주인공:</strong> “엥 그럼 그냥 살테니까 잘 깎아나 주세요”</p>\n<p><em>그 후 노인이 방망이를 깎는 것을 지켜보고 있자니, 뭔 놈의 늑장을 이렇게 부리는지 답답하다. 아니 내가 볼 땐 다 된 것 같은데, 왜 계속 깎고 있는거야…? 시간도 없구만…</em></p>\n<p><strong>주인공:</strong> “이제 된 것 같은데 그냥 주세요”</p>\n<p><strong>노인:</strong> “끓을 만큼 끓어야 밥이 되지, 생쌀이 재촉한다고 밥이 되나”</p>\n<p><strong>주인공:</strong> “아니 사는 사람이 괜찮다는데 왜 그러세요…저 이러다가 차 놓쳐요”</p>\n<p><strong>노인:</strong> “아 그럼 그냥 다른 데 가서 사”</p>\n<p><strong>주인공:</strong> “후…그럼 그냥 한번 마음대로 깎아보세요”</p>\n<p><strong>노인:</strong> “재촉하면 할수록 늦어지니까 그냥 가만히 기다려봐”</p>\n<p><em>결국 차는 놓치고 기분도 잡쳤음. 손님 생각은 하나도 안하고 자기 멋대로인데 이 따위로 장사를 해서 장사가 잘 될 턱이 없지.</em></p>\n<p><em>…라고 생각했지만 나중에 살펴보니 방망이 퀄리티가 장난이 아님…</em></p>\n</blockquote>\n<p>대충 이런 내용인데, 마지막에는 장인의 깊은 뜻을 헤아리지 못한 주인공이 노인에게 찾아가서 사과하고 싶다는 말로 끝맺는다.</p>\n<p>이 수필이 주는 교훈을 딱 한 마디로 줄여보자면 “장인정신에 대한 존중”이기에 뭔가를 만들어내는 사람들이 가져야하는 마인드의 예시로 꽤나 자주 인용되고 있다.</p>\n<p>작품 속 노인은 자신의 방망이 깎는 스킬에 대한 자부심이 큰 사람이다. 아마 오랫동안 이 업을 해왔을 것이고, 그렇기에 이 일에 대한 자신의 신념이나 가치관 같은 것도 명확할 것이다. 그리고 이런 점은 개발 업계에서 오랫동안 굴러온 개발자들도 딱히 다르지는 않을 것이라고 생각한다.</p>\n<p>하지만 이 훈훈한 이야기와 현실 사이에는 결정적인 차이가 한 가지 있다. 이 노인은 애초에 자기 신념과 맞지 않는 사람에게는 물건을 팔 마음이 없었다는 점이다. 이건 마치 유저들이 “아니, 이 앱은 왜 이렇게 패치가 느려?”라고 하는 상황 속에서 개발자가 “난 꼼꼼하게 좋은 설계를 해야하는게 중요하니까 이게 싫으면 다른 앱 쓰세요.”라고 하는 것과 다를 바가 없다.</p>\n<p>이렇게 생각해보니 이 노인이 더 이상 프로페셔널한 장인으로 보이지는 않는 것 같다. 진짜 프로페셔널이라면 유저가 원하는 시간 안에 최대한의 퀄리티를 뽑아내어 유저도 만족하고 나도 만족할 수 있는 방법을 찾아야하는 것 아닐까?</p>\n<p>작품 속의 주인공은 노인이 방망이를 깎는 모습을 보면서 “이 정도면 다 된 것 같은데 왜 계속 하는거지?”라는 불만을 품는다. 결국 노인을 개발자라고 생각하면 작품 속 주인공은 유저들이다.</p>\n<p>그리고 이 착한 주인공과 다르게 유저들은 “왜 이래?”라는 생각을 하는 순간 더 이상 기다려주지 않으며, 개발자가 열심히 설계한 제품의 퀄리티를 보면서 감탄하지도 않는다. 유저들은 뭔가 이상하다고 생각이 드는 순간 여러분의 제품을 버리고 다른 제품을 사용할 것이기 때문이다.</p>\n<h2>비즈니스와 좋은 설계의 균형을 찾아보자</h2>\n<p>앞서 이야기했듯이 결국 개발자들은 비즈니스적인 요소까지 고려하면서 동시에 어플리케이션의 좋은 구조까지 고민해야 하지만 많은 개발자들이 좋은 설계에 대한 기술적인 공부에 비해 정작 비즈니스에 대한 고민은 많이 하지 않는다.</p>\n<p>개발자들이 생각하는 일 잘 하는 개발자는 프로그래밍을 잘하는 사람, 조금 더 넓게 보면 다른 개발자를 끌어줄 수 있는 능력이 있는 사람 정도인 경우가 많다. 그래서 우리는 일 잘하는 개발자가 되기 위해 함수형 프로그래밍 같은 패러다임이나 각종 디자인 패턴과 가이드라인들을 공부하고 실무에 녹이기 위해서 노력한다.</p>\n<p>하지만 필자가 생각했을 때 진짜 일을 잘 하는 개발자의 조건 중 하나는 저런 것도 다 하면서, 비즈니스적인 인사이트까지 있는 사람이라고 생각한다. 아니, 그 외에도 다양한 소프트 스킬을 모두 가지고 있어야 한다고 생각한다. 여러 번 이야기했듯이 개발자는 현실과 동떨어져 컴퓨터와 단 둘이 프로그래밍만 하는 사람이 아니기 때문이다.</p>\n<p>사실 필자가 이야기하려고 하는 좋은 설계라는 것은 단순히 중복되는 로직을 추상화하여 분리하거나 변경과 확장이 용이한 패턴을 사용하는 것이 아니다. 상황에 따라서는 기존에 존재하는 코드를 그냥 복붙하는 것이 좋은 설계일 수도 있으며, 매우 급박한 상황이라면 설계고 자시고 일단 작동만 가능하게 만들어서 배포하는 것이 좋은 설계일 수도 있다.</p>\n<h2>이게 정말 설계를 고민할 가치가 있을까?</h2>\n<p>사실 어플리케이션을 설계할 때 가장 선행되어야 할 고민은 바로 **“이게 정말 설계를 고민할만한 가치가 있는가”**이다. 이게 설계를 할만한 가치가 있는 것이라고 판단이 되면 그때부터 제대로 된 설계에 대한 고민을 시작하는 것이 맞다.</p>\n<p>기본적으로 어플리케이션의 튼실한 설계는 당장의 단기적인 이익보다는 장기적인 관점에서의 이익으로 돌아올 가능성이 높기 때문에 내가 설계를 위해 투자하는 이 시간이 미래에 이익으로 돌아오지 못할 가능성이 더 크다면 그냥 설계를 대충 해버리고 일단 빠르게 기능을 만들어서 배포하는 것이 더 나을수도 있기 때문이다. 비즈니스는 항상 Cost vs Benefit이다.</p>\n<p>설계를 고민하는 시간에 무슨 코스트가 들어가냐고 할 수도 있지만 잘 생각해보면 분명히 소모되는 코스트는 존재한다. 여러분의 인건비 및 서버비, 사무실 월세 등 아무것도 하지 않고 시간만 흘러도 회사 통장에서 돈은 매일 줄줄 새나간다.</p>\n<p>특히 인건비 같은 경우는 의외로 많은 분들이 놓치고 있는 부분인데, 이게 은근히 돈이 많이 나간다. 지금 각자 계산기를 켜서 <code class=\"language-text\">내 하루 일당 x 팀 인원 수</code>를 계산해보자. 한 팀에 연봉 3천만원을 받는 사람이 5명만 있어도 하루에 52만원 정도는 그냥 깨져나간다.</p>\n<p>즉, 기능 하나를 만드는 데 5일이 걸렸다면 회사는 그 개발 비용으로 대충 <code class=\"language-text\">260만원 + @</code>를 지출하게 되는 것이다. 이 플러스 알파에는 아까 이야기했던 사무실 월세나 서버비 등이 포함되어있다.</p>\n<p>물론 이 기능을 배포해서 중요한 전환률이 더 줄었다면 손해액은 더 커진다. 이게 바로 회사가 제품을 개발할 때 감수해야하는 리스크이다. 게다가 A/B테스트라도 한다고 치면 지금 내가 만드는 이 기능은 일주일도 안 되서 지워질 운명일 수도 있다.</p>\n<p>이런 상황 속에서 무조건 설계를 한다고 시간을 잡아먹는 것이 반드시 정답은 아니다. 즉, 우리는 “설계를 어떻게 해야할까”를 고민하기 전에 “이게 정말 설계를 할만한 가치가 있나”부터 고민을 시작해야 하는 것이다.</p>\n<h3>튼튼한 설계보다 빠른 개발 속도가 중요할 때</h3>\n<p>사실 개발자로 일하다보면 빠른 시간 안에 제품을 개발해야하는 상황을 한번 쯤은 마주치기 마련이다. 이때 빠르게 개발해야 하는 이유는 단순히 클라이언트의 요구일수도 있고, 이제 막 시작하는 스타트업이라 빠르게 마켓 핏을 찾아야 하는 상황이거나, 혹은 정말로 회사 통장에 돈이 없어서 오늘 내일 하는 상황일수도 있지만 중요한 것은 이유가 아니라 어쨌든 빨리 제품을 개발해야 한다는 것이다.</p>\n<p>이런 상황 속에서 개발자들은 시간이 조금 들더라도 튼튼한 설계를 하고 넘어갈지, 아니면 일단 대충이라도 빠르게 만들어서 일단 배포를 할 지에 대한 고민에 빠지게 된다.</p>\n<p>물론 개발 실력이 늘면 늘수록 <small><del>(그 동안 삽질하며 익힌)</del></small> 짬에서 나오는 바이브가 있기 때문에 대충 설계했을 때의 코드 퀄리티 또한 점점 높아지기 마련이지만, 아직 경험이 부족한 개발자라면 정말 이해하기 힘든 코드가 나올 수도 있다.</p>\n<p>앞서 이야기했듯이 개발자 눈에는 지금 설계를 제대로 해놓지 않으면 나중에 기술 부채가 되어 돌아올 부분들이 빤히 보인다. 게다가 장기적인 관점에서 봤을 때 설계를 계속 개판친다면 어플리케이션의 복잡도는 점점 기하급수적으로 증가할 것이고, 그러면 나중에는 기능을 붙히고 싶어도 못 붙히는 상황도 발생할 수 있다.</p>\n<p>여기까지 생각이 든 개발자는 결심을 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvUlEQVR42m2Sy27TUBCGTbsAVix5CXa8QRX6DJXYIlW8AIgNG6SUqkVIqKgIumBVCbFIEUKC9AYtadImqdNc2iZ1rk0dO7F9fGzHPj7H9mGaqFJBjHwZyefzP/PPCGrbUDtIbupirqRpA855tVrdz6SLhYIoFtPbifWPj4823lb2fyRf3RMXhbW5+81623UcGyNhIGNNxoZq57NiEDCAPc/r9ZQwoJAPSiuFeaH0enJvbrL0ZqL+4cbOC+HkcJvzcOgYgqFaFrLc4bBWq9XrUhAEfBSM0YjzoVasLN85Xpqovb99snwrvyhsvZvGeBAw7BNTGPQw0q2hY/vEPdjP2LZtmiYDlNKAXYqj2mp56eYh6C8IW/G77U4DiqMUMWoJpu5gZDu2xaibzR6EYaTreqvVsiwL6qfUxw6TSknxy5P2t4f5z49abYlz16egDLBmQ/NR5A8GF6m9lIlxPB6fnZ2tVCrj+pVe9+X8wtNnzw0Tyz2lXBY5J74PsC3oqmUizDk9rZabZxLB1szMzNTUlCRJY1hV1VgsNv0g1pIkRkgqtUMpZoHNGCgb2HMdzzOzhRz5/stZWe02Gl1Z5lHkjiKKIvjR8ekp/vSVrSXzYs73zSCw4RIIccDa7kUjnUlzz2c6CqNwPDBoXtO0Me9TSvqDUDcLhUOfmkEIsCW4Lrxcw1A2NzeAgfFEVzEu+3oeBOHu7k/KMMgygPtKHxkIViK5njzvdOBECI6PIrwKyMfzz+Vy6cwuGAT8Zc9IsyzThvvoqNAZwdH/gl8SNJFIdDpgJAFZsE3Q+4h4nix3mk2YPoc+ocl/fgGyiqLAE77W69UgcAhBI2Wke56jqt1SqQgMOAQnrhcPOSEEYEhgc1qtM0aHCCkIyYJ80TV0nXhuKvUbFhNkHcfhf9vm+36/r0LS68mKek4IbKRp6L0/bsQb8xWjcbQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decision\" title=\"\" src=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png\" srcset=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/69538/decision.png 160w,\n/static/bae1f9c188c8a245cf34964e67bf7c2a/72799/decision.png 320w,\n/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\"그래, 아무리 그래도 설계를 포기하는 건 좀 아닌 것 같아. 기간에 대한 협의를 해봐야겠다...!\"</small>\n</center>\n<p>물론 개발자로써 이런 생각이 드는 것은 너무나도 당연하다. 하지만 중요한 것은 현재 개발을 빨리 해야하는 지금 이 상황이 정확히 어떤 상황인지 파악을 해야 한다는 것이다.</p>\n<p>만약 단순히 PO나 클라이언트가 성격이 급해서 개발 기간을 짧게 산정한 것이라면 당연히 협의를 해볼만한 여지가 있겠지만, 당장 투자를 앞두고 있어서 서둘러 마켓 핏을 찾고 매출 그래프를 이쁘게 그려야하는 등의 급박한 비즈니스 이슈가 있을 수도 있다면 이건 그렇게 좋은 판단은 아니라고 할 수 있다.</p>\n<p>개발자가 아무리 나중을 생각하고 좋은 설계를 한다고 해도 당장 다음 달에 회사가 돈이 없어서 망한다면 결국은 사라지는 코드들이다. 결국 개발자가 회사라는 조직에 소속되어 프로그래밍을 하고 있는 이상 개발자가 생산한 산출물의 목숨줄도 결국 회사 통장의 잔고에 달려있다는 것이다.</p>\n<p>그렇기 때문에 아무리 개발자가 프로그래밍을 주 업무로 삼는 직군이라고 해도 프로그래밍에 대해서만 생각하는 것이 아니라 항상 비즈니스적인 관점에서도 현재 만드는 기능을 바라보고, 경우에 따라서는 설계를 대충 하더라도 지금 당장 빠르게 제품을 개발해서 테스트해보고 마켓 핏을 찾아 유저의 해피 모먼트를 만들고 <code class=\"language-text\">AMPU(Average Margin Per User)</code>를 높히는 것에 집중하는 것이 더 효율적이라는 판단 또한 내릴 수 있어야 한다.</p>\n<p>차라리 이런 상황이라면 어느 정도 설계를 뭉개고 빠르게 개발을 진행하되, 뭉개진 설계로 인해 발생할 수 있는 리스크를 최대한 예측하고 유저의 중요한 액션을 방해할 가능성이 있는 에러를 최대한 핸들링하거나, 혹여나 놓친 에러를 빠르게 대응할 수 있도록 <a href=\"https://sentry.io/welcome/\" target=\"_blank\" rel=\"nofollow\">Sentry</a>나 <a href=\"https://www.bugsnag.com/\" target=\"_blank\" rel=\"nofollow\">Bugsnag</a> 같은 에러 모니터링 솔루션을 도입하고 슬랙같은 사내 메신저에 노티를 와장창 걸어놓는 것이 나을 수도 있다. <small>(물론 버그 픽스는 몸으로 때워야 한다)</small></p>\n<h3>지워야 하는 기능을 만들 때도 있다</h3>\n<p>그리고 가끔은 지워야 하는 기능을 만들어야 하는 경우도 있을 수 있다. 이게 무슨 의미일까? 결국 새로운 기능이라는 것은 제품을 더 업그레이드해서 유저들에게 제공하기 위한 것인데, 지워야 하는 기능이라는 게 있을 수 있나?</p>\n<p>있다. 바로 A/B 테스트를 해야하는 상황이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/62091fb4f8accc0f63f209ba823f6b3a/37523/abtest.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6klEQVR42lWT7VPSWRTH+XP6F/ZVL5t9tzW9aF/s7pTVNtNm7To7Nk0ztTOkm5VNlpMo0WYGiSKBSGNiyrMKiCBhKaCJpIACIkLy4GcvP7Op78ydc873nHvumXPOlSGwv79fF6ylMlx++JzSXlmyD9jvUfsS2/fGyenbPaylM9/xsmqtxl6lIhlDdg+/tCiY8Iclu87X/Yeo6+VqVdKfjdo509ZDNJGS7DpfrdaQHVR4cGF9K0cmXyCV3eZb/lscUvXK5mMJNgufSBVWvvplFl8IzbgLnXWGYYcPk8OLYSbI4Mw86nE348J/iLezYdQWJzrbDEaXl9HpME+ct3nsbhSxdsa875BpLS7im9vEMwVi2V2ixQoJp4/kkJl4Io1BPPBZ9LRSqWK0elhN50R8gZWNHdHzGgOB+3S4G1hObaK1uJEN2Txs7ZYZtM2h15h5PWzFcO8J0VMXSK+sY/KGpIRlkdA8NUcyX6LfNYvirQm1y4Lc+IB2ayNruQx6u09UODFFtlTlqnKEkz/+zoXfrnPmrBz/iQbS0TiG6SClz3vSgIyi8vR2ib9eGDnSfJ6jbX/zQ+s15GOXWN1KMTDpQTY4Oc3uXo2eyQDHbqn46ZGehscGlu91k93IYBL9PKxwxO1nu1RGORHgeEsfP983cLpbj/5dL8mdvJiDSNjeP4IjuIgzuMRmNi81PymmbX3/EUcoQodulI1MjnQuL+m2+Q+4whFSuYNNSIqNsAWXsYeWuKs1I2t9aeapw8+DUQeXlAP8qdJxsVtL55gLlejJv/1mPAtRfIvLtGleo34zi9I0xZUOLc1depo6dXS9cqAZ8wu/SLj+PkLkoYqYUk2kT8eCOHUZ6+olqnhOIrJC9csCfvgUQetToJ9TYQpoGJrtY1jIV4H/0HgfsbQREz9lYZFiw2WKV65TvHmHkryd4j93KV5spvjHVWof41+XeX1nEYX3HE/9jejCcgZCN9CK0zvXROf0ryQLMf4HVsAs8PYe3D0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"abtest\" title=\"\" src=\"/static/62091fb4f8accc0f63f209ba823f6b3a/6af66/abtest.png\" srcset=\"/static/62091fb4f8accc0f63f209ba823f6b3a/69538/abtest.png 160w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/72799/abtest.png 320w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/6af66/abtest.png 640w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/37523/abtest.png 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A/B 테스트는 특정 실험군에 기존 UI/UX와 새로운 UI/UX를 함께 배포한 후<br>지표를 비교하고 이긴 쪽을 선택해서 남기는 개발 방법론이다.</small>\n</center>\n<p>예를 들어 현재 우리 서비스의 상품 결제 페이지 내의 결제 전환률이 <code class=\"language-text\">10%</code> 라고 생각해보자. 그래서 우리는 이 전환률을 끌어올리기 위해 결제 버튼을 더 크고 우람하게 만들고 눈에 더 잘 띄도록 <code class=\"language-text\">#ff0000</code> 라는 과감한 색도 추가했다. 물론 이 결정은 그냥 대충 정한 것이 아니라 PO와 UI/UX 디자이너의 인사이트와 그 외 팀원들의 엄청난 토론과 논쟁, 그리고 고민 끝에 내려진 결정이다.</p>\n<p>자, 그러면  이제 치열한 고민 끝에 결제 버튼이 유저들의 눈에 더 잘 띄게 만들었으니 결제 전환률이 올라갈까? 정답은…</p>\n<center>\n.<br/>\n.<br/>\n.<br/>\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 268px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe7lSWD/xAAXEAADAQAAAAAAAAAAAAAAAAAAAREg/9oACAEBAAEFAqLP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESFBYf/aAAgBAQABPyGmIyTbYEBE8b//2gAMAwEAAgADAAAAEAMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITEQQVH/2gAIAQEAAT8QKAGNTeErao8dHsEwEumwWJ//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"i dont know\" title=\"\" src=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg\" srcset=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/0913d/i_dont_know.jpg 160w,\n/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg 268w\" sizes=\"(max-width: 268px) 100vw, 268px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>ㅇㅇ 아무도 모름</small>\n</center>\n<p>사실 어떤 기능을 만들고 유저들에게 공개했을 때 유저들이 어떻게 반응할 지는 아무도 모른다. 유저는 페이지에 들어간 문구 하나만 변경되어도 갑자기 이탈해버리는 기상천외한 존재이기 때문이다. 그렇다고 아무거나 만들어서 일단 배포하자니 앞서 이야기했던 인건비나 서버비 등 금전적 리스크가 너무나도 크다.</p>\n<p>그래서 많은 조직들은 이 리스크를 줄이는 방법으로 A/B 테스트를 선택하는 것이다. 결국 아무리 뛰어난 사람들이 모여서 하루 종일 논의를 하고 고민을 하더라도 결국은 “우리 유저는 이렇게 행동할거야!”라고 예측하는 것에 불과하다.</p>\n<p>즉, 제품을 배포해서 직접 유저가 사용하는 패턴을 관측하고 분석하기 전까지는 어떤 의견이든 결국 뇌피셜일 뿐이기 때문에 이런 테스트를 돌리는 것이다.</p>\n<p>만약 테스트를 배포한 뒤 기존 화면인 Control에서 더 결제 전환률이 높다면 우리는 과감하게 새로 만든 Variant를 버리면 되고, 새로 만든 Variant가 더 전환률이 높다면 Control을 버리면 된다. 이로써 우리는 이번에 개선한 결제 버튼이 잘 작동하든 안 하든간에 최소한의 리스크만 가져가면서 안전하게 전환률을 상승시킬 수 있다.</p>\n<p>또한 효과적인 데이터 분석을 위해서는 변인을 최대한 통제해야 한다. 이것저것 다 바꾼 다음에 테스트를 돌려서 지표가 좋게 나왔다고 해도 우리가 바꾼 것들 중에서 정확히 무엇 때문에 유저가 이런 행동을 했는지 파악하기가 어렵다면 테스트 자체가 의미없어지기 때문이다.</p>\n<p>그래서 A/B 테스트를 적용할 때는 대부분의 기능은 똑같이 두고 확인하고자 하는 부분에만 집중해서 조금만 변경해보는 경우가 많다. 그렇다는 말은 A/B 테스트를 적용하기 위해 코딩을 하다보면 Control과 Variant 간의 공통적인 로직이 많이 나올 수 밖에 없다는 의미이다.</p>\n<p>그래서 어떤 개발자들은 이 공통적인 부분을 추상화하여 효율적인 설계를 하기도 한다. 하지만 여기서 함정이 하나 있다.</p>\n<blockquote>\n<p>둘 중에 하나는 결국 <strong>지워야한다</strong></p>\n</blockquote>\n<p>사실 기존에 만들어 놓은 설계에 이 테스트를 녹이기 위해서 공통된 부분을 추상화하거나 반복되는 코드를 줄인다고 별도의 모듈로 와장창 분리한다거나 하면 오히려 테스트 기능을 지워야할 때 신경써야 하는 부분이 더 늘어나게 되고, 여기서 발생한 실수로 인해 오히려 예상하지 못한 버그를 만들어 버릴 수도 있다.</p>\n<p>게다가 A/B 테스트를 하는 경우에는 정말 사소한 부분까지 동일한 경우가 많고 이런 부분들을 아무리 열심히 추상화해도 정작 테스트가 끝나고 나서 어느 한 쪽을 지우고 나면 의미없는 추상화로 남게되는 경우도 있다.</p>\n<p>그래서 A/B 테스트는 최대한 지우기 쉽게 만들어야 하는 것이다. 이 테스트를 위해 작성하는 코드는 계속 유지보수해야하는 대상이 아니라 결국 길어야 일주일 정도의 테스트가 끝나면 지워질 녀석들이다.</p>\n<p>어차피 Git이 있으니까 마스터 브랜치에 머지했던 커밋을 그냥 리버트하면 되지 않냐고 할 수도 있지만, 그건 기존 기능인 Control이 이겼을 때는 가능할 지 몰라도, 이번에 새로 추가한 기능인 Variant가 이긴다면 리버트 또한 써먹지 못 한다.</p>\n<p>사실 이런 경우에는 추상화고 나발이고 그냥 같은 페이지를 똑같이 한 벌 복사해서 A/B 테스트 변수에 따라 <code class=\"language-text\">/test-page/a</code>나 <code class=\"language-text\">/test-page/b</code>로 랜딩되도록 만들고, A/B 테스트 후 결과가 나오면 그냥 테스트에서 진 페이지 하나를 깔끔하게 날려버리는 것이 오히려 더 좋은 설계일 수도 있다는 것이다.</p>\n<p>만약 이런 비즈니스 상황들을 고려하지 않고 프로그래밍만 바라보는 좁은 시야로 개발을 한다면 아무리 설계를 잘 했다고 해도 오버엔지니어링이라는 피드백만 받는 눈물나는 상황이 발생할 수도 있다.</p>\n<h2>마치며</h2>\n<p>이번 포스팅에서는 비즈니스와 어플리케이션 설계의 관계에 대한 이야기를 했는데, 사실 이런 내용들은 조금 경험이 많으신 개발자들은 대부분 아는 내용일 것이라고 생각한다.</p>\n<p>하지만 개발자로 일을 시작한 지 얼마 안 된 분들의 경우에는 넘치는 열정이 어플리케이션의 구조 개선이나 새롭고 효율적인 기술의 도입 같은 프로그래밍과 관련된 일에만 쏠리는 경우가 왕왕 있다. 사실 필자도 처음 개발자로 일을 시작했을 때 이런 비즈니스 적인 요소들을 전혀 고민하지 않고 레거시를 전부 리팩토링 해야한다고 이야기했다가 조금 더 시야를 넓게 가지라는 피드백을 받기도 했었다. <small>(부끄럽지만 당시에는 그 분이 꼰대라고 생각했다…)</small></p>\n<p>물론 필자도 개발자이기 때문에 변경에 열린 구조, 관심사가 명확한 모듈들, 사이드 이펙트가 없는 함수 같은 것들에 열광한다. 하지만 어찌 되었든 회사에 고용되어 수많은 이해관계자들과 내 제품을 사용하는 유저와 얽혀있는 몸이기 때문에, 현실적으로 이런 것들을 전혀 고려하지 않고 내가 하고 싶은 것들을 하기는 힘들다.</p>\n<p>개발자가 좋은 설계와 기술 부채 청산을 중요하게 생각하는 만큼 디자이너는 UI/UX를 중요하게 생각하며 CEO는 경영을 중요하게 생각한다. 그리고 결정적으로 유저는 자신이 이 서비스를 사용하며 느끼는 경험들만 중요하게 생각한다.</p>\n<p>이렇게 모두 다 각자 중요하게 생각하는 가치가 다르기 때문에 개발자로써 어플리케이션만 생각하는 좁은 시야를 가지면 안 된다는 것을 이 포스팅을 통해 이야기하고 싶었다.</p>\n<p>이상으로 일 잘 하는 개발자는 왜 비즈니스까지 신경쓸까? 포스팅을 마친다.</p>","fields":{"slug":"20201024-buisiness-with-programming","path":"/2020/10/24/buisiness-with-programming/","lang":"ko"},"frontmatter":{"title":"일 잘 하는 개발자는 왜 비즈니스까지 신경쓸까?","date":"2020-10-24","categories":["에세이"],"tags":["좋은 설계","잘하는 개발자","스타트업","비즈니스"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#98c8f8","images":{"fallback":{"src":"/static/98be92b406bd23618e3ed1e3eecb9ada/3a812/thumbnail.jpg","srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/1cda5/thumbnail.jpg 80w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/b1a47/thumbnail.jpg 160w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/3a812/thumbnail.jpg 320w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/3e5ca/thumbnail.webp 80w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/b72f1/thumbnail.webp 160w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/fc5c5/thumbnail.webp 320w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#98c8f8","images":{"fallback":{"src":"/static/98be92b406bd23618e3ed1e3eecb9ada/ad415/thumbnail.jpg","srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/23110/thumbnail.jpg 750w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/da421/thumbnail.jpg 1080w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/a2093/thumbnail.jpg 1366w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/ad415/thumbnail.jpg 1696w","sizes":"100vw"},"sources":[{"srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/6858b/thumbnail.webp 750w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/f5547/thumbnail.webp 1080w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/29310/thumbnail.webp 1366w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/528cf/thumbnail.webp 1696w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"regex","totalCount":2,"nodes":[{"id":"a24d87ce-d247-51be-a7c7-279b2b311348","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B7%9C%EC%8B%9D%EC%9D%B4%ED%98%95-%EB%84%8C-%EB%88%84%EA%B5%AC%EB%83%90\">규식이형, 넌 누구냐?</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8-%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EA%B8%B0%EB%8A%A5%EB%93%A4\">기본적인 정규식의 기능들</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B9%EC%A0%95-%EB%AC%B8%EC%9E%90%EC%9D%98-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%BA%90%EB%A6%AD%ED%84%B0-%ED%81%B4%EB%9E%98%EC%8A%A4\">특정 문자의 그룹을 잡아내는 캐릭터 클래스</a></li>\n<li><a href=\"#%EB%AC%B8%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B2%BD%EA%B3%84%EB%A5%BC-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%95%B5%EC%BB%A4\">문자가 아닌 경계를 잡아내는 앵커</a></li>\n<li><a href=\"#%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EC%98%B5%EC%85%98-%EA%B8%B0%EB%8A%A5-%ED%94%8C%EB%9E%98%EA%B7%B8\">정규식의 옵션 기능, 플래그</a></li>\n<li><a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%B4-%EB%AA%87-%EB%B2%88%EC%9D%B4%EB%82%98-%EB%82%98%EC%99%94%EB%8A%94%EC%A7%80-%EC%B0%BE%EC%95%84%EC%A3%BC%EB%8A%94-%EC%88%98%EB%9F%89%EC%9E%90\">패턴이 몇 번이나 나왔는지 찾아주는 수량자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%8C%EB%A9%B4-%EB%8D%94-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EA%B8%B0%EB%8A%A5%EB%93%A4\">알면 더 효율적인 기능들</a></p>\n<ul>\n<li><a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%84-%EA%B8%B0%EC%96%B5%ED%95%98%EB%8A%94-%EC%BA%A1%EC%B2%98%EB%A7%81\">패턴을 기억하는 캡처링</a></li>\n<li><a href=\"#greedy-vs-lazy\">Greedy vs Lazy</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"개발자들은 자연어로 주어지는 문제 상황을 파악하고 프로그램을 설계하고 작성하는 사람들이다. 이런 업무를 수행하기 위해 개발자들은 불규칙하게 쏟아지는 정보들 속에서 필요한 부분들을 걸러내거나 무분별하게 선언된 클래스나 변수들을 추상화하는 등의 업무를 수행하게 된다. 이러한 일들을 해내기 위해 필요한 역량은 여러가지가 있겠지만 그 중에서도 특히 중요한 한 가지 역량은 바로 불규칙해 보이는 정보들 속에서 규칙성, 즉 패턴을 찾아내는 능력이다. 그 중에서도 일반적인 비즈니스 상황에서 접할 수 있는 가장 흔한 문제는 파일을 파싱하거나 사용…","html":"<p>개발자들은 자연어로 주어지는 문제 상황을 파악하고 프로그램을 설계하고 작성하는 사람들이다. 이런 업무를 수행하기 위해 개발자들은 불규칙하게 쏟아지는 정보들 속에서 필요한 부분들을 걸러내거나 무분별하게 선언된 클래스나 변수들을 추상화하는 등의 업무를 수행하게 된다.</p>\n<p>이러한 일들을 해내기 위해 필요한 역량은 여러가지가 있겠지만 그 중에서도 특히 중요한 한 가지 역량은 바로 불규칙해 보이는 정보들 속에서 규칙성, 즉 패턴을 찾아내는 능력이다.</p>\n<p>그 중에서도 일반적인 비즈니스 상황에서 접할 수 있는 가장 흔한 문제는 파일을 파싱하거나 사용자의 입력을 검증하거나 하는 경우처럼 불규칙한 문자열 속에서 패턴을 찾아내어 원하는 정보를 취득하는 경우가 많다. 그러나 이런 문제는 경우의 수가 워낙 많기 때문에 일반적인 프로그래밍만으로 문제를 해결하려고 하면 화려한 <code class=\"language-text\">if</code> 문이 나를 감싸는 상황을 만날 수도 있다.</p>\n<p>바로 이런 문제를 쉽게 해결할 수 있도록 도와주는 도구가 정규식이다.</p>\n<h2>규식이형, 넌 누구냐?</h2>\n<p>정규식의 정식 풀네임은 정규 표현식(Regular Expression)이지만, 사실 정규 표현식이라는 풀네임보다는 정규식, Regex, <del>규식이형</del> 등으로 더 자주 불리고는 한다.</p>\n<p>정규식은 패턴을 표현할 수 있는 일종의 표현식이고 이 표현식을 문자열에 적용하여 원하는 부분을 쏙쏙 끄집어 낼 수 있는 굉장히 편리한 도구이지만, 그 특유의 악랄한 가독성 덕분에 왠지 모를 기피의 대상이 되고는 한다.</p>\n<p>사실 필자도 정규식을 꽤나 자주 사용하는 편이지만, 왠만큼 자주 사용하는 표현이 아니라면 무조건 구글링을 해서 표현을 찾아보고 <a href=\"https://regexr.com/\" target=\"_blank\" rel=\"nofollow\">RegExr</a> 사이트에서 검수를 돌려보고는 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB32UTM6UU0wG1Av/EABoQAQEBAQADAAAAAAAAAAAAAAECAxEAEiH/2gAIAQEAAQUCvXlNEnfLZ96iED5pAumJZJw//8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQMBAT8BIf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABsQAAICAwEAAAAAAAAAAAAAAAERABACITFB/9oACAEBAAY/Al5GclSLm+WiShX/xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFRgaH/2gAIAQEAAT8hW+aewNVPZdBHDLg9NkzifghA79iJfIG5pUpS2jE//9oADAMBAAIAAwAAABBsPwP/xAAaEQEAAQUAAAAAAAAAAAAAAAABEBEhQWHB/9oACAEDAQE/EBat4OdvI//EABcRAQEBAQAAAAAAAAAAAAAAAAABMUH/2gAIAQIBAT8Qmq6r/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARIUExUYH/2gAIAQEAAT8QaOoLcX3IcLIJ/YXBgInSPUmgph2AgAcL0SHQoDG3nJZzdCys2e0w2Fr9chA0ILrwJ//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"regex meme\" title=\"\" src=\"/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg\" srcset=\"/static/cf1e76c74723af6eb45ee626ca4269a9/0913d/regex_meme.jpg 160w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/cb69c/regex_meme.jpg 320w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg 640w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/6a068/regex_meme.jpg 960w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이런 짤이 있을 정도로 정규식을 처음 보면 이게 뭔가 싶다</small>\n</center>\n<p>하지만 정규식의 주 사용처가 문자열 내에서 패턴을 찾아내는 것이고, 이런 상황은 개발자로 일을 하다보면 자주 마주치는 상황 중 하나이기 때문에 언젠가는 반드시 정규식과 마주하게 될 일이 생기게 된다. 즉, 정규식을 무작정 피할 수도 없다는 뜻이다. <small><del>(그냥 도망치는 걸 포기하면 편하다)</del></small></p>\n<p>물론 아무 생각없이 정규식을 보았을 때는 “이게 뭔 말이야…?” 싶겠지만, 결국 아무리 긴 정규 표현식도 작은 표현들이 합쳐져서 만들어진 것이므로 막상 뜯어보면 생각보다 간단한 표현인 경우가 많다.</p>\n<h2>기본적인 정규식의 기능들</h2>\n<p>정규식에는 굉장히 다양한 키워드들이 있으며, 결국 이런 키워드들을 잘 조합하여 원하는 패턴을 잡아낼 수 있는 표현식을 만드는 것이 정규식 사용법의 전부이다. 한 마디로 이야기하자면 정규식을 시작하는 가장 기본적인 방법은 이 키워드들을 암기하는 것이다.</p>\n<p>물론 구글에 “정규식”이라고만 검색해도 방대한 양의 자료들이 쏟아져나오기 때문에 굳이 수 많은 키워드들을 다 알아야할 필요는 없지만, 기본적인 것들이라도 암기하고 있다면 간단한 패턴 매칭 문제 정도는 딱히 구글신께 물어보지 않아도 해결할 수 있기 때문에 생산성 측면에서 이득이다. <small>(어차피 다 외우는 건 불가능하다)</small></p>\n<p>결국 이 기능을 상황에 따라 적절하게 조합하며 사용하는 것이 결국 정규식을 얼마나 잘 사용하냐는 것의 척도이므로 이번 포스팅에서는 정규식이 제공하는 기능을 간단하게 핥아만 보고, 다음 포스팅에서 실무에서 발생할 법한 예제들을 통해 설명을 더 자세히 풀어가고자 한다.</p>\n<h3>특정 문자의 그룹을 잡아내는 캐릭터 클래스</h3>\n<p>정규식에는 특정한 문자 혹은 특정한 문자들의 그룹을 의미하는 다양한 키워드들이 있다. 이렇게 특정한 문자를 찾는 녀석들을 “캐릭터 클래스(Character Class)“라고 부른다.</p>\n<p>정규식의 핵심 기능이 내가 원하는 문자를 찾는 것이니 만큼, 캐릭터 클래스의 종류와 역할을 어느 정도 알고 있다면 간단한 정규식 정도는 구글링 없이도 대충 파악할 수 있다.</p>\n<h4>특정한 문자부터 찾아내보자</h4>\n<p>정규식에는 <code class=\"language-text\">\\d</code>, <code class=\"language-text\">\\w</code> 등 한 눈에 봐서는 의미를 알기 힘든 캐릭터 클래스들이 수두룩하게 포함되어 있지만, 사실 이런 요상한 키워드들만 사용되는 것은 아니다. 예를 들면 엄청 긴 문장 속에서 특정한 단어만 뽑아내고 싶다면 그냥 이렇게 작성해도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">hello</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이처럼 정규식에는 일반 문자도 자유롭게 사용할 수 있기 때문에 특정 문자의 그룹을 의미하는 키워드인 <code class=\"language-text\">\\w</code>, <code class=\"language-text\">\\s</code> 등을 사용할 때 반드시 키워드의 앞에 <code class=\"language-text\">\\</code>를 사용하여 이스케이핑을 해주는 것이다. 즉, <code class=\"language-text\">\\s</code>는 키워드 문자이지만 <code class=\"language-text\">s</code>는 그냥 s다.</p>\n<p>이러한 이스케이핑 처리 때문에 정규식에 익숙하지 않은 사람은 이게 <code class=\"language-text\">s</code>인지, 공백을 의미하는 <code class=\"language-text\">\\s</code> 키워드인지 헷갈리는 경우가 많은데, 이건 사실 팁이라고 할만한 게 없다. 그냥 <code class=\"language-text\">/\\/s\\.s.{1,2}/</code> 이런 모양을 보면 앞에서부터 하나씩 잘라가면서 읽어보도록 하자.</p>\n<p>그리고 이렇게 정규식에 <code class=\"language-text\">hello</code>와 같이 특정한 문자를 사용하여 문자열 속에서 자신이 원하는 정확한 패턴을 찾아낼 수는 있지만, 이런 방식으로 특정 패턴을 찾는 것 뿐이라면 굳이 정규식을 사용하지 않더라도 <code class=\"language-text\">include</code>나 <code class=\"language-text\">indexOf</code>, <code class=\"language-text\">search</code> 같은 <code class=\"language-text\">String.prototype</code> 메소드들에 일반 문자열을 인자로 사용하는 것만으로도 충분하기 때문에 큰 의미가 없다.</p>\n<p>정규식의 진짜 힘은 이런 특정 문자열을 찾는 것이 아니라 내가 원하는 문자열의 그룹을 찾아내는 것에 있다.</p>\n<h4>원하는 문자의 그룹을 만들어보자</h4>\n<p>만약 우리가 유저의 입력이 오직 영어로만 이루어져있는지 검증을 해야하는 상황이라고 생각해보자. 물론 영어는 대소문자를 모두 합쳐 총 48개의 문자로 이루어져 있기 때문에 알파벳으로 이루어진 맵이나 배열을 만들어서 일일히 검증하거나, 최악의 경우에는 논리 조건 48개를 <code class=\"language-text\">||</code> 연산자로 묶어서 써도 된다. <small><del>(예외 처리까지 합치면 논리 조건 49개…)</del></small></p>\n<p>하지만 이 방법이 그다지 쿨한 방법이 아니라는 것에는 다들 어느 정도 동의할 것이라고 생각한다. 게다가 영어만 검사하는 것이 아니라 숫자까지 포함되었는지를 검사한다던가, 영어가 n번 반복하는 것을 검사한다던가 하는 식으로 조건이 추가되면 추가될수록 필요한 논리도 늘어나기 때문에 코드는 점점 더 복잡해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> alphabet <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isAlphabet</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">string</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span>char <span class=\"token operator\">=></span> alphabet<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>char<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <small>사실 간단하게 영어만 검사하는 것이라면 이런 식으로 처리할 수 있기는 하다</small>\n  <br />\n  <br />\n</center>\n<p>그래서 정규식은 사용자가 커스텀한 그룹을 만들어서 원하는 문자를 잡아낼 수 있는 기능 또한 제공해준다. 사용하는 방법 또한 심플한데, 단순히 대괄호(<code class=\"language-text\">[]</code>) 안에 그룹핑하고 싶은 문자들을 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// x 또는 y 또는 z를 잡아내라!</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">[</span>xyz<span class=\"token punctuation\">]</span><span class=\"token operator\">/</span>\n\n<span class=\"token comment\">// x 또는 y 또는 z가 아닌 것을 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^xyz]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// a~z까지 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-z]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// a~z, A~Z까지 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-zA-Z]</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 대괄호 안에는 일반 문자만 들어갈 수 있는 것은 아니고, <code class=\"language-text\">-</code> 키워드를 사용하여 문자의 범위를 표현할 수도 있고, 맨 앞에 <code class=\"language-text\">^</code> 문자를 붙힘으로써 “Not” 또한 표현할 수 있다.</p>\n<p>그리고 위 표현 중 <code class=\"language-text\">a-z</code>와 같이 문자의 범위로 그룹을 설정하는 문법도 등장하는데, 이 범위는 <a href=\"http://www.asciitable.com/\" target=\"_blank\" rel=\"nofollow\">Ascii Table</a>에서의 범위를 의미한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42pWVW2/TQBCFF9GQxLk5iR2HYGgFlNhJCIUWIR6QEIgXxP//PcyKb6PTiVFhpSN5x+szZ27rEEL4ZfhsaAw/DS8N3wxbwx3Pe8MP9jfy/rvhleGL4athZQifeJjzsm94z/7KMDZUEC0MteG5YWI4GqY8x3NPIuEthsywCX/WwTAwrNnPDK2hB/mcjxvOTYOsD7CP8BzwHG2FEB5FbQlhTMVQCB8F8jJDYc2LPQ5K9jGCHakpcdTDNuT707rBQyR8IbYRoSXCPepWoEdqhig/reQlEjyTHEYHS6dwjcIlIe9cyGeESeEWW/4XwgqF266ipHxFXAphBjTkjSNsUDpQwoNU+UoIxy6HO8nhGsKWSCZeYQZBUtjgIOVwzLkaWyVV7v9LyC37p6KwJdxU5QsIz3L4DoNWuSGUQggb+q2QKrcQ3gv5VhTWrvKlU1jgfO4mZe5Hb+QUtv9B2JduOCn0s9xim7kql9gWEL4l5JES3vGBNvaBvW/sBbYlVe4kVIW1KMxoDw15Rche4b0qf8SgfZhmuXSTspZKa5XPCHM3KanZc9c2BYQlIb/uum1Slcf8T7Sxpx2NncukXD9EeCl9OOGwElY4SQrfcCbrqrIqPHYQag4ruRwGcu50O6cqb9zl8FgIt9LYueTwIv1L4voNxWskW8umJHYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ascii table\" title=\"\" src=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" srcset=\"/static/55b14704e00c60b3167cd812dcd52258/69538/ascii-table.png 160w,\n/static/55b14704e00c60b3167cd812dcd52258/72799/ascii-table.png 320w,\n/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png 349w\" sizes=\"(max-width: 349px) 100vw, 349px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>위 테이블을 보면 영어 대문자 그룹(65 ~ 90)과 소문자 그룹(97 ~ 122) 사이에 <code class=\"language-text\">[</code>나 <code class=\"language-text\">^</code>과 같은 특수 문자들이 포함되어 있는 것을 볼 수 있는데, 정규식은 이 아스키 코드를 기반으로 작동하기 때문에 영어만 잡아내고 싶다고 <code class=\"language-text\">a-Z</code>와 같은 범위로 문자열 그룹을 잡아버리면 저 사이에 있는 특수문자들까지도 그룹에 포함되어버린다.</p>\n<p>그래서 필자는 영어만 따로 걸러내기 위해 <code class=\"language-text\">a-z</code>와 <code class=\"language-text\">A-Z</code> 범위를 구분해서 정규식에 표현해준 것이다.</p>\n<p>이런 식으로 아스키 코드에 대한 지식이 있다면 <code class=\"language-text\">-</code> 문자 범위 키워드를 사용하여 손 쉽게 원하는 문자열의 그룹을 만들어 낼 수 있고, 사실 아스키 코드에 대해 잘 모르더라도 구글에 <code class=\"language-text\">Ascii Table</code>이라고 검색하면 저런 코드표가 쏟아져 나오기 때문에 그냥 저 테이블을 보면서 정의해도 된다.</p>\n<p>하지만 매번 이렇게 그룹을 직접 설정하는 것 또한 어찌보면 귀찮은 일이다. <small><del>(개발자는 게으를수록 일을 잘 하…)</del></small> 그래서 정규식은 친절하게도 사용자가 매번 이렇게 직접 그룹을 정의하지 않아도 되도록 미리 정의된 몇 가지 그룹을 지원한다.</p>\n<h4><code class=\"language-text\">.</code></h4>\n<p>새로운 라인을 의미하는 <code class=\"language-text\">\\n</code> 이스케이프를 제외한 모든 문자 하나를 의미한다. 즉, 그 문자가 무엇이든 상관없이 그냥 문자라면 모두 매칭한다. 당연히 이 문자라는 것의 정의에는 공백도 포함하기 때문에 <code class=\"language-text\">I am Evan</code>과 같이 공백을 포함한 문자열에 <code class=\"language-text\">.</code> 캐릭터 클래스를 사용한다면 공백도 포함하여 검색된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 문자열의 시작부터 4글자 매칭해!</span>\n<span class=\"token string\">'I am Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^....</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"I am\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>만약 이 캐릭터 클래스를 앞서 말한 커스텀 그룹으로 표현하려면 아스키 코드에서 <code class=\"language-text\">\\n</code>를 제외한 모든 문자를 대괄호 안에 넣어야한다는 이야기인데, 이건 당연히 불가능하다. 그래서 이런 캐릭터 클래스를 잘 사용하는 것이 정규식을 편하게 작성할 수 있는 첫 걸음이라고 하는 것이다.</p>\n<h4><code class=\"language-text\">\\d</code>, <code class=\"language-text\">\\D</code> 클래스</h4>\n<p><code class=\"language-text\">d</code> 키워드는 Digit, 즉 숫자를 표현하는 문자를 의미한다. 이 숫자 또한 아스키 코드 상으로는 <code class=\"language-text\">0</code> ~ <code class=\"language-text\">9</code>(33 ~ 52)인 문자를 의미하기 때문에, II나 五와 같은 문자는 숫자로 판단되지 않는다.</p>\n<p>소문자인 <code class=\"language-text\">\\d</code> 키워드는 숫자에 해당하는 문자를, 대문자인 <code class=\"language-text\">\\D</code>는 숫자가 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-1111-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// -를 제외한 0-9까지의 문자가 매칭된다</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4><code class=\"language-text\">\\w</code>, <code class=\"language-text\">\\W</code> 클래스</h4>\n<p><code class=\"language-text\">w</code> 캐릭터 클래스는 Word를 의미한다. 이때 정규식에서 정의하는 Word라는 녀석들은 아스키 코드 상으로 <code class=\"language-text\">A</code> ~ <code class=\"language-text\">Z</code>(65 ~ 90), <code class=\"language-text\">a</code> ~ <code class=\"language-text\">z</code>(97 ~ 122), 그리고 앞서 설명한 <code class=\"language-text\">\\d</code>(숫자) 그룹에 해당하는 녀석들이다.</p>\n<p>즉, 저 아스키 코드 범위에 포함되지 않는 한글, 키릴 문자 등은 Word가 아니므로 <code class=\"language-text\">\\w</code> 키워드로는 잡아낼 수 없다는 점을 주의해야한다. 이 녀석도 <code class=\"language-text\">d</code> 클래스와 마찬가지로 소문자인 <code class=\"language-text\">\\w</code>는 Word인 문자를 의미하고, 대문자인 <code class=\"language-text\">\\W</code>는 Word가 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Phone(전화): 010-0000-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// :과 -, 그리고 한글은 Word에 포함되지 않으므로 영어와 숫자만 매칭된다 </span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"P\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4><code class=\"language-text\">\\s</code>, <code class=\"language-text\">\\S</code> 클래스</h4>\n<p><code class=\"language-text\">s</code> 키워드는 Space라는 의미이며, 말 그대로 공백 문자를 의미한다. <code class=\"language-text\">s</code> 키워드도 다른 녀석들과 마찬가지로 소문자인 <code class=\"language-text\">\\s</code>는 공백인 문자, 대문자인 <code class=\"language-text\">\\S</code>는 공백이 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Hi, my name is Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\s</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 위 문자열에 존재하는 4개의 공백이 매칭된다</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>문자가 아닌 경계를 잡아내는 앵커</h3>\n<p>앞서 우리가 살펴보았던 키워드들은 모두 하나의 문자를 의미하는 키워드들이었지만, 정규식은 특정 문자가 아닌, 문자와 문자 간의 경계를 매칭할 수 있는 기능 또한 제공한다.</p>\n<p>이렇게 경계를 잡아내는 키워드들을 “앵커”라고 부른다. 앵커는 단지 경계만을 의미하기 때문에 보통 단독으로 쓰이기 보다는 캐릭터 클래스와 함께 조합하여 특정 경계 뒤나 앞에 위치하는 문자를 잡아내는 방식으로 사용된다.</p>\n<p>앵커는 말 그대로 “경계” 그 자체를 잡아내는 것이기 때문에 앵커만 단독으로 사용하게 된다면 매칭 결과로 길이가 <code class=\"language-text\">0</code>인 문자열이 반환된다.</p>\n<h4><code class=\"language-text\">^</code>, <code class=\"language-text\">$</code> 앵커</h4>\n<p><code class=\"language-text\">^</code> 앵커는 문자열이 시작하는 경계, <code class=\"language-text\">$</code>는 문자열이 끝나는 경계를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ^(문자열 시작 경계) 바로 뒤에 위치한 문자만 매칭해라</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// $(문자열 끝 경계) 바로 앞에 위치한 문자만 매칭해라</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>당연한 이야기겠지만 문자열의 시작 경계인 <code class=\"language-text\">^</code> 앞에 위치하는 문자나, 문자열의 끝 경계인 <code class=\"language-text\">$</code> 뒤에 위치하는 문자라는 것은 존재할 수 없기 때문에 <code class=\"language-text\">.^</code>이나 <code class=\"language-text\">$.</code>과 같은 표현식은 아무것도 매칭할 수가 없다.</p>\n<h4><code class=\"language-text\">\\b</code>, <code class=\"language-text\">\\B</code> 앵커</h4>\n<p><code class=\"language-text\">b</code> 키워드는 Boundary를 의미하며, 이 바운더리라는 녀석은 Word 그룹으로 이루어진 단어 간의 모든 경계를 의미한다. 즉, 쉽게 말하자면 문자열의 시작과 끝 경계를 의미하는 <code class=\"language-text\">^</code>이나 <code class=\"language-text\">$</code> 앵커의 상위호환이라고 볼 수 있다.</p>\n<p>이 앵커를 사용할 때 주의해야할 점은 “Word 그룹으로 이루어진 단어”이기 때문에 <code class=\"language-text\">\\w</code> 그룹에 포함되는 영어나 숫자에만 한정되는 이야기라는 것이다.</p>\n<p>문자열의 시작과 끝이라는 명확한 정의와는 다르게 막연하게 단어 간의 경계라고만 이야기하면 조금 이해가 안될 수도 있는데, 직접 예시를 보면 생각보다 그렇게 어렵지 않다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 예시에서 필자는 <code class=\"language-text\">\\b</code> 키워드를 사용하여 <code class=\"language-text\">abc def</code>라는 문자열 내의 모든 단어 경계를 잡아냈다. 그리고 그 결과물을 보면 모두 길이가 <code class=\"language-text\">0</code>인 문자열이 나온 것을 알 수 있다. 앞서 이야기했듯이 경계라는 것은 어떤 문자가 아니기 때문에 길이가 없다고 보는 것이다.</p>\n<p>방금 필자가 예시로 사용한 <code class=\"language-text\">abc def</code>라는 문자열 내의 단어들 간의 경계는 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVR42l2STU/bQBCG+cP0wC0SIHEoKkINCIEg6qlqqoo4uXDhBodElIiI8Bc4cIjrxHYcf+56H2btJKS80uyu57HfGY+9hSiYpcy8BG8Sk8aFTWFMtRFHBaGfMQ+yNVvJMpsP/ZRkUbMtu+SpJgpzFvOcoig/GeZM3RhfCtrzptJEVY3UbMPQqshLTFm7lEphJKqz5LQqURK2iJHFMqN1zXXNV1obqlwLtKYSYYj2PHlIoSWnpGvLjeVipF0XPZvZamv+Ybh8NZUW/HscMh0OGToOb4MB8/GY17t7ijCiFP7WH/DY6eDKPYuXF0a9Ln+dHiZbzla6rwwrz0Lz1HG42N3lx8EBPw8PcU6aPF93IIoJJh7d702u9ve53Nvj5vyCr1+26f9qyzCzDUM7h2W7vbMzvu3scN1sitkJf46PGUlH5DmhjOD30RFtidNGg367zW2rhfvwUPH/DFfKZHZZEJD6PrFEKtfBZLL+5NF0WnMJuxPHmCT5+CWAd1F4UjIJMUWSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries\" title=\"\" src=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png\" srcset=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/69538/boundaries.png 160w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/72799/boundaries.png 320w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png 640w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d9199/boundaries.png 960w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png 1130w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>복잡하게 생각할 것 없이 각 단어의 경계가 어디인지 생각해보면 된다</small>\n</center>\n<p>이에 반해 대문자인 <code class=\"language-text\">\\B</code> 키워드는 단어 간의 경계가 아닌 부분을 잡아낸다. 쉽게 이야기하면 단어가 끝나지 않는 경계 부분을 잡아낸다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\B</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이번에도 이전과 같이 4개의 경계가 뽑혀져 나왔지만 이번에는 이 경계들의 의미하는 바가 전혀 다르다. 이번에 뽑혀져 나온 경계는 “단어가 끝나지 않은 부분의 경계”이기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMklEQVR42m2S208TURDG96/knQfriwkQCbEl4QHCTYWIwUQESV8AjZBwMUYNofhgBRoCGKFSWygUaekFCnS3ezv9OdsCyUYm2d05+818852Z0RBTbo3c32tKZzq5k2sKZxX0is19Zug2F0WDy/Mq5wUD/cpCqdodrnmvmpw9sFyqcnlhUhLfrDp+ppsc/doim7miKMXPPBF5A9dRfkLPHFvdAZbp1ovcZ54ay2wUcyTetpQP124zPULbdv8nvHVuvq6r6vgtoSM5SjClGsRaTQ6u62DJFb0AJb5p2KJWAl3Xr07Ojvz3FCrlijoH2/S3RrNSKUj+wdj7TTLyDZVKcvVzDzeZRCUS2Pl8Q025DIKdrm9w+iMGhweY8f36s7m4yH4k4vUDrbi2xvL4G+JLn3jW3sH04CCl7xtEp6ZZHhvDOT5uqCsU2F+YJ/ggwMb7WdZnpvk1v0js3Qc6mpvZmZuTXllo6dVVeltaGHjcznhPD+G+Pp53PGGit5f01y9U0+k6YV5u8ioUItw/wItgJ6GHAUZCncwMDRMMBMisrIBpon2emOBRUxOjwSBvu7t53dXFwssRRiU5Gg5jHx3VCS+EeLi1ladtbUz199MpJJHJSRIfl5gdGkLt7ODoOlo1l+Nwa4vLgwOy29skolFq2Swnu7ukNjdlk42bvXI4jcc5lBg7k+E4FiMrJIYUKku/LeGp9/Bub2XatVIJVSziVir+lcG/QkqKKBmWkkHVHP+U/wHruB77k5EMYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries2\" title=\"\" src=\"/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png\" srcset=\"/static/97a4fb713d83f95c04382b7fb6b20106/69538/boundaries2.png 160w,\n/static/97a4fb713d83f95c04382b7fb6b20106/72799/boundaries2.png 320w,\n/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png 640w,\n/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png 868w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>단어가 끝나지 않은 부분의 경계</small>\n</center>\n<p>즉, <code class=\"language-text\">b</code> 키워드는 다른 키워드들과 다르게 어떤 하나의 문자를 매칭하는 것이 아니라 경계를 잡아내는 것이기 때문에, 이 특징만 잘 기억하고 있으면 은근히 여기저기 잘 써먹을 수 있다.</p>\n<h3>정규식의 옵션 기능, 플래그</h3>\n<p>정규식을 보다보면 종종 정규식의 맨 뒤에 <code class=\"language-text\">/정규식/g</code>와 같이 <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">m</code> 등의 문자가 추가로 붙는 것을 발견할 수 있는데, 이 친구들은 일종의 옵션 기능 역할을 가지고 있는 “플래그”이다.</p>\n<p><code class=\"language-text\">/</code>를 사용하여 정규식을 리터럴 선언하는 하는 경우가 아니라 <code class=\"language-text\">new RegExp()</code> 생성자를 호출하여 정규식을 사용하는 경우에는 생성자 함수의 두번째 인자로 플래그를 살포시 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">정규식</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gi</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> regex2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">정규식</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'gi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 이 두 개는 같은 패턴을 가진 정규식이다</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">.</span>flags <span class=\"token operator\">===</span> regex2<span class=\"token punctuation\">.</span>flags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>정규식은 <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">m</code>, <code class=\"language-text\">s</code>, <code class=\"language-text\">u</code>, <code class=\"language-text\">y</code> 총 6개의 플래그를 제공하고 있지만, 이 포스팅에서는 이 중 가장 많이 사용되는 <code class=\"language-text\">g</code>와 <code class=\"language-text\">i</code>, 그리고 <code class=\"language-text\">m</code> 플래그에 대해서만 간단하게 설명할 예정이니, 나머지 플래그가 궁금하다면 구글링을 해보도록 하자.</p>\n<h4><code class=\"language-text\">g</code> 플래그</h4>\n<p><code class=\"language-text\">g</code> 플래그는 <code class=\"language-text\">global</code>의 약자로, 이 플래그를 가지고 있는 정규식은 주어진 문자열 내에서 패턴과 매칭되는 모든 부분을 찾아낸다. 만약 <code class=\"language-text\">g</code> 플래그가 없다면 정규식은 문자열 내에서 가장 처음 매칭되는 한 부분만을 찾아낼 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"w\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>기본적으로 글로벌 매칭을 의미하는 플래그인 <code class=\"language-text\">g</code> 플래그가 없다면 정규식은 단 하나의 문자만을 매칭하지만, <code class=\"language-text\">g</code> 플래그를 사용하면 문자열 내에서 해당 정규식에 매칭되는 모든 문자를 찾아낸다. 글로벌 플래그에 관한 것은 필자가 굳이 설명하지 않아도 콘솔에서 몇 번 해보다보면 감이 올테니 자세히 설명하지는 않겠다.</p>\n<h4><code class=\"language-text\">i</code> 플래그</h4>\n<p><code class=\"language-text\">i</code> 플래그는 <code class=\"language-text\">ignoreCase</code>의 약자로, 정규식 내에 사용된 문자열의 대소문자를 구분하지 않고 모두 매칭하겠다는 의미를 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">abcd</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abcd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABCD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>일반적으로 유저의 입력을 통해 생성된 문자열은 <code class=\"language-text\">My name is Evan</code>, <code class=\"language-text\">my name is evan</code> 등과 같이 사람에 따라 대소문자의 사용 방법이 조금씩 다를 수 있지만, <code class=\"language-text\">i</code> 플래그를 사용하면 이런 걱정없이 맘 편하게 원하는 문자열을 찾아낼 수 있다.</p>\n<h4><code class=\"language-text\">m</code> 플래그</h4>\n<p><code class=\"language-text\">m</code> 플래그는 <code class=\"language-text\">multiline</code>의 약자로, 말 그대로 여러 라인으로 구성된 문자열을 검사하겠다는 것을 의미한다. 하지만 한 가지 이상한 점은 딱히 이 플래그가 없어도 정규식은 여러 줄로 된 문자열을 잘 매칭한다는 것이다.</p>\n<p>한번 템플릿 스트링을 사용하여 여러 라인으로 구성된 문자열을 만들어보고 정규식을 사용하여 간단한 패턴을 잡아내보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">abcd\\nefgh\\nijkl</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\nstring<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cd\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"kl\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>사실 정규식은 그냥 주어진 문자열 중에서 매칭되는 패턴을 찾아내는 녀석이기 때문에 굳이 <code class=\"language-text\">m</code> 플래그를 사용하지 않아도 여러 줄의 문자열도 잘 매칭한다.</p>\n<p>그렇다면 굳이 <code class=\"language-text\">m</code> 플래그가 필요한 이유가 무엇일까? 그 이유는 정규식이 바로 새로운 라인을 표현하는 <code class=\"language-text\">\\n</code> 이스케이프를 어떻게 바라보게 할 지 정할 수 있기 때문이다.</p>\n<p>이번에는 방금 작성했던 정규식에 문자열의 시작을 의미하는 <code class=\"language-text\">^</code> 앵커를 추가해서 단순히 <code class=\"language-text\">\\w</code> 그룹의 두 글자가 아닌 문자열의 시작 부분의 두 글자를 잡아보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>단순히 <code class=\"language-text\">\\w</code> 그룹의 두 글자를 잡아낼 때와는 다르게 이번에는 <code class=\"language-text\">ab</code>만 뽑혀나오는 것을 확인할 수 있는데, 이는 문자열 내에서 <code class=\"language-text\">\\n</code> 이스케이프로 라인이 나누어져있더라도 정규식에게는 그저 하나의 문자열이라고 인식되기 때문이다.</p>\n<p>기본적으로 정규식은 하나의 문자열 객체를 기준으로 패턴을 매칭하기 때문에 전체 문자열의 첫 글자인 <code class=\"language-text\">a</code> 앞에 있는 경계만 문자열의 시작(<code class=\"language-text\">^</code>)이라고 판단한 것이다.</p>\n<p>바로 이런 상황일 때 <code class=\"language-text\">m</code> 플래그를 사용하면 이전과는 다른 결과를 만들어낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>쨘, 이번에는 하나의 문자열이 아니라 <code class=\"language-text\">\\n</code> 이스케이프를 기준으로 각각 별도의 문자열로 평가되어 정규식이 적용되는 것을 볼 수 있다. 즉, <code class=\"language-text\">m</code> 플래그는 단순히 여러 줄의 문자열을 검사한다는 의미가 아니라 <code class=\"language-text\">\\n</code> 이스케이프 문자를 기준으로 라인을 나누어 각각의 문자열을 하나의 검사 대상으로 보겠다는 의미인 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42m1Ta08aQRTdf84fwU8mtSQWaCMULfUBRogCAkKoqAhqdBeFfTA7uzszcHpnfETSTkLYnTn3zDnn3rUSKRHHMYRSUPRLkgRRFEGIBMvlEp+XovfkDaPx+lwIgTiJzZ6ut17abbgnJ7g+O0OTngs7Oziu1hCGkblIr9VqZf7jMMRLpwOvXsdVs4n2xQW+5/PodC4Iz40Qy97dRdBoYFCpoFQuI5/PonrYwPXAgZRindB14RSLBt/e30eRajOZr6hVu7j5Q3glYAmyzBiD7/vgnGOxWIBHHEEQGDuflyRLnPY4KY0Iqx3oGq2MsfDV8tHREba2tlCkm0ulEj1/wehmgkXATC5rCumS+WBgLE/Oz/GjUEA2m8XTo01CXvFWOp3G6empIUulUjg4+I3acRtXA/sfy9F0CodiiUYj/KSsNb5c/oX6cZci0ngi9DzPME8mE3S7Xbju3NjWEfzPckjx6MkY396i1+sZbEgRaIVKSVgVasbl5SU2NzfRarWwt7dHpK4BfhC+KUxozx0Owe/vcU5NOSO8jiyk/BidGcu5XA79fh8bGxsoUCZ6bB6oQDfqnfDDMqmeUjyc3BxubyPzLWtqHNs2AnSTrJgG+O5ubCzqLoXU4YT25FJ9EL2vJb0LPdTPU0jqrqCMtV0dgcbrc0u6HnhMXwCXCJgA8wjoh5BzD0up1iyv9Kj4NGJMIY4UXD+GZPSVzTwIL4CKKcPYdvA4DWHfeXh0GJyHOfjTM4LhmIrDNctqNgMnwvHEx8xmGI3niGYLsNsHzPsj8FmAv+izel8PUmvHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"multiline\" title=\"\" src=\"/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png\" srcset=\"/static/69dd01cadc54feeecd2154af66259484/69538/multiline.png 160w,\n/static/69dd01cadc54feeecd2154af66259484/72799/multiline.png 320w,\n/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png 640w,\n/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png 873w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>m 플래그가 있냐 없냐에 따라 각각의 라인을 통합하여<br>하나의 문자열로 볼 것인지, 각각의 문자열로 볼 것인지가 결정된다.</small>\n</center>\n<p><code class=\"language-text\">m</code> 플래그 같은 경우는 짧은 문자열을 다루는 상황보다는 개행이 포함된 긴 문자열을 다루는 상황일 때 사용하게 되는데, 필자 또한 비즈니스 내에서 유저의 간단한 입력을 검사하는 경우보다는 행이 변경될 때마다 가장 첫 글자를 대문자로 적어야하는 영문법을 검사한다던가, 비압축 파일을 파싱한다던가 하는 경우에 주로 사용했었던 것 같다.</p>\n<h3>패턴이 몇 번이나 나왔는지 찾아주는 수량자</h3>\n<p>방금 전 예시에서 필자는 <code class=\"language-text\">\\w</code> 그룹의 두 글자를 찾아내기 위해 <code class=\"language-text\">{2}</code>라는 표현을 사용했었다. 이 표현은 바로 앞에 오는 표현의 반복 횟수를 의미하는데, <code class=\"language-text\">{0,2}</code>처럼 최소, 최대 반복 횟수를 사용하여 반복되는 범위를 표현해줄 수도 있다.</p>\n<p>이렇게 앞에 위치한 패턴이 몇 번이나 일치하는지를 잡아낼 수 있는 표현을 수량자라고 한다.</p>\n<h4>반복되는 횟수를 명시해보자</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aaaabbbcc'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{3}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abb\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bcc\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 <code class=\"language-text\">\\w{3}</code>이라는 표현은 단순히 Word 그룹이 3번 반복되는 패턴을 찾으라는 표현이기 때문에, 정규식은 문자열 전체에서 Word 그룹이 3번 반복되고 있는 케이스를 뽑아내고 있는 것을 볼 수 있다.</p>\n<p>사실 반복이라는 패턴은 굉장히 여러 곳에 응용될 수 있는데, 그 중 대표적인 예가 바로 전화번호나 주민등록번호처럼 같은 그룹의 문자가 일정 횟수 이상 반복되는 것이 정해져있는 정보이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-0101-0101'</span>\n<span class=\"token string\">'02-0101-0101'</span>\n<span class=\"token string\">'031-010-0101'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>대한민국의 전화번호는 대부분 이 3가지 패턴 안에서 결정되는데, 휴대폰 번호같은 경우 반드시 맨 앞에는 3자리의 통신사 식별번호가 위치하고 그 뒤에는 4자리의 전화번호 필드가 두 번 반복되는 형태를 가지며, 그 외 유선전화는 2-3자리의 지역번호 뒤로 3-4 자리의 필드와 4자리의 필드가 반복되는 형태를 가진다.</p>\n<p>이런 경우 수량자를 사용하면 간단하게 원하는 패턴을 잡아낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 휴대폰 번호를 잡아내는 패턴</span>\n<span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token operator\">|</span><span class=\"token number\">1</span><span class=\"token operator\">|</span><span class=\"token number\">6</span><span class=\"token operator\">|</span><span class=\"token number\">8</span><span class=\"token operator\">|</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 패턴을 보고 나이가 어리신 분들은 “왜 <code class=\"language-text\">010</code>으로 안 잡고 굳이 저런 숫자들을 넣어주는거지?”라는 의문을 가지실 수도 있는데…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABroz5g9t7JJoTVAqf/8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDABESIv/aAAgBAQABBQK1erTcUGunOmXlVSHFD6M1eYAUf//EABcRAQADAAAAAAAAAAAAAAAAABABETH/2gAIAQMBAT8BonD/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREx/9oACAECAQE/AbI0/8QAHBAAAgICAwAAAAAAAAAAAAAAAAEQESFRAhLB/9oACAEBAAY/AlsxFbFhv0vi7UdWUlSP/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFBYXGh/9oACAEBAAE/IcEGn2LnnYyoRs1x7iE2NhAW4RleJwDvG4QEHCf/2gAMAwEAAgADAAAAEOMIAP/EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAEDAQE/EDSVgv/EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAECAQE/EBaFov/EAB0QAQACAgMBAQAAAAAAAAAAAAEAESFBMVFhcaH/2gAIAQEAAT8QAt9zTgOuq91La8qBkjlxMMA2jpLOI6I3Xu/IRTgJARcVCEwb1ZUHefz5DLBQNBP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"old phone\" title=\"\" src=\"/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg\" srcset=\"/static/b89f9481679525d129c49f370f62a88d/0913d/old_phone.jpg 160w,\n/static/b89f9481679525d129c49f370f62a88d/cb69c/old_phone.jpg 320w,\n/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>한국인의 통신채널, 스피드 011...</small>\n</center>\n<p>사실 휴대폰 통신사 식별번호는 <code class=\"language-text\">010</code>만 있는 것이 아니다. 예전에는 <code class=\"language-text\">011</code>, <code class=\"language-text\">016</code>, <code class=\"language-text\">018</code> 등 다양한 통신사 식별번호가 있었다가 나중에 <code class=\"language-text\">010</code>으로 통합된 것이라 아직도 이런 구 식별번호를 사용하시는 분들이 있을 수도 있기 때문에 이런 로직을 작성할 때는 주의하도록 하자. <small><del>(이제 이거 알면 빼박 늙었다는 증거…)</del></small></p>\n<h4>원하는 패턴이 한번 이상 출현했는지 알아보자</h4>\n<p>이렇게 정규식은 간단하게 반복되는 횟수를 명시하여 수량자 앞에 위치한 패턴이 얼마나 반복되었는지를 표현할 수 있지만, 이 수량자는 너무 명확한 표현이라서 “있거나 없을 수도 있다”라던가 “n개 이상 등장”과 같은 추상적인 패턴을 표현하기에는 적합하지않다.</p>\n<p>그렇기 때문에 정규식은 n개 이상과 같이 조금 더 추상적인 패턴의 등장 횟수를 매칭할 수 있는 수량자들 또한 제공해주고 있다.</p>\n<h5><code class=\"language-text\">*</code> 수량자</h5>\n<p><code class=\"language-text\">*</code> 수량자는 이전에 등장한 패턴이 0회 이상 등장하는지 여부를 나타내는 수량자이다. 0회 이상이란 표현이 조금 애매할 수 있는데, 조금 더 풀어서 이야기하면 이 수량자 앞에 위치한 패턴은 등장하지 않을 수도 있고 여러 번 반복될 수도 있다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b 앞에 위치한 a는</span>\n<span class=\"token comment\">// 없어도 되고 여러 번 나와도 다 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a*b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">*</code> 수량자 앞에 위치한 패턴은 아무리 많이 등장해도 전부 잡히기 때문에 <code class=\"language-text\">a</code>의 갯수가 아무리 늘어난다하더라도 모두 잡아낼 수 있게된다.</p>\n<h5><code class=\"language-text\">?</code> 수량자</h5>\n<p><code class=\"language-text\">?</code> 수량자는 이전에 등장한 패턴이 0 또는 1회 등장하는지 여부를 나타내는 수량자이다. <code class=\"language-text\">*</code> 수량자와는 다르게, <code class=\"language-text\">?</code> 수량자 앞에 위치한 패턴은 아무리 많이 등장하더라도 단 한 개만 잡아낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b 앞에 위치한 a는</span>\n<span class=\"token comment\">// 없어도 되고 여러 번 나와도 1개만 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a?b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h5><code class=\"language-text\">+</code> 수량자</h5>\n<p><code class=\"language-text\">+</code> 수량자는 이전에 등장한 패턴이 반드시 한 번 이상 등장해야한다는 것을 의미한다. 즉 <code class=\"language-text\">+</code> 수량자 앞에 위치한 패턴이 등장하지 않는다면 매칭에 실패하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b앞에 위치한 a는</span>\n<span class=\"token comment\">// 반드시 존재해야하고 여러 번 나와도 다 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a+b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">+</code> 수량자의 의미를 조금 더 쉽게 설명해보자면 “몇 번이든 좋으니까 있기만 하면 된다”라는 의미이기 때문에 문자열 중에서 반드시 존재해야하는 문자를 잡아낼 때 유용하게 사용할 수 있다.</p>\n<h2>알면 더 효율적인 기능들</h2>\n<p>지금까지 정규식이 제공하는 기본적인 기능인 캐릭터 클래스, 앵커, 플래그 그리고 수량자에 대해 알아보았다. 사실 이 정도만 알고 있어도 일반적인 비즈니스 상황에서 정규식을 사용하는데에는 큰 무리가 없지만, 간혹 이 기능만으로는 처리가 귀찮은 상황들이 터지게 된다.</p>\n<p>지금부터는 조금 더 편하게 정규식을 사용하기 위해서 알고 있으면 좋은 기능들에 대한 이야기를 해보도록 하겠다.</p>\n<h3>패턴을 기억하는 캡처링</h3>\n<p>정규식은 단순히 문자열 내에서 패턴을 매칭하기만 하는 것이 아니라, 매칭된 패턴을 기억하고 있을 수 있는 기능도 제공한다. 이렇게 패턴을 기억할 수 있는 기능은 문자열을 치환하는 작업을 진행할 때 변경되면 안 되는 부분과 변경되어야 하는 부분을 구분하여 원하는 부분만 바꿔치거나, 중복 입력된 부분을 찾는 등의 작업에서 꽤나 유용하게 사용된다.</p>\n<p>예를 들어 <code class=\"language-text\">$10000</code>과 같이 달러 단위를 의미하는 문자열이 있다고 생각해보자. 이 문자열을 잡아낼 수 있는 패턴은 무엇일까?</p>\n<p>길게 생각할 것도 없이 달러 단위를 의미하는 문자열은 <code class=\"language-text\">$</code> 뒤에 반드시 한 개 이상의 숫자가 위치하여야 정보성이 있다고 판단할 수 있기 때문에 간단하게 <code class=\"language-text\">$</code>문자와 그 뒤에 오는 1개 이상의 숫자를 잡아낼 수 있는 표현을 사용하면 우리는 원하는 패턴을 잡아낼 수 있다. <small>(그냥 <code class=\"language-text\">$</code>는 문자열의 끝을 나타내는 앵커이기 때문에 반드시 앞에 <code class=\"language-text\">\\</code>를 붙혀 이스케이핑해주는 것을 잊지말자)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$\\d+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"$10000\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>자, 이렇게 정규식을 통해 잡아낸 <code class=\"language-text\">$10000</code>라는 문자열을 <code class=\"language-text\">10000 달러</code>라는 문자열로 변경하고 싶다면 어떻게 할 수 있을까?</p>\n<p>간단하게 생각하면 <code class=\"language-text\">String.prototype.replace</code> 메소드를 사용하면 될 것 같지만, 위 정규식을 사용하여 잡아낸 패턴은 <code class=\"language-text\">$10000</code> 전체이기 때문에 <code class=\"language-text\">10000</code>이라는 문자만 그대로 유지하며 <code class=\"language-text\">$</code> 부분만 치환하는 것은 불가능하다.</p>\n<p>즉, 이 문제를 해결하기 위해서는 패턴을 매칭된 부분 중 특정 부분을 기억하는 기능이 필요한 것이다. 바로 이런 상황일 때 캡쳐링을 사용하면 문제를 쉽게 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 기억하고자 하는 부분을 괄호로 감싸자!</span>\n<span class=\"token operator\">/</span>\\<span class=\"token function\">$</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 표현이 이전 표현과 다른 점은 단지 <code class=\"language-text\">\\d+</code> 부분을 괄호로 감싼 것 뿐이지만, 이렇게 특정 표현을 괄호로 감싸게 되면 정규식은 이 부분을 캡쳐링하게 된다.</p>\n<p><code class=\"language-text\">String.prototype.replace</code> 메소드의 두 번째 인자는 치환될 문자열을 의미하는데, 이렇게 캡쳐링된 패턴은 치환될 문자열 내에서 <code class=\"language-text\">$n</code>이라는 특수한 표현으로 다시 불러올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$(\\d+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$1 달러'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"10000 달러\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">$1</code>은 단지 정규식 패턴 내에서 캡처링된 첫 번째 그룹을 의미하는 것이기 때문에 캡처링된 패턴이 늘어나면 <code class=\"language-text\">$2</code>나 <code class=\"language-text\">$3</code>처럼 두 번째, 세 번째 패턴을 계속 불러올 수도 있다.</p>\n<p>그리고 이렇게 특정한 패턴을 캡처하여 기억할 수 있는 기능은 반복되는 문자를 찾아내는 데에도 유용하게 사용될 수 있는데,  반복되는 문자라는 것 자체가 이전에 나타난 문자가 그 다음에 연속해서 다시 나타나는 것을 의미하기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 정규식에서 필자는 <code class=\"language-text\">(\\w)</code> 표현을 사용하여 문자열 내의 Word 그룹에 속한 글자를 캡처링하였고, 이후 <code class=\"language-text\">\\1</code>이라는 표현을 사용하여 캡처링한 패턴을 다시 불러왔다.</p>\n<p>즉, <code class=\"language-text\">\\w</code>에 매칭된 패턴을 <code class=\"language-text\">\\1</code>을 통해 불러옴으로써 반복이라는 패턴을 표현할 수 있는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aabccdeef'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ee\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이렇게 문자열 내에 동일한 문자가 반복되는 패턴을 찾아내는 표현은 <code class=\"language-text\">(.)\\1{2}</code>와 같이 수량자와 조합되어 “동일한 글자가 3번 이상 반복되면 안 됨”과 같은 비밀번호 검증 로직에 유용하게 사용되기도 한다.</p>\n<h3>Greedy vs Lazy</h3>\n<p>앞서 우리는 1개 이상 존재하는 패턴을 매칭하는 <code class=\"language-text\">+</code> 수량자와 0개 이상 존재하는 패턴을 매칭하는 <code class=\"language-text\">*</code> 수량자에 대해 알아보았었다. 이렇게 n개 이상이라는 수량자를 사용하게 되면 패턴을 매칭할 때 약간은 애매한 부분이 생기게 되는데, 바로 이런 케이스이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// &lt;, >으로 감싸진 모든 문자열을 찾아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 정규식은 단지 <code class=\"language-text\">&lt;</code>, <code class=\"language-text\">></code>으로 감싸진 모든 문자열을 찾으라는 표현이기 때문에 <code class=\"language-text\">&lt;</code>과 <code class=\"language-text\">></code>으로 감싸진 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code> 전체를 잡아내는 게 당연한 것이 아닌가하고 생각할 수도 있지만, 사실 <code class=\"language-text\">&lt;</code>과 <code class=\"language-text\">></code>으로 감싸진 패턴은 저 하나만 존재하는 것이 아니다.</p>\n<p>바로 <code class=\"language-text\">&lt;p></code>와 <code class=\"language-text\">&lt;/p></code>도 위 정규식이 잡아낼 수 있는 범주에 들어가는 패턴이기 때문이다. 하지만 정규식은 기본적으로 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code>와 같이 최대한 길게 매칭되는 패턴을 잡도록 세팅되어있기 때문에, 결과가 이렇게 나오는 것이다.</p>\n<p>이때 이렇게 최대한 길게 매칭되는 패턴을 잡으려는 매칭 방법을 탐욕(Greedy) 매칭이라고 한다. 말 그대로 탐욕스럽게 최대한 길게 매칭되는 부분을 먹어버리는 것이다. <small>(매 순간 항상 최적의 선택을 하는 의미의 Greedy 알고리즘이랑은 용어만 같고, 사실 상 다른 개념이다)</small></p>\n<p>그렇다면 위 패턴을 사용하여 작은 매칭 단위인 <code class=\"language-text\">&lt;p></code>와 <code class=\"language-text\">&lt;/p></code>를 잡아내고 싶다면 어떻게 하면 될까?</p>\n<blockquote>\n<p>바로 정규식을 <strong>게으르게(Lazy)</strong> 만들면 된다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// &lt;, >으로 감싸진 모든 문자열을 게으르게 찾아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*?></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이전 표현과 비교했을 때 달라진 부분은 “0개 이상의 패턴”을 의미하는 <code class=\"language-text\">*</code> 수량자의 뒤 쪽에 <code class=\"language-text\">?</code>를 붙혔다는 것이다. 이렇게 게으른 매칭을 사용하게 되면 정규식은 매칭할 수 있는 패턴들 중 가능한 가장 짧은 패턴들을 찾게된다. 같은 표현을 가지고 패턴을 찾으라고 일을 시켰을 때, 최대한 짧은 패턴만 찾고 일을 마치려고 하니 게으르다고 표현하는 것이다.</p>\n<p>정리하자면 <code class=\"language-text\">*</code>나 <code class=\"language-text\">+</code>과 같이 n개 이상을 나타내는 수량자는 기본적으로 매칭할 수 있는 패턴 중 가장 긴 것을 탐욕(Greedy)스럽게 매칭하고, 이 수량자 뒤 쪽에 <code class=\"language-text\">?</code>를 붙히게 되면 게으르게(Lazy) 매칭할 수 있는 패턴 중 가장 짧은 것을 매칭하게 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Greedy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+></span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// Lazy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+?></span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 Greedy, Lazy 매칭의 차이를 모르고 있다면 방금 전 예시의 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code> 처럼 매칭할 수 있는 패턴의 종류가 여러 개인 경우 원하는 패턴을 잡아낼 수 없으니, 이 차이를 잘 기억해두도록 하자.</p>\n<h2>마치며</h2>\n<p>필자는 대학생 때 정규식을 처음 접하게 되었었는데, 당시 OBJ 파일을 <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"nofollow\">ThreeJS</a> 객체로 표현하는 일종의 파서를 만들고 있었기 때문에 정규식을 상당히 하드하게 사용해야 했었던 기억이 난다. <small>(당시 ThreeJS에서 제공하는 OBJ Loader에 버그가 있었다 😢)</small></p>\n<p>OBJ 파일은 각 버텍스의 좌표와 텍스쳐의 UV 매핑 좌표, 그리고 각 버텍스들의 방향을 나타내는 노말 등을 다음과 같이 나타내는 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"*.obj\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-*.obj line-numbers\"><code class=\"language-*.obj\"># 버텍스 좌표\nv -1.692615 -0.021714 -1.219301\nv 7.334266 -0.021714 -1.219302\nv 7.334265 0.021714 -1.219302\nv -1.692616 0.021714 -1.219301\nv -1.692616 -0.000000 -1.241016\nv 7.334265 0.000000 -1.241017\nv 7.334266 0.000000 -1.197588\nv -1.692615 -0.000000 -1.197587\n\n# 텍스처 UV 값\nvt 0.0000 0.0000\nvt 1.0000 0.0000\nvt 1.0000 1.0000\nvt 0.0000 1.0000\nvt 0.0000 0.0000\nvt 1.0000 0.0000\nvt 1.0000 1.0000\nvt 0.0000 1.0000\n\n# 버텍스의 노말 값\nvn -0.0000 -0.0000 -1.0000\nvn 0.0000 -1.0000 -0.0000\n\nusemtl Material.001\n\n# 각 페이스를 구성하는 버텍스의 인덱스들\nf 1/1/1 4/2/1 3/3/1 2/4/1\nf 8/5/2 5/6/2 6/7/2 7/8/2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 필자는 이 파일을 읽어와 앞서 설명한 정규식의 <code class=\"language-text\">m</code> 플래그를 사용하여 각각의 라인 별로 나눈 후, <code class=\"language-text\">v</code>로 시작하면 버텍스 좌표, <code class=\"language-text\">vt</code>로 시작하면 텍스쳐의 uv, <code class=\"language-text\">vn</code>으로 시작하면 버텍스의 노말값 등으로 파싱을 해야했었는데, 물론 어렵고 복잡한 과정이기는 했지만 재미있기도 했던 기억이 있다.</p>\n<p>컴퓨터가 만든 파일이라는 것이 사실은 어떤 의미를 가진 문자열의 연속이라는 사실도 새로웠지만, 정규식을 사용하여 이 문자열을 의미있는 정보로 가공할 수 있다는 게 더 재밌었다.</p>\n<p>하지만 앞서 이야기했듯이 정규식은 이런 파서를 만들 때보다 일반적인 비즈니스 로직 상에서 더 자주 사용된다. 비밀번호나 이메일 주소 등 사용자가 틀릴 가능성이 높은 입력을 검사할 때 정규식은 말 그대로 치트키처럼 사용될 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 399px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42p1T2Y7CMBDr///c8sA+8oSABnoftMmk8XpSjiJYCYjkJk0ztjMzTfqmwe96jZ/VClVdw3sPay2ccx9BRKAjKcsKTd2gbduv0XUd8jyPxElVVVDUdPctGt5SCdVlInK17OHkbn+Jec897WlqlgghINGcqUJRFDGHTUv7XBdFieyUoeQcHWQZjDHI6ETdDMMQc6YkOpRnmqaZ0DmLkXkYux6WGEigihqkszqydozv4zhGaNxy3An5CAzwVPV0JCaFbLe4yOPd8eAwEJ6FkdMpwpcF7GZzu84XhHTY1JDjkU4LSMYW2O+iyLtOnx2yEHI0dFdCtKfSAyRN59M8+ED6QuCRkAuJ+TPz1VnZmMsr4ccOL0WR/Z7XzeguhdN8ktweDnAUmvoenlV2ux2FzJPQjTD+g/wQ2B5Tf55nBk5sjTDamFvPlgpsZBUO/BbO5/8dKqG+aPu8BMVe7mvMAsqjf8of4zBFjqIV43cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"password rule\" title=\"\" src=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" srcset=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/69538/password_rule.png 160w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/72799/password_rule.png 320w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png 399w\" sizes=\"(max-width: 399px) 100vw, 399px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>물론 기본적으로 제공되는 메소드들을 잘 사용해도 검사는 할 수 있지만, 정규식으로 훨씬 간단하게 해결할 수 있다</small>\n</center>\n<p>만약 정규식을 모른다면 이메일 주소와 같은 간단한 문자열의 유효성을 검증하기 위해서 여러 개의 빌트인 메소드들을 조합하여 검사해야하기 때문에 꽤나 비효율적이다. 게다가 개인적으로는 아무리 정규식이 읽기가 어렵다지만 이렇게 복잡한 메소드들의 조합보다는 차라리 정규식이 가독성이 더 좋은 것이 아닌가하는 생각도 있다.</p>\n<p>물론 정규식은 코드처럼 라인이나 인덴트가 나누어져 있지도 않기 때문에 마치 무의미한 문자들의 나열처럼 보인다. 하지만 어차피 정규식이 제공하는 표현은 그렇게 많은 편이 아니기 때문에 조금만 사용하다보면 짧은 정규식 정도는 누구나 금방 이해할 수 있을 정도라고 생각한다.</p>\n<p>이상으로 불규칙 속에서 규칙을 찾아내자 포스팅을 마치며, 다음 포스팅에서는 필자가 지금까지 개발자로 일을 하면서 정규식을 실제로 사용했던 사례들을 토대로 정규식을 설명하는 내용을 풀어볼 예정이다.</p>","fields":{"slug":"20200724-about-regular-expression","path":"/2020/07/24/about-regular-expression/","lang":"ko"},"frontmatter":{"title":"불규칙 속에서 규칙을 찾아내는 정규 표현식","date":"2020-08-10","categories":["프로그래밍","튜토리얼"],"tags":["정규식","정규표현식","Regexp","Regular Expression","캐릭터 클래스","Character Class","Anchor","앵커","캡쳐링","Capturing Group","Greedy","Lazy"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/8c230/thumbnail.png 80w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/23e25/thumbnail.png 160w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/3e5ca/thumbnail.webp 80w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/b72f1/thumbnail.webp 160w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/fc5c5/thumbnail.webp 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/3fbb4/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/61846/thumbnail.png 750w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/d5395/thumbnail.png 1080w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/cc835/thumbnail.png 1366w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/6858b/thumbnail.webp 750w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/f5547/thumbnail.webp 1080w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/29310/thumbnail.webp 1366w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"587b8917-2535-52e2-a547-970e9deefa34","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9C%A0%EC%A0%80%EC%9D%98-%EC%9E%85%EB%A0%A5-%EA%B2%80%EC%A6%9D%ED%95%98%EA%B8%B0\">유저의 입력 검증하기</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EB%A9%94%EC%9D%BC-%EC%A3%BC%EC%86%8C-%EA%B2%80%EC%A6%9D%ED%95%98%EA%B8%B0\">이메일 주소 검증하기</a></li>\n<li><a href=\"#%EC%A0%84%ED%99%94%EB%B2%88%ED%98%B8\">전화번호</a></li>\n<li><a href=\"#%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8\">비밀번호</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B6%88%EA%B7%9C%EC%B9%99%ED%95%9C-%EB%AC%B8%EC%9E%90%EC%97%B4%EC%97%90%EC%84%9C-%EC%9B%90%ED%95%98%EB%8A%94-%EC%A0%95%EB%B3%B4%EB%A7%8C-%EA%B3%A8%EB%9D%BC%EB%82%B4%EA%B8%B0\">불규칙한 문자열에서 원하는 정보만 골라내기</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%96%B4%EC%A7%84-%EB%AC%B8%EC%9E%90%EC%97%B4-%EB%82%B4%EC%97%90%EC%84%9C-%EC%88%AB%EC%9E%90%EB%A7%8C-%EA%B3%A8%EB%9D%BC%EB%82%B4%EA%B8%B0\">주어진 문자열 내에서 숫자만 골라내기</a></li>\n<li><a href=\"#%EB%AC%B8%EC%9E%A5-%EC%86%8D%EC%97%90%EC%84%9C-%EA%B8%88%EC%95%A1%EB%A7%8C-%EC%B6%94%EC%B6%9C%ED%95%98%EA%B8%B0\">문장 속에서 금액만 추출하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%9E%90%EC%97%B4%EC%9D%84-%EB%82%B4%EA%B0%80-%EC%9B%90%ED%95%98%EB%8A%94-%ED%8F%AC%EB%A7%B7%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0\">문자열을 내가 원하는 포맷으로 변환하기</a></p>\n<ul>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EC%9D%98-%EC%A0%95%EB%B3%B4-%EB%A7%88%EC%8A%A4%ED%82%B9%ED%95%98%EA%B8%B0\">사용자의 정보 마스킹하기</a></li>\n<li><a href=\"#ide-%EB%82%B4%EC%97%90%EC%84%9C-%EC%9B%90%ED%95%98%EB%8A%94-%EB%B6%80%EB%B6%84%EB%A7%8C-replace%ED%95%98%EA%B8%B0\">IDE 내에서 원하는 부분만 Replace하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"필자는 지난 불규칙 속에서 규칙을 찾아내는 정규표현식 포스팅에서 정규식의 기본적인 사용 방법을 한 차례 설명한 바 있다. 그러나 아무리 정규식의 기본적인 사용 방법을 알고 있다고 해도 실제로 정규식을 사용해야하는 상황이 되면 눈 앞이 깜깜해지기 마련이다. 그래서 이번 포스팅에서는 실제로 필자가 지금까지 일을 하며 경험했던 여러가지 상황을 토대로 정규식을 어떻게 사용했는지에 대한 몇 가지 예시와 설명을 조금 곁들여 볼까 한다. 정규식을 가장 많이 사용하는 상황인 “유저의 입력 검증”, “원하는 정보 찾기”, “문자열을 원하는 포맷으…","html":"<p>필자는 지난 <a href=\"/2020/07/24/about-regular-expression\">불규칙 속에서 규칙을 찾아내는 정규표현식</a> 포스팅에서 정규식의 기본적인 사용 방법을 한 차례 설명한 바 있다.</p>\n<p>그러나 아무리 정규식의 기본적인 사용 방법을 알고 있다고 해도 실제로 정규식을 사용해야하는 상황이 되면 눈 앞이 깜깜해지기 마련이다.</p>\n<p>그래서 이번 포스팅에서는 실제로 필자가 지금까지 일을 하며 경험했던 여러가지 상황을 토대로 정규식을 어떻게 사용했는지에 대한 몇 가지 예시와 설명을 조금 곁들여 볼까 한다.</p>\n<p>정규식을 가장 많이 사용하는 상황인 “유저의 입력 검증”, “원하는 정보 찾기”, “문자열을 원하는 포맷으로 변경하기”를 예시로, 문제를 정의하고 정규식을 사용하여 문제를 해결해보도록 하자.</p>\n<h2>유저의 입력 검증하기</h2>\n<p>사실 개발을 진행하며 정규식이 가장 쉽게 접하는 상황은 유저의 입력을 검증할 때이다.</p>\n<p>개발이나 디자인을 하다보면 자연스럽게 알게 되는 것이기는 하지만, 유저는 절대 내가 설계한 대로 제품을 사용하지 않기 때문에 유저가 입력하는 데이터를 곧이 곧대로 신뢰하고 서버로 전송하는 행위는 꽤나 위험한 짓이다.</p>\n<p>분명히 이메일을 입력하라고 했는데 전화번호를 입력할 수도 있고, 최악의 경우에는 악의를 가지고 이상한 스크립트나 쿼리를 입력하여 서버로 전송할 수도 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVR42m1R2U7DMBDMF/MnfAa/0JcKkFpKaaAtSCVNFdLch9PmPp2TSS0QIEYra7zeWe14ueGCvu9xFkVxOBw0TXNdRxAEcEVRJEkC3+/3Xdd9VzJwjLNUnuerFf/0xMvycT5/mM1mkImiuFgslsslpfSvuKkrtIzj2PfPURSnWWiRo02Uokz/lDLOzqZp2rblriePyJxOZ8uyCPFUTVytpwjb0SitdV3Tdd0wDLzihAvTNMHTNE2ShJusNl1dE0JM03BdIsm75+3ty/bOcY2qooYxKqGXZRlKRlAMC6M4i4KyqjAD7nXd5EUKB3ESUFqx8X4CZYxUaEwpN/wGHPVdP8YPt/8CBdzRctADk6iqatuObkrrt/vX3Zx45tAPwReiKArD0Pd9dgUZx766mQ5tjZzneUEQHlWR39w9b+8tW8/zce1ois2LX8DaYR5/hsm513chSzM0cxznfPZ140M48Igg9DAbfhXLz7IsuQAEmeKCsiw/AXYMKq9gkgA4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sql injection\" title=\"\" src=\"/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png\" srcset=\"/static/d3d5049ed982f669de8ee19432f6f22e/69538/sql_injection.png 160w,\n/static/d3d5049ed982f669de8ee19432f6f22e/72799/sql_injection.png 320w,\n/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png 554w\" sizes=\"(max-width: 554px) 100vw, 554px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>물론 최근에는 백엔드 프레임워크에서 사용하는 ORM이 자체적으로 이런 인젝션 어택을 방어해주기는 하지만<br>퍼포먼스를 위해 로우 쿼리를 사용하는 경우도 여전히 존재하기 때문에 방심해서는 안 된다</small>\n</center>\n<p>그렇기 때문에 클라이언트 개발자는 1차적으로 사용자의 입력이 올바른 입력인지를 검증하는 밸리데이션 로직을 작성하게 되는데, 이 과정에서 정규식이 매우 유용하게 사용된다.</p>\n<h3>이메일 주소 검증하기</h3>\n<p>이메일은 사용자에게 받는 입력 데이터 중 굉장히 흔한 포맷이다. 게다가 이메일 주소라는 것은 각 필드의 역할도 명확하고 규칙도 제한적이라, 사용자가 입력한 데이터가 올바른 이메일 주소인지 검증하는 것도 크게 어렵지 않다.</p>\n<p>MBP(Mailbox Provider)마다 조금씩 다를 수는 있지만, 인터넷 메세지 프로토콜을 정의하고 있는 <a href=\"https://tools.ietf.org/html/rfc2822#section-3.4.1\" target=\"_blank\" rel=\"nofollow\">RFC 2822#Addr-spec specification</a>에서 정의된 바에 따르면 이메일 주소를 다음과 같은 패턴을 가진 문자열로 정의할 수 있다.</p>\n<blockquote>\n<ol>\n<li>\n<p>이메일 주소는 계정, @, 도메인으로 이루어진 문자열이다.</p>\n</li>\n<li>\n<p>계정은 영어와 숫자, 그리고 <code class=\"language-text\">!#$%&amp;'*+-/=?^_{|}~</code> 등의 특수문자를 사용할 수 있다. <code class=\"language-text\">.</code>도 사용할 수 있지만, 계정이 <code class=\"language-text\">.</code>으로 시작하거나 끝나서는 안 된다.</p>\n</li>\n<li>\n<p>도메인은 영어로 된 호스트와 도메인 식별자가 <code class=\"language-text\">.</code>으로 연결된 형태이다 (ex. google.com)</p>\n</li>\n<li>\n<p>계정과 도메인은 <code class=\"language-text\">@</code>으로 연결되어있다.</p>\n</li>\n</ol>\n</blockquote>\n<p>이처럼 이메일 주소는 한정적인 패턴을 가진 정보이기 때문에 정규식으로 간단하게 패턴 매칭을 통해 검증할 수 있다.</p>\n<h4>이메일 계정</h4>\n<p>이메일의 계정에는 영어와 숫자를 사용할 수 있기 때문에 <code class=\"language-text\">\\w</code>을 사용하여 영어와 숫자를 모두 포함한 워드 그룹을 사용하면 간단하게 이 패턴을 매칭할 수 있다. 또한 <code class=\"language-text\">!#$%&amp;'*+-/=?^_{|}~</code> 등의 특수 문자도 사용할 수 있기 때문에 <code class=\"language-text\">[\\w!#$%&amp;'*+-/=?^_{|}~]</code>과 같이 커스텀 그룹을 사용하면 이메일 계정에 사용할 수 있는 영어와 숫자, 특수문자를 모두 매칭할 수 있다.</p>\n<p>또한 이 패턴은 무조건 1번 이상 등장해야한다. 만약 이 패턴이 0번 등장한다면 계정에 위 패턴이 존재하지 않는다는 것이니 올바른 이메일 주소라고 취급할 수 없기 때문이다. 그래서 표현식의 끝에는 패턴이 1번 이상 등장했음을 의미하는 <code class=\"language-text\">+</code> 수량자를 붙혀줘야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"regex\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-regex line-numbers\"><code class=\"language-regex\"><span class=\"token anchor function\">^</span><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span><span class=\"token char-set class-name\">\\w</span>!#$%&amp;'*+/=?^_{|}~-<span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">+</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 패턴이 기본적인 이메일 계정의 패턴이다. 하지만 RFC 2822에는 까다로운 규칙이 하나 더 있는데, 바로 ”<code class=\"language-text\">.</code>도 사용할 수 있지만, 계정이 <code class=\"language-text\">.</code>으로 시작하거나 끝나서는 안 된다.” 라는 규칙이다.</p>\n<p>물론 문자열이 <code class=\"language-text\">.</code>으로 시작하거나 끝나지 않는 지를 검사하는 문제는 <code class=\"language-text\">^</code>과 <code class=\"language-text\">$</code> 앵커를 사용하면 간단하게 해결할 수 있지만, 중간에 <code class=\"language-text\">.</code>이 등장하는 경우는 어떻게 처리해야할 지 애매하다.</p>\n<p>사실 이렇게 어떤 문자가 중간에 등장할 수도 있고 아닐 수도 있다는 패턴을 가장 간단하게 정의하는 방법은 별 게 없다.</p>\n<blockquote>\n<p><code class=\"language-text\">.</code>은 무조건 계정의 중간에 등장한다. 즉, <code class=\"language-text\">.</code> 뒤에는 반드시 <code class=\"language-text\">[\\w!#$%&amp;'*+-/=?^_{|}~]</code> 패턴이 다시 등장해야한다.</p>\n</blockquote>\n<p>조금 더 정리해보자면, <code class=\"language-text\">.어쩌고저쩌고</code> 라는 패턴은 계정 문자열 내에 등장할 수도 있고 등장하지 않을 수도 있으며, 만약 등장했다고 하면 반드시 <code class=\"language-text\">.</code> 뒤에는 다른 문자들이 있어야한다는 것이다.</p>\n<p>이 패턴만 따로 떼어내서 정규식으로 표현해보자면 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"regex\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-regex line-numbers\"><code class=\"language-regex\"><span class=\"token group punctuation\">(?:</span><span class=\"token special-escape escape\">\\.</span><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span><span class=\"token char-set class-name\">\\w</span>!#$%&amp;'*+/=?^_{|}~-<span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">+</span><span class=\"token group punctuation\">)</span><span class=\"token quantifier number\">*</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>먼저 <code class=\"language-text\">(?:</code>과 <code class=\"language-text\">)</code>로 묶어준 부분부터 살펴보자. 이 표현은 이전 포스팅에서 설명한 캡쳐링 기능과 동일한 역할을 한다.</p>\n<p>사실 캡쳐링은 캡쳐 외에도 여러 개의 표현을 그룹핑하는 기능 또한 가지고 있는데, 이때 그룹핑을 하는 <code class=\"language-text\">()</code>의 앞 쪽에 <code class=\"language-text\">?:</code>라는 표현을 포함시켜주면 캡쳐링 기능은 사용하지 않고 그룹핑 기능만 사용하겠다는 것을 의미하는 것이다.</p>\n<p>그래서 이 기능을 캡쳐링을 하지 않는 그룹을 만든다고 해서 “Non-Capturing Group”라고 한다.</p>\n<p>그리고 그룹 안쪽의 표현 중 <code class=\"language-text\">\\.</code>은 <code class=\"language-text\">.</code>이라는 문자 그 자체를 의미한다. 만약 이스케이핑 처리 없이 <code class=\"language-text\">.</code>만 적었다면 정규식 엔진은 해당 문자를 <code class=\"language-text\">.</code>이 아닌 모든 문자를 의미하는 캐릭터 클래스로 해석할 것이기 때문에, <code class=\"language-text\">.</code>이라는 문자 그대로 해석할 수 있도록 이스케이핑 처리를 해준 것이다.</p>\n<p>그 뒤로는 앞서 계정 패턴에 사용했던 <code class=\"language-text\">[\\w!#$%&amp;'*+/=?^_{|}~-]+</code> 패턴을 그대로 적어주었다. 즉, <code class=\"language-text\">.</code> 뒤에는 저 패턴이 반드시 1개 이상 따라온다는 것을 표현한 것이다.</p>\n<p>그리고 마지막으로 이 전체 패턴은 나타날 수도 있고 나타나지 않을 수도 있다는 것을 표현해주기 위해 그룹이 끝나는 <code class=\"language-text\">)</code> 부분 뒤 쪽에 0번 또는 그 이상의 패턴이 출몰할 수 있다는 <code class=\"language-text\">*</code> 수량자를 붙혀주었다.</p>\n<p>이제 이 패턴을 앞서 정의한 <code class=\"language-text\">[\\w!#$%&amp;'*+/=?^_{|}~-]+</code> 패턴과 합쳐주면 올바른 이메일 계정을 잡아낼 수 있는 패턴이 완성된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 영어 + 숫자</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 계정 중간이 .으로 나누어짐</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// .으로 끝나거나 시작함</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.bboydart91'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>도메인</h4>\n<p>이제 정규식을 사용하여 올바른 이메일 계정을 구분할 수 있는 패턴을 정의했으니, 남은 것은 올바른 도메인을 구분할 수 있는 패턴을 정의하는 것 뿐이다.</p>\n<p>RFC 2822에 따르면 도메인은 “영어로 된 호스트와 도메인 식별자가 <code class=\"language-text\">.</code>으로 연결된 형태”라고 했으니, 패턴 매칭의 조건이 크게 어려운 것은 아니다.</p>\n<p>그러나 조건을 잘 살펴보면 호스트와 도메인 식별자가 <code class=\"language-text\">.</code>으로 연결된 형태라고만 하고 있을 뿐이지 <code class=\"language-text\">.</code>이 단 한번만 등장한다는 이야기가 없기 때문에 이 부분을 신경써줘야한다. 즉, <code class=\"language-text\">google.com</code>과 같은 패턴 뿐만 아니라 <code class=\"language-text\">google.co.kr</code> 처럼 <code class=\"language-text\">.</code>이 여러 번 등장하는 녀석들도 다 잡아줘야 한다는 것이다.</p>\n<p>이런 애매한 패턴들도 방금 전 계정 패턴을 정의할 때 사용했던 Non-Capturing Group을 사용하면 간단하게 정의할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^(?:\\w+\\.)+\\w+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">(?:\\w+\\.)+</code>은 <code class=\"language-text\">google.</code>과 같이 워드 그룹과 <code class=\"language-text\">.</code>이 합쳐진 패턴이 반드시 한 번 이상 나타나야 한다는 것을 표현하고, 이어지는 <code class=\"language-text\">\\w+</code>는 <code class=\"language-text\">.</code> 뒤에도 워드 그룹으로 이루어진 문자열이 반드시 한 번 이상 나타나야 한다는 것을 표현한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 호스트와 도메인 식별자가 모두 존재</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n\n<span class=\"token comment\">// 도메인 식별자가 없음</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n\n<span class=\"token comment\">// 호스트가 없음</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>계정 패턴 표현식과 도메인 패턴 표현식을 합치자</h4>\n<p>이제 올바른 이메일 계정과 도메인을 잡아낼 수 있는 정규식을 정의했으니 마지막 조건인 “계정과 도메인은 <code class=\"language-text\">@</code>으로 연결되어있다”를 만족시키기 위해, 이 두 표현을 <code class=\"language-text\">@</code>로 합쳐주기만 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 계정 패턴: ^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*</span>\n<span class=\"token comment\">// 도메인 패턴 (?:\\w+\\.)+\\w+$</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*@(?:\\w+\\.)+\\w+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart.evan@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart@naver.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.bboydart91@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91@gmail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>전화번호</h3>\n<p>전화번호 같은 경우는 지난 포스팅인 <a href=\"/2020/07/24/about-regular-expression\">불규칙 속에서 규칙을 찾아내는 정규표현식</a>에서 한 차례 언급한 바가 있지만, 이전 포스팅을 읽지 못하신 독자분들을 위해 한번 더 언급하려고 한다.</p>\n<p>전화번호 또한 이메일과 마찬가지로 유저에게 입력받는 경우가 많은 정보이기 때문에 전화번호를 잡아낼 수 있는 패턴을 숙지하고 있으면 좋기 때문이다.</p>\n<p>대한민국의 전화번호는 총 3가지 패턴을 가지고 있는데, 휴대폰 번호같은 경우 반드시 맨 앞에는 3자리의 통신사 식별번호가 위치하고 그 뒤에는 4자리의 전화번호 필드가 두 번 반복되는 형태를 가지며, 그 외 유선전화는 2-3자리의 지역번호 뒤로 3-4 자리의 필드와 4자리의 필드가 반복되는 형태를 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-0101-0101'</span>\n<span class=\"token string\">'02-0101-0101'</span>\n<span class=\"token string\">'031-010-0101'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>이렇듯 전화번호라는 정보는 그저 숫자들이 일정 횟수만큼 반복적으로 나타나는 패턴 뿐이기 때문에 이 패턴을 잡아내기 위한 정규식 또한 간단하게 작성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\d{2,3}-?\\d{3,4}-?\\d{4}$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'01012341234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'010-1234-1234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0212341234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'02-1234-1234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'031-123-1234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>전화번호는 각 필드의 자릿수가 명확하게 정해져있기 때문에 단순한 수량자 표현만으로도 패턴을 잡아낼 수 있다. 또한 전화번호 중간의 하이픈(<code class=\"language-text\">-</code>)은 등장할 수도 있고 아닐 수도 있으므로 0 또는 1회를 의미하는 수량자인 <code class=\"language-text\">?</code> 를 사용하여 패턴을 처리해주었다.</p>\n<p>이렇게 전화번호 패턴을 잡아내는 표현식 자체는 간단하지만, 의외로 신경쓰고 있지 않던 부분에서 실수를 하는 경우가 생기는데, 바로 이런 패턴을 사용하는 상황 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 휴대폰 번호를 잡아내는 패턴</span>\n<span class=\"token operator\">/</span><span class=\"token number\">010</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 패턴의 문제는 <code class=\"language-text\">010</code>이라는 통신사 식별번호를 가지고 있는 휴대폰 번호만 잡아낼 수 있다는 것이다.</p>\n<p>필자같은 아재들이야 <code class=\"language-text\">011</code>, <code class=\"language-text\">017</code>, <code class=\"language-text\">018</code> 등의 번호가 있던 시절을 아직 기억하고 있기 때문에 이런 실수를 할 확률이 낮지만, 간혹 2000년대에 출생하신 분들 중에서 이 부분을 놓치는 경우를 간혹 보았었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAF4bZikSGP/xAAbEAACAQUAAAAAAAAAAAAAAAAAAQISEyEiMv/aAAgBAQABBQLQqki2xYHy5s//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8BMX//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEQMUH/2gAIAQEABj8CwfYxT//EABkQAQEBAQEBAAAAAAAAAAAAAAERACExQf/aAAgBAQABPyEATpndAlQ/HQ9evc7BjOi0uQ7/2gAMAwEAAgADAAAAEGPf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxDBMp//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QHY//xAAZEAEBAAMBAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8QYwEaGgeFyCchT3fIcxh2hVybek20lTmWCj0aO+ZWrXP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"old phone\" title=\"\" src=\"/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg\" srcset=\"/static/5d22138cdc7f106c76184f763b009060/0913d/old_phone.jpg 160w,\n/static/5d22138cdc7f106c76184f763b009060/cb69c/old_phone.jpg 320w,\n/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>1996년 신상 \"걸면 걸리는 걸리버 폰\"...필자의 아버지도 이 폰을 쓰셨던 기억이 있다</small>\n</center>\n<p>물론 정부와 통신사들이 <code class=\"language-text\">01x</code> 번호를 <code class=\"language-text\">010</code>으로 통합하려고 노력하고 있지만 아직까지 추억의 번호를 버리지 못하시는 분들도 꽤나 있기 때문에, 우리는 <code class=\"language-text\">01[0|1|6|7|8|9]</code>처럼 <code class=\"language-text\">011</code>이나 <code class=\"language-text\">016</code>, <code class=\"language-text\">018</code> 등의 통신사 식별번호도 잡아낼 수 있는 패턴을 사용해야한다.</p>\n<h3>비밀번호</h3>\n<p>비밀번호는 사용자의 인증, 보안과 직결된 정보이기 때문에 유효성을 검사해야하는 정보들 중에서도 꽤 까다로운 검사 조건을 자랑하는 녀석이다.</p>\n<p>지금 바로 생각나는 조건은 대략 세 가지 정도인데, 이 조건들은 기본적인 보안 수준을 지키기 위함이기 때문에 서비스 종류를 망라하고 대부분의 서비스에서 지켜지는 녀석들이다.</p>\n<blockquote>\n<ul>\n<li>반드시 소문자, 대문자, 숫자, 특수 문자가 하나씩 포함되어야한다.</li>\n<li>같은 문자가 3번 이상 반복되면 안된다.</li>\n<li>8글자 이상이어야 한다.</li>\n</ul>\n</blockquote>\n<p>이때 사용자가 비밀번호를 틀렸을 때 얼마나 상세한 에러메세지를 보여줄 계획이냐에 따라서 이 조건들을 한 번에 검사하기도 하고 따로 검사하기도 한다.</p>\n<p>가장 첫 번째 조건은 비밀번호 안에 반드시 영어 소문자, 대문자, 숫자, 특수문자가 하나씩은 포함되어있어야 한다는 조건이다. 물론 이 조건을 하나씩 따로 따로 검사한다면 간단하게 <code class=\"language-text\">/[a-z]/g</code>이나 <code class=\"language-text\">/\\d/g</code>와 같은 표현식으로 간단하게 검사할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'test1234!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 따로 검사</span>\n<span class=\"token keyword\">const</span> hasNumberPattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasLowerCasePattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-z]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasUpperCasePattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[A-Z]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasSpecialCharPattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\W</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hasNumberPattern<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'비밀번호에는 숫자가 하나 이상 어쩌고...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hasLowerCasePattern<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'비밀번호에는 영어 소문자가 하나 이상 어쩌고...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>하지만 문제는 이 조건들을 한 번에 검사하고 싶을 때 발생한다. 단순하게 <code class=\"language-text\">[a-zA-Z\\d]</code> 등의 커스텀 그룹으로 검사하려고 한다면 이 중 단 하나의 패턴만 비밀번호에 포함되어 있어도 조건이 통과되어 버릴테고, <code class=\"language-text\">[a-z]+[A-Z]+</code>등의 패턴으로 검사하려고 하면 반드시 “소문자 다음에는 대문자가 와야함”과 같은 순서가 생겨버리기 때문이다.</p>\n<p>이런 상황에서 우리는 약간 트리키(Tricky)한 방법을 사용하여 이 문제를 해결할 수 있다.</p>\n<h4>Lookaround를 사용하여 유효성 검사하기</h4>\n<p>그 방법은 바로 특정 패턴 앞에 나타나는 패턴을 표현하는 방법인 Positive Lookahead(<code class=\"language-text\">(?=)</code>)를 사용하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ://이라는 문자 앞에 등장하는 https를 잡아줘!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">https(?=:\\/\\/)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// null</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['https']</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이렇게 특정 표현의 앞이나 뒤에 나타나는 패턴을 잡아내는 표현을 “Lookaround”라고 하며, Lookaround는 총 4가지 패턴으로 다시 분류된다.</p>\n<table>\n<thead>\n<tr>\n<th>이름</th>\n<th>패턴</th>\n<th>의미</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Positive Lookahead</td>\n<td><code class=\"language-text\">abc(?=123)</code></td>\n<td><code class=\"language-text\">123</code> 앞에 오는 <code class=\"language-text\">abc</code>를 잡아라</td>\n</tr>\n<tr>\n<td>Negative Lookahead</td>\n<td><code class=\"language-text\">abc(?!123)</code></td>\n<td><code class=\"language-text\">123</code> 앞에 오지 않는 <code class=\"language-text\">abc</code>를 잡아라</td>\n</tr>\n<tr>\n<td>Positive Lookbehind</td>\n<td><code class=\"language-text\">(?&lt;=123)abc</code></td>\n<td><code class=\"language-text\">123</code> 뒤에 오는 <code class=\"language-text\">abc</code>를 잡아라</td>\n</tr>\n<tr>\n<td>Negative Lookbehind</td>\n<td><code class=\"language-text\">(?&lt;!123)abc</code></td>\n<td><code class=\"language-text\">123</code> 뒤에 오지 않는 <code class=\"language-text\">abc</code>를 잡아라</td>\n</tr>\n</tbody>\n</table>\n<p>주위를 둘러보라는 “Look around”라는 단어의 의미처럼, Lookaround 표현은 말 그대로 특정 패턴의 앞뒤로 나타나는 패턴이 있는지를 검사하는 용도로 사용되는 표현이지만, 이 표현을 해석하는 정규식 엔진의 작동 원리를 잘 이용하면 문자열 내에 특정한 패턴의 글자가 1번 이상 나타났는지를 잡아내야하는 경우에도 유용하게 사용할 수 있다.</p>\n<p>일단 Lookaround 표현 자체는 특정 문자를 잡아내기 위한 표현이 아니기 때문에 마치 <a href=\"/2020/07/24/about-regular-expression/#%EB%AC%B8%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B2%BD%EA%B3%84%EB%A5%BC-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%95%B5%EC%BB%A4\">\\b 앵커</a>처럼 일종의 경계로 인식된다. 또한 한 가지 중요한 특징은 정규식 엔진이 Lookaround를 사용하여 특정 문자와 매칭에 성공하더라도 마치 해당 매칭이 없었던 것처럼 작동한다는 것이다.</p>\n<p>무슨 이야기인지 잘 이해가 안 가시는 분들을 위해 조금 더 자세한 예시를 들어보도록 하겠다. 만약 <code class=\"language-text\">quit</code>라는 문자열에 <code class=\"language-text\">q(?=u)i</code>와 같은 표현식을 적용해보면 정규식 엔진은 다음과 같이 작동한다.</p>\n<blockquote>\n<ol>\n<li>엔진은 문자열의 <code class=\"language-text\">q</code>를 매칭하려 함. 정규식의 <code class=\"language-text\">q</code> 리터럴과 매칭 성공</li>\n<li>엔진은 문자열의 <code class=\"language-text\">u</code>를 매칭하려 함. 정규식의 <code class=\"language-text\">(?=u)</code> 내부의 <code class=\"language-text\">u</code>가 있기에 매칭 성공. 그리고 엔진은 이 패턴과 <code class=\"language-text\">u</code> 문자가 Lookaround로 매칭 성공되었다는 사실을 잊어버린다.</li>\n<li>이제 엔진은 Lookaround 패턴 뒤에 위치한 패턴을 사용하여 다시 문자열의 <code class=\"language-text\">u</code>를 매칭해보려고 시도함.</li>\n<li>근데 표현식의 다음 표현은 <code class=\"language-text\">i</code>임. <code class=\"language-text\">u</code>와 매칭 실패하고 종료.</li>\n</ol>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">q(?=u)i</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'quit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">null</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이건 어찌보면 당연한 수순인데, <code class=\"language-text\">(?=u)</code>와 같은 Lookaround 표현은 단지 해당 표현 앞에 오는 패턴을 잡아내기 위한 재료일 뿐이지, 실제로 <code class=\"language-text\">u</code>라는 글자를 잡아내기 위한 표현이 아니기 때문이다. 그래서 정규식 엔진은 Lookaround를 사용하여 <code class=\"language-text\">u</code>라는 문자를 매칭했음에도 매칭 성공 후에 <code class=\"language-text\">u</code>라는 문자에 다시 매칭을 시도하는 것이다.</p>\n<p>만약 <code class=\"language-text\">(?=u)</code> 패턴 뒤의 리터럴 표현을 <code class=\"language-text\">i</code>가 아니라 <code class=\"language-text\">u</code>로 바꾸어주면 4번 조건을 통과하면서 매칭을 성공하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">q(?=u)u</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'quit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"qu\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이때 가장 중요한 포인트는 정규식 엔진이 Lookaround로 한번 매칭되었던 문자는 재료로써의 매칭만 성공했기 때문에 정식 매칭 성공이 아니라고 판단하여, Lookaround 표현의 뒤에 위치한 표현을 사용하여 다시 해당 문자에 매칭을 시도한다는 것이다.</p>\n<p>정규식 엔진의 이런 특성을 잘 사용하면 Lookaround 표현을 마치 <code class=\"language-text\">if</code>문 처럼 사용할 수도 있다. 그렇다면 이 방법을 사용하여 아까 필자가 정의했던 비밀번호의 조건 중 하나를 검사해보자.</p>\n<blockquote>\n<p>반드시 소문자, 대문자, 숫자, 특수 문자가 하나씩 포함되어야한다.</p>\n</blockquote>\n<p>하지만 이 조건을 한 번에 모두 검사하면 표현식이 길어질 것 같으니, 우선은 비밀번호 안에 반드시 숫자가 포함되어 있는지만 한번 검사를 해보면 좋을 것 같다. 이때 방금 학습한 Positive Lookahead 표현을 사용하여 해당 조건 여부를 검사해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d).</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abc123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>여기서 정규식이 <code class=\"language-text\">1</code>이라는 문자를 잡아낸 이유는 위에서 이야기했던 것처럼 <code class=\"language-text\">(?=\\d)</code>라는 표현이 <code class=\"language-text\">1</code>과 매칭이 되었고, 이후 정규식 엔진이 해당 표현 바로 뒤에 오는 <code class=\"language-text\">.</code>으로 다시 한번 동일한 문자에 매칭을 시도했기 때문이다.</p>\n<p>이 과정을 조금 더 쉽게 의사코드로 다시 풀어보자면 이런 느낌이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">delete</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 매칭에 성공했으니 이 패턴은 제거</span>\n  <span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 그 뒤에 오는 패턴으로 동일한 문자에 다시 매칭 시도</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>즉, 정규식 엔진이 <code class=\"language-text\">.</code>이라는 리터럴 표현을 가지고 매칭을 시도했다는 것은 그 앞에 있던 <code class=\"language-text\">(?=\\d)</code>라는 표현으로 이미 해당 문자에 매칭을 성공했다는 의미인 것이다.</p>\n<p>이제 숫자를 검사했으니 나머지 조건인 영어 소문자와 대문자, 그리고 특수문자도 동일한 방식을 사용하여 앞 쪽에 줄줄이 붙혀주기만 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// \\d = 숫자</span>\n<span class=\"token comment\">// [a-z] = 영어 소문자</span>\n<span class=\"token comment\">// [A-Z] = 영어 대문자</span>\n<span class=\"token comment\">// [\\W] = Word 그룹(숫자, 영어)가 아닌 문자</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\\d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>a<span class=\"token operator\">-</span>z<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token constant\">A</span><span class=\"token operator\">-</span><span class=\"token constant\">Z</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>\\<span class=\"token constant\">W</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>g</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기서 <code class=\"language-text\">\\W</code> 캐릭터 클래스는 사실 영어, 숫자가 아닌 문자를 의미하는 클래스라서 특수문자 뿐 아니라 한글이나 키릴문자 같은 문자도 전부 포함되기는 하는데, 일일히 특수문자를 나열하기는 가독성이 너무 떨어지니<small><del>귀찮으니</del></small> 대충 썼다. <small>(실제로 사용할 때는 <code class=\"language-text\">!@#$%^...</code>처럼 일일히 나열해주는 방식으로 변경해줘야한다.)</small></p>\n<p>이런 식으로 비밀번호의 나머지 조건인 “같은 문자가 3번 이상 반복되면 안 된다”와 “8자리 이상이어야 한다”라는 조건도 동일한 방법으로 검사해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W])(?!.*(.)\\1{2}).{8,}</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>표현</th>\n<th>의미</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">(?=.*\\d)</code></td>\n<td>연속 또는 하나만 나타날 수 있는 <code class=\"language-text\">\\d</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[a-z])</code></td>\n<td>연속 또는 하나만 나타날 수 있는 <code class=\"language-text\">[a-z]</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[A-Z])</code></td>\n<td>연속 또는 하나만 나타날 수 있는 <code class=\"language-text\">[A-Z]</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[\\W])</code></td>\n<td>연속 또는 하나만 나타날 수 있는 <code class=\"language-text\">[\\W]</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?!.*(.)\\1{2})</code></td>\n<td>연속적으로 3번 나타나지 않는 모든 문자</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">.{8,}</code></td>\n<td>위 조건을 모두 통과한 8자리 문자열 패턴</td>\n</tr>\n</tbody>\n</table>\n<p>이 표현은 앞 쪽의 Positive Lookahead와 Negative Lookahead의 조건을 모두 통과해야 비로소 맨 마지막의 <code class=\"language-text\">.{8,}</code> 표현과 매칭을 시도할 것이기 때문에, 이 조건을 통과한 문자열은 우리가 정의했던 비밀번호의 모든 조건을 통과했다는 의미가 된다.</p>\n<p>물론 비밀번호를 이렇게 하나의 정규식 표현으로 검사해버리면 사용자에게 “비밀번호가 올바르지 않습니다” 정도의 에러 메세지 밖에 보여줄 수 없기 때문에 이렇게 한번에 처리하는 경우가 오히려 드물기는 하지만, Lookaround를 사용한 조건 처리 방법은 꽤나 유용한 편이라고 생각이 들어서 이렇게 설명하게 되었다.</p>\n<h2>불규칙한 문자열에서 원하는 정보만 골라내기</h2>\n<p>대부분의 경우 정규식은 유저의 입력을 검증하는 일에 많이 사용되고는 하지만, 사실 정규식의 존재 의의는 단지 정보를 검증하는 것이라기보다 불규칙한 정보 속에서 특정한 패턴을 찾아내어 추출하는 것에 가깝다.</p>\n<p>이번에는 일상 속에서 필자가 경험했던 사례들과 함께 정규식을 사용하여 어떻게 문제를 해결했었는지에 대한 이야기를 해보려고 한다.</p>\n<h3>주어진 문자열 내에서 숫자만 골라내기</h3>\n<p>주어진 문자열 내에서 숫자만 골라내야하는 상황은 생각보다 현업에서 많이 마주치는 문제 중 하나이다. 필자의 경우에는 원본 데이터를 직접 수정할 수 없는 상황에서 금액이나 나이를 의미하는 숫자만 걸러내어 데이터를 정규화하거나 다른 포맷으로 보여줘야하는 상황을 많이 겪었던 것 같다.</p>\n<p>예를 들어 어떤 API를 사용했는데, 이 API에서는 금액 정보를 <code class=\"language-text\">1000</code>과 같은 Number 자료형이 아닌 <code class=\"language-text\">1,000원</code>과 같은 포맷팅된 문자열로 내려준다고 생각해보자. 그리고 이 데이터를 사용하는 클라이언트에서는 이런 비즈니스 로직을 작성해야하는 상황이다.</p>\n<blockquote>\n<p>“1,000원”과 “2,000원” 중 어떤 것이 큰 금액일까?</p>\n</blockquote>\n<p>물론 가장 좋은 상황은 원본 데이터가 <code class=\"language-text\">1000</code>과 같은 Number 자료형으로 내려오고 데이터를 사용하는 쪽에서 적절한 후처리를 통해 가공하는 것이지만, 그렇게 API를 수정해버리면 이 API가 전체 서비스 중 어느 부분에서 사용되고 있는지 전부 파악하고 이 API를 사용하는 클라이언트의 소스를 모두 수정해줘야 하기 때문에 리스크 관리 차원에서 그냥 넘어가는 경우도 꽤나 있다.</p>\n<p>이런 상황 속에서 개발자는 <code class=\"language-text\">1,000원</code>이라는 문자열에서 콤마와 “원”이라는 글자를 제외하고 <code class=\"language-text\">1000</code>이라는 숫자만 뽑아온 후 두 개의 금액을 비교하는 과정을 거쳐야 할 것이다.</p>\n<p>만약 정규식이 없다면 이 문자열을 <code class=\"language-text\">split</code> 메소드를 통해 분해하고 이렇게 만들어진 배열을 순회하면서 이 문자가 숫자인지 아닌지 구분해야하거나 <code class=\"language-text\">String.prototype.replace</code>를 2번씩 해줘야하는 번거로운 과정을 거쳐야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">NUMBERS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'4'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'6'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'7'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'8'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'9'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'1,000원'</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token constant\">NUMBERS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 또는</span>\n\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'1,000원'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'원'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">String.prototype.replace</code> 메소드를 사용하는 방법도 꽤나 간단해보이기는 하지만, 이 방법의 한계는 <code class=\"language-text\">,</code>나 <code class=\"language-text\">원</code> 이외에 다른 문자가 섞여버리면 그 문자의 경우의 수만큼 <code class=\"language-text\">replace</code>를 반복해야하거나 코드를 수정해줘야 한다는 것이다. <small>(<code class=\"language-text\">1,000원...일까요?</code> 같은 문자열이 들어오는 순간 망한다)</small></p>\n<p>물론 똑같이 문자열 내에서 숫자만 발라내는 코드지만, 정규식을 사용하면 상대적으로 간편하고 유연하게 문제를 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'1,000원'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^0-9]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 또는</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'1,000원'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^\\d]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'1,000원'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\D</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>자바스크립트의 <code class=\"language-text\">String.prototype.replace</code> 메소드는 특정 문자열을 검색한 후에 두 번째 인자로 주어진 문자열로 모두 치환해주는 메소드이다. <code class=\"language-text\">replace</code> 메소드는 정규식을 사용하여 원하는 문자 패턴을 찾는 기능을 지원하고 있기 때문에, 정규식을 사용하여 “숫자가 아닌 것”을 잡아서 모두 빈 문자열로 치환해버린다면 우리가 원하는 바인 “숫자만 골라내기”라는 문제를 해결할 수 있는 것이다.</p>\n<p>즉, 필자가 사용했던 <code class=\"language-text\">[^0-9]</code>, <code class=\"language-text\">[^\\d]</code>, <code class=\"language-text\">\\D</code> 라는 키워드들은 모두 숫자가 아닌 문자들을 잡아내는 키워드를 의미하기 때문에 “숫자가 아닌 것”을 저 정규식들로 한 방에 잡아내어 없애버릴 수 있었던 것이다.</p>\n<p>물론 처음 필자가 작성했던 예시처럼 정규식을 사용하지 않고도 <code class=\"language-text\">split</code>, <code class=\"language-text\">filter</code>, <code class=\"language-text\">join</code>, <code class=\"language-text\">replace</code> 메소드를 조합하더라도 당장 문제를 해결하는데는 아무 어려움이 없지만, 현실에는 문자열 속에서 숫자만 찾아내는 수준의 간단한 문제보다 복잡한 수준의 문제들이 즐비해 있다는 사실을 잊어서는 안된다.</p>\n<p>그럼 현실 속에서 만날 수 있는 문제들 중 조금 더 어려운 문제를 하나만 더 보도록 하자.</p>\n<h3>문장 속에서 금액만 추출하기</h3>\n<p>이번에는 방금 전 봤던 문제와 같은 맥락이지만 조금 더 복잡한 문제를 한번 해결해보려고 한다. 방금 우리가 경험했던 문제는 <code class=\"language-text\">1,000원</code>이라는 누가 봐도 명확히 금액을 의미하는 작은 단어에서 숫자를 의미하는 부분만 뽑아내는 것이었다면, 이번에는 자연어로 이루어진 긴 문장 속에서 금액을 의미하는 부분만 찾아내어 금액 데이터를 추출해야한다.</p>\n<p>예시 문장은 부자가 되고 싶다는 필자의 염원을 담아 적당한 기사에서 발췌해왔다.</p>\n<blockquote>\n<p>현재까지 로또 복권의 판매금액은 38조40230억2565만7000원. 2014년 기준 회당 평균 580억원 가량의 로또가 팔린다. 조사에 따르면 1인당 평균 구매액은 9400원으로 19세 이상 성인 인구 기준 매주 약 512만 명이 로또를 구입한다.</p>\n<p><strong>중앙일보</strong> <em><a href=\"https://news.joins.com/article/20308275\" target=\"_blank\" rel=\"nofollow\">로또 1등 당첨돼 189억 받은 남성 지금은…</a></em></p>\n</blockquote>\n<p>이렇게 긴 자연어 문장 속에서 금액을 의미하는 데이터만 추출해야하는 상황이라면 우리가 풀어야 할 문제는 총 두 가지의 작은 문제로 나눠볼 수 있다.</p>\n<blockquote>\n<ol>\n<li>많은 숫자들 중에서 금액을 의미하는 단어만 뽑아내기</li>\n<li><code class=\"language-text\">580억원</code>과 같은 단어를 Number형인 <code class=\"language-text\">5800000000</code>으로 변환하기</li>\n</ol>\n</blockquote>\n<p>이 중 두 번째 문제는 정규식만으로 해결하기에는 약간 무리가 있으니, 우리는 첫 번째 문제인 “많은 숫자들 중에서 금액을 의미하는 단어만 뽑아내기”에만 집중해보도록 하자.</p>\n<p>만약 이 문제를 해결할 때 필자가 위에서 사용했던 <code class=\"language-text\">\\d</code>나 <code class=\"language-text\">[0-9]</code>와 같은 키워드를 사용하게 되면 금액을 의미하는 숫자가 아닌 <code class=\"language-text\">2014년</code>, <code class=\"language-text\">1인당</code>, <code class=\"language-text\">19세</code>, <code class=\"language-text\">512만명</code>에 포함된 숫자도 함께 뽑혀나올 것이므로 우리는 방금과 같이 간단한 방법으로는 이 문제를 해결할 수가 없다.</p>\n<p>하지만 정규식이 강력한 진짜 이유는 이런 난해한 상황 속에서도 원하는 데이터를 뽑아낼 수 있는 패턴만 파악한다면 간단하게 문제를 해결할 수 있다는 점이다. 사실 일반적인 한글 문장 속에서 금액을 의미하는 단어가 불규칙하게 튀어나오는 것 같지만, 자세히 들여다보면 금액을 의미하는 단어는 특정한 패턴을 가지고 출몰한다.</p>\n<p>먼저, 금액을 의미하는 단어는 “철수는 영희에게 <code class=\"language-text\">1,000원</code>을 갚아야한다”, “철수의 이번 달 월급은 <code class=\"language-text\">30원</code>이다”와 같이 반드시 단어 앞에 띄어쓰기가 들어간다. 하지만 이 규칙은 금액 뿐 아니라 다른 숫자 데이터에도 동일하게 적용되는 한글의 문법이라 이것만으로는 이 숫자가 금액을 의미하는 숫자인지 파악하기가 어렵기 때문에 필자는 한 가지 패턴을 더 적용하려고 한다.</p>\n<p>사실 두 번째 패턴도 누구나 다 알 수 있는 패턴인데, 금액을 의미하는 데이터는 반드시 단위를 표현하는 무언가와 함께 출몰한다는 점이다. <code class=\"language-text\">$1,000</code>, <code class=\"language-text\">1,000원</code>, <code class=\"language-text\">₩1,000</code> 처럼 말이다. 위 문장에서의 금액 데이터는 반드시 숫자 뒤에 KRW를 의미하는 “원”이라는 글자 앞 쪽에 출몰하는 것을 알 수 있다.</p>\n<p>이렇게 패턴을 찾아내고 나면 그 다음부터는 정규식을 사용하여 이 패턴을 가진 단어를 찾아내기만 하면 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'현재까지 로또 복권의 총 판매금액은 38조40230억2565만7000원. 2014년 기준 회당 평균 580억원 가량의 로또가 팔린다. 조사에 따르면 1인당 평균 구매액은 9400원으로 19세 이상 성인 인구 기준 매주 약 512만 명이 로또를 구입한다.'</span><span class=\"token punctuation\">;</span>\n\nstring<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?&lt;=\\s)\\S*?\\d+(?=원)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"38조40230억2565만7000\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"9400\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">String.prototype.match</code> 메소드는 문자열 내에서 인자로 주어진 문자열이나 정규식과 매칭되는 부분을 찾아낼 수 있는 메소드이다. 이번에는 앞선 문제와 다르게 문장 내에서 금액을 표현하는 단어가 여러 개 출몰하기 때문에 <code class=\"language-text\">match</code> 메소드를 사용하여 정규식과 매칭된 모든 부분을 찾아낸 것이다.</p>\n<p>위 문제에서 사용했던 <code class=\"language-text\">[^\\d]</code>와 같은 단순한 표현과 다르게 이번에는 조금 더 복잡해보이는 표현을 사용했는데, 사실 이 정규식도 막상 뜯어보면 의미 자체는 크게 복잡하지 않다. <small>(다시 말하지만 정규식은 그냥 가독성이 떨어질 뿐 의미 자체는 어렵지않다)</small></p>\n<p>필자가 사용한 <code class=\"language-text\">(?&lt;=\\s)\\S*?\\d+(?=원)</code>라는 정규식의 의미는 대략 다음과 같다.</p>\n<blockquote>\n<p><code class=\"language-text\">(?&lt;=\\s)</code>: 공백(<code class=\"language-text\">\\s</code>) 뒤에 있고(<code class=\"language-text\">?&lt;=</code>)</p>\n<p><code class=\"language-text\">\\S*?</code>: 공백이 아닌 문자(<code class=\"language-text\">\\S</code>)가 있을 수도 있고 없을 수도 있으며(<code class=\"language-text\">*?</code>)</p>\n<p><code class=\"language-text\">\\d+</code>: 숫자(<code class=\"language-text\">\\d</code>)가 한 개 이상(<code class=\"language-text\">+</code>) 조합되어있고</p>\n<p><code class=\"language-text\">(?=원)</code>: “원”이라는 글자 앞에 있는(<code class=\"language-text\">?=원</code>) 녀석들</p>\n</blockquote>\n<p>이번 예시 문장 속에서 필자가 찾고자 한 패턴은 단순히 하나의 조건으로 이루어진 것이 아니라 여러 개의 조건으로 이루어진 꽤나 복잡한 패턴이기 때문에, <code class=\"language-text\">\\S</code>, <code class=\"language-text\">\\d</code>와 같은 단순한 키워드만 사용한 것이 아니라 정규식에서 제공하는 기능을 충분히 활용해야했다.</p>\n<p>그리고 특정 패턴 앞이나 뒤에 오는 패턴을 잡아내기 위해 위에서 설명했던 Lookahead와 Lookbehind 기능도 활용했으며, <a href=\"/2020/07/24/about-regular-expression/#greedy-vs-lazy\">이전 포스팅에서 설명했던 Greedy</a>도 사용했다.</p>\n<p>이렇듯 정규식은 단지 문자열 속에서 특정한 패턴을 잡아낼 수 있는 도구이기 때문에 이렇게 원하는 데이터를 뽑아내는 것 뿐 아니라, 사용자의 입력을 검증하거나 HTML, 자바스크립트와 같은 코드를 파싱하거나 JPG, OBJ와 같은 파일을 파싱하는 등 다양한 부분에서 활용될 수 있으니 한번 알아두면 여기저기에 써먹을 수 있는 꿀 지식이라고 할 수 있다.</p>\n<h2>문자열을 내가 원하는 포맷으로 변환하기</h2>\n<p>앞선 예시에 몇 차례 언급된 바가 있지만 정규식은 문자열을 치환하여 내가 원하는 포맷으로 변경할 때도 꽤나 요긴하게 사용될 수 있다.</p>\n<p>가령 사용자의 중요한 정보를 <code class=\"language-text\">*</code>과 같은 문자로 일부 마스킹 처리를 해준다던가, 사용자가 입력한 전화번호나  카드번호 사이 사이에 <code class=\"language-text\">-</code>를 삽입하여 가독성을 높혀주는 경우처럼 말이다.</p>\n<p>이런 문제를 해결할 때 정규식의 캡쳐링 기능을 사용하면 생각보다 쉽게 풀리는 경우가 많다. 물론 캡쳐링 기능 자체는 굉장히 많은 상황에서 사용될 수 있지만, 특히 원하는 부분만 정확히 잡아내어 내가 원하는 문자로 치환해야하는 상황에서 빛을 발한다.</p>\n<h3>사용자의 정보 마스킹하기</h3>\n<p>간혹 서비스를 만들다보면 불특정한 사용자들의 리스트를 보여줘야하는 화면 내에서 각 사용자들의 민감정보를 마스킹해줘야 하는 경우가 왕왕 발생하는데, 이때 이 사용자들이 봇이 아닌 실제 사용자라는 인식을 주기 위해 전체 정보를 마스킹하는 것이 아닌 일부만 마스킹하는 경우가 많다.</p>\n<p>보통 이름같은 경우에는 성, 혹은 이름의 맨 앞 한 글자를 제외한 나머지를 마스킹하거나 전화번호의 경우에는 <code class=\"language-text\">010</code>과 같은 통신사 식별번호와 다음 필드의 한 두 글자를 제외한 나머지를 마스킹하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">mask</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> headCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 문자열 맨 앞의 n 글자를 가져온다</span>\n  <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^.{</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>headCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// head를 제외한 나머지를 마스킹한다</span>\n  <span class=\"token keyword\">const</span> tails <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// head와 tails를 합친다</span>\n  <span class=\"token keyword\">return</span> head <span class=\"token operator\">+</span> tails<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'문동욱'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'01012345678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'문동*'</span>\n<span class=\"token string\">'01012******'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">mask</code> 함수는 마스킹할 글자 수를 인자로 받아서 처리하는 동작을 수행하기 때문에 정규표현식 또한 변수를 사용하여 생성해줘야하며, 이렇게 동적인 값을 사용하여 정규표현식을 생성할 때는 <code class=\"language-text\">/</code>을 사용한 리터럴 표현이 아닌 <code class=\"language-text\">RegExp</code> 객체를 직접 생성하여 표현식을 인자로 넘겨줘야한다.</p>\n<p>하지만 이렇게 단순히 글자 수만 세어서 마스킹 처리를 하게 되면 문제가 발생할 수 있는데, 바로 이런 케이스 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 응 외국인이야~</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'E Van Moon'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전화번호 구분 필드도 있어~</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'010-1234-5678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 두 글자를 건너뛰고 마스킹하려 했지만...</span>\n<span class=\"token comment\">// 실제로 보이는 건 한 글자</span>\n<span class=\"token string\">'E ********'</span>\n\n<span class=\"token comment\">// 다섯 글자를 건너뛰고 마스킹하려 했지만...</span>\n<span class=\"token comment\">// 실제로 보이는 건 네 글자</span>\n<span class=\"token string\">'010-1********'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 이런 경우는 그냥 무시하고 넘어가도 UX에 큰 지장은 없지만, <code class=\"language-text\">E V** ****</code>이나 <code class=\"language-text\">***-****-****</code>처럼 특정 문자는 마스킹이 되지 않도록 처리하는 것이 아무래도 완성도도 높고 가독성도 좋아지기 때문에 해둬서 나쁠 건 없다고 생각한다.</p>\n<p>이런 문제를 해결할 때 어려운 부분은 아무래도 맨 앞 글자 중 공백이나 <code class=\"language-text\">-</code>를 제외하고 글자 수를 세야한다는 점인데, 조금만 생각해보면 꽤나 간단하게 이 패턴을 만들어 낼 수 있다. 정규식의 수량자는 각각의 문자가 아니라 내가 정해준 패턴을 카운팅하는 것이기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// (?:)로 그룹핑된 패턴이 2번 나왔음?</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span>\\<span class=\"token constant\">S</span><span class=\"token punctuation\">[</span>\\s<span class=\"token operator\">-</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 표현은 공백이 아닌 문자(<code class=\"language-text\">\\S</code>) 뒤 쪽으로 공백이나 <code class=\"language-text\">-</code>가 있거나 없을 수 있다는 패턴이 2번 나타난 경우를 의미한다. 즉, <code class=\"language-text\">E E-</code>와 같은 문자열이 있는 경우 <code class=\"language-text\">E\\s</code>나 <code class=\"language-text\">E-</code> 패턴을 하나로 묶어서 카운팅한다는 것이다.</p>\n<p>이렇게 복잡한 패턴 전체를 수량자로 카운팅하기 위해서는 해당 패턴을 <code class=\"language-text\">(?:)</code>(Non Capturing Group)이나 <code class=\"language-text\">()</code>(Capturing Group)으로 그룹핑 해줘야 한다는 점도 잊지말자.</p>\n<p>이러한 정규식 수량자의 특성을 이용하면 앞의 n글자를 카운팅하여 마스킹하지 않는 조건과 공백이나 <code class=\"language-text\">-</code>는 이 카운팅에 포함하지 않는다는 조건을 간단하게 만족시킬 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">enhancedMask</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> headCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \\S[\\s-]* 패턴이 n번 나오는 경우를 모두 묶어서 head로 할당한다</span>\n  <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^(?:\\\\S[\\\\s-]*){</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>headCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// head를 제외한 나머지 부분 중 공백과 -를 제외한 부분을 마스킹한다</span>\n  <span class=\"token keyword\">const</span> tails <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^\\s-]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// head와 tails를 합친다</span>\n  <span class=\"token keyword\">return</span> head <span class=\"token operator\">+</span> tails<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'E Van Moon'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'010-1234-5678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'E V** ****'</span>\n<span class=\"token string\">'010-12**-****'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>IDE 내에서 원하는 부분만 Replace하기</h3>\n<p>우리가 사용하는 대부분의 IDE나 코드 에디터들은 Find나 Replace 기능에 정규식을 사용할 수 있는 기능을 제공한다. 아무래도 코드라는 것은 특정한 패턴을 가지고 있는 문자열의 집합이다보니 단순한 문자열 검색보다는 정규식이 더 효율적일 수 있기 때문이다.</p>\n<p>정규식을 사용하여 원하는 코드를 찾아내거나 변경하는 예시는 여러가지가 있겠지만, 그 중에서도 필자가 평소에 자주 실수하는 상황을 한번 예시로 가져와봤다.</p>\n<p>자바스크립트의 모듈은 <code class=\"language-text\">default</code> 키워드를 사용하지 않고 상수나 함수 등을 그대로 <code class=\"language-text\">export</code>하는 경우에 모듈 자체를 하나의 객체로 평가하여 반환하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Test</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Test</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이때 이 모듈을 사용하는 쪽에서는 일반적으로 위의 예시처럼 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\" target=\"_blank\" rel=\"nofollow\">구조 분해 할당(Destructuring assignment)</a>을 사용하여 원하는 값에 접근하게 되는데, 문제는 이 모듈의 <code class=\"language-text\">export</code> 방식이 중간에 변경되는 경우이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Test</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Test</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// export 구문이 변경됨</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Test<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Module not found: Error: Cannot resolve 'file' or 'directory'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>바쁘게 작업하다보면 모듈을 불러오는 부분을 크게 생각하지 않고 모듈의 <code class=\"language-text\">export</code> 방식을 바꾸는 실수를 하는데, 이런 경우 모듈의 export 방식을 원래대로 되돌리는 방법도 있지만, 개발자의 원래 의도가 <code class=\"language-text\">export default</code>로 객체 자체를 모듈로 사용하는 것일 경우에는 해당 모듈을 <code class=\"language-text\">import</code>하는 부분을 전부 찾아서 변경해주어야 한다.</p>\n<p>앞서 이야기했듯이 대부분의 IDE나 에디터들은 Find와 Replace 기능에 정규식을 사용할 수 있는 기능을 제공해주고 있기 때문에, 이런 상황에서 정규식을 사용하면 간단하게 원하는 부분을 변경할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 528px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGElEQVR42mVSa2+bQBDkj0SNHXCwAfOG443BNgY/kjhxIjVqFUVVlR9QqT9/OpxSqVI/jI5bdndmd05Jy0cMzTdoMw/1qkdZdZhMLHy5NnA9MbEwQphWDNfLYC2FhGH40Kwcoj7h7viMZn1CUfawLAGlLi/4PfyCqrkwlxlcv4LtFliYCYtz3uvPOxtZKbxgTYISNzMfptfC9ltYXg3DqaGbKZS2fkGxeoI+j5GVA/rhCcPhGXV7wmb3iG64oN0+wA1WRI1+/46mfcVM9+HFPUynQhj0CMIBtwsqfNz/wPHwDl2PyFCQrYOqCyLEjCQa49o8YoMYllNQYSlX03LMFUmb9oBut8f5ckIQlVBEcoQZbnGrBxBJy2CDNNtAXwSYTC1Mb2xiiQkxVW3Mbj3u25EkdrhjXgo3KZGUBZYkVIr6Gd+7D1mY5luOe0HV7CmfykjyP0KoM5f/YzhRj7mZQZ2PubGMKXl2j5+bD7L6yIotHTugrHuaEElFN5rzD1zGHOn+WGwHW8yNBJorICjmeP8VSpidYImeo/gct6LsHJFo6aiQxSqJVD6pv81Gt12vkHHdiKXi08MrLi9vGPiEFFGcEWd38tmMoyzMmAYEZI5lU30RytOyU57JZ3zMYdyu5C5zTlS1e6lSCcSAQOyhUWFEhaNrFRNyjp9ma3muN0f53e3umFPj6konkZCmjDv0nQ5ZdIbvdvgDLCpH2gIHBEIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"use regex\" title=\"\" src=\"/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png\" srcset=\"/static/cd303e1a62e4fc55b0c2dc0621732980/69538/use_regex.png 160w,\n/static/cd303e1a62e4fc55b0c2dc0621732980/72799/use_regex.png 320w,\n/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png 528w\" sizes=\"(max-width: 528px) 100vw, 528px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>정규식을 사용하면 원하는 부분만 잡아낼 수 있다</small>\n</center>\n<p>하지만 문제는 <code class=\"language-text\">import { Test } from 'components/Test'</code>라는 부분 중에서 <code class=\"language-text\">import</code>나 <code class=\"language-text\">from 'components/Test';</code>처럼 Replace 후에도 유지되어야하는 부분이 있다는 것이다.</p>\n<p>또한 모듈을 가져오는 방식이 바뀐다 뿐이지 모듈을 할당하는 변수명까지 바꿔버리면 일이 더 많아지기 때문에 왠만하면 <code class=\"language-text\">Test</code>라는 변수명 자체는 그대로 두는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 요것을</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 요렇게 바꾸고 싶다!</span>\n<span class=\"token keyword\">import</span> Test <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 경우에도 정규식의 캡쳐링 기능을 사용하면 정확히 원하는 부분만 캡쳐하여 유지하고 나머지는 변경할 수 있다.</p>\n<p>자바스크립트 코드라고 해도 결국 IDE 입장에서는 단순한 문자열이기 때문에 IDE의 Replace를 사용할 때도 그냥 일반적으로 정규식을 사용하는 경우와 동일하다고 생각하면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> targetCode <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">import { Component } from 'components/Test';</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\ntargetCode<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\{\\s(Component)\\s\\}</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">import Component from 'components/Test';</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이렇게 IDE 상에서 정규식을 사용하여 코드 상의 원하는 패턴을 잡아내어 한번에 치환하는 작업은 필자가 예시로 든 저런 상황보다는 라이브러리를 업데이트했는데 브레이킹 체인지가 있다던가 전체적으로 리팩토링을 한다던가 하는 마이그레이션 작업에서 훨씬 빛을 발한다. <small>(사실 그냥 필자가 자주 하는 실수라서 예시로 가져와봤다)</small></p>\n<h2>마치며</h2>\n<p>정규표현식은 단지 문자열 내에서 원하는 패턴을 매칭하여 가져오는 추상적인 도구이기 때문에 그 활용도가 어마무시한 녀석이다.</p>\n<p>정규식은 필자가 포스팅에 적은 예시들 외에도 파일을 파싱한다던가, 크롤링으로 긁어온 데이터를 정규화한다던가, 로그 파일 내에서 원하는 정보를 빠르게 찾는다던가 하는 많은 상황 속에서 사용될 수 있는데다가 프로그래밍 언어 별로 정규표현식이 그렇게 다르지도 않으므로 한번 익혀두면 두고두고 요긴하게 써먹을 수 있는 도구라고 생각한다.</p>\n<p>이상으로 “정규식은 어떻게 사용되는 것일까?” 포스팅을 마친다.</p>","fields":{"slug":"20200815-regex-example","path":"/2020/08/15/regex-example/","lang":"ko"},"frontmatter":{"title":"정규식은 어떻게 사용되는 것일까?","date":"2020-09-15","categories":["프로그래밍"],"tags":["정규식","정규표현식","Regexp","Regular Expression","숫자만 골라내기","Lookahead","전방탐색","Lookbehind","후방탐색","Lookaround","캡쳐링"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/8c230/thumbnail.png 80w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/23e25/thumbnail.png 160w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/3e5ca/thumbnail.webp 80w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/b72f1/thumbnail.webp 160w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/fc5c5/thumbnail.webp 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/3fbb4/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/61846/thumbnail.png 750w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/d5395/thumbnail.png 1080w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/cc835/thumbnail.png 1366w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/3fbb4/thumbnail.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/6858b/thumbnail.webp 750w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/f5547/thumbnail.webp 1080w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/29310/thumbnail.webp 1366w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"simpleAnn","totalCount":3,"nodes":[{"id":"2a9cb8b0-c998-5f42-b30b-a95548be2845","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%89%B4%EB%9F%B0%EC%9D%98-%EC%97%B0%EA%B2%B0%EC%97%90-%EB%94%B0%EB%9D%BC-%EB%8B%AC%EB%9D%BC%EC%A7%80%EB%8A%94-%EB%A1%9C%EC%8A%A4\">뉴런의 연결에 따라 달라지는 로스</a></p>\n<ul>\n<li><a href=\"#%EB%89%B4%EB%9F%B0%EC%9D%98-%EC%95%84%EC%9B%83%ED%92%8B%EC%9D%B4-%ED%8A%B9%EC%A0%95-%EC%97%90%EB%9F%AC%EC%97%90%EB%A7%8C-%EC%98%81%ED%96%A5%EC%9D%84-%EB%81%BC%EC%B9%9C-%EA%B2%BD%EC%9A%B0\">뉴런의 아웃풋이 특정 에러에만 영향을 끼친 경우</a></li>\n<li><a href=\"#%EB%89%B4%EB%9F%B0%EC%9D%98-%EC%95%84%EC%9B%83%ED%92%8B%EC%9D%B4-%EC%97%AC%EB%9F%AC-%EC%97%90%EB%9F%AC%EC%97%90-%EC%98%81%ED%96%A5%EC%9D%84-%EB%81%BC%EC%B9%9C-%EA%B2%BD%EC%9A%B0\">뉴런의 아웃풋이 여러 에러에 영향을 끼친 경우</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%98%EC%82%AC%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\">의사코드 작성</a></p>\n<ul>\n<li><a href=\"#neuron\">Neuron</a></li>\n<li><a href=\"#layer\">Layer</a></li>\n<li><a href=\"#network\">Network</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EC%9C%BC%EB%A6%AC\">마무으리</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 TypeScript를 사용하여 간단한 인공신경망을 만들어본 것을 간단하게 정리하려고 한다. 이 어플리케이션은 현 직장에서 진행하는 Tech 세미나의 발표용으로 작성한 것이기 때문에 상당히 개발 시간이 촉박했다. 그래서 머릿속으로 생각해놓았던 기능을 전부 구현하지는 못했고 추후 기능을 더 추가해볼 예정이다. 예전에 JavaScript를 사용하여 완전 하드코딩한 ANN을 작성해본 경험이 있었기 때문에 그 코드를 재활용해볼까 생각했었다.(이젠 커밋 로그에서만 볼 수 있는 그 코드…) 근데 막상 뜯어…","html":"<p>이번 포스팅에서는 <a href=\"/2018/07/19/deep-learning-backpropagation\">저번 포스팅</a>에 이어 TypeScript를 사용하여 간단한 인공신경망을 만들어본 것을 간단하게 정리하려고 한다.</p>\n<p>이 어플리케이션은 현 직장에서 진행하는 Tech 세미나의 발표용으로 작성한 것이기 때문에 상당히 개발 시간이 촉박했다. 그래서 머릿속으로 생각해놓았던 기능을 전부 구현하지는 못했고 추후 기능을 더 추가해볼 예정이다.</p>\n<p>예전에 JavaScript를 사용하여 완전 하드코딩한 ANN을 작성해본 경험이 있었기 때문에 <a href=\"https://github.com/evan-moon/simple-ann/commit/82a1f3777de7b48a5cca1f777862620fc3159998\" target=\"_blank\" rel=\"nofollow\">그 코드</a>를 재활용해볼까 생각했었다.<small>(이젠 커밋 로그에서만 볼 수 있는 그 코드…)</small></p>\n<p>근데 막상 뜯어보니까 재활용할 수 있는 부분이 딱히 없어서<small>(완전 하드코딩이었음)</small> 그냥 처음부터 다시 짜기로 했다. 개발에 들어가기에 앞서서 그냥 추상적으로 생각했던 설계와 기능은 이러했다.</p>\n<hr>\n<ol>\n<li>하드코딩은 그만! 구조적인 설계를 하자.</li>\n<li>레이어 개수, 한 레이어당 노드 개수는 자유자재로 변할 수 있어야 한다.</li>\n<li>Loss가 줄어드는 과정이나 Weight들의 변화를 시각화해서 보면 좋을 것 같다!</li>\n<li>어플리케이션 인풋이나 초기 Weight 값을 어플리케이션 내에서 직접 변경할 수 있도록 하자!</li>\n</ol>\n<hr>\n<p>이중 4번은 세미나 PPT도 만들어야 하므로 결국 시간 부족으로 하지 못했고, 1-3번까지는 어떻게든 시간 내에 구현에 성공했다.</p>\n<h2>뉴런의 연결에 따라 달라지는 로스</h2>\n<p>일단 처음에는 ANN의 핵심 기능인 Weight를 업데이트하는 기능을 어떻게 구현할 것인가를 고민해야했다. 사실 Forward propagation을 진행할 때에 Back propagation 때 필요한 대부분의 값을 미리 계산해놓을 수 있다.</p>\n<p>우선, 저번 포스팅에서 사용했던 예시를 가져와서 설명을 진행하려고 한다. 예시의 자세한 내용은 링크에서 확인하자.</p>\n<p><a href=\"/2018/07/19/deep-learning-backpropagation\">Deep Learning이란 무엇인가? - Backpropagation</a></p>\n<p>먼저, Back propagation에서 Weight를 업데이트하는 공식은 다음과 같다.</p>\n<hr>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial w} = \\frac{\\partial E}{\\partial a} \\frac{\\partial a}{\\partial z} \\frac{\\partial z}{\\partial w} \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.3574em;vertical-align:-0.9287em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4287em;\"><span style=\"top:-3.4287em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">a</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9287em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<ol>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: 뉴런의 아웃풋(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span>)이 에러(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>)에 영향을 끼친 기여도</p>\n</li>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial a}{\\partial z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: 인풋(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>)과 Weight(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>)의 곱(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>)이 뉴런의 아웃풋(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span>)에 영향을 끼친 기여도</p>\n</li>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial z}{\\partial w}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: Weight(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>)가 인풋 x Weight(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>)에 영향을 끼친 기여도</p>\n</li>\n</ol>\n<hr>\n<p>사실 뉴런의 Weight를 업데이트할 때 2번과 3번의 식은 변하지 않는다. 변하는 것은 오직 1번, <code class=\"language-text\">뉴런의 아웃풋이 에러에 영향을 끼친 기여도</code> 뿐이다. 더 정확히 말하면 상황에 따라 기여도를 계산하는 방법만 바뀐다. 다음 2가지 케이스를 살펴보자.</p>\n<h3>뉴런의 아웃풋이 특정 에러에만 영향을 끼친 경우</h3>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVR42pVSCQ4DIQj0/5+t94EiBayp3WyTlmTCco0ca+iLDESKMdKcU7FFvnPO1Hu/rTONg1CKGr01GgIhS4VKBcqlEU4kSIlwDEq5sq+ybkq6Hpuc2xRGuhBIUHRiFH7AOUfWWgohqB1Z11rJe08P9lvr1D/4EQCgzWOESJynIHcoSRITAHRC7nxy3rJXDI+6MRaPOYn2rs6dbdtzx8Ckd/kfO7xb7PUIAmToNNy9TCC26HMqxPk7oQhAI+vCgo86+nzlhJgVfxFKF4mvLQdKKeqR9o5zTvo7fSW84r181OXja/RrzRO/iMY4JHe9LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"레이어\" title=\"\" src=\"/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png\" srcset=\"/static/f76f6ac675286dabaa82d611f27f87c9/69538/backprop2.png 160w,\n/static/f76f6ac675286dabaa82d611f27f87c9/72799/backprop2.png 320w,\n/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png 640w,\n/static/f76f6ac675286dabaa82d611f27f87c9/d9199/backprop2.png 960w,\n/static/f76f6ac675286dabaa82d611f27f87c9/21b4d/backprop2.png 1280w,\n/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<p>이 네트워크에서 최종 에러를 <code class=\"language-text\">MSE</code>로 구한다고 가정했을 때 에러는 다음과 같이 나타낼 수 있다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mn>2</mn></msub><mo>−</mo><msub><mi>a</mi><mn>21</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>+</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nE_1 = (target_1 - a_{20})^2 \\\\\n\\\\\nE_2 = (target_2 -a_{21})^2 \\\\\n\\\\\nE = \\frac{1}{2}(E_1 + E_2)\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:8.3557em;vertical-align:-3.9278em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.4278em;\"><span style=\"top:-6.8852em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-5.3852em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.8611em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-2.3611em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"></span></span><span style=\"top:-0.3796em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.9278em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>위 식에서도 볼 수 있듯이 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>20</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{20}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>의 경우 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에는 영향을 끼칠 수 있지만 절대 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에는 영향을 끼칠 수 없다. 아예 식에 그 변수 자체가 없다. 그렇기 때문에 우리는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>을 계산할 때 아예 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>을 제외한 나머지 에러를 모두 <code class=\"language-text\">0</code>으로 간주하고 계산할 수 있다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial a_{20}} = -(t_1 - a_{20})\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<h3>뉴런의 아웃풋이 여러 에러에 영향을 끼친 경우</h3>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVR42pVSCQ4DIQj0/5+t94EiBayp3WyTlmTCco0ca+iLDESKMdKcU7FFvnPO1Hu/rTONg1CKGr01GgIhS4VKBcqlEU4kSIlwDEq5sq+ybkq6Hpuc2xRGuhBIUHRiFH7AOUfWWgohqB1Z11rJe08P9lvr1D/4EQCgzWOESJynIHcoSRITAHRC7nxy3rJXDI+6MRaPOYn2rs6dbdtzx8Ckd/kfO7xb7PUIAmToNNy9TCC26HMqxPk7oQhAI+vCgo86+nzlhJgVfxFKF4mvLQdKKeqR9o5zTvo7fSW84r181OXja/RrzRO/iMY4JHe9LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"backprop2\" title=\"\" src=\"/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png\" srcset=\"/static/f76f6ac675286dabaa82d611f27f87c9/69538/backprop2.png 160w,\n/static/f76f6ac675286dabaa82d611f27f87c9/72799/backprop2.png 320w,\n/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png 640w,\n/static/f76f6ac675286dabaa82d611f27f87c9/d9199/backprop2.png 960w,\n/static/f76f6ac675286dabaa82d611f27f87c9/21b4d/backprop2.png 1280w,\n/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<p>다시 한번 레이어를 보자. 이번에는 좀 더 안쪽에 있는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>이 전체 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>에 얼마나 영향을 끼쳤는지 알아내야한다.</p>\n<p>그냥 이어져 있는 선만 봐도 이 놈은 여기저기 다리를 뻗고 있다는 것을 알 수 있다. <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>를 인풋으로 사용한 뉴런은 물론이고 이 뉴런이 내보낸 아웃풋을 사용한 뉴런 등 많은 것들이 영향을 받았을 것이다. 그래서 이번에는 아까처럼 다른 변수를 무시하거나 하는 짓은 못한다. 다 계산해줘야한다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial a_{10}} = \\frac{\\partial E_1}{\\partial a_{10}} + \\frac{\\partial E_2}{\\partial a_{10}}\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>여기서 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>이 의미하는 것은 <code class=\"language-text\">마지막 레이어</code>부터 <code class=\"language-text\">a_10을 아웃풋으로 내보낸 뉴런이 속한 레이어의 바로 뒤 레이어</code>까지 전파된 에러를 의미한다.</p>\n<p>그리고 이 에러를 구성하는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> 등은 이렇게 구한다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_1}{\\partial a_{10}} = \\frac{\\partial E_1}{\\partial a_{20}} \\frac{\\partial a_{20}}{\\partial z_{20}} \\frac{\\partial z_{20}}{\\partial a_{10}}\\\\\n\\\\\n\\frac{\\partial E_2}{\\partial a_{10}} = \\frac{\\partial E_2}{\\partial a_{21}} \\frac{\\partial a_{21}}{\\partial z_{21}} \\frac{\\partial z_{21}}{\\partial a_{10}}\\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.5149em;vertical-align:-3.0074em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.5074em;\"><span style=\"top:-5.5074em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.5314em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.0074em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>이 식에서 나타난 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>과 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{21}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>의 경우는 위에서 본 1번과 같은 케이스이므로 1번처럼 계산하면 될 것이다. 필자는 이 식을 코드로 구현할 때 헷갈렸던 부분이 하나 있었다.</p>\n<p>한번 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>을 구하는 공식을 보자. 뉴런이 가지고 있지 않은 변수가 2개 존재한다.</p>\n<hr>\n<ol>\n<li><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: <strong>뒤쪽</strong> 레이어에서 전파된 로스</li>\n<li><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: <strong>앞쪽</strong> 레이어 뉴런의 아웃풋</li>\n</ol>\n<hr>\n<p>그래서 처음에는</p>\n<blockquote>\n<p>뭐야, 이거 이터레이션 할때 앞뒤 레이어에 다 접근해서 가져와야하나? 예외처리도 두번 해줘야하고 귀찮네…</p>\n</blockquote>\n<p>라고 생각했었는데…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f24e1eda80a07a2ee4b1996f83434927/232db/hi.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAGdUwVWII//xAAbEAEBAAEFAAAAAAAAAAAAAAABAAIDERMiMf/aAAgBAQABBQLkjPqajeA2w3//xAAWEQADAAAAAAAAAAAAAAAAAAABAhD/2gAIAQMBAT8BUT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAEAAwEAAAAAAAAAAAAAAAAAARAhYf/aAAgBAQAGPwJ1qb//xAAZEAADAQEBAAAAAAAAAAAAAAAAASERQWH/2gAIAQEAAT8h34oRZPSKI0VS7BiSpI2uH//aAAwDAQACAAMAAAAQ5B//xAAWEQEBAQAAAAAAAAAAAAAAAAABACH/2gAIAQMBAT8QBNlv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EFbb/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFB8JH/2gAIAQEAAT8QUXKEtD64oTUW2y/bCATt2GRcVQrvKYlmik+xJZKNuf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hi\" title=\"\" src=\"/static/f24e1eda80a07a2ee4b1996f83434927/c08c5/hi.jpg\" srcset=\"/static/f24e1eda80a07a2ee4b1996f83434927/0913d/hi.jpg 160w,\n/static/f24e1eda80a07a2ee4b1996f83434927/cb69c/hi.jpg 320w,\n/static/f24e1eda80a07a2ee4b1996f83434927/c08c5/hi.jpg 640w,\n/static/f24e1eda80a07a2ee4b1996f83434927/232db/hi.jpg 819w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<blockquote>\n<p>네, 생각해보니까 이 값은 그냥 이 뉴런이 받는 인풋이었습니다.</p>\n</blockquote>\n<p>계속 변수에만 집중하다보니 놓치고있던 쩌는 사실이었다. 모자란 필자의 두뇌에 3초간 묵념한 후 다음 단계로 넘어갔다.</p>\n<h2>의사코드 작성</h2>\n<p>여기까지 생각이 든 후 간략한 의사코드를 먼저 작성했다. 원래는 연습장에 끄적끄적 작성했지만 여기서는 Syntax Highlighting을 위해 TypeScript 문법으로 작성하겠다.</p>\n<p>기본적인 클래스는 <code class=\"language-text\">Network</code>, <code class=\"language-text\">Layer</code>, <code class=\"language-text\">Neuron</code> 총 3개로 생각했었고 Forward propagation만 Back propagation만 어떻게 구현할 지 고민을 많이 했었기 때문에 의사코드도 Back propagation에 관련된 코드만 작성했다.</p>\n<h3>Neuron</h3>\n<p><code class=\"language-text\">Neuron</code> 클래스에서는 Back propagation이 진행되면 <code class=\"language-text\">Neuron</code> 객체가 가지고 있는 Weight를 업데이트하고 이때 Forward Propagation 때 미리 계산해놓았던 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial a}{\\partial z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>를 사용하여 뉴런의 아웃풋이 전파된 에러에 영향을 끼친 기여도인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>도 함께 계산해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Neuron</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> activationFunction미분값<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> weights<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 뉴런의 Weight들</span>\n  <span class=\"token keyword\">private</span> weight미분값들<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 뉴런의 인풋이 전체 에러에 영향을 끼친 기여도들</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">weight들업데이트</span> <span class=\"token punctuation\">(</span>에러미분꼴<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> 새로운weight들 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weights<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>weight<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// wx값이 에러에 영향을 끼친 기여도를 구한다</span>\n      <span class=\"token keyword\">const</span> loss <span class=\"token operator\">=</span> 에러미분꼴 <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activationFunction미분꼴<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// weight는 x가 wx값에 영향을 끼친 기여도와 같다.</span>\n      <span class=\"token comment\">// loss랑 곱해주면 x가 에러에 영향을 끼친 기여도를 알 수 있다.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weight미분값들<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> loss <span class=\"token operator\">*</span> weight<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// x는 weight가 wx값에 영향을 끼친 기여도와 같다.</span>\n      <span class=\"token comment\">// loss랑 곱해주면 w가 에러에 영향을 끼친 기여도를 알 수 있다.</span>\n      <span class=\"token keyword\">return</span> weight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>학습속도 <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>loss <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputs<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weights <span class=\"token operator\">=</span> 새로운weight들<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Layer</h3>\n<p>Layer 클래스는 Back propagation 때 이터레이션을 돌리면서 가지고 있는 뉴런들의 메소드를 호출한다.</p>\n<p>이때 마지막 레이어라면 MSE의 미분값인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mi>i</mi></msub><mo>−</mo><mi>o</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><msub><mi>t</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">-(target_i - output_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">tp</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>를, 마지막 레이어가 아니라면 다음 레이어에 있는 뉴런들의 <code class=\"language-text\">weights</code> 배열을 업데이트할 때 미리 계산해놓은 <code class=\"language-text\">weights미분값들</code> 배열에서 필요한 원소들을 가져와 모두 더한 후 현재 레이어의 Neuron들에게 전달해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Layer</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> 다음레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> 뉴런들<span class=\"token operator\">:</span> Neuron<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">뉴런들업데이트</span> <span class=\"token punctuation\">(</span>전파된에러들<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>다음레이어<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 마지막 레이어가 아니기 때문에 넘어온 에러 중</span>\n      <span class=\"token comment\">// 이 뉴런의 아웃풋과 함께 계산된 weight의 인덱스를 지정해서 사용해야한다.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>뉴런<span class=\"token punctuation\">,</span> index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> loss <span class=\"token operator\">=</span> 전파된에러들<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span>_b<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        neuron<span class=\"token punctuation\">.</span><span class=\"token function\">updateWeights</span><span class=\"token punctuation\">(</span>loss<span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 마지막 레이어라면 각 뉴런이 영향을 준 에러에 대한 기여도만 넘겨줘야 한다.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>뉴런<span class=\"token punctuation\">,</span> index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        neuron<span class=\"token punctuation\">.</span><span class=\"token function\">updateWeights</span><span class=\"token punctuation\">(</span>loss<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>메소드를 보면 현재 업데이트 할 레이어가 마지막 레이어가 아니라면 에러의 자료형이 <code class=\"language-text\">number[]</code>에서 <code class=\"language-text\">number[][]</code>으로 바뀐다. 그 이유는 뉴런 내에서 Weight들이 가지고 있는 <code class=\"language-text\">index</code>값이 있어야 계산이 편하기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>wp_0_0<span class=\"token punctuation\">,</span> wp_0_1<span class=\"token punctuation\">,</span> wp_0_2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>wp_1_0<span class=\"token punctuation\">,</span> wp_1_1<span class=\"token punctuation\">,</span> wp_1_2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>다음 레이어의 에러는 이런 2차원 배열 형태로 리턴된다. 이때 만약 레이어의 0번째 인덱스에 있는 뉴런의 weight들을 업데이트 하려고 한다면, 다음 레이어의 에러 중 이 뉴런과 연결되어있는 에러만 뽑아와야한다.</p>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9044c4f4404075cb83f313c1257b3cd2/d8d7f/model_marked.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 93.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3pYUFAB//8QAGBAAAgMAAAAAAAAAAAAAAAAAABARIDH/2gAIAQEAAQUCJeV//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIFH/2gAIAQEAAT8huF5rlEmIJrx//9oADAMBAAIAAwAAABBUxwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFBUWH/2gAIAQEAAT8Q7KiYgbPqNuChpxEiiZIE1rXjJ+8PH//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"model marked\" title=\"\" src=\"/static/9044c4f4404075cb83f313c1257b3cd2/c08c5/model_marked.jpg\" srcset=\"/static/9044c4f4404075cb83f313c1257b3cd2/0913d/model_marked.jpg 160w,\n/static/9044c4f4404075cb83f313c1257b3cd2/cb69c/model_marked.jpg 320w,\n/static/9044c4f4404075cb83f313c1257b3cd2/c08c5/model_marked.jpg 640w,\n/static/9044c4f4404075cb83f313c1257b3cd2/6a068/model_marked.jpg 960w,\n/static/9044c4f4404075cb83f313c1257b3cd2/d8d7f/model_marked.jpg 1032w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<p>이 그림에서 보듯 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>와 함께 계산에 사용된 Weight변수는 다음 레이어에 있는 뉴런들의 <code class=\"language-text\">weights</code> 배열의 <code class=\"language-text\">0</code>번 원소로 저장되어 있다.</p>\n<p>즉, 업데이트하고자 하는 뉴런의 인덱스가 <code class=\"language-text\">0</code>이면 다음 레이어에 있는 모든 <code class=\"language-text\">Neuron.weights[0]</code>에만 영향을 주었다고 할 수 있고 그렇기 때문에 참조해야하는 에러도 <code class=\"language-text\">Neuron.weightPrimes[0]</code>인 것이다.</p>\n<h3>Network</h3>\n<p>Network 클래스는 레이어와 뉴런의 생성, forward propagation이나 Back propagation 등 네트워크의 동작을 제어, 통합된 결과나 에러를 관리 정도의 책임을 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Network</span> <span class=\"token punctuation\">{</span>\n  학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  레이어들<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  인풋레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  아웃풋레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  전체에러미분값들<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -(target_i - output_i)들</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">backPropagation</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> 뒤집힌레이어들 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>레이어들<span class=\"token punctuation\">]</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> 학습속도 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>학습속도<span class=\"token punctuation\">;</span>\n    뒤집힌레이어들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>레이어 <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> 에러들<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>레이어<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>아웃풋레이어<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        에러들 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>전체에러미분값들<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Back propagation이 진행 중이라 다음 레이어의 계산이 먼저 끝나있다.</span>\n        <span class=\"token comment\">// private 멤버변수에 접근하면 에러나지만 의사코드니까 그냥 넘어가자</span>\n        에러들 <span class=\"token operator\">=</span> 레이어<span class=\"token punctuation\">.</span>다음레이어<span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>뉴런 <span class=\"token operator\">=></span> 뉴런<span class=\"token punctuation\">.</span>weightPrimes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      레이어<span class=\"token punctuation\">.</span><span class=\"token function\">뉴런들업데이트</span><span class=\"token punctuation\">(</span>에러들<span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<h2>마무으리</h2>\n<p>대충 이렇게 작성이 되었다면 이제 메인함수에서 이터레이션을 돌리면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> network <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Network</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> 학습횟수<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  network<span class=\"token punctuation\">.</span><span class=\"token function\">forwardPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  network<span class=\"token punctuation\">.</span><span class=\"token function\">backPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span><span class=\"token function\">getResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>뭐 대충 이런 식으로 하면 될 거 같다. forward propagation은 그냥 이터레이티브하게 쭉쭉 계산만 하면 되므로 어렵지 않았지만 Back propagation은 뭔가 직관적으로 와닿지 않아서 처음에 조금 힘들었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a6a0af1fc538bcf1a9e649c98c648503/37cd1/result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4klEQVR42p2SWRaDIAxFXU3rLCKDOLTa7n9NKS/Kj0fsaT8umIFHEkyabqRS9JSWmrLqnKKxlNcmGg8gJ8GSliqK1DOpfmGEmi5zIRoVvBcdVa0jM6yk3ULGrWSHF3eD2M+CQKiR7Phi+vFN1os2cvhPEIcwO+1FlH3yjiqvCmBBLME4Aj/axvykmX279vujYNC1bwMGKjrCfk+rp9N4ALMFCeYEwVsuuc0zcLs0DyqE4wvOyOq9wqYbWDmWCNAqLs34oI2Se5JQKmYFWv/fhaphYw9wnvDf3URqf6zNj7Nb/ANExjiY0Dq0+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result\" title=\"\" src=\"/static/a6a0af1fc538bcf1a9e649c98c648503/6af66/result.png\" srcset=\"/static/a6a0af1fc538bcf1a9e649c98c648503/69538/result.png 160w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/72799/result.png 320w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/6af66/result.png 640w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/d9199/result.png 960w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/21b4d/result.png 1280w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/37cd1/result.png 3332w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>소박하게 완성된 모습</small>\n</center>\n<p>그래도 어떻게든 세미나 시간에 맞춰서 네트워크 구현을 했고, d3를 사용해서 소박한 시각화도 하고나니 뿌듯하긴 했다. 다음에 시간나면 레이어마다 Activation Function을 변경할 수 있거나 Loss Function도 변경할 수 있게 개선해보고 싶다.</p>\n<p>이상으로 TypeScript를 사용하여 간단한 인공 신경망 개발 삽질기 포스팅을 마친다.\n전체 소스는 <a href=\"https://github.com/evan-moon/simple-ann\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에서 확인할 수 있고 라이브 데모는 <a href=\"https://simple-ann.herokuapp.com/\" target=\"_blank\" rel=\"nofollow\">여기</a>에서 확인 가능하다.</p>","fields":{"slug":"20190226-simple-ann","path":"/2019/02/26/simple-ann/","lang":"ko"},"frontmatter":{"title":"TypeScript와 함께 간단한 인공 신경망 만들기","date":"2019-02-26","categories":["프로그래밍","머신러닝"],"tags":["Machine Learning","Deep Learning","TypeScript","타입스크립트","인공 신경망","머신러닝","딥러닝","머신러닝 기초","딥러닝 기초","D3","데이터 시각화","Backpropagation"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282838","images":{"fallback":{"src":"/static/9c635f6fbad59694351ca8f61df30b9f/d803c/thumbnail.png","srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/8c230/thumbnail.png 80w,\n/static/9c635f6fbad59694351ca8f61df30b9f/23e25/thumbnail.png 160w,\n/static/9c635f6fbad59694351ca8f61df30b9f/d803c/thumbnail.png 320w,\n/static/9c635f6fbad59694351ca8f61df30b9f/ed377/thumbnail.png 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/3e5ca/thumbnail.webp 80w,\n/static/9c635f6fbad59694351ca8f61df30b9f/b72f1/thumbnail.webp 160w,\n/static/9c635f6fbad59694351ca8f61df30b9f/fc5c5/thumbnail.webp 320w,\n/static/9c635f6fbad59694351ca8f61df30b9f/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#282838","images":{"fallback":{"src":"/static/9c635f6fbad59694351ca8f61df30b9f/69306/thumbnail.png","srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/61846/thumbnail.png 750w,\n/static/9c635f6fbad59694351ca8f61df30b9f/d5395/thumbnail.png 1080w,\n/static/9c635f6fbad59694351ca8f61df30b9f/69306/thumbnail.png 1305w","sizes":"100vw"},"sources":[{"srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/6858b/thumbnail.webp 750w,\n/static/9c635f6fbad59694351ca8f61df30b9f/f5547/thumbnail.webp 1080w,\n/static/9c635f6fbad59694351ca8f61df30b9f/f7e8b/thumbnail.webp 1305w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5003831417624521}}}}},{"id":"416940c6-a69e-5574-bbfc-320a2786a133","tableOfContents":"<ul>\n<li><a href=\"#artificial-neural-network%EB%9E%80\">Artificial Neural Network란?</a></li>\n<li><a href=\"#%EC%95%94%ED%9D%91%EA%B8%B0%EC%9D%98-%EB%8F%84%EB%9E%98\">암흑기의 도래</a></li>\n<li><a href=\"#%EB%8B%A4%EC%8B%9C-%EC%9E%AC%EA%B8%B0%EC%9D%98-%EC%8B%9C%EA%B0%84\">다시 재기의 시간</a></li>\n</ul>","excerpt":"이번 포스팅에서는 딥러닝이 무엇인지, 기존의 뉴럴네트워크와 다른 점이 무엇인지에 대해서 포스팅하려고 한다. Artificial Neural Network란? 인류는 과거부터 생각하는 기계를 만드려는 노력을 해왔다. 그 과정에서 다양한 시도들이 있었고, 결국 고안해낸 방법은 인간의 뇌를 프로그래밍해보자는 것이였다. 이런 발상이 가능했던 것은 현대에 이르러 인간의 뇌의 구조를 어느 정도 알 수 있었기 때문이기도 하고 이 구조가 생각보다 단순하다는 점도 있었다. 인간의 뇌는 이 뉴런이라고 불리는 세포들의 집합체이다. 이 뉴런들은 그냥 …","html":"<p>이번 포스팅에서는 딥러닝이 무엇인지, 기존의 뉴럴네트워크와 다른 점이 무엇인지에 대해서 포스팅하려고 한다.</p>\n<h2>Artificial Neural Network란?</h2>\n<p>인류는 과거부터 생각하는 기계를 만드려는 노력을 해왔다. 그 과정에서 다양한 시도들이 있었고, 결국 고안해낸 방법은 <strong>인간의 뇌를 프로그래밍</strong>해보자는 것이였다. 이런 발상이 가능했던 것은 현대에 이르러 인간의 뇌의 구조를 어느 정도 알 수 있었기 때문이기도 하고 이 구조가 생각보다 단순하다는 점도 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3823b410149889c0e9aefb86b3f6e80e/21b4d/neural.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVR42n2SW2/TQBCF/eOREEK8AT8AISgiQlVb0pCGXqI2KcVNHDuxY2/ttRPFleMrm8SOL2sz8UYCqYLzsPvg+c4czyxX1fJ8bzKZmKaZ53n1D5VlCWeWZXEcb7fboii4shYhK8dxgKSU/h/2/UDTNOgUhiEHgG0/fmteDgajNE2xbsFZ7ipLMGIAk6roo6E8EuQHZDAvDi5JlFsn3cZBq9Pufv7Y1FQdY2wYBkII4mW1iiJ3nOjksNs+7UJPZreDAz+660tnX/ne9b0oTAn5lSQxJALvIAhUVZtOFVlRVbF/1GidtXqq8gCN97A8RpBQGhrCHZIEraxoVf79qzTJq0dLMG+egZeJ56Ig/4l9ey31b4R2k3/z+ujw0xD9bHjah3W0oNkKRkpp7ls/JlevVuEcimlBN+uYzWIHG/pswI/bx/zzl++uzkUL3S/xd1M4sPi3xvA97r3A4pfIw/G2iOPNuhaY7uGpgk6PLy86vbGALjq3S9efL9wwIrutppsViVhImJnv+/AWdF2HVe9h1/UMA0sjOUkSe+GkaUaLHErh09J1Yeae5wL2dPMcjGo2m7EYT0UIsW07qsX6MzH4N1O3XWVgB46dAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"neural\" title=\"\" src=\"/static/3823b410149889c0e9aefb86b3f6e80e/6af66/neural.png\" srcset=\"/static/3823b410149889c0e9aefb86b3f6e80e/69538/neural.png 160w,\n/static/3823b410149889c0e9aefb86b3f6e80e/72799/neural.png 320w,\n/static/3823b410149889c0e9aefb86b3f6e80e/6af66/neural.png 640w,\n/static/3823b410149889c0e9aefb86b3f6e80e/d9199/neural.png 960w,\n/static/3823b410149889c0e9aefb86b3f6e80e/21b4d/neural.png 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>인간의 뇌는 이 뉴런이라고 불리는 세포들의 집합체이다. 이 뉴런들은 그냥 어떠한 신호를 받은 후에 변조한 다음 다시 전달하는 세포인데, 뇌는 결국 이 뉴런들이 그물망처럼 연결되어있는 구조인 것이다.</p>\n<p>결론적으로 인간의 뇌의 구조는 굉장히 복잡하게 연결되어있지만 그 연결체인 뉴런 자체는 놀랍도록 단순한 구조로 되어있었다는 말이다.</p>\n<p>이 뉴런들은 수상돌기에서 input 신호를 받아 축색돌기로 output 신호를 전송하는 구조인데 이때 다음 뉴런으로 신호가 전달되기 위해서는 일정 세기 이상의 신호를 보내야한다. 좀 더 자세히 알아보자면 대략 다음 순서를 따른다고 한다.</p>\n<hr>\n<ol>\n<li>뉴런에 연결되어 있는 여러 개의 시냅스로 부터 신호를 받는다. 이때 신호는 분비된 화학물질의 양(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>)과 분비되는 시간(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>)의 곱으로 나타내어 질 수 있다.</li>\n<li>여러 개의 시냅스로부터 받은 여러 개의 신호를 합친다.</li>\n<li>다음 시냅스로 전달하기 전에 특정한 값(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>)이 더해진다.</li>\n<li>이 값이 특정 임계점을 넘어가면 신호가 다음 시냅스로 전달된다.</li>\n</ol>\n<hr>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d395b79311597e65462e2af18844938/36dd4/hoe.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHvZXoaoCwQD//EABkQAQEBAAMAAAAAAAAAAAAAAAEAQREhMf/aAAgBAQABBQJhSO7cDg2PP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABwQAAEDBQAAAAAAAAAAAAAAAAEAEDERICFBUf/aAAgBAQAGPwJCvMvEHdv/xAAeEAEAAgIBBQAAAAAAAAAAAAABABEhMUFhcYGRwf/aAAgBAQABPyFUdYFYIZazECxsY3rv5DbKvQmIu/EQTZxHU0dp/9oADAMBAAIAAwAAABAzwAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAeEAEAAgIDAAMAAAAAAAAAAAABABEhMUFxoYHB4f/aAAgBAQABPxAELpGOWD6qURYNh+QWYFiQWOiqFoeX35LVUpMD5AbMxrAyxQAIbA0qvsm3qedP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hoe\" title=\"\" src=\"/static/6d395b79311597e65462e2af18844938/36dd4/hoe.jpg\" srcset=\"/static/6d395b79311597e65462e2af18844938/0913d/hoe.jpg 160w,\n/static/6d395b79311597e65462e2af18844938/cb69c/hoe.jpg 320w,\n/static/6d395b79311597e65462e2af18844938/36dd4/hoe.jpg 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>어라...? 생각보다 심플한데...?</small>\n</center>\n<p>사람의 뇌가 이렇게 간단한 원리도 작동한다니…그럼 이걸 기계로도 만들 수 있지 않을까? 라는데서 출발한 것이 바로 ANN(Artificial Neural Network)인 것이다. 이러한 뉴런의 작동방식은 다음과 같이 도식화 될 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/500df46f498950f6283ef37cc89af689/aeb8d/artificial-neural-network.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd5FCKD/xAAWEAEBAQAAAAAAAAAAAAAAAAAQATH/2gAIAQEAAQUCbh//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAIRARMVH/2gAIAQEAAT8hG6Hw3n//2gAMAwEAAgADAAAAEPMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAITFRkRD/2gAIAQEAAT8QZOxyEui1ROI9XZUoorMGB5//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"artificial neural network\" title=\"\" src=\"/static/500df46f498950f6283ef37cc89af689/c08c5/artificial-neural-network.jpg\" srcset=\"/static/500df46f498950f6283ef37cc89af689/0913d/artificial-neural-network.jpg 160w,\n/static/500df46f498950f6283ef37cc89af689/cb69c/artificial-neural-network.jpg 320w,\n/static/500df46f498950f6283ef37cc89af689/c08c5/artificial-neural-network.jpg 640w,\n/static/500df46f498950f6283ef37cc89af689/aeb8d/artificial-neural-network.jpg 651w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이 도식을 다시 수식으로 나타내면 다음과 같다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>x</mi><mi>i</mi></msub><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">  f(\\sum\\limits_{i=1}^n x_i w_i + b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span></span></div>\n<p>이때 이 함수 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span>를 <strong>Activation Funcntion</strong>이라고 하며, 이 함수는 함수 내부의 값이 일정 기준을 넘어가면 <code class=\"language-text\">1</code>을 리턴하고 아니면 <code class=\"language-text\">0</code>을 리턴하는 함수이다.</p>\n<p>이것이 하나의 뉴런이라고 생각해보았을때, 이 뉴런을 여러 개 모아본다면 대략 아래와 같은 구조가 될 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 520px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8c5079be24758bf721e5270eaa520a7b/ddb38/single-layer-network.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuZ3oaggFwf//EABkQAAMAAwAAAAAAAAAAAAAAAAACMQEQIf/aAAgBAQABBQIaabmBI8P/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAZEAACAwEAAAAAAAAAAAAAAAAQMQARIEH/2gAIAQEABj8CHQ6jx//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExURBhwf/aAAgBAQABPyFaXmO9WnRMzIdXb+TsPYlkq1ffhOCf/9oADAMBAAIAAwAAABBwAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAdEAACAgIDAQAAAAAAAAAAAAABEQAhMVFBgZGh/9oACAEBAAE/EGILdgmuoBdpeQzDQHJlUDQ9QAExXga8lAtgauFYErkXDRkb3Pmn/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"single layer network\" title=\"\" src=\"/static/8c5079be24758bf721e5270eaa520a7b/ddb38/single-layer-network.jpg\" srcset=\"/static/8c5079be24758bf721e5270eaa520a7b/0913d/single-layer-network.jpg 160w,\n/static/8c5079be24758bf721e5270eaa520a7b/cb69c/single-layer-network.jpg 320w,\n/static/8c5079be24758bf721e5270eaa520a7b/ddb38/single-layer-network.jpg 520w\" sizes=\"(max-width: 520px) 100vw, 520px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>그리고 이런 형태의 기계는 이미 1950년대에 개발되어 <code class=\"language-text\">AND</code>나 <code class=\"language-text\">OR</code>문제 같은 선형방정식은 풀 수 있을 정도였다.</p>\n<h2>암흑기의 도래</h2>\n<p>자 그럼 여기서 한가지 의문이 생긴다.</p>\n<blockquote>\n<p><em>아니 지금은 21세기하고도 18년이나 지난 2018년인데, 1950년대에 이미 저기까지 개발이 됐으면 지금은 로봇이 나 대신 일도 해주고 어? 빨래도 해주고 어? 해야하는 거 아니냐!</em></p>\n</blockquote>\n<p>하는 생각이 들 수도 있다. 우선 아까 말한 <code class=\"language-text\">AND</code>와 <code class=\"language-text\">OR</code>를 다시 보자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 301px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f87f23e2080e37f8112b3b9c36b731fe/fb933/or.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 111.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUklEQVR42q2UzU7CQBDHZwkUUZGmBfEDFQxqJHwkcOPoyYN3D76KiRevPoqv49mLD+HF9T90tpUNK2zLJL+03c7+d2Znd4jWmwJt0Ae75GHK8V0Fj+AVXDl8vcXrYA9UfCafyKTCVgJz0AUB2AeH1mLKitq8h6C5KqsbEVHicLlmr8z4Mbhw+UZSgO0Ydj3uZ4Ilj+ItR6Zl4A3n7JNowO8vmwv+a40PoqFOqp0uVMQiThlCtzq5GYVF06JAaAoaRUVTwS/c2W+isZa7m1d06dhApA4moLyNlJU8W4h0lDdKO8KFwA9RR2ddxlswkEMdWJH2jKgVKRcudl29prSnyqquA6FrcGSJ8veZS7AtKwaS+o6hQ1S7xxgO/vQdW8CL8pj4ctFqQmoc9pO0o1iILMIHZPGcpB4eZOPse/qn6ywM/2mWs71zZHeuucoTkj0/Nwq/gg4uC2jd4OgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"or\" title=\"\" src=\"/static/f87f23e2080e37f8112b3b9c36b731fe/fb933/or.png\" srcset=\"/static/f87f23e2080e37f8112b3b9c36b731fe/69538/or.png 160w,\n/static/f87f23e2080e37f8112b3b9c36b731fe/fb933/or.png 301w\" sizes=\"(max-width: 301px) 100vw, 301px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 314px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8f39aacbb882bcd4bc1eb9e0b43e1935/5b158/and.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 105.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLUlEQVR42qWUS27CMBCGxwkUIShUBfMQVSmPLnivgB234BRwA67Moqu2rMyfxhGWlWlix9KnsWLn98x4PET8CEAfSDAAVXIYImX+Ck7gDC7gM2Wv0yjDtTpsDTRAyTqUFQ7BB7dBeXh0AC0tXD3Glq7w6otoYuTTDPcFvHEpGOh8CR1emCz8EI2/id5TPG3o/9icSm7hRrRU8bpT+JygiER+ieawbUtU+AgmF1MCa6VrMY+nMutEiNQR/ga2XCRkW/QZoitlXFwRD4W2XeR0lhV6Xg//9qCUhupRo/6CpihqdIT5kPNUujz6RCAKXcXvnQoJGsIhd0Ed443mKYsKaP5X4F3dAAKjNWURcGJTsNcNQjoQdageGNme7sDCoxs/gS3X/gOPjh518JX99Q7bxDBuFb9FLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"and\" title=\"\" src=\"/static/8f39aacbb882bcd4bc1eb9e0b43e1935/5b158/and.png\" srcset=\"/static/8f39aacbb882bcd4bc1eb9e0b43e1935/69538/and.png 160w,\n/static/8f39aacbb882bcd4bc1eb9e0b43e1935/5b158/and.png 314w\" sizes=\"(max-width: 314px) 100vw, 314px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p><code class=\"language-text\">AND</code>와 <code class=\"language-text\">OR</code>는 선형방정식이기 때문에 1950년대에 개발한 Single Layer Network를 적용한 기계로도 이런 문제를 푸는 건 별로 어렵지 않았다.</p>\n<p>여기까지 성공한 사람들은 “대박이다. 이제 금방 기계가 걷고 뛰고 말도 할 수 있겠구나!” 라고 생각했지만 문제는 비선형방정식인 <code class=\"language-text\">XOR</code>였다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 281px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c0b2a78291b2791a491b0e6ccd63d2d3/6b1e2/xor.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 104.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA9klEQVR42mNgIAxYgZgTiLmBmAuImRnIBExQWg+Iy4E4A4gbgFgMKs6ISyMjDkmYmCAQqwOxNhArQ11KlGu4CVhANBAAYjkg1sBhICMaJgjUgNgRGuCwMFMkFE5IQAQacXAAijUeqAQDNEbZSfAhGzaLQYKiDFQEBA38D4y4/yRE1oC40PknA4MOlM1IkYEg7/5jYIgG4iVANgtFLvwPzYJA2g2Igyl2IZKBEf+p4WWYZiAt9R+SrykPQ5rEMj0NZMKW9diRCk4BaN7GVtIgY1gBbAXEQuiFCbILmUgsD1mxqRcGYi2oKyWAWBxKE4PFoI4BleYSALBSH0JnOftvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"xor\" title=\"\" src=\"/static/c0b2a78291b2791a491b0e6ccd63d2d3/6b1e2/xor.png\" srcset=\"/static/c0b2a78291b2791a491b0e6ccd63d2d3/69538/xor.png 160w,\n/static/c0b2a78291b2791a491b0e6ccd63d2d3/6b1e2/xor.png 281w\" sizes=\"(max-width: 281px) 100vw, 281px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이건 어떻게 선을 그어도 도저히 답이 없다. <code class=\"language-text\">XOR</code>는 두 개의 인풋이 같지 않으면 참인 논리식이다. 굉장히 단순해보였지만 <code class=\"language-text\">XOR</code>는 선형방정식이 아니기 때문에 직선으로는 50%의 정확도밖에 낼 수 없었다. 여기까지 직면한 사람들은 좌절하게 된다.</p>\n<blockquote>\n<p>We need to use MLP, Multi Layer Perceptrons.\nNo one on earth had found a viable way to train MLPs good enough to learn such simple functions.</p>\n<p><strong>Perceptrons(1969)</strong> <em>Marvin Minsky</em></p>\n</blockquote>\n<p>결국 1969년 <strong>Marvin Minsky</strong> 가 Single Layer Network로는 <code class=\"language-text\">XOR</code>문제를 풀 수 없다는 것을 수학적으로 증명한다. Multi Layer Network로는 가능한데 아무도 학습시킬 수 없다고 했단다.</p>\n<p>이 이유에 대해서 좀 더 알아보고 싶어서 Perceptrons의 구문을 찾아보니</p>\n<blockquote>\n<p>it ought to be possible to devise a training alhorithm to optimize the weights in thie using, say, the magnitude of a reinforcement signal to communicate to the net the cost of an error. We have not investigated this.</p>\n<p><strong>Perceptrons(1969)</strong> <em>Marvin Minsky</em></p>\n</blockquote>\n<p>라고 한다. 구글링 하다보니까 Perceptrons라는 책은 <code class=\"language-text\">XOR</code>가 Single Layer Network로 왜 학습이 안되는 지에 대해서 집중적으로 설명하고나서</p>\n<blockquote>\n<p>어…음 Multi Layer Network로 학습시키면 되는 건 알겠는데 어떻게 해야하는 지는 아직 잘 모르겠다.</p>\n</blockquote>\n<p>정도로 쓴 책이라는 의견도 있었다. 어찌됐던 이 책으로 인해 많은 사람들이 실망을 하게 되고 이로 인해 Neural Network라는 학문 자체가 암흑기에 빠지게 된다.</p>\n<h2>다시 재기의 시간</h2>\n<p>1974년 Paul Werbos 는 자신의 박사학위 논문에 “Backpropagation”이라는 알고리즘을 게재하게 된다.</p>\n<p>그러나 슬프게도 아무도 관심을 가지지 않았고 심지어 Perceptrons의 저자인 Marvin Minsky 마저도 관심을 안가져줬다고 한다. 심지어 1982년도에 다시 논문을 발표하게 됐는데 이때도 그냥 묻혔다고 한다…</p>\n<p>그러다가 1986년, Geoffrey Hinton이 독자적으로 이 알고리즘을 다시 발견하고 발표하게 되면서 주목을 받게된다. 어쨋든 이 알고리즘으로 인해 Multi Layer Network의 학습이 가능하다는 사실이 알려지고 다시 Neural Network 학문은 활기를 띄게 된다.</p>\n<p>Backpropagation이라는 알고리즘의 구조는 간단하다. 그냥 말 그대로 에러를 output에서 가까운 쪽부터 뒤로(Back) 전파(Propagation)하는 것이다. 그래서 “역전파알고리즘”이라고도 불린다.</p>\n<p>이 Backpropagation에 대해서는 <a href=\"/2018/07/19/deep-learning-backpropagation\">다음 포스팅</a>에서 다시 다루도록 하겠다.</p>\n<p>이상으로 Deep Learning 첫번째 포스팅을 마친다.</p>","fields":{"slug":"20180717-deep-learning-intro","path":"/2018/07/17/deep-learning-intro/","lang":"ko"},"frontmatter":{"title":"[Deep Learning 시리즈] 딥러닝이란 무엇일까?","date":"2018-07-17","categories":["프로그래밍","머신러닝"],"tags":["머신러닝","딥러닝","머신러닝 기초","딥러닝 기초","튜토리얼","Machine Learning","Deep Learning","Backpropagation","역전파","신경"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/26718e1f085d210bba3e45681f40c1fa/3a812/thumbnail.jpg","srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/1cda5/thumbnail.jpg 80w,\n/static/26718e1f085d210bba3e45681f40c1fa/b1a47/thumbnail.jpg 160w,\n/static/26718e1f085d210bba3e45681f40c1fa/3a812/thumbnail.jpg 320w,\n/static/26718e1f085d210bba3e45681f40c1fa/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/3e5ca/thumbnail.webp 80w,\n/static/26718e1f085d210bba3e45681f40c1fa/b72f1/thumbnail.webp 160w,\n/static/26718e1f085d210bba3e45681f40c1fa/fc5c5/thumbnail.webp 320w,\n/static/26718e1f085d210bba3e45681f40c1fa/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/26718e1f085d210bba3e45681f40c1fa/e1182/thumbnail.jpg","srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/23110/thumbnail.jpg 750w,\n/static/26718e1f085d210bba3e45681f40c1fa/e1182/thumbnail.jpg 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/6858b/thumbnail.webp 750w,\n/static/26718e1f085d210bba3e45681f40c1fa/c1538/thumbnail.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"15d574d5-b2d1-569a-8438-4f76beff3779","tableOfContents":"<ul>\n<li><a href=\"#backpropagation%EC%9D%B4%EB%9E%80\">Backpropagation이란?</a></li>\n<li><a href=\"#chain-rule%EC%9D%B4%EB%9E%80\">Chain Rule이란?</a></li>\n<li><a href=\"#forward-propagation\">Forward-propagation</a></li>\n<li><a href=\"#backpropagation\">Backpropagation</a></li>\n<li><a href=\"#%EC%BD%94%EB%94%A9%ED%95%98%EA%B8%B0\">코딩하기</a></li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 Backpropagation에 대해서 알아보려고 한다. 앞서 설명했듯, 이 알고리즘으로 인해 Multi Layer Network에서의 학습이 가능하다는 것이 알려져, 암흑기에 있던 Neural Network 학계가 다시 관심을 받게 되었다. Backpropagation이란? Backpropagation은 오늘날 Artificial Neural Network를 학습시키기 위한 일반적인 알고리즘 중 하나이다. 한국말로 직역하면 역전파라는 뜻인데, 내가 뽑고자 하는 값과 실제 모델이 계산한 이 얼마…","html":"<p>이번 포스팅에서는 <a href=\"/2018/07/17/deep-learning-intro\">저번 포스팅</a>에 이어 Backpropagation에 대해서 알아보려고 한다. 앞서 설명했듯, 이 알고리즘으로 인해 Multi Layer Network에서의 학습이 가능하다는 것이 알려져, 암흑기에 있던 Neural Network 학계가 다시 관심을 받게 되었다.</p>\n<h2>Backpropagation이란?</h2>\n<p>Backpropagation은 오늘날 Artificial Neural Network를 학습시키기 위한 일반적인 알고리즘 중 하나이다. 한국말로 직역하면 역전파라는 뜻인데, 내가 뽑고자 하는 <code class=\"language-text\">target</code>값과 실제 모델이 계산한 <code class=\"language-text\">output</code>이 얼마나 차이가 나는지 구한 후 그 오차값을 다시 뒤로 전파해가면서 각 노드가 가지고 있는 변수들을 갱신하는 알고리즘인 것이다.</p>\n<p>다행히 여기까지는 직관적으로 이해가 되지만 필자는 다음 2가지의 원리가 궁금했다.</p>\n<hr>\n<ol>\n<li>각 노드가 가지고 있는 <code class=\"language-text\">weight</code>이나 <code class=\"language-text\">bias</code>같은 변수들을 어떻게 업데이트할 것인가?</li>\n<li>Multi Layer Network에서 각 노드나 레이어가 가지고 있는 변수들은 다 제각각인데 그 값들을 얼마나 변경해야하는지 어떻게 알 수 있는가?</li>\n</ol>\n<hr>\n<p>다행히 이 문제들은 Chain Rule이라는 법칙을 사용해 해결할 수 있다고 한다. 한번 차근차근 살펴보자.</p>\n<h2>Chain Rule이란?</h2>\n<p>Chain Rule, 미분의 연쇄법칙이라고도 불리는 법칙이다. 이건 고딩때는 안 배우고 대학수학에서 배우기 때문에, 대학 때 이산수학만 배웠던 필자는 이해가 잘 되지않아서 고생했다. 먼저 정의부터 보자.</p>\n<hr>\n<p>함수 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">f, g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span>가 있을 때 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span>가 모두 미분 가능하고 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mo>∘</mo><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">F = f(g(x)) = f \\circ g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∘</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span>로 정의된 합성 함수이면 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span></span>는 미분 가능하다.</p>\n<p>이때 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>F</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>⋅</mo><msup><mi>g</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">F'(x) = f'(g(x)) \\centerdot g'(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin amsrm\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></span>이다.</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mo>=</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">t = g(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></span>라고 한다면, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{dy}{dx} = \\frac{dt}{dx} \\frac{dy}{dt}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2772em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">x</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4461em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2772em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">x</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4461em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>가 성립한다.</p>\n<hr>\n<p>정의를 보면 뭔 말인가 싶을 수 있는데, 먼저 합성 함수는 그냥 어떤 함수의 인자로 다른 함수가 주어진 함수이다. 코드로 작성해보면 어떤 느낌인지 금방 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">g</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> g <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">g</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">F</span> <span class=\"token operator\">=</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token function\">g</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// F = 12</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그럼 미분 가능하다는 말이 의미하는 것은 뭘까? 만약 미분을 <code class=\"language-text\">x</code>와 <code class=\"language-text\">x'</code>간의 기울기를 구하는 무언가 정도로 이해하고 있다면 “합성 함수 어쩌고에서 기울기를 왜 구하지?”라고 생각할 수 있다.</p>\n<p>하지만 기울기를 구한다는 말은 변화량을 구한다는 것과 동일하다. 위의 코드를 보면 변수 <code class=\"language-text\">F</code>를 선언할 때 <code class=\"language-text\">g</code>에 주는 값을 변경한다면 최종적으로 <code class=\"language-text\">F</code>값이 바뀐다는 것을 알 수 있을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">F</span> <span class=\"token operator\">=</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token function\">g</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// F = 15</span>\n<span class=\"token constant\">F</span> <span class=\"token operator\">=</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token function\">g</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// F = 9</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>즉 Chain Rule이란 쉽게 얘기하자면 <code class=\"language-text\">x</code>가 변화했을 때 함수 <code class=\"language-text\">g</code>가 얼마나 변하는 지, 그리고 그로 인해 함수 <code class=\"language-text\">g</code>의 변화로 인해 함수 <code class=\"language-text\">f</code>가 얼마나 변하는 지를 알 수 있고, 이러한 연쇄적인 변화를 알 수 있다면 최종적으로 최종 값 <code class=\"language-text\">F</code>의 변화량에 기여하는 각 함수 <code class=\"language-text\">f</code>와 <code class=\"language-text\">g</code>의 기여도를 알 수 있다는 것이다.</p>\n<p>방금 전 위에서 예시로 든 합성함수 <code class=\"language-text\">F</code>의 식에 들어가는 변수는 <code class=\"language-text\">x</code> 하나였다. 그럼 변수가 여러 개면 어떻게 되는 걸까?</p>\n<hr>\n<p>이변수함수 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">z = f(x, y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span>에서 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mo separator=\"true\">,</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>y</mi><mo>=</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mo separator=\"true\">,</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x = h(s,t), y = g(s,t)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span></span>일 때</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mo separator=\"true\">,</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mo separator=\"true\">,</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(x,y), g(s,t), h(s,t)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span></span>가 모두 미분 가능하면</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>s</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>x</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>x</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>s</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>y</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>y</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>s</mi></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>x</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>x</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>y</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>y</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>t</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial z}{\\partial s} = \\frac{\\partial z}{\\partial x}\\frac{\\partial x}{\\partial s} + \\frac{\\partial z}{\\partial y}\\frac{\\partial y}{\\partial s} \\\\\n\\\\\n\\frac{\\partial z}{\\partial t} = \\frac{\\partial z}{\\partial x}\\frac{\\partial x}{\\partial t} + \\frac{\\partial z}{\\partial y}\\frac{\\partial y}{\\partial t} \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.6038em;vertical-align:-3.0519em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.5519em;\"><span style=\"top:-5.5519em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">s</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">s</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">s</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.5314em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.0519em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>로 나타내어질 수 있다.</p>\n<hr>\n<p>이 말인 즉슨 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span></span>나 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>가 얼만큼인지는 모르지만 어쨌든 변했을 때, 함수 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>의 변화량을 저런 식으로 구할 수 있다는 것이다.</p>\n<p>그리고 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∂</mi></mrow><annotation encoding=\"application/x-tex\">\\partial</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span></span></span></span></span>는 편미분을 뜻하는 기호인데, 메인이 되는 변수 하나를 남겨두고 나머지 변수는 그냥 개무시하는 미분법이다. 그래서 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>의 관계를 구하는 식에서는 아예 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>가 없는 것을 알 수 있다.</p>\n<p>여기까지 이해가 되었다면 이제 본격적으로 Backpropagation이 어떻게 진행되는 지 살펴보도록 하자.</p>\n<h2>Forward-propagation</h2>\n<p>이제 직접 Backpropagation이 어떻게 이루어지는 지 한번 계산해보자.</p>\n<p>그 전에 먼저 Forward Propagation을 진행해야한다. 초기화한 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>값과 input인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>을 가지고 계산을 진행한 뒤 우리가 원하는 값이 나오는 지, 나오지 않았다면 얼마나 차이가 나는지를 먼저 구해야한다.</p>\n<p>필자가 이번 계산에 사용할 모델은 아래와 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6bea6301a87b4abf4d9afed1d36309c7/eff3b/model.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8klEQVR42nWSiQ6EMAhE+/+/arx6eFe2DxejrmtCLDNAmVEnf56cs/R9L/u+34mSxxBl27bXPkeDkVsZsq6rGLYsi77zF8/5F78uQLhhGKSua20Yx1FCCPquqkrati25P3Fqm6bRerhpmnTwPM/SdZ3yzoCU0nkrhWAE28CBc4YjbEvUENSSu8OWvWwQyw2jElffDi5IjPEm0bhXDymkiZsPr/ItTK4psK2eHoI5Vud2hgHShGdgSAUnp5hzKjgcF1w/IDnqHEX8HgqmQbz36g8msxlDycE5g1GvisoAhsLbx3S2/tUTk2NhNYab9KdkPPwAWmfDEcEZGkEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"model\" title=\"\" src=\"/static/6bea6301a87b4abf4d9afed1d36309c7/6af66/model.png\" srcset=\"/static/6bea6301a87b4abf4d9afed1d36309c7/69538/model.png 160w,\n/static/6bea6301a87b4abf4d9afed1d36309c7/72799/model.png 320w,\n/static/6bea6301a87b4abf4d9afed1d36309c7/6af66/model.png 640w,\n/static/6bea6301a87b4abf4d9afed1d36309c7/d9199/model.png 960w,\n/static/6bea6301a87b4abf4d9afed1d36309c7/21b4d/model.png 1280w,\n/static/6bea6301a87b4abf4d9afed1d36309c7/eff3b/model.png 2072w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이 모델은 2개의 input, 2개의 output을 가지고 2개의 Hidden Layer를 가진 2-Layer NN 모델이다. 이제 각 변수에 값을 할당해보자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/541c216e75f5ad75826fc1cab60ddb16/437e0/add_var.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHklEQVR42nVSCY7EIAzj/2/dwpTSljtrA5lDs4uEIImJHbdG/lmtNfHeS+/9I8/4OI6vvC7Ta5V637NJKVJiHOCCe0ppnI0xMCSpwOecZx6xrpgmztwAOmslA3hflxz7LhdOu1nZcacaNvaPx6hbYJ1zIx9BTgLWLXIpZTGaCEhUsFawJgAJZj5BTUDjthRzs0aVfMtpqJR5nkZ94SMqIMv0p788s07OEAbZu5d/+WhGgR9g24ayAlYy6QPWdqiPMT0Vve/XR5yxSfDQ/2wSl9Ec8TzP4VGAKt7pM4l498hz02eOTXK+s84jLmiI2fU3iAAFmM/H2pDNqOzAx4i4K9kgQSOuuvCMjZq6jBmbubpG1/Flna235+/zOfKs/wLIFsLYIqvgXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"add var\" title=\"\" src=\"/static/541c216e75f5ad75826fc1cab60ddb16/6af66/add_var.png\" srcset=\"/static/541c216e75f5ad75826fc1cab60ddb16/69538/add_var.png 160w,\n/static/541c216e75f5ad75826fc1cab60ddb16/72799/add_var.png 320w,\n/static/541c216e75f5ad75826fc1cab60ddb16/6af66/add_var.png 640w,\n/static/541c216e75f5ad75826fc1cab60ddb16/d9199/add_var.png 960w,\n/static/541c216e75f5ad75826fc1cab60ddb16/21b4d/add_var.png 1280w,\n/static/541c216e75f5ad75826fc1cab60ddb16/437e0/add_var.png 2094w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>먼저 필자가 output으로 원하는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>의 값은 <code class=\"language-text\">0.2</code>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>의 값은 <code class=\"language-text\">0.7</code>이다. 그리고 input으로는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에 <code class=\"language-text\">0.2</code>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에 <code class=\"language-text\">0.5</code>를 넣어주었고, 각각의 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>값은 그냥 느낌 가는대로 넣어놓았다.</p>\n<p>필자는 이 계산에서 Activation Function으로 Sigmoid함수를 사용하고, Error Function은 Mean Squared Error함수를 사용하려고 한다.</p>\n<p>먼저 <code class=\"language-text\">Layer0</code>에서 받을 값부터 계산해보자. 보통 행렬로 계산한다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>10</mn></msub><mo>=</mo><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.16em\" columnalign=\"center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mo>×</mo><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.16em\" columnalign=\"center center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>w</mi><mn>20</mn><mn>0</mn></msubsup></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>11</mn></msub><mo>=</mo><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.16em\" columnalign=\"center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mo>×</mo><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.16em\" columnalign=\"center center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>w</mi><mn>11</mn><mn>0</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>w</mi><mn>21</mn><mn>0</mn></msubsup></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nz_{10} = \\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix} \\times  \\begin{bmatrix} w^0_{10} &#x26; w^0_{20} \\end{bmatrix} \\\\\n\\\\\nz_{11} = \\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix} \\times  \\begin{bmatrix} w^0_{11} &#x26; w^0_{21} \\end{bmatrix} \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.9001em;vertical-align:-3.2em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7em;\"><span style=\"top:-5.7em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.95em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.85em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.85em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">]</span></span></span></span></span><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.95em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">[</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.85em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.85em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">]</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>저 행렬 곱을 풀어보면 다음과 같이 되고 결국 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">wx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">x</span></span></span></span></span>들의 합의 형태로 나타난다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>10</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><msubsup><mi>w</mi><mn>20</mn><mn>0</mn></msubsup><mo>=</mo><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo>×</mo><mn>0.1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mo stretchy=\"false\">(</mo><mn>0.5</mn><mo>×</mo><mn>0.3</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.02</mn><mo>+</mo><mn>0.15</mn><mo>=</mo><mn>0.17</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>11</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><msubsup><mi>w</mi><mn>11</mn><mn>0</mn></msubsup><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><msubsup><mi>w</mi><mn>21</mn><mn>0</mn></msubsup><mo>=</mo><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo>×</mo><mn>0.2</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mo stretchy=\"false\">(</mo><mn>0.5</mn><mo>×</mo><mn>0.1</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.04</mn><mo>+</mo><mn>0.05</mn><mo>=</mo><mn>0.09</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nz_{10} = x_1w^0_{10} + x_2w^0_{20} = (0.2\\times0.1) + (0.5\\times0.3) = 0.02 + 0.15 = 0.17 \\\\\n\\\\\nz_{11} = x_1w^0_{11} + x_2w^0_{21} = (0.2\\times0.2) + (0.5\\times0.1) = 0.04 + 0.05 = 0.09 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5482em;vertical-align:-2.0241em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5241em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.5</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.3</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.02</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.15</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.17</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.6359em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.5</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.04</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.05</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.09</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.0241em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">z_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mn>11</mn></msub></mrow><annotation encoding=\"application/x-tex\">z_{11}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>의 값을 구했으면 이제 Activation Function을 사용하여 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>11</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{11}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>값을 구해보자. 필자가 사용할 Activation Function인 Sigmoid의 수식은 다음과 같다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>x</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\sigma = \\frac{1}{1 + e^{-x}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0908em;vertical-align:-0.7693em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6973em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>이걸 매번 손으로 계산하면 너무 번거롭기 때문에 JavaScript를 사용해 다음과 같이 함수를 하나 만들어 놓고 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">exp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>10</mn></msub><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><msub><mi>z</mi><mn>10</mn></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.54</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>11</mn></msub><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><msub><mi>z</mi><mn>11</mn></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.52</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\na_{10} = \\sigma(z_{10}) = 0.54 \\\\\n\\\\\na_{11} = \\sigma(z_{11}) = 0.52 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.54</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.52</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>다음 레이어도 같은 방식으로 값을 계속 구해보면 다음과 같은 값들을 구할 수 있다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>10</mn></msub><mo>=</mo><mn>0.17</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>10</mn></msub><mo>=</mo><mn>0.54</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>11</mn></msub><mo>=</mo><mn>0.09</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>11</mn></msub><mo>=</mo><mn>0.52</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>20</mn></msub><mo>=</mo><mn>0.27</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>20</mn></msub><mo>=</mo><mn>0.57</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>z</mi><mn>21</mn></msub><mo>=</mo><mn>0.43</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>a</mi><mn>21</mn></msub><mo>=</mo><mn>0.61</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nz_{10} = 0.17 \\\\\na_{10} = 0.54 \\\\\n\\\\\nz_{11} = 0.09 \\\\\na_{11} = 0.52 \\\\\n\\\\\nz_{20} = 0.27 \\\\\na_{20} = 0.57 \\\\\n\\\\\nz_{21} = 0.43 \\\\\na_{21} = 0.61 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:16.5em;vertical-align:-8em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:8.5em;\"><span style=\"top:-10.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.17</span></span></span><span style=\"top:-9.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.54</span></span></span><span style=\"top:-7.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-6.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.09</span></span></span><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.52</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.27</span></span></span><span style=\"top:-0.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.57</span></span></span><span style=\"top:1.34em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.43</span></span></span><span style=\"top:4.34em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.61</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:8em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>결국 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>는 각각 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>20</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{20}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>과 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>21</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{21}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>과 같으므로, 우리는 최종 output값을 구하게 되었다. 근데 우리가 처음에 원했던 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>과 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>는 <code class=\"language-text\">0.2</code>와 <code class=\"language-text\">0.7</code>이었는데, 우리가 구한 output은 <code class=\"language-text\">0.57</code>과 <code class=\"language-text\">0.61</code>으로 거리가 있다.</p>\n<p>이제 Mean Squared Error함수를 사용하여 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>를 구할 차례이다. 결과값으로 얻기를 바라는 값을 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>로, 실제 나온 값을 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span>라고 할 때 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>는 다음과 같다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>∑</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">E = \\frac{1}{2}\\sum(t_i - y_i)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0074em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol large-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>필자같은 수포자를 위해 쉽게 설명하자면, 그냥 마지막 Output Layer에서 뱉어낸 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span>들과 하나하나 레이블링했던 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\hat{y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span></span></span></span></span>가 얼마나 차이나는 지 구한 다음에 그 값들의 평균을 내는 것이다.</p>\n<p>결국 ANN을 학습시킨다는 것은 이렇게 구한 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>의 값을 0에 근사시킨다고 볼 수 있다. 여기서 나온 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>값을 이제 Backpropagation하면 되는 것이다.</p>\n<p>이것도 매번 손으로 계산하기 귀찮으니까 그냥 함수를 하나 만들자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token constant\">MSE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">targets<span class=\"token punctuation\">,</span> values</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>values <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  targets<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">+=</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>target <span class=\"token operator\">-</span> values<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token constant\">MSE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.57</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.61</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.072</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 여기서 구한 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>값을 사용하여 Backpropagation을 진행해보자.</p>\n<h2>Backpropagation</h2>\n<p>Forward Propagation을 통해서 구해진 값을 다시 그림으로 살펴보면 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bee6e00819fa572bf5c9e807d5088c7e/57dc1/backprop1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAlElEQVR42oWO2w7EIAhE+/8fa6sVRUFngaTdZF+WZBIuZ8gcIgudFSKK1hV7b0TNaZJox9BgVBcary/z1ga1CbH7UYmQc8F1XSBqYOYwZJtruaO/7/oy1ZjeGWutkN/dU4yh1uxhrQGeZ0KzhWtaOjcxD0s3UEoOJqUEMt4Z3zsnIvAfjw5fPEdVDf3WP8ZTdkvp3AcVlDkZzfFPJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"backprop1\" title=\"\" src=\"/static/bee6e00819fa572bf5c9e807d5088c7e/6af66/backprop1.png\" srcset=\"/static/bee6e00819fa572bf5c9e807d5088c7e/69538/backprop1.png 160w,\n/static/bee6e00819fa572bf5c9e807d5088c7e/72799/backprop1.png 320w,\n/static/bee6e00819fa572bf5c9e807d5088c7e/6af66/backprop1.png 640w,\n/static/bee6e00819fa572bf5c9e807d5088c7e/57dc1/backprop1.png 718w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>필자는 이 중 현재 <code class=\"language-text\">0.4</code>로 할당되어 있는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>값을 업데이트 하려고 한다. 그러려면 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>이 전체 에러인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>에 얼마나 영향을 미쳤는지, 즉 기여도를 구해야한다. 이때 위에서 설명한 Chain Rule이 사용된다.</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>에 대한 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>의 기여도를 식으로 풀어보면 다음과 같다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial w^1_{10}} = \\frac{\\partial E}{\\partial a_{20}} \\frac{\\partial a_{20}}{\\partial z_{20}} \\frac{\\partial z_{20}}{\\partial w^1_{10}} \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>먼저 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>부터 차례대로 풀어보자. 원래 우리가 구한 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>는 아래와 같은 식이였다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>2</mn></msub><mo>−</mo><msub><mi>a</mi><mn>21</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E = \\frac{1}{2}((t_1 - a_{20})^2 + (t_2 -a_{21})^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0074em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">((</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></div>\n<p>여기서 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>20</mn></msub><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>21</mn></msub><mo>=</mo><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{20} = y_1, a_{21} = y_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>이기 때문에 치환해주었다. 하지만 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>는 편미분식이기 때문에 지금 구하려는 값과 상관없는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>21</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{21}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>는 그냥 <code class=\"language-text\">0</code>으로 생각하고 풀면된다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo><mo>∗</mo><mo>−</mo><mn>1</mn><mo>+</mo><mn>0</mn><mo>=</mo><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo>−</mo><mn>0.57</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mo>−</mo><mn>1</mn><mo>=</mo><mn>0.37</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial a_{20}} = (t_1 - a_{20}) * -1 + 0 = (0.2 - 0.57) \\times -1 = 0.37 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.57</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.37</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>이 계산 결과가 의미하는 것은 전체 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>에 대하여 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>20</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{20}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, 즉 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>가 <code class=\"language-text\">0.37</code>만큼 기여했다는 것을 의미한다. 이런 식으로 계속 계산해보자.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow></mfrac><mo>=</mo><msub><mi>a</mi><mn>20</mn></msub><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.57</mn><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mn>0.57</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.25</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial a_{20}}{\\partial z_{20}} = a_{20} \\times (1 - a_{20}) = 0.57 \\times (1 - 0.57) = 0.25 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.57</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.57</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.25</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mfrac><mo>=</mo><msub><mi>a</mi><mn>10</mn></msub><mo>+</mo><mn>0</mn><mo>=</mo><mn>0.54</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial z_{20}}{\\partial w^1_{10}} = a_{10} + 0 = 0.54 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.54</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mfrac><mo>=</mo><mn>0.37</mn><mo>×</mo><mn>0.25</mn><mo>×</mo><mn>0.54</mn><mo>=</mo><mn>0.049</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial w^1_{10}} = 0.37 \\times 0.25 \\times 0.54 = 0.049 \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.37</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.25</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.54</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.049</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>최종적으로 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>에 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>가 기여한 값은 <code class=\"language-text\">0.049</code>이라는 값을 계산했다. 이제 이 값을 학습식에 넣으면 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>값을 업데이트 할 수 있다.</p>\n<p>이때 값을 얼마나 건너뛸 것이냐 또는 얼마나 빨리 학습시킬 것이냐 등을 정하는 Learning Rate라는 값이 필요한데, 이건 그냥 사람이 정하는 상수이고 보통 <code class=\"language-text\">0.1</code>보다 낮은 값으로 설정하나 필자는 <code class=\"language-text\">0.3</code>으로 잡았다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msubsup><mi>w</mi><mn>10</mn><mrow><mn>1</mn><mo>+</mo></mrow></msubsup><mo>=</mo><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup><mo>−</mo><mo stretchy=\"false\">(</mo><mi>L</mi><mo>∗</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mfrac><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.4</mn><mo>−</mo><mo stretchy=\"false\">(</mo><mn>0.3</mn><mo>×</mo><mn>0.049</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.3853</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nw^{1+}_{10} = w^1_{10} - (L * \\frac{\\partial E}{\\partial w^1_{10}}) = 0.4 - (0.3 \\times 0.049) = 0.3853\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.4436em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">+</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2564em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.4</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.049</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.3853</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>이렇게 해서 필자는 새로운 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>값인 <code class=\"language-text\">0.3853</code>을 얻었다. 이런 식으로 다른 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>값을 계속 업데이트 해보자.\n이번에는 Layer1보다 한 층 더 깊숙히 있는 Layer0의 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>w</mi><mn>0</mn></msup><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">w^0{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">10</span></span></span></span></span></span>값을 업데이트 할 것이다.</p>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVR42pVSCQ4DIQj0/5+t94EiBayp3WyTlmTCco0ca+iLDESKMdKcU7FFvnPO1Hu/rTONg1CKGr01GgIhS4VKBcqlEU4kSIlwDEq5sq+ybkq6Hpuc2xRGuhBIUHRiFH7AOUfWWgohqB1Z11rJe08P9lvr1D/4EQCgzWOESJynIHcoSRITAHRC7nxy3rJXDI+6MRaPOYn2rs6dbdtzx8Ckd/kfO7xb7PUIAmToNNy9TCC26HMqxPk7oQhAI+vCgo86+nzlhJgVfxFKF4mvLQdKKeqR9o5zTvo7fSW84r181OXja/RrzRO/iMY4JHe9LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"backprop2\" title=\"\" src=\"/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png\" srcset=\"/static/f76f6ac675286dabaa82d611f27f87c9/69538/backprop2.png 160w,\n/static/f76f6ac675286dabaa82d611f27f87c9/72799/backprop2.png 320w,\n/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png 640w,\n/static/f76f6ac675286dabaa82d611f27f87c9/d9199/backprop2.png 960w,\n/static/f76f6ac675286dabaa82d611f27f87c9/21b4d/backprop2.png 1280w,\n/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<p>보다시피 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^0_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>은 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^1_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>보다 많은 값에 영향을 미치고 있다.\n전체 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">E_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^0_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>가 기여한 정도는 다음과 같이 나타낼 수 있다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mi>t</mi></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac><mo>=</mo><mo stretchy=\"false\">(</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo stretchy=\"false\">)</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>10</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>10</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_t}{\\partial w^0_{10}} = (\\frac{\\partial E_1}{\\partial a_{10}} + \\frac{\\partial E_2}{\\partial a_{10}}) \\frac{\\partial a_{10}}{\\partial z_{10}} \\frac{\\partial z_{10}}{\\partial w^0_{10}}\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>그럼 먼저 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>부터 구해보자.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo><mo>×</mo><msub><mi>a</mi><mn>20</mn></msub><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo><mo>×</mo><msubsup><mi>w</mi><mn>10</mn><mn>1</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo>−</mo><mn>0.57</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>0.57</mn><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mn>0.57</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>0.4</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mn>0.03627</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_1}{\\partial a_{10}} = \\frac{\\partial E_1}{\\partial a_{20}} \\frac{\\partial a_{20}}{\\partial z_{20}} \\frac{\\partial z_{20}}{\\partial a_{10}}\\\\\n\\\\\n= -(t_1 - a_{20}) \\times a_{20} \\times (1 - a_{20}) \\times w^1_{10} \\\\\n\\\\\n= -(0.2 - 0.57) \\times 0.57 \\times (1 - 0.57) \\times 0.4 \\\\\n\\\\\n= 0.03627\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:11.5315em;vertical-align:-5.5158em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:6.0158em;\"><span style=\"top:-8.0158em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-6.0398em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-4.5157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.0157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.57</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.57</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.57</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.4</span></span></span><span style=\"top:-0.0157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:1.4843em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.03627</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.5158em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>마찬가지로 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>도 구해본다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>2</mn></msub><mo>−</mo><msub><mi>a</mi><mn>21</mn></msub><mo stretchy=\"false\">)</mo><mo>×</mo><msub><mi>a</mi><mn>21</mn></msub><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>a</mi><mn>21</mn></msub><mo stretchy=\"false\">)</mo><mo>×</mo><msubsup><mi>w</mi><mn>11</mn><mn>1</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><mn>0.7</mn><mo>−</mo><mn>0.61</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>0.61</mn><mo>×</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mn>0.61</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mn>0.5</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo>−</mo><mn>0.0107</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_2}{\\partial a_{10}} = \\frac{\\partial E_2}{\\partial a_{21}} \\frac{\\partial a_{21}}{\\partial z_{21}} \\frac{\\partial z_{21}}{\\partial a_{10}}\\\\\n\\\\\n= -(t_2 - a_{21}) \\times a_{21} \\times (1 - a_{21}) \\times w^1_{11} \\\\\n\\\\\n= -(0.7 - 0.61) \\times 0.61 \\times (1 - 0.61) \\times 0.5 \\\\\n\\\\\n= -0.0107\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:11.5315em;vertical-align:-5.5158em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:6.0158em;\"><span style=\"top:-8.0158em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-6.0398em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-4.5157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.0157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\">0.7</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.61</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.61</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.61</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.5</span></span></span><span style=\"top:-0.0157em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:1.4843em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mord\">0.0107</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.5158em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>이제 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>와 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>를 전부 구했으니 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mi>t</mi></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_t}{\\partial w^0_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4878em;vertical-align:-0.5916em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.6264em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8051em;\"><span style=\"top:-2.1885em;margin-left:-0.0269em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-2.8448em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3115em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2963em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5916em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>를 구할 차례이다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mi>t</mi></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac><mo>=</mo><mo stretchy=\"false\">(</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo stretchy=\"false\">)</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>10</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>10</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo stretchy=\"false\">(</mo><mn>0.03627</mn><mo>+</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mn>0.0107</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>×</mo><mn>0.2484</mn><mo>×</mo><mn>0.54</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mn>0.0034</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_t}{\\partial w^0_{10}} = (\\frac{\\partial E_1}{\\partial a_{10}} + \\frac{\\partial E_2}{\\partial a_{10}}) \\frac{\\partial a_{10}}{\\partial z_{10}} \\frac{\\partial z_{10}}{\\partial w^0_{10}} \\\\\n\\\\\n= (0.03627 + (-0.0107)) \\times 0.2484 \\times 0.54 \\\\\n\\\\\n= 0.0034\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:8.6237em;vertical-align:-4.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.5619em;\"><span style=\"top:-6.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-4.4696em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.9696em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.03627</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">0.0107</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.2484</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.54</span></span></span><span style=\"top:-1.4696em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:0.0304em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.0034</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>이로써 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^0_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>이 전체 에러 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">E_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>에 <code class=\"language-text\">0.0034</code>만큼 기여한다는 걸 알아냈다. 이제 이 값을 사용하여 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">w^0_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0622em;vertical-align:-0.2481em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4519em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2481em;\"><span></span></span></span></span></span></span></span></span></span></span>값을 업데이트하자. Learning Rate는 아까와 동일한 <code class=\"language-text\">0.3</code>이다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msubsup><mi>w</mi><mn>10</mn><mrow><mn>0</mn><mo>+</mo></mrow></msubsup><mo>=</mo><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup><mo>−</mo><mo stretchy=\"false\">(</mo><mi>L</mi><mo>∗</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mi>t</mi></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msubsup><mi>w</mi><mn>10</mn><mn>0</mn></msubsup></mrow></mfrac><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.1</mn><mo>−</mo><mo stretchy=\"false\">(</mo><mn>0.3</mn><mo>×</mo><mn>0.0034</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.09897</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nw^{0+}_{10} = w^0_{10} - (L * \\frac{\\partial E_t}{\\partial w^0_{10}}) = 0.1 - (0.3 \\times 0.0034) = 0.09897\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.6237em;vertical-align:-1.0619em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5619em;\"><span style=\"top:-3.5619em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.4436em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span><span class=\"mord mtight\">+</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2564em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959em;\"><span style=\"top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0.3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">0.0034</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">0.09897</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0619em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<h2>코딩하기</h2>\n<p>필자는 도저히 이걸 8번이나 손으로 풀 수 있는 사람이 아니기 때문에 JavaScript를 사용하여 위에 설명했던 공식을 간단하게 코드로 작성해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">exp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token constant\">MSE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">targets<span class=\"token punctuation\">,</span> values</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>values <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  targets<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">+=</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>target <span class=\"token operator\">-</span> values<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 인풋 초기화</span>\n<span class=\"token keyword\">const</span> x1 <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> x2 <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 타겟 값 초기화</span>\n<span class=\"token keyword\">const</span> t1 <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> t2 <span class=\"token operator\">=</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Weights 초기화</span>\n<span class=\"token keyword\">const</span> w0 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> w1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0.4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> learningRate <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> limit <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 학습 횟수</span>\n\n<span class=\"token comment\">// 두번째 Layer의 Weight들을 업데이트</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">updateSecondLayerWeight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">targetY<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> prevY<span class=\"token punctuation\">,</span> updatedWeight</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> v1 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>targetY <span class=\"token operator\">-</span> y<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> v2 <span class=\"token operator\">=</span> y <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> def <span class=\"token operator\">=</span> v1 <span class=\"token operator\">*</span> v2 <span class=\"token operator\">*</span> prevY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> updatedWeight <span class=\"token operator\">-</span> learningRate <span class=\"token operator\">*</span> def<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 첫번째 Layer의 Weight들을 업데이트</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">updateFirstLayerWeight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">,</span> w2<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> updatedWeight</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> e1 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>t1 <span class=\"token operator\">-</span> y1<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> y1 <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> y1<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> w1<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> e2 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>t2 <span class=\"token operator\">-</span> y2<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> y2 <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> y2<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> w2<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> v1 <span class=\"token operator\">=</span> a <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> v2 <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> def <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e1 <span class=\"token operator\">+</span> e2<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> v1 <span class=\"token operator\">*</span> v2<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> updatedWeight <span class=\"token operator\">-</span> learningRate <span class=\"token operator\">*</span> def<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 학습 시작</span>\n<span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> limit<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> z10 <span class=\"token operator\">=</span> x1 <span class=\"token operator\">*</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> x2 <span class=\"token operator\">*</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> a10 <span class=\"token operator\">=</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span>z10<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> z11 <span class=\"token operator\">=</span> x1 <span class=\"token operator\">*</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> x2 <span class=\"token operator\">*</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> a11 <span class=\"token operator\">=</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span>z11<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> z20 <span class=\"token operator\">=</span> a10 <span class=\"token operator\">*</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> a11 <span class=\"token operator\">*</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> a20 <span class=\"token operator\">=</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span>z20<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> z21 <span class=\"token operator\">=</span> a10 <span class=\"token operator\">*</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> a11 <span class=\"token operator\">*</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> a21 <span class=\"token operator\">=</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span>z21<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> e_t <span class=\"token operator\">=</span> <span class=\"token constant\">MSE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a20<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">] y1 = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>a20<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, y2 = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>a21<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, E = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e_t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 계산된 기여도들을 사용하여 새로운 Weight로 업데이트</span>\n  <span class=\"token keyword\">const</span> newW0 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token function\">updateFirstLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> a10<span class=\"token punctuation\">,</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">updateFirstLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> a11<span class=\"token punctuation\">,</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token function\">updateFirstLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> a10<span class=\"token punctuation\">,</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">updateFirstLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> a11<span class=\"token punctuation\">,</span> w0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> newW1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span><span class=\"token function\">updateSecondLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a10<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">updateSecondLayerWeight</span><span class=\"token punctuation\">(</span>t2<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> a10<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token function\">updateSecondLayerWeight</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> a20<span class=\"token punctuation\">,</span> a11<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">updateSecondLayerWeight</span><span class=\"token punctuation\">(</span>t2<span class=\"token punctuation\">,</span> a21<span class=\"token punctuation\">,</span> a11<span class=\"token punctuation\">,</span> w1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 업데이트된 Weight들을 반영한다</span>\n  newW0<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    v<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vv<span class=\"token punctuation\">,</span> ii</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>w0<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>ii<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> vv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  newW1<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    v<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vv<span class=\"token punctuation\">,</span> ii</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>w1<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>ii<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> vv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">t1 = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, t2 = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t2<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>계산된 결과들을 보면 처음에 <code class=\"language-text\">Multi Layer Network</code>에 넣었던 <code class=\"language-text\">x1</code>과 <code class=\"language-text\">x2</code>가 점점 <code class=\"language-text\">t1</code>과 <code class=\"language-text\">t2</code>로 수렴하는 것을 볼 수 있다. 1000번 돌린 결과를 전부 볼 수는 없으니까 처음과 중간, 마지막 진행 상황을 첨부한다.</p>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c8a82b6b81e701c775c94efb572cb9d7/432e7/result_first.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEklEQVR42k2T2ZKiQBBFeZsJZ2tUVHahik1FxW7Ejvn/78q5Nws65qGCICuXczOzvODQyvbQSFF/iO2eYtpRcjvILupks28kLe9i26cc63cpcZcce1nvaomyXm3FbA+Ts3xbxeLt4k4CBBcVLpoPKXD4jbILCrWSmUFMN+I8NTDOr7Le1yg06H/RvIs9TRIfry5hELbCk9uHVLgoQUPSAyquQaj286SFmssnEt1AWCk5C7F4rfa7fP+R/Ec4kzEhHUMQBmGnhExIGttNkha3mfCukuvLJPb8kqToXULSbXGOkFydniqN/dzFJ9lAMqUY7a27i/Ne/H2liY0WeUp1ealdE+5nQkorW0dI0jA9KyETsk/aQ/Y2vyhhZgf1NxozqpLVr0y8MJ0dKG0hRAJK3sAeoTLbYb+G4uxK2Ll+83usHrL6mYrHAK5HhqlZJsRp+k+sx1UDSaiy0EdK5P8yFNobyOUdY9+2BoSZI0xQkYk4MTpEJEdgiH0zM0WF5jOhj0D629MLSUfX32ZUfy9WkkbXQSkQ2Crh7Usye0dy3pPMD6wm5CBJxj10hNYR+th8DsXOEzbLHqIiEy7TLGfJb4GZh+VWbVHwe12KpyR4ejmaysUlCae39JYkJOtuf5WC/uugkkQVOcmOcJI/G/YQ6+HTAYGslpo7KB86Zb5Zt1KDFuQi04/kfOvcDL5lSictd/ofK1NzLDwTilUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result first\" title=\"\" src=\"/static/c8a82b6b81e701c775c94efb572cb9d7/432e7/result_first.png\" srcset=\"/static/c8a82b6b81e701c775c94efb572cb9d7/69538/result_first.png 160w,\n/static/c8a82b6b81e701c775c94efb572cb9d7/72799/result_first.png 320w,\n/static/c8a82b6b81e701c775c94efb572cb9d7/432e7/result_first.png 570w\" sizes=\"(max-width: 570px) 100vw, 570px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6075017dad03fd81e5f6f556d00a2ef6/7c1cd/result_second.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVR42k1T6ZqiMBDkEXbkkkNAzgRQxFvHnfd/q56qRvfbHyGh0ul0VVecZDtJmPTiRUba8S6VuUrd36S2VwliK35kJS0nxczuKQ3mON/JV9BKZRl71bnD3gZxznoz4pBBQCNFc5Rtd5G8PmLzIAGSffmNRNkoWTUj8UFxxv/xKsUYm5WzrqN0ECerZ4lxIECVdvqWbnzIePzROUisrBHES5rhrvtksU57xe30kmH+i+oeOqINEibFpNTcsJPSXFDlSecKw1t3GEY21UExykBJAlTohq1ilIBziws1oVaHhCsEsFpSSqFrgTW15UWkTLrb9qwUGU8pMmD8zyEVC9GERXtSkRfKTzH7pwygXA83JBqQdEAFEB04BykmxU78uBcDCSgD535+aR6HH4q8QtfK7qxV8jY2iLgLPMn3wotzbdp5wcFI5cG/Vo69RUMEf6iVEP9/HUMIT5yXbpGQB5mQ8Su/Bd0FK4BV9qLNdVjJp8vslH3T6NBNHmRSNkIxeK0/vP7hFmti3e6uuPowgg/ZTRqVDaHQpJehs5SBI4UTdO/tOw9VE8+ro/6rRDhD3GGQmhudU2vQBnahTr/5sQEt2GJ8aCW0TojYAE1h7PJabmL338CMOLxZnx78RoHpPyYru5O4qJwNKNpF+M9Tc/GqeKZ+e5C60o9e2Movx1FZHwrPbp0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result second\" title=\"\" src=\"/static/6075017dad03fd81e5f6f556d00a2ef6/7c1cd/result_second.png\" srcset=\"/static/6075017dad03fd81e5f6f556d00a2ef6/69538/result_second.png 160w,\n/static/6075017dad03fd81e5f6f556d00a2ef6/72799/result_second.png 320w,\n/static/6075017dad03fd81e5f6f556d00a2ef6/7c1cd/result_second.png 582w\" sizes=\"(max-width: 582px) 100vw, 582px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<center><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 583px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/992510762f50007a5d648b91f841c466/9fc4b/result_third.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVR42jWSWXqqUBCE2UAG0SAYQAEZDRqNQ2KSu/9d9a2/NQ98cJruU0NXkJXvFi06C6PGltXeVs2HrWo964NN563X6Smboy1VW9YHr02i2grvPVjZHn3ueba2oGw/LMne7CXprepOVm8+repP3jRPB5slnQ+1b1+qn209nEWgF1hjpfp5qPOexZ0F9XCxRa4L1dTosm57tcaHTz5Ifd1fbLP/sW68CvDiil4EVOoiem8kzjaBYVpsNdS5hKzYGedc0pE5i1uvJ9nGLaCeV+/O5GlaWixlr6ut/0s1+xiWYijEdDVa9DoI7dPa8csfEGMxn6vO92b/K7kXZxinG/X3foY1LFvNAh5gbHz3Ch+wgEY8jOTrVCwx/A8ENqEGUVX/WaR3of6naYXknXsVymQksUVkZPqGHRtN8vG2ALapBEQCf9bwYjm6NXml7a/37qtL5oJIMthkv/tx1H737QNYUbYnGw//xPLqtuApzJkd1E/voAfWAdnDj1CZI2cFeRMLrHDmYgggDDNfyt4jE95zWMuG4p5dl8wBRPdQkshZc89crDr5xAZYl93R/WUpWIRveAsYdeIU5NLOheQN9FRsOMOOGIA61wVEBE+jxWCPk1sdOxIlAQD+PUwK+w/7BjnenBTpYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result third\" title=\"\" src=\"/static/992510762f50007a5d648b91f841c466/9fc4b/result_third.png\" srcset=\"/static/992510762f50007a5d648b91f841c466/69538/result_third.png 160w,\n/static/992510762f50007a5d648b91f841c466/72799/result_third.png 320w,\n/static/992510762f50007a5d648b91f841c466/9fc4b/result_third.png 583w\" sizes=\"(max-width: 583px) 100vw, 583px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></center>\n<p><a href=\"/2019/02/26/simple-ann\">다음 포스팅</a>에서는 좀 더 구조화한 네트워크를 만들어보려고 한다. 이상으로 Backpropagation 포스팅을 마친다.</p>","fields":{"slug":"20180719-deep-learning-backpropagation","path":"/2018/07/19/deep-learning-backpropagation/","lang":"ko"},"frontmatter":{"title":"[Deep Learning 시리즈] Backpropagation, 역전파 알아보기","date":"2018-07-19","categories":["프로그래밍","머신러닝"],"tags":["머신러닝","딥러닝","역전파 알고리즘","역전파","Backpropagation","Machine Learning","Deep Learning","신경","수학","딥러닝 기초","머신러닝 기초","튜토리얼"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/26718e1f085d210bba3e45681f40c1fa/3a812/thumbnail.jpg","srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/1cda5/thumbnail.jpg 80w,\n/static/26718e1f085d210bba3e45681f40c1fa/b1a47/thumbnail.jpg 160w,\n/static/26718e1f085d210bba3e45681f40c1fa/3a812/thumbnail.jpg 320w,\n/static/26718e1f085d210bba3e45681f40c1fa/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/3e5ca/thumbnail.webp 80w,\n/static/26718e1f085d210bba3e45681f40c1fa/b72f1/thumbnail.webp 160w,\n/static/26718e1f085d210bba3e45681f40c1fa/fc5c5/thumbnail.webp 320w,\n/static/26718e1f085d210bba3e45681f40c1fa/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/26718e1f085d210bba3e45681f40c1fa/e1182/thumbnail.jpg","srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/23110/thumbnail.jpg 750w,\n/static/26718e1f085d210bba3e45681f40c1fa/e1182/thumbnail.jpg 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/26718e1f085d210bba3e45681f40c1fa/6858b/thumbnail.webp 750w,\n/static/26718e1f085d210bba3e45681f40c1fa/c1538/thumbnail.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"simpleWaveform","totalCount":3,"nodes":[{"id":"c8fea967-1739-5b9a-b413-e3ad5ce694d0","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%86%8C%EB%A6%AC%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C\">소리란 무엇일까?</a></p>\n<ul>\n<li><a href=\"#%EC%86%8C%EB%A6%AC%EB%8A%94-%EC%95%84%EB%82%A0%EB%A1%9C%EA%B7%B8-%EC%8B%A0%ED%98%B8%EB%8B%A4\">소리는 아날로그 신호다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B0%80-%EC%86%8C%EB%A6%AC%EB%A5%BC-%EB%93%A3%EB%8A%94-%EB%B0%A9%EB%B2%95\">컴퓨터가 소리를 듣는 방법</a></p>\n<ul>\n<li><a href=\"#%EC%83%98%ED%94%8C%EB%A7%81sampling\">샘플링(Sampling)</a></li>\n<li><a href=\"#%EC%83%98%ED%94%8C-%EB%A0%88%EC%9D%B4%ED%8A%B8sample-rate%EB%A5%BC-%EC%A2%80-%EB%8D%94-%EC%9E%90%EC%84%B8%ED%9E%88-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\">샘플 레이트(Sample Rate)를 좀 더 자세히 알아보자</a></li>\n<li><a href=\"#%EB%B9%84%ED%8A%B8-%EB%A0%88%EC%9D%B4%ED%8A%B8bit-rate\">비트 레이트(Bit Rate)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#web-audio-api%EB%A1%9C-%ED%8C%8C%ED%98%95-%EA%B7%B8%EB%A0%A4%EB%B3%B4%EA%B8%B0\">Web Audio API로 파형 그려보기</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%8B%80-%EC%9E%A1%EA%B8%B0\">기본 틀 잡기</a></li>\n<li><a href=\"#audioanalyzer-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9E%91%EC%84%B1\">AudioAnalyzer 클래스 작성</a></li>\n<li><a href=\"#svg-%EB%B7%B0%EB%B0%95%EC%8A%A4%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%98%EC%9E%90\">SVG 뷰박스를 설정하자</a></li>\n<li><a href=\"#%EC%97%85%EB%A1%9C%EB%93%9C%EB%90%9C-audiobuffer-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">업로드된 AudioBuffer 확인하기</a></li>\n<li><a href=\"#%EC%98%A4%EB%94%94%EC%98%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%84%9D%ED%95%98%EA%B3%A0-%EC%A0%95%EC%A0%9C%ED%95%98%EA%B8%B0\">오디오 데이터 분석하고 정제하기</a></li>\n<li><a href=\"#%EC%9D%B4%EC%A0%9C-%EC%A7%84%EC%A7%9C-%EA%B7%B8%EB%A0%A4%EB%B3%B4%EC%9E%90\">이제 진짜 그려보자!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%8C%EC%95%85-%EC%A3%BC%EC%84%B8%EC%9A%94-dj\">음악 주세요 DJ</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 필자의 예전 직업이었던 의 추억을 살려서 한번 오디오에 대한 이론을 설명해볼까 한다. 하지만 이론 설명만 하면 노잼이니까 오디오 이론을 기초로 자바스크립트의 를 사용하여 간단한 오디오 파형까지 그려보려고 한다. 바로 코딩에 들어가고 싶지만 오디오에 관한 기본적인 지식이 있어야 오디오 파형을 그릴 때의 과정을 이해할 수 있으므로 이론을 최대한 지루하지 않게 설명하려고 한다. 이론이 코딩보다 재미없는 건 맞지만 오디오 파형을 그리려면 최소한 기본적으로 알고 있어야 하는 것들이니까 한번 쓱 흝어보자. 소리란 무엇일까?…","html":"<p>이번 포스팅에서는 필자의 예전 직업이었던 <code class=\"language-text\">사운드 엔지니어</code>의 추억을 살려서 한번 오디오에 대한 이론을 설명해볼까 한다. 하지만 이론 설명만 하면 노잼이니까 오디오 이론을 기초로 자바스크립트의 <code class=\"language-text\">Web Audio API</code>를 사용하여 간단한 오디오 파형까지 그려보려고 한다.</p>\n<p>바로 코딩에 들어가고 싶지만 오디오에 관한 기본적인 지식이 있어야 오디오 파형을 그릴 때의 과정을 이해할 수 있으므로 이론을 최대한 지루하지 않게 설명하려고 한다. 이론이 코딩보다 재미없는 건 맞지만 오디오 파형을 그리려면 최소한 기본적으로 알고 있어야 하는 것들이니까 한번 쓱 흝어보자.</p>\n<h2>소리란 무엇일까?</h2>\n<p>제일 먼저 소리가 무엇인지부터 알아보자! 소리를 딱 한마디로 표현하자면 바로 <code class=\"language-text\">진동</code>이다. 기본적으로 우리가 소리를 듣는다는 것은 이런 순서로 일어난다.</p>\n<hr>\n<ol>\n<li>어떤 물체가 부르르 진동을 한다. 이때 진동 주파수는 뭐 대충 <code class=\"language-text\">440hz</code>라고 치자.</li>\n<li>그 물체 주변에 있는 매질이 <code class=\"language-text\">440hz</code>의 진동을 전달한다.(일반적인 상황에서는 주로 공기)</li>\n<li>매질이 진동을 전달하면 우리의 고막도 <code class=\"language-text\">440hz</code>로 진동한다.</li>\n<li>그 진동 신호를 달팽이관이 전기 신호로 바꿔서 청신경에 전달한다.</li>\n<li>뇌가 신호를 받아서 해석한다. <code class=\"language-text\">440hz</code> 접수완료!</li>\n</ol>\n<hr>\n<p>이때 <code class=\"language-text\">1번</code> 순서에서 물체가 1초에 몇 번이나 떨렸는지 표현하기 위해 우리는 <code class=\"language-text\">헤르츠(herz, hz)</code> 단위를 사용한다. <code class=\"language-text\">10hz</code>는 1초에 10번 진동을 했다는 의미이고 <code class=\"language-text\">1khz</code>는 1초에 1000번 진동을 했다는 것이다. 참고로 예시의 <code class=\"language-text\">440hz</code>는 도레미파솔라시도할 때 <code class=\"language-text\">라</code>음이다. 우리가 음악을 들을 때는 현악기면 <code class=\"language-text\">현의 진동</code>, 관악기면 <code class=\"language-text\">입술이나 리드의 진동이 증폭된 것</code>, 노래라면 <code class=\"language-text\">성대의 진동</code>을 듣게 되는 것이다. 아무리 감성터지는 음악도 공돌이 손에 걸리면 이렇게 분해될 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6e3222c117b2f5be65d4a041d5f0bf99/eea4a/s-oche.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABA//EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAEW9SxqiZB//8QAGBABAQEBAQAAAAAAAAAAAAAAAQARIkH/2gAIAQEAAQUCtLxXA6b/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFX/8QAGRAAAwADAAAAAAAAAAAAAAAAARARACJB/9oACAEBAAY/AjahrgHK/wD/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhQZH/2gAIAQEAAT8h1PBElJpz6WXttU1HpBAxEr6f/9oADAMBAAIAAwAAABCTz//EABgRAQEAAwAAAAAAAAAAAAAAAAEAETFR/9oACAEDAQE/EBdWHt//xAAYEQEBAAMAAAAAAAAAAAAAAAABABEhUf/aAAgBAgEBPxAw7gcv/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBUWGB/9oACAEBAAE/EGkFsbi9+sCRCWR5fnWtzeFiQ9YTYClkWuZiawJVwZgAaFP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"s oche\" title=\"\" src=\"/static/6e3222c117b2f5be65d4a041d5f0bf99/c08c5/s-oche.jpg\" srcset=\"/static/6e3222c117b2f5be65d4a041d5f0bf99/0913d/s-oche.jpg 160w,\n/static/6e3222c117b2f5be65d4a041d5f0bf99/cb69c/s-oche.jpg 320w,\n/static/6e3222c117b2f5be65d4a041d5f0bf99/c08c5/s-oche.jpg 640w,\n/static/6e3222c117b2f5be65d4a041d5f0bf99/6a068/s-oche.jpg 960w,\n/static/6e3222c117b2f5be65d4a041d5f0bf99/eea4a/s-oche.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>우리가 듣는 아름다운 선율의 음악도 뜯어보면 그냥 진동 주파수 덩어리다.</small>\n</center>\n<p>이때 이 진동은 자연계에서 발생한 것이기 때문에 <code class=\"language-text\">아날로그(Analog)</code>의 형태로 나타난다. 사실 자연계에서 발생하는 대부분의 거시적인 신호는 아날로그 형태를 가지는데, 예를 들면 빛의 밝기가 변한다거나 바람의 세기가 변한다거나 소리의 크기가 변하는 등의 신호를 말한다.</p>\n<h3>소리는 아날로그 신호다</h3>\n<p><code class=\"language-text\">아날로그</code>는 신호나 자료를 <code class=\"language-text\">연속적인 물리량</code>으로 나타낸 것이다. 이게 <code class=\"language-text\">연속적인 물리량</code>이라고 하면 뭔가 전문적이고 어려워보이는데 풀어보면 사실 별 거 없다. 여기서 우리가 집중해야할 단어는 물리량이 아닌 <code class=\"language-text\">연속적</code>이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 605px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/48485ab8c211172e1d85631ac91b57ce/90cbd/analog.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVR42m1S147CQBDb//8seANxQiAhSugCUjahi5rx2Qk6jsutlOxkqseOazabyIIAOJ1QOdcrkCTA41GN7XbAdltxu3G7XTTL4xjGQqPTzMqbzWy/h6Vp+Z3n5X25wLyHZRmMtT81fNyk1So6K4Dj8T3qdnsjYEM8n5/oFL/fKyhdt17Hns38ZoPteIyUUz2fbDaDXy7hWZzO58hkK0ZkosgTfZE3GiFcr7EOQyS8XYsIMyKIlDAYIKZTdtLvI+IQ2fFqhWQ4RKi8xQKeTSI2DklTOp1iSNq+Oh1MGg2uTEexsl5a+3wuReD0MmDvtWUfDgA5/BBOFLxyXK/XY/0DuUiVKBInikrifwsh8uWXUPK9RChiEogrS0BXq9UQkJOzkOlo+n+/kNBJNAnx92gjITfDN0lsZ7dzZK7fAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"analog\" title=\"\" src=\"/static/48485ab8c211172e1d85631ac91b57ce/90cbd/analog.png\" srcset=\"/static/48485ab8c211172e1d85631ac91b57ce/69538/analog.png 160w,\n/static/48485ab8c211172e1d85631ac91b57ce/72799/analog.png 320w,\n/static/48485ab8c211172e1d85631ac91b57ce/90cbd/analog.png 605w\" sizes=\"(max-width: 605px) 100vw, 605px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>가로 축은 시간, 세로 축은 전압이다. 아날로그 신호는 아무리 쪼개도 끝이 없는 연속성을 가진다</small>\n</center>\n<p>그렇다면 연속적이라는 건 무슨 말일까?</p>\n<p>연속성의 대표적인 예는 바로 <code class=\"language-text\">수</code>이다. 자 우리가 이제 <code class=\"language-text\">1</code>부터 <code class=\"language-text\">2</code>까지 걸어간다고 생각해보자. 우리는 <code class=\"language-text\">1</code>에서 <code class=\"language-text\">2</code>까지 걸어가는 동안 몇개의 수를 만날 수 있을까?</p>\n<p>우선 절반이 되는 위치에 있는 <code class=\"language-text\">1.5</code>가 있을 것이다. 그 절반인 <code class=\"language-text\">1.25</code>도 있을 것이며 또 그것의 절반인 <code class=\"language-text\">1.125</code>도 있을 것이다. 이런 식으로 계속 수를 쪼개다 보면 우리는 결국 이게 의미없는 삽질이라는 것을 깨닫게 된다. <code class=\"language-text\">n/2</code>를 계속 한들 끝이 있을리가 없기 때문이다. 만약 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mrow><mo>−</mo><mn>10000</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">10^{-10000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">10000</span></span></span></span></span></span></span></span></span></span></span></span></span> 단위까지 쪼갠다 해도 우리는 그 수를 계속 해서 무한히 쪼갤 수 있다. 우리는 이런 성질을 <code class=\"language-text\">연속</code>이라고 부른다.</p>\n<p>이제 연속적이라는 말이 조금 이해가 되었길 바란다.</p>\n<h2>컴퓨터가 소리를 듣는 방법</h2>\n<p>근데 여러분도 알다시피 컴퓨터는 <code class=\"language-text\">0</code>과 <code class=\"language-text\">1</code>밖에 이해하지 못하는 바보다. 이 방식을 우리는 <code class=\"language-text\">디지털(Digital)</code>이라고 부른다. 그래서 <code class=\"language-text\">0</code>과 <code class=\"language-text\">1</code>밖에 모르는 컴퓨터는 <code class=\"language-text\">연속성</code>을 가진 아날로그 신호를 이해할 수가 없다.</p>\n<p>그렇다면 우리가 자연에서 발생한 아날로그 형태인 소리를 컴퓨터가 듣게 해주려면 어떻게 해야할까?</p>\n<p>간단하다. 아날로그를 디지털로 바꿔주면 된다. 아날로그 신호인 소리를 컴퓨터가 알아 들을 수 있게 변경하는 과정을 알고나면 <code class=\"language-text\">Web Audio API</code>가 우리에게 주는 정보들이 뭘 의미하는 지 알 수 있다. 그럼 지금부터 아날로그를 디지털로 변경하는 과정을 알아보자.</p>\n<p>아날로그를 디지털로 변경하기 위해서는 몇가지 순서를 거쳐야 한다. 이 순서에서 어떤 값들을 사용하냐에 따라서 디지털로 변경된 소리의 해상도, 즉 음질이 결정된다.\n이때 나오는 단어가 바로 <code class=\"language-text\">샘플 레이트(Sample Rate)</code>와 <code class=\"language-text\">비트 레이트(Bit Rate)</code>이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5c4ef295d012e89f63bcd069e92fb4b5/e3b18/encoder.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNElEQVR42lVRSY7CQBDL//+VAxcQEmQlezobWciCYE6ecmUYzRxKlbTdLrvaMqZCHCdI01Sr73uM46jVtB3iJEXg+2jbVnH2aZoUH4ZB+bfbDff7HV3XwTJVhSTNkCS7KAES58cDddPCD0LFeF4UxT/Bh3BYxPlPccsYo0JhGCKKIi1+13WNPM9xPB4FzyRFjCzbOwX8H9fzPOv9QQQ51OKly+UC13XheR6CIFBgXVed2Mil9/sLo7iis23bsCyLCtHV9XrVO6UY4wCLMQ6HA2zbxvl8RiUr0EhSpqpRliVWEVnXTQc4jqMu+37Yncl6CuH00tUho3HK6XTS5aYSa9/NLFMrIRd4vV6Y5OzzADRBDh+BvWka7b87pGXuhTEJMApdksDJ2/OpO6Ibxv3L+XQWX/kbanYF0WWvlT4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"encoder\" title=\"\" src=\"/static/5c4ef295d012e89f63bcd069e92fb4b5/e3b18/encoder.png\" srcset=\"/static/5c4ef295d012e89f63bcd069e92fb4b5/69538/encoder.png 160w,\n/static/5c4ef295d012e89f63bcd069e92fb4b5/72799/encoder.png 320w,\n/static/5c4ef295d012e89f63bcd069e92fb4b5/e3b18/encoder.png 439w\" sizes=\"(max-width: 439px) 100vw, 439px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>인코더 프로그램 쓸 때 뭘 만져야 할지 모르게 만드는 어려운 단어들</small>\n  <br>\n</center>\n<p>단어는 어려워 보이지만 사실 간단하다. 결국 소리는 가로 축은 <code class=\"language-text\">시간(Time)</code>, 세로 축은 <code class=\"language-text\">진폭(Amplitude)</code>으로 정의된 공간에 그려진 2차원의 진동 주파수 데이터이다. 이때 <code class=\"language-text\">샘플 레이트</code>는 가로 축의 해상도, <code class=\"language-text\">비트 레이트</code>는 세로 축의 해상도를 의미하는 것이다. 이 값들은 아날로그를 디지털로 변경하는 첫번째 단계인 <code class=\"language-text\">샘플링(Sampling)</code>에서 활용된다.</p>\n<h3>샘플링(Sampling)</h3>\n<p><code class=\"language-text\">샘플링</code>은 아날로그 신호를 디지털 신호로 바꾸기 위한 첫번째 단계이다. 위에서 설명한 것처럼 아날로그 신호인 소리는 연속적인 신호이기 때문에 컴퓨터가 이 신호를 그대로 이해할 수가 없다. 우리가 마이크를 사용하여 소리를 녹음할 때, 이 아날로그 신호는 결국 전기 신호로 변환되어 컴퓨터에게 주어진다. 소리의 진동이 마이크 안에 있는 장치에 전달되면 이 장치가 전압을 올렸다 내렸다 하면서 변환하는 원리이다.</p>\n<p>하지만 우리의 바보 컴퓨터는 이렇게 까지 해줘도 이 전기 신호를 이해할 수 없다.</p>\n<p>그래서 컴퓨터는 연속적인 전기 신호를 측정하기 위해 특정 타이밍을 정해서 <code class=\"language-text\">이 타이밍마다 내가 전압을 측정할게!</code>라는 꼼수를 사용한다. 컴퓨터가 꼼수를 쓰는 이 과정을 그림으로 나타내보면 이런 느낌이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f62ba441843fe9172b18fc5498bd765d/2c288/sampling.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB2ElEQVR42mNgYGAQAGI+BghgZMAJ/sPkGP8zMIgBMSeQzQPVyw/ELHClbc6xwruN0/gZ8IDF0bl8S7yy5P8DDa53jRHzjWgVBwoLATGIFgZiJrDCK6te8qxwz3Bf5ZzmkV+/XwCbS0NX/eecG1prv8csyLEreaoeSMy+fj8L1BBmKA3Rszx1qtVNMTmlm3K6Sv1x3XZgz0El6xnqwbZOi+8x3msdpg8UF17oV+GyMKBCGFkdCrjokmIBlBAF4U0uaTa96dOlIYohYVafu5ivP67fDigvAcTiR0xC1SfGT7RAUsPEoOLBnjbzDCvYQGcpTUNtBgZ9QwYGPQdxVXN/26hwJyDbnJXVGKhL19/MP8BP3thRhYFBy4SV1dAASIcb+4W6K+ramgPVGTMwGPmLK/rqazu6AY1TgDmUJRQSFgxzfEost5kH6wFdI/KQn19palijI0P9fyak8GLIrlgnvMopwfUz0MUgl88MbbTP968XgHu7HqgYFh6LYrq55wZVu4C8t84p2awrbaYyzHv/IUkGHK4TY9sN9xp46x/Vc9UBWmqKHqZMyOHWnDlVdotthPfMwFrT/7jS5v//TEt9si3Xu6Q5A9ms6NKM6OxtHrl824CBzUAiAADz6odDaFdLSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sampling\" title=\"\" src=\"/static/f62ba441843fe9172b18fc5498bd765d/6af66/sampling.png\" srcset=\"/static/f62ba441843fe9172b18fc5498bd765d/69538/sampling.png 160w,\n/static/f62ba441843fe9172b18fc5498bd765d/72799/sampling.png 320w,\n/static/f62ba441843fe9172b18fc5498bd765d/6af66/sampling.png 640w,\n/static/f62ba441843fe9172b18fc5498bd765d/2c288/sampling.png 684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>위 그림에 나타난 빨간 점이 컴퓨터가 전압을 측정한 타이밍이다. 컴퓨터는 특정 타이밍에 전기 신호를 측정하고 그 값을 저장한다. 빨간 점의 위치를 보면 저 신호는 <code class=\"language-text\">[10, 20, 30, 27, 19, 8...]</code> 뭐 이런 식으로 측정이 되었을 것이다.\n이때 저 빨간 점을 더 세밀하게, 즉 컴퓨터가 샘플 측정을 하는 간격이 짧을 수록 우리는 원래 신호에 가까운 값을 측정할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/735b3ff4a2c2bc5e9bb423aef0d67b88/7497d/high-low-sampling.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAD2EAAA9hAHVrK90AAABSklEQVR42qWSPU8CQRCG30M+D1HxO8BBPO8OLxfgDg7QihgTY0NpaWvhn6CyNf4GS2PlX7CytLU1xmhn1Ngxzi6biFeIkUmezOztzLsztwtE7ZBm0CIddcoCHE9lFqXQJRv+g43g2UKbHFjD1HcCafJAQKBNUOPExpuH8k2eFwlZ4Fwvy28DismUKuUQfBQ4mmfiqlAbQ50qLCQD7fd1NXcSuBRdxKRAj0o/cidaOjRQPN3lqMJsMDazqbyB8vke1k48jrm7ZJV9i2kydbmPhQoypeK4YhnJgsOBybhMh+mKvqXw7M4WCmd9ntTnta/EWDTRlPkrxwfI970/3pQac58W4b+KjjPcWHYEx+bFKrbJilZpvzMYXYr/YsO8UqLQkTtagnsfyGf2LxO3HX6aqN3V4N56aDx56Aznpnur4hf0KI3Wo84+Ht3+AqxFQxyT+4MwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"high low sampling\" title=\"\" src=\"/static/735b3ff4a2c2bc5e9bb423aef0d67b88/6af66/high-low-sampling.png\" srcset=\"/static/735b3ff4a2c2bc5e9bb423aef0d67b88/69538/high-low-sampling.png 160w,\n/static/735b3ff4a2c2bc5e9bb423aef0d67b88/72799/high-low-sampling.png 320w,\n/static/735b3ff4a2c2bc5e9bb423aef0d67b88/6af66/high-low-sampling.png 640w,\n/static/735b3ff4a2c2bc5e9bb423aef0d67b88/d9199/high-low-sampling.png 960w,\n/static/735b3ff4a2c2bc5e9bb423aef0d67b88/21b4d/high-low-sampling.png 1280w,\n/static/735b3ff4a2c2bc5e9bb423aef0d67b88/7497d/high-low-sampling.png 3500w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>신호 내부의 사각형이 컴퓨터가 이해한 신호의 모양이다.</small>\n</center>\n<p>이때 이 신호를 측정하는 간격을 <code class=\"language-text\">샘플 레이트(Sample Rate)</code>라고 하고 신호를 측정하는 과정 자체를 <code class=\"language-text\">샘플링(Sampling)</code>이라고 한다. 당연히 샘플 레이트가 높을 수록 소리의 해상도, 즉 음질이 더 좋을 수 밖에 없다. 특히 높은 주파수를 가진 소리, 즉 고음의 해상도가 확연하게 좋아진다.</p>\n<p>보통 CD의 음질이 <code class=\"language-text\">44.1kHz</code>, TV나 라디오 방송이 <code class=\"language-text\">48kHz</code>의 샘플 레이트를 가지는데, 이는 약 1초에 <code class=\"language-text\">44,100</code>번, <code class=\"language-text\">48,000</code>번 샘플을 측정한다는 것이다. 저 샘플 레이트는 어떤 기준으로 정하는 걸까?</p>\n<h3>샘플 레이트(Sample Rate)를 좀 더 자세히 알아보자</h3>\n<p>방금 설명했듯이 CD의 경우 샘플 레이트가 <code class=\"language-text\">44.1kHz</code>이다. 그 말인 즉슨 CD에 들어가는 오디오는 컴퓨터가 아날로그 신호를 1초에 <code class=\"language-text\">44,100</code>번 측정한 결과물인 것이라는 것이다.</p>\n<p>하지만 인간이 들을 수 있는 영역인 가청주파수는 <code class=\"language-text\">20hz ~ 20kHz</code> 밖에 되지 않는다. 근데 왜 샘플 레이트는 <code class=\"language-text\">44.1kHz</code>, <code class=\"language-text\">48kHz</code>처럼 훨씬 크게 잡는 것일까?</p>\n<blockquote>\n<p>어차피 인간은 1초에 <code class=\"language-text\">20,000</code>번 진동하는 소리까지밖에 들을 수 없어서 <code class=\"language-text\">44,100</code>번 진동하는 소리를 녹음해도 어차피 들을 수 없는데?</p>\n</blockquote>\n<p>이 질문에 대한 답은 소리의 진동 사이클이 어떻게 생겼는지를 보면 이해가 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/54209060f49749e76b0ab4da633070e6/d9199/sine-wave.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVR42o2SWXLEIAxEuf91p0BqbaSFk8nkx46KKkuYp31kZlXtI+ZbNWD5c/Eg460BCbVyd1HFv/BxhfUondjhFb4NhmAKz7CZEVetVMLRPNoLlkf+I23iEOPnA46EyfKntLvaauAE3P4Nbzed+nqtJUuOrLXmnK2IUGG9Q4G5xFTfByIGQAWqUzzYAJzDXl6KGS/NsmumS7qgpUe62WRV3flqh7IilGFzqEzyJMhLaI66HQp/injZ6Qjh9sLWuEjQGuiK73hujkvP74KpuLr53yW5kY6DhkmmGc0rXKddT+uUXIRlrDTYxI/5j8/dvpFgs7gO4AL8Pv4CWb0B4j12ASIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sine wave\" title=\"\" src=\"/static/54209060f49749e76b0ab4da633070e6/6af66/sine-wave.png\" srcset=\"/static/54209060f49749e76b0ab4da633070e6/69538/sine-wave.png 160w,\n/static/54209060f49749e76b0ab4da633070e6/72799/sine-wave.png 320w,\n/static/54209060f49749e76b0ab4da633070e6/6af66/sine-wave.png 640w,\n/static/54209060f49749e76b0ab4da633070e6/d9199/sine-wave.png 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>기본적으로 오디오 주파수는 이렇게 하나의 사이클 단위로 나누어 지는데, 이때 위로 올라가는 <code class=\"language-text\">+</code> 부분이 공기가 압축되는 부분이고 아래로 내려가는 <code class=\"language-text\">-</code> 부분이 다시 공기가 팽창하는 부분이다.</p>\n<p>위에서 계속 설명했던 대로 소리란 곧 진동이고, 우리가 느끼는 것은 그 진동으로 인한 공기의 <code class=\"language-text\">떨림</code>이므로 <code class=\"language-text\">압축 -> 팽창 -> 압축</code>까지 모두 들어야 <code class=\"language-text\">떨렸다!</code>라고 느낄 수 있다는 것이다. 즉, 우리가 들을 수 있는 <code class=\"language-text\">20,000</code>번의 진동은 이 사이클이 1초에 <code class=\"language-text\">20,000</code>번 반복되는 소리라는 것이다.</p>\n<p>압축이나 팽창 중에 하나만 주구장창 느낀다고 해서 <code class=\"language-text\">이게 진동이구나</code>라고 느낄 수는 없을 것이다.</p>\n<p>그래서 오디오 신호의 한 사이클을 제대로 측정하려면 <code class=\"language-text\">+ 방향의 맨 위의 꼭지점 하나</code>와 <code class=\"language-text\">- 방향의 맨 밑의 꼭지점 하나</code>를 모두 측정해야하기 때문에 최소 <code class=\"language-text\">2번</code>은 측정을 해야한다. 그래서 인간이 들을 수 있는 가장 높은 소리인 <code class=\"language-text\">초당 20,000번의 떨림</code>인 <code class=\"language-text\">20kHz</code>을 제대로 측정하려면 컴퓨터는 최소한 1초에 <code class=\"language-text\">20,000 * 2 = 40,000번</code> 측정을 해야 하는 것이다.</p>\n<p>이게 바로 CD가 왜 <code class=\"language-text\">44.1kHz</code>의 샘플 레이트를 가지고 있는지에 대한 이유다. 이걸 <code class=\"language-text\">나이퀴스트 이론(Nyquist Theorem)</code>이라고 한다. 즉, 나이퀴스트 이론을 한마디로 정리하자면</p>\n<blockquote>\n<p>측정하고 싶은 오디오 주파수있지? 오디오 신호 제대로 다 살리고 싶으면 최소한 그 주파수보다 두배는 더 빠르게 측정해야된다.<br />\n그러니까 최소한 측정하고 싶은 오디오 주파수의 두배 사이즈의 샘플 레이트를 준비하렴.</p>\n</blockquote>\n<p>인 것이다. 근데 여기서 또 의문이 생긴다. 저 이론에 따르면 인간의 가청주파수는 <code class=\"language-text\">20,000hz</code>니까 딱 <code class=\"language-text\">40,000</code>번만 측정하면 인간이 들을 수 있는 소리는 다 녹음할 수 있는데 왜 <code class=\"language-text\">44,100</code>번이나 <code class=\"language-text\">48,000</code>번까지 측정하는 걸까?</p>\n<p>자연에는 인간만 있는 것이 아니라 이런 친구들도 있기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f9e7d3854217d95b93299ec30c34597c/eea4a/dolphin.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABspui5kWX/8QAGBAAAgMAAAAAAAAAAAAAAAAAAhAAESL/2gAIAQEAAQUCIqmma//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAwEBPwFQf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABwQAAICAgMAAAAAAAAAAAAAAAABETFBUWFxkf/aAAgBAQABPyHA9JSNdF8F2M1DRg//2gAMAwEAAgADAAAAEGvP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxABwW3/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QV2f/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFRYYHR/9oACAEBAAE/EKacN9PUGWE4OS+CJgtqtXqUMck+xVFIwyF6n//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dolphin\" title=\"\" src=\"/static/f9e7d3854217d95b93299ec30c34597c/c08c5/dolphin.jpg\" srcset=\"/static/f9e7d3854217d95b93299ec30c34597c/0913d/dolphin.jpg 160w,\n/static/f9e7d3854217d95b93299ec30c34597c/cb69c/dolphin.jpg 320w,\n/static/f9e7d3854217d95b93299ec30c34597c/c08c5/dolphin.jpg 640w,\n/static/f9e7d3854217d95b93299ec30c34597c/6a068/dolphin.jpg 960w,\n/static/f9e7d3854217d95b93299ec30c34597c/eea4a/dolphin.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>안녕하세요 자연계 고음의 절대강자입니다. 쉬즈곤 정도는 밥먹으면서도 부를 수 있슴다.</small>\n</center>\n<p>사실 자연에는 우리가 듣지 못하는 훨씬 높은 소리들도 존재한다. 단지 우리가 <code class=\"language-text\">20kHz</code>까지밖에 못 들을 뿐이다. 뭐 박쥐나 돌고래 같은 친구들은 훨씬 고음역대의 소리를 내지 않는가?</p>\n<p>근데 이 소리가 <code class=\"language-text\">40kHz</code>의 샘플 레이트를 준비한 그릇에 들어오면 어떻게 될까? 컴퓨터는 1초에 <code class=\"language-text\">20,000</code>번의 사이클을 도는 소리를 제대로 측정하려고 1초에 <code class=\"language-text\">40,000</code>번 전압을 측정하려고 했는데 만약 1초에 <code class=\"language-text\">30,000</code>번의 사이클을 도는 훨씬 더 높은 주파수의 소리가 들어와버린다면?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 572px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1c9dd2b354904b4b414af5ba807e5204/a805e/nyquist-error.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVR42mVTW46jMBDk/odb7QHmY5REIcEYx28bMDXdDWwy2pZsisL9qjbd5XKBMQbjOEIphWlU0FoR1hgGXsRpDa3275oxrROrYRBfjnG73dBN0wS2jbdlQQsRNTeUClRa8wI03lIk0PDL+ECM2A7eWvsO2DYKWQImVXG/lj0JccynKWGJ5FyyJGaeg2wcrBS0nN8Buezdu2ENiRI2qUacJFNDi8QnevfhXd2ySnXgc2HnX68XOu5d4s0zks6Q4uNHe8SDqmD/MoVTHOGkZWZIJjbnHLp+6rFghvEWLjgUVORikatDPnAiPNOX71vA0yTBKdOZeT+TkkHdEganqOVHLznDGKjrdddorqTNoVcknuRgPKcCb4rg9sG3nIB1gbFUob5epfo17Hrg0I3S7jh+8isWG8H+MvXTVtajon/QUP7+eSJ5Jo4ApzMLzZmOCf4zCpR9RXHlI96G7y+SbaKhDPcBnHKjO/jL+J2r4+z/3b2AWprk4mPczFZWWJKve9AWvZMJ8fLey33ip6drYA9O+BMT78jHGE9/zO6XqPJn3+MHKHJYsi4mGRwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"nyquist error\" title=\"\" src=\"/static/1c9dd2b354904b4b414af5ba807e5204/a805e/nyquist-error.png\" srcset=\"/static/1c9dd2b354904b4b414af5ba807e5204/69538/nyquist-error.png 160w,\n/static/1c9dd2b354904b4b414af5ba807e5204/72799/nyquist-error.png 320w,\n/static/1c9dd2b354904b4b414af5ba807e5204/a805e/nyquist-error.png 572w\" sizes=\"(max-width: 572px) 100vw, 572px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<blockquote>\n<p>정답. 점을 이상한데다가 찍는다.</p>\n</blockquote>\n<p>그림을 보면 컴퓨터가 점을 찍는 간격, 즉 전압을 측정하는 간격보다 들어온 신호의 사이클이 더 짧다. 그래서 컴퓨터가 찍은 점을 보면 신호의 꼭지점이 아닌 어중간한 어딘가에 찍힌 것을 볼 수 있다. 이것이 바로 <code class=\"language-text\">나이퀴스트 이론</code>의 가지고 있는 함정이다. 그리고 저 어중간한데 찍힌 점들을 이어본 파란색 선을 보면 결국 낮은 주파수가 된 것을 알 수 있다. 그러면 어떻게 될까?</p>\n<p>우리 귀에 아주 잘 들린다. 참 소름돋는 순간이다! 녹음할 때는 분명히 아무것도 안들렸는데 녹음한 걸 들어보니 이상한 소리가 녹음되어있으니 말이다. 그래서 이 현상을 <code class=\"language-text\">고스트 주파수(Ghost Frequency)</code>라고 부른다.</p>\n<blockquote>\n<p>아니 그러면 샘플 레이트를 팍팍 올리면 되잖아! 높은 소리도 제대로 녹음되면 문제 해결 아닌가?</p>\n</blockquote>\n<p>하지만 이 디지털 오디오 기술이 처음 사용되기 시작한게 <code class=\"language-text\">1970년대</code>이기 때문에 무작정 샘플 레이트를 올리기에는 하드웨어 용량이 못 따라갔었다.</p>\n<p>그래서 이 문제를 해결하기 위해 사용한 방법이 바로 <code class=\"language-text\">LPF(Low Pass Filter)</code>이다. 이 필터는 전기 쪽 공부하신 분들은 매우 익숙할텐데, 말 그대로 낮은(Low) 주파수만 통과(Pass)시키는 필터이다. 오디오 녹음을 할때 <code class=\"language-text\">LPF</code>를 사용해서 인간의 가청주파수보다 높은 소리는 다 잘라버리고 인간의 가청주파수 영역의 소리만 통과시키면 방금 얘기한 고스트 주파수가 생길 일도 없기 때문이다.</p>\n<p>근데 또 아날로그 신호라는 게 그렇게 무 자르듯이 싹뚝! 잘리는 게 아니다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bcb489965646eb5446167bbddb504813/c1b63/cut-off.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVR42o1STY8hYRDuHQYzPnr1rm0d7aNFxmDGmPVtkT0gEb9BIiGcCIk4uDiKiIOjxMWJiASJCAdxc/ILHOeP2CrRSU/PJLNv8qSrq+p53qp6i1itVublcskJsdvtzKPR6CGZTHoIgrAyDPOIQDuVSr1gDHPEPNQi9vu9QojT6SQfDAb3JpPJazab9SAirVQqdD6fp8C+5TiOxli321VirphPiM6365cF0LxzvV5rDofDnSDvF8Ao4nx6+KANoOSdcLNKdLvymsNzEBKAjKjX6/pqtcoI4XA4gtls1oQxaJXudDr2drttxdYxXigUWLfbHSyVSoZms8nAXHEcPwAeotVqyXhAFVKv10tC8uv5fJaWy2U5+KXT6ZTq9/satNEHsRuXy/USjUa1yIG45FrlzYeeaZpWhsPhV+EIRDO8kCKRiMdut6uJr45Op1NBsk9IXiwW6l6v904wHo/7A4GA5r8Eg8GgV1ghtESKKwyFQr9tNpvmyxcmSfK7z+eLwCxv4ZcBuKE1n16v94ONo9Dhbvr9/jAI6j5bHeGzE1qt1ggCf0HYIpfLLeB6hhNiWRYFnxUKhQm+JtiEOMybu2pIBDrvK5TJZA+1Ws0gDIj28JLXaDRYiqIcHyqEKvAWK6zKUyaTSeRyuQi8qhPmxs1mM/N8PjdOJpMn+Lejjb7xeGzZbDaPsKN/0ul0ErmocdFyOp0qRCKRIKEy6ng83sOjWIbDoXq73Srf3t7u4CJDsVj8iTb6MBaLxTjMRQ5yeZ1/c43gleg9ctcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cut off\" title=\"\" src=\"/static/bcb489965646eb5446167bbddb504813/6af66/cut-off.png\" srcset=\"/static/bcb489965646eb5446167bbddb504813/69538/cut-off.png 160w,\n/static/bcb489965646eb5446167bbddb504813/72799/cut-off.png 320w,\n/static/bcb489965646eb5446167bbddb504813/6af66/cut-off.png 640w,\n/static/bcb489965646eb5446167bbddb504813/d9199/cut-off.png 960w,\n/static/bcb489965646eb5446167bbddb504813/c1b63/cut-off.png 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">LPF</code>를 써도 결국 잘린 부분이 저렇게 비스듬하게 꺾이면서 약간 아쉬운 부분이 남게된다. 이때 그림에 표시된 허용 범위인 <code class=\"language-text\">-3db</code> 밑으로 떨어지기 시작하는 곳을 <code class=\"language-text\">Cut Off</code>라고 부른다. 저기에서부터 신호가 잘렸다고 치겠다는 것이다. 그럼 <code class=\"language-text\">Cut Off</code>되는 부분을 <code class=\"language-text\">20kHz</code>보다 조금 더 밑으로 내리면 <code class=\"language-text\">20kHz</code> 언저리에서 신호가 사라지게 만들 수 있지 않을까? 라는 생각도 들지만 그 문제 때문에  <code class=\"language-text\">20kHz</code>의 주파수 영역을 전부 활용하지 못하는 건 너무 아깝다고 판단이 들었나보다.</p>\n<p>그래서 <code class=\"language-text\">Cut Off</code>를 딱 <code class=\"language-text\">20kHz</code>에 맞추고 남는 부분은 그냥 감수하자고 합의가 된 것이다. 당시 기술로 저 남는 부분을 줄이고 줄여서 맞춘게 딱 <code class=\"language-text\">2,050hz</code>였다.</p>\n<p>그럼 이제 남는 부분과 가청주파수를 합쳐보면 <code class=\"language-text\">22,050hz</code>가 된다. 나이퀴스트 이론에 따르면 우리는 최소한 2배의 샘플 레이트를 준비해야 이 신호를 제대로 측정할 수 있으므로 결국 CD의 표준 샘플 레이트가 <code class=\"language-text\">44,100hz = 44.1kHz</code>가 된 것이다.\n뭐 그 외에도 당시 기술의 한계 외에도 기업들끼리 싸우기도 하고 어른의 사정도 있는 등 국제 표준을 정할 때 늘 발생하는 여러가지 이슈가 있었지만 대표적인 기술적인 이슈는 이 이유였다.</p>\n<p>그 후 <code class=\"language-text\">48kHz</code>, <code class=\"language-text\">96kHz</code>, <code class=\"language-text\">192kHz</code> 등의 높은 샘플 레이트는 그냥 디바이스가 발전하면서 기술적인 제한이 없어졌으니까 “샘플 레이트는 클수록 좋지! 뿜뿜”하면서 늘린 것이다.</p>\n<h3>비트 레이트(Bit Rate)</h3>\n<p><code class=\"language-text\">비트 레이트</code>는 샘플링에 비하면 초 간단하다. 특히 우리 같은 개발랭이들에게 익숙한 이름인 <code class=\"language-text\">Bit</code>가 붙어있지 않은가? 샘플 레이트가 소리의 가로 해상도 역할을 한다면 <code class=\"language-text\">비트 레이트</code>는 세로 해상도 역할을 한다.</p>\n<p>샘플 레이트와 마찬가지로 비트 레이트도 CD를 기준으로 설명하는 게 보편적이기 때문에 다시 CD를 기준으로 설명하겠다.</p>\n<p>CD의 비트 레이트는 <code class=\"language-text\">16bit</code>인데 이건 말 그대로 세로로 <code class=\"language-text\">16bit</code> 만큼의 해당하는 값을 표현할 수 있다는 얘기이다. 아까 위에서 설명한 샘플링을 진행할 때 전압을 측정했었다. 이때 컴퓨터가 측정한 이 전압의 값을 얼마나 섬세하게 표현할 수 있느냐를 비트 레이트가 결정하는 것이다. <code class=\"language-text\">16bit</code>면 16자리의 이진법을 사용할 수 있다는 것이고 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>=</mo><mn>65536</mn></mrow><annotation encoding=\"application/x-tex\">2^{16} = 65536</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">16</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">65536</span></span></span></span></span>이니까 <code class=\"language-text\">0-65536</code>까지 총 <code class=\"language-text\">65537</code>개의 값을 사용할 수 있는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b1bb1c1aa17f6cf158141942536a758f/f2239/bitrate.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAD2EAAA9hAHVrK90AAABdUlEQVR42o2S20oCURSGf8dDaTNqGo4zlqZJgXfVRVcWSRCkIlSSZUJhWCoeShANKQIpCrrqEXqHeoAezP45BBFFLvhYh2HW3v9aGwAmiVv3sY8wlLscvPtFhO53sPQ+z7qdzBAvDLPgH/PohF8TmD6sQrBdMD9nnxJ8+RbibwvMgySA25GA5VEc4oZ2gPRXQxHhoQL/WZ3xMSkDQpU+T9+A2i/AW4swl4GRBbPPTiDhYG4jArF+Q8v5QX3MwKZeMd4lp0ZT6x59BfZQBcpTDoj8lGz5Xb5NScK50mLU5gEV+gbpG7IFrV6DlGrDk+4wLrB2YiqpmxT13B6oYCKyaUg2FuM0cRny9PpXTYK/XIVjrseYCF16bSwDxk36DqT0EGIqgTHNBU82CvXmgJKa5pxLpoIjTK1eIviwbl5iHPNpzyqE6Msi3NlrYxza0jgOR6wFmYuDom3eP+4NtYZx/Qe5s6Y/L3GrB3G7C3WQgSup6AcC8id2pjciNdJZ2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bitrate\" title=\"\" src=\"/static/b1bb1c1aa17f6cf158141942536a758f/6af66/bitrate.png\" srcset=\"/static/b1bb1c1aa17f6cf158141942536a758f/69538/bitrate.png 160w,\n/static/b1bb1c1aa17f6cf158141942536a758f/72799/bitrate.png 320w,\n/static/b1bb1c1aa17f6cf158141942536a758f/6af66/bitrate.png 640w,\n/static/b1bb1c1aa17f6cf158141942536a758f/d9199/bitrate.png 960w,\n/static/b1bb1c1aa17f6cf158141942536a758f/21b4d/bitrate.png 1280w,\n/static/b1bb1c1aa17f6cf158141942536a758f/f2239/bitrate.png 3116w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    비트 레이트가 높을 수록 아날로그 신호 내부의 막대가 더 꼼꼼하게 채워지는 것을 볼 수 있다.<br>\n    +와 -를 합쳐서 비트를 세는 `signed`이기 때문에 그림에는 50% 씩만 표현되어있는 것이다.\n  </small>\n</center>\n<p>물론 아날로그인 소리 신호가 변환된 전압 값이 <code class=\"language-text\">123</code> 같이 딱 떨어지는 정수일리가 없으므로 우리가 사용할 수 있는 <code class=\"language-text\">0-65536</code> 중 근사치를 찾아서 바꿔주는데 이 과정을 <code class=\"language-text\">양자화(Quantizing)</code>이라고 부른다. <small>(양자역학에서 나오는 그 양자랑 같은 의미 맞다.)</small></p>\n<p>이후 <code class=\"language-text\">0-65536</code>의 값으로 변경된 전압을 컴퓨터가 이해할 수 있는 <code class=\"language-text\">이진수(Binary)</code>로 변경하는 과정을 <code class=\"language-text\">부호화(Coding)</code>라고 한다.</p>\n<p>이런 것들은 우리같은 개발랭이들은 워낙 익숙한 문제이기 때문에 이 정도만 설명하고 넘어가겠다.</p>\n<h2>Web Audio API로 파형 그려보기</h2>\n<p>자, 드디어 길고 길었던 소리 이론이 끝났다. 필자는 디지털로 변환된 오디오를 가지고 파형을 그려보는 것이 목적이기 때문에 <code class=\"language-text\">Analog to Digital</code>만 다뤘고 <code class=\"language-text\">Digital to Analog</code>는 이 포스팅에서 다루지 않겠다. 근데 이것도 나름 재밌으므로 따로 찾아보길 강추한다. 필자는 오디오 파일을 업로드해서 해당 오디오 파일을 <code class=\"language-text\">Web Audio API</code>로 분석하여 필요한 데이터를 뽑아내고 <code class=\"language-text\">svg</code>를 사용하여 파형을 그릴 것이다.</p>\n<p>참고로 프로젝트는 <code class=\"language-text\">webpack4</code>와 <code class=\"language-text\">babel7</code>을 사용하여 초간단하게 구성했다. 자세한 코드는 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에서 확인 해볼 수 있다.</p>\n<h3>기본 틀 잡기</h3>\n<p>그럼 먼저 HTML을 간단하게 작성하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>audio-uploader<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>waveform<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">preserveAspectRatio</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>none<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>g</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>waveform-path-group<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>g</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>HTML은 이게 끝이다. 오디오 파일을 업로드할 <code class=\"language-text\">input</code> 엘리먼트 하나와 파형을 그릴 <code class=\"language-text\">svg</code> 엘리먼트 하나만 있으면 된다. 어차피 테스트 용도라서 UI가 중요한게 아니기 때문에 기능 구현에 충실했다.<small>(라고 포장을 해봅니다)</small></p>\n<p>이제 파일이 업로드되면 실행될 이벤트 핸들러를 작성하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// index.js</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputDOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'audio-uploader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  inputDOM<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsArrayBuffer</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">FileReader.prototype.readAsArrayBuffer</code> 메소드는 바이너리 형태인 파일을 한번에 반환하는 것이 아니라 일정 단위의 <code class=\"language-text\">청크(Chunk)</code>로 반환하는 메소드이다. 보통 뭐 서버로 파일 업로드 한다거나 할 때 많이 사용한다. 원래는 이 <code class=\"language-text\">ArrayBuffer</code>를 처리해주기 위한 별도의 로직을 작성해야하지만 이번에 사용할 <code class=\"language-text\">Web Audio API</code>가 내부적으로 <code class=\"language-text\">ArrayBuffer</code>를 알아서 처리해주기 때문에 걱정하지 않아도 된다.</p>\n<h3>AudioAnalyzer 클래스 작성</h3>\n<p>이제 본격적인 <code class=\"language-text\">Web Audio API</code>를 사용해볼 차례이다. 필자는 별도로 <code class=\"language-text\">AudioAnalyzer</code>라는 싱글톤 클래스를 만들었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// lib/AudioAnalyzer.js</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AudioAnalyzer</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>window<span class=\"token punctuation\">.</span>AudioContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> errorMsg <span class=\"token operator\">=</span> <span class=\"token string\">'Web Audio API 지원 안돼유 ㅜㅜ'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>errorMsg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>errorMsg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>AudioContext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>peaks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>waveFormBox <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'waveform'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>waveFormPathGroup <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'waveform-path-group'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">reset</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>AudioContext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>peaks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AudioAnalyzer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>SVG 뷰박스를 설정하자</h3>\n<p>이렇게 대충 기본 틀을 잡아주고 나서 오디오 파형을 그릴 <code class=\"language-text\">svg</code> 엘리먼트의 뷰박스를 설정할 수 있는 메소드를 하나 선언할 것이다. 소리 신호는 샘플 레이트에 따라서 들어온 데이터의 길이가 천차만별이기 때문에 뷰박스의 <code class=\"language-text\">width</code>를 오디오 데이터의 크기에 맞게 동적으로 변경해줘야지 모든 신호를 뷰박스에 딱 맞게 그릴 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">updateViewboxSize</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>waveFormBox<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'viewBox'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">0 -1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 2</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">svg</code> 엘리먼트의 <code class=\"language-text\">viewBox</code> 속성은 앞에서부터 <code class=\"language-text\">min-x</code>, <code class=\"language-text\">min-y</code>, <code class=\"language-text\">width</code>, <code class=\"language-text\">height</code>를 의미한다. 비트 레이트를 설명할 때 얘기 했듯이 오디오 신호는 부호를 가지는 <code class=\"language-text\">signed</code>이기 때문에 <code class=\"language-text\">0, 0</code>이 아닌 <code class=\"language-text\">0, -1</code>에서 뷰박스를 설정해야한다. 그리고 <code class=\"language-text\">width</code>는 오디오의 샘플 레이트로 잡아줘서 오디오 신호가 뷰박스의 처음부터 끝까지 꽉 차도록 설정하고 <code class=\"language-text\">height</code>는 <code class=\"language-text\">-1 ~ 1</code>까지 잡아줘야하니까 <code class=\"language-text\">2</code>로 설정했다.</p>\n<p>이렇게 선언한 <code class=\"language-text\">updateViewboxSize</code>메소드는 어플리케이션이 초기화될때 뷰박스 사이즈도 함께 초기화되도록 <code class=\"language-text\">constructor</code>와 <code class=\"language-text\">reset</code> 메소드에 적당히 추가해주었다.</p>\n<h3>업로드된 AudioBuffer 확인하기</h3>\n<p>이제 <code class=\"language-text\">input</code> 엘리먼트를 통해 업로드된 오디오 파일을 디코딩하는 귀여운 setter를 하나 선언하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">setAudio</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">audioFile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">decodeAudioData</span><span class=\"token punctuation\">(</span>audioFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">buffer</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">AudioContext.prototype.decodeAudioData</code> 메소드는 <code class=\"language-text\">ArrayBuffer</code>를 받아서 <code class=\"language-text\">AudioBuffer</code>로 변환하는 메소드이다. 아까 위에서 설명했던 대로 <code class=\"language-text\">readAsArrayBuffer</code> 메소드가 반환한 <code class=\"language-text\">ArrayBuffer</code>는 한번에 모든 바이너리 데이터를 불러오는 것이 아니라 청크 단위로 불러오기 때문에 <code class=\"language-text\">decodeAudioData</code>도 변환을 동기적으로 해주지는 않는다. 그래서 이 메소드를 사용할 때는 콜백함수를 사용하거나 <code class=\"language-text\">Promise</code>를 사용해야 한다.</p>\n<p>이제 실제로 오디오 파일이 어떻게 변환되는지 보기 위해 파일을 업로드하면 <code class=\"language-text\">AudioAnalyzer</code>에게 오디오 파일을 넘기도록 변경해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// index.js</span>\n<span class=\"token keyword\">import</span> AudioAnalyzer <span class=\"token keyword\">from</span> <span class=\"token string\">'./lib/AudioAnalyzer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputDOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'audio-uploader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  inputDOM<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// AudioAnalyzer 초기화</span>\n      AudioAnalyzer<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// AudioAnalyzer에게 파일 토스</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> AudioAnalyzer<span class=\"token punctuation\">.</span><span class=\"token function\">setAudio</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsArrayBuffer</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 쯤 했으면 이제 메인 함수에는 더 이상 뭘 작성할 필요가 없을 것 같다. 이제 <code class=\"language-text\">AudioAnalyzer</code>만 가지고 놀면 된다. 데이터가 어떻게 나오는 지 확인하기 위해 필자가 좋아하는 가수인 거미의 <code class=\"language-text\">그대 돌아오면.mp3</code> 파일을 업로드 해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">AudioBuffer <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token number\">12225071</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">277.2124943310658</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">sampleRate</span><span class=\"token operator\">:</span> <span class=\"token number\">44100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">numberOfChannels</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그러면 <code class=\"language-text\">AudioAnalyzer</code>의 <code class=\"language-text\">setAudio</code> 메소드 내부에서 실행된 <code class=\"language-text\">decodeAudioData</code>가 <code class=\"language-text\">ArrayBuffer</code>를 받아서 <code class=\"language-text\">AudioBuffer</code>로 변환한 뒤 반환해준다. 이걸 뜯어보면 유용한 정보들이 들어있다.</p>\n<hr>\n<ul>\n<li><code class=\"language-text\">sampleRate</code>: 당연히 샘플 레이트를 의미하고 이 곡의 샘플 레이트는 <code class=\"language-text\">44,100hz</code>이다.</li>\n<li><code class=\"language-text\">numberOfChannels</code>: 이 오디오가 몇개의 채널을 가지고 있는지를 나타내는데 이 파일은 두 개의 채널이 있는 스테레오 채널 오디오 파일이다.</li>\n<li><code class=\"language-text\">length</code>: <code class=\"language-text\">피크(Peak)</code>들의 개수를 의미한다. 피크는 컴퓨터가 샘플링을 진행할 때 전압을 측정한 값을 의미한다.</li>\n<li><code class=\"language-text\">duration</code>: 이 오디오 파일의 재생 길이를 <code class=\"language-text\">초</code>단위로 표시해준다. <code class=\"language-text\">그대 돌아오면</code>은 약 <code class=\"language-text\">277초</code>동안 재생되나보다.</li>\n</ul>\n<hr>\n<p>음 여기서 한가지 결정해야할 것이 생겼다. 채널이 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>개인 오디오 데이터가 들어왔을 때 그 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>개의 채널의 오디오 파형을 모두 표현해주거나 채널을 하나로 합쳐서 파형을 표현해주어야한다. 필자는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>개의 채널을 가진 오디오 데이터가 들어오더라도 그 채널을 모두 한개의 채널로 머지해서 파형을 그릴 예정이다.</p>\n<p>하지만 이 포스팅에서 채널을 머지하는 것까지 모두 이야기하면 너무 복잡해지기 때문에 그냥 하나의 채널만 사용하여 진행하도록 하겠다.</p>\n<h3>오디오 데이터 분석하고 정제하기</h3>\n<p>이제 필자는 기본적인 오디오 데이터인 <code class=\"language-text\">AudioBuffer</code>를 얻었다. 이제 이 데이터만 있어도 오디오 파형을 그릴 수 있다.\n이제 <code class=\"language-text\">AudioBuffer</code>에서 필요한 데이터만 뽑아서 클래스의 멤버변수들에 할당해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">setAudio</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">audioFile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">decodeAudioData</span><span class=\"token punctuation\">(</span>audioFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">buffer</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// AudioBuffer 객체를 멤버변수에 할당</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer <span class=\"token operator\">=</span> buffer<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 업로드된 오디오의 샘플 레이트를 멤버변수에 할당</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate <span class=\"token operator\">=</span> buffer<span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 샘플 레이트에 맞춰서 svg 엘리먼트 크기 조정</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateViewboxSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>후, 여기까지 왔으면 파형을 그릴 준비가 모두 끝났다. 우선 <code class=\"language-text\">AudioBuffer</code>에서 오디오 신호를 하나하나 뽑아보자.</p>\n<p>먼저 오디오 신호가 들어있는 배열부터 한번 살펴보자. 아까 필자가 <code class=\"language-text\">AudioBuffer</code>의 데이터를 간략하게 봤을 때 <code class=\"language-text\">numberOfChannels</code>라는 프로퍼티가 있었고 이 값이 <code class=\"language-text\">2</code>인 <code class=\"language-text\">스테레오</code> 채널이었다. 이 채널 데이터는 <code class=\"language-text\">AudioBuffer.getChannelData</code> 메소드를 통해서 가져올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer<span class=\"token punctuation\">.</span>numberOfChannels<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Float32Array(12225071) [0, 0, 0, …]</span>\n<span class=\"token comment\">// Float32Array(12225071) [0, 0, 0, …]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>아닛 어마무시한 길이의 <code class=\"language-text\">Float32Array</code>가 나왔다. 지금 필자에게 보이는 값은 전부 <code class=\"language-text\">0</code>이지만 보통 음악이 시작하자마자 쿠과과광! 하진 않기 때문에 그런거지 뒤쪽 인덱스의 엘리먼트에는 값이 제대로 들어가 있다. 그렇다고 이 값들을 그대로 사용하긴 조금 힘들고 조금 손질을 해줘야 한다.</p>\n<p>우선 저 배열에 들어있는 원소의 정체가 뭔지부터 생각해보자. 배열의 길이인 <code class=\"language-text\">12225071</code>를 사용하면 이 친구의 정체를 파악할 수 있다. 아까 우리가 <code class=\"language-text\">AudioBuffer</code>를 통해 이 곡의 <code class=\"language-text\">재생길이(Duration)</code>를 봤을 때 약 <code class=\"language-text\">277초</code> 였다. 이 곡의 <code class=\"language-text\">샘플 레이트</code>와 <code class=\"language-text\">재생길이</code>를 곱해보면 <code class=\"language-text\">12225071</code>이 나온다. 즉, 저 원소들은 컴퓨터가 샘플 레이트에 따라 측정한 전압인 피크이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f62ba441843fe9172b18fc5498bd765d/2c288/sampling.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB2ElEQVR42mNgYGAQAGI+BghgZMAJ/sPkGP8zMIgBMSeQzQPVyw/ELHClbc6xwruN0/gZ8IDF0bl8S7yy5P8DDa53jRHzjWgVBwoLATGIFgZiJrDCK6te8qxwz3Bf5ZzmkV+/XwCbS0NX/eecG1prv8csyLEreaoeSMy+fj8L1BBmKA3Rszx1qtVNMTmlm3K6Sv1x3XZgz0El6xnqwbZOi+8x3msdpg8UF17oV+GyMKBCGFkdCrjokmIBlBAF4U0uaTa96dOlIYohYVafu5ivP67fDigvAcTiR0xC1SfGT7RAUsPEoOLBnjbzDCvYQGcpTUNtBgZ9QwYGPQdxVXN/26hwJyDbnJXVGKhL19/MP8BP3thRhYFBy4SV1dAASIcb+4W6K+ramgPVGTMwGPmLK/rqazu6AY1TgDmUJRQSFgxzfEost5kH6wFdI/KQn19palijI0P9fyak8GLIrlgnvMopwfUz0MUgl88MbbTP968XgHu7HqgYFh6LYrq55wZVu4C8t84p2awrbaYyzHv/IUkGHK4TY9sN9xp46x/Vc9UBWmqKHqZMyOHWnDlVdotthPfMwFrT/7jS5v//TEt9si3Xu6Q5A9ms6NKM6OxtHrl824CBzUAiAADz6odDaFdLSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sampling\" title=\"\" src=\"/static/f62ba441843fe9172b18fc5498bd765d/6af66/sampling.png\" srcset=\"/static/f62ba441843fe9172b18fc5498bd765d/69538/sampling.png 160w,\n/static/f62ba441843fe9172b18fc5498bd765d/72799/sampling.png 320w,\n/static/f62ba441843fe9172b18fc5498bd765d/6af66/sampling.png 640w,\n/static/f62ba441843fe9172b18fc5498bd765d/2c288/sampling.png 684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>저 하나하나의 피크들이 전부 Float32Array의 원소로 들어가있다.</small>\n</center>\n<p>일단 저 원소의 정체가 피크라는 것을 알았으니 이 친구들을 조금 정제해보자. 왜 이걸 정제하느냐?</p>\n<blockquote>\n<p>12,225,071개의 피크를 전부 렌더한다는 게 과연 효율적인 시각화인가…?</p>\n</blockquote>\n<p>라는 합리적 의심 때문이다. 솔직히 피크가 <code class=\"language-text\">천만</code>개가 찍히던 <code class=\"language-text\">오백만</code>개가 찍히던 어차피 우리는 조그만 모니터로 볼 것이기 때문에 굳이 이걸 하나하나 다 표현해준다는 것 자체가 큰 의미는 없다.</p>\n<p>그래서 필자는 피크들을 적당히 압축할 것이다. 모든 피크를 수집하는 것이 아니라 적당한 길이의 샘플을 만들고 해당 샘플 안의 <code class=\"language-text\">최대값</code>과 <code class=\"language-text\">최소값</code>만 수집할 것이다.</p>\n<p>위에서 설명했듯이 <code class=\"language-text\">나이퀴스트 이론</code>에 따르면 어차피 하나의 사이클을 표현할때 <code class=\"language-text\">최대값 한개</code>와 <code class=\"language-text\">최소값 한개</code>만 알면 아무 문제가 없다. 파형의 해상도는 조금 떨어지겠지만 이건 뭐 상용 툴도 아니기 때문에 큰 의미는 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> sampleSize <span class=\"token operator\">=</span> peaks<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sampleStep <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>sampleSize <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 예시로 0번 채널만 가져옴</span>\n<span class=\"token keyword\">const</span> peaks <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resultsPeaks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 딱 샘플 레이트 길이인 44100개의 피크만 수집할 것이다.</span>\n<span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> newPeakIndex</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> start <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>newPeakIndex <span class=\"token operator\">*</span> sampleSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> end <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>newPeakIndex <span class=\"token operator\">+</span> sampleSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> min <span class=\"token operator\">=</span> peaks<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> peaks<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> sampleIndex <span class=\"token operator\">=</span> start<span class=\"token punctuation\">;</span> sampleIndex <span class=\"token operator\">&lt;</span> end<span class=\"token punctuation\">;</span> sampleIndex <span class=\"token operator\">+=</span> sampleStep<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> v <span class=\"token operator\">=</span> peaks<span class=\"token punctuation\">[</span>sampleIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">></span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      max <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">&lt;</span> min<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      min <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  resultPeaks<span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> newPeakIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> max<span class=\"token punctuation\">;</span>\n  resultPeaks<span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> newPeakIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> min<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>좀 복잡해보이지만 이 코드를 한마디로 표현하면 다음과 같다.</p>\n<blockquote>\n<ol>\n<li>샘플레이트 만큼 이터레이션을 돈다.</li>\n<li>특정 길이의 2차 샘플 구간을 정하고 그 구간 내에서 최대값과 최소값을 찾는다.</li>\n<li>resultPeaks 배열의 짝수 인덱스에 최대값을, 홀수 인덱스에는 최소값을 삽입한다.</li>\n</ol>\n</blockquote>\n<p><code class=\"language-text\">resultsPeaks</code>배열에 값을 저장할 때 <code class=\"language-text\">2 * newPeakIndex</code>와 같이 배열의 크기를 2배로 해주는 이유는 피크를 한번 이터레이션 돌 때 <code class=\"language-text\">max</code>와 <code class=\"language-text\">min</code> 최대 2개의 값을 저장해야하기 때문이다.</p>\n<p>이렇게 해서 필자는 적당히 압축된 <code class=\"language-text\">88200</code> 길이의 피크 배열 하나를 얻게 되었다.</p>\n<h3>이제 진짜 그려보자!</h3>\n<p>그리는 방법은 생각보다 단순하다. 위에서 뽑아온 피크 배열을 순회돌면서 그려주기만 하면 된다.</p>\n<p><code class=\"language-text\">SVG</code>의 <code class=\"language-text\">path</code> 엘리먼트는 <code class=\"language-text\">d</code> 속성에 담긴 문자열을 분석하여 선을 그려준다. 이때 <code class=\"language-text\">M</code>은 <code class=\"language-text\">Move</code>, 그림을 그릴 포인터를 옮기는 명령어이고 <code class=\"language-text\">L</code>은 <code class=\"language-text\">Line</code>, 지정한 곳까지 선을 긋는 명령어이다.</p>\n<p>즉, 우리는 <code class=\"language-text\">포인터를 옮기고 선을 긋고</code>를 반복하면 되는 것이다. 아까 필자가 짝수 인덱스에는 최대 값을 담고 홀수 인덱스에는 최소값을 담아준 이유가 바로 여기에 있다. 이터레이션을 돌면서 짝수 인덱스 일때는 <code class=\"language-text\">M</code> 명령어를 사용하여 포인터를 옮기고 홀수 인덱스 일때는 <code class=\"language-text\">L</code> 명령어를 사용하여 선을 그리려고 한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">draw</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioBuffer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> peaks <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>peaks<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> totalPeaks <span class=\"token operator\">=</span> peaks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> d <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> peakIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> peakIndex <span class=\"token operator\">&lt;</span> totalPeaks<span class=\"token punctuation\">;</span> peakIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>peakNumber <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        d <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> M</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>peakNumber <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>peaks<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        d <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> L</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>peakNumber <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>peaks<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElementNS</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.w3.org/2000/svg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributeNS</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>waveFormPathGroup<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">Math.floor(peakNumber / 2)</code>는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>축, <code class=\"language-text\">peaks.shift()</code>는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span>축을 의미한다. 이 코드는 대략 이런 식으로 작동할 것이다. 앞에 붙은 숫자는 피크의 인덱스라고 생각하자.</p>\n<blockquote>\n<ol>\n<li>(0, 100)으로 포인터 이동</li>\n<li>(0, -25)으로 선을 긋는다.</li>\n<li>(1, 300)으로 포인터 이동</li>\n<li>(1, -450)으로 선을 긋는다.</li>\n<li>쭉쭉 반복</li>\n</ol>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1118d0dac6e09f7762f18b1e9a75eae3/2bef9/svg-graph.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVR42q1Ui3KDMAzj/792KwTIy56kBFq6lrG7cpdzcCxZdgyDf/gZrgTZ4cWuEdZatQwA7WHNus3Za0oifo7b7HtC7kFgJGAwFcXotq7tDPZ/hFS0zG4RBPRhL8LYCadRpH8TkgiqPAEMkNGCrIap+aQQ4GnywnNimASY+tDXndBKFUhqALoTBvecepKkBGUOra84Uxz2O2FCUAgAIqgweFk83769rLB4z+OI/Qrfl2eejTdP8GUkS4yjryt+UljaRVBN2BQuLxQycVNWw72Slz1UH0ncwSpZ5SVdxqHk2AlZOjDnt4xylZm+uStEqSLEYmva2fz+Ug5zSLuNBMmhgOMjNfDtt6wW5XNCf5ivbf36iuKFOTz/mO2yf/j03+YHjbqjJKikfkgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"svg graph\" title=\"\" src=\"/static/1118d0dac6e09f7762f18b1e9a75eae3/6af66/svg-graph.png\" srcset=\"/static/1118d0dac6e09f7762f18b1e9a75eae3/69538/svg-graph.png 160w,\n/static/1118d0dac6e09f7762f18b1e9a75eae3/72799/svg-graph.png 320w,\n/static/1118d0dac6e09f7762f18b1e9a75eae3/6af66/svg-graph.png 640w,\n/static/1118d0dac6e09f7762f18b1e9a75eae3/d9199/svg-graph.png 960w,\n/static/1118d0dac6e09f7762f18b1e9a75eae3/2bef9/svg-graph.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>저 과정을 반복하면 대략 이런 모양의 작대기들이 그려진다</small>\n</center>\n<p>우리가 그리려는 오디오 파형은 디지털 신호를 표현한 것이기 때문에 위에서 우리가 봤던 오디오 신호의 예시처럼 연속적인 아날로그로는 표현이 불가능 하다. 그래서 이렇게 작대기를 쭉쭉 그어가면서 표현해야하는 것이다. 이렇게 보면 상당히 허접한 그림이 나올 것 같지만, 저 선이 <code class=\"language-text\">88,200</code>개가 겹쳐있으면 꽤 그럴싸해보인다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4fc99e0799e666c130dfd81d1d0d3bae/3c1e5/two-dimension.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3klEQVR42k2Pu0pDYRCEzxv6CPoAFmITFEQtUhhELSyCoHiBFFGCl0RiMELUKMGgNtqoiI9g4eWQnf38f3LkZGDYYXdY+BKC3MnluePelWeFLBt6kEL6BZaO9IKS955zvy9eL53nM+ehJvoV0d0UrSXRXhG9PdFZF6eLxsmccTRjVCeNnXGjVRJ3od9eFR99J3npiNtt8dR0HmvD482WuFgTx7NGY8G4KovzZXFYMA6mg6eM3QmjPGbU543rDdEsirdueOgZzigmGUJ0xPxH8og7yJB/4PszzN+8G5H/AOW3I13BHvjUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"two dimension\" title=\"\" src=\"/static/4fc99e0799e666c130dfd81d1d0d3bae/6af66/two-dimension.png\" srcset=\"/static/4fc99e0799e666c130dfd81d1d0d3bae/69538/two-dimension.png 160w,\n/static/4fc99e0799e666c130dfd81d1d0d3bae/72799/two-dimension.png 320w,\n/static/4fc99e0799e666c130dfd81d1d0d3bae/6af66/two-dimension.png 640w,\n/static/4fc99e0799e666c130dfd81d1d0d3bae/d9199/two-dimension.png 960w,\n/static/4fc99e0799e666c130dfd81d1d0d3bae/21b4d/two-dimension.png 1280w,\n/static/4fc99e0799e666c130dfd81d1d0d3bae/3c1e5/two-dimension.png 2854w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>작대기도 잘 그으면 예술이 된다</small>\n</center>\n<p>자, 이렇게 오디오 파형을 심플하게 그려보았다. 여기까지 해놓고 하는 말인데… 사실 <a href=\"https://github.com/katspaugh/wavesurfer.js\" target=\"_blank\" rel=\"nofollow\">WaveSurfer</a>라고 이거 해주는 라이브러리가 있다. 기능도 더 많다.</p>\n<p>그냥 내 손으로 한번 직접 그려보고 싶었다.</p>\n<h2>음악 주세요 DJ</h2>\n<p>파형만 그리기는 좀 아쉬우니 막간을 이용해서 메소드 하나만 더 만들어보자. 바로 이 음악을 재생하는 기능이다.\n원래 이 메소드를 만들 때 필자의 의도는 <code class=\"language-text\">음악이라도 좀 들으면서 만들자</code>였는데 이거 만들면서 <code class=\"language-text\">그대 돌아오면</code>을 너무 많이 들어서 조금 질려버렸다.<small>(거미 누나 미안…)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">play</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">buffer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sourceBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  sourceBuffer<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> buffer<span class=\"token punctuation\">;</span>\n  sourceBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  sourceBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">AudioContext.prototype.createBufferSource</code> 메소드는 <code class=\"language-text\">AudioNode</code> 중 하나인 <code class=\"language-text\">AudioBufferSourceNode</code>라는 친구를 생성하는 메소드인데, 이 <code class=\"language-text\">AudioNode</code>에게 우리가 지금까지 가지고 놀았던 <code class=\"language-text\">AudioBuffer</code>를 넘겨주면 진짜 오디오적인 컨트롤을 할 수가 있게 도와주는 음…껍데기 같은 느낌이다.</p>\n<p><code class=\"language-text\">Web Audio API</code>는 이런 <code class=\"language-text\">AudioNode</code>들을 서로 연결해서 소리를 변조할 수 있는 기능을 제공하기 때문에 이걸 사용해서 컴프레서나 리버브 같은 오디오 이펙터도 만들 수 있다. 다음에는 한번 오디오 이펙터를 만들어보는 것을 목표로 해야겠다.</p>\n<p>완성된 샘플의 소스는 필자의 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에서, 라이브 데모는 <a href=\"https://simple-audio-waveform.herokuapp.com/\" target=\"_blank\" rel=\"nofollow\">여기서</a> 확인할 수 있다.</p>\n<p>이상으로 컴퓨터는 어떻게 소리를 들을까? 포스팅을 마친다.</p>","fields":{"slug":"20190710-javascript-audio-waveform","path":"/2019/07/10/javascript-audio-waveform/","lang":"ko"},"frontmatter":{"title":"컴퓨터는 어떻게 소리를 들을까?","date":"2019-07-10","categories":["프로그래밍","오디오"],"tags":["Sound Engineering","사운드 엔지니어","나이퀴스트","Logic Pro X","로직프로","Cubase","큐베이스","Analog to Digital","AD Covert","Digital to Analog","DA Covert","샘플링","Sampling","Sample Rate","AudioContext","Bit Rate","자바스크립트","JavaScript Audio API"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/6cd3149c200b28430bab8288d044aa4c/3a812/thumbnail.jpg","srcSet":"/static/6cd3149c200b28430bab8288d044aa4c/1cda5/thumbnail.jpg 80w,\n/static/6cd3149c200b28430bab8288d044aa4c/b1a47/thumbnail.jpg 160w,\n/static/6cd3149c200b28430bab8288d044aa4c/3a812/thumbnail.jpg 320w,\n/static/6cd3149c200b28430bab8288d044aa4c/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/6cd3149c200b28430bab8288d044aa4c/3e5ca/thumbnail.webp 80w,\n/static/6cd3149c200b28430bab8288d044aa4c/b72f1/thumbnail.webp 160w,\n/static/6cd3149c200b28430bab8288d044aa4c/fc5c5/thumbnail.webp 320w,\n/static/6cd3149c200b28430bab8288d044aa4c/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#080808","images":{"fallback":{"src":"/static/6cd3149c200b28430bab8288d044aa4c/bae9c/thumbnail.jpg","srcSet":"/static/6cd3149c200b28430bab8288d044aa4c/23110/thumbnail.jpg 750w,\n/static/6cd3149c200b28430bab8288d044aa4c/da421/thumbnail.jpg 1080w,\n/static/6cd3149c200b28430bab8288d044aa4c/bae9c/thumbnail.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/6cd3149c200b28430bab8288d044aa4c/6858b/thumbnail.webp 750w,\n/static/6cd3149c200b28430bab8288d044aa4c/f5547/thumbnail.webp 1080w,\n/static/6cd3149c200b28430bab8288d044aa4c/863b3/thumbnail.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"86eaf521-bcde-5dc6-8ec6-ea5f74108a67","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%98%A4%EB%94%94%EC%98%A4-%EC%8B%A0%ED%98%B8%EB%8A%94-%ED%9D%90%EB%A5%B4%EB%8A%94-%EA%B2%83%EC%9D%B4%EB%8B%A4\">오디오 신호는 흐르는 것이다</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%98%A4%EB%94%94%EC%98%A4%EC%9D%98-%EC%9D%8C%EB%9F%89%EC%9D%84-%EC%A1%B0%EC%A0%88%ED%95%98%EA%B8%B0\">오디오의 음량을 조절하기</a></p>\n<ul>\n<li><a href=\"#gain%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\">Gain이란 무엇인가요?</a></li>\n<li><a href=\"#gain-node%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EC%9D%8C%EB%9F%89%EC%9D%84-%EC%A1%B0%EC%A0%88%ED%95%B4%EB%B3%B4%EC%9E%90\">Gain Node를 사용하여 음량을 조절해보자</a></li>\n</ul>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 컴퓨터는 어떻게 소리를 들을까? 포스팅에서 진행했던 오디오 파형 그리기에 이어서 오디오에 여러가지 효과를 줄 수 있는 이펙터를 만드는 과정을 설명하려고 한다. HTML5의 Audio API는 오디오에 효과를 줄 수 있는 여러가지 노드를 제공하는데, 대부분의 이펙터는 이 노드들만 사용해도 구현할 수 있을 정도로 완성도있는 API를 제공한다. 또한 이 포스팅은 총 두편에 나눠서 작성될 예정이며, 이번 포스팅에서는 의 개요와 오디오의 음량을 조절할 수 있는 를 사용하는 방법에 대해서, 다음 포스팅에서는 좀 더 복잡한 …","html":"<p>이번 포스팅에서는 <a href=\"/2019/07/10/javascript-audio-waveform/\">컴퓨터는 어떻게 소리를 들을까?</a> 포스팅에서 진행했던 오디오 파형 그리기에 이어서 오디오에 여러가지 효과를 줄 수 있는 이펙터를 만드는 과정을 설명하려고 한다. HTML5의 Audio API는 오디오에 효과를 줄 수 있는 여러가지 노드를 제공하는데, 대부분의 이펙터는 이 노드들만 사용해도 구현할 수 있을 정도로 완성도있는 API를 제공한다.</p>\n<p>또한 이 포스팅은 총 두편에 나눠서 작성될 예정이며, 이번 포스팅에서는 <code class=\"language-text\">HTML5 Audio API</code>의 개요와 오디오의 음량을 조절할 수 있는 <code class=\"language-text\">GainNode</code>를 사용하는 방법에 대해서, 다음 포스팅에서는 좀 더 복잡한 오디오 이펙터들에 대한 설명과 제작 과정을 설명할 예정이다.</p>\n<p>지난 포스팅에서 이미 오디오에 관한 기본적인 이론을 설명했으니 이번에는 기본적인 이론이 아니라 실제로 녹음실에서 오디오를 어떤 방식으로 컨트롤하고 효과를 주는 지에 대한 방법에 대해 초점을 맞추고 설명을 진행하도록 하겠다.</p>\n<h2>오디오 신호는 흐르는 것이다</h2>\n<p>일반적인 녹음실에서 우리는 마이크를 통해서 오디오를 녹음하거나 혹은 이미 녹음된 오디오를 <code class=\"language-text\">Logic Pro</code>나 <code class=\"language-text\">Cubase</code>와 같은 <code class=\"language-text\">DAW(Digital Audio Workstation)</code>으로 불러와서 사용하게 된다. 이때 처음으로 받게되는 이 오디오를 <code class=\"language-text\">소스(Source)</code>라고 한다.</p>\n<p>이 소스는 앰프, 컴프레서, 이퀄라이저 등 오디오에 특별한 느낌을 줄 수 있는 여러가지 이펙터들을 지나서 최종적으로 스피커나 헤드폰을 통해서 출력되게 된다. 이 흐름을 알고나면 HTML5의 Audio API가 제공하는 <code class=\"language-text\">노드(Node)</code>의 개념을 쉽게 이해할 수 있다. 일단 이해를 돕기 위해 필자가 예전에 사운드 엔지니어로 일할 때 사용했던 시스템을 예로 들겠다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aff4396076e86089c7d109c73767fe80/768c6/mixer.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGVitK2kAH/AP/EABoQAAIDAQEAAAAAAAAAAAAAAAECAAMSEyL/2gAIAQEAAQUCGrIiuFR/KWZhtM6Gf//EABURAQEAAAAAAAAAAAAAAAAAAAAS/9oACAEDAQE/AVP/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEyH/2gAIAQIBAT8B1N//xAAbEAABBAMAAAAAAAAAAAAAAAAAAREhMQIQQf/aAAgBAQAGPwJk4ZQTZTlNr//EABwQAQACAgMBAAAAAAAAAAAAAAEAESFxMUFhsf/aAAgBAQABPyEd3SUajEYJc0iO6bRzgeCLc/J//9oADAMBAAIAAwAAABAvL//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEUH/2gAIAQMBAT8QMhnL/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQIBAT8QTgMjZuf/xAAcEAEBAQACAwEAAAAAAAAAAAABEQAhQWHB4fD/2gAIAQEAAT8Qjk3IGDawGHY8e8DoLRjvO4ySfGToNE/POfqr5z//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mixer\" title=\"\" src=\"/static/aff4396076e86089c7d109c73767fe80/c08c5/mixer.jpg\" srcset=\"/static/aff4396076e86089c7d109c73767fe80/0913d/mixer.jpg 160w,\n/static/aff4396076e86089c7d109c73767fe80/cb69c/mixer.jpg 320w,\n/static/aff4396076e86089c7d109c73767fe80/c08c5/mixer.jpg 640w,\n/static/aff4396076e86089c7d109c73767fe80/6a068/mixer.jpg 960w,\n/static/aff4396076e86089c7d109c73767fe80/eea4a/mixer.jpg 1280w,\n/static/aff4396076e86089c7d109c73767fe80/768c6/mixer.jpg 3264w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>필자가 예전에 사용했던 장비들</small>\n</center>\n<p>사진의 중앙에 있는 커다란 장비는 아마 여러분도 TV에서 몇번 보았던 장비일 것이다. 이 장비는 여러 개의 채널로 나눠진 오디오 소스의 볼륨이나 패닝, 이퀄라이징까지 할 수 있는 일종의 컨트롤 타워 역할을 하는 믹싱 콘솔이다.</p>\n<p>그리고 믹싱 콘솔의 오른쪽에 있는 것들이 바로 오디오에 효과를 줄 수 있는 이펙터들이다. 보통은 믹싱 콘솔 양쪽에 가득 채워놓고 쓰는데 저 사진은 아직 녹음실 셋업이 덜 끝났을 때라서 몇가지 장비만 들어가 있다. 그리고 사진에는 나오지 않았지만 따로 <code class=\"language-text\">콘솔 랙(Console Rack)</code>이라는 선반을 두고 거기에도 이펙터들이 가득 채워져 있다.</p>\n<p>그리고 이펙터들의 위쪽을 보면 붉은색 선이 꽂혀있는 것을 볼 수 있는데, 저 장비가 <code class=\"language-text\">오디오의 흐름</code>을 컨트롤할 수 있는 <code class=\"language-text\">패치 테이블(Patch Table)</code>이라고 하는 장비이다.</p>\n<p>보통 사운드 엔지니어들은 같은 역할을 하는 이펙터라고 하더라도 여러 종류의 장비를 사용하게 되는데, 이는 같은 역할을 하는 이펙터라고 하더라도 장비마다 조금씩 소리가 다를 수 있기 때문이다. 즉, 같은 리버브를 사용한다고 해도 최종적으로 만들고자하는 소리가 어떤 느낌인지에 따라 <code class=\"language-text\">A 리버브</code>를 사용할 수도 있고 <code class=\"language-text\">B 리버브</code>를 사용할 수도 있다는 것이다. 그래서 이런 소리의 질을 만드는 고유한 알고리즘은 이펙터 제조 회사들의 기업 비밀이다.</p>\n<p>하지만 다른 이펙터를 사용하고 싶을 때마다 장비에 꽂혀있는 케이블을 일일히 하나하나 빼서 다시 다른 장비에 연결하는 것은 비효율적이기도 하고 케이블을 계속 뺐다가 꼈다가 하면 장비에 손상이 갈수도 있기 때문에 모든 장비의 라인을 저 패치 테이블에 연결해놓고 사용하는 것이다. 게다가 케이블은 대부분 장비 뒤쪽에 위치하기 때문에 저 믹싱 콘솔을 앞으로 살짝 밀고 봐야하는데, 딱 봐도 저 큰 장비를 계속 밀었다 당겼다 하기에는 무거워 보이지 않는가? 허리 나간다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/97c640bdaae9f458bb8b30c0717df899/6a068/patch_table_chart.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBP/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAepDQVKT/8QAFRABAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQEAAQUCY//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAADEAIP/aAAgBAQAGPwJnP//EABgQAQADAQAAAAAAAAAAAAAAAAEAEVEQ/9oACAEBAAE/IS8QvEp2AgGc/9oADAMBAAIAAwAAABATz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAIBBAMAAAAAAAAAAAAAAAERACFBYZExUXH/2gAIAQEAAT8QIrmYvjVGW6iiQXk6iuIAEJ//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"patch table chart\" title=\"\" src=\"/static/97c640bdaae9f458bb8b30c0717df899/c08c5/patch_table_chart.jpg\" srcset=\"/static/97c640bdaae9f458bb8b30c0717df899/0913d/patch_table_chart.jpg 160w,\n/static/97c640bdaae9f458bb8b30c0717df899/cb69c/patch_table_chart.jpg 320w,\n/static/97c640bdaae9f458bb8b30c0717df899/c08c5/patch_table_chart.jpg 640w,\n/static/97c640bdaae9f458bb8b30c0717df899/6a068/patch_table_chart.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>패치 테이블은 대략 이런 느낌으로 정리된다</small>\n</center>\n<p>사운드 엔지니어는 이렇게 복잡한 여러 개의 장비 사이를 흘러다니는 오디오 신호의 흐름을 패치 테이블을 통해서 한번에 파악하고 컨트롤 할 수 있다. 소리를 컨트롤하는 사람에게 오디오 신호의 흐름이라는 개념은 굉장히 중요하다. 필자가 방금 예로 든 하드웨어 장비 뿐만 아니라 소프트웨어로 구현된 이펙터를 사용하려할때도 결국은 이 흐름을 프로그램 내부에서 그대로 구현해줘야하기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 390px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ee078a891d7c62fa2cd1603c31529ad2/727ba/protools.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 144.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFZ0lEQVR42k2Ud5PbxhnG8X1i6y7jEksWLV1hLweQYEFZ7C4aQfQOUuw8nu5ULZ3KKRPP2M7EcibfJPkjnynvyeOMMfvHbx/gWbz7bGHqzSbRNKQo5UqlWqsjTAilp+VyrV6XFYwprdZq5WpVQgpR1VqjierVGCtTQ9dbDeYfVxd/u9z/8+31i2n+/aPpT8+efHz9CvjlrPj5+dNfXn9/vZw/zZK/P3/688sXPz3ef0jCj8+ffnzx7F9PLpmVJKwta+9MvH7P5bu7CbAD4HQ54AvXCQb8hDvbWuO9684lgW80ECJj3RwOh4yAxOm6yGYJx3H8gJ+uinyRclyXH/SKVT5dFjzPc10uX2SzVTEYDttn7WSWgAVmyvihF+dBNst0XTctI53G2Sw1DNMw9XQWp9PEsixN1265iG3bpiqBD6IsjJOYeXN9/fzZy5v3H7bb7dXlFczx3bubq6tL6F6/fvPu7furq6s/8BPgN9dvX726vrn5wARhGGVumkfj8XgymaRTP05Cx3bGYzOM/CDwXdc1x6Yf+GHsARuG4fketCiKmMnYURCihGoqVGcCIFmBoinVoHJxKI/HFsEqxRomoI8lSRr2BUUmoiAxAmarrYctrspynaF8VmsfNdlKr8/1Ru1656TTL/f6bG/YabGnDbbMj846XIMdnbR7pwO5wbDD00qrdFK5W6kedwblW67erdVPW92TcqtU69yt1o9bXLnSLpUb92qtB412rT18UONKnFBlYCE9x4+gTlk2TTvwo0A3dIwh+zCIPVU3CWwtHdjXDEPBmqaHfhx4keeGjDWxHMcOoxBjeKF68Pi+rhvQ/YQ+JATsuo4fBoZpKooCafm+F4ZgtiwX3LZNCOxxDb62JxMA6N6ybf/GMNAtq+pvumkYsDQMQigIApFvEqxAkkEQiv0mhCuKousFSOCwPJJk2XU9Rewq0lAQxTBKeq0HaMQy8/n80aM5lusIiWmaLpdrRaoRIsPyL5cbgjpYGQCvVhuMzhSZh9G324tB91uNdpnlcjmfL6jSVJCUZdlqvSWoQYkcRfFqvVNxh+BhFCWb7Y5iFiMe9N354xF/39B6zGDQt22HkDaluNfrWRZMvg3T7PV405xQyqmq2O8PIHxV5SkdgQ4pCaMjQjiGUhrHcR81CMWQJPwEWNUJQkoYRCN8pqiComDYnQLhEB3JEkrjvMHfFynHgCGOk4HSBDMEFoW3rGoEAgv9SCAsVkUw+H4g0S6YBUFM4qw1+E4Cs4zkPC94dGsQBCHL8j5qaoYqCKM0TuHPRJc/GRKBdKGK4XBU5NM6/52kdhnYI0mS2q5FqaprRpbmjjuGs02JmiXAlq5rwGmSuR6suXqrpwWkYU1M5rhx94tvPv+6dFA7Kx3Xv/3y3i032AdHlXuf+E6tUzqu3v+69PkX39ypnN0rN47+8vDOn786aPZLcA3xEhKojhER+CGrEAmrimoobK+FsIioTHWZ4zsyHikEwRTYbkuUuR7P6pbEWPZe03PX22jGWiEzwyh0Y4rpktB8bM09b+14lwqZWtbcdlaaMV/vfv3rj/+9+eHfr97/h1E1H1Nb1X1RNmU0JqpLVVeSx5JsgqibgUIcYA3YCGQFrs3UCy+9cO/458xqtdjtto8v9lEUFEV2cbG/uDgvijSKQuDz812RZ3Ec7gGBiywMvd12uVrNN+s5M5s9WiyW6/UGzg0s+Gq1hgZ7EI4jiMvlCkTg3/UELjPAxRJMC2axmG82axg1DIMsS6EKaABwXEHcbjd5Dn8L/q9HYQS4WYNpwxyeSIen8mEZHTwcHByNDk8RNADoggivDo7/wEdCqXF4wv3pmP3smP3sf1kksuUwHGIfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"protools\" title=\"\" src=\"/static/ee078a891d7c62fa2cd1603c31529ad2/727ba/protools.png\" srcset=\"/static/ee078a891d7c62fa2cd1603c31529ad2/69538/protools.png 160w,\n/static/ee078a891d7c62fa2cd1603c31529ad2/72799/protools.png 320w,\n/static/ee078a891d7c62fa2cd1603c31529ad2/727ba/protools.png 390w\" sizes=\"(max-width: 390px) 100vw, 390px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>위 사진은 전 세계 녹음실 중 90%가 사용하고 있는 Protools라는 DAW의 믹서 창이다. 사진에 강조된 부분에 <code class=\"language-text\">Vocal Bus</code>라고 적혀있는 곳을 보면 맨 오른쪽 채널은 위쪽에 위치하고 있고 나머지 채널은 아래쪽에 위치하고 있다. <code class=\"language-text\">I/O</code> 메뉴에서 위쪽은 <code class=\"language-text\">In</code>을 의미하고 아래쪽은 <code class=\"language-text\">Out</code>을 의미하기 때문에 이 그림에서 오디오의 흐름은 대략 다음과 같이 나타날 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1f5d5ab85ca31673a0509d50c23f23f9/29114/auxes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVR42mP4TwFg+P7z9/XHb68+enP10dsbT979/P2XBM1Hrz3jDZmqkDRPOm62YPj0c7ef/f/35+/ffyjg/z+IahQxoOYnbz7XLTlWv/Q4EDUsPf7m0/e/f379+UOU/Qwnbz5XTp1nUrDMtHCZWvqCS/de/vv968evHxfunTxz5+jZu8dO3z7y4es7iLXPLp27f+zAw5NH7h3e9+n5U4ZHrz9VLDhSs+hY9cKjVQuPPH/3+fePnw+e3bOrUnGoVvVo1DcqFN15dgNQ8+ePH2Y4G7WrCk4yV60XZTg6tZvh1K0XyinzDfOW6mUvVk1bcPn+q3+/f37/+R1oM9Da8/dOAG1+/+UtUPPfv3+BNj84fujR6WP3j+7/9OwJw+PXn6sXHwV6u3bJMSD5+uO3P7+J9vOx688Ew6cpJM9VSJorGjUDe2j/Qw7tvxAE5DF8+/n70v3XF+8B0avLD17//P2HhHimJIUBAF7SQPGmG4PXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"auxes\" title=\"\" src=\"/static/1f5d5ab85ca31673a0509d50c23f23f9/6af66/auxes.png\" srcset=\"/static/1f5d5ab85ca31673a0509d50c23f23f9/69538/auxes.png 160w,\n/static/1f5d5ab85ca31673a0509d50c23f23f9/72799/auxes.png 320w,\n/static/1f5d5ab85ca31673a0509d50c23f23f9/6af66/auxes.png 640w,\n/static/1f5d5ab85ca31673a0509d50c23f23f9/d9199/auxes.png 960w,\n/static/1f5d5ab85ca31673a0509d50c23f23f9/21b4d/auxes.png 1280w,\n/static/1f5d5ab85ca31673a0509d50c23f23f9/29114/auxes.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p>이때 저 네모 하나하나가 HTML5의 Audio API에서 제공해주는 <code class=\"language-text\">노드</code>와 정확히 같은 개념이다. 즉, 자바스크립트로 저 흐름을 완벽히 동일하게 구현할 수 있다는 뜻이다.</p>\n</blockquote>\n<p>이해를 돕기 위해 저 노드들의 역할에 대해서 조금 더 부가설명을 하자면, 일단 <code class=\"language-text\">Lead Vox</code>는 말 그대로 보컬의 노래 소스를 가진 노드이고 <code class=\"language-text\">LeadVxDbl</code>은 노래를 풍부하게 들리게 하기 위해 같은 멜로디를 한번 더 녹음한 것, 즉 더블링 작업을 한 노드이다. 그리고 <code class=\"language-text\">Vox Fill</code>은 화음을 쌓은 코러스를 담은 노드이다.</p>\n<p>그리고 보컬이 노래한 이 오디오 소스를 모두 <code class=\"language-text\">Vocal Bus</code>라는 노드로 모으고 있다. 이렇게 하는 이유는 여러 개의 오디오 소스에 이펙터를 각각 사용하면 노드마다 조금씩 소리의 느낌이 달라질 수 있기 때문에 <code class=\"language-text\">Vocal Bus</code>라는 하나의 노드로 오디오 신호를 모은 다음 해당 노드에만 이펙터를 걸어주는 것이다. 이렇게 하면 모든 노드에 이펙터를 사용하지않고 하나의 노드에만 이펙터를 사용해도 되기 때문에 메모리 비용도 아낄 수 있고, <code class=\"language-text\">보컬</code>이라는 하나의 소스에 동일한 느낌을 부여할 수 있다.</p>\n<p>그리고 최종적으로 신호가 들어가는 <code class=\"language-text\">Sub Master</code> 노드는 아마 최종 아웃풋으로 소리가 나가기 전에 한번 더 이펙터 처리를 하고 싶어서 생성한 것일 테고, Sub Master까지 도달한 오디오는 아웃풋, 즉 스피커를 통해 출력되어 우리의 귀로 들어오게 되는 것이다. 결국 <code class=\"language-text\">in -> out -> in -> out</code>의 계속된 반복이라고 보면 된다. 그래서 필자가 오디오의 <code class=\"language-text\">흐름</code>이라고 표현하는 것이다.</p>\n<p>이제 오디오 소스의 흐름이라는 것이 대략 이해가 되었으면 한번 직접 HTML5의 Audio API를 사용해서 이 흐름을 구현해보도록 하자.</p>\n<h2>오디오의 음량을 조절하기</h2>\n<p>위에서 이야기했듯이 이번 포스팅에서는 본격적으로 이펙터를 구현해보기에 앞서 오디오의 흐름을 직접 구현해보고 체험해보는 것에 초점을 맞출 것이다. 그래서 이펙터라기에는 조금 애매한 단순한 구조의 흐름을 만들어보려고 한다. 바로 오디오의 음량을 조절하는 흐름이다. HTML5 Audio API의 <code class=\"language-text\">GainNode</code>를 사용하면 오디오 소스의 음량을 손쉽게 조절할 수 있다.</p>\n<h3>Gain이란 무엇인가요?</h3>\n<p><code class=\"language-text\">게인(Gain)</code>이란 쉽게 말하면 입력 볼륨을 의미한다. 게인을 사용하여 마이크에서 오디오 믹서나 녹음기로 오디오 신호를 보낼 때 그 신호량을 컨트롤하는 것이다. 처음 오디오에 입문하시는 분들이 <code class=\"language-text\">게인(Gain)</code>과 <code class=\"language-text\">볼륨(Volume)</code>의 차이에 대해 헷갈려하시는데, 쉽게 말하면 게인은 “입력 신호를 조절하는 것”이고 볼륨은 “출력 신호를 조절하는 것”이다.</p>\n<p>만약 <code class=\"language-text\">100</code>정도 세기의 신호를 처리할 수 있는 녹음기가 있다고 생각해보자. 이때 우리가 마이크에 대고 <code class=\"language-text\">80</code> 정도의 세기로 소리를 왁! 지르면 이 녹음기는 무리없이 이 신호를 받아들일 수 있지만, <code class=\"language-text\">150</code>의 세기로 소리를 지르게 되면 이 녹음기는 <code class=\"language-text\">50</code>만큼의 소리를 받아들이지 못하고 그대로 유실시킨다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f0119ca780b0c91668fc8bf38f66aefd/d44c9/clipping.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsRAAALEQF/ZF+RAAABpUlEQVR42j2RbW/aMBSF8///xKR9mlQhCm0gpcoySCm0lHZtWQeIJh1hQEji6zgvjkmCdyFar2zr6LHPlXyPIqWkAJQQFIeyPBwOKMqySJOkLIojRHKCeCL5fIOl4CYAQWU+0uNFnufvtu3udlVHefJjbVxX7PcnI5JS8X1vZdv283Pk7YizDFZOXpY8SazJq/XzMY4iDhB7HsKNZc0fx+vZjDPG41iITGFJEr0vQFMDQ/cadd/QeZaFk5dAbXq1M7aYE7Pnt9U0YnR0R66vUMNwEE5/k9G9kuV5sJgzswttNfyhw0WD9U1oXQT1GnS0aHiLGltTvcP6Pdo1qKEHZ9+o1oLWpZIXRRrH7KZHzmtscEua5+n0LRr0/a9fmKGzG5M06tg0uh9mf1f0+grUZtj9joK0LxUAIL5P0Nw3ydOYjO5ElgkhvI621VrkYcRmU3h9yaVMPM9tqwjp05i9TRJnqcRxhFEtLQsN280mDMOM870Qfz4+1s4SB5Zyjg9wyIyF01+TteNwzrE9LuWUaonOavz/A5Nbd1vBKryq8I+fIUsp/wEwLufZteHIRgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"clipping\" title=\"\" src=\"/static/f0119ca780b0c91668fc8bf38f66aefd/6af66/clipping.png\" srcset=\"/static/f0119ca780b0c91668fc8bf38f66aefd/69538/clipping.png 160w,\n/static/f0119ca780b0c91668fc8bf38f66aefd/72799/clipping.png 320w,\n/static/f0119ca780b0c91668fc8bf38f66aefd/6af66/clipping.png 640w,\n/static/f0119ca780b0c91668fc8bf38f66aefd/d44c9/clipping.png 722w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>회색으로 표시된 부분이 잘려나간 신호이다.</small>\n</center>\n<p>이 현상은 여러분도 살면서 몇번 경험한 현상일텐데, 스피커로 소리를 엄청 크게 틀면 <code class=\"language-text\">지지직</code>거리는 잡음이 발생하는 것을 들어본 적이 있을 것이다. 이렇게 장비가 처리할 수 있는 신호의 세기를 넘어가는 현상을 <code class=\"language-text\">클리핑(Clipping)</code>이라고 한다. 말 그래도 신호가 잘려나가는 것이다.</p>\n<p>이렇게 잘려나간 신호는 위 그림에서 볼 수 있듯이 머리가 네모 반듯한 <code class=\"language-text\">사각파</code>의 형태를 가지게 되는데, 이 사각파는 우리가 EDM 등에서 멜로디를 표현할 때 많이 들을 수 있는 신디사이저 <code class=\"language-text\">리드(Lead)</code> 계열의 <code class=\"language-text\">쭈와앙~</code>하는 금속성 소리를 낸다. 말로는 잘 이해가 안될테니 한번 음악으로 들어보면서 잠시 쉬어가도록 하자. 아마 클럽 좀 다녀보신 분들은 <code class=\"language-text\">아! 이 소리</code>할 것이다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/usXhiWE2Uc0?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>해당 곡의 인트로가 끝나는 35초부터 메인 멜로디를 맡는 악기가 사각파를 사용한 리드이다.</small>\n  <br />\n  <br />\n</center>\n<p>아무래도 리드는 악기로써 파형이 어느 정도 정제된 상태이기 때문에 클리핑이 발생했을 때 나는 소리는 이것보다 더 거칠고 날카롭다. 참고로 이렇게 파형에 따라 소리가 달라진다는 개념은 <code class=\"language-text\">왜곡계(Distortion)</code> 이펙터를 만들때도 사용하는 개념이기 때문에 기억해두면 좋다.</p>\n<p>어쨌든 이런 클리핑 문제 때문에 사운드 엔지니어들은 오디오 소스와 다음 장비 사이에 게인을 조절할 수 있는 장치를 두고, 장비가 받아들일 수 있는 신호의 세기에 맞춰서 알맞게 게인을 조절하여 소스 오디오의 신호가 커지더라도 모든 신호를 다 담을 수 있도록 한다.</p>\n<p>반대로 볼륨은 소리를 내보낼 때 얼마나 증폭시킬 것이냐를 의미한다. 많은 분들이 게인과 볼륨을 헷갈려하는 이유가 둘 다 소리를 증폭시키거나 감소시키는 역할을 하기 때문인데, 볼륨은 이미 입력된 신호를 출력할 때 건드리는 것이기 때문에 클리핑이 발생하더라도 볼륨을 줄이면 신호가 돌아오지만 녹음할 때 게인을 잘못 설정하여 유실된 소리는 다시 돌아오지 않는다.</p>\n<p>신호 입력 단계에서 이미 유실된 것이기 때문에 영원한 이별인 것이다. 게다가 녹음이라는 특성 상 그 원본 소스는 <code class=\"language-text\">사람</code>인 경우가 많다. 결국 이 유실된 신호를 다시 살려낼 수 없기 때문에 게인을 잘못 설정하면 다시 녹음을 해야하는 슬픈 상황이 벌어질 수 있는 것이다.</p>\n<p>그래서 사운드 엔지니어들은 소리를 녹음할 때 <code class=\"language-text\">게인을 잘 다루는 것</code>을 엄청 중요하게 생각한다. 사실 게인만 해도 좀 더 깊이 들어가면 하고 싶은 이야기가 많지만, 이 포스팅은 오디오 전문 포스팅이 아니므로 그냥 비슷한 거라고 생각하고 넘어가도 상관없다.</p>\n<p>이제 게인이 무엇인지 이해했다면 <code class=\"language-text\">GainNode</code>와 함께 오디오 소스의 신호 세기를 조절해서 소리의 크기를 변형시켜보자!</p>\n<h3>Gain Node를 사용하여 음량을 조절해보자</h3>\n<p>일단 게인을 사용해보려면 오디오 소스가 필요하다. 오디오 소스는 HTML5의 <code class=\"language-text\">&lt;audio></code> 태그를 사용하거나 사용자가 직접 업로드한 파일에서 추출하는 두가지 방법이 있는데, 필자는 이 중 후자의 방법을 사용하였다.</p>\n<p>이것도 엄밀히 말하자면 <code class=\"language-text\">&lt;audio></code>태그를 사용하여 소스를 추출했을 때와 파일 버퍼에서 직접 추출했을 때는 다른 소스 노드 객체가 생성되긴 하지만 기능상 큰 차이 없으므로 그냥 개인의 취향대로 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>Audiocontext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'audio-uploader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> evt<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> buffer <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">decodeAudioData</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> sourceNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    sourceNode<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> buffer<span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sourceNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">AudioBufferSourceNode <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">buffer</span><span class=\"token operator\">:</span> AudioBuffer<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">playbackRate</span><span class=\"token operator\">:</span> AudioParam<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">detune</span><span class=\"token operator\">:</span> AudioParam<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loopStart</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> …<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>우선 간단한 설명을 하자면 <code class=\"language-text\">buffer</code> 변수에 담긴 오디오 데이터는 raw한 오디오 데이터일 뿐 아직 하나의 노드가 아니기 때문에 사용할 수 없는 상태이다. 그렇기 때문에 <code class=\"language-text\">createBufferSource</code> 메소드를 사용하여 소스 노드를 생성한 후 해당 소스 노드에 오디오 데이터를 입력해줘야만 비로소 오디오 데이터를 사용할 수 있는 상태가 되는 것이다.</p>\n<p>이때 필자는 사용자가 업로드한 파일에서 직접 오디오 버퍼 데이터를 뽑아와서 노드를 만든 것이기 때문에 <code class=\"language-text\">createBufferSource</code> 메소드를 사용하여 소스 노드를 생성했지만, 만약 <code class=\"language-text\">&lt;audio></code> 태그에서 추출한 오디오 데이터를 사용하여 소스 노드를 생성하고 싶다면 <code class=\"language-text\">createMediaElementSource</code> 메소드를 사용해야 한다.</p>\n<p>그럼 이제 <code class=\"language-text\">GainNode</code>를 생성하고 소스 노드에 연결만 시켜주면 바로 이 오디오 소스의 음량을 조절할 수 있게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> gainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>gainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>이 코드에서 <code class=\"language-text\">소스 -> 게인 -> 데스티네이션</code>으로 설정된 오디오의 흐름이 보인다면 사실상 Audio API에 대한 이해는 거의 끝났다고 봐도 무방하다. 위에서도 말했듯이 오디오를 컨트롤할 때는 이 개념을 이해하는 게 제일 중요하기 때문이다.</p>\n<p>또한 <code class=\"language-text\">gainNode</code>가 연결된 <code class=\"language-text\">audioContext.destination</code>은 최종 아웃풋, 즉 스피커로 향하는 정보를 가지고 있다. 그럼 이제 여기서 오디오의 소리를 증폭시키거나 감소시키려면 어떻게 해야할까?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 또는</span>\ngainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.2</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 그 후 소스를 재생해보자</span>\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>[Warinig] 너무 값을 크게 올리면 재생했을 때 고막 터집니다.</p>\n</blockquote>\n<p>간단하다. 그냥 <code class=\"language-text\">GainNode.gain.value</code>에 접근해서 값을 변경해주면 된다. 게인 같은 경우는 값에 직접 접근하여 변경하는 것이 가능하지만 다른 노드의 경우 자신의 값을 직접 변경하는 것이 허용되지 않는 경우가 있는데, 이럴 때는 <code class=\"language-text\">setValueAtTime</code> 메소드를 사용하면 된다.</p>\n<p><code class=\"language-text\">setValueAtTime</code> 메소드는 일종의 스케줄러같은 개념인데, 두번째 인자로 넘긴 시간이 지난 후에 값을 적용하는 기능을 가지고 있다. 이때 인자로 넘기는 시간의 단위는 <code class=\"language-text\">초</code>이다. <code class=\"language-text\">audioContext.currentTime</code>을 인자로 사용하면 곧바로 값의 변경이 적용된다.</p>\n<p>필자는 처음에 이런 노드들의 값을 변경할 때 헷갈렸던 것이 하나 있는데, 바로 <code class=\"language-text\">min</code>과 <code class=\"language-text\">max</code>이다. 즉, 이 노드가 가지는 값의 범위를 알 수가 없었다. 물론 공식 문서에 다 나와있긴 하지만 그걸 어느 세월에 하나하나 검색해서 보겠는가?</p>\n<p>그래서 문서를 조금 더 뒤져보니 이 노드들이 가지는 값은 공통적으로 <code class=\"language-text\">AudioParam</code> 타입이라는 것을 알 수 있었다. 이 타입은 <code class=\"language-text\">min</code>, <code class=\"language-text\">max</code>, <code class=\"language-text\">defaultValue</code>, <code class=\"language-text\">value</code> 속성을 가지고 있었고, 이 값들은 <code class=\"language-text\">input[type=\"range\"]</code>를 사용하여 오디오를 컨트롤할때 유용하게 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">AudioParam <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">automationRate</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a-rate\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">defaultValue</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">minValue</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">3.4028234663852886e+38</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">maxValue</span><span class=\"token operator\">:</span> <span class=\"token number\">3.4028234663852886e+38</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 값을 잘 확인하고 게인의 값을 설정하면 적어도 고막과 이어폰이 터져나가는 불상사는 방지할 수 있을 것이다. 위에서 말했듯이 컴퓨터가 처리할 수 있는 신호의 세기를 넘어가게 되면 클리핑 현상이 발생하면서 찢어지는 듯한 소리가 나기 때문에 만약 이어폰을 끼고 있었다면 농담이 아니고 진짜 귀에 무리가 갈 수도 있다.</p>\n<p>자, 이렇게 간단하게 오디오 소스의 게인을 조절해보았다. 나머지 이펙터들도 대부분 이런 느낌으로 구현된다. 간혹 조금 더 복잡한 연결이 필요한 이펙터들이 있긴 하지만 대부분의 경우 간단한 몇개의 노드를 연결하는 것만으로 구현할 수 있기 때문에 그렇게 어렵지 않다.</p>\n<p>다음 포스팅에서는 이번에 알아본 개념을 바탕으로 소리를 압축하거나 공간감을 부여하고, 특정 주파수를 잘라내어 소리에 특별한 느낌을 줄 수 있는 다른 이펙터들을 만들어보도록 하겠다. 또한 기회가 된다면 이미 존재하는 오디오 소스를 변형하는 이펙터가 아니라 진짜로 오디오 신호 자체를 만들어 낼 수 있는 <code class=\"language-text\">오실레이터(Oscillator)</code>를 사용하여 나만의 악기를 만들어볼 수 있는 포스팅도 진행할 예정이다.</p>\n<p>이상으로 JavaScript로 오디오 이펙터를 만들어보자 - 소리의 흐름을 파악하자 포스팅을 마친다.</p>","fields":{"slug":"20190819-javascript-audio-effectors-gain","path":"/2019/08/19/javascript-audio-effectors-gain/","lang":"ko"},"frontmatter":{"title":"[JavaScript 오디오 이펙터 만들기] 소리의 흐름을 파악하자","date":"2019-08-19","categories":["프로그래밍","오디오"],"tags":["JavaScript","자바스크립트","Audio","오디오 이펙터","JavaScript Audio API","Logic Pro X","로직프로","Protools","프로툴즈","Cubase","큐베이스","Audio Plugin","Compressor","Delay","Reverb","EQ"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/1cda5/thumbnail.jpg 80w,\n/static/026a9fe9c894f201ec1e45217221447c/b1a47/thumbnail.jpg 160w,\n/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg 320w,\n/static/026a9fe9c894f201ec1e45217221447c/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/3e5ca/thumbnail.webp 80w,\n/static/026a9fe9c894f201ec1e45217221447c/b72f1/thumbnail.webp 160w,\n/static/026a9fe9c894f201ec1e45217221447c/fc5c5/thumbnail.webp 320w,\n/static/026a9fe9c894f201ec1e45217221447c/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/bae9c/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/23110/thumbnail.jpg 750w,\n/static/026a9fe9c894f201ec1e45217221447c/da421/thumbnail.jpg 1080w,\n/static/026a9fe9c894f201ec1e45217221447c/bae9c/thumbnail.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/6858b/thumbnail.webp 750w,\n/static/026a9fe9c894f201ec1e45217221447c/f5547/thumbnail.webp 1080w,\n/static/026a9fe9c894f201ec1e45217221447c/863b3/thumbnail.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"56876858-4dc2-5375-a626-823564681f17","tableOfContents":"<ul>\n<li>\n<p><a href=\"#compressor\">Compressor</a></p>\n<ul>\n<li><a href=\"#compressror-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Compressror 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reverb\">Reverb</a></p>\n<ul>\n<li><a href=\"#convolution-reverb\">Convolution Reverb</a></li>\n<li><a href=\"#convolution-reverb-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Convolution Reverb 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#delay\">Delay</a></p>\n<ul>\n<li><a href=\"#delay-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Delay 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#filter\">Filter</a></p>\n<ul>\n<li><a href=\"#filter-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Filter 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#eq\">EQ</a></p>\n<ul>\n<li><a href=\"#%EA%B7%B8%EB%9E%98%ED%94%BD-eq-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\">그래픽 EQ 구현하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 HTML5 Audio API를 사용하여 실제로 오디오 이펙터를 만드는 과정에 대해서 포스팅 하려고 한다. 저번 포스팅에서 이미 이야기 했듯이 Audio API는 여러 개의 노드를 연결하여 오디오의 흐름을 만들어 내는 것을 기본 개념으로 가지고 있고, 이펙터를 만들기 위해 필요한 몇 개의 추상화된 노드들을 기본적으로 제공해주기 때문에 그렇게 어려울 건 없다. 우리는 단지 우리가 만드려고 하는 이펙터들이 각각 어떤 역할을 하며, 어떤 원리를 가지고 있고, 어떤 용도로 사용되는지만 알고 있으면 된다…","html":"<p>이번 포스팅에서는 <a href=\"/2019/08/19/javascript-audio-effectors-gain/\">저번 포스팅</a>에 이어 HTML5 Audio API를 사용하여 실제로 오디오 이펙터를 만드는 과정에 대해서 포스팅 하려고 한다. 저번 포스팅에서 이미 이야기 했듯이 Audio API는 여러 개의 노드를 연결하여 오디오의 흐름을 만들어 내는 것을 기본 개념으로 가지고 있고, 이펙터를 만들기 위해 필요한 몇 개의 추상화된 노드들을 기본적으로 제공해주기 때문에 그렇게 어려울 건 없다.</p>\n<p>우리는 단지 우리가 만드려고 하는 이펙터들이 각각 어떤 역할을 하며, 어떤 원리를 가지고 있고, 어떤 용도로 사용되는지만 알고 있으면 된다. 오디오에 사용하는 이펙터는 그 종류가 굉장히 많기 때문에 모든 이펙터를 만들어 볼 수는 없고, 필자가 생각했을 때 가장 대표적으로 많이 사용되는 기본적인 이펙터 5개 정도를 구현해볼 생각이다.</p>\n<p>기본적으로 오디오를 로드하여 <code class=\"language-text\">소스 노드(Source Node)</code>를 생성하는 과정은 이미 저번 포스팅에서 설명했기 때문에 따로 설명하지 않겠다. 이번 포스팅에서는 바로 이펙터를 구현하는 내용부터 설명한다. 모든 이펙터는 먼저 해당 이펙터가 하는 일과 원리에 대해서 간략하게 설명하고 이후 묻지도 따지지도 않고 바로 구현 들어가도록 하겠다.</p>\n<p>자, 그럼 하나하나 뜯어보도록 하자.</p>\n<h2>Compressor</h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9ElEQVR42iVSW0/TABjto4kPxhgjKHc3YGzCkLq262Bu3dbZbm032t3asg46WbuVbXTjMrmIQowiGkVkQwENIAkJCBp98tEfZtXk5OTLSb6ck5wD/Pz1O5mrZStr+sqrlY3t+u5Bfe/wPxr7R41/XN872tk/mlt9U1x8sf62UVl6ltFqrxuHwLvd4yvm4U5HeNAXc9NiIj3Jj6tiVhNlLZVRkxklNa4mpZwwoTrwlNXNEXF5CBttGfAKag34cHDaMejrx+JunJYfTiratCRPRrhkUswU9RmtXClVZrVy1RBBb9Tq5cmUCuGpNrsvV3kK7BycNXWDvSiNU6Mb62t7ezuf9j9+2Nk+PPz8/fv5t4uzi/PT4y8H689XQQ9l8/K0kEdI8aYFkctLQOPzSQsY7BthXVhQ17WVJ8sbr9bfb29t17febr4xjq2tTUOp6CW7i7zjTcmFqisktkKUrD8GGp+OW9HRPjfnQN1ZWcyr2SlNqepFfVqbntbm5/RqpThTLWcn0jbYb/Mm6MS4IxBvG2ZlfRmo7x/fginbfa4XxKyQAZ8N8Rlshfx3nIF+J27AjgYNWNCQ4WGCaQvKtLsiE0bsv89Q2OqOmuDwg4QayZS6oEgglotkyj0uluQLjFTq98SNqH3DozY3hxBjQ/54q5MZLy0C73ePmh2kZYTpAHElX1yo1dqHCKVQWlx4ZELoYrk6PzsP+mKJdK4XoSwoPVWaQYlEMxTOFBcAYwBNdqwXDXeBuP0+A2LR2xAx6IlCfs6oAMHjUCAG+lijbTNMmiDC4WWsKNlsx6TC3F/nARcx5GE67vohPO4kUp1g0GAPLXXDIZQU3LTUg4QsCGmGCDNEDod4myt03QxJ+Rng5eZHLEgNOAOXWgYxgiWj/OX2ex6CpTnxign2kjGKFW5YXBYYv2aGr3cjQnqiB8SAq2Y2rQInX3/4aSEiKlRykuFzUVGleSUq5rnMlLEHVipwkmYojKBQKSUi5iNCjh3LYxS/tPb6DwF8FVn0mZKkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compressor\" title=\"\" src=\"/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png\" srcset=\"/static/a32ed4690c9c17197a82088952b74f1e/69538/compressor.png 160w,\n/static/a32ed4690c9c17197a82088952b74f1e/72799/compressor.png 320w,\n/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png 640w,\n/static/a32ed4690c9c17197a82088952b74f1e/d9199/compressor.png 960w,\n/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png 1020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">컴프레서(Compressor)</code>는 소리가 일정 크기 이상으로 커질 경우에 이를 꾹꾹 눌러서 다시 작은 소리로 만드는 일종의 압축기 역할을 하는 이펙터이다. 이렇게 소리의 크기를 조절하는 이펙터를 <code class=\"language-text\">다이나믹 이펙터</code>라고 한다.</p>\n<p>기본적으로 오디오 소스를 사용할 때 기본적으로 컴프레서를 걸어놓고 믹싱을 시작하는 경우가 많은데, 이는 오디오 신호가 일정 크기 이상으로 갑자기 커졌을 때 발생하는 <code class=\"language-text\">클리핑(Clipping)</code> 현상을 방어하기 위해서이기도 하다. 그럼 여기서 한가지 의문이 들 수 있는데,</p>\n<blockquote>\n<p>아니 단순히 클리핑을 막는 거면 그냥 Gain을 줄이면 해결되는 거 아니야?</p>\n</blockquote>\n<p>맞다. 사실 게인을 줄여도 어느 정도 클리핑을 방어할 수는 있다. 하지만 일반적으로 음악이란 셈여림이 존재하기 때문에 무작정 게인을 낮추면 작은 소리는 아예 입력되지도 않는 슬픈 상황이 발생하게 된다.</p>\n<p>예를 들어 여러분이 노래방에 갔을 때를 생각해보자. 일반적으로 발라드를 부른다면 노래의 도입부에서는 잔잔한 느낌으로 조용히 부르다가 후렴에서는 고음을 내기위해 성대를 통과하는 공기의 압력이 올라가며 음량이 커진다. 이때 무작정 게인을 낮춰서 녹음하는 방향으로 접근한다면 필연적으로 가장 큰 소리인 후렴의 빵빵 지르는 소리의 크기에 게인을 맞출 수 밖에 없고, 그러면 도입부의 잔잔한 부분은 거의 입력되지 않을 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAByXSl0ows/8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABESESMTP/2gAIAQEAAQUCiiDFPTyi5lv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRIf/aAAgBAgEBPwFy0s//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQECQRD/2gAIAQEABj8CeEaxCKc//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIVExQZHB/9oACAEBAAE/IbOo1cewacGoFEZILtjU91/IlaqrP//aAAwDAQACAAMAAAAQyC//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QAyf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQIBAT8QszL/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMVFh/9oACAEBAAE/EB/qBR1cZ8PIvmjiSJ5ihS2q6vsxBwCr4zkTAq1d/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"buzz\" title=\"\" src=\"/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg\" srcset=\"/static/e94b2e7a65da940d05a7df7a850aac9d/0913d/buzz.jpg 160w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/cb69c/buzz.jpg 320w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg 640w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>창법에 따라 조금씩 다르지만 이 음량 차이는 생각보다 크다.</small>\n</center>\n<p>이때 컴프레서로 입력 게인을 적당한 수준으로 높혀주고 너무 큰 소리는 압축하여 노래 도입부의 작은 소리와 후렴부의 큰 소리의 격차를 좁혀 전체적인 소리의 크기를 맞추기 위해서 사용하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVR42l1Q25LDIAjN///ePna6bdIYN3c1mosILCbdfahzRoHDAaQAJEEi/gOdeLvIbL2vytd2HCgukg7pZuHbQUQqdmTBhhSAViAxVsB8p+yuxKqqx2fdKL0zr0Qm8RhpBAbiwjlrjTl2ofJZnB36Psbjcvc1TGUpxnC7wevFtSK5tWalGKCw1oUQtNZt207T5JyLMfZ9z0SiCd47Y3JRY9w0iYAi7NZBCBIsHo9Ho1T5LJumSUn+mzVz1x0nPTY6HnkKSGkYBjGkujGzZGbxNd7V53yzsTo3P/O0/f2eEC/KL75rW7s40QGy7K/wkFf1gQWwrtRUKqW7jdhHzHFZYcR+x68ZBPNBhTT6AJ7NF+9/2nY7F/mm6D3af+YvnCrO+RaF5TIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"audio compression\" title=\"\" src=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png\" srcset=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/69538/audio-compression.png 160w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/72799/audio-compression.png 320w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png 640w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/d9199/audio-compression.png 960w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/21b4d/audio-compression.png 1280w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png 1519w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Threshold를 넘어선 세기의 신호를 압축해서 Threshold 밑으로 들어가도록 만든다</small>\n</center>\n<p>또한 필자가 컴프레서 소리를 압축한다고 했는데, 소리를 압축한다는 것이 뭔지 잘 이해가 안갈 수 있다. 대표적인 예로 우리가 일반적인 음원에서 듣고 있는 <code class=\"language-text\">퍽!</code>, <code class=\"language-text\">탁!</code> 하는 깔끔한 드럼소리가 바로 압축된 소리이다. <small>(보통 이렇게 팍팍치는 소리를 Damping이라고 한다.)</small></p>\n<p>일반적으로 드럼을 녹음하면 드럼 특유의 통이 울리는 잔향이 남는데, 이 소리를 컴프레서로 압축하면 우리가 일반적으로 듣는 깔끔한 드럼소리로 만들 수 있다.</p>\n<p>그 외에도 베이스에 컴프레서를 사용하여 단단한 느낌을 부여하거나 멀리 있는 소리를 가까이로 끌어오거나 그 반대 역할도 할 수 있는 등, 컴프레서만 잘 사용해도 소리에 굉장히 많은 느낌을 부여할 수 있다. 그래서 필자에게 사운드 엔지니어닝을 알려주셨던 선생님도 컴프레서의 중요성을 굉장히 강조하셨던 기억이 난다.</p>\n<p>컴프레서는 몇가지 값들을 사용하여 신호를 언제부터 압축할 것인지, 어느 정도의 속도로 압축할 것인지와 같은 세팅을 할 수 있도록 설계되었다. HTML5 Audio API에서 제공하는 <code class=\"language-text\">DynamicsCompressorNode</code>도 이 값들을 동일하게 제공하고 있으므로 우리는 이 값들이 어떤 의미를 가지고 있는지 알아야 올바른 방법으로 이 노드를 사용할 수 있다.</p>\n<h4>Threshold</h4>\n<p><code class=\"language-text\">Threshold</code>는 소리를 어느 크기부터 압축할 것인지를 정하는 임계점을 의미한다. 단위는 <code class=\"language-text\">DB(데시벨)</code>을 사용한다.</p>\n<h4>Ratio</h4>\n<p><code class=\"language-text\">Ratio</code>는 Threshold를 넘은 소리가 어느 정도의 비율로 줄어들 것인지를 정하는 값이다. 이 값은 <code class=\"language-text\">입력:출력</code>의 비를 의미하기 때문에 일반적으로는 <code class=\"language-text\">2:1</code>, <code class=\"language-text\">5:1</code>와 같은 비율로 이야기한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 292px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA51AAAOdQG5Y1EyAAAB0ElEQVR42pWT20/CMBjF+f+fNT56JWHGxOALMQa5BE3gSUPETKeBMW7bWMsu7MamZyuOuuCFL1nSNv3tnJ5+LXzsVjHKti3fDzAp7ISGYTgej02Ter6/GwxyMBjYts0MJLBpWf8hV6tVjkzgvf2DmarxS1tJWZYdx8ltK5wcn5YE4ReYafJkEIRYTOCr8hWhNI6in84JzcwtpXQ6nRqGYaf/KtRqdUoXcRzlLiTTXC6XGFuWhZyBBUGwWCyWrpvA5cuyQQjvGQ6jKILmcDh0Xdf3/dlsNplMIIuVfn+gaepa+ejwyCCUh2ESsKqq8/kcu5/SEkWx2+3K8pAQouuq43oJfHd3n9qOM7eAO51OvV5vNBrtdluSJCizwLKK0oySJoECDzebzVKpBAxR4ZA4oWmaEMQ2XdcpIZqq6sY8DyMh+IThnAir+KvYdAPz2SIktvXPtlvDfN/CJK/DV6a5gTVNG41Gbnp1LLC87PfZ6stXAvd6PeTpeR4w2EYqGDhcBTAWJg/4RRRbrdbmVeFDG2AHeogxCIyN2RS9cXN9XalUqtVbQRDOzy+KZ0VcwPb3DDJnW3p9fe49K4oivb0ryujh4RGxrmE+kqw9c4tb0/4EM4F9Se9NBhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ratio\" title=\"\" src=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" srcset=\"/static/4928391f2babd8b6166e59f0d6730a60/69538/ratio.png 160w,\n/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png 292w\" sizes=\"(max-width: 292px) 100vw, 292px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>하지만 HTML5 Audio API의 속성에서는 단위가 조금 다르다. 공식 문서에는 “출력 값의 1db를 변경하기 위해 필요한 db값”이라고 적혀있는데 그냥 이 속성에 <code class=\"language-text\">12</code>를 할당하면 압축 비율이 <code class=\"language-text\">12:1</code>라고 생각하면 된다. <small>(공돌이들 특징인 어렵게 말하기가 발동했다)</small></p>\n<p>보통 컴프레서를 적당히 걸었다고 하면 <code class=\"language-text\">4:1</code> 정도의 비율을 말하기 때문에 해당 속성의 기본 값인 <code class=\"language-text\">12:1</code>은 상당히 하드한 압축 비율이라고 할 수 있다.</p>\n<h4>Attack</h4>\n<p><code class=\"language-text\">Attack</code>은 소리를 어느 정도의 빠르기로 압축할 것인지를 정하는 값이다. Threshold를 넘은 값을 얼마나 빠르게 때려서 눌러 담을 지를 정하면 된다고 생각하자. 많은 분들이 여기서 정해주는 어택 타임이 “Attack이 시작되는 시간”으로 잘못 알고 있는 데, 사실 신호의 크기가 Threshold를 넘으면 Attack 자체는 바로 시작된다. 우리가 정해주는 어택 타임은 정해진 “Ratio로 정해준 비율까지 도달하는 데 걸리는 시간”이다.</p>\n<p>단위는 보통 <code class=\"language-text\">밀리초(ms)</code>를 사용하지만 Audio API에서는 <code class=\"language-text\">초(seconds)</code>를 사용한다.</p>\n<h4>Release</h4>\n<p>Attack이 소리를 누르는 빠르기였다면 <code class=\"language-text\">Release</code>는 압축한 소리를 어느 정도의 빠르기로 다시 풀어줄 것인가를 정하는 값이다. 이때 풀어주는 값은 소리의 원래 크기가 아니라 표준 음량인 10db에 도달하는 시간을 목표로 한다.</p>\n<p><code class=\"language-text\">Release</code>도 Attack과 마찬가지로 단위는 보통 <code class=\"language-text\">밀리초(ms)</code>를 사용하지만 Audio API에서는 <code class=\"language-text\">초(seconds)</code>를 사용한다.</p>\n<h4>Knee</h4>\n<p><code class=\"language-text\">Knee</code>는 사실 대부분의 하드웨어 컴프레서에는 없는 기능이지만 소프트웨어 컴프레서에서는 꽤 자주 볼 수 있는 기능이다. 이 값은 컴프레서가 얼마나 <code class=\"language-text\">자연스럽게</code> 적용될 것인지를 결정한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAA7ElEQVR42mWR2w6DIBBE+f9/1KiJd4zxUlFQ2yPbEhvnQWFmZ9gF5Zw7z/N9A9txHJdlYb3v+3EcT9UYw1r1fW+tFVaqt22DYcE21IlK0LquxoMaVVWVmIPGdhgGrTVM0zRBpUf4l4f2uMx5nrdtS1gcx0mSpGlaliU2DHVdo3ZdRwtRFMHD0CwMlstMn6Ry5uGBjTp4MXMy8xMxzzMMWyJQOUzhcR7vf8iQ8HimaXpeKscoAtDcDwTzhZQ4FszG5YkkgJQnUPzsDUxCqzQmZlS5fAET0TAFX7P0UBRF7pFl2f1tBGRJASpjBv4DXHMHixSVCw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hard soft compression\" title=\"\" src=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png\" srcset=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/69538/hard-soft-compression.png 160w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/72799/hard-soft-compression.png 320w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png 640w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png 654w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>위 그림의 그래프의 꺾이는 정도가 컴프레서가 얼마나 서서히 적용되는지를 보여주고 있다. 이때 빠르게 팍! 적용하는 컴프레션을 <code class=\"language-text\">Hard</code>하다고 하고 천천히 적용하는 컴프레션을 <code class=\"language-text\">Soft</code>하다고 한다.</p>\n<h3>Compressror 구현해보기</h3>\n<p>사실 위에서 이야기 했듯이 HTML5 Audio API는 자체적으로 <code class=\"language-text\">DynamicsCompressorNode</code>를 제공하기 때문에 우리가 소리를 압축하는 알고리즘을 직접 구현할 필요가 없다. 단지 노드를 생성한 후 연결해주기만 하면 될 뿐이다.</p>\n<p>이번에는 사용자가 업로드한 오디오 파일에서 오디오 버퍼를 추출하여 소스 노드를 생성하는 것이 아니라 <code class=\"language-text\">&lt;audio></code> 태그에서 추출하여 소스 노드를 생성하는 방식으로 진행하도록 하겠다. <small>(이렇게 하면 코드가 훨씬 간단해진다)</small> 지금 생성한 소스노드는 앞으로 다른 이펙터를 구현할 때도 계속 사용할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>AudioContext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> audioDOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-audio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sourceNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createMediaElementSource</span><span class=\"token punctuation\">(</span>audioDOM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> threshold <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> attack <span class=\"token operator\">=</span> <span class=\"token number\">0.003</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> release <span class=\"token operator\">=</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ratio <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> knee <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> compressorNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicsCompressor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>threshold<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>threshold<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>attack<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>attack<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>release<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>ratio<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>ratio<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>knee<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>knee<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> inputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>compressorNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자는 <code class=\"language-text\">소스 -> 게인 -> 컴프레서 -> 게인</code>의 순서로 오디오 소스의 흐름을 생성했는데, 사실 이건 개인의 취향이다. 하지만 일반적으로 대부분의 컴프레서는 <code class=\"language-text\">인풋 게인</code>과 <code class=\"language-text\">아웃풋 게인</code>을 모두 가지고 있으므로 필자도 이와 동일하게 구현했다.</p>\n<p>이후 소스노드를 재생해보면 압축된 소리를 들을 수 있긴 한데, 사실 사운드 엔지니어가 아닌 일반인이 소리의 미세한 압축의 정도를 느끼기는 힘드므로 위의 값들을 조금 극단적으로 바꿔보는 것을 추천한다.</p>\n<h2>Reverb</h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABgNoc2Cyf/8QAHBAAAQQDAQAAAAAAAAAAAAAAAgABAxESITEy/9oACAEBAAEFAnjoY/ZdN3wDStf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAARECBB/9oACAEBAAY/AljKf//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUWGB/9oACAEBAAE/ITe9ryZx1KHMfCKQuVFayKuf/9oADAMBAAIAAwAAABCrz//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAwEBPxBUf//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxBwf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExUXFhgZH/2gAIAQEAAT8QW++xj9uVzEbtvEvD3EXuMJVpG0jSX4xGWaXon//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb\" title=\"\" src=\"/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg\" srcset=\"/static/168b553805699d40f75aa40227c69521/0913d/reverb.jpg 160w,\n/static/168b553805699d40f75aa40227c69521/cb69c/reverb.jpg 320w,\n/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg 640w,\n/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg 643w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">리버브(Reverb)</code>는 소리에 울림을 통해 공간감을 부여하는 <code class=\"language-text\">공간계 이펙터</code>이다. 소리에 울림을 통해 공간감을 부여한다는 게 어떤 의미일까?</p>\n<p>사실 우리는 소리를 듣고 현재 있는 공간이 넓은지 좁은지, 이 공간이 거친 벽면으로 이루어져 있는지, 아니면 유리같은 맨들맨들한 공간으로 이루어져 있는지를 대략적으로 파악할 수 있다. 그 차이가 워낙 미세해서 훈련되지 않은 사람이라면 알아채기 힘들 뿐이다.</p>\n<p>어떻게 이런 일이 가능할까? 바로 소리의 반사에 의한 <code class=\"language-text\">잔향</code> 때문이다. 먼저, 소리를 듣고 공간의 크기를 감지하는 원리는 간단하다. 필자가 어떤 방 안에서 소리를 <code class=\"language-text\">왁!</code>하고 지른 뒤 얼마 후에 첫번째 반사음이 들리는지를 감지하면 된다. 하지만 이 첫번째 반사음은 <code class=\"language-text\">ms</code> 단위의 굉장히 빠른 속도로 다시 필자에게 돌아오기 때문에 1초, 2초 이렇게 세는 것이 아니라 그냥 느껴야하는 것이다.</p>\n<p>이때 이 반사음을 <code class=\"language-text\">초기 반사음(Early Reflection)</code>이라고 한다. 하지만 여기서 끝이 아니다. 소리가 한번 반사되어 여러분의 귀로 전달된 뒤에도 반사는 계속 될 것이다. 이때 이 잔향들은 공간의 사방팔방으로 부딪히고 반사되어 여러분의 귀로 다시 돌아올 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAABwUlEQVR42l2RWW/TQBSF80/5JTyUB5SqvIDECxSJCipBW+jqSlWhJK5jgSjQdImdOIuz2HGc2p7FM7Znxh6ciE0cnbd7vivdeypMsNJC5kIWoshFIX5ZikIWeZFnPMtYxssYz1KWMc7+ZCpBFGCCBQKp7zEEFluWg5IBENxcX6ulNP1wb79eq6t11R7aUkqe8wU8Gg8xAjwhnGe54IXMly4iEFmd7slpXdlVdl5uP37y/O274zdbh4bZ/geejDCMshhSwRKRYUZKJyKllDqO22joTx+tvVdOjmqfVe3rp5o282d/YddzCYIJAYjROQmn8dwjQSySMAx73Z7RalVXqz8MY2j3e5blz2fF4jW/b8Y0TmmcxABxMsF+HzgTNLujIKExpQhhbBomAABiFEHABOe5YOV5+RKOE5IlJCUQcmqEg4Z7pbs3Gy3l2Ljtu8k0oCQV8n8VcllEBcaIIBDDIEhRc9apjb6dj5sPvjy793pj5UWvutl5+Kpzf91c3bTWj+x9zf144Z1fzZvdkKS0UvYRRQGEUYiBG3nDO2ccTL87t7rVvmz7F4anXboH2mjrw2DnbLCn2oo+3j41d8+MCKGfxXPjjIB+Rd8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reflection\" title=\"\" src=\"/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png\" srcset=\"/static/3457634accb0a45c9bd6199020317de9/69538/reflection.png 160w,\n/static/3457634accb0a45c9bd6199020317de9/72799/reflection.png 320w,\n/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png 640w,\n/static/3457634accb0a45c9bd6199020317de9/d9199/reflection.png 960w,\n/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>초록색 선이 초기 반사음, 사방팔방 부딪히는 파란색 선이 바로 잔향이다</small>\n</center>\n<p>이때 이 잔향이 얼마나 오래 들리는가, 얼마나 선명하게 들리는가와 같은 특성이 방의 재질을 결정한다. 이야기만 들으면 이렇게 소리를 듣고 공간을 판별한다는 것이 불가능한 것 같지만 여러분이 이미 평소에 듣고 음악에는 모두 이 원리를 적용한 공간적 설계가 함께 담겨있다.</p>\n<p>이렇게 리버브는 말 그대로 잔향을 만들어내기만 하면 되기 때문에 하드웨어 리버브 중에서는 스프링이나 철판 등의 재료를 장비 내부에 넣어놓고 오디오를 재생하여 재료가 떨리며 발생한 잔향을 증폭하는 방식을 사용하는 것도 있다. 즉, 뜯어보면 장비 내부에 스프링이나 철판 하나 딸랑 들어있다는 것이다. <small>(이런 단순한 구조로 좋은 소리를 뽑는다는 게 더 무섭…)</small></p>\n<p>그러나 리버브를 소프트웨어로 구현할 때는 이야기가 조금 다르다. 컴퓨터는 스프링이나 철판의 떨림과 같은 자연적인 아날로그 신호를 생성할 수 없으므로 직접 계산을 통해 구현해야한다. 이때 소프트웨어 리버브는 크게 두 가지 종류로 나누어지는데 바로 <code class=\"language-text\">Convolution Reverb</code>와 <code class=\"language-text\">Algorithm Reverb</code>이다.</p>\n<p>하지만 이 포스팅에서 두 리버브를 모두 구현하기에는 글이 너무 길어질 것 같으므로 아쉬운대로 컨볼루션 리버브에 초점을 맞춰 진행하겠다. <small>(알고리즘 리버브만 해도 포스팅 하나 분량이다.)</small></p>\n<h3>Convolution Reverb</h3>\n<p><code class=\"language-text\">컨볼루션 리버브(Convolution Reverb)</code>는 실제 공간의 잔향을 녹음한 후에 잔향 오디오 소스와 원본 오디오 소스를 실제 공간의 울림을 원본 오디오 소스에 합성하는 방법이다.</p>\n<p>이때 실제 공간의 잔향을 녹음하는 대표적인 방법을 간단하게 설명하자면, 녹음하고자 하는 공간에 <code class=\"language-text\">순수한 사인파(Sine Wave)</code>의 소리를 낮은 주파수부터 높은 주파수까지 쭈우우욱 이어서 틀고 그때 발생하는 잔향을 녹음하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAa01zxrFI74LLA//xAAZEAEBAAMBAAAAAAAAAAAAAAABAAIQISL/2gAIAQEAAQUCnWXWYCDyA3//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAZEAABBQAAAAAAAAAAAAAAAAAAARAgIYH/2gAIAQEABj8CljWh/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERQRAhMVFh/9oACAEBAAE/IX1qil28HIcixKBGGYJahs//2gAMAwEAAgADAAAAELwvPP/EABURAQEAAAAAAAAAAAAAAAAAAAEg/9oACAEDAQE/ECP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMWFB/9oACAEBAAE/EA3fpLnCDS59gENtqLQhtsAPZm2lLnkO2loT5U1kCXU//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ir recording\" title=\"\" src=\"/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg\" srcset=\"/static/139d22412a234cb2ac3a54c80f1ef282/0913d/ir-recording.jpg 160w,\n/static/139d22412a234cb2ac3a54c80f1ef282/cb69c/ir-recording.jpg 320w,\n/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg 640w,\n/static/139d22412a234cb2ac3a54c80f1ef282/6a068/ir-recording.jpg 960w,\n/static/139d22412a234cb2ac3a54c80f1ef282/eea4a/ir-recording.jpg 1280w,\n/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg 2561w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>공간의 IR을 녹음하는 모습 - 출처: http://www.alanjshan.com/impulse-response-capture/</small>\n</center>\n<p>이때 이 잔향 신호를 <code class=\"language-text\">Impulse Response(IR)</code>이라고 부르기 때문에 컨볼루션 리버브는 <code class=\"language-text\">IR 리버브</code>라는 이름으로도 불린다. 이렇게 녹음한 IR은 원본 소스에 <code class=\"language-text\">컨볼루션(Convolution)</code>, 또는 합성곱이라고 불리우는 연산을 통해 합쳐지게 된다.</p>\n<p>이 컨볼루션이라는 개념을 수학적으로 접근하기 시작하면 머리도 아프고 또 포스팅이 길어지니까 간단하게 정의해보자면, 그냥 서로 다른 정보들을 섞는 것이라고 표현할 수 있다. 이 포스팅을 읽는 분들은 아마 개발자 분들이 많을 테니 우리에게 좀 더 친숙한 머신러닝을 사용하여 컨볼루션을 설명하자면 학습 알고리즘 중 하나인 <code class=\"language-text\">CNN(Convolution Neural Network)</code>을 예로 들어볼 수 있겠다.</p>\n<p>CNN에서도 첫번째 레이어의 이미지를 두번째 레이어로 보낼 때 행렬로 구현한 커널<small>(또는 필터)</small>와 이미지를 섞어서 피처맵을 생성한 후 다음 레이어로 보내게된다. 이때 첫번째 레이어의 이미지와 커널의 정보가 섞인 것이라고 생각할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVR42mN4/Pjx8+cvHj1+8uD+/Z8/f/7////7929Pnz598/r182fPHj58/OXrN6Dgv79/37179/btu8+fPn358uXTp89AQYZbt249evTkzt37ly5d+vnrF1Do16+ft2/fOnr06JEjRy9euvLt+4//IPDvzp07J06cvHrlyvUbNy5cvPz37z+Gvdt37t68+eCO7avmL1g0cwZI1b9/P3/8ePz4ycNHj758/fr371+g4O07d4KDg8PCQkNCgHSIn6/f/fv3GTbO6VvYVpgX5VcY5jy9o/7f//+PHj18//793z9/gOSvX79ev3nz6tWrM2fO8PDwcHJwcnFyiouK8nJzX716lcHDSKsh2ac81rMjw/fY5iU/f/4CevjDhw9///4B6gFqfvPmDdC3586d4+Hm4eXllZSQUFJU5OPlO3/+PIOVkpi7gXJuoG1Dovv+NXN//Pz54sWLt2/fAh0P1Pb792+gTqApFy9cEBYW5uXhFRQUlJOV4eHiAhrHUJ/ol+iib6vA56cnvnV+5w+wzcDwBGoD2g8k34PBqVOnGGCAhYWFjYUFpPn0vq0nd29cOWfS8hn9V0/shQTYfyQACTCgiXV1dU1NTS3NzS0tLRP6+1++fAkAiH1QfGGJI9IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"convolution\" title=\"\" src=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" srcset=\"/static/380a88c34eac31f9a0af42f7f4de4002/69538/convolution.png 160w,\n/static/380a88c34eac31f9a0af42f7f4de4002/72799/convolution.png 320w,\n/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>원본 이미지와 커널을 섞어서 새로운 정보인 피처맵을 만들어낸다</small>\n</center>\n<p>오디오에서의 컨볼루션 리버브도 이와 마찬가지다. 이 경우에는 섞어야하는 정보가 원본 소스와 IR이 된 것 뿐이다.</p>\n<p>컨볼루션은 원본 소스와 IR이라는 두 오디오 소스의 주파수 스펙트럼을 곱하는 과정이기 때문에 이를 통해 두 소스 간에 겹치는 주파수는 강조되고 겹치지 않는 주파수는 감쇠된다. 이렇게 원본 소스와 IR 간 겹치는 주파수가 강조되면 원본 소스는 IR의 음질의 특성을 띄게 되는데, 이게 바로 컨볼루션 리버브의 원리이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAFxGAABcRgEUlENBAAACIElEQVR42m1Ta2OjIBDM//9x109tEpPGmPSiBBVUQB4CN0guvfa6vkbYWWaXZRNj9N7jHVbLv3nkCZZleU5lT4wAbPBhjBlj5nmWUmptp2kSQjpnx3EEdM5xxvgw3+m43+/qur5er33fJ7LWGk5rVMT2jAXciI7FjAlZEBaQjJPq8uvlZbfbEUKEEIlsrc1o1RUB2zaBxYX6FtbRoFRY3IInJ4JwkJnIUAW1iYxHCcn0JCOmgo93GrVJgRoSVXL+NOj9lI14i3MTGbuy15RpOtiuZxcyfBDT3vvqzq93TRvWMEI0Y7NSab0NSsU5x/rWGG2sc54PfdPdftfX90NR7PdVeS72u/djsXt7O5/P2+3+dCqHYXjknGU/jWnONU9ph8V6G3+yh+xnztkWv0xmwu2Dx5tKimLgMov5gZy24S8ZHtIKaaXzbrKjcEI5NS+z9poZBmC8ccFBjsw5QzYSQOapcmrsBq6wD0rdu/7jRi5VtT1si1NxuVxO1el4Pr4Wr4fyMInpUbB/93ngkbHUMkr5rjPjyAc+KCnhM6sZJcWvmMRjn58FW8lBytB16Db0c6zrR4YIvjb1fzl/JUdAuTYJvCkFSKNNE581DWvXPVZGDBwM1Bz6+163rcUEAKU4IZZz23WWEEWpaVvTNBIOjGmRc0ajKqVQ89Qn1oTgQc6gLMu6vq29jbNl4QLO2ooWlET+tvtZfD60KJL61tNf7Q/9w9fqrhB2GAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"signal convolution\" title=\"\" src=\"/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png\" srcset=\"/static/c055ddb7e8755ffb1cfef849a60b862f/69538/signal-convolution.png 160w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/72799/signal-convolution.png 320w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png 640w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>원본 신호와 녹음한 IR 신호를 컨볼루션 연산한 모습</small>\n</center>\n<p>사실 HTML5 Audio API는 컨볼루션 연산을 대신 수행해주는 <code class=\"language-text\">ConvolverNode</code>를 제공하기 때문에 컨볼루션이 무엇인지 몰라도 컨볼루션 리버브를 만드는 데는 아무 문제가 없다.</p>\n<p>그러나 적어도 이 이펙터가 2개의 신호 정보를 곱해서 새로운 신호를 만들어내는 원리를 가지고 있다는 것을 알아야 필자가 왜 이런 코드를 작성하는지도 알 수 있기 때문에 대략적인 설명을 하는 것이다.</p>\n<p>어쨌든 컨볼루션 리버브의 대략적인 원리를 파악했다면 이제 바로 만들어보도록 하자.</p>\n<h3>Convolution Reverb 구현해보기</h3>\n<p>먼저 HTML5 Audio API는 <code class=\"language-text\">ReverbNode</code> 같은 건 제공하지 않는다. 하지만 위에서 설명했듯이 컨볼루션 연산을 지원하는 <code class=\"language-text\">ConvolverNode</code>를 제공해주고 있기 때문에 우리는 잔향 소스인 <code class=\"language-text\">IR(Impulse Response)</code>만 직접 만들어주면 된다.</p>\n<p>그리고 일반적으로 리버브는 <code class=\"language-text\">wet</code>과 <code class=\"language-text\">dry</code>라는 수치로 원본 소스와 잔향 소스를 비율에 맞게 섞을 수 있도록 제작되므로 필자도 동일하게 코드를 작성하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> decay <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>리버브의 사용할 3개의 변수를 먼저 설명하자면, <code class=\"language-text\">mix</code>는 wet/dry의 비율을 의미하고, <code class=\"language-text\">time</code>은 잔향의 길이, <code class=\"language-text\">decay</code>는 잔향이 감소하는 빠르기를 의미한다. 그럼 이제 이 값들을 사용하여 직접 <code class=\"language-text\">IR</code>을 생성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">generateImpulseResponse</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sampleRate <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> sampleRate <span class=\"token operator\">*</span> time<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> impulse <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> sampleRate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> leftImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    leftImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> deacy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rightImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> deacy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> impulse<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>뭔가 복잡해보이지만 뜯어보면 별 거 없다. <code class=\"language-text\">sampleRate</code>는 우리가 생성하고자 하는 <code class=\"language-text\">IR</code>의 샘플레이트, 즉 음질을 의미하고 <code class=\"language-text\">length</code>는 <code class=\"language-text\">sampleRate * time</code>, 즉 <code class=\"language-text\">time</code>초 만큼의 잔향을 표현하기 위한 버퍼의 길이를 의미한다.</p>\n<p>그리고 그냥 버퍼 노드를 하나 생성한 다음 <code class=\"language-text\">-1 ~ 1</code>의 무작위 값을 생성한 후 <code class=\"language-text\">1 - i / length</code>에 <code class=\"language-text\">decay</code>를 제곱한 후 방금 생성한 난수에 곱해준다. 이러면 <code class=\"language-text\">i</code>값이 커질수록 값이 작아질 것이고, <code class=\"language-text\">deacy</code> 값이 커질수록 더 빠르게 작아질 것이다. 이는 잔향의 감쇠를 표현 해준 것이다. 이후 이 샘플을 방금 만든 버퍼 노드에 쭈르륵 담아주면 끝이다.</p>\n<p>이렇게 생성된 <code class=\"language-text\">IR</code> 버퍼를 파형으로 표현해보면 대략 다음과 같은 모양을 가질 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAABAgAD/9oADAMBAAIQAxAAAAHVfnbp52DMWgJB3//EABoQAAICAwAAAAAAAAAAAAAAAAEDEBECEiD/2gAIAQEAAQUCxlRZY2gChz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAQUAAAAAAAAAAAAAAAABEQAQMDFBof/aAAgBAQAGPwKpQYe5jtj/xAAdEAACAgEFAAAAAAAAAAAAAAAAAREhURAxcbHw/9oACAEBAAE/IWUV0e2GQ9ZmRFwHJEJKi8D1Z//aAAwDAQACAAMAAAAQAx+w/8QAFxEBAQEBAAAAAAAAAAAAAAAAARARYf/aAAgBAwEBPxBRm8n/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREh/9oACAECAQE/ENgo/8QAIBABAAICAgEFAAAAAAAAAAAAAQARITFBURBhcYGRsf/aAAgBAQABPxBBVvgG4C8p7iCqvPxMg4bUGeGWh6mWn5FYsNdxiWhu9svq+5a8lQ0eN5//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decay\" title=\"\" src=\"/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg\" srcset=\"/static/2e23d03eabacbb33bc757852ef9e0434/0913d/decay.jpg 160w,\n/static/2e23d03eabacbb33bc757852ef9e0434/cb69c/decay.jpg 320w,\n/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg 640w,\n/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg 768w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>쨘, 이렇게 간단하게 <code class=\"language-text\">IR</code>를 생성해보았다. 이제 <code class=\"language-text\">ConvolverNode</code>를 사용하여 원본 소스와 이 IR을 합성해주는 것만 남았다. 리버브 이펙터의 오디오 흐름을 만들기 위해서 필요한 노드들을 먼저 생성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> reverbNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createConvolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위에서도 설명했듯이 일반적인 리버브 이펙터는 <code class=\"language-text\">wet/dry</code>라는 수치를 사용하여 원본 소스와 리버브가 적용된 소스를 섞어서 출력하는 기능을 제공한다. 이때 dry한 소스는 리버브 이펙터를 거치지 않고 바로 <code class=\"language-text\">outputNode</code>로 연결되서 출력되어야 하며, wet한 소스는 우리가 만든 <code class=\"language-text\">reverbNode</code>를 한번 거치고 <code class=\"language-text\">outputNode</code>로 출력되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Dry 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// IR을 생성하여 Convolver의 오디오 버퍼에 입력해준다.</span>\nreverbNode<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> <span class=\"token function\">generateImpulseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Wet 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>reverbNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nreverbNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwebGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>vaule <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 컨볼루션 리버브를 간단하게 구현해보았다. 사실 컨볼루션 리버브의 퀄리티에 가장 큰 영향을 끼치는 것은 IR의 퀄리티인데, 우리는 대충 만든 샘플 오디오로 IR을 만들었으므로 이 리버브의 퀄리티는 좋을 수가 없다. 그러나 소스 노드를 재생해서 들어보면 신기하게도 소리에 공간감이 부여된 것을 들어볼 수 있다.</p>\n<p>만약 기회가 된다면 다음에는 알고리즘 리버브의 구현체도 한번 포스팅 해보도록 하겠다. 알고리즘 리버브는 실제 공간의 잔향을 녹음하여 사용하는 컨볼루션 리버브와는 다르게 100% 알고리즘으로만 구현된 리버브이다. 그렇기 때문에 약간 인위적인 느낌이 나기는 하지만 컨볼루션 리버브와는 또 색다른 느낌을 부여할 수 있으므로 사운드 엔지니어들은 이 두가지 리버브의 특성을 파악하고 적재적소에 사용한다.</p>\n<p>그렇기 때문에 개발자들에게는 오히려 컨볼루션 리버브보다 알고리즘 리버브 쪽이 더 이해가 잘될 수 있으나, <code class=\"language-text\">ConvolverNode</code> 하나와 대충 만든 <code class=\"language-text\">IR</code>만 있으면 나머지는 알아서 다 연산해주는 컨볼루션 리버브와는 다르게 알고리즘 리버브는 진짜 밑바닥부터 만들어야한다. 그래서 아쉽지만 알고리즘 리버브는 다음에 포스팅 하도록 하겠다.</p>\n<p>만약 알고리즘 리버브의 구현체가 궁금하신 분은 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer/blob/master/src/lib/effects/AlgorithmReverb.js\" target=\"_blank\" rel=\"nofollow\">필자의 깃허브 레파지토리</a>에서 확인해볼 수 있다.</p>\n<h2>Delay</h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHPUhaAP//EABcQAAMBAAAAAAAAAAAAAAAAAAECERD/2gAIAQEAAQUCLYZf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQAQETFBUaH/2gAIAQEABj8CEnivOm//xAAZEAEBAQADAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hSAWVcs4h9Y6zrf/aAAwDAQACAAMAAAAQdC//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QQ22//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxCMU//EABkQAAIDAQAAAAAAAAAAAAAAAAEhABFRMf/aAAgBAQABPxBUKIoScjwgC2cEcAZd5P/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay\" title=\"\" src=\"/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg\" srcset=\"/static/6c84397372fb970c1df011b86b5edfef/0913d/delay.jpg 160w,\n/static/6c84397372fb970c1df011b86b5edfef/cb69c/delay.jpg 320w,\n/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg 640w,\n/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg 749w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">딜레이(Delay)</code>는 리버브와 같은 공간계 이펙터이고 소리를 반복해서 들려준다는 점이 같기 때문에 비슷하다고 생각할 수 있지만 그 원리와 용도는 많이 다르다.</p>\n<p>먼저, 딜레이는 단순히 소리를 반복하는 효과이지만 리버브는 공간 내에서의 복잡한 반사음을 흉내내는 것이므로 딜레이만 사용하면 리버브와 같은 자연스러운 공간감을 표현하기가 힘들다.</p>\n<p>방금 만들어봤던 리버브 이펙터는 사실적인 공간 표현이 목적이기 때문에 컨볼루션이나 복잡한 알고리즘을 사용하지만 딜레이는 그냥 원본 소스를 잠깐 지연시켰다가 <code class=\"language-text\">n</code>초 후에 다시 틀어주면서 조금씩 소리를 작게 해주면 끝이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42p1SPW8aQRDlH7uMlCJKE6VwOnf5AenduCIgwUl2QUMTO0LojiMgA/e9s7v3/TxzYAFx7EheaW53b3fevvdmemmawliL1XKJ2f09qqrCO0Yjn7Zt/V5RFEiVAsoSTZJ2p5o0wjD6ZyYnIcsyJEnSzXVdnwOWDJQRgamh5QsyrGmgVLNf5wWSTB2pNA2GwyEGgwFGoxGWrOwloDA8A2yhDhgFO6DsOUNRled5Z88LhvIzjCIY9pK2W+RlgTg22O00cquZncaO98ZoVqIRM1trZX8MrXUjjwRB4PcEWV4jxYlbwsODi8UiwCawnKwRxOwnz0prpBy0B+jiFFA8jeN4D3g6RMJBxvuqbLllxOi6ruB5Lpv8B6vVCuv1mn1UkLZKuPqyfm4p8VFyTuIIKBdJE3JVwv21ZEkJt0zcAYkV8qCErA95/+vDkkHY6LTCj+8Zgq79Wj7Eq33oOA4mkwmm0ynG47Gsn1/ithFAZliZCt8+Z/jyFbi9FUmvG7bZbDCfz+G6LmazGRdxcQQUhkorlFTi8lOKDx+Bi4sWV1fA3R1YOt4EP5XMlvg9rihxuSnchjQepNT/aanft3RzY+j62pDjGHp8LIgL092TiKLo78g8z6t83//9BM+R5WNJLGHCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb vs delay\" title=\"\" src=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png\" srcset=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/69538/reverb_vs_delay.png 160w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/72799/reverb_vs_delay.png 320w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png 640w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png 660w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Echo(Delay)와 Reverb의 차이</small>\n</center>\n<p>딜레이는 이렇게 간단한 원리를 가지고 있기 때문에 만드는 것 역시 그렇게 어렵지 않다.</p>\n<h3>Delay 구현해보기</h3>\n<p>HTML5의 Audio API는 인풋으로 받은 신호를 지연시켜서 다시 출력하는 <code class=\"language-text\">Delay Node</code>를 제공해주기 때문에 우리는 이 노드를 사용하여 간단하게 딜레이 이펙터를 구현할 수 있다.</p>\n<p>그러나 단순히 <code class=\"language-text\">DelayNode</code>만 사용한다면 단 한번의 지연만 발생시킬 수 있기 때문에 우리는 한가지 얌생이를 사용하여 딜레이를 구현할 것이다. 먼저 딜레이에 필요한 변수들을 선언해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedback <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>리버브와 마찬가지로 대부분의 딜레이 이펙터도 <code class=\"language-text\">wet/dry</code> 값을 사용하여 원본 소스와 딜레이된 소스를 섞어서 출력해주는 기능을 가지고 있기 때문에 필자도 동일하게 구현해줄 것이다. 그리고 <code class=\"language-text\">feedback</code> 변수는 원본 소스가 한번 딜레이될 때 감소시킬 음량이고 <code class=\"language-text\">time</code> 변수는 메아리들의 간격을 의미한다. 딜레이에 사용할 변수들을 모두 선언했다면 이제 노드들을 만들 차레이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedbackNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> delayNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">webGainNode</code>와 <code class=\"language-text\">dryGainNode</code>는 리버브와 동일하기 때문에 그냥 넘어가고, 새로운 노드인 <code class=\"language-text\">feedbackNode</code>와 <code class=\"language-text\">delayNode</code>에 집중해보자. 사실상 딜레이 이펙터는 이 두개의 노드가 핵심이다. 먼저, 딜레이 이펙터가 하는 일에 대해서 다시 한번 살펴보자.</p>\n<blockquote>\n<p>입력 -> 지연 -> 감소된 신호 출력 -> 입력 -> 지연 -> 감소된 신호 출력…</p>\n</blockquote>\n<p>딜레이 이펙터가 하는 일은 이게 전부다. 신호를 조금씩 지연시키고 감소된 신호를 다시 출력하는 일을 반복한다. 그래서 필자는 <code class=\"language-text\">delayNode</code>와 <code class=\"language-text\">feedbackNode</code>를 서로 연결해주는 방법으로 이 이펙터를 구현하려고 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVR42mP4jxv8AgM8ChjwyH3+/Onjxw///v3DqXnHuXUZ00MqF6dXL8kEMjafWg0U3bTqZFrI9MrMJVVZS4GMzatPgQRPrsyaEVa1OAOoMnNGKFAjQ9f6KokEBvtqFccaNfF4hpYVpUB1tfkLxRkSbVWr7NSqRRni6wsXAwUblxbJpjA41mo41qjLJDF0ratiuPn0yorDc9cdX7z22MIVh+fceHIZqO78mTtLZx9cufDwygWHgQwgFygIlAIqgKsEasTi579///78+RNZBMgFCmLxMzA8/vz9A0d//4EUXXtwae2xJRtPLAeitUeXXHt4CWTov7/IKoEa0W3+8/c3kOxYXamVy+tap+1Wr6uVy9e2qhws9YdAVEFUbDy5LHGyT9H8+OJ58UDGhhNLwd75Q2w8f/76+dXrl2/fvfny5TPJiQQYQr9//wECrEEF0QwAoJQty6GnAz4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay nodes\" title=\"\" src=\"/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png\" srcset=\"/static/4d190f766bb560920bc66390824efb6c/69538/delay-nodes.png 160w,\n/static/4d190f766bb560920bc66390824efb6c/72799/delay-nodes.png 320w,\n/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png 640w,\n/static/4d190f766bb560920bc66390824efb6c/d9199/delay-nodes.png 960w,\n/static/4d190f766bb560920bc66390824efb6c/21b4d/delay-nodes.png 1280w,\n/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이렇게 간단한 연결만으로 딜레이를 구현할 수 있다</small>\n</center>\n<p>이렇게 노드들을 연결하게되면 <code class=\"language-text\">DelayNode</code>를 통해 입력된 오디오 신호가 지연된 후 <code class=\"language-text\">FeedbackNode</code>와 <code class=\"language-text\">OutputNode</code>로 출력되고, <code class=\"language-text\">FeedbackNode</code>를 통해서 게인이 감소된 소리는 다시 <code class=\"language-text\">DelayNode</code>로 입력되어 지연된 후 <code class=\"language-text\">OutputNode</code>로 출력될 것이다. 그럼 위 그림대로 한번 노드들을 연결해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Dry 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Delay 루프 생성</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>feedbackNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfeedbackNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Wet 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>vaule <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 소스 노드를 재생해보면 딜레이 이펙터를 통해 메아리가 치는 듯한 효과가 적용된 소리를 들어볼 수 있다.</p>\n<h2>Filter</h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42n2S62/SUBjG+4+ZuCkQNtrSy+k5vcM2NtyAkTHuhbbQFlqg5TLXdTpxLsY4Y2L84N/n4YOJiYnJkydPzsnvfd9zIWzHm8yXlr/2o5t5/LR6eH77+D358mvz8UcQP9mLu844rHVsqJfSQErKlZakvSBZuViioEwMJks3jDujWa0zcqPEixI3TGbxk7veWvO4562aZlBpmvLJOSqeiuoRg1QSqhma3z+kibYZ9N3I9NdeFLvR3SLeDidh35mbwXo4XTWtacOYdO2ZUqq8yjGvKS6dB4yo5QVIMjRh+ZvJ6l2UPG4/f4s/PX/4+jPePrrR7XTz3t/cm/6q74SGs9BOq3sH1P5hHpegocwIgGJIomG44/mtu7wzJsuBF5rBJozvMeytkuDmoefMO/Zs4EYYfpndwdgpQSme1+XjMlFtm23b74xn10P3eui1rKnpR71xYHiLcXgznEbdUWC4oX5WTeGZaR53ZqSC4YW4LoETBRVS2F0DhXQa6Tmg5qUiLe7yZd+uNHt49031auD4jf7oqmc1jBHucWU4RJaBKQrkWMAKgBMALwAkAiDwvMADCGiGZjiG4dhyvdV3ZuV6+6zWOrtsWcG6Ow6ILIsgAgUNaZqoqUjXUEEXsevqLhR0qahLsgQqjY7lL2stA+ui0cUHrHdtQhBhUYeKglRVxL7Tn/D3CgXEAw5lWQjUI1Qo0Wj31ISiyZIiyar8HyFJAvqJcnpBS3qahST+J0hNMwKRyQspit87yO8fMv8qRfIZIHI6IqHMasc5qGAYYxkWvqK43+hILPd7Ms/OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter\" title=\"\" src=\"/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png\" srcset=\"/static/39acf359c2bf68c771d7db4d300523e5/69538/filter.png 160w,\n/static/39acf359c2bf68c771d7db4d300523e5/72799/filter.png 320w,\n/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png 640w,\n/static/39acf359c2bf68c771d7db4d300523e5/d9199/filter.png 960w,\n/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png 1007w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">필터(Filter)</code>는 무언가를 걸러내는 도구 혹은 개념을 의미한다. 우리는 이미 필터라는 개념을 평소에 많이 사용하고 있기 때문에 그렇게 이해하기 어려운 개념은 아닐 것이다. 그리고 오디오 이펙터에서의 필터는 바로 <code class=\"language-text\">주파수</code>를 걸러내는 역할을 한다.</p>\n<p>쉽게 말하면 필터는 오디오의 음역대 중 특정한 음역대만 콕 집어내어 없애버릴 수 있는 이펙터인 것이다. 그래서 필터는 주로 소리에 섞여있는 노이즈를 걸러내거나 너무 낮거나 너무 높아서 쓸데없는 울림을 생성하는 주파수를 걸러내는데 많이 사용된다.</p>\n<p>이러한 필터의 특성을 잘 사용하면 상당히 재미있는 짓을 많이 할 수 있는데 대표적인 예를 두개 정도 들자면, 바로 전화기에서 나오는 목소리를 만들거나 클럽에서 나는 음악 소리와 같은 소리를 만드는 경우가 있다.</p>\n<p>먼저, 전화기에서 나오는 목소리는 전체 주파수 중에서 특정한 대역의 주파수만 통과시키는 <code class=\"language-text\">Bandpass</code> 필터를 사용하여 만들어 낼 수 있다. 전화기가 전송할 수 있는 주파수 대역에 한계가 있다는 것을 이용하여 인간의 목소리 대역인 <code class=\"language-text\">100 ~ 250hz</code>의 주파수를 제외한 나머지 주파수를 모두 잘라내는 것이다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/JrbkbKt1iEM?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>위 영상의 5:00 경 \"Hey, kitty~\" 하는 부분이 필터가 적용된 목소리이다.</small>\n  <br />\n  <br />\n</center>\n<p>그러므로 사람의 목소리 소스에 필터를 사용하여 <code class=\"language-text\">100 ~ 250hz</code> 대역을 제외하고 나머지 주파수를 모두 날려버리게되면 우리가 일반적으로 전화를 할때 들리는 목소리로 만들어낼 수 있는 것이다.</p>\n<p>클럽에서 나는 음악 소리도 비슷한 원리로 만들어내는 것이다. 클럽의 특성 상 보통 지하에 위치하고 좁은 입구를 가지고 있는 경우가 많다. 그런 상황에서 클럽에서 노래를 틀게되면 소리가 밖으로 빠져나올 수 있는 통로가 거의 없기 때문에 우리가 지상에서 클럽에서 틀고 있는 노래를 들어보면 굉장히 묵직한 <code class=\"language-text\">붐~ 붐~</code>하는 소리가 들리게 된다.</p>\n<p>클럽 음악의 특성 상 강한 드럼과 베이스로 인해 저음이 부각되는 경우가 많고, 고음보다는 저음의 물체 투과율이 높기 때문에 클럽 외부에서는 상대적으로 고음에 비해 많이 투과된 저음을 위주로 듣게 되는 것이다. 이러한 파동의 특성은 소리에 한정되는 것은 아니고 빛과 같은 다른 파동또한 고주파의 에너지 손실률이 저주파보다 높다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/qmhwHUHc1Hc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>6:27초부터 낮은 주파수만 통과시키는 Lowpass 필터를 사용한 소리로 변하는 부분이 나온다</small>\n  <br />\n  <br />\n</center>\n<p>이렇듯 사운드 엔지니어들은 특정 상황의 소리가 어떻게 들리는지 분석하고 필터를 포함한 여러가지 이펙터들을 사용하여 그 상황의 현장감을 부여하기도 한다.</p>\n<p>다행히도 HTML5 Audio API는 이런 필터를 만들 수 있는 <code class=\"language-text\">BiquadFilterNode</code>를 제공해주고 있기 때문에 우리가 직접 오디오 버퍼를 까서 주파수를 분석해야하는 슬픈 상황은 피할 수 있다. 우리는 이 노드가 제공하는 값들이 어떤 것을 의미하는지만 알고 있으면 된다.</p>\n<p>그럼 <code class=\"language-text\">BiquadFilterNode</code>가 제공하는 속성들이 무엇을 의미하는지 하나하나 살펴보도록 하자.</p>\n<h4>Frequency</h4>\n<p><code class=\"language-text\">Frequency</code>는 어떤 대역의 주파수를 걸러낼 것인지를 정하는 값이다. 단위는 <code class=\"language-text\">hz(헤르츠)</code>를 사용하며, <code class=\"language-text\">10hz</code>부터 오디오의 샘플레이트의 절반까지의 값을 할당할 수 있다. 만약 오디오 소스의 샘플레이트가 <code class=\"language-text\">44,100hz</code>라면 <code class=\"language-text\">22,050</code>까지를 할당할 수 있다는 의미이다.</p>\n<h4>Q</h4>\n<p>신호를 걸러낸다는 것은 기본적으로 칼처럼 딱! 자를 수 있는 것이 아니다. 소리 자체는 아날로그 신호이기 때문에 네모 반듯하게 잘라낼 수 없고 어느 정도 바운더리를 가지고 걸러낼 수밖에 없는데, 이때 <code class=\"language-text\">Q</code>는 특정 주파수를 걸러낼 때 얼마나 예민하게 걸러낼 수 있는 지를 의미한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjklEQVR42o1TXW/CMAzk//87HpDgAY0KRKHtSqt8OU7i7ppAB2ibdqLIdXK+szGrKSOlFDMQMPN6vd7tdtvtFt/7/X6z2Vyv10kkMKeMwlrhEZG+7621RGSUatuuadp2ftouo2maYRjarq+vTVUdzufzNxlwzpV67H3XdpIrTg9IhtFKjwMsoOgLGZqFbCyNn58hs5/Jc2siMd9ZLt/Jxpg72ZEdevfKXlyU4JuMIcEGWirv2jGNvfFRnoCjJXjucRVCOJ1OKJavTJpY9AByTO+2f1AGua7rmSwpzuQg+uZDciH9i1xV1TiOUAbBc4iqx5mikCRNf9tGKoSIHxnvllMMnNQADYhbH+8r9JB+Vy7HHkCJMAm75Aw6mJNRMHb0/qvtkoWydn5ePDISg3grMU6oATs+WGJCOzGiRxSgxXYhD7ebMzqSZU8x32Jn2JrgLJLeGnyM1tgxssaq8V0ZY2AOSqkccA4IysZapTXmgjzmCnEiX/yvln/VfQcfAXb4cPi4XOrj8Ygmy9Fs+wlfnjxs6L3IYCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter q\" title=\"\" src=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" srcset=\"/static/bd13c5d375c2729ffbcba3539fc82f14/69538/filter-q.png 160w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/72799/filter-q.png 320w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png 560w\" sizes=\"(max-width: 560px) 100vw, 560px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">Q</code>에는 <code class=\"language-text\">0.0001 ~ 1000</code> 사이의 값을 할당할 수 있으며, Q의 값이 높을 수록 잡아낸 주파수를 더 예민하게 걸러낼 수 있다. 그러나 오디오 신호를 필터링 할 때 Q가 너무 높다면 자연스럽게 들리지 않고 인위적으로 들릴 수 있기 때문에 적당한 값을 찾는 것이 중요하다.</p>\n<h4>Type</h4>\n<p><code class=\"language-text\">BiquadFilterNode</code>로는 여러가지 타입의 필터를 만들어 낼 수 있는데, 크게는 주파수를 아예 걸러내버리는 타입과, 특정 주파수를 증폭시키거나 감소시킬 수 있는 타입으로 나눠진다.</p>\n<h5>주파수를 걸러내는 타입</h5>\n<ul>\n<li><code class=\"language-text\">lowpass(highcut)</code>: 지정한 주파수보다 높은 주파수를 모두 걸러낸다.</li>\n<li><code class=\"language-text\">highpass(lowcut)</code>: 지정한 주파수보다 낮은 주파수를 모두 걸러낸다.</li>\n<li><code class=\"language-text\">bandpass</code>: 지정한 주파수를 제외한 모든 주파수를 걸러낸다.</li>\n<li><code class=\"language-text\">notch</code>: 지정한 주파수를 걸러낸다.</li>\n</ul>\n<h5>주파수를 증폭/감소하는 타입</h5>\n<ul>\n<li><code class=\"language-text\">lowshelf</code>: 지정한 주파수보다 낮은 주파수를 증폭/감소 시킨다.</li>\n<li><code class=\"language-text\">highshelf</code>: 지정한 주파수보다 높은 주파수를 증폭/감소 시킨다.</li>\n<li><code class=\"language-text\">peaking</code>: 지정한 주파수를 증폭/감소 시킨다.</li>\n</ul>\n<p>이 중 주파수를 증폭/감소시키는 타입은 밑에서 후술할 <code class=\"language-text\">EQ(Equalizer)</code>에서도 사용할 수 있다. 이번에는 단순히 주파수를 걸러내는 필터를 만들 예정이므로 필자는 주파수를 걸러내는 타입만을 사용하여 필터를 구현할 것이다.</p>\n<p>필자는 특정 주파수보다 높은 주파수를 모두 걸러내는 <code class=\"language-text\">Lowpass 필터</code>와 특정 주파수보다 낮은 주파수를 모두 걸러내는 <code class=\"language-text\">Highpass 필터</code>를 구현할 것이다. 그럼 한번 간단하게 필터를 구현해보도록 하자.</p>\n<h3>Filter 구현해보기</h3>\n<p>우선 AudioContext 객체의 <code class=\"language-text\">createBiquadFilter</code> 메소드를 사용하여 <code class=\"language-text\">BiquadFilterNode</code>를 생성한다. 필자가 가지고 있는 오디오 샘플은 <code class=\"language-text\">44,100hz</code>의 샘플레이트를 가지고 있으므로 Lowpass 필터의 주파수는 <code class=\"language-text\">1,000hz</code>로 Highpass 필터의 주파수는 <code class=\"language-text\">20,000hz</code>로 설정하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> lowpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowpass'</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> highpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highpass'</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Q값을 따로 설정해주지 않았는데, 그래도 사실 상관없다. <code class=\"language-text\">BiquadFilterNode</code>의 Q는 기본 값으로 350을 가지고 있고 이 값은 너무 과하지도 부족하지도 않은 적당한 값이기 때문에 그냥 기본 값을 사용할 것이다.<small>(조금 귀찮기도 하다.)</small></p>\n<p>이제 생성한 필터 노드들을 오디오 소스와 연결해주면 <code class=\"language-text\">1,000hz</code>보다 낮고 <code class=\"language-text\">20,000hz</code>보다 높은 주파수가 제거된 오디오 샘플을 들어볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>lowpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>highpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>여기까지 읽으신 분들은 슬슬 느끼기 시작했겠지만 사실 HTML5 Audio API가 워낙 잘 만들어져있어서 개발자가 만져야할 부분이 거의 없다. 필자는 <code class=\"language-text\">BiquadFilterNode</code>의 존재를 알기 전에는 “와 이거 필터는 어떻게 만들지…?”라고 고민했었는데 사실 제일 고민할 필요가 없는 놈이었다. <small>(그래서 약간 허무하기도 했다.)</small></p>\n<h2>EQ</h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACmUlEQVR42j2RS28TVxiG5xdwB9meGXvseC5nbrbHM2PHcUKJg517CARBAiQBJBBBgqAoMgSQCpuy6YIFrVSpXVa0UretuuAnsOT3PJyZIBav3ve7nO92FOF6RK0WjWYT27ZxHBvLMtF1DU1Tczbrdcm6tI99xyyhlnIul/U8r2oYKK4bEIRNwnYfL4ikDnGEoKRqqJouWaeYab2c64yLqkpJy3wVtHJFDuKQDVarmyj6RIDhxNTdNEdVpFhBSk1y3Z9kwutiiATDS6g6CfVwGje8iAgk94bU/C6m08GwIkpVD8VsXsJN5yUWEMl8DiceYbeH1JuDnOO5TXrL9xGdRazWZWZ+2KY3s4WQb7zOUs5ONJCDJShWMsTtryH6V/Cn12nMbBDP3mBaFli+94qd17+x/8u/HP7+iQfv/mS0PWawvMfU3Dbe1CqBfOf1VnFls3rYRzlae8CLq3v8eH2fJ2uP2BjeYriww+LNZyzcPmT17hGjrYMcK7sv2bz/jqcP/+DN6/94Pv6H8eFfjA/+ZriyRy0r+HHrBR/vvOJg/TFpfx0/6za5gi3XsOJ57CSDXCldzG2RLLE02ufR7gfeHv3P+58+8+vPX1jbGKPZbZT3156wOb+N3pql1hpgRXPyTnOY0TGs9uUc2S0tiey+cW+DQBauNWeJpq7RvbiFK5sWJpoooRFyVqJiBlTtBiX5W067nQfL8tdVK6YoYvSkR6HWwoguobodJpxpbH9AodpAqCmFSkjJjlHKokvBjOWKI8qiw4miyfmqw8mSzSlNcEqVWpPacDlZtDhd8aXtcEbzOVcOZdzmQsnL807rAsVvd/FaCVF3hqDVwXZDiQaO15Ac0JCxdjpJM0q/+zJ2PJnnHWvbD7/ZIV8B/qNr5c4oeIoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"parametric eq\" title=\"\" src=\"/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png\" srcset=\"/static/b972a654c602720bb3a9d335899a0d25/69538/parametric-eq.png 160w,\n/static/b972a654c602720bb3a9d335899a0d25/72799/parametric-eq.png 320w,\n/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png 640w,\n/static/b972a654c602720bb3a9d335899a0d25/d9199/parametric-eq.png 960w,\n/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p><code class=\"language-text\">Equalizer(EQ, 이퀄라이저)</code>는 이름에서도 알 수 있듯이 일종의 <code class=\"language-text\">주파수 평탄화 작업(Frequancy Equalizing)</code>을 하는 목적으로 사용하는 이펙터이다. EQ는 컴프레서와 함께 오디오 믹싱의 기본으로 깔고 들어가는 이펙터인데, 원본 소스에서 쓸데없는 소리를 없애고 다른 소리들과의 조화를 이루도록 하는 용도로 주로 사용한다. EQ는 결국 주파수를 컨트롤하는 이펙터이므로 필터를 사용하여 구현하는데, 이미 우리는 필터를 한번 만들어봤기 때문에 EQ 정도는 뚝딱 만들 수 있다.</p>\n<p>EQ는 크게 <code class=\"language-text\">파라메트릭 이퀄라이저(Parametric EQ)</code>와 <code class=\"language-text\">그래픽 이퀄라이저(Graphic EQ)</code> 두 가지 종류로 나누어지는데, 필자는 이 중 그래픽 이퀄라이저를 구현할 예정이다. 참고로 상단의 그림은 파라메트릭 EQ인데, 그냥 이미지가 더 멋있어서 넣었다. 참고로 그래픽 EQ는 이렇게 생겼다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAclaJliP/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEDAgQRExQh/9oACAEBAAEFAud5cDFbs2+uYVZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQMTJBkaH/2gAIAQEABj8Csmi/CTJKt//EABwQAAICAgMAAAAAAAAAAAAAAAABESFRgTGR8f/aAAgBAQABPyHAtjCdh1cXopBOh4Apq5Z//9oADAMBAAIAAwAAABAYz//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAgEBPxBY/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFhsf/aAAgBAQABPxDoHs88NxX40NWnd6o/dakCgQhMggdStGdoYZWb/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graphic eq\" title=\"\" src=\"/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg\" srcset=\"/static/810256ab252fd73a1c3030c32279669f/0913d/graphic-eq.jpg 160w,\n/static/810256ab252fd73a1c3030c32279669f/cb69c/graphic-eq.jpg 320w,\n/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg 640w,\n/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg 836w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>짙은 아날로그의 향수가 풍겨오는 비주얼</small>\n  <br>\n</center>\n<p>두 개의 EQ 모두 장단점이 존재하는데, 일단 그래픽 EQ의 장점은 파라메트릭 EQ에 비해 조절할 수 있는 주파수 대역의 수가 많고 직관적인 인터페이스를 가지고 있다는 것이다. 여러분은 이 단락의 맨 위에 첨부된 파라메트릭 EQ 이미지를 보고 “엥? 파라메트릭도 나름 직관적인데?”라고 하실 수 있는데, 원래 하드웨어 파라메트릭 EQ는 이렇게 생겼다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFgEBAQEAAAAAAAAAAAAAAAAABAAC/9oADAMBAAIQAxAAAAHExB6DV//EABgQAQADAQAAAAAAAAAAAAAAAAIAEiEi/9oACAEBAAEFAkeqwnP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAATH/2gAIAQEABj8CrKys/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERUcHw/9oACAEBAAE/IUyts7sl1n//2gAMAwEAAgADAAAAEHwv/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBF//8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQIBAT8Qp//EABoQAAICAwAAAAAAAAAAAAAAAAABETEhQWH/2gAIAQEAAT8QexUtXY1UBmG79H//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hardware parametric eq\" title=\"\" src=\"/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg\" srcset=\"/static/351a26bf4458838f2afdbc6e4cb82da6/0913d/hardware-parametric-eq.jpg 160w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/cb69c/hardware-parametric-eq.jpg 320w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg 640w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg 740w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>까만 것은 노브요. 하얀 것은 숫자로다.</small>\n  <br>\n</center>\n<p>그래서 그래픽 EQ는 보통 빠른 대응이 필요한 공연장같은 곳에서 많이 사용되고 있으며, 짬이 많이 쌓인 시니어 사운드 엔지니어들은 공연장에서 하울링<small>(노래방에서 삐- 하며 가끔 나는 날카로운 소리)</small>이 발생하면 바로 해당 주파수를 캐치해서 그래픽 EQ로 죽여버리는 무서운 스킬을 가지고 있다.</p>\n<p>그래픽 EQ의 단점은 조절할 수 있는 주파수 대역이 정해져 있다는 것과 주파수의 세밀한 조정이 힘들다는 것이다. 반면 파라메트릭 EQ는 그래픽 EQ와 다르게 조절할 수 있는 주파수 대역까지 모두 정해줄 수 있다.</p>\n<p>그러나 한번에 조절할 수 있는 주파수의 개수는 그래픽 EQ에 비해 크게 부족하다. 일반적인 파라메트릭 EQ가 <code class=\"language-text\">3-5</code>개의 주파수 대역을 조절할 수 있는 반면에 그래픽 EQ는 한번에 조절 가능한 주파수가 <code class=\"language-text\">40</code>개가 넘어가는 굇수도 존재한다.</p>\n<p>필자 생각에 하드웨어 파라메트릭 EQ의 최대 단점은 바로 직관적이지 않은 인터페이스를 가지고 있다는 것인데, 이 단점은 소프트웨어로 구현하면 UI로 커버할 수 있는 영역이기도 하고 대부분의 녹음실에서는 즉각적인 대응보다는 계속 소리를 들어보면서 이퀄라이징을 할 수 있는 상황이 대부분이기 때문에 많은 소프트웨어 EQ가 주파수 대역 조절에 자유도가 높은 파라메트릭 EQ로 구현된다.</p>\n<p>하지만 필자가 만드는 데모처럼 간단히 구현해보는 상황에서는 저 위에 하드웨어 파라메트릭 EQ와 비슷한 UI로 구현될 것이 뻔하므로 필자는 상대적으로 UI 만들기가 쉬운 그래픽 EQ를 선택했다.<small>(이 말이 잘 이해가 안된다면 EQ 챕터의 가장 위에 첨부한 파라메트릭 EQ를 한번 보고 오자)</small></p>\n<p>위에서 한번 이야기했듯이 EQ는 필터를 사용하여 구현하므로 그렇게 복잡하지 않다. 그럼 이제 한번 간단하게 뚝딱 만들어보도록 하자.</p>\n<h3>그래픽 EQ 구현하기</h3>\n<p>위에서 그래픽 EQ 이미지를 봤다면 알겠지만 이 친구는 조절할 수 있는 주파수 대역의 개수가 정해져 있는 장비이다. 그렇기 때문에 필자도 조절할 수 있는 주파수가 들어있는 배열을 하나 선언하고 이 배열을 이터레이션하면서 필터들을 생성할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> frequencies <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">63</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">125</span><span class=\"token punctuation\">,</span> <span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">315</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1600</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 주의해야할 점이 있다. EQ는 여러 개의 필터를 사용하기 때문에 각 필터를 서로 체이닝해서 연결해주어야한다. 이때 필터의 게인이 1보다 조금이라도 높다면 한번 필터를 통과할 때마다 소리가 조금씩 증폭되어 여러분의 귀에 들어올 때 쯤이면 엄청 큰 소리가 되어 여러분의 고막을 영원히 이별시킬 수도 있다.</p>\n<blockquote>\n<p>🚨 그렇기 때문에 반드시 필터들의 게인을 <code class=\"language-text\">0</code>이하로 설정해주어야 한다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> filters <span class=\"token operator\">=</span> frequencies<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">frequency<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> array</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> filterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>frequency<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> array<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'peaking'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> filterNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfilters<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  prev<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>currentNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> currentNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfilters<span class=\"token punctuation\">[</span>filters<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">map</code> 메소드 내부의 <code class=\"language-text\">if</code> 문을 보면 해당 첫번째 필터와 마지막 필터의 타입만 다르게 주고 있는 것을 볼 수 있는데, 이는 <code class=\"language-text\">Shelf</code> 타입의 필터를 사용하여 첫번째 필터의 주파수보다 낮은 주파수와 마지막 필터의 주파수보다 높은 주파수까지 모두 커버하기 위해서이다.<small>(필터 타입이 잘 기억나지 않는다면 Filter 부분을 다시 보고 오자)</small></p>\n<p>그 후 생성된 필터를 <code class=\"language-text\">reduce</code> 메소드를 통해 모두 체이닝해주고 <code class=\"language-text\">outputNode</code>와도 연결해주었다. 여기까지 작성한 후 <code class=\"language-text\">sourceNode</code>를 재생시켜보면 아무 변화도 없는 것을 알 수 있다.</p>\n<p>당연히 모든 필터의 게인이 <code class=\"language-text\">0</code>이기 때문에 아무런 변화가 없는 것이다. 이때 저 필터들의 값을 <code class=\"language-text\">-1 ~ 1</code>사이의 랜덤한 난수로 할당하면 소리가 조금씩 변하는 것을 들어볼 수도 있다. 필자는 개인적으로 <code class=\"language-text\">input[type=\"range\"]</code> 엘리먼트와 연동하여 필터들의 게인을 조절할 수 있도록 만들고 직접 이것저것 만져보는 것을 추천한다.</p>\n<p>또한 가장 낮은 주파수와 높은 주파수의 필터를 <code class=\"language-text\">Shelf</code> 타입으로 설정했기 때문에 이 필터들의 게인을 낮추면 <code class=\"language-text\">Lowpass 필터</code>나 <code class=\"language-text\">Highpass 필터</code>와 같은 효과도 낼 수 있다.</p>\n<h2>마치며</h2>\n<p>자, 여기까지 대표적으로 많이 사용하는 이펙터들인 컴프레서, 리버브, 딜레이, 필터, EQ를 만들어보았다. 사실 이 5개 외에도 재밌는 여러가지 이펙터가 있지만 분량조절 대실패로 인해 여기까지만 노는 것으로 하겠다.</p>\n<p>필터를 만들 때 한번 이야기 했듯이 HTML5 Audio API는 굉장히 높은 수준의 추상화된 노드를 제공해주기 때문에 사실 개발자가 직접 구현할 것들이 별로 없다. 이는 다르게 말하면 세밀한 수준의 구현이 힘들다는 뜻이기도 하지만 필자가 무슨 오디오 이펙터 회사를 차릴 것도 아니기 때문에 단순 재미로 만들어보기에는 충분한 것 같다.</p>\n<p>이렇게 여러가지 이펙터를 구현해보며 필자도 예전에 사운드 엔지니어로 일할 때의 추억이 새록새록 떠오르기도 했고 또 이펙터에 대해서 새롭게 알게된 내용도 있어서 굉장히 재밌게 작업을 했다. 필자는 포스팅에 작성한 이펙터 외에도 여러가지 이펙터를 계속 구현해볼 예정이므로 관심있는 분들은 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer\" target=\"_blank\" rel=\"nofollow\">필자의 깃허브</a>에서 한번 쓱 둘러보고 PR을 날려도 된다.<small>(좋은 건 나누면 배가 되는 법이다.)</small></p>\n<p>이상으로 JavaScript로 오디오 이펙터를 만들어보자 - 나만의 소리 만들기 포스팅을 마친다.</p>","fields":{"slug":"20190821-javascript-audio-effectors-practice","path":"/2019/08/21/javascript-audio-effectors-practice/","lang":"ko"},"frontmatter":{"title":"[JavaScript 오디오 이펙터 만들기] 오디오 이펙터로 나만의 소리 만들기","date":"2019-08-21","categories":["프로그래밍","오디오"],"tags":["JavaScript","자바스크립트","Audio","오디오 이펙터","JavaScript Audio API","Logic Pro X","로직프로","Protools","프로툴즈","Cubase","큐베이스","Audio Plugin","Compressor","Delay","Reverb","EQ"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/1cda5/thumbnail.jpg 80w,\n/static/026a9fe9c894f201ec1e45217221447c/b1a47/thumbnail.jpg 160w,\n/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg 320w,\n/static/026a9fe9c894f201ec1e45217221447c/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/3e5ca/thumbnail.webp 80w,\n/static/026a9fe9c894f201ec1e45217221447c/b72f1/thumbnail.webp 160w,\n/static/026a9fe9c894f201ec1e45217221447c/fc5c5/thumbnail.webp 320w,\n/static/026a9fe9c894f201ec1e45217221447c/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/bae9c/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/23110/thumbnail.jpg 750w,\n/static/026a9fe9c894f201ec1e45217221447c/da421/thumbnail.jpg 1080w,\n/static/026a9fe9c894f201ec1e45217221447c/bae9c/thumbnail.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/6858b/thumbnail.webp 750w,\n/static/026a9fe9c894f201ec1e45217221447c/f5547/thumbnail.webp 1080w,\n/static/026a9fe9c894f201ec1e45217221447c/863b3/thumbnail.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"solarSystem","totalCount":5,"nodes":[{"id":"59c15557-97c3-50f1-afde-ef327112b002","tableOfContents":"<ul>\n<li>\n<p><a href=\"#lets-look-at-simple-astronomical-terms\">Let’s look at simple astronomical terms</a></p>\n<ul>\n<li><a href=\"#aphelion-perihelion\">Aphelion, Perihelion</a></li>\n<li><a href=\"#the-celestial-sphere\">The celestial sphere</a></li>\n<li><a href=\"#the-celestial-equator\">The celestial equator</a></li>\n<li><a href=\"#the-ecliptic\">The ecliptic</a></li>\n<li><a href=\"#right-ascension-declination\">Right Ascension, Declination</a></li>\n<li><a href=\"#ecliptic-longitude-ecliptic-latitude\">Ecliptic longitude, Ecliptic latitude</a></li>\n<li><a href=\"#orbital-node-ascending-node-descending-node\">Orbital node, Ascending node, Descending node</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#kepler-6-elements\">Kepler 6 elements</a></p>\n<ul>\n<li><a href=\"#semi-major-axis\">Semi-major axis</a></li>\n<li><a href=\"#eccentricity\">Eccentricity</a></li>\n<li><a href=\"#inclination\">Inclination</a></li>\n<li><a href=\"#longitude-of-ascending-node\">Longitude of Ascending Node</a></li>\n<li><a href=\"#argument-of-periapsis\">Argument of periapsis</a></li>\n<li><a href=\"#perihelion-passage-time\">Perihelion passage time</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post, I am going to share how to calculate the orbits and positions of celestial bodies that I learned while developing a solar system simulation with JavaScript. Actually, I was not a good student in mathematics, so I will try to explain mathematical theories about this as easily as possib…","html":"<p>In this post, I am going to share how to calculate the orbits and positions of celestial bodies that I learned while developing a solar system simulation with JavaScript.</p>\n<p>Actually, I was not a good student in mathematics, so I will try to explain mathematical theories about this as easily as possible for other people like me.</p>\n<p>Of course, you can search Google for a way to calculate the orbit or get a planet’s position. However, to understand this, you need to know about basic astronomy terms.</p>\n<p>My friend said that we already learned about these terms when we were the first grade of high school. but unfortunately I could not remember these things…</p>\n<p>So I decided I would study again from the beginning and started google hard.</p>\n<h2>Let’s look at simple astronomical terms</h2>\n<p>Before looking at the Kepler 6 elements, let’s take a look at some simple terms used in astrophysics.</p>\n<h3>Aphelion, Perihelion</h3>\n<p>Kepler said, all orbits of planets are ellipse. That means that every orbit has 2 focal points.</p>\n<p>Usually, the star is positioned at the focal point of one of these. And aphelion means the most far focal point of the star, and perihelion means the most near focal point from the star.</p>\n<p>If the orbit is a parabolic orbit, aphelion is infinite, there will be only one perihelion on the orbit.</p>\n<h3>The celestial sphere</h3>\n<p>It means an imaginary sphere with a random radius around the observer.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 247px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 124.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAwABAgQF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB9smPMWzWHz9gy1tql//EABoQAAMBAQEBAAAAAAAAAAAAAAABAhEQITL/2gAIAQEAAQUCdCo0oWcrRJp+8n6P/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BYk//xAAXEAADAQAAAAAAAAAAAAAAAAABESAh/9oACAEBAAY/ArOuf//EABwQAQADAAIDAAAAAAAAAAAAAAEAETEhURBBkf/aAAgBAQABPyEg42IPfcDWwHuK2QyGly4FZ44yADT5HJt4/9oADAMBAAIAAwAAABDMxzz/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAgz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxBOzRn/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMWFxELHw/9oACAEBAAE/EKQx9JbRouFx4UvITFcOTbE7jtxCAAo4jhYQdBVTLESDRjEIC1Hzc2deR//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"the celestial sphere\" title=\"\" src=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg\" srcset=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/0913d/the-celestial-sphere.jpg 160w,\n/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg 247w\" sizes=\"(max-width: 247px) 100vw, 247px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3>The celestial equator</h3>\n<p>The equator of the planet is projected onto the ecliptic. In the celestial sphere in the image above, the vertical line corresponds to thecelestial equator.</p>\n<h3>The ecliptic</h3>\n<p>The orbital surface of the planet is projected onto the ecliptic. The Earth’s ecliptic is tilted from the equator by about the Earth’s axis of rotation (23.5 degrees.</p>\n<h3>Right Ascension, Declination</h3>\n<p>Right ascension is measured in the direction that the star moves along the equator of the celestial sphere based on the vernal equinox point, and the unit is hours and minutes (1 hour is 15 degrees).</p>\n<p>Declination is the angle measured from the celestial sphere’s equatorial plane to the star when the north of the celestial sphere is designated as <code class=\"language-text\">+</code> and the south as <code class=\"language-text\">-</code>, and it always has a value between +90 and -90.</p>\n<p>For reference, the vernal equinox on the celestial sphere has both the right ascension and declination being <code class=\"language-text\">0</code>.</p>\n<h3>Ecliptic longitude, Ecliptic latitude</h3>\n<p>Ecliptic longitude and ecliptic latitude are the same concept as the right ascension and declination, but the reference plane is the ecliptic plane, not the equatorial plane of the planet.</p>\n<h3>Orbital node, Ascending node, Descending node</h3>\n<p>Orbital node is the point where the orbital surface of the celestial body and the reference plane meet. The reference plane may vary by definition, and in the solar system, the reference plane is the orbital plane of the Earth.</p>\n<p>Ascending node means that the astronomical object passes the reference plane to the north, and Descending node means the astronomical object passes the reference plane to the south.</p>\n<h2>Kepler 6 elements</h2>\n<p>Now, let’s look at the Kepler 6 element that determines the shape, size, and direction of the orbit.</p>\n<h3>Semi-major axis</h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/18c739abac106732c5daf91effd1103d/00597/semi-major-axis.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB35QB/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFhABAQEAAAAAAAAAAAAAAAAAAIEg/9oACAEBAAE/IUTH/9oADAMBAAIAAwAAABBgz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAAMAAAAAAAAAAAAAAAEAESEQMUH/2gAIAQEAAT8QG7xNqWnp2Cp2Iw4//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"semi major axis\" title=\"\" src=\"/static/18c739abac106732c5daf91effd1103d/c08c5/semi-major-axis.jpg\" srcset=\"/static/18c739abac106732c5daf91effd1103d/0913d/semi-major-axis.jpg 160w,\n/static/18c739abac106732c5daf91effd1103d/cb69c/semi-major-axis.jpg 320w,\n/static/18c739abac106732c5daf91effd1103d/c08c5/semi-major-axis.jpg 640w,\n/static/18c739abac106732c5daf91effd1103d/00597/semi-major-axis.jpg 678w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Since the orbit of a planet is elliptical, it is defined as a semi-major axis and a semi-minor axis, not a radius.</p>\n<p>Semi-major axis refers to a point farthest from the center of the orbit on the orbit, and Semi-minor axis means a point closest to the center of the orbit on the orbit.</p>\n<p>The difference between these and the aphelion and the perihelion is that the point of measurement is the center of the orbit, not the star.</p>\n<h3>Eccentricity</h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVR42qWVvYvTYBzHv2l7aZOnbZo06fW8qCDccJXqKs4OgiLcUHR0cBIcfENu6iQK4iCCi8LtB7eJuIrQyb9CEHETzz1+f3mes8nlUhN84JuXPs2H3/sDAF1qzahNdYxs4C739gZ672zH7JfJ1qyLGOAtAryAwhwNFFYSUi6qLaUvAnoCD7uI+DygWhmgBRyuL6HyXrrcvxezLMJcPCX4GfwlWCCfzwBf/mVpDmgZ6XUfDoGj1OJ0Xe4BXzcJb9WxMA9OUou7jO8IN0DgwuGP4n6jDtCwYCUGPGeM3UcYq1sQmECHtYBJ1vXlamAHG96ehECA39y6FtpUjwqNvHd891kN3QfXQ11O1S30qYhSVHOf4r1zAMS/0I0mL1m3WwtJUDsT9zzwyE3eAwGWxKj1nnuHF5ik2zdP89/esdrMW5hoS6KyWM6R1uWpBbA5vTY9h/DTRhpbTOxVwDCb5Wy2L4G1Sbc/OIi3r2xvITiIdZ/HjnHbOcllf4XLst/+McEYd3YIS/orXT6WFMmsk1HnZxrf3jCWpJz/KDG0S5NSUjYDKReRhtG9fXbOvatRSXHXKmzgue/hjYQjCYDvqlZhI5OM2QxN9VCNglfo6zFWr/XyU0eGA/uYd07sZM0MB+v/xlc6yZMm8HusoavHlyoM2N3CgG2Yqe1UGbAOs9Dgx/3ipD6qsWREqQpnCoFTAqSuHnOAFg6pFBZVhBlvfR5Ocdoytmkd14jPMzb/66E+JtdVZu8kybf9P8qYk5p9WHxjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"eccentricity\" title=\"\" src=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png\" srcset=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/69538/eccentricity.png 160w,\n/static/6f85397f2e1f0b3d470fea6c6afa5c6b/72799/eccentricity.png 320w,\n/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png 440w\" sizes=\"(max-width: 440px) 100vw, 440px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Eccentricity is the value of how distorted the ellipse is. In general, the eccentricity <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span></span> is defined as follows.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>e</mi><mo>=</mo><msqrt><mrow><mn>1</mn><mo>−</mo><mi>k</mi><mfrac><msup><mi>b</mi><mn>2</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mfrac></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">e = \\sqrt{1-k\\frac{b^2}{a^2}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.44em;vertical-align:-0.7406em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6994em;\"><span class=\"svg-align\" style=\"top:-4.4em;\"><span class=\"pstrut\" style=\"height:4.4em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4171em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.6594em;\"><span class=\"pstrut\" style=\"height:4.4em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:2.48em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"2.48em\" viewBox=\"0 0 400000 2592\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M424,2478\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl0 -0c4,-6.7,10,-10,18,-10 H400000\nv40H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M1001 80\nh400000v40h-400000z\"></path></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7406em;\"><span></span></span></span></span></span></span></span></span></span></div>\n<p>In the above definition, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> is semi-major axis and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> is semi-minor axis. However, the eccentricity used in the Kepler orbit is slightly different.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>e</mi><mo>=</mo><msqrt><mrow><mn>1</mn><mo>+</mo><mfrac><mrow><mn>2</mn><mi>E</mi><msup><mi>L</mi><mn>2</mn></msup></mrow><mrow><msub><mi>m</mi><mtext>red</mtext></msub><msup><mi>α</mi><mn>2</mn></msup></mrow></mfrac></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">e = \\sqrt{1+\\frac{2EL^2}{m_\\text{red}\\alpha^2}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.04em;vertical-align:-1.1156em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.9244em;\"><span class=\"svg-align\" style=\"top:-5em;\"><span class=\"pstrut\" style=\"height:5em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4171em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">red</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.8844em;\"><span class=\"pstrut\" style=\"height:5em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:3.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"3.08em\" viewBox=\"0 0 400000 3240\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M473,2793\nc339.3,-1799.3,509.3,-2700,510,-2702 l0 -0\nc3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM1001 80h400000v40H1017.7z\"></path></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1156em;\"><span></span></span></span></span></span></span></span></span></span></div>\n<p>The solution of this formula, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span></span>, is called the orbit eccentricity.</p>\n<p>In the above definition, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span> is the total orbital energy, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span> is the angular momentum, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mrow><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">m_{red}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is the converted mass, and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> is the coefficient of the central force of the inverse square law.</p>\n<p>The inverse square law means that a magnitude of a force is inversely proportional to the square of a distance. In this case, “force” means gravity.</p>\n<p>However, I’m going to be using orbital data with orbital eccentricity, so I don’t really need to do this. It’s okay that just know the degree to which the general eccentricity formula differs from the orbital eccentricity.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 212px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 112.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAUEAQP/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtOZTNLxEPSG0H/8QAGhAAAwEBAQEAAAAAAAAAAAAAAQIDBBETMf/aAAgBAQABBQLTUmk+rEfKpzWjPRYEtOwf3WjShjBEP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIDAAEFAAAAAAAAAAAAAAECABEhMRBBUWGh/9oACAEBAAY/AmQFgRxUWrOd+hN+4rYBLJu4552Uusfk3zP/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRYXH/2gAIAQEAAT8hXQJuz3MFK2VW3L7bl0HJV6h1uFp3M5tL88mNEeoRL0cIAHbaf//aAAwDAQACAAMAAAAQEwc8/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFhcYFBsf/aAAgBAQABPxAlDhY4mu8dQ1zxRYM3be4kE0th8ajEBzDwN9ahBU4WqyVwQA+xErb8RpGUFjBxmO1cgLHs56I+BEy64n//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"짤\" title=\"\" src=\"/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg\" srcset=\"/static/68ee7ca2b63f32445afe5c63a2526b87/0913d/skip.jpg 160w,\n/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg 212w\" sizes=\"(max-width: 212px) 100vw, 212px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>The eccentricity of the Kepler orbit can be expressed in the following four forms.</p>\n<hr>\n<ul>\n<li>Circle orbit: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">e = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></span></li>\n<li>Elliptical orbit: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>&#x3C;</mo><mi>e</mi><mo>&#x3C;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">0 &#x3C; e &#x3C; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6835em;vertical-align:-0.0391em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>Parabolic orbit: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">e = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>Hyperbolic orbit: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>></mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">e > 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n</ul>\n<hr>\n<p>The eccentricity of the Earth’s orbit is about <code class=\"language-text\">0.0167</code>, which is almost circular. Mercury, which has the highest eccentricity of all the solar system planets, has a value of <code class=\"language-text\">0.2056</code>, which causes Mercury to receive twice as much solar radiation when in perihelion as in aphelion.</p>\n<p>In fact, Pluto, who had an eccentricity of ‘0.248’, was the boss of this district, but as you all know, this poor friend was expelled from the solar system.<small>(adios…)</small></p>\n<p>Comets have a wide variety of eccentricities. Periodic comets usually have values from <code class=\"language-text\">0.2</code> to <code class=\"language-text\">0.7</code>, but comets orbiting very distorted have an eccentricity close to <code class=\"language-text\">1</code>.</p>\n<p>For example, Halley comet has an eccentricity of ‘0.967’, and its orbit is so distorted that it takes 76 years to orbit once. And Halley Comet’s next approach is 2061.</p>\n<h3>Inclination</h3>\n<p>It is the slope between the star’s ecliptic plane and the orbit. If the Inclination exceeds <code class=\"language-text\">90</code>, this means that the object is orbiting in the opposite direction to the object with Inclination 0-90.</p>\n<h3>Longitude of Ascending Node</h3>\n<p>It means the right ascension to the point where the orbit crosses the ecliptic plane of the planet as the orbit passes from south(-) to north(+).</p>\n<h3>Argument of periapsis</h3>\n<p>The angle from the perihelion to the ascending node determines the direction of the ellipse in the orbital plane. In other words, it means the declination from ascending node to perihelion.</p>\n<h3>Perihelion passage time</h3>\n<p>The time at which the planet passed the perihelion of orbit.</p>\n<p>I will try to make orbit of some planets with coding in <a href=\"/2017/05/03/calculate-orbit-2\">next post</a>.</p>","fields":{"slug":"20170503-calculate-orbit-1en","path":"/2017/05/03/calculate-orbit-1/en/","lang":"en"},"frontmatter":{"title":"[Calculating celestial orbit with JavaScript] What is Kepler 6 elements?","date":"2017-05-03","categories":["Programming","Graphics"],"tags":["orbit of planets","orbit","Kepler orbital equation","Kepler 6 elements","JavaScript","ThreeJS","Tutorial"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/1cda5/thumbnail.jpg 80w,\n/static/746a090a9954b09cea8d75079269697d/b1a47/thumbnail.jpg 160w,\n/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg 320w,\n/static/746a090a9954b09cea8d75079269697d/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/3e5ca/thumbnail.webp 80w,\n/static/746a090a9954b09cea8d75079269697d/b72f1/thumbnail.webp 160w,\n/static/746a090a9954b09cea8d75079269697d/fc5c5/thumbnail.webp 320w,\n/static/746a090a9954b09cea8d75079269697d/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/23110/thumbnail.jpg 750w,\n/static/746a090a9954b09cea8d75079269697d/da421/thumbnail.jpg 1080w,\n/static/746a090a9954b09cea8d75079269697d/a2093/thumbnail.jpg 1366w,\n/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/6858b/thumbnail.webp 750w,\n/static/746a090a9954b09cea8d75079269697d/f5547/thumbnail.webp 1080w,\n/static/746a090a9954b09cea8d75079269697d/29310/thumbnail.webp 1366w,\n/static/746a090a9954b09cea8d75079269697d/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"cdaa1c4a-3da0-5f44-ab08-59709658e623","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\">데이터 정의하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%9C%EA%B0%84-%EC%84%A4%EC%A0%95%EA%B3%BC-%EA%B6%A4%EB%8F%84-%EC%9A%94%EC%86%8C-%EA%B3%84%EC%82%B0%ED%95%98%EA%B8%B0\">시간 설정과 궤도 요소 계산하기</a></p>\n<ul>\n<li><a href=\"#%EB%B6%80%EA%B6%A4%EB%8F%84-%EC%9A%94%EC%86%8C-%EA%B3%84%EC%82%B0%ED%95%98%EA%B8%B0\">부궤도 요소 계산하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%96%89%EC%84%B1%EC%9D%98-%EC%9C%84%EC%B9%98-%EB%8F%84%EC%B6%9C%ED%95%98%EA%B8%B0\">행성의 위치 도출하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 실제 궤도의 모양과 크기, 위치, 방향을 정의하고 JavaScript코드로 작성을 해보려고 한다. 실제 어플리케이션을 작성할 때는 TypeScript를 사용하였으나, 편의상 JavsScript ES6로 포스팅을 진행한다. 궤도를 구하는 방법은 저번 포스팅의 용어 정리에서 언급했던 케플러 6요소를 이용하면 된다. 데이터 정의하기 지구의 궤도 데이터는 다음과 같다. 먼저 프로퍼티에 들어있는 값은 천문학에서의 역기점인 2000년 1월 1일 정오, 즉 때 측정된 궤도의 케플러 6요소들을 의미한다. 그…","html":"<p>이번 포스팅에서는 <a href=\"/2017/05/03/calculate-orbit-1\">저번 포스팅</a>에 이어 실제 궤도의 모양과 크기, 위치, 방향을 정의하고 JavaScript코드로 작성을 해보려고 한다. 실제 어플리케이션을 작성할 때는 TypeScript를 사용하였으나, 편의상 JavsScript ES6로 포스팅을 진행한다.</p>\n<p>궤도를 구하는 방법은 <a href=\"/2017/05/03/calculate-orbit-1\">저번 포스팅</a>의 용어 정리에서 언급했던 케플러 6요소를 이용하면 된다.</p>\n<h2>데이터 정의하기</h2>\n<p>지구의 궤도 데이터는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">AU</span> <span class=\"token operator\">=</span> <span class=\"token number\">149597870</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">EARTH_ORBIT</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">base</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">1.00000261</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">e</span><span class=\"token operator\">:</span> <span class=\"token number\">0.01671123</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">i</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.00001531</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">o</span><span class=\"token operator\">:</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">l</span><span class=\"token operator\">:</span> <span class=\"token number\">100.46457166</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">lp</span><span class=\"token operator\">:</span> <span class=\"token number\">102.93768193</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">cy</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">0.00000562</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">e</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.00004392</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">i</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.01294668</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">o</span><span class=\"token operator\">:</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">l</span><span class=\"token operator\">:</span> <span class=\"token number\">35999.37244981</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">lp</span><span class=\"token operator\">:</span> <span class=\"token number\">0.32327364</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>먼저 <code class=\"language-text\">base</code>프로퍼티에 들어있는 값은 천문학에서의 역기점인 2000년 1월 1일 정오, 즉 <code class=\"language-text\">J2000</code>때 측정된 궤도의 케플러 6요소들을 의미한다.</p>\n<p>그리고 <code class=\"language-text\">cy</code>프로퍼티에 있는 값들은 1세기당 궤도 요소들의 변화량이다. <code class=\"language-text\">a</code>는 장반경, <code class=\"language-text\">e</code>는 이심률, <code class=\"language-text\">i</code>는 기울기, <code class=\"language-text\">o</code>는 승교점 적경, <code class=\"language-text\">l</code>은 평균 경도, <code class=\"language-text\">lp</code>는 근일점 경도를 의미한다.</p>\n<p>이 중 장반경의 경우 태양과 지구 사이의 거리를 의미하는 AU 단위로 선언되어있기 때문에 1AU를 km로 환산한 값인 <code class=\"language-text\">149597870</code>를 곱해줘야 한다.</p>\n<p>문제는 이 데이터에는 케플러 6요소 중 <code class=\"language-text\">근일점 편각</code>과 <code class=\"language-text\">근일점 통과시각</code>이 없다는 점이다.</p>\n<p>먼저 근일점 편각은 이미 주어진 근일점 경도와 승교점 적경을 사용하여 계산할 수 있으며, 근일점 통과 시각은 어차피 궤도 계산에 필요한 평균근점이각(Mean anomaly)을 구할 때 필요한 것인데 평균근점이각을 구할 때는 근일점 통과 시각보다 근일점 경도와 평균 경도를 사용하는 방법이 훨씬 간단하기 때문에 오히려 편해진 상황이다.</p>\n<h2>시간 설정과 궤도 요소 계산하기</h2>\n<p>참고로 천문학에서는 우리가 평소 사용하는 그레고리력이 아닌 율리우스력을 사용하는데, 이건 기원전 4713년 1월 1일 월요일 정오를 기점으로 계산하는 것이기 때문에 현재 시점인 서기 2017년까지의 날짜를 다루기에는 자릿수가 너무 커진다. 그래서 이번 작업에는 1976년 IAU(국제천문연맹)에서 결정한 J2000을 사용하는 것이다.</p>\n<p>이제 날짜 요소들을 선언해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DAY</span> <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">YEAR</span> <span class=\"token operator\">=</span> <span class=\"token number\">365.25</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CENTURY</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> <span class=\"token constant\">YEAR</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">J2000</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2000-01-01T12:00:00-00:00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> epochTime <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">-</span> <span class=\"token constant\">J2000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Date객체끼리 연산하면 값이 ms로 나오기 때문에 1000으로 나눠서 초 단위로 나오게끔 환산해준다</span>\n<span class=\"token keyword\">let</span> tDays <span class=\"token operator\">=</span> epochTime <span class=\"token operator\">/</span> <span class=\"token constant\">DAY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 일수로 환산</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=</span> tDAys <span class=\"token operator\">/</span> <span class=\"token constant\">CENTURY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 몇 세기나 지났는지 환산</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 글을 작성하고 있는 지금은 2017년 5월 3일 22시 27분이다. 계산 결과 <code class=\"language-text\">J2000</code>으로부터 약 <code class=\"language-text\">6332.06028991</code>일이 지났으며 <code class=\"language-text\">0.17336236</code>세기가 지났다는 것을 알 수 있었다.</p>\n<p>그럼 이제 아까 선언한 데이터 중 지구의 한 세기당 변화량에 방금 구한 <code class=\"language-text\">0.17336236</code>을 곱한 후 궤도의 기본 요소 값에 더해주면 <code class=\"language-text\">J2000</code>이후 오늘 이 시점의 궤도 요소 값이 나올 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> keys <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> computed <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">time</span><span class=\"token operator\">:</span> epochTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ncomputed <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">carry<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> variation <span class=\"token operator\">=</span> <span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>cy <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  carry<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>base<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>variation <span class=\"token operator\">*</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> carry<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\n  a: 149598406.2031184\n  e: 0.016703615925039474\n  i: -0.0022597770311920135\n  l: 6341.400827688619\n  lp: 102.9937254119609\n  o: 0.0\n*/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>부궤도 요소 계산하기</h3>\n<p>이제 현재 시점 기준의 궤도 요소 값을 구했으면 부궤도 요소를 구할 차례이다.</p>\n<p>가장 먼저 케플러 6요소 중 하나지만 우리의 데이터에는 없는 근일점 편각을 구해보도록 하자. 근일점 편각 <code class=\"language-text\">w</code>는 근일점 경도에서 승교점 적경을 뺀 값이다. 하지만 지구의 승교점 적경 <code class=\"language-text\">o</code>는 <code class=\"language-text\">0.0</code>이므로 근일점 경도와 근일점 편각이 일치하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">computed<span class=\"token punctuation\">.</span>w <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>lp <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>o<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// w = 102.9937254119609 - 0.0 = 102.9937254119609</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>다음은 <a href=\"https://ko.wikipedia.org/wiki/%ED%8F%89%EA%B7%A0_%EA%B7%BC%EC%A0%90_%EC%9D%B4%EA%B0%81\" target=\"_blank\" rel=\"nofollow\">평균근점이각</a>을 구해야한다. 평균근점이각은 어떤 물체가 공전 속도와 공전 주기를 유지한 채 정확한 원 궤도로 옮겨간다고 가정했을 때 물체와 궤도 근점간의 각거리를 의미한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 260px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 99.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADP0lEQVR42oWUe1caSRDF+f6fJH/s5mx2IxrlLSiiJgKCIKDI+yXPgZmBmf5tdQ8xJGfN9jl15lV9+1bdWxPi/5a7hd4ESi9wXUVNprDdgeOA5wU5Sr2lh94F0kneDlXrQLQAqbJECTVfobeb6I7hefAT6LuAamOD76McF7IVSD+Y0IBm7YTdTQ2lD2v0fs9Qg6nd7sdzewSJe/x0mXWvz2g2YfpQw4sL2OUjRPKo1vAdQKGu8g2od4Ne7d9tsiXmJ1c85q74+PcHns9SqGSRdeIbFJuosfTW9w4A9z1QMykpWTKMVFbKHLxiuzbl9Dmcl8lnzvkWjZr7h7M4sZNPrBbzYK/tEHJchbXxsdYeRjNdXqwImYowEOBkmZfzLJ+P/qT9JclDPEE7dkEhmeTqOk2jUWU+nwaArkuo9zylWXmlWRpjL9aimpSaq8FtHSXB7RPVVJpUJkIudkohHKZa+MpTq850MsReLpn1e+wmwnK2JLRaLvCVDxsB225FVYdf2+C4Gxgv6WWuuQ3/QyWW4DmW5urLCZ/Df3AVPoK4WKrUJLRcLPHUXlltYgF9M6xeqzXbuxp29JbUaZhm4oJyKkkxHsO9uGcSyTKQICmWEvuErJXFVgyM1G/cr/2lLaOBa12UWIVEiXbykqPIJ8qncbY3VSKJY86O/2J2J98vq8KwKIJKyY6AWJYVVCj9MNeRNPlCFE7eB4bOyKalRbffphpJiFj39AtFcjdZnJ0QWUt1ja4ZhJCSPi3m82CUrDVqq5m6YpmKsYaxz2M3KF82WIk73OgdfK2bZ0NAj+i+TcaHm/WazWYTfJSeYkRyULlqwFT3Vi/ZZKeLbGJ541Wv3gnm/UDIUCBmwNLTp0gEoDIxGrQ/CkQy4eMm8qyOc3KQ+PSxbQAP19uk7EQIU7q2ioQ/ecXvD/Z/nb1QwnTXGrBq9X6w/mX9NMtbUdYw1b0REK9aY1eU0l5a5t5rPJm85Wol3lXm8O/x7t9Gl71YLExPTaIGN7FnqQHFDf5ekN8yPFy2bZuNlgjmiEc1gGalr9PplMFwyGAwoNPt0mq1TP5/Ah7S1/e6DTrZkjK1X/UhnU6H8WTCaDiir0Hl+Tvgv1wd7wlZv0wTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mean anomaly\" title=\"\" src=\"/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png\" srcset=\"/static/51cda683e15b56138af5597de73d956e/69538/mean-anomaly.png 160w,\n/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png 260w\" sizes=\"(max-width: 260px) 100vw, 260px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>즉 위 그림에서 실제 물체의 궤도는 회색 궤도이나, 저 궤도를 원이라고 가정한 빨간 궤도에서의 각거리를 구하는 것이다.</p>\n<p>저 두 궤도의 공전 주기는 같기 때문에 같은 지역을 같은 시간 동안 지나간다. 근데 그림을 보면 원 궤도는 각 호들의 넓이가 일정하지만 타원 궤도인 회색 궤도는 일정하지 않다.</p>\n<p>타원 궤도를 도는 물체는 초점과의 거리에 따라 각속도가 변하기 때문이다. 그래서 좀 더 구하기 쉬운 평균근점이각을 먼저 구한 후 타원 궤도에 이를 적용하게 된다. 이러한 접근 방법이 가능한 이유는 케플러 제2법칙인 <a href=\"https://ko.wikipedia.org/wiki/%EC%BC%80%ED%94%8C%EB%9F%AC%EC%9D%98_%ED%96%89%EC%84%B1%EC%9A%B4%EB%8F%99%EB%B2%95%EC%B9%99\" target=\"_blank\" rel=\"nofollow\">면적속도 일정</a>의 법칙 때문이다.</p>\n<p>평균근점이각을 구하는 공식은 여러 개가 있으나 필자는 이미 주어진 근일점 경도와 평균 경도값을 가지고 평균근점이각을 구하는 공식을 사용하려고 한다.</p>\n<p>평균근점이각 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span></span>은 평균 경도 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span>과 근일점 경도 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span>의 차로 나타내어 질 수 있다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>M</mi><mo>=</mo><mi>l</mi><mo>−</mo><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">M = l-\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span> <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>l <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>lp\n<span class=\"token comment\">/* M = 6341.42938740066 - 102.99372566842652 =  6238.435661732234 */</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>평균근점이각까지 구했다면 이제는 <a href=\"https://ko.wikipedia.org/wiki/%ED%8E%B8%EC%8B%AC%EC%9D%B4%EA%B0%81\" target=\"_blank\" rel=\"nofollow\">편심이각(Eccentric anomaly)</a>을 구할 차례이다. 이때 앞으로의 계산을 원활하게 하기 위해 Digree 단위로 표현되어있는 값들을 모두 Radian으로 변경해주겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DEG_TO_RAD</span> <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 149598406204.91275</span>\ncomputed<span class=\"token punctuation\">.</span>i <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -0.000039441031811489665</span>\ncomputed<span class=\"token punctuation\">.</span>o <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.0</span>\ncomputed<span class=\"token punctuation\">.</span>w <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1.7975796293754245</span>\ncomputed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span> <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 108.8812424710587</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>편심이각은 타원 카플러 궤도를 따라 움직이는 물체의 위치를 결정하는 중요한 궤도 요소이다. 그림으로 보면 더 직관적으로 이해하기가 쉽다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 598px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADWElEQVR42mNgwAD/GePr73OEFj7iBGH7+Psc6PJAgokBH6ivr2fySzrC6552TdK94JqkR+4tURh2zbgg5pJ9Xcop75K4cdoZLqiBDAgai4tAiqEGsNvb72dBU8BYDxSzB7raN++uuFnKNhk+GS0hvIaGMoQyMxAEEM02UVuUjH2n+/t1/ucFWUZIA+NkUwbhCdYccrN1GMSnaDFIgNgzjRn4QSq06v+z2ZV+VHUv/67gnXlJEBQ8mMYADVklwyDUb86m2ezFYVUVyG/UYc8ps1CDQRiE2935FepDhczanBlMc/wrbbvtw3QSjN1cgVq5AiqeCIPCGMPQ0khe1bQ8QbnQei02XF4Nqu6WDyuN9ZpmzmDcZGxYXS/NIAN0DJNtwQNJUISiaEloFpRNqxeUA8c4UBHI1SBcz1APTh5OwMhwyztrnFgvpxTYrSTmUHvHutU8WXyRMoNKvb2/gFXpaymM8Iwv51dIqxKRhIYDStJwy7qt4l24WTq9ikG6vn4/S1hOs4tt1TXJ/QwMLAtUGJRTQicp6nX/50ZJGiAipUJELalcxBBZzD7/vIBz5kOl0FUMzCBLGf7/Z/QtWKAdXJKnZ1//nwPk7XYTE0P/hB2yaOH0nzF0VShzYqWEVla9Fg8swXsXP9fxyP3HnpbGwJpULSBvb/+fxT3/ukJ4ubmCb85ORZC69fIMAgWeOdY4cg0DW3IFu8p/oLddM+6IWYavtgKGES9QnAkUzqGh/5ld8t7J5dczCAQUrVNzy7mvYRixS6reJdoizTiNFWyIP9BboOh3zTgqZpH8QSi0fKacT2KAvUXUVmt503gDt5wrZn7Zy6TCSqONvLKuSLjl3TEOzC2TCS6ZoKdp126oG7bYIi+41XkVAwMklYASqVPyJXGIoRfE7NOeikirWznq+/crJG34z+te9UoytPKZaETlHvGAiv/Cvnn/xQPLFsvE1Ner8EvaGGuFLpSr8UzTXSTOwI0vr4lCsSAQC0AxKBGLADGPsSO7sqo+pzSQDcIM7TbexnAvwyIFgUH5DJjIxcWBNkoCSxgQLQ8sxtgVGBj4gAWDFpt3opiShqmUMIg9U5KBq9AtzZGBXBAaysCc2yohCuP3aYhIpoQ2K5JjFiNSamBCtgDmMwCDwQuB3rpoFgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"eccentric anomaly\" title=\"\" src=\"/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png\" srcset=\"/static/33f77c9a2fce957c60f7cfb7522b088a/69538/eccentric-anomaly.png 160w,\n/static/33f77c9a2fce957c60f7cfb7522b088a/72799/eccentric-anomaly.png 320w,\n/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png 598w\" sizes=\"(max-width: 598px) 100vw, 598px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>위 그림에서 <code class=\"language-text\">P</code>는 궤도를 돌고 있는 행성위 위치를 나타내며, 그에 따른 편심이각을 <code class=\"language-text\">E</code>로 나타내고 있다. 그리고 타원의 중심은 <code class=\"language-text\">C</code>이고 타원의 초점은 <code class=\"language-text\">F</code>이다.</p>\n<p>이때 편심이각 <code class=\"language-text\">E</code>는 타원의 중심에 꼭지점 하나를 찍고 궤도 장반경과 같은 길이의 빗변 <code class=\"language-text\">a</code>를 그은 후, 장반경 <code class=\"language-text\">e</code>와 수직하면서도 <code class=\"language-text\">P</code>에 닿도록\n선분을 그어 만들어진 직각삼각형에서 관찰되는 각이다.</p>\n<p>평균근점이각과 마찬가지로 편심이각도 여러 개의 정의로 나타내어질 수 있는데, 필자는 이미 평균근점이각을 구했기 때문에 평균근점이각으로부터 유도되는 공식을 사용하겠다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mrow><mi>M</mi><mo>+</mo><mi>e</mi><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>M</mi></mrow></mrow><mrow><mn>1</mn><mo>−</mo><mi>e</mi><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>M</mi></mrow></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">E = \\frac{M+e{sinM}}{1-e{cosM}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1297em;vertical-align:-0.7693em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3603em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">cos</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">in</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>여기서 <code class=\"language-text\">e</code>는 이심률, <code class=\"language-text\">M</code>은 평균근점이각을 의미한다. 그러나 한가지 슬픈 사실은 여기서 나오는 E값이 근사값이라는 것이다. 그렇기 때문에 보통 이 공식을 통해 나온 해는 <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method\" target=\"_blank\" rel=\"nofollow\">Newton-Raphson method</a>를 사용하여 오차를 줄여줘야한다.</p>\n<p><code class=\"language-text\">Newton-Raphson method</code>는 미분 가능한 함수의 해를 찾는 방법인데, 계속적인 급수 형태로 계산되어지며 계산을 반복할수록 더 정확한 근사치를 뱉어준다고 보면 된다.</p>\n<p>값의 오차는 이심률이 높을 수록 더 커지게 되는데, 데이터 상 지구의 이심률은 <code class=\"language-text\">0.0167703</code>정도니까 오차율이 그렇게 크진 않을 것이라고 예상된다. 그럼 코드를 작성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getEccentricity</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> x0<span class=\"token punctuation\">,</span> maxCount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> x2 <span class=\"token operator\">=</span> x0<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> maxCount<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x <span class=\"token operator\">=</span> x2<span class=\"token punctuation\">;</span>\n    x2 <span class=\"token operator\">=</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">kepler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> <span class=\"token constant\">M</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">M</span> <span class=\"token operator\">+</span> e <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> e <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ncomputed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span> <span class=\"token operator\">=</span> <span class=\"token function\">getEccentricity</span><span class=\"token punctuation\">(</span><span class=\"token function\">kepler</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* E =108.8962365500302 */</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>행성의 위치 도출하기</h2>\n<p>이렇게 특정 날짜를 기준으로 행성의 위치를 알아내기 위해 필요한 값들을 모두 구했다.</p>\n<p>이 값들이 있다면 근일점 쪽을 X축으로 하는 황도좌표평면에 대한 직각 좌표 값을 계산할 수 있으며, 이 좌표 값의 유클리드거리 <code class=\"language-text\">r</code>과 항성과 궤도의 근일점 기준으로 어느 각도에 행성이 위치하고 있는지를 나타내는 진근점이각 <code class=\"language-text\">v</code>를 통해 행성의 위치를 표현할 수 있다.</p>\n<p>즉, 행성은 항성으로부터 <code class=\"language-text\">r</code>만큼의 거리만큼 떨어져 있고 궤도의 근일점으로부터 <code class=\"language-text\">v</code>만큼 돌아간 위치에 존재하고 있다는 것이다. 이렇게 거리랑 각만 알면 3D Scene내에서의 로컬좌표를 정의할 수 있게된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">RAD_TO_DEG</span> <span class=\"token operator\">=</span> <span class=\"token number\">180</span> <span class=\"token operator\">/</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>pos <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>e <span class=\"token operator\">*</span> computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>v <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">atan2</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>r <span class=\"token operator\">/=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>v <span class=\"token operator\">*=</span> <span class=\"token constant\">RAD_TO_DEG</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n  r = 1.0081888306835929 AU\n  v = 120.17208256525967 도\n*/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 이 포스팅 작성 시점을 기준으로 지구는 태양으로부터 <code class=\"language-text\">1.0081...</code>AU 떨어진 위치에 지구 궤도의 근일점으로부터 약 <code class=\"language-text\">120</code>도 돌아간 곳에 위치하고 있다는 결과를 얻을 수 있다.</p>\n<h2>마치며</h2>\n<p>사실 제일 마지막 <code class=\"language-text\">pos</code>를 구하는 공식과 <code class=\"language-text\">진근점이각</code>을 구하는 공식은 아직 이해가 잘 안된다. 하지만 중요한 것은 이런 공식을 사용해서 내가 원하는 뭔가를 만들어 볼 수 있다는 것이 아닐까 생각한다.</p>\n<p>이 공식들을 사용하여 필자가 만든 시뮬레이터는 <a href=\"https://solar-system-ts.herokuapp.com/\" target=\"_blank\" rel=\"nofollow\">여기</a>에서 확인해볼 수 있고, 전체 소스는 <a href=\"https://github.com/evan-moon/solarsystemts\" target=\"_blank\" rel=\"nofollow\">Solarsystem 프로젝트 깃허브 레파지토리</a>에서 확인해볼 수 있다.</p>\n<p>이상으로 행성 위치 게산하기 포스팅을 마친다.</p>","fields":{"slug":"20170503-calculate-orbit-2","path":"/2017/05/03/calculate-orbit-2/","lang":"ko"},"frontmatter":{"title":"[JavaScript로 천체 구현하기] 행성의 움직임을 구현해보자","date":"2017-05-03","categories":["프로그래밍","그래픽스"],"tags":["궤도 구현하기","케플러 궤도 방정식","케플러 6요소","JavaScript","자바스크립트","WebGL","ThreeJS","수학","튜토리얼"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/1cda5/thumbnail.jpg 80w,\n/static/746a090a9954b09cea8d75079269697d/b1a47/thumbnail.jpg 160w,\n/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg 320w,\n/static/746a090a9954b09cea8d75079269697d/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/3e5ca/thumbnail.webp 80w,\n/static/746a090a9954b09cea8d75079269697d/b72f1/thumbnail.webp 160w,\n/static/746a090a9954b09cea8d75079269697d/fc5c5/thumbnail.webp 320w,\n/static/746a090a9954b09cea8d75079269697d/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/23110/thumbnail.jpg 750w,\n/static/746a090a9954b09cea8d75079269697d/da421/thumbnail.jpg 1080w,\n/static/746a090a9954b09cea8d75079269697d/a2093/thumbnail.jpg 1366w,\n/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/6858b/thumbnail.webp 750w,\n/static/746a090a9954b09cea8d75079269697d/f5547/thumbnail.webp 1080w,\n/static/746a090a9954b09cea8d75079269697d/29310/thumbnail.webp 1366w,\n/static/746a090a9954b09cea8d75079269697d/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"b1fa5f6e-421e-504e-a6fc-917056d05d0c","tableOfContents":"<ul>\n<li><a href=\"#%EC%A4%91%EB%A0%A5%EC%9D%B4%EB%9E%80\">중력이란?</a></li>\n<li><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-%EA%B5%AC%ED%98%84%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C\">그래서 구현은 어떻게?</a></li>\n</ul>","excerpt":"이번 포스팅에서는 만유인력의 법칙을 이용하여 중력을 구현해보려고 한다. 지표면 상에서 한 방향으로 작용하는 중력이 아니라 랜덤한 질량을 가진 여러 개의 물체를 랜덤한 좌표에 뿌려놓고 서로의 운동에 어떻게 간섭하는 지를 살펴볼 수 있는 시뮬레이션을 만들어 볼 예정이다. 중력이란? 먼저 이 포스팅은 물리학도가 아닌 필자같이 수학에 익숙하지 않은 사람을 대상으로 한 포스팅이기에 먼저 중력의 개념부터 제대로 짚고 넘어가려고 한다. 뉴턴께서 가라사대, 중력이란 두 개의 질량을 가진 물체가 서로 끌어당기는 힘이라고 했다. 사실 뉴턴은 만유인…","html":"<p>이번 포스팅에서는 만유인력의 법칙을 이용하여 중력을 구현해보려고 한다. 지표면 상에서 한 방향으로 작용하는 중력이 아니라 랜덤한 질량을 가진 여러 개의 물체를 랜덤한 좌표에 뿌려놓고 서로의 운동에 어떻게 간섭하는 지를 살펴볼 수 있는 시뮬레이션을 만들어 볼 예정이다.</p>\n<h2>중력이란?</h2>\n<p>먼저 이 포스팅은 물리학도가 아닌 필자같이 <strong>수학에 익숙하지 않은 사람</strong>을 대상으로 한 포스팅이기에 먼저 중력의 개념부터 제대로 짚고 넘어가려고 한다.</p>\n<p>뉴턴께서 가라사대, 중력이란 두 개의 질량을 가진 물체가 서로 끌어당기는 힘이라고 했다.</p>\n<p>사실 뉴턴은 만유인력의 법칙이라는 공식을 만들면서 어떻게 중력이 작용하는지는 알아냈지만 왜 중력이 생기는 것인지는 몰랐다. 아무래도 “신께서만 아실 일이지…”하고 넘어간 듯 싶다.\n그리고 뉴턴은 질량을 가진 물체가 중력을 가진다고 했었는데 이는 빛은 질량이 없기 때문에 중력에 영향을 전혀 받지않는다는 얘기가 된다.</p>\n<p>하지만 현대에 와서 밝혀진 사실에 의하면 빛도 중력에 영향을 받는다. 영화 인터스텔라에서도 보지 않았던가? <small>(100% 확실한 시각화 묘사라고는 할 수 없지만 이론물리학자인 킵 손이 일반상대성이론을 계산해서 3D로 시각화했다고 한다.)</small></p>\n<p>블랙홀 같이 중력이 어마어마한 곳에서는 이 현상이 눈에 띄게 관찰되는데, 이를 중력렌즈효과라고 부른다.</p>\n<center>\n  <img src=\"/59d205c9bdb4c3be36f94bb8b25cddf1/gravity-lens.gif\" alt=\"gravity lens\" width=\"100%\">\n  <br>\n  <small>블랙홀 뒤를 지나는 빛의 휘어짐</small>\n  <br>\n  <br>\n</center>\n<p>중력은 1915년 아인슈타인의 일반상대성이론에서 에너지에 의한 시공간의 휨으로 정의되게 된다. 그래서 시공간 상의 물체의 질량이 급격하게 증가하거나 감소할 때 시공간에 파동이 생기게 되는데 이것이 바로 작년 초에 발견된 중력파이다.</p>\n<p>이렇게 발생된 중력파는 빛과 같은 속도로 움직인다고 한다. 그래서 갑자기 태양계에서 태양이 뿅!하고 사라지게 되면 태양 주위를 공전하던 행성들이 바로 궤도를 이탈해서 날아가는 게 아니다.</p>\n<p>예를 들어서 지구같은 경우에는 태양에서 나온 빛이 지구까지 약 8분 20초 정도 걸리니까 태양이 갑자기 사라져도 8분 정도는 없어진 태양이 있던 위치를 그대로 공전하는 것이다.\n그러다가 8분 후 마지막에 태양에서 나온 빛이 지구에 도달하는 순간 지구는 궤도를 이탈할 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/434fed24de68a2e16a016af2e5c94459/29d31/gravity.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeHeFkA//8QAGBABAAMBAAAAAAAAAAAAAAAAAQACEBH/2gAIAQEAAQUCqTho5//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAABEDERQVH/2gAIAQEAAT8hRbHg0O4Z2P/aAAwDAQACAAMAAAAQQw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAxEKH/2gAIAQEAAT8QY05wyqSrJPuipy4zWKTz/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"gravity\" title=\"\" src=\"/static/434fed24de68a2e16a016af2e5c94459/c08c5/gravity.jpg\" srcset=\"/static/434fed24de68a2e16a016af2e5c94459/0913d/gravity.jpg 160w,\n/static/434fed24de68a2e16a016af2e5c94459/cb69c/gravity.jpg 320w,\n/static/434fed24de68a2e16a016af2e5c94459/c08c5/gravity.jpg 640w,\n/static/434fed24de68a2e16a016af2e5c94459/29d31/gravity.jpg 700w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>큰 질량을 가진 물체일수록 시공간을 더 많이 휘게 만든다</small>\n</center>\n<p>그렇다고 만유인력의 법칙이 틀렸다는 것이 아니라, 상대성이론은 만유인력의 법칙이 놓친 점을 보완해준 것에 더 가깝다. 사실 중력이 아주 큰 공간<small>(아주 많이 휘어진 공간)</small>이 아니라면 만유인력의 법칙으로도 충분히 설명이 가능하다.</p>\n<p>예를 들어 지구는 전체적으로 보면 커다란 구이지만 지구에 사는 우리가 주변을 돌아보면 이게 구인지 평면인지 알수가 없다. 이와 같이 휘어진 정도가 아주아주 작아 유클리드 공간과 거의 유사한 공간을 유사-유클리드 공간이라고 한다. 그리고 이런 유사-유클리드 공간에서는 만유인력의 법칙만 적용해도 충분하다. 아폴로 우주선을 달에 보낼때도 만유인력의 법칙만으로 충분했다고 한다.</p>\n<p>결론적으로 중력을 구하는 것은 시공간의 곡률을 구하는 것으로 볼 수 있지만, 사실 필자가 만드려고 하는 간단한 시뮬레이션은 굉장히 작은 유사-유클리도 공간 안에서의 상황을 시뮬레이팅하는 것이고, 현실에 적용되는 프로그램이 아니라 말 그대로 시뮬레이션이기 때문에 만유인력의 법칙만으로도 충분히 구현이 가능하다.</p>\n<h2>그래서 구현은 어떻게?</h2>\n<p>일단 설명을 쉽게 하기 위해 랜덤한 질량을 가진 2개의 물체를 랜덤한 좌표에 랜덤한 방향과 속도를 가지게 설정한 후 그냥 공간 상에 뿌린다고 가정하자.\n이 물체 2개의 중력의 영향을 계산하는 것은 그다지 어렵지 않다. 여기서 만유인력의 법칙이 등장한다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>F</mi><mn>12</mn></msub><mo>=</mo><mo>−</mo><mi>G</mi><mfrac><mrow><msub><mi>m</mi><mn>1</mn></msub><msub><mi>m</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∣</mi><msup><mrow><msub><mi>r</mi><mn>12</mn></msub><mi mathvariant=\"normal\">∣</mi></mrow><mn>2</mn></msup></mrow></mfrac><mover accent=\"true\"><msub><mi>r</mi><mn>12</mn></msub><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">F_{12} = -G{\\frac{m_1 m_2}{\\vert{r_{12}\\vert}^2}}\\hat{r_{12}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2016em;vertical-align:-1.094em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1076em;\"><span style=\"top:-2.156em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.094em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></div>\n<p>이 공식은 물체1이 물체2에게 가하는 중력 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span></span>를 구하는 공식이다. 이때 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span></span>는 <a href=\"https://ko.wikipedia.org/wiki/%EC%A4%91%EB%A0%A5_%EC%83%81%EC%88%98\" target=\"_blank\" rel=\"nofollow\">중력 상수</a>를 의미하고, 이 중력 상수는 <code class=\"language-text\">6.67384 * 10^-11</code>로 정해져 있다.</p>\n<p>그리고 분자의 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">m_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>과 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">m_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>는 각 물체의 질량이고 분모인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mn>12</mn></msub></mrow><annotation encoding=\"application/x-tex\">r_{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>은 이 물체들 간의 <a href=\"https://ko.wikipedia.org/wiki/%EC%9C%A0%ED%81%B4%EB%A6%AC%EB%93%9C_%EA%B1%B0%EB%A6%AC\" target=\"_blank\" rel=\"nofollow\">유클리드거리</a>를 의미한다. 그리고 마지막에 곱해주는 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span>은 물체1에서 물체2를 바라보고 있는 단위벡터를 의미한다.</p>\n<p>이 식의 포인트는 분모에 물체 간의 거리가 들어가있고 분자에 두 물체의 질량이 들어가있다는 것이다.</p>\n<p>이는 두 물체 간의 거리가 멀어질수록 분모가 커지니까 결과 값이 작게 나오고, 두 물체의 질량이 커질수록 분자가 커지니까 결과 값이 크게 나온다는 것을 의미하며, 간단하게 말해서 중력은 <strong>두 물체 간 거리에 반비례하고 두 물체 간 질량의 곱에 비례한다</strong>고 할 수 있다.</p>\n<p>혹시 선형대수학을 안배우신 분들이 있을 지 모르니 간단하게 설명하면, 벡터라는 놈은 공간 상에서의 방향을 의미한다는 정도만 알아두셔도 좋을 것 같다. 지금 우리가 계산하려고 하는 공간은 3차원 공간이기 때문에 벡터는 <code class=\"language-text\">(x, y, z)</code> 3개의 좌표값을 가지게 된다.</p>\n<p>우리가 어릴 때 배웠던 만유인력의 법칙은</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>F</mi><mo>=</mo><mi>G</mi><mfrac><mrow><msub><mi>m</mi><mn>1</mn></msub><msub><mi>m</mi><mn>2</mn></msub></mrow><msup><mi>r</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding=\"application/x-tex\">F = G\\frac{m_1 m_2}{r^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.7936em;vertical-align:-0.686em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1076em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>의 꼴을 가지는데 이 공식의 결과는 <code class=\"language-text\">1</code> <code class=\"language-text\">5.2</code> <code class=\"language-text\">1204</code>같은 스칼라 값을 가지게 된다. 스칼라는 어떠한 물리량만을 의미하는 것이기 때문에 중력이 얼마나 센지는 알 수 있어도 중력의 방향까지는 알 수가 없다.</p>\n<p>그래서 힘의 방향을 표현해줘야 우리가 이 공식을 제대로 사용할 수 있고, 그렇기 때문에 마지막에 벡터를 곱해주는 것이다.</p>\n<p>그리고 공식 맨 앞에 <code class=\"language-text\">-1</code>이 붙어있는 이유는 벡터의 방향 때문이다. 마지막에 우리가 곱한 벡터는 물체1에서 물체2로 향하는 방향이다. 하지만 중력은 내 쪽으로 끌어당기는 힘이지 밀어내는 힘이 아니기 때문에 따라서 힘의 방향은 물체2에서 물체1로 향해야 한다. 그래서 위 공식에서 <code class=\"language-text\">-1</code>을 다시 곱해주는 것이다.</p>\n<p>조금 복잡해보이지만 막상 코드로 구현하면 간단하다. 필자는 <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"nofollow\">ThreeJS</a>를 사용하여 벡터 계산을 진행하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Vector3 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'three'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">calcGravity</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o1<span class=\"token punctuation\">,</span> o2<span class=\"token punctuation\">,</span> <span class=\"token constant\">G</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// o1의 위치벡터와 o2의 위치벡터의 차를 구해 o1 -> o2를 바라보는 벡터를 구한다.</span>\n  <span class=\"token keyword\">let</span> force <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subVectors</span><span class=\"token punctuation\">(</span>o1<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">,</span> o2<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 위에서 구한 방향벡터의 길이를 구한 후 절대값으로 변환해준다.</span>\n  <span class=\"token keyword\">const</span> distance <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>force<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 위에서 구한 방향벡터를 단위벡터로 바꿔준다.</span>\n  force <span class=\"token operator\">=</span> force<span class=\"token punctuation\">.</span><span class=\"token function\">normalize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 중력 스칼라 구하기</span>\n  <span class=\"token keyword\">const</span> strength <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token constant\">G</span> <span class=\"token operator\">*</span> o1<span class=\"token punctuation\">.</span>mass <span class=\"token operator\">*</span> o2<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>distance <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 방향벡터에 위에서 구한 중력 스칼라를 곱해준다</span>\n  force <span class=\"token operator\">=</span> force<span class=\"token punctuation\">.</span><span class=\"token function\">multiplyScalar</span><span class=\"token punctuation\">(</span>strength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> force<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 여기서 나온 값을 계산 대상이 되는 현재 물체의 위치값에 계속 더해주면 물체는 그 방향으로 운동하게 될 것이다. 근데 문제는 실질적으로 우리는 2개만 뿌릴 것이 아니라는 것이다.</p>\n<p>저 만유인력의 법칙은 2개의 물체 간의 중력 만을 생각하고 계산하고 있다. 그렇다면 여러 개의 물체의 중력이 서로에게 영향을 주고 받는 것도 계산할 수 있을까?</p>\n<p>아쉽게도 이런 <a href=\"https://ko.wikipedia.org/wiki/%EB%8B%A4%EC%B2%B4_%EB%AC%B8%EC%A0%9C\" target=\"_blank\" rel=\"nofollow\">다체문제</a>는 수리물리학분야에서 손꼽히는 난제이며, 1887년에 앙리 푸엥카레가 삼체 이상 문제의 일반해를 구하는 것이 불가능하다고 했다. 그래서 우리는 저 위에 있는 이체문제의 만유인력의 법칙을 사용해서 중력을 근사적으로 구하는 수 밖에 없다.</p>\n<p><a href=\"/2017/05/06/gravity-via-js-2\">다음 포스팅</a>에서는 간단한 중력 모델 샘플을 코드로 구현해볼 예정이다. 이상으로 JavaScript로 중력 구현하기 첫번째 포스팅을 마친다.</p>","fields":{"slug":"20170506-gravity-via-js-1","path":"/2017/05/06/gravity-via-js-1/","lang":"ko"},"frontmatter":{"title":"[JavaScript로 중력 구현하기] 1. 중력이란 무엇일까?","date":"2017-05-06","categories":["프로그래밍","그래픽스"],"tags":["중력 구현하기","중력","Gravity","JavaScript","자바스크립트","WebGL","수학","ThreeJS","튜토리얼"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#5878b8","images":{"fallback":{"src":"/static/6c72a52042fa8bad71e5e927ca2d86d6/3a812/thumbnail.jpg","srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/1cda5/thumbnail.jpg 80w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/b1a47/thumbnail.jpg 160w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/3a812/thumbnail.jpg 320w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/3e5ca/thumbnail.webp 80w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/b72f1/thumbnail.webp 160w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/fc5c5/thumbnail.webp 320w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#5878b8","images":{"fallback":{"src":"/static/6c72a52042fa8bad71e5e927ca2d86d6/84600/thumbnail.jpg","srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/23110/thumbnail.jpg 750w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/84600/thumbnail.jpg 860w","sizes":"100vw"},"sources":[{"srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/6858b/thumbnail.webp 750w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/10c9e/thumbnail.webp 860w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"29f9f758-8c2e-589a-8f50-a67ccbd16866","tableOfContents":"<ul>\n<li><a href=\"#%ED%95%84%EC%9A%94%ED%95%9C-%EC%83%81%EC%88%98-%EA%B0%92%EB%93%A4-%EC%84%A0%EC%96%B8\">필요한 상수 값들 선언</a></li>\n<li><a href=\"#mover-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%84%A0%EC%96%B8\">Mover 클래스 선언</a></li>\n<li><a href=\"#mover-%EA%B0%9D%EC%B2%B4%EB%93%A4-%EB%A0%8C%EB%8D%94%ED%95%98%EA%B8%B0\">Mover 객체들 렌더하기</a></li>\n<li><a href=\"#mover-%EA%B0%9D%EC%B2%B4%EB%93%A4-%EC%9A%B4%EB%8F%99-%EC%8B%9C%ED%82%A4%EA%B8%B0\">Mover 객체들 운동 시키기</a></li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 중력을 직접 JS로 구현해보려고 한다. 개발환경은 JavaScript ES7, babel, Webpack, Three.js을 사용하였다. 필요한 상수 값들 선언 먼저 프로그램에서 사용할 상수 값들 부터 선언하겠다. 여기서 원래는 의 작은 값을 가지는 중력 상수 를 으로 설정했는데, 그 이유는 필자가 만들 시뮬레이션에 등장하는 물체들의 질량이 너무 작기 때문이다. 실제 중력 상수를 그대로 적용하면서도 중력의 영향이 눈에 보일 정도가 되려면 질량도 행성급으로 커야 하는데, 그러면 계산이 너무 힘들…","html":"<p>이번 포스팅에서는 <a href=\"/2017/05/06/gravity-via-js-1\">저번 포스팅</a>에 이어 중력을 직접 JS로 구현해보려고 한다. 개발환경은 JavaScript ES7, babel, Webpack, Three.js을 사용하였다.</p>\n<h2>필요한 상수 값들 선언</h2>\n<p>먼저 프로그램에서 사용할 상수 값들 부터 선언하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> initOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">framerate</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">G</span><span class=\"token operator\">:</span> <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 내 맘대로 중력상수</span>\n  <span class=\"token constant\">START_SPEED</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 초기화 시 물체들의 속도</span>\n  <span class=\"token constant\">OBJECT_COUNT</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 초기화 후 렌더 될 물체 개수</span>\n  <span class=\"token constant\">TRACE_LENGTH</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 물체의 이동 궤적 길이</span>\n  <span class=\"token constant\">MIN_MASS</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 물체들의 최소 질량</span>\n  <span class=\"token constant\">MAX_MASS</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 물체들의 최대 질량</span>\n  <span class=\"token constant\">DENSITY</span><span class=\"token operator\">:</span> <span class=\"token number\">0.15</span> <span class=\"token comment\">// 물체들이 렌더되는 밀도</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">SPHERE_SIDES</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기서 원래는 <code class=\"language-text\">6.6742e-11</code>의 작은 값을 가지는 중력 상수 <code class=\"language-text\">G</code>를 <code class=\"language-text\">250</code>으로 설정했는데, 그 이유는 필자가 만들 시뮬레이션에 등장하는 물체들의 질량이 너무 작기 때문이다.</p>\n<p>실제 중력 상수를 그대로 적용하면서도 중력의 영향이 눈에 보일 정도가 되려면 질량도 행성급으로 커야 하는데, 그러면 계산이 너무 힘들어지기 때문에 물체의 질량을 줄이고 중력 상수는 늘려주는 방식으로 조정했다.</p>\n<p><code class=\"language-text\">MASS_FACTOR</code>는 나중에 렌더할 때 물체의 질량에 비례하도록 구의 크기를 설정하려고 하는데 질량 값들이 <code class=\"language-text\">400-3000</code>이다보니까 구의 부피가 너무 커질 것 같아서 그걸 보정하기 위해 선언한 상수이다.</p>\n<p>일종의 압축률 비슷한 느낌으로 나중에 구의 크기를 정의할 때 물체의 질량에 <code class=\"language-text\">MASS_FACTOR</code>를 곱해줘서 일정한 비율로 크기를 줄일 예정이다.</p>\n<p>이 포스팅은 ThreeJS를 설명하기 위한 포스팅이 아니므로 <code class=\"language-text\">Scene</code>과 <code class=\"language-text\">Renderer</code>의 선언 및 초기화 등에 대해서는 생략하고 지나가겠다.</p>\n<h2>Mover 클래스 선언</h2>\n<p>자 그럼 이제 실제 움직일 놈들을 구현하자. 이름을 Object로 하고 싶었지만 알다시피 JS에서 Object라는 이름은 Build-in Object가 이미 가지고 있다. 그래서 다른 이름을 고심하다가 그냥 <code class=\"language-text\">Mover</code>라고 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">SPHERE_SIDES</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/constants'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n Vector3<span class=\"token punctuation\">,</span> SphereGeometry<span class=\"token punctuation\">,</span> Line<span class=\"token punctuation\">,</span>\n MeshPhongMaterial<span class=\"token punctuation\">,</span> PointLight<span class=\"token punctuation\">,</span> Mesh<span class=\"token punctuation\">,</span> Geometry\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'three'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Mover</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">mass<span class=\"token punctuation\">,</span> velocity<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> scene</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>uid <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">mover-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location <span class=\"token operator\">=</span> location<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity <span class=\"token operator\">=</span> velocity<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>acceleration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">=</span> mass<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>alive <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SphereGeometry</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SPHERE_SIDES</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SPHERE_SIDES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vertices <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>line <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">.</span>material<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>basicMaterial <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MeshPhongMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n     <span class=\"token literal-property property\">specular</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n     <span class=\"token literal-property property\">shininess</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mesh <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Mesh</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>geometry<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>basicMaterial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mesh<span class=\"token punctuation\">.</span>castShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mesh<span class=\"token punctuation\">.</span>receiveShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScene <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">Mover</code>클래스로 생성된 객체는 <code class=\"language-text\">constructor</code> 실행 시 넘겨받은 랜덤한 질량값과 속도, 위치 값을 가지고 있다. 그리고 가속도를 의미하는 <code class=\"language-text\">acceleration</code> 값을 초기화 해준다. 가속도는 어떠한 방향으로 움직이는 속도이므로 3개의 원소를 가진 벡터로 선언해 주었다.</p>\n<p>그리고 <code class=\"language-text\">Mover</code>끼리 충돌 판정이 나면 <code class=\"language-text\">Mover</code> 두개를 하나로 합쳐서 더 큰 질량을 가진 <code class=\"language-text\">Mover</code>로 만들 예정이기 때문에 <code class=\"language-text\">alive</code> 멤버 변수를 선언해서 해당 Mover가 죽었나 살았나를 판별할 수 있도록 했다.</p>\n<h2>Mover 객체들 렌더하기</h2>\n<p>이후 <code class=\"language-text\">Scene</code>에는 초기화 시 <code class=\"language-text\">Mover</code>들을 그려주는 로직을 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> movers <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>movers<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>movers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// movers리스트 초기화</span>\n      movers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>mesh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>selectionLight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    movers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span><span class=\"token constant\">MOVER_COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> mass <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span><span class=\"token constant\">MIN_MASS</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_MASS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> maxDistance <span class=\"token operator\">=</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span><span class=\"token constant\">DENSITY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> maxSpeed <span class=\"token operator\">=</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span><span class=\"token constant\">START_SPEED</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> velocity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxSpeed<span class=\"token punctuation\">,</span> maxSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxSpeed<span class=\"token punctuation\">,</span> maxSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxSpeed<span class=\"token punctuation\">,</span> maxSpeed<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> location <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxDistance<span class=\"token punctuation\">,</span> maxDistance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxDistance<span class=\"token punctuation\">,</span> maxDistance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>maxDistance<span class=\"token punctuation\">,</span> maxDistance<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 랜덤한 속도, 위치, 질량을 가진 Mover를 생성</span>\n      movers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Mover</span><span class=\"token punctuation\">(</span>mass<span class=\"token punctuation\">,</span> velocity<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Mover가 초기화될 때 만들어진 Mesh, Line, Light 객체를 Scene에 넣는다</span>\n    movers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span><span class=\"token function\">addMover</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>movers <span class=\"token operator\">=</span> movers<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">getRandomize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">min<span class=\"token punctuation\">,</span> max</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>max <span class=\"token operator\">-</span> min<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> min<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 <code class=\"language-text\">Scene</code>은 여러 개의 <code class=\"language-text\">Mover</code>를 담은 리스트인 <code class=\"language-text\">movers</code>를 가지게 되었다. 이제 렌더되는 동안 계산만 하면 끝! 인데…\n전 포스팅에서 말했듯이 여러 개의 물체에 대한 중력을 구하는 다체문제는 해를 구할 수가 없다.</p>\n<p>그래서 <code class=\"language-text\">movers</code>를 순회하며 한번 순회할 때마다 다른 <code class=\"language-text\">Mover</code>들과의 중력을 이체문제로 모두 계산하는 로직을 만들어야한다.</p>\n<h2>Mover 객체들 운동 시키기</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> movers <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>movers<span class=\"token punctuation\">;</span>\n\nmovers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o1<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>o1<span class=\"token punctuation\">.</span>alive<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  movers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o2<span class=\"token punctuation\">,</span> j</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>o1<span class=\"token punctuation\">.</span>alive <span class=\"token operator\">&amp;&amp;</span> o2<span class=\"token punctuation\">.</span>alive <span class=\"token operator\">&amp;&amp;</span> i <span class=\"token operator\">!==</span> j<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// o1 -> o2의 거리</span>\n      <span class=\"token keyword\">const</span> distance <span class=\"token operator\">=</span> o1<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">distanceTo</span><span class=\"token punctuation\">(</span>o2<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// o1, o2의 반지름 r1, r2</span>\n      <span class=\"token keyword\">const</span> r1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>o1<span class=\"token punctuation\">.</span>mass <span class=\"token operator\">/</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token operator\">/</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> r2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>o2<span class=\"token punctuation\">.</span>mass <span class=\"token operator\">/</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token operator\">/</span> <span class=\"token constant\">MASS_FACTOR</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>distance <span class=\"token operator\">&lt;=</span> r1 <span class=\"token operator\">+</span> r2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 둘의 거리가 둘의 반지름의 합 이하면 충돌한 것으로 판정, 두 물체를 합친다</span>\n        o2<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span>o1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 충돌이 아닐 경우 그냥 운동만 시킨다</span>\n        o2<span class=\"token punctuation\">.</span><span class=\"token function\">attract</span><span class=\"token punctuation\">(</span>o1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우선 이런 식으로 전체 <code class=\"language-text\">Mover</code>들을 순회하면서 충돌 판정을 내주었다. <code class=\"language-text\">Mover</code> 클래스의 <code class=\"language-text\">eat</code>메소드는 충돌 판정이 난 두 <code class=\"language-text\">Mover</code>들을 하나로 합치는 로직을 가지고 있으며, <code class=\"language-text\">attract</code> 메소드에는 현재 두 물체의 거리에서의 중력을 측정하고 <code class=\"language-text\">Mover</code>의 가속도에 더해주는 역할을 하고 있다.</p>\n<p>이후 모든 계산이 끝나면 <code class=\"language-text\">Mover</code>의 위치와 크기, 속도, 방향 등을 업데이트 해주었다. <code class=\"language-text\">Gravity</code>클래스의 <code class=\"language-text\">calcGravity</code>메소드는 <a href=\"/2017/05/06/gravity-via-js-1\">저번 포스팅</a>에서 적었던 로직 그대로이다.</p>\n<p><code class=\"language-text\">Mover</code>의 운동에 관련된 메소드들은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Mover</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">mass<span class=\"token punctuation\">,</span> velocity<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> scene</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">otherMover</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> newMass <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> newLocation <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>z <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>z <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> newVelocity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>z <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">+</span> otherMover<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>z <span class=\"token operator\">*</span> otherMover<span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> newMass\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location <span class=\"token operator\">=</span> newLocation<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity <span class=\"token operator\">=</span> newVelocity<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">=</span> newMass<span class=\"token punctuation\">;</span>\n\n    otherMover<span class=\"token punctuation\">.</span><span class=\"token function\">kill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">attract</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">otherMover<span class=\"token punctuation\">,</span> options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> force <span class=\"token operator\">=</span> Gravity<span class=\"token punctuation\">.</span><span class=\"token function\">calcGravity</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> otherMover<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">.</span><span class=\"token constant\">G</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">applyForce</span><span class=\"token punctuation\">(</span>force<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">applyForce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">force</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> f <span class=\"token operator\">=</span> force<span class=\"token punctuation\">.</span><span class=\"token function\">divideScalar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// mover의 가속도에 힘을 적용</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 속도에 가속도 더함</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 위치에 속도 더해서 이동시킴</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span><span class=\"token function\">multiplyScalar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 가속도 초기화</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span><span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// mover의 mesh객체에 위치 적용</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>정리하자면 매 프레임마다 <code class=\"language-text\">movers</code>리스트를 순회하면서 각 <code class=\"language-text\">Mover</code>들간의 중력을 계산하고 가속도를 적용한 후 실제로 <code class=\"language-text\">Mover</code>를 이동시키는 것이다. 전체 소스는 <a href=\"https://github.com/evan-moon/3d-gravity-test\" target=\"_blank\" rel=\"nofollow\">중력 테스트 프로젝트 깃허브 레파지토리</a>에서 확인해볼 수 있다.</p>\n<p>이상으로 JavaScript로 중력 구현하기 포스팅을 마친다.</p>","fields":{"slug":"20170506-gravity-via-js-2","path":"/2017/05/06/gravity-via-js-2/","lang":"ko"},"frontmatter":{"title":"[JavaScript로 중력 구현하기] 2. 코딩하기","date":"2017-05-06","categories":["프로그래밍","그래픽스"],"tags":["중력 구현하기","중력","Gravity","JavaScript","자바스크립트","WebGL","수학","ThreeJS","튜토리얼"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#5878b8","images":{"fallback":{"src":"/static/6c72a52042fa8bad71e5e927ca2d86d6/3a812/thumbnail.jpg","srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/1cda5/thumbnail.jpg 80w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/b1a47/thumbnail.jpg 160w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/3a812/thumbnail.jpg 320w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/3e5ca/thumbnail.webp 80w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/b72f1/thumbnail.webp 160w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/fc5c5/thumbnail.webp 320w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#5878b8","images":{"fallback":{"src":"/static/6c72a52042fa8bad71e5e927ca2d86d6/84600/thumbnail.jpg","srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/23110/thumbnail.jpg 750w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/84600/thumbnail.jpg 860w","sizes":"100vw"},"sources":[{"srcSet":"/static/6c72a52042fa8bad71e5e927ca2d86d6/6858b/thumbnail.webp 750w,\n/static/6c72a52042fa8bad71e5e927ca2d86d6/10c9e/thumbnail.webp 860w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},{"id":"c68bcc72-db35-5172-bab5-748ff5398f1f","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC\">간단한 용어 정리</a></p>\n<ul>\n<li><a href=\"#%EC%9B%90%EC%9D%BC%EC%A0%90aphelion--%EA%B7%BC%EC%9D%BC%EC%A0%90perihelion\">원일점(aphelion) / 근일점(perihelion)</a></li>\n<li><a href=\"#%EC%B2%9C%EA%B5%ACthe-celestial-sphere\">천구(The celestial sphere)</a></li>\n<li><a href=\"#%EC%B2%9C%EA%B5%AC%EC%9D%98-%EC%A0%81%EB%8F%84the-celestial-equator\">천구의 적도(The celestial equator)</a></li>\n<li><a href=\"#%EC%A0%81%EA%B2%BDright-ascension--%EC%A0%81%EC%9C%84declination\">적경(Right Ascension) / 적위(Declination)</a></li>\n<li><a href=\"#%ED%99%A9%EB%8F%84the-ecliptic\">황도(The ecliptic)</a></li>\n<li><a href=\"#%ED%99%A9%EA%B2%BDecliptic-longitude--%ED%99%A9%EC%9C%84ecliptic-latitude\">황경(Ecliptic longitude) / 황위(Ecliptic latitude)</a></li>\n<li><a href=\"#%EA%B6%A4%EB%8F%84-%EA%B5%90%EC%A0%90orbital-node--%EC%8A%B9%EA%B5%90%EC%A0%90ascending-node--%EA%B0%95%EA%B5%90%EC%A0%90descending-node\">궤도 교점(Orbital node) / 승교점(Ascending node) / 강교점(Descending node)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BC%80%ED%94%8C%EB%9F%AC-6%EC%9A%94%EC%86%8C\">케플러 6요소</a></p>\n<ul>\n<li><a href=\"#%EC%9E%A5%EB%B0%98%EA%B2%BDsemi-major-axis\">장반경(Semi-major axis)</a></li>\n<li><a href=\"#%EC%9D%B4%EC%8B%AC%EB%A5%A0eccentricity\">이심률(Eccentricity)</a></li>\n<li><a href=\"#%EA%B8%B0%EC%9A%B8%EA%B8%B0inclination\">기울기(Inclination)</a></li>\n<li><a href=\"#%EC%8A%B9%EA%B5%90%EC%A0%90-%EA%B2%BD%EB%8F%84longitude-of-ascending-node\">승교점 경도(Longitude of Ascending Node)</a></li>\n<li><a href=\"#%EA%B7%BC%EC%9D%BC%EC%A0%90-%ED%8E%B8%EA%B0%81argument-of-periapsis\">근일점 편각(Argument of periapsis)</a></li>\n<li><a href=\"#%EA%B7%BC%EC%9D%BC%EC%A0%90-%ED%86%B5%EA%B3%BC-%EC%8B%9C%EA%B0%81t\">근일점 통과 시각(T)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 태양계 시뮬레이션을 개발하면서 제일 애먹었던 천체의 궤도와 위치 계산에 대해서 알아보려고 한다. 필자는 고등학교 시절 수포자였기 대문에 필자와 같이 수포자였던 분들을 위해 최대한 간단하게 설명하는 것을 목표로 하고 있다. 먼저 궤도를 그리는 방법과 행성의 위치를 추정하는 방법에 대해서는 구글에 널리고 널렸지만, 이를 이해하기 위해서는 기본적인 천문학용어들에 대한 지식이 있어야했다.\n고1 지구과학시간에 배우는 용어들이라는데 필자는 고등학교때 잠만 잤기 때문에 하나도 기억이 나지 않아서 다시 찾아봐야했다. 필자는 천…","html":"<p>이번 포스팅에서는 태양계 시뮬레이션을 개발하면서 제일 애먹었던 천체의 궤도와 위치 계산에 대해서 알아보려고 한다. 필자는 고등학교 시절 수포자였기 대문에 필자와 같이 수포자였던 분들을 위해 최대한 간단하게 설명하는 것을 목표로 하고 있다.</p>\n<p>먼저 궤도를 그리는 방법과 행성의 위치를 추정하는 방법에 대해서는 구글에 널리고 널렸지만, 이를 이해하기 위해서는 기본적인 천문학용어들에 대한 지식이 있어야했다.\n고1 지구과학시간에 배우는 용어들이라는데 필자는 고등학교때 잠만 잤기 때문에 하나도 기억이 나지 않아서 다시 찾아봐야했다.</p>\n<p>필자는 천체물리학과를 나온 것도 아닌 일개 개발자이므로 각각의 용어 정리에 대해서는 틀린 점이 있을 수 있다.</p>\n<h2>간단한 용어 정리</h2>\n<p>본격적으로 케플러 6요소를 알아보기 전에 천체 물리학에서 사용하는 간단한 용어들부터 한번 알아보자.</p>\n<h3>원일점(aphelion) / 근일점(perihelion)</h3>\n<p>행성의 궤도는 타원이기 때문에 초점이 2개이다. 보통 이 중 하나의 초점에 항성이 위치하게 되며, 각각 원일점과 근일점은 항성에서 가장 멀리 떨어지거나 가장 가까운 한점을 의미한다. 포물선 궤도는 원일점이 무한대이므로 근일점만을 가지게 된다.</p>\n<h3>천구(The celestial sphere)</h3>\n<p>관측자를 중심으로 하여 임의의 반지름을 가진 가상적인 구를 의미한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 247px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 124.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAwABAgQF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB9smPMWzWHz9gy1tql//EABoQAAMBAQEBAAAAAAAAAAAAAAABAhEQITL/2gAIAQEAAQUCdCo0oWcrRJp+8n6P/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BYk//xAAXEAADAQAAAAAAAAAAAAAAAAABESAh/9oACAEBAAY/ArOuf//EABwQAQADAAIDAAAAAAAAAAAAAAEAETEhURBBkf/aAAgBAQABPyEg42IPfcDWwHuK2QyGly4FZ44yADT5HJt4/9oADAMBAAIAAwAAABDMxzz/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAgz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxBOzRn/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMWFxELHw/9oACAEBAAE/EKQx9JbRouFx4UvITFcOTbE7jtxCAAo4jhYQdBVTLESDRjEIC1Hzc2deR//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"the celestial sphere\" title=\"\" src=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg\" srcset=\"/static/8eebd9f9cca6cdc9681bf932b90a4f55/0913d/the-celestial-sphere.jpg 160w,\n/static/8eebd9f9cca6cdc9681bf932b90a4f55/1455d/the-celestial-sphere.jpg 247w\" sizes=\"(max-width: 247px) 100vw, 247px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3>천구의 적도(The celestial equator)</h3>\n<p>행성의 적도가 천구에 투영된 선을 말한다. 위 그림의 천구에서 세로선에 해당하는 것이 천구의 적도이다.</p>\n<h3>적경(Right Ascension) / 적위(Declination)</h3>\n<p>이 값들은 천구의 적도를 기준으로 천체의 위치를 나타낸다.</p>\n<p>적경은 춘분점을 기준으로 천구의 적도를 따라 항성이 움직이는 방향으로 측정되며 단위는 시, 분과 같은 시간 단위로 표현한다. 지구는 24시간 동안 360도를 자전하기 때문에 1시간의 적경은 15도의 각도로 환산할 수 있다.</p>\n<p>적위는 천구의 적도를 기준으로 북쪽을 <code class=\"language-text\">+90</code>, 남쪽을 <code class=\"language-text\">-90</code>로 지정했을때 천구의 적도면에서 항성까지 잰 각이며, 항상 <code class=\"language-text\">+90</code>에서 <code class=\"language-text\">-90</code>사이의 값을 가진다.</p>\n<p>천구 상의 춘분점은 적경과 적위가 모두 <code class=\"language-text\">0</code>이다.</p>\n<h3>황도(The ecliptic)</h3>\n<p>행성에서 보기에 항성이 하늘을 1년에 걸쳐 이동하는 경로를 의미한다. 지구의 경우 태양이 1년 동안 이동하는 경로가 된다. 지구의 자전축은 약 23.5도 기울어져있기 때문에 천구의 적도와 황도 또한 지구의 자전축 기울기인 23.5도 만큼 기울어져있다.</p>\n<h3>황경(Ecliptic longitude) / 황위(Ecliptic latitude)</h3>\n<p>적경, 적위와 같은 개념이나, 기준면이 행성의 적도면이 아닌 황도면이다.</p>\n<h3>궤도 교점(Orbital node) / 승교점(Ascending node) / 강교점(Descending node)</h3>\n<p>천체의 궤도는 일반적으로 기준 평면과 기울어져 있다. 이때 기준 평면은 정의에 따라 달라질 수 있는데, 태양계의 경우 황도면을 이야기한다.</p>\n<p>이때 지구의 공전 궤도는 황도면과 일치하기 때문에 황도면을 기준으로 올라가거나 내려간다는 개념이 필요없지만, 만약 궤도가 기울어져있다면 황도면을 기준으로 천체가 황도면보다 올라가는 지점과 내려가는 지점이 발생하게 된다.</p>\n<p>이때 올라간다는 의미는 천체가 황도면을 기준으로 남쪽에서 북쪽으로 통과하는 것이며, 이 지점을 승교점이라고 한다. 반대로 내려간다는 의미는 천체가 황도면을 기준으로 북쪽에서 남쪽으로 통과하는 것이며, 이 지점을 강교점이라고 한다.</p>\n<p>그리고 이렇게 황도면과 천체의 궤도가 만나는 두 점을 궤도 교점이라고 한다.</p>\n<h2>케플러 6요소</h2>\n<p>기본 용어 정리가 되었으면 이제 궤도의 모양과 크기, 방향을 결정하는 케플러 6요소를 알아보자.</p>\n<h3>장반경(Semi-major axis)</h3>\n<p>행성의 궤도는 타원이기 때문에 반지름이 아닌 장반경과 단반경으로 정의한다. 이때 장반경은 궤도 상에서 궤도 중심과 가장 거리가 먼 한 지점을 의미하며, 단반경은 궤도 상에서 궤도 중심과 가장 거리가 가까운 한 지점을 의미한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/18c739abac106732c5daf91effd1103d/00597/semi-major-axis.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB35QB/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFhABAQEAAAAAAAAAAAAAAAAAAIEg/9oACAEBAAE/IUTH/9oADAMBAAIAAwAAABBgz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAAMAAAAAAAAAAAAAAAEAESEQMUH/2gAIAQEAAT8QG7xNqWnp2Cp2Iw4//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"semi major axis\" title=\"\" src=\"/static/18c739abac106732c5daf91effd1103d/c08c5/semi-major-axis.jpg\" srcset=\"/static/18c739abac106732c5daf91effd1103d/0913d/semi-major-axis.jpg 160w,\n/static/18c739abac106732c5daf91effd1103d/cb69c/semi-major-axis.jpg 320w,\n/static/18c739abac106732c5daf91effd1103d/c08c5/semi-major-axis.jpg 640w,\n/static/18c739abac106732c5daf91effd1103d/00597/semi-major-axis.jpg 678w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>원일점, 근일점과의 차이는 측정의 기준이 되는 점이 항성이 아닌 궤도의 중심이라는 것이다. 포물선 궤도나 쌍곡선 궤도는 장반경이 무한대 이므로 단반경만을 가지게 된다.</p>\n<p>다만 케플러 6요소에서는 장반경과 단반경 중 장반경만을 다루고 있는데, 그 이유는 궤도 에너지를 계산할 때는 궤도 자체의 모양보다는 궤도를 형성하는 천체의 평균 거리가 중요하기 때문이다. 장반경은 궤도의 전체 크기를 대표할 수 있지만 단반경은 단지 궤도의 찌그러짐 정도를 나타내는 것 뿐이므로 에너지 계산에 적합한 지표가 아니다.</p>\n<p>그러한 이유로 일반적인 천체역햑에서는 주로 장반경을 사용하며, 케플러 방정식 또한 마찬가지이다.</p>\n<h3>이심률(Eccentricity)</h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVR42qWVvYvTYBzHv2l7aZOnbZo06fW8qCDccJXqKs4OgiLcUHR0cBIcfENu6iQK4iCCi8LtB7eJuIrQyb9CEHETzz1+f3mes8nlUhN84JuXPs2H3/sDAF1qzahNdYxs4C739gZ672zH7JfJ1qyLGOAtAryAwhwNFFYSUi6qLaUvAnoCD7uI+DygWhmgBRyuL6HyXrrcvxezLMJcPCX4GfwlWCCfzwBf/mVpDmgZ6XUfDoGj1OJ0Xe4BXzcJb9WxMA9OUou7jO8IN0DgwuGP4n6jDtCwYCUGPGeM3UcYq1sQmECHtYBJ1vXlamAHG96ehECA39y6FtpUjwqNvHd891kN3QfXQ11O1S30qYhSVHOf4r1zAMS/0I0mL1m3WwtJUDsT9zzwyE3eAwGWxKj1nnuHF5ik2zdP89/esdrMW5hoS6KyWM6R1uWpBbA5vTY9h/DTRhpbTOxVwDCb5Wy2L4G1Sbc/OIi3r2xvITiIdZ/HjnHbOcllf4XLst/+McEYd3YIS/orXT6WFMmsk1HnZxrf3jCWpJz/KDG0S5NSUjYDKReRhtG9fXbOvatRSXHXKmzgue/hjYQjCYDvqlZhI5OM2QxN9VCNglfo6zFWr/XyU0eGA/uYd07sZM0MB+v/xlc6yZMm8HusoavHlyoM2N3CgG2Yqe1UGbAOs9Dgx/3ipD6qsWREqQpnCoFTAqSuHnOAFg6pFBZVhBlvfR5Ocdoytmkd14jPMzb/66E+JtdVZu8kybf9P8qYk5p9WHxjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"eccentricity\" title=\"\" src=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png\" srcset=\"/static/6f85397f2e1f0b3d470fea6c6afa5c6b/69538/eccentricity.png 160w,\n/static/6f85397f2e1f0b3d470fea6c6afa5c6b/72799/eccentricity.png 320w,\n/static/6f85397f2e1f0b3d470fea6c6afa5c6b/48c0e/eccentricity.png 440w\" sizes=\"(max-width: 440px) 100vw, 440px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이심률은 간단히 말하면 타원이 얼마나 찌그러져있는지에 대한 값이다. 기하학적 정의에서 타원의 이심률 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span></span>는</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>e</mi><mo>=</mo><msqrt><mrow><mn>1</mn><mo>−</mo><mfrac><msup><mi>b</mi><mn>2</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mfrac></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">e = \\sqrt{1-\\frac{b^2}{a^2}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.44em;vertical-align:-0.7406em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6994em;\"><span class=\"svg-align\" style=\"top:-4.4em;\"><span class=\"pstrut\" style=\"height:4.4em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4171em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.6594em;\"><span class=\"pstrut\" style=\"height:4.4em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:2.48em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"2.48em\" viewBox=\"0 0 400000 2592\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M424,2478\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl0 -0c4,-6.7,10,-10,18,-10 H400000\nv40H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M1001 80\nh400000v40h-400000z\"></path></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7406em;\"><span></span></span></span></span></span></span></span></span></span></div>\n<p>로 정의할 수 있으며, 이때 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span>는 장반경, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>는 단반경이다. 그러나 케플러 궤도에서 사용하는 사용되는 이심률은 약간 공식이 달라진다.</p>\n<p>일반적인 타원의 이심률을 구하는 공식은 중력이나 에너지와 같은 요소는 고려하지 않은 순전히 기하학적 타원의 찌그러짐 정도만을 나타내는 것이라, 타원 궤도를 형성하는 물체의 운동 에너지와 중력 간의 상호작용을 기반으로 하는 케플러 궤도의 이심률을 구하는 데에는 적합하지 않기 때문이다.</p>\n<p>그래서 케플러 궤도의 이심률을 구할 때는 물체의 운동 에너지, 각운동량 등의 물리적 동역학을 고려하여 계산해야한다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>e</mi><mo>=</mo><msqrt><mrow><mn>1</mn><mo>+</mo><mfrac><mrow><mn>2</mn><mi>E</mi><msup><mi>L</mi><mn>2</mn></msup></mrow><mrow><msub><mi>m</mi><mtext>red</mtext></msub><msup><mi>α</mi><mn>2</mn></msup></mrow></mfrac></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">e = \\sqrt{1+\\frac{2EL^2}{m_\\text{red}\\alpha^2}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.04em;vertical-align:-1.1156em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.9244em;\"><span class=\"svg-align\" style=\"top:-5em;\"><span class=\"pstrut\" style=\"height:5em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4171em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">red</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.8844em;\"><span class=\"pstrut\" style=\"height:5em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:3.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"3.08em\" viewBox=\"0 0 400000 3240\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M473,2793\nc339.3,-1799.3,509.3,-2700,510,-2702 l0 -0\nc3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM1001 80h400000v40H1017.7z\"></path></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1156em;\"><span></span></span></span></span></span></span></span></span></span></div>\n<p>이 공식의 해인 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span></span>를 궤도 이심률이라고 부른다.</p>\n<p>여기서 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>는 물체가 궤도에서 가진 전체 에너지, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span>은 각운동량, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mrow><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">m_{red}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>는 환산 질량을 나타내며, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>는 역제곱 법칙 중심력의 계수이다. 역제곱 법칙이란 어떤 힘의 크기가 거리의 제곱에 반비례하는 것을 가리키는 말이다. 이 경우 어떤 힘이란 바로 중력이 된다.</p>\n<p>하지만 필자는 이심률이 이미 주어진 데이터를 사용할 예정이므로, 사실 굳이 이렇게 까지 계산할 필요가 없다. 그냥 일반적인 이심률 공식과 계산법이 다르다는 정도만 알고 넘어가자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 212px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 112.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAUEAQP/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtOZTNLxEPSG0H/8QAGhAAAwEBAQEAAAAAAAAAAAAAAQIDBBETMf/aAAgBAQABBQLTUmk+rEfKpzWjPRYEtOwf3WjShjBEP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIDAAEFAAAAAAAAAAAAAAECABEhMRBBUWGh/9oACAEBAAY/AmQFgRxUWrOd+hN+4rYBLJu4552Uusfk3zP/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRYXH/2gAIAQEAAT8hXQJuz3MFK2VW3L7bl0HJV6h1uFp3M5tL88mNEeoRL0cIAHbaf//aAAwDAQACAAMAAAAQEwc8/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFhcYFBsf/aAAgBAQABPxAlDhY4mu8dQ1zxRYM3be4kE0th8ajEBzDwN9ahBU4WqyVwQA+xErb8RpGUFjBxmO1cgLHs56I+BEy64n//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"짤\" title=\"\" src=\"/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg\" srcset=\"/static/68ee7ca2b63f32445afe5c63a2526b87/0913d/skip.jpg 160w,\n/static/68ee7ca2b63f32445afe5c63a2526b87/8c7fa/skip.jpg 212w\" sizes=\"(max-width: 212px) 100vw, 212px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>케플러 궤도의 이심률은 다음 4가지의 형태로 나타난다.</p>\n<hr>\n<ul>\n<li>원 궤도: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">e = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></span></li>\n<li>타원 궤도: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>&#x3C;</mo><mi>e</mi><mo>&#x3C;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">0 &#x3C; e &#x3C; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6835em;vertical-align:-0.0391em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>포물선 궤도: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">e = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>쌍곡선 궤도: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>></mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">e > 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n</ul>\n<hr>\n<p>지구의 궤도 이심률은 현재 약 <code class=\"language-text\">0.0167</code>으로 거의 원형에 가깝다. 태양계 행성 중 가장 이심률이 큰 수성은 <code class=\"language-text\">0.2056</code>의 값을 가지고 있고, 이로 인해서 수성은 근일점에서 원일점보다 두 배 정도 태양 복사를 받는다.</p>\n<p>원래는 <code class=\"language-text\">0.248</code>의 값을 가지고 있던 명왕성이 이 분야의 대빵이었지만 지금은 다들 알다시피 퇴출되었다…<small>(아디오스…)</small></p>\n<p>혜성의 경우 이심률이 상당히 다양한 편인데, 보통 주기 혜성들의 경우는 <code class=\"language-text\">0.2</code>에서 <code class=\"language-text\">0.7</code>의 값을 가지며 몇몇 궤도가 매우 찌그러진 혜성들은 거의 <code class=\"language-text\">1</code>에 육박하는 이심률을 가진 것도 있다.</p>\n<p>예를 들어 혜성 중 많이 이름이 알려진 핼리 혜성의 경우 이심률이 <code class=\"language-text\">0.967</code>이며, 궤도가 매우 찌그러져있어서 한번 공전하는데 76년이나 걸린다. 참고로 다음 핼리 혜성의 접근 시기는 2061년이다.</p>\n<h3>기울기(Inclination)</h3>\n<p>항성의 황도면과 궤도 간의 기울기를 의미한다. 기울기가 <code class=\"language-text\">90</code>도를 초과하면 이 물체는 기울기가 0-90인 물체와 반대방향으로 공전하고 있다고 보면 된다.</p>\n<h3>승교점 경도(Longitude of Ascending Node)</h3>\n<p>앞서 언급했듯이 승교점은 천체가 궤도를 돌다가 기준면을 남쪽에서 북쪽으로 통과하는 지점을 의미한다. 이때 승교점은 경도라는 각도로 표현되는데, 이는 춘분점을 기준으로 황도면에 따라 반시계 방향으로 잰 승교점까지의 각도를 나타낸다.</p>\n<p>즉 승교점 경도를 통해 궤도 상 승교점의 위치를 3차원 좌표계에서 정의할 수 있게 된다.</p>\n<h3>근일점 편각(Argument of periapsis)</h3>\n<p>근일점 편각은 타원의 궤도 평면 상에서 승교점을 기준으로 근일점까지의 각도를 나타낸다. 근일점이라는 용어에서 알 수 있듯이 이 각도는 타원의 중심이 아닌 궤도의 중심, 즉 중력의 초점에서 측정한다.</p>\n<p>이 값은 궤도 타원이 황도면과 같은 기준 평면에 대해서 얼마나 회전되어있는지를 나타내는 각도이다. 만약 근일점 편각이 0도라면 승교점과 근일점이 일치하는 것이므로 천체가 항성에 가장 근접하는 순간 승교점을 통과한다는 의미이며, 만약 근일점 편각이 90도라면 가장 근접하는 순간 기준 면에서 북쪽으로 가장 멀리 떨어진 지점에 위치하게 된다는 것을 의미한다.</p>\n<p>정리해보자면, 장반경과 이심률로 궤도의 모양을 정의하고 기울기와 승교점 경도, 근일점 편각을 사용하여 황도면을 기준으로 궤도가 어떻게 놓여져있는지를 정의하는 것이다.</p>\n<h3>근일점 통과 시각(T)</h3>\n<p>행성이 궤도의 근일점을 통과한 시각을 의미한다.</p>\n<h2>마치며</h2>\n<p><a href=\"/2017/05/03/calculate-orbit-2\">다음 포스팅</a>에서는 궤도를 코드로 구현해볼 예정이다. 이상으로 천문학 용어 정리 포스팅을 마친다.</p>","fields":{"slug":"20170503-calculate-orbit-1","path":"/2017/05/03/calculate-orbit-1/","lang":"ko"},"frontmatter":{"title":"[JavaScript로 천체 구현하기] 케플러 6요소 알아보기","date":"2017-05-03","categories":["프로그래밍","그래픽스"],"tags":["궤도 구현하기","케플러 궤도 방정식","케플러 6요소","JavaScript","자바스크립트","WebGL","ThreeJS","튜토리얼"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/1cda5/thumbnail.jpg 80w,\n/static/746a090a9954b09cea8d75079269697d/b1a47/thumbnail.jpg 160w,\n/static/746a090a9954b09cea8d75079269697d/3a812/thumbnail.jpg 320w,\n/static/746a090a9954b09cea8d75079269697d/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/3e5ca/thumbnail.webp 80w,\n/static/746a090a9954b09cea8d75079269697d/b72f1/thumbnail.webp 160w,\n/static/746a090a9954b09cea8d75079269697d/fc5c5/thumbnail.webp 320w,\n/static/746a090a9954b09cea8d75079269697d/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#282838","images":{"fallback":{"src":"/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/23110/thumbnail.jpg 750w,\n/static/746a090a9954b09cea8d75079269697d/da421/thumbnail.jpg 1080w,\n/static/746a090a9954b09cea8d75079269697d/a2093/thumbnail.jpg 1366w,\n/static/746a090a9954b09cea8d75079269697d/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/746a090a9954b09cea8d75079269697d/6858b/thumbnail.webp 750w,\n/static/746a090a9954b09cea8d75079269697d/f5547/thumbnail.webp 1080w,\n/static/746a090a9954b09cea8d75079269697d/29310/thumbnail.webp 1366w,\n/static/746a090a9954b09cea8d75079269697d/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"surviveMarket","totalCount":1,"nodes":[{"id":"af20cde5-dcfd-5b14-81a5-ed5aece5ef64","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%8B%9C%EC%9E%A5%EC%9D%B4%EB%9D%BC%EB%8A%94-%EA%B2%8C%EC%9E%84%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B8%B0%EB%B3%B8%EC%A0%81-%EC%9D%B4%ED%95%B4%EB%8F%84%EB%A5%BC-%EB%86%92%ED%9E%88%EC%9E%90\">시장이라는 게임에 대한 기본적 이해도를 높히자</a></p>\n<ul>\n<li><a href=\"#%EC%8B%9C%EC%9E%A5%EC%97%90-%EC%A0%88%EB%8C%80%EC%A0%81-%EA%B0%91%EA%B3%BC-%EC%9D%84%EC%9D%80-%EC%97%86%EB%8B%A4\">시장에 절대적 갑과 을은 없다</a></li>\n<li><a href=\"#%EC%8B%9C%EC%9E%A5%EC%B0%B8%EC%97%AC%EC%9E%90%EB%93%A4%EC%9D%80-%EB%AA%A8%EB%91%90-%EC%9D%B4%EA%B8%B0%EC%A0%81%EC%9D%B4%EB%8B%A4\">시장참여자들은 모두 이기적이다</a></li>\n<li><a href=\"#customer-centric\">Customer Centric</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%ED%8E%98%EC%85%94%EB%84%90%EC%9D%98-%EB%A7%88%EC%9D%8C%EA%B0%80%EC%A7%90%EC%9D%84-%EA%B0%80%EC%A7%80%EC%9E%90\">프로페셔널의 마음가짐을 가지자</a></p>\n<ul>\n<li><a href=\"#%EC%9A%B0%EB%A6%AC%EC%9D%98-%EA%B3%A0%EA%B0%9D%EB%93%A4%EC%9D%80-%EB%8F%88%EC%97%90-%EB%AF%B8%EC%B3%90%EC%9E%88%EB%8B%A4\">우리의 고객들은 돈에 미쳐있다</a></li>\n<li><a href=\"#%ED%8C%90%EB%A7%A4-%EC%A0%84%EB%9E%B5%EC%9D%84-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EC%9E%90\">판매 전략을 고민해보자</a></li>\n<li><a href=\"#%EC%83%9D%EA%B0%81%EB%B3%B4%EB%8B%A4-%EB%8D%94-%EC%B9%98%EC%97%B4%ED%95%9C-%EB%85%B8%EB%A0%A5%EA%B3%BC-%EA%B3%A0%EB%AF%BC%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4\">생각보다 더 치열한 노력과 고민이 필요하다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 시장 경제에 참여하는 한 명의 플레이어로써 필자가 생각해온 고민들에 대해 한번 담담히 풀어보려고 한다. 지금까지 필자는 개인의 성장과 모티베이션 그리고 철학에 대한 이야기를 많이 해왔지만, 이번 포스팅에서는 지금까지와는 조금 다른 현실적인 이야기를 해보려고 한다. 그저 열심히 하다보면 언젠가 잘 될 것이라는 말보다는 정말 현실적으로 도움이 될 만한 고민을 해볼 수 있는 아젠다를 던져본다. 개발자로써 일을 하다보면 의외로 나보다 경험이 적은 개발자들을 도울 수 있는, 혹은 도와야만 하는 기회를 자주 만날 수 있다.…","html":"<p>이번 포스팅에서는 시장 경제에 참여하는 한 명의 플레이어로써 필자가 생각해온 고민들에 대해 한번 담담히 풀어보려고 한다.</p>\n<p>지금까지 필자는 개인의 성장과 모티베이션 그리고 철학에 대한 이야기를 많이 해왔지만, 이번 포스팅에서는 지금까지와는 조금 다른 현실적인 이야기를 해보려고 한다.</p>\n<p>그저 열심히 하다보면 언젠가 잘 될 것이라는 말보다는 정말 현실적으로 도움이 될 만한 고민을 해볼 수 있는 아젠다를 던져본다.</p>\n<p>개발자로써 일을 하다보면 의외로 나보다 경험이 적은 개발자들을 도울 수 있는, 혹은 도와야만 하는 기회를 자주 만날 수 있다.</p>\n<p>지금까지 필자가 직접 만났거나 연락을 주고 받았던 주니어 분들은 대부분 성장에 목말라 있었고, 필자는 주로 성장의 모티베이션과 꾸준한 노력, 메타인지와 같이 성장에 대한 고찰을 해볼 수 있는 주제를 주로 전달해드렸었다.</p>\n<p>그리고 보상에 대한 질문을 해주시는 분께는 이런 말을 자주 했었다.</p>\n<blockquote>\n<p>성장해서 유능한 개발자가 되면 보상은 자연스럽게 따라와요.</p>\n</blockquote>\n<p>물론 어느 정도는 맞는 말이다. 하지만 일을 잘 한다고 해서 보상이 저절로 생긴다기보다는 좋은 기회가 찾아왔을 때 잡을 수 있는 역량을 보유하는 것에 가깝다. 애초에 일을 잘 하는 것과 돈을 잘 버는 것은 약간은 다른 맥락이다.</p>\n<p>세상에는 꾸준한 노력으로 좋은 실력을 쌓더라도 아무도 알아주지 않아 신입 개발자보다도 적은 보상을 받는 시니어 개발자도 존재하며, 반대로 딱히 프로그래밍 실력이 좋지 않음에도 퍼스널 브랜딩을 통해 높은 보상을 챙겨가는 개발자도 존재한다.</p>\n<p>물론 기본적으로 개발자의 프로그래밍 역량이 좋을수록 좋은 보상을 받을 확률이 높다는 것은 사실이다. 다만 아무리 프로그래밍 역량이 좋다고 해도 가만히 앉아만 있다면 아무도 그 능력을 알아주지 않을 가능성이 높으며, 솔직히 정말 상위 1%의 두각을 나타내는 개발자가 아닌 이상 어느 정도 연차가 차면 프로그래밍 스킬 자체는 도찐개찐인 경우가 대부분이다.</p>\n<p>성실하게 노력하는 사람이 그에 비례하여 보상받는다는 아름다운 스토리는 누군가의 모티베이션이 될 수 있겠지만, 막상 현실을 자세히 들여다보면 슬프게도 그렇지 않은 경우가 더 많다는 것을 알 수 있다.</p>\n<p>그래서 필자는 이 포스팅에서 성장에 대한 이야기보다는 조금 더 현실적인 시장에 대한 이야기를 하려고 한다.</p>\n<h2>시장이라는 게임에 대한 기본적 이해도를 높히자</h2>\n<p>우리가 살고 있는 대한민국은 자본주의체제를 선택한 국가이다. 간단하게 자본주의는 시장 참여자들이 시장 내에서 각자가 가지고 있는 가치들을 교환하며 굴러가는 경제체제라고 할 수 있다.</p>\n<p>즉, 우리 같은 직장인들이 일자리를 구하고 있는 노동시장 또한 기본적으로 노동자가 가진 노동력이라는 재화와 기업이 가진 금전적 재화를 맞바꿈하는 기본원리를 가지고 있다는 것이다.</p>\n<p>어떻게 보면 굉장히 간단하고 명확한 내용이지만, 실제로 우리는 실생활 속에서 이 개념을 자주 잊고는 한다. 우리가 시장이라는 냉정한 게임에서 살아남기 위해 가장 먼저 해야 하는 것은 이 노동시장에 대한 시각 자체를 바꾸는 것이다.</p>\n<p>시장은 구성원들이 각자가 얻을 수 있는 최대의 이익을 위해 의사결정하며 나아가는 게임이다. 시장에서 발생하는 많은 의사결정들을 모델링하고 연구하는 <a href=\"https://ko.wikipedia.org/wiki/%EA%B2%8C%EC%9E%84%EC%9D%B4%EB%A1%A0\" target=\"_blank\" rel=\"nofollow\">게임이론</a>은 많지만 필자는 그 중에서도 <a href=\"https://ko.wikipedia.org/wiki/%EC%A3%84%EC%88%98%EC%9D%98_%EB%94%9C%EB%A0%88%EB%A7%88\" target=\"_blank\" rel=\"nofollow\">죄수의 딜레마</a>라는 게임이 현실과 가장 유사한 모습을 가진다고 생각한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\">상대의 자백</th>\n<th align=\"center\">상대의 침묵</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><strong>나의 자백</strong></td>\n<td align=\"center\">둘 다 3년형</td>\n<td align=\"center\">나는 석방, 상대는 10년형</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>나의 침묵</strong></td>\n<td align=\"center\">나는 10년형, 상대는 석방</td>\n<td align=\"center\">둘 다 1년형</td>\n</tr>\n</tbody>\n</table>\n<p>죄수의 딜레마 게임의 특징은 개인에게는 각자 최선이 될 수 있는 선택을 해도 결과적으로는 최선이 아닐 수 있다는 것이다. 나와 상대 모두 침묵을 선택한다면 둘 다 1년형이라는 결과로 이어지겠지만 내가 침묵을 한 상태일 때 상대방이 자백을 하게 되면 나만 10년형을 살게 될 수도 있는 리스크가 존재한다.</p>\n<p>결국은 양 쪽 모두 상대가 어떤 행동을 취하든 자신에게 큰 이득을 주는 자백을 선택하게 되고 함께 사이좋게 3년형을 살게 되는 것이다.</p>\n<p>이는 마치 핵무기가 없는 것이 범지구적으로는 이로운 행위임이 분명함에도 핵무기를 없애는 선택을 쉽사리 하지 못 하는 상황과도 유사하며, 시장에서 발생하는 수 많은 인터랙션도 결국은 전체의 이익보다는 자신의 이익을 위해 움직이게 되는 경향이 크기 때문에 이와 크게 다르지 않다.</p>\n<p>그럼 어려운 이야기는 이제 접어두고 시장에 대한 시각을 바꾸기 위해 많은 직장인의 관심사인 연봉에 대한 이야기를 먼저 해보도록 하자.</p>\n<h3>시장에 절대적 갑과 을은 없다</h3>\n<p>아마 대부분의 직장인들은 자신의 연봉을 높히고 싶다는 생각을 한번 쯤은 해보았을 것이다. 물론 연봉이 높아진다고 바로 자산이 늘어나 부자가 될 수 있는 것은 아니지만, 확실히 연봉이 오를 수록 내 삶의 질은 눈에 띄게 좋아지니 말이다.</p>\n<p>많은 사람들이 연봉이라는 개념을 막연하게 재직 기간이 늘어나거나 이직을 통해 올릴 수 있는 가치라고 생각하고 있지만 사실 연봉이라는 것은 생각보다 냉정한 시장의 평가를 기반으로 결정된다.</p>\n<p>그러니 연봉을 높히기 위해서는 우선 연봉이라는 것이 그저 일을 오래 한다고 해서 오르는 것이 아니라, 시장에서 결정되는 내 능력과 노동력에 대한 가격이라는 것을 명확히 인지하고 인정해야한다. 우리는 능력과 노동력을 판매하는 대신 구매자인 기업으로부터 연봉이라는 가치를 제공받는 일종의 거래를 하고 있는 것이다.</p>\n<p>결국 자본주의 시장 경제에서 발생하는 모든 인터랙션은 가치와 가치를 교환하는 거래에서부터 출발하며, 결국 판매자인 내가 제공하는 기술력과 노동력의 가치가 높다고 판단될수록 구매자인 기업은 나에게 더 높은 금액을 지불한다.</p>\n<p>필자는 자신의 능력이 전혀 성장하지 않았음에도 불구하고 지금보다 더 높은 연봉을 요구하는 상황은 마치 아무런 개선사항도 없는 물건을 팔면서 내 마진을 더 남기기 위해 소비자에게 더 높은 가격을 쳐달라고 하는 것과 별반 다르지 않다고 생각한다. <small>(별다른 정당성 없이 치킨 가격을 올렸을 때 소비자들의 반응이 어땠는지를 생각해보자)</small></p>\n<p>즉, 시장에서 연봉을 높일 수 있는 가장 기본적인 원칙은 <strong>내가 판매하는 상품인 기술력과 노동력의 가치를 먼저 올린 이후에 딜을 걸어야 한다는 것</strong>이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7e75357bf1d72f21d3f9cf4fcf4753a2/38a65/market.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.24999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVR42q1S2Y7TQBDM//8MLzwgVmh5iAQrJASLNomP+Ai+xzPxFcfHjIvpySbsSiBeGKnkcnuqut3dqwULqnMHfqoh+lrzFmpZcD2L5lJKg5eH4vXQGc1F1xndapQzgirBockQ1oQUOWdgRQHGGOI4huM48DwPaZqCc469u4fjufjZ5kYTaI1/TDDMI1ZyUXj0t3hz9xbv1h/wefMVrc7Wn3qM44hpmlCWJQqd4PpeVRWY4Ai0yf2XNe4+fYSVehjVfKnQ4xF2OrBL9oY/WVvYlm2M8jw3FRKIZxqsYChKBl/EsDIfThHCE9HvCvNOID8JZCeOoheYdBIl1a13SqlXvSRM8/Ss48g6rjnHrCRW+M/nj4ZUzRUvY3/79spQygVF0iKPLiA+z+pZDDOIYRh0bEbf9zcjqVtSJB2YRhETWkitW42DxMEV8C2GwC41P6LIOZhuOk02CAKDKIrMYGhQtm1h82QhDVvsHiO4m8x4DD1NeZiRBDU23wJsv4fIDh3iKEPJSwghzP6RYRiGxpSSNE2jjY/6bov79w94WP9A7FcYz9pwGiVCRxgENtcfGlg7F77vGUNa5izLLiujn2TIOe0lNxr6IwLxgQypJc1xQM3PBsSVWv45Teol3a14r3X9TfcLA1WSOhNpt3QAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"market\" title=\"\" src=\"/static/7e75357bf1d72f21d3f9cf4fcf4753a2/6af66/market.png\" srcset=\"/static/7e75357bf1d72f21d3f9cf4fcf4753a2/69538/market.png 160w,\n/static/7e75357bf1d72f21d3f9cf4fcf4753a2/72799/market.png 320w,\n/static/7e75357bf1d72f21d3f9cf4fcf4753a2/6af66/market.png 640w,\n/static/7e75357bf1d72f21d3f9cf4fcf4753a2/d9199/market.png 960w,\n/static/7e75357bf1d72f21d3f9cf4fcf4753a2/38a65/market.png 1075w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>노동시장의 거래도 근본적으로는 카페에서 아메리카노를 사고 파는 것과 크게 다르지 않다.</small>\n</center>\n<p>물론 노동시장에서의 거래는 판매자인 우리의 정보력과 구매자인 기업의 정보력에 차이가 있는 경우가 많기 때문에 아무런 준비가 되어있지 않은 상태라면 기본적으로 판매자가 불리한 위치에서 거래를 진행하여 양질의 노동력을 시세보다 싼 값에 제공하게 되는 상황에 처하기 쉽다.</p>\n<p>하지만 결국 근본적으로는 이 또한 시장에서 발생하는 거래이기 때문에 각자가 보유한 정보력, 판매하는 상품의 상대적 가치, 수요와 공급, 협상 능력, 시장의 상황과 같은 여러가지 요인에 따라 이러한 위치는 얼마든지 뒤바뀔 수도 있다.</p>\n<p>노동시장에서 기업이 무조건 갑이고 노동자가 무조건 을일 것이라고 생각하는 것과 달리, 실제로는 양질의 노동력과 정보력을 가져 기업과의 거래에서 유리한 위치를 점하는 노동자들 또한 분명 존재한다. 단지 이 정도 능력을 가진 노동자의 비율이 현저히 적기 때문에 마치 항상 불리한 위치일 것이라고 보여지는 것 뿐이다.</p>\n<p>애초에 어떤 사람의 연봉이 높다는 것은 그 사람이 제공하는 노동력의 가치가 그만큼 높고 수요도 많지만 그 수요를 충족시킬 정도의 공급은 부족한 상황이라는 것을 의미한다. 이 정도 역량을 지닌 노동자는 기업의 규모와 상관없이 모든 기업이 채용하고 싶을테니 기업들 간에 경쟁이 붙기도 한다.</p>\n<p>이처럼 양질의 노동력을 제공할 수 있는 노동자들은 시장에서 기업보다 유리한 위치를 점하고 있는 경우가 많기 때문에 이력서를 넣고 면접을 보는 과정보다는 기업의 연략을 받고 커피챗이나 풀링 디너를 통해 기업에 대한 정보를 얻고 마음에 드는 회사로 이직하는 과정을 경험하기도 한다. 결국 노동 시장에서의 절대적인 갑과 을은 없는 것이다.</p>\n<p>이는 일반적인 시장에서 발생하는 거래라고 생각해보면 너무나도 당연한 사실들이지만, 앞서 말한 노동시장의 특징과 더불어 대부분의 노동자가 거래에 임할 때 상대적 약자의 위치인 경우가 많다는 사실로 인해 일반적인 시장과는 약간 다른 시각으로 이 시장을 바라보게 되는 것이다.</p>\n<p>시장에서 살아남기 위한 첫 번째 시각 전환은 스스로를 노비처럼 여기는 자조섞인 마인드를 버리고 내가 기업과 상호평등한 관계에서 거래를 할 수 있는 플레이어가 될 수 있다는 것을 인지하여, 스스로를 생산성있는 고민과 전략을 짤 수 있는 상태로 만드는 것이다.</p>\n<h3>시장참여자들은 모두 이기적이다</h3>\n<p>간혹 뉴스를 보다보면 기업과 노동자가 마치 적처럼 보여지고는 한다. 기업이 제대로 임금을 쳐주지 않아 노조가 파업을 한다던가, 경영진의 Governance가 건전하지 않아 기업이 어려워졌는데 노동자가 해고를 당해 생존권에 위협을 받는다던가 하는 일들은 그렇게 드문 일이 아니니 말이다.</p>\n<p>물론 우리는 노동자의 입장인 경우가 많으니 상대적으로 공감이 덜 되는 기업의 입장보다는 노동자의 입장에 더 감정 이입이 되는 것을 부정할 수는 없다. 하지만 이런 상황들 또한 냉정하게 바라보면 그저 각자의 이익을 위해서 싸우고 있는 게임 참여자들간의 협력과 배신의 연속이라고 볼 수 있다.</p>\n<p>애초에 노조라는 개념 자체가 기업과 평등한 위치에서 거래를 진행하여 노동자들의 이익을 얻기 위해 뭉친 집단이며, 당연히 대부분의 의사결정은 기업이 아닌 노동자들의 이익을 위한 방향으로 진행된다. 반대로 기업 입장에서는 노동자보다는 기업에 이익이 되는 방향으로 의사결정을 진행할 것이다.</p>\n<p>서두에서 이야기했듯이 기본적으로 시장은 모든 구성원이 법이 허락하는 선 안에서 자신의 최대 이익을 위해 이기적으로 행동하는 게임이다. 그러니 시장에서 살아남기 위해서는 선과 악이라는 감정적 판단보다는 상황을 냉정하게 분석하고 최선의 의사결정을 할 수 있는 논리적 판단과 중립적인 시각이 필요하다.</p>\n<p>판매자인 우리는 우리가 가진 능력을 비싼 가격에 팔고 싶겠지만 반대로 구매자인 기업은 최대한 싼 가격에 사고 싶어한다. 이런 사실 또한 일반적인 시장 거래라고 생각해보면 너무나도 당연한 것이며, 비싼 가격을 요구하는 노동자에게 양심없다고 할 이유도 없고 싼 가격을 요구하는 기업이 악덕 기업이라고 할 만한 이유도 없다.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/28f028c4465567d2f13fa16ff2cc7326/8e1fc/carrot.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 103.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgD/2gAMAwEAAhADEAAAAe1Nc5dlQ70LkDf/xAAbEAACAgMBAAAAAAAAAAAAAAAAAQIREBITIf/aAAgBAQABBQLwtCskmzmiMYrFWapH/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQAQEf/aAAgBAwEBPwEyN//EABYRAAMAAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPwEuP//EABkQAAIDAQAAAAAAAAAAAAAAAAABECExEf/aAAgBAQAGPwLHGo4yynFmH//EABwQAAICAwEBAAAAAAAAAAAAAAABETEhcYEQkf/aAAgBAQABPyFxuwVSxsx5doUwfCGzXRNZ3yFafBUkP//aAAwDAQACAAMAAAAQ7DA//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERMeH/2gAIAQMBAT8QRtZF4WFZ/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERMeH/2gAIAQIBAT8QZMQrOmkR/8QAHBABAAMBAAMBAAAAAAAAAAAAAQARMSEQQVHR/9oACAEBAAE/EACiLffu77lK3HHBE3dX6RHdFsVw7y5Usm9p+RCUFvHhIg+wRRTeE//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"carrot\" title=\"\" src=\"/static/28f028c4465567d2f13fa16ff2cc7326/c08c5/carrot.jpg\" srcset=\"/static/28f028c4465567d2f13fa16ff2cc7326/0913d/carrot.jpg 160w,\n/static/28f028c4465567d2f13fa16ff2cc7326/cb69c/carrot.jpg 320w,\n/static/28f028c4465567d2f13fa16ff2cc7326/c08c5/carrot.jpg 640w,\n/static/28f028c4465567d2f13fa16ff2cc7326/8e1fc/carrot.jpg 900w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>어차피 말도 안 되는 금액을 제시하면 자연스럽게 거래 자체가 성사되지 않는다</small>\n  <br>\n  <br>\n</center>\n<p>분명 정보 불균형 등을 이용하여 양질의 인재를 터무니 없는 가격에 후려치거나 처음 계약했던 내용과 다르게 과다한 업무를 부여하는 등의 공정하지 않은 거래를 조장하는 블랙기업들도 존재한다.</p>\n<p>하지만 반대 입장에서 보면 높은 연봉을 받음에도 불구하고 조용한 퇴직과 같은 행위를 하는 것이나 처음 계약 조건에는 없었던 무리한 복지를 요구하는 것, 인터뷰 때 보여줬던 열정적인 모습과 다르게 입사 후 대충 일을 하는 등의 불공정 거래도 존재하기 마련이다.</p>\n<p>이처럼 거래 상대방에 대한 평가는 상대적이기 때문에 절대적인 선이나 절대적인 악은 없다.</p>\n<p>결국은 기업이든 노동자든 시장에서 서로의 이익을 위해 이기적으로 행동하는 평등한 게임 참여자일 뿐이다. 만약 시장에서 노동자의 기본 포지션이 상대적 약자라면 우리는 이를 인정하고 이 포지션을 뒤집을 수 있는 전략을 떠올리고 실행하면 그만이다.</p>\n<p>시장에서 성공적인 거래를 진행하기 위해서는 내 입장만 생각하는 것이 아니라 거래에 임하는 상대방의 입장과 심리를 이해하고 적절한 조건을 제시하는 전략이 필수적이다. 물론 상대방에게 통수를 한번 맞은 이후에도 굳이 협력할 필요는 없으니, 일종의 <a href=\"https://ko.wikipedia.org/wiki/%ED%8C%83%ED%8F%AC%ED%83%AF\" target=\"_blank\" rel=\"nofollow\">팃포탯</a> 전략이라고 생각하는 것이 좋다.</p>\n<p>팃포탯은 첫 번째는 협력으로 시작하되 상대가 배신을 하면 똑같이 갚아주고 협력을 하면 똑같이 협력해주는 전략이다. 노동자와 기업의 딜은 주로 처우 협의 때 발생하니, 첫 처우 협의 때는 어느 정도 협력을 해주되 이후 연봉 협상 때 원하는 결과가 나오지 않는다면 굳이 남아있지 않고 다른 곳으로의 이직을 검토해보는 등의 방식을 생각해볼 수 있다.</p>\n<p>연협이 불발되었을 때 “난 그렇게 헌신했는데 회사가 어떻게 나에게 이럴 수 있냐”라는 등 감정적인 어프로치를 하시는 분들도 있지만, 어차피 내가 원하는 가격을 쳐주지 않는 구매자에게 감정적인 대응을 해봤자 상대방은 절대로 내가 원하는 것을 거저 내어주지 않는다.</p>\n<p>나에게 아메리카노 한 잔을 8만원에 팔려고 하는 카페 사장에게 “커피가 너무 비싸서 안 살래요”라고 이야기했을 때, 사장님이 나에게 “이게 뭐가 비싸요!!”라며 화를 내거나 “제가 가정형편이 어려워서…”라고 동정을 유도해도 내가 그 커피를 사주지 않을 것이라는 걸 생각해보면 된다. 차라리 아메리카노 한 잔에 8만원을 받아야 하는 합리적 근거를 제시하는 편이 더 확률이 높을 것이다.</p>\n<p>결국 우리가 기업에게 노동력을 제공하며 원하는 가격을 받기 위한 효과적인 전략을 만들기 위해서는 시장이라는 게임과 나와 거래하는 상대방인 기업에 대해서 이해하고 서로가 Win-Win할 수 있는 방법에 대해서 고민해야한다.</p>\n<p>시장에서 살아남기 위한 두 번째 시각 전환은 나와 기업 모두 자신의 이익을 최대로 만들기 위한 의사결정을 하는 플레이어 중 하나일 뿐임을 인정하고, 거래 결과에 대한 감정적인 대응보다는 현상 그대로를 바라볼 수 있는 객관적 시각을 길러 상대방이 원하는 것이 무엇인지, 어떻게 접근해야 구매 욕구를 불러일으킬 수 있을지에 대해 냉철하게 판단할 수 있는 상태로 나아가는 것이다.</p>\n<h3>Customer Centric</h3>\n<p>필자는 이 글에서 내가 가진 능력의 가치를 높혀 연봉을 높히는 구체적인 전략을 이야기하지는 않을 것이다. 애초에 개개인의 역량과 처한 상황 자체가 너무나 다르기 때문에, 어느 정도의 요령은 있을 수 있어도 “이렇게만 하면 연봉이 오른다”라고 하는 Silver Bullet 같은 전략은 존재하기 어렵기 때문이다.</p>\n<p>단지 필자는 여러분이 이러한 전략에 대한 고민을 시작할 수 있도록 노동시장을 바라보는 시각과 기본 개념을 바꿀 수 있는 약간의 도움만 드릴 수 있을 뿐이다.</p>\n<p>앞서 이야기했듯이 우리는 노동시장에서 우리의 능력을 기업에게 팔아야 하는 판매자 혹은 생산자의 입장이다. 즉, 우리의 능력을 하나의 상품으로 생각하고 고객들이 내 상품을 구매한다는 결정을 내리기 위해 어떤 정보들이 필요한 지에 대해서 생각해봐야 한다는 것이다.</p>\n<p>이렇게 이야기하면 어떻게 사람을 상품으로 보고 가격을 매기냐고 생각하시는 분들도 계시겠지만, 이미 우리는 기업에게 노동력을 제공하고 연봉을 받고 있지 않은가? 그게 바로 우리에게 매겨진 가격이다. 더 정확하게 이야기하면 인간 자체가 아닌 인간이 <strong>보유한 능력에 대해 매겨진 가격</strong>이라고 할 수 있다. <small>(인간 채용이 아니라 재능을 가진 인간을 채용한다는 인재 채용이라는 단어를 사용하는 이유이다)</small></p>\n<p>물론 이 가격이 형성될 때 최저임금제와 같이 기본적인 생존권을 보장하기 위한 팩터가 포함되기는 하지만, 기본적으로는 그저 상품에 대한 수요와 공급에 의해 형성된 가격일 뿐이다.</p>\n<p>사실 노동시장에서 고객들이 우리의 능력을 구매하는 행위는 우리가 쿠팡과 같은 온라인 커머스 플랫폼에서 매우 비싼 상품을 구매하는 상황과 크게 다르지 않다. 예를 들어 로봇 청소기를 하나 장만해야 한다고 생각해보자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3e1d7d064e044b9f2a9991365283f479/d9ed5/coupang.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACf0lEQVR42k1Uy27TUBDttyAWqP8CG1iA1AV/hERFV/0AQEJ0W1SQQFSqRFq1Tdu8nDqxndiJ38/r69dh7nXidKQr38e8zpkZ70UJQ1mWEFIr/2B9/gDfWCCIMlSqijzn4FWNJo5RajryokAldF0X5dJE3tCe3rey57oO0jSVh97FOd69eonXb95iZDjyLstyMJZ3BpqmIYqi7hwnFLiqdg5TMuAUVciPs5949vwF9vf3MRzcyztFecRspnUGx8fH6Pf7cs95gf7dkAIkO4dxnBCsNoOcc3w/OcHZz18YDEdwPA/Xt7dQCboQQY1u6PB9f5M9w83dA/wgfOowQpK0EaIwgrm0YJomgiDAPSlrcw0uOWZk7Ns2VqYFy1rJ97Xt0DeETfeMsR3kYgM5MjXoDxcIPRM1kR0uR9Af7xGRckM8rZUr6PoUjPRLzrBWH7ByLBSUedM0rUNB8NZ7kawQuQtUdUtyGDuw3XUX0E9ceL4HYVs3BezlGI69xlPZE3C3HIooNaUmvu2q5ZJvFLRyHDQbw5raiBMVdWu4c5hlGTnZ9BE9FLxEGCa0WqKHgwE+HR2hIr2GeONFiZKC1pRIQlxnPKfipFRxvi1KTMUIuyqyjGM+MzCZTOWdYRj4eHgoW0TCDmK5L6mZDWpsmyB/+foN0+lj6zCkyjpO28RiOv78vcTv8x7cKKYJqDCeKOj1LlvSaV31qDBzXepfX9/g4OA9Tk/POspkldM0a7s+ZViuHGrUWPJaURZMdAHBEbQw+orgCaESwmgsF4uFRNZVWUAuiha/tzBgKWNSZHLcluoAynwCm/gqKIA1HkGdzRFQ4JLO7lyFR1MSUULV5n/wH/vB1RAe8gUlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"coupang\" title=\"\" src=\"/static/3e1d7d064e044b9f2a9991365283f479/6af66/coupang.png\" srcset=\"/static/3e1d7d064e044b9f2a9991365283f479/69538/coupang.png 160w,\n/static/3e1d7d064e044b9f2a9991365283f479/72799/coupang.png 320w,\n/static/3e1d7d064e044b9f2a9991365283f479/6af66/coupang.png 640w,\n/static/3e1d7d064e044b9f2a9991365283f479/d9199/coupang.png 960w,\n/static/3e1d7d064e044b9f2a9991365283f479/21b4d/coupang.png 1280w,\n/static/3e1d7d064e044b9f2a9991365283f479/d9ed5/coupang.png 2880w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>로봇 청소기 생각보다 비싸다...</small>\n</center>\n<p>온라인을 통해 상품을 구매할 때는 해당 상품을 직접 사용해볼 수 없다는 특징이 있다. 게다가 만약 몇 천원 짜리 상품을 구매한다면 그냥 대충 지를 수 있겠지만, 로봇 청소기와 같은 고가의 제품을 구매할 때는 내 소중한 돈을 엄한 곳에 쓰지 않기 위해 신중해질 수 밖에 없을 것이다.</p>\n<p>그래서 우리는 기본적으로 상품 상세 페이지를 자세히 읽어 보고 다른 구매자들이 작성한 리뷰나 별점도 살펴보고 유튜브와 같은 다른 SNS에 올라온 리뷰까지 확인한 이후 “음, 이 정도면 나쁘지 않은 소비구만”이라는 생각이 들면 구매를 결정하게 된다. <small><del>(물론 성향따라 그냥 지르시는 분들도 계시긴 하다…)</del></small></p>\n<p>우리의 능력을 사는 고객들도 마찬가지이다. 노동시장에서의 구매자는 우리의 능력을 직접 경험해보고 구매를 결정할 수 없으며, 기본적으로 우리가 제출한 단순한 상품 소개서(이력서)와 총 2시간 정도의 방문판매영업(인터뷰), 혹은 이 상품을 구매했던 다른 고객들의 리뷰(레퍼런스 체크) 등을 기반으로 구매를 결정하게 된다.</p>\n<p>즉, 이 단계에서는 상품의 실제 스펙보다는 해당 상품을 소개하는 정보들과 타인의 리뷰들을 기반으로 한 판단이 구매 결정에 큰 영향을 끼치게 될 수 밖에 없다는 것이다.</p>\n<p>심지어 인간의 능력이라는 상품은 1년에 몇 천만원에서 몇 억원이나 지불해야 할 정도로 매우 비싼 상품인데다가, 한번 구매하고 나서 3개월이 지나면 환불도 어려워서 구매 의사결정이 실패했을 때의 리스크가 굉장히 크니 매우 신중하게 결정할 수 밖에 없다. <small>(당장 손이 급하다는 이유로 별다른 출구 전략도 없이 인재밀도가 낮은 채용을 해버리는 것을 최대한 피해야 하는 이유이기도 하다)</small></p>\n<p>그러니 우리는 생산자로써 내 능력의 판매 확률을 높이기 위해 구매자인 기업이 어떤 문화와 특성을 가지고 있는지, 현재 어떤 인재를 찾고 있는지, 내 능력으로 그 기업이 가진 비즈니스 문제나 기술적 문제를 해결할 수 있는지와 같이 고객들에 대한 다양한 정보를 수집하여, 어떤 방법으로 내가 가진 능력을 해당 기업에 팔아볼 지에 대한 전략을 세우는 과정을 거쳐야 한다.</p>\n<p>결국 노동시장도 시장이다. 결국 우리가 이 시장에서 기업들에게 내 능력을 판매하며 더 많은 보상을 받기 위해서는 “어떻게 하면 좋은 개발자가 될 수 있을까?(좋은 상품을 만들 수 있을까?)”와 같은 고민 뿐만 아니라 “우리 고객들은 어떤 인재를 채용하고 싶을까?(어떤 상품을 구매하고 싶을까?)”와 같은 소비자 중심의 고민들도 함께 해야한다.</p>\n<p>시장에서 살아남기 위한 세 번째 시각 전환은 취업이라는 활동을 단순히 기업이 내는 시험을 보고 합격하여 그 기업의 소속이 되는 행정적 과정이 아니라, 내가 직접 시장에 뛰어들어 내 능력을 홍보하고 고객의 니즈를 맞춰 구매 욕구를 불러일으켜야 하는 일종의 경제 활동으로 바라보는 것이다.</p>\n<h2>프로페셔널의 마음가짐을 가지자</h2>\n<p>나도 결국 자본과 각자의 이기적인 선택으로 돌아가는 시장 참여자 중의 하나라는 사실을 인지하고 받아들였다면, 이제 어떻게 하면 나의 이익을 가장 크게 만들 수 있는지 고민해봐야 할 차례이다.</p>\n<p>앞서 필자는 다음 세 가지 시각 전환에 대해서 이야기했었다.</p>\n<hr>\n<ul>\n<li>노동자와 기업이 상호평등한 거래를 할 수 있는 플레이어가 될 수 있음을 인지하기</li>\n<li>노동자와 기업이 모두 자신의 이익을 최대로 만들기 위해 움직이는 이기적인 녀석들임을 인지하기</li>\n<li>취업이라는 활동이 내가 누군가에게 내 능력을 판매해야하는 경제 활동임을 인지하기</li>\n</ul>\n<hr>\n<p>이렇게 서로를 평등한 관계로 정의하고나면 이제 기업은 “고용주”가 아닌 나의 능력을 구매해주는 “고객”이 된다. 애초에 기업은 내 노동력과 기술력을 사준 대상이지 나라는 인간 자체를 산 것이 아니니 주인이라고 할 수도 없다.</p>\n<p>물론 노동시장의 특성 상 판매하는 상품인 노동력과 판매자인 노동자가 분리될 수 없다는 점과 노동력을 제공하고 있는 시간 동안은 구매자인 기업에 의해 내 자유가 억압당할 수 있다는 점으로 인해 스스로를 노비라고 느끼는 분들도 있겠지만, 한번 잘 생각해보자.</p>\n<p>사실 우리가 회사에 취업하는 것이나 유명한 스포츠 스타나 학원 강사가 고액 연봉을 받고 특정 구단이나 학원으로 입단하는 것은 크게 다르지 않다. 어차피 돈 받고 타인에게 내 능력을 제공하는 계약을 체결하고 그 능력을 제공하는 동안은 자유가 억압당한다는 사실은 똑같기 때문이다.</p>\n<p>심지어 스포츠 스타나 학원 강사는 하루 8-10시간 정도 일하면 계약 조건을 만족시키고 퇴근할 자유가 있는 대다수의 직장인에 비해 업무 강도도 높은 편이다.</p>\n<p>하지만 그런 사람들을 보고 우리는 구단주나 학원의 노비가 아닌 프로페셔널이라고 한다. 똑같이 돈을 받고 타인에게 능력을 제공하는데도 직업이 직장인이면 노비이고 스포츠 스타면 프로페셔널이라고 하는 것은 다소 이상한 논리이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/b918a/3hours.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC6ElEQVR42iWSy2tcZRjGD+jCleBSxIW2ohmmycxkMsxkMuNccs6Zc7/NOTNzppncTNLRNp1QrRSzCLaNUFovGEUUwViIdCFaisFesF5Su6h0kVUFQfwDCi50KT+/TBcPfIvv/X3P+3yPFHtZBu1D9KME03KNUrXOVKXKeC7HSCJJInmESpDF6BRoz08xt6agt6pU6hqKbtIwbTozs6wOTtHu9pDils76SpqNY0kCV0UWl6Y1nUKpxNhYmmQ6Q9wtceXSLJfP9tg4E+Evmqi6ixNEOM0WC0vHeP30GRZWXkXS7ADVjpDNiIbtopqGgBpMlsqkUhkBTNPvaNz6ZMDOOz3OnpBZOO5TUyxsL8AVQC9s40cd2kdnkSzP40Cm66LbjgAKhw2dfLFEcjRNenyc9eVFrr73Fl+d73HuNZ1mzxB3LEzbE9AQP+wQtru04hkkw3E5kCZgDcum3tCI/IDAsKhOTnE4keBkM+S78+t8/kZAs1EW7mtoIjvddLHc5tBlIBxGra4AWg669QimGsKd2sAW5w9Pr7IUeOhi4ORKnwtLITvnltn+7CM6YrV8vkRDszCsA5dNvEBAhVNJM2weyRJBm8iqhq5b3Hj3bXbf3+Te3m/sfrvLxRMxP2xf4L9//uXhw7/5dPuLIUzTbSzbxxEPe36EJKv6EKKK3BQhWVFEbWTWYp9rWxe5u3efO7d/5acvP2Z/7xcePPiL/bv73Ln0DV2/K+qjiFlTgK2hpEpNoTatiRXKpFM5JidLFMtVTs2FbHgxX+9c5db122xvbfHjzZ/5/Y8/ufLBZTaf8HDTMoVqhZfLdSpVmVpdRnLCeaKjfUZeGmM8k0MVueSyWYL6FMpEAUcE3+nEhAd9m3tFdHKG2ZTO5lPiM5J1UoUchXxxaCRfLCMFrXmcaI4joyn6x1fZ/f4ma4MBtdERDj33Is8/c5jYDVleFLBpm4nHnqb4+LO8+aSO+UKZkcwYmUyWVHYCZyLD/+qCwmwngweRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3hours\" title=\"\" src=\"/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/6af66/3hours.png\" srcset=\"/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/69538/3hours.png 160w,\n/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/72799/3hours.png 320w,\n/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/6af66/3hours.png 640w,\n/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/d9199/3hours.png 960w,\n/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/21b4d/3hours.png 1280w,\n/static/8e3c67ff3ff3aaa10d73f7e7815e6b13/b918a/3hours.png 2780w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    솔직히 연 130억 버는 이지영 강사의 근무 환경은 왠만한 직장인들보다 훨씬 빡세다.<br>하지만 그 누구도 이 분에게 학원의 노비라고 할 수는 없을 것이다.\n  </small>\n</center>\n<p>하지만 어차피 우리가 직장인으로 사는 이상 나의 노동력을 타인에게 제공하고 그 대가로 보상을 받는다는 계약을 맺어야 한다는 사실 자체는 변하지 않는다. 다만 똑같은 현상을 보고도 내가 노비라고 생각하면 노비인 것이고, 능력을 갈고 닦아 고객을 만족시켜야 하는 프로페셔널이라고 생각하면 프로페셔널이 된다.</p>\n<p>필자는 <strong>모든 직장인은 자신의 능력을 대가로 보상을 지급받는 프로페셔널</strong>이며 단 한 사람의 아마추어도 존재하지 않는 것이라고 말하고 싶다.</p>\n<h3>우리의 고객들은 돈에 미쳐있다</h3>\n<p>앞서 필자는 우리는 모두 돈을 받고 타인에게 나의 기술과 능력을 제공하는 프로페셔널이자 판매자이며 기업은 우리의 고객이자 구매자라고 이야기했다.</p>\n<p>그러니 가장 먼저 우리는 우리의 고객들인 기업이라는 집단이 무엇을 위해 존재하는 것인지, 이 집단의 목표는 무엇인지에 대해서 명확하게 이해할 필요가 있다.</p>\n<p>자그마한 MVP를 만들 때조차 사용자들의 페르소나와 행동 패턴, 니즈 등을 알아내기 위해서 그렇게 난리 부르스를 치는데 정작 나의 능력을 사주는 중요한 고객들에 대해서는 잘 모른다면 그게 더 이상하지 않을까?</p>\n<p>필자는 기업이 어떤 집단인지에 대해서 딱 한 문장으로 명쾌하게 정리할 수 있다. 기업이라는 집단은 바로…</p>\n<blockquote>\n<p>💰 <strong>돈을 벌기 위한 집단</strong>이다.</p>\n</blockquote>\n<center>\n.<br />\n.<br />\n.<br />\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b59c02f9579a4c68f819893ea391f1db/131f1/of_course.webp\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRmgAAABXRUJQVlA4IFwAAABwAwCdASoUAAsAPtFWo0uoJKMhsAgBABoJZwDLLA6txFN1AvAA/tTKt0VjlQLiE/Sva1I/x9Q/Vtoofwt8vNkc8YEfqkw38U9SAkQK5LKmA6lLA1XLFdeZCK0AAA=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"of course\" title=\"\" src=\"/static/b59c02f9579a4c68f819893ea391f1db/0ba47/of_course.webp\" srcset=\"/static/b59c02f9579a4c68f819893ea391f1db/60a22/of_course.webp 160w,\n/static/b59c02f9579a4c68f819893ea391f1db/4c812/of_course.webp 320w,\n/static/b59c02f9579a4c68f819893ea391f1db/0ba47/of_course.webp 640w,\n/static/b59c02f9579a4c68f819893ea391f1db/131f1/of_course.webp 900w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>아니 그걸 누가 모르냐고</small>\n</center>\n<p>꽤나 거창하게 이야기했지만 사실 기업이라는 집단이 돈을 벌기 위해 존재한다는 사실은 지나가는 초등학생도 다 아는 사실이다.</p>\n<p>우리 회사에 투자한 투자자들은 추후 이 기업이 지금보다 더 돈을 많이 벌어 더 높은 가치를 가지게 될 것을 기대하고 막대한 금액을 투자한 사람들이며, 자신들의 이익을 위해 투자한 금액이 먼지가 되어버릴 수도 있는 리스크를 안고 판에 뛰어든 사람들이다.</p>\n<p>물론 CEO들 중에서는 기업을 통해 돈보다 자신들의 비전이나 꿈을 실현하는 것을 목표로 삼는 분들도 있지만, 결국 영리 집단을 운영하는 이상 돈을 벌지 않으면 그 꿈을 이룰 수 조차 없다는 사실에는 모두 공감하실 것이다.</p>\n<p>그럼에도 불구하고 굳이 필자가 이렇게 당연한 이야기를 강조하는 이유는 우리가 생각보다 기업이라는 조직이 <strong>돈을 버는 것이 최우선순위인 영리 집단</strong>이라는 사실을 종종 잊기 때문이다. 바로 이 사실을 이해하고 인정하는 것부터가 우리의 고객을 이해하기 위한 첫 걸음이다.</p>\n<p>왜냐하면 기업은 돈을 벌어야만 하는 집단이기 때문에 돈이 될 것이라고 생각되지 않으면 절대 우리를 채용하지 않기 때문이다.</p>\n<p>결국 기업이 우리와 1년 어치의 연봉을 계약하는 행위는 작게는 몇 천만원 크게는 몇 억원 규모의 선물 투자를 하는 것이나 마찬가지이다. <small>(선물 계약에 대해서 잘 모른다면 <a href=\"/2021/12/04/what-is-stock-options/#%EB%B2%88%EC%99%B8-%EC%98%B5%EC%85%98option%EA%B3%BC-%EC%84%A0%EB%AC%BCfuture%EC%9D%98-%EC%B0%A8%EC%9D%B4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C\">개발자가 알아야 할 스톡옵션의 모든 것 포스팅</a>을 한번 보고 오자)</small></p>\n<p>그러니 여러분이 어떤 기업과 연봉 8천만원짜리 고용계약을 맺었다면, 당연히 그 이면에는 여러분이 1년 동안 기업에 벌어다 줄 금전적/비금전적 가치가 8천만원 이상일 것이라고 기대하고 있다는 사실이 숨어있다. 애초에 기업은 우리의 행복이나 워라밸보다 돈을 버는 것이 최우선 목표인 집단이라는 사실을 잊지말자.</p>\n<p>쉽게 말해 기업은 사람을 채용할 때 투자의 개념으로 접근하게 된다는 것이며, 이는 결국 투자수익률인 **ROI(Return On Investment)**를 본다는 것이다.</p>\n<p>이때 기대하는 비금전적 가치에는 조직 문화 빌딩이나 조직의 역량/행복도 향상 같은 것들이 포함될 수 있는데, 이 또한 결과적으로는 조직이 지속적으로 높은 생산성을 유지하여 기업의 이익을 만들어내기 위함이다. 만약 기업이 직원들의 행복도만 우선시하여 챙겨주느라 정작 돈도 못 벌고 망해버린다면 직원도 직장을 잃게 되니 결국 기업이 돈을 못 벌면 회사와 직원 모두에게 손해이다.</p>\n<p>이것이 바로 우리의 능력과 노동력을 구매하는 고객들의 본질이며, 우리가 프로페셔널로써 고객들을 만족시키기 위해 반드시 알아둬야 할 팩터이다.</p>\n<p>그러니 결국 우리는 고객들에게 내 노동력을 높은 가격에 팔기 위해서 “나는 내 연봉만큼, 혹은 내 연봉보다 더 큰 이익을 회사에 안겨다 줄 수 있다”라는 사실을 어필해야 하는 것이다.</p>\n<h3>판매 전략을 고민해보자</h3>\n<p>그렇다면 우리는 고객인 기업들에게 내 연봉 이상의 돈을 벌어다 줄 수 있다는 사실을 어떻게 어필할 수 있을까?</p>\n<p>사실 굉장히 어려운 문제이다. 왜냐하면 인간의 능력이라는 것이 무슨 삼국지 게임마냥 숫자로 딱 떨어지게 나타내기 굉장히 어렵기 때문이다. 그렇기 때문에 노동시장에서의 구매 결정 과정은 정량적 데이터보다는 주로 커피챗, 면접, 레퍼런스 체크, 인지도와 같은 정성적인 데이터들에 의해 흘러가게 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1625608a5b50569e606c847c8b9d5e3e/748f4/jojo.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEBElEQVR42iWUyXLbRhCG+QQ5WC7TVlzWSnMRTYo7CUAECGIhCYIrwAWkSEqyZafiisuxdXDlkpQrl+Scyjl5gDxGXutLSzlMobsx09P/3/1PrOH5NLo+KdUgoVuo/ghrGnKkGahOl2RV5bBYJ1XT2D+vcK6bKBI/qTcptbvUHY+q3SOtmpw2LoglqhqH+SovcmWSNZWsanFSrLF/VmA/leegrPFSM0lrbRJqi6xhc252yMrKScJSZ0C5OxS79+DHDl+kOXqS4GQ/RTGVJp+uiZ3gOJ7i6eOjh43KfE49CGgs5vSWK5ztjmYUoUVLrMtLotUaYzLFWW+JJRN5sgdpjr89xameMTNyHMTjpF+ccfAsQUHgqMsFlekEYxbyaT3D9SW2jmiu15jrFcHiipbQ1I7WAvk4R/llhmrmiD/fj/j3t3d0C6do5ykqGVnCrzKP6F294fb2B36/jnir9ck3dPTZAmu5YbxZYy+W/1dYPMtjN5Ise6f883nG3x/nrKw0Ey9FW5WEvSGKHOy9+Y7Vl698/vEzP4V3mAWLxmQsSXYE2znucvlgx7pOjombZjMx+ON7j3EtxdI+5XaR4aKS5NwSeIsFpYGHfjfj3a9rvn7sY+gKmkBuby7pXu1whMfe7oZYuZxju/nCp7u/uLu55HZYJXvyHLeZwbMy0sE+yjKiEUypbXVa2wI3NyUGqxGGNMfZ7fA3N5jzpSR8Tex9kOOXD6+52v5MoRCw7qlUsjkePU7K9zmKLxwKHOVyiRGt0KXLzWiDuxOIVxHWZsv65pqOdL3/kPCtz1Ukg5or8eiwSKVRR23qPDnOcpw8IS+zVfQnlP0plfGM+nQm3M2ojkKUcCWXbIW7a/T5CnWyJKZMr7HnH3jVHrBXqslSeFxWeSZK2Ks0+eZVlb1zhXj5gqfix2XQ47InLuo5UNukbJ+k5ZGQeT1uOsRaYSDEW5QMi6rpUpZvThRRMhzyoo681qIo6ijfq0NpUrM6VNsdiiLBkuxvCMdneptkXSclioq9tIeUuh79MMSfLNBsD0Pk1B0FtHsj3MEE2xuJH9IR2+mPH/71hgGmN6QzCWl2fEwZr2S1SexEys1bPt5oRlc40uw+mtPHkoOOHAqkAfcX+NM5neEUW+KuxIezFV6woCucuhJ3B2N5QAxiOW9CVSow75ds1uT1cGTDvW9LM3w55A4Cmm7/IXFHkulSkSJIHKlU7wqacShyHJO/sIjp69f0FysGowmd8RxLYPWk0o5AbMsF94n9YIkr/iCMpJqQujSgpLvCryVJbHJKi1cixYysmHv9jtHl7gGOO42wxwscab85mGH4AdZoji3cmoMQW2zTD9HFNuR/WTpcEYrKLWlSyyXXcvgPDLhoz6iBTpsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jojo\" title=\"\" src=\"/static/1625608a5b50569e606c847c8b9d5e3e/6af66/jojo.png\" srcset=\"/static/1625608a5b50569e606c847c8b9d5e3e/69538/jojo.png 160w,\n/static/1625608a5b50569e606c847c8b9d5e3e/72799/jojo.png 320w,\n/static/1625608a5b50569e606c847c8b9d5e3e/6af66/jojo.png 640w,\n/static/1625608a5b50569e606c847c8b9d5e3e/748f4/jojo.png 656w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>삼국지 게임처럼 인간의 능력치를 정확한 숫자로 표현할 수 있다면<br>애초에 면접이라는 과정이 필요 없었을 수도 있지 않을까?</small>\n</center>\n<p>결국 앞서 이야기한 쿠팡의 예시와 같이 우리의 고객들은 상품을 직접 써보기도 전에 대략적인 상품의 정보들만 가지고 구매를 결정해야하는 상황에 놓인다는 것이며, 이것이 바로 노동시장에서 판매자가 거의 유일하게 유리한 위치를 점할 수 있는 지점이라고 봐도 좋다.</p>\n<p>그렇기 때문에 판매자인 우리는 구매자들에게 내가 제공할 상품의 정보를 어떻게 알리고 브랜딩할지와 같은 판매 전략에 대해서 정말 많은 고민을 해야 한다.</p>\n<p>이러한 판매 전략을 만들어나가려면 먼저 내가 시장에 제공할 상품의 가치를 파악하는 과정이 필요하다. 일단 내가 가진 상품의 강점과 그 강점이 가진 가치를 알고 있어야 어떤 점을 강조할 지, 어떤 점을 포장할 지와 같은 판매 전략을 짤 수 있을테니 말이다.</p>\n<p>내 상품의 가치를 알기 위해 나의 강점이나 약점이 무엇인지에 대해서 스스로 고민해보는 부분도 필요하겠지만, 사실 그것보다 더 쉬운 방법은 직접 시장에 나가서 그냥 내 능력을 한번 팔아보는 것이다.</p>\n<p>애초에 시장에서 형성되는 품질에 대한 기준은 상대적이다. 수요에 비해 공급이 많이 부족한 상황이라면 낮은 품질의 상품이라도 비싼 값을 주고 살 수도 있으며, 반대로 수요가 별로 없는데 공급은 넘쳐나는 상황이라면 더 높은 품질의 상품을 요구할테니 말이다.</p>\n<p>그러니 집에 가만히 앉아서 내 상품의 가치를 올릴 전략을 고민하는 것보다는 그냥 필드에 나가서 직접 고객에게 판매 시도를 한 이후 고객의 리액션이나 제시받은 가격 등을 보면 더 빠르게 현재 시장에서 바라보는 내 상품의 가치에 대해서 알아낼 수 있는 것이다.</p>\n<p>그래서 필자는 성장을 고민하는 분들에게 “다양한 개발자를 많이 만나보세요”, “면접은 떨어지더라도 무조건 많이 보고 자주 보는 것이 이득이다”라는 이야기를 해드리고는 한다.</p>\n<p>특히 면접을 자주 보는 것은 여러번 얘기해도 부족하지 않을 정도로 중요한데, 이 과정에서 현재 노동시장의 트렌드도 알 수 있고 면접 때 제대로 답변하지 못 한 것들을 토대로 내 상품의 하자가 무엇인지도 알 수 있으며, 심지어 면접에 통과하여 오퍼를 받게 된다면 시장에서 평가한 내 상품의 가격에 대해서도 알 수 있기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/e5166/interview.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwABAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHVHlUjk//EABwQAAICAgMAAAAAAAAAAAAAAAECAxMEEhQhMv/aAAgBAQABBQK4IZsldJO3mUcdVFx9f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAMAAQUBAAAAAAAAAAAAAAABESECAyJCUmH/2gAIAQEABj8C2r4RxefgxOZiNKnaDP/EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUbGR/9oACAEBAAE/Iai0BHe5zjREtzKIs2ZexX8gaSlUdyeTyf/aAAwDAQACAAMAAAAQ4N//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QkY//xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EJ1b/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBYVFxwf/aAAgBAQABPxCz1QsBQPTqLWd2NAeemNJqJfhB+xaX1/NcJfTaBRprMzurFMHSf//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"interview\" title=\"\" src=\"/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/c08c5/interview.jpg\" srcset=\"/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/0913d/interview.jpg 160w,\n/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/cb69c/interview.jpg 320w,\n/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/c08c5/interview.jpg 640w,\n/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/6a068/interview.jpg 960w,\n/static/d38dfcd13f8d28ee989c50f5a7fbb9f5/e5166/interview.jpg 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>직접 네트워킹을 하거나 면접에 참여하는 것은 가장 좋은 시장 조사 방법이다</small>\n</center>\n<p>이렇게 다양한 방법을 통해 내 상품의 가치와 대략적인 가격에 대해서 알았다면, 이제 아래 표를 한번 보도록 하자.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\">저품질</th>\n<th align=\"center\">고품질</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><strong>싸게 팜</strong></td>\n<td align=\"center\">보상 적음 / 비용 적음</td>\n<td align=\"center\">그냥 나만 손해임</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>비싸게 팜</strong></td>\n<td align=\"center\">양아치 / 비용 효율적</td>\n<td align=\"center\">보상이 큼 / 비용이 큼</td>\n</tr>\n</tbody>\n</table>\n<p>필자는 위 표에서 손해만 보는 “고품질/싸게 팜”을 제외한 나머지는 모두 선택 가능한 전략이라고 생각한다.</p>\n<p>저품질인 상품을 싸게 파는 것은 기업에는 최소한의 노동력만 제공하며 추가적인 보상을 바라지도 않는 조용한 퇴직 같은 상황이나 혹은 일을 시작한지 얼마 되지 않은 분들 같은 케이스일테고, 고품질인 상품을 비싸게 파는 것은 기업의 핵심 인재와 같은 고연봉자들의 케이스라고 볼 수 있다.</p>\n<p>조금 특이한 점은 저품질인 상품을 비싸게 파는 세그먼트가 존재한다는 것인데, 이는 그 동안 밀도있는 경험을 하지 못 해서 실력은 부족한데 연차로 인해 연봉은 높은 경우나 브랜딩을 통해 자신의 실력보다 더 멋진 모습으로 비춰지는 경우, 혹은 나에게는 쉬운 일인데 다른 이들이 볼 때는 비용이 많이 드는 일을 하는 경우라고도 볼 수 있다.</p>\n<p>사실 이렇게 싼 물건을 비싸게 팔아 마진을 남기는 것이 장사의 기본이기는 하지만, 노동 시장의 특성 상 판매자와 판매한 상품을 떼어놓을 수가 없으니 혹여라도 상품에 하자가 발생했을 경우 꽤나 난감한 상황이 발생할 수 있을 것이다.</p>\n<p>어차피 과장 광고가 심한 수준이라면 어차피 면접을 진행할 때 혹은 입사 후에 다 들통나게 되어있으며, 또한 과장 광고로 인해 상품의 가치에 비해 도를 넘는 가격을 받았다면 기업들끼리도 다 소문이 나서 어느 순간부터는 더 이상 구매 자체가 발생하지 않을 수도 있다.</p>\n<p>또한 이 세그먼트는 고객 입장에서 가장 ROI가 나오지 않는 거래이니 기업들의 현금 흐름이 좋지 않아지는 경우가 발생하면 비용을 줄이기 위해 가장 먼저 해고 당할 수 있는 위험 또한 존재한다.</p>\n<p>그러니 필자는 노동 시장에서만큼은 저품질의 상품을 비싸게 파는 것보다는 최대한 고품질인 상품을 비싸게 파는 전략을 선택하여 시장의 고객들과 신뢰를 쌓아가는 것이 장기적으로 더 좋은 전략이라고 생각한다.</p>\n<h3>생각보다 더 치열한 노력과 고민이 필요하다</h3>\n<p>그렇다면 노동 시장에서의 “고품질”이라는 것은 무엇을 의미하는 걸까?</p>\n<p>사실 이 부분은 딱히 정답이랄게 없다. 일반적으로 노동시장에서 고액 연봉을 받는 사람들은 단지 자신의 전문 기술인 하드 스킬만 좋은 것이 아니라 리더십, 커뮤니케이션 스킬, 비즈니스 인사이트, 언변술, 사교술, 정치력 등 다양한 부분에서 두각을 나타내기 때문이다.</p>\n<p>개발자라고 해서 프로그래밍만 잘 해도 된다고 생각했다면 큰 오산이다. 개발자가 프로그래밍을 잘 해야하는 것은 그저 개발자라는 직업으로 적당한 연봉을 받으며 일을 하기 위한 기본기에 불과하며, 그 이상을 바란다면 이제는 프로그래밍이 아닌 것들에 대한 수련이 필요하다.</p>\n<p>물론 인간이 이 모든 것을 완벽하게 하기는 어려우니 자신의 강점과 약점을 명확하게 파악하고 나만의 캐릭터를 구축해나가는 과정이 중요하다.</p>\n<p>이런 캐릭터는 공부로 얻을 수 있는 것이 아니라 시장에서 원하는 인재 수요에 대한 분석, 나 자신의 특성, 캐릭터 자체의 경쟁력 등과 같은 수 없이 많은 고민과 노력을 통해 얻어지는 결론에 가깝다. 그래서 필자가 이 포스팅에서 Silver Bullet과 같은 방법은 없다고 이야기한 것이다.</p>\n<p>이미 치열한 시장 경제 속에서 자신의 가치를 증명하기 위해 죽기 살기로 노력하는 사람들은 널리고 널렸다. 특히 상위의 소수 엘리트와 나머지 인원 간의 보상의 갭이 큰 업계일수록 이러한 성향의 사람들이 더욱 많이 나타나는데, 개인적으로는 스포츠, 예술, 요식 등의 업계에서 이런 모습이 자주 보이는 것 같다.</p>\n<blockquote>\n<p>“진짜로 알아야 할 게, 돈을 받고 일하는 순간부터는 어느 세상이든, 어느 세계든, 어느 직업의 장르이건, 아마추어는 존재하지 않아요. 돈을 받기 시작하면 그때부터 프로가 되는 거예요. 그러면 뭘 어떻게 해야 해? 프로답게 해야지.” - <a href=\"https://namu.wiki/w/%EC%97%90%EB%93%9C%EC%9B%8C%EB%93%9C%20%EA%B6%8C\" target=\"_blank\" rel=\"nofollow\">에드워드 권</a></p>\n</blockquote>\n<blockquote>\n<p>“중요한 승부에서 패하고도 마음이 아무렇지 않다면 그것은 이미 프로가 아니다. 그것은 인품과 무관하며 승부사에게 패배의 아픔은 항상 생생한 날것이어야 한다. 늘 승자가 될 수는 없지만 패자의 역할에 길들여져서는 안 된다.” - <a href=\"https://namu.wiki/w/%EC%9D%B4%EC%B0%BD%ED%98%B8\" target=\"_blank\" rel=\"nofollow\">이창호 9단</a></p>\n</blockquote>\n<blockquote>\n<p>“프로가 된다는 것은, 당신이 하고 싶은 모든 일을 당신이 하고 싶지 않은 날에 하는 것을 말한다.” - <a href=\"https://namu.wiki/w/%EC%A4%84%EB%A6%AC%EC%96%B4%EC%8A%A4%20%EC%96%B4%EB%B9%99\" target=\"_blank\" rel=\"nofollow\">줄리어스 어빙</a></p>\n</blockquote>\n<blockquote>\n<p>“우리가 뭘 해야 하는지 집중해! 너희들 모두 돈 받고 운동하는 거잖아. 이기는 경기를 해! 지지도 말고! 비기지도 마! 제대로 하라고! 그게 내가 원하는 거야. 두려워 하거나 긴장하지 말고 최선을 다하라고! 팀을 위해 너희 자신을 희생해. 우린 롯데 자이언츠야! 최고가 돼야 해!” - <a href=\"https://namu.wiki/w/%EC%A0%9C%EB%A6%AC%20%EB%A1%9C%EC%9D%B4%EC%8A%A4%ED%84%B0\" target=\"_blank\" rel=\"nofollow\">제리 로이스터</a></p>\n</blockquote>\n<blockquote>\n<p>“스포츠에서 2등은 꼴찌나 마찬가지라고 생각합니다.” - <a href=\"https://namu.wiki/w/%EC%84%A0%EB%8F%99%EC%97%B4\" target=\"_blank\" rel=\"nofollow\">선동열</a></p>\n</blockquote>\n<p>물론 필자가 몸 담고 있는 IT 업계는 업계 1위가 아니더라도 그럭저럭 먹고 살만한 보상이 주어지는 업계이니 저 사람들이 있는 업계만큼 치열한 경쟁이 있지는 않겠지만, 만약 현재 받고 있는 것 이상의 보상을 바란다면 저런 마인드를 가지고 치열하게 노력하고 고민해야 한다는 사실은 변하지 않는다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/57a2f0c10fbf684c1b6233cc9bbf3a34/a8a14/janghoon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAACAP/aAAwDAQACEAMQAAAByxYhTAG//8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIDABITMTL/2gAIAQEAAQUCkoouJZQok23CgWf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8Bka//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQIBAT8BtYf/xAAbEAACAQUAAAAAAAAAAAAAAAAAAREQISJBgf/aAAgBAQAGPwLcCZGXKqx//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAITFhEEFR/9oACAEBAAE/IXT7KcEANoO4glHDyDcKaGPNz//aAAwDAQACAAMAAAAQLz//xAAWEQEBAQAAAAAAAAAAAAAAAAABACH/2gAIAQMBAT8QzYd//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/ENAZG3//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMVFBYdH/2gAIAQEAAT8QEC1m5Z7zkCjY28k8YQHoKHGbG738wAIAjWMCVW0ds//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"janghoon\" title=\"\" src=\"/static/57a2f0c10fbf684c1b6233cc9bbf3a34/c08c5/janghoon.jpg\" srcset=\"/static/57a2f0c10fbf684c1b6233cc9bbf3a34/0913d/janghoon.jpg 160w,\n/static/57a2f0c10fbf684c1b6233cc9bbf3a34/cb69c/janghoon.jpg 320w,\n/static/57a2f0c10fbf684c1b6233cc9bbf3a34/c08c5/janghoon.jpg 640w,\n/static/57a2f0c10fbf684c1b6233cc9bbf3a34/a8a14/janghoon.jpg 885w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>프로페셔널은 항상 냉정하게 자신을 평가하고, 내 고객들을 더 만족시킬 수 있도록 뼈를 깎는 노력을 해야한다.</small>\n</center>\n<p>나 스스로를 단순한 노동자가 아닌, 내 능력과 기술을 시장에 팔아먹는 프로페셔널로 정의하고나면 내 주변에서 발생하고 있던 수 많은 현상들에 대한 시각도 조금씩 변하기 마련이다.</p>\n<p>주변을 돌아보았을 때 나와 같은 일을 하고 있는 것 같은 동료가 나보다 더 높은 연봉을 받고 있는 것 같다면 그 동료의 커리어와 내 커리어를 비교 분석하거나 혹시 그 동료가 내가 모르는 역량을 보유하고 있지는 않은지 확인해서 나의 발전 방향을 다시 검토해야 한다.</p>\n<p>회사와 연봉 협상을 해야한다면 수동적으로 회사가 내 성과를 알아주기를 기대하는 것이 아니라, 어떻게 하면 타인을 설득하기 쉬운 형태로 내 성과를 표현할지를 고민하거나 적극적으로 시장에 나가 다른 회사의 오퍼도 받아보면서 시장에서 평가받는 내 몸 값이 어느 정도인지도 알아보고 이 정보들을 협상의 무기로 쓸 수 있을지에 대한 고민을 해야 한다.</p>\n<p>이러한 행위를 하지 않는다는 것은 시장에서 장사를 하겠다는 사람이 아무런 홍보 활동도 벌이지 않고 가만히 가게에만 앉아서 손님이 오기를 기다리는 것과 다를 바가 없다. 전단지를 돌리든 새로운 메뉴 개발을 하든 수수료를 지불하고 배달 플랫폼에 들어가든 뭐라도 해봐야 우리 가게를 찾는 손님이 늘 것이고, 손님이 늘어나야 수요/공급의 법칙에 따라 음식 가격을 더 올릴 수 있지 않겠는가?</p>\n<p>사람들은 연 130억을 버는 학원 강사를 부러워하면서도, 생각보다 그 이면에 있는 치열한 노력과 고민에는 초점을 맞추지 않는다.</p>\n<p>하지만 세상에 공짜는 없는 법이다. 지름길도 없다. 성공하고 싶다면 그저 꾸준히 내 역량이라는 상품성을 강화하고 구매자들의 니즈를 분석하고 직접 팔아보면서 부딫히고 깨져보는 과정을 겪어야 한다.</p>\n<p>단, 노비가 아닌 프로페셔널로써 말이다.</p>\n<h2>마치며</h2>\n<p>최근 몇 년간 개발자들의 몸 값이 빠른 속도로 오르기 시작하면서 마치 개발자로 취업만 성공하면 대부분 좋은 복지를 누리면서 높은 연봉도 받을 수 있는 좋은 직업인 것처럼 보여졌었다. 심지어는 최근에도 필자의 지인 중 한 분이 개발 공부를 시작했다는 소식을 들었으니 이런 현상은 아직도 현재진행형인 듯 싶다.</p>\n<p>물론 IT업계가 발전하며 개발자들에 대한 수요가 조금씩 높아지고 있었고 그에 비해 공급이 부족했던 것은 맞다. 필자가 대학생이던 2015년도만 해도 공대의 꽃은 이른바 전화기<small>(전자전기공학/화학공학/기계공학)</small>였으며 컴퓨터공학과는 딱히 인기가 없었기 때문이다.</p>\n<p>이런 상황에서 특정 기업이 개발자의 연봉을 높여버리며 시장의 개발자들을 대량으로 빨아들이는 전쟁을 시작해버렸고, 당연히 다른 기업들도 좋은 개발자를 데려오고 싶다는 수요에 비해 공급이 턱없이 부족하다는 상황은 알고 있었을테니 그에 맞게 연봉을 높이는 치킨게임에 참여할 수 밖에 없었을 것이다. <small>\n(필자는 이것도 일종의 FOMO 현상이었다고 생각한다.)</small></p>\n<p>하지만 2023년 현재는 상황이 많이 다르다. 최근 몇 년간 개발자들의 몸 값이 빠르게 오르며 개발자라는 직업에 대한 인식이 좋아졌으니 자연스럽게 과거에 비해 컴퓨터공학과의 위상도 많이 올라가고 부트캠프와 같은 새로운 비즈니스 모델까지 우후죽순 생겨나게 되며 시장에는 개발자 공급이 늘어났다.</p>\n<p>이런 상황에서 갑자기 경기 침체가 와버리니 이번에는 공급에 비해 수요가 부족한 상황이 되어가고 있다. 아직은 개발자에 대한 수요가 많아 보일 수 있지만 자세히 보면 아니다.</p>\n<p>노동력에 대한 가격은 한번 오르고 나면 잘 내려가지 않는 <a href=\"https://www.moef.go.kr/sisa/dictionary/detail?idx=2081\" target=\"_blank\" rel=\"nofollow\">하방 경직성</a>을 가지고 있기 때문에 수요가 줄었다고 해서 갑자기 가격을 낮추기 어렵다.</p>\n<p>결국 우리의 노동력을 구매하는 고객들은 수요와 공급에 의해 자연스레 형성되는 적정 가격보다 비싼 가격을 지불하는 것이니, 그만큼 높은 품질의 가치를 지닌 상품들을 선별하게 될 수 밖에 없으며 이 과정에서 해고나 직장을 아예 구하지 못하는 상황과 같은 비자발적 실업이 발생하거나 개발자들의 임금이 양극화 되는 것이다.</p>\n<p>높은 가치의 노동력을 제공하는 판매자는 더 많은 보상을 받지만, 낮은 가치의 노동력을 제공하는 판매자는 아예 구매자가 나타나지 않거나 혹은 기존보다 더 낮은 가격을 제시받는다는 의미이다. <small>(1억원으로 역량이 낮은 인원 3명을 고용하느니, 차라리 역량이 높은 1명을 고용하며 1억원을 몰아주는 것을 선택하기 쉽다는 것이다)</small></p>\n<p>이러한 시장의 변화는 개발자들, 특히 그 중에서도 이제 막 커리어를 시작하려는 분들에게는 굉장히 중요한 포인트이다.</p>\n<p>주식 시장만 보면 마치 경기가 살아나고 있는 것 같지만 아직 해결된 것은 아무것도 없으며, 모두가 힘들고 어려운 시장 상황이다. 필자는 이런 상황에서 “성실하게 노력하면 보상은 자연스레 따라올거야”라는 말을 도저히 할 수 없을 것 같다. 이건 경기가 좋았을 때나 먹히는 말이지 지금은 아니다.</p>\n<p>하지만 이렇게 급변하는 시장 상황 속에서도 TypeScript, React, Next를 공부하면 취업이 잘 된다거나, 요즘에는 Rust가 대세라는 등의 이야기는 많지만 정작 이런 현실적인 이야기를 해주는 사람은 별로 없는 것 같다. 왜 그런지는 잘 모르겠다.</p>\n<p>필자는 물론 기술도 중요하지만 일단 안정적인 삶을 갖춰야 우리가 좋아하는 기술도 즐길 수 있다고 생각한다. 생존을 위한 학습이 아니라 내 지적 만족감이나 호기심 충족을 위한 학습을 하는 것이 스스로에게도 더 건강한 성장이 될테니 말이다.</p>\n<p>필자는 많은 개발자들이 스스로 개발자이기 이전에 한 명의 직장인이고 시장 참여자라는 사실을 잊지 말고, 노동시장을 바라보는 냉철한 시각을 통해 요즘과 같은 어려운 상황에서도 나름의 분석과 대처를 할 수 있는 능력을 갖추길 바란다.</p>\n<p>이상으로 시장에서 살아남는 사람이 되기 포스팅을 마친다.</p>","fields":{"slug":"20230507-improve-my-career","path":"/2023/05/07/improve-my-career/","lang":"ko"},"frontmatter":{"title":"시장에서 살아남는 사람이 되기","date":"2023-05-07","categories":null,"tags":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#888888","images":{"fallback":{"src":"/static/7cf9a5910b65e83cb96dbdff00362cff/3a812/thumbnail.jpg","srcSet":"/static/7cf9a5910b65e83cb96dbdff00362cff/1cda5/thumbnail.jpg 80w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/b1a47/thumbnail.jpg 160w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/3a812/thumbnail.jpg 320w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/7cf9a5910b65e83cb96dbdff00362cff/3e5ca/thumbnail.webp 80w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/b72f1/thumbnail.webp 160w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/fc5c5/thumbnail.webp 320w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#888888","images":{"fallback":{"src":"/static/7cf9a5910b65e83cb96dbdff00362cff/2c11c/thumbnail.jpg","srcSet":"/static/7cf9a5910b65e83cb96dbdff00362cff/23110/thumbnail.jpg 750w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/da421/thumbnail.jpg 1080w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/a2093/thumbnail.jpg 1366w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/7cf9a5910b65e83cb96dbdff00362cff/6858b/thumbnail.webp 750w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/f5547/thumbnail.webp 1080w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/29310/thumbnail.webp 1366w,\n/static/7cf9a5910b65e83cb96dbdff00362cff/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]},{"fieldValue":"vuejsBook","totalCount":1,"nodes":[{"id":"1a39e8a2-cd36-519b-a474-9181c4206e69","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%B1%85%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%93%B0%EA%B2%8C-%EB%90%98%EC%97%88%EB%82%98\">책은 어떻게 쓰게 되었나?</a></p>\n<ul>\n<li><a href=\"#%EC%86%90%EC%97%90-%EC%9E%A1%ED%9E%88%EB%8A%94-%EC%9E%91%ED%92%88%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EB%8B%A4\">손에 잡히는 작품을 만들어 보고 싶다.</a></li>\n<li><a href=\"#%EC%B1%85%EC%9D%84-%EC%93%B0%EB%A9%B4%EC%84%9C-%EB%82%B4-%EC%A7%80%EC%8B%9D%EB%8F%84-%EC%A0%95%EB%A6%AC%ED%95%98%EC%9E%90\">책을 쓰면서 내 지식도 정리하자.</a></li>\n<li><a href=\"#%EC%83%9D%EA%B0%81%EB%B3%B4%EB%8B%A4-%EC%BD%94%EB%94%A9%EC%9D%84-%EB%B0%B0%EC%9A%B0%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C-%EC%B1%85%EC%9C%BC%EB%A1%9C-%EC%9E%85%EB%AC%B8%ED%95%98%EB%8A%94-%EC%82%AC%EB%9E%8C%EC%9D%B4-%EB%A7%8E%EC%95%98%EB%8B%A4\">생각보다 코딩을 배우기 위해서 책으로 입문하는 사람이 많았다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B1%85%EC%9D%84-%EC%93%B0%EA%B8%B0-%EC%A0%84%EC%97%90\">책을 쓰기 전에</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%B2%98%EB%9F%BC-%EC%A7%91%ED%95%84%ED%95%98%EC%9E%90\">개발자처럼 집필하자!</a></p>\n<ul>\n<li><a href=\"#markdown%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EC%B1%85-%EC%A7%91%ED%95%84%ED%95%98%EA%B8%B0\">Markdown을 사용하여 책 집필하기</a></li>\n<li><a href=\"#git%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%AC%B8%EC%84%9C%EC%9D%98-%EB%B2%84%EC%A0%84%EA%B4%80%EB%A6%AC\">Git을 이용한 문서의 버전관리</a></li>\n<li><a href=\"#%EB%AC%B8%EC%84%9C-%EC%BB%A8%EB%B2%84%ED%8C%85-%ED%95%98%EA%B8%B0\">문서 컨버팅 하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B3%B5%EB%8F%99-%EC%A7%91%ED%95%84-%EA%B3%BC%EC%A0%95%EC%97%90%EC%84%9C%EC%9D%98-%EC%B6%A9%EB%8F%8C\">공동 집필 과정에서의 충돌</a></p>\n<ul>\n<li><a href=\"#%EC%84%A4%EA%B3%84%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B4%80%EC%A0%90%EC%9D%98-%EC%B0%A8%EC%9D%B4\">설계에 대한 관점의 차이</a></li>\n<li><a href=\"#%EC%9D%BC%ED%95%98%EB%8A%94-%EC%8A%A4%ED%83%80%EC%9D%BC%EC%9D%98-%EC%B0%A8%EC%9D%B4\">일하는 스타일의 차이</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B1%85-%EB%A6%AC%EB%B7%B0%ED%95%98%EA%B8%B0\">책 리뷰하기</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%84%B0%EB%94%94%EC%9B%90%EB%93%A4%EC%9D%98-%EB%A6%AC%EB%B7%B0\">스터디원들의 리뷰</a></li>\n<li><a href=\"#%ED%98%84%EC%97%85-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%B6%84%EB%93%A4%EC%9D%98-%EB%A6%AC%EB%B7%B0\">현업 개발자분들의 리뷰</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"필자는 최근 라는 책을 집필했다. 필자는 책처럼 긴 글을 적는 게 사실 처음이라, 책을 쓰는 과정이나 책을 출판하는 과정에 대해서 무지한 상태로 집필을 시작했고 그래서 중간에 우여곡절도 꽤 많았다.\n그래서 이번 포스팅에서는 필자와 같이 책을 집필하고 싶어하는 분들을 위해서 2018년 8월부터 2019년 7월까지 책을 집필했던 과정과 어려움에 대해서 이야기 해보려고 한다. 책은 어떻게 쓰게 되었나? 먼저 책을 집필하게 된 계기는 친구인 김영훈 개발자로부터 함께 책을 공동집필해보자는 제의를 받았기 때문이었다. 사실 필자는 대학 교양 …","html":"<p>필자는 최근 <code class=\"language-text\">커피 한잔 마시며 끝내는 VueJS</code>라는 책을 집필했다. 필자는 책처럼 긴 글을 적는 게 사실 처음이라, 책을 쓰는 과정이나 책을 출판하는 과정에 대해서 무지한 상태로 집필을 시작했고 그래서 중간에 우여곡절도 꽤 많았다.\n그래서 이번 포스팅에서는 필자와 같이 책을 집필하고 싶어하는 분들을 위해서 2018년 8월부터 2019년 7월까지 책을 집필했던 과정과 어려움에 대해서 이야기 해보려고 한다.</p>\n<h2>책은 어떻게 쓰게 되었나?</h2>\n<p>먼저 책을 집필하게 된 계기는 친구인 김영훈 개발자로부터 함께 책을 공동집필해보자는 제의를 받았기 때문이었다. 사실 필자는 대학 교양 레포트 이후로 몇 개의 블로그 포스팅와 회사의 기술 문서 작성을 제외하면 글을 써본 적이 없었다. 지금 이 블로그의 포스트 아카이브를 봐도 한눈에 알 수 있는데, 본격적으로 블로그 뽕에 취하기 전인 2019년 6월 이전에는 지금처럼 일주일에 한두번씩 글을 쏟아내는 정도가 아닌 그냥 생각날 때 간간히 쓰는 수준이었다.</p>\n<p>게다가 저 친구의 제의를 처음 받았을 때 이걸 쓸지 말지 두 가지 이유 때문에 고민을 조금 했었는데, 그 중 첫 번째 이유는 “내가 책을 쓸 실력이 되나?”였다. 그리고 두 번째 이유가 조금 치명적인데…</p>\n<blockquote>\n<p>사실 필자는 대학 교재 이후로 기술 서적을 읽어본 적이 없는 사람이다.</p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 549px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a077827ec7796d1721f846e67ab4cd58/588f6/what.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAczKF2JDx//EABsQAAEEAwAAAAAAAAAAAAAAAAABAhIhAxEx/9oACAEBAAEFAk21cjiZUaE5/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQACIf/aAAgBAwEBPwHGRZe3/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Bqv/EAB0QAAIABwEAAAAAAAAAAAAAAAABAhARISIxMkH/2gAIAQEABj8CpCzF+mky6OZf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBkdH/2gAIAQEAAT8hxBvawLvmslZAh7WKgWbLr9QiWp//2gAMAwEAAgADAAAAEMQv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEDAQE/EFA7MIL/xAAYEQACAwAAAAAAAAAAAAAAAAAAAREhMf/aAAgBAgEBPxCWCof/xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhMZFB/9oACAEBAAE/ECpFJpUnzbikoDVHHfb7hgBw175gESXbG7m+4361INawjRTlz//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"what\" title=\"\" src=\"/static/a077827ec7796d1721f846e67ab4cd58/588f6/what.jpg\" srcset=\"/static/a077827ec7796d1721f846e67ab4cd58/0913d/what.jpg 160w,\n/static/a077827ec7796d1721f846e67ab4cd58/cb69c/what.jpg 320w,\n/static/a077827ec7796d1721f846e67ab4cd58/588f6/what.jpg 549w\" sizes=\"(max-width: 549px) 100vw, 549px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이렇게 또 책밍아웃을 합니다...</small>\n</center>\n<p>필자는 독서를 좋아하긴 하지만, 공부에 있어서는 “인터넷이 더 편한데?”라고 생각하는 쪽이라서 기술 서적보다는 소설이나 에세이, 조직 문화나 철학 같이 기술과는 관련 없는 책을 주로 읽는 편이다. 게다가 필자의 포스팅을 몇번 보신 분들은 아실 지도 모르겠지만 필자의 공부 스타일이 책을 하나 하나 읽어보면서 기초부터 하는 스타일은 아니다. 일단 뭘 만들지부터 정해놓고 그때그때 필요한 정보를 찾고 습득한 후에 바로 사용하고 넘어가는 스타일이다.<small>(물론 그래서 지식의 깊이는 넓고 얕은 편이다.)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6b892b18c7b5396515cda321b3f504ea/9568a/books.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAYAQACAwAAAAAAAAAAAAAAAAACBAABA//aAAwDAQACEAMQAAABwVdrPKgvC1VENaAzZ//EABwQAAICAgMAAAAAAAAAAAAAAAECAAMEERITIv/aAAgBAQABBQJcZmhpOxQqynZlgjn3jueTseqxtv8A/8QAGREAAgMBAAAAAAAAAAAAAAAAAAECITEy/9oACAEDAQE/AVolRHpEcP/EABURAQEAAAAAAAAAAAAAAAAAABAB/9oACAECAQE/ASn/xAAdEAADAAAHAAAAAAAAAAAAAAAAAQIDEBEhQXKB/9oACAEBAAY/AuMtK3ZhCrwZCJ7DP//EABoQAQADAQEBAAAAAAAAAAAAAAEAETEhQWH/2gAIAQEAAT8hzGy0DAMvPYckA6RWN1ZSWcXiDj7MqqmK+aiL5s//2gAMAwEAAgADAAAAEF/PP//EABoRAAICAwAAAAAAAAAAAAAAAAABITERcZH/2gAIAQMBAT8QZQdZIkCdCnR//8QAGBEBAQADAAAAAAAAAAAAAAAAAQARMUH/2gAIAQIBAT8QSUzdTu//xAAcEAEAAwEAAwEAAAAAAAAAAAABABEhMUFRcZH/2gAIAQEAAT8QLA1wKfPfXJQtTrCDzfmxwehyGEoq2LtCxTzaybK24Ky/3FcAZnuXNXF+EfIF4DJ//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"books\" title=\"\" src=\"/static/6b892b18c7b5396515cda321b3f504ea/c08c5/books.jpg\" srcset=\"/static/6b892b18c7b5396515cda321b3f504ea/0913d/books.jpg 160w,\n/static/6b892b18c7b5396515cda321b3f504ea/cb69c/books.jpg 320w,\n/static/6b892b18c7b5396515cda321b3f504ea/c08c5/books.jpg 640w,\n/static/6b892b18c7b5396515cda321b3f504ea/6a068/books.jpg 960w,\n/static/6b892b18c7b5396515cda321b3f504ea/eea4a/books.jpg 1280w,\n/static/6b892b18c7b5396515cda321b3f504ea/9568a/books.jpg 3024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>필자의 독서 취향은 이 쪽에 가깝다.(왠지 스파이가 하나 껴있는 것 같지만 신경쓰지말자.)</small>\n</center>\n<p>그럼 왜 책을 쓰게 되었냐? 뭐 여러가지 이유가 있겠지만 몇가지로 추려보자면 대충 이렇다.</p>\n<blockquote>\n<ol>\n<li>코드 같은 무형의 작품이 아니라 내 손에 잡히고 내 눈에 보이는 유형의 작품을 만들어 내보고 싶다.</li>\n<li>책을 쓰면서 내가 두루뭉술하게 알고 있던 지식을 정리할 수 있지 않을까?</li>\n<li>생각보다 코딩을 배우기 위해서 책으로 입문하시는 분들이 많았다.</li>\n</ol>\n</blockquote>\n<p>필자가 책 쓴다고 하니까 몇몇 분들께서 “와, 에반! 이제 책으로도 돈벌겠네요?”라는 드립을 간간히 쳐주셨는데 애초에 책을 팔아서 벌 수 있는 돈은 생각보다 많지 않다고 생각했기 때문에 별로 기대를 안했다.</p>\n<p>오히려 필자에게는 책이 돈을 벌 수 있는 부수입이라기보다 책을 집필했다는 나 자신의 만족과 내가 알고 있는 무엇인가를 다른 사람들에게 알릴 수 있는 점에서 매력으로 다가왔기 때문에 집필 제의를 받아들일 수 있었던 것 같다.</p>\n<p>그건 이 블로그도 마찬가지인데, 이 블로그로 돈을 벌어봤자 솔직히 얼마나 벌겠는가? 애초에 필자의 포스팅들은 대중적으로 소비할 수 있는 컨텐츠가 아니다. 그렇기 때문에 블로그가 진짜 흥해서 많이 벌어봤자 한달에 한 <code class=\"language-text\">100만원</code> 벌면 많이 버는 거다.</p>\n<p>물론 <code class=\"language-text\">100만원</code>이 작은 돈은 아니지만 그렇다고 내 인생이 바뀌는 돈도 아니니 별 의미는 없다고 생각한다. 그래서 필자는 그냥 필자의 생각과 지식을 다른 사람과 공유하고 싶은 마음으로 블로그를 운영하고 있다.</p>\n<h3>손에 잡히는 작품을 만들어 보고 싶다.</h3>\n<p>필자는 개발자다 보니까 매일 프로그램을 만들어 낸다. 하지만 프로그램은 현실에 존재하는 물건이라는 느낌이라기 보다는 좀 더 추상적인 느낌으로 다가온다. 손으로 만질 수도 없고 냄새를 맡아볼 수도 없는 그런 무형의 개념체 같은 느낌이다.</p>\n<p>하지만 필자에게 책이라고 하면 딱 떠오르는 이미지는 새 책을 펼쳤을 때 풍기는 종이 냄새, 책꽂이에서 책을 꺼내올 때 느껴지는 감촉, 책장을 하나하나 넘길 때 들리는 소리와 같이 여러가지 감각이 함께 하는 공감각적인 이미지이기 때문에 프로그램을 만드는 것과는 매우 다르게 다가왔던 것 같다. 결과물이 기계적인 무언가가 아니라 어떤 형태를 지닌 물건으로 나온다는 것이 굉장히 새로운 느낌이었다.</p>\n<p>그리고 결정적으로 필자는 5살 때부터 할아버지 손 붙잡고 광화문 교보문고를 굉장히 자주 다닌 <code class=\"language-text\">교보문고 빠돌이</code>다. 그런 추억이 있는 광화문 교보문고에 내가 쓴 책이 진열될수도 있다는 것을 상상하니 뭔가 기분이 뭉클하면서도 묘했던 것 같다.</p>\n<h3>책을 쓰면서 내 지식도 정리하자.</h3>\n<p>필자가 Vue에 관한 책을 쓰긴 했지만, 당연히 Vue에 대한 모든 것을 완벽하게 알고 있는 상태로 책의 집필을 시작한 건 아니다. 물론 2년 동안 Vue를 사용했던 짬이 있으니 익숙하긴 하지만 그게 <code class=\"language-text\">잘한다</code>라고 할 순 없다.</p>\n<p>그래서 필자도 다시 기초부터 Vue를 쭉 공부한다는 생각으로 공식 문서부터 다시 읽어봤다. 가만보면 이런 점이 블로그 포스팅과 비슷한데, 예를 들어서 <code class=\"language-text\">Vue의 라이프 사이클</code>에 대한 글을 작성한다고 하면 당연히 대부분의 사람들은 리서치를 한다. 왜냐면 내가 알고 있는 것이 정답이라고 확신하지 못하기 때문이다. 이런 점에서 보면 책이든 블로그든 불특정 다수의 사람들이 내 글을 읽는다는 점에서 느껴지는 부담감은 비슷한 것 같다.</p>\n<p>게다가 필자는 사실 Vue를 따로 공부했던 적이 없다. 그냥 회사에 입사했는데 그 회사에서 Vue를 이미 도입한 상태였기 때문에 필자도 Vue를 사용한 게 시작이었고, 그 이후로는 그냥 비즈니스를 개발하면서 필요한 건 그때그때 찾아보면서 사용했었다. <small>(그래서 입사 초반에 작성한 컴포넌트를 보면 완전 개판 오분전이다.)</small></p>\n<p>이런 이유로 필자는 “기왕 이렇게 된 김에 VueJS에 대한 내 지식을 제대로 한번 다져보자”라고 생각하게 되었던 것이다.</p>\n<h3>생각보다 코딩을 배우기 위해서 책으로 입문하는 사람이 많았다.</h3>\n<p>앞서 얘기했듯이 필자는 “공부는 책보다는 인터넷이 편하지!”라고 생각하는 사람이라서 기술 서적에 대한 시각이 회의적인 편이었다. 그래서 처음 친구가 공동 집필 제의를 해줬을 때도 책을 쓴다는 것 자체가 조금은 의미 없는 일로 느껴졌고 “요즘 시대에 누가 책보고 공부하냐? 다 인터넷으로 검색해서 하지.”라는 말도 했었는데, 그 친구 말이 딱 이랬다.</p>\n<blockquote>\n<p>야, 처음 공부하시는 분들은 인터넷에서 어떤 키워드로 뭘 찾아봐야 하는지도 알기 힘들수도 있어.</p>\n</blockquote>\n<p>이 얘기를 듣고 필자가 생각이 많이 짧았다는 것을 바로 깨달을 수 있었다. 어디선가 “인간은 무의식적으로 타인에게 자신의 모습을 투영하려고 한다”라는 글을 본 적이 있는데, 필자가 딱 그 모양이었던 것이다.</p>\n<p>필자가 늘 인터넷으로 공부하는 것이 익숙했기 때문에 당연히 다른 분들도 그럴 것이라 생각했던 것인데, 기본적으로 인터넷으로 공부를 한다는 것은 어떤 키워드로 구글링을 해야 내가 원하는 정보가 나오는 지 알고 있다는 전제가 필요하다는 사실을 잊고 있었다.</p>\n<p>당연히 처음 개발을 접하거나 혹은 구글링이 익숙하지 않은 분들은 이런 점에서 진입 장벽을 느낄 수 있는데, 필자는 그 부분을 생각 안하고 있던 것이다. 그래서 친구의 저 말을 듣고 필자는 이런 마음이 들었다.</p>\n<blockquote>\n<p>상대적으로 진입 장벽이 낮은 책을 통해 공부한 후에 혼자 구글링을 할 수 있는 역량을 만드는 게 더 나을 수 있겠다.</p>\n</blockquote>\n<p>물론 당연히 책 한권 읽었다고 갑자기 Vue의 절대 고수가 되거나 그런건 아니겠지만, 적어도 책을 읽고 전반적인 내용을 이해한 후에 더 알아보고 싶은 것은 혼자서 키워드를 찾아내서 구글링 및 공부를 할 수 있는 능력을 독자 분들이 가질 수 있도록 도와주고 싶었다.</p>\n<p>이 이외에도 이력서에 뭐라도 한줄 더 쓸 수 있다거나 “작가라니 조금 근사한 걸…?”처럼 좀 깨는 이유도 있고 “개발랭이들의 생태계에 조금이라도 도움이 될 수 있겠다”라는 이타적인 이유도 있었지만 필자의 동기 부여에 큰 영향을 끼친 대표적인 이유는 저 위의 3가지였다. 결국 고민 끝에 2018년 8월 말, 필자는 친구 손을 잡고 고난의 길로 들어서게 되었다.</p>\n<h2>책을 쓰기 전에</h2>\n<p>친구와 공동 집필이 결정된 후 제일 먼저 출판사 직원분과 역삼역 근처 카페에서 간단한 미팅을 가졌다. 내용은 뭐 대략 집필 계획서를 보내달라, 인세는 어떻게 나온다, 계약은 어떻게 진행될 것이다와 같은 간단한 내용들이었다.</p>\n<p>이때까지만 해도 필자와 친구는 대략 “이러이러한 내용을 써야겠다” 정도로만 얘기가 된 상태였지만 이제 출판사에 보낼 집필 계획서를 작성하기 위해 상세한 논의를 해야했다. 이때 협의되었던 몇가지 내용들 중 핵심 포인트는 “이 책을 읽고 회사에 입사했을 때 최소한 어플리케이션 개발 자체는 할 수 있어야 한다”였다.</p>\n<p>이 얘기는 지금 시중에 나와있는 다른 Vue 책을 몇개 읽어보고 나서 나오게 된 것이다. 시중에 판매되고 있는 책들은 대부분 해당 기술에 대한 API나 기술의 원리 등을 중점으로 설명하고 있었고, 예제 또한 간단한 <code class=\"language-text\">To Do</code> 리스트 또는 그와 비슷한 아키텍처를 가지는 작은 어플리케이션을 만들어 보는 편이었다.</p>\n<p>이런 책들을 읽어보며 필자와 친구가 느꼈던 아쉬운 점은 “이걸 읽고 바로 실무에 투입되면 일을 할 수 있나?”라는 점이었다. 아무리 책을 통해 Vue의 API가 어떤 것이 있는지, 라이프 사이클은 어떤 순서로 실행 되는 지와 같은 지식을 익혔다고 해도 회사에 입사한 후에 신입 개발자가 마주하는 문제들은 “어떤 라이프 사이클에 이 로직을 넣을까?”같은 단순한 문제가 아니라 “컴포넌트는 어떤 단위로 나누어야 하나?”, “API 통신 로직은 컴포넌트에 있어야 할까? 아니면 Vuex 스토어에 있어야 할까?”, “유저가 로그인한 상태는 어떻게 관리해야하지?”와 같이 한 수준 더 높은 문제들이다.</p>\n<p>그래서 필자는 독자 분들이 이 책의 예제를 한번 작성해보고 회사에 갔을 때, 그 문제를 해결하는 건 둘째치고 “어, 이거랑 비슷한거 언제 한번 해봤는데?”라는 생각이 들게 하는 것만 해도 성공이라고 생각했고 친구도 필자와 동일하게 생각하고 있었기 때문에 책의 큰 방향을 정하는 건 어렵지 않았다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 484px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b3c3597b655396c4c38d530c43a47da5/ff42b/plans.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdElEQVR42q1VS4/TMBDO/78hxAEJiRsHThwQEkIIcYATatG2tLtd+kjSNG2Tps37aX/M2A3bpj30sI5Gntieycw3nycGaNQNnm0Yfizx6kuBgS3otcFofI/ZbAbLttHv/4azWsG0LPR7PYxGY8RJgiDYUxANJFl0xYhziQ+/asw9veR5Hna+jzSJSd+omWWzduF7W1RliSxNIIW4HmGcCxSVQFoIRJlAVkmkpURSPM1Kr7Tw+YSCiLIGIQnbRP9nASMhR1mpRetSCTtj51kFvVZL5OpdqL2c1vNan9Mf1vZGkEi8+VZi7HDKQuFn2xYcZ4nh4E6l6ixJHw4w/TvBkvYYEsucY/JwjyzLEIUH1FWlU44o/Hc/KjyuhcJw6bjYbDaIohjueo0wDEmP6CMOXNfFfr9HQoXxyema9itylCQp6iNVDKHAFZBSgnWebxEeXZ3tDb1wefB0dNe7Dk8DMfaE4dvvJR7cFsM5loTZivg3HA6x3W5VavzuOI6SNE1V6kVRXNLmkEq8/lpi5GgMbXsJl4wZOzYOgkAZe+SYOcofyPNcFaM6FuLM4ROGQoWOK2l0sWv3eO6KIfggPTxr/Ry7a0WQR6fKuZRnYoTE7vc/I8y3tYrUNC1YdHdN01Sy2+2ISo7SGUfGkylT0hWM4/iigETsBi8+BfhjlwrDBRkuFgtVGHbM+LE+nU4VD3mNseWC8N6FQw6zacRZyvKEGqJLo/ZMu99NuVuUa4VoAW+oZXHbak7koijcvj72apj+sX0RPowRU4RTZQwZL6bKTQ2Wm8PLzyXurPYurxT4NjXYyWSieMdEPhwOtzlsfwHymX4B/wCJuw6H/YhU0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"plans\" title=\"\" src=\"/static/b3c3597b655396c4c38d530c43a47da5/ff42b/plans.png\" srcset=\"/static/b3c3597b655396c4c38d530c43a47da5/69538/plans.png 160w,\n/static/b3c3597b655396c4c38d530c43a47da5/72799/plans.png 320w,\n/static/b3c3597b655396c4c38d530c43a47da5/ff42b/plans.png 484w\" sizes=\"(max-width: 484px) 100vw, 484px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>어디선가 많이 본 짤이 떠오르는 장면</small>\n</center>\n<p>책의 큰 방향이 정해진 후 필자와 친구는 퇴근 후에 일주일에 한두번은 꼭 만나서 근처 카페로 간 뒤에 집필 계획서를 함께 작성하기 시작했다. 집필 계획서에는 대략 이런 정보가 포함된다.</p>\n<blockquote>\n<ol>\n<li>제목(가제)</li>\n<li>작성자</li>\n<li>작성일</li>\n<li>책의 핵심 컨셉</li>\n<li>내용 요약 및 특징</li>\n<li>이 책과 관련된 기술의 동향</li>\n<li>예상되는 탈고 날짜</li>\n</ol>\n</blockquote>\n<p>이외에도 몇가지 정보가 더 있지만 큰 틀은 대충 이렇다. 이때 작성한 집필 계획서는 향후 출판사가 책을 홍보할 때 사용하는 자료이기도 한 만큼 되도록이면 자세하게 작성하는 것이 좋다.</p>\n<p>어쨌든 출판사에서 요구한 대로 집필 계획서를 작성해서 제출한 뒤 본격적인 집필을 시작했다.</p>\n<h2>개발자처럼 집필하자!</h2>\n<p>처음에는 <code class=\"language-text\">구글 독스(Google Docs)</code>를 사용하여 집필을 시작했다. 구글 독스는 <code class=\"language-text\">H1</code>, <code class=\"language-text\">H2</code>과 같은 글꼴 스타일 기능을 제공해주기 때문에 미리 합의한 스타일을 정해놓고 문서를 작성할 수 있었다. 하지만 구글 독스로 챕터 3개 정도를 작성했을 때, 필자는 구글 독스가 굉장히 비생산적이라는 생각이 들기 시작했다.</p>\n<p>글꼴을 변경하거나 이미지를 첨부하는 등의 행위를 할 때 변경하고자 하는 부분에 커서를 위치시킨 뒤 마우스로 메뉴를 클릭해서 진행해야하는 방식이 너무 번거로웠고, 그때마다 집중의 흐름이 끊겨서 불편했다. 게다가 각 챕터 별로 문서를 새로 만들때마다 글꼴 스타일을 출판사 규격에 맞게 매번 설정해줘야 한다는 점 또한 생산성을 저하시켰다.</p>\n<p>그리고 필자와 친구는 서로 놓치고 간 부분을 잡아주거나 문체의 통일을 위해 구글 독스 문서에 코멘트를 남기는 방식으로 서로 작성한 부분을 리뷰했다. 그러나 이 방식은 필자가 생각하기에 조금 비생산적이었는데, 리뷰를 하는 입장에서는 이번에 추가된 내용이 무엇인지, 삭제된 내용이 무엇인지 알기 힘들었고, 리뷰를 받는 입장에서는 댓글이 문서의 어느 부분에 달렸는지도 한 눈에 알아보기가 힘들었다.</p>\n<p>그래서 필자는 “어떻게 하면 글쓰기 외의 다른 행동에 시간을 쓰지 않고 글쓰기에만 집중할 수 있을까?” 라는 고민을 하기 시작했다.</p>\n<h3>Markdown을 사용하여 책 집필하기</h3>\n<p>필자가 고민한 결과로 선택한 것은 바로 <code class=\"language-text\">마크다운(Markdown, md)</code> 포맷이었다. 필자와 친구 둘 다 개발자이기 때문에 일단 마크다운 포맷은 우리에게 굉장히 익숙한 포맷이었고, 문서의 전체적인 스타일도 이미 정해져있기 때문에 스타일에 관한 걱정이나 별다른 작업 없이 계속 글쓰기에만 집중할 수 있을 것 같았다.</p>\n<p>하지만 결국 출판사에 원고를 보낼때는 <code class=\"language-text\">docx(MS Word)</code> 파일로 보내야 했고, 다른 리뷰어 분들에게 책에 대한 리뷰를 받을 때에는 <code class=\"language-text\">PDF</code> 파일로 보내드려야 했기 때문에 <code class=\"language-text\">md to docx</code> 컨버팅 혹은 <code class=\"language-text\">md to pdf</code> 컨버팅을 할 수 있는 방법을 찾아야 했다.</p>\n<p>그래서 찾아낸 게 <a href=\"https://pandoc.org/\" target=\"_blank\" rel=\"nofollow\">pandoc</a>과 <a href=\"https://github.com/alanshaw/markdown-pdf\" target=\"_blank\" rel=\"nofollow\">markdown-pdf</a>라는 라이브러리였다. <code class=\"language-text\">pandoc</code>은 홈페이지에 Universal Document Converter라고 홍보하고 있을 만큼 다양한 포맷의 문서 변환을 지원해준다. 물론 <code class=\"language-text\">Markdown to Docx</code>도 지원한다. 하지만 <code class=\"language-text\">Markdown to PDF</code>는 지원하지 않기 때문에 해당 기능을 구현하기 위해 다른 라이브러리를 찾아야했는데, 그 과정에서 <code class=\"language-text\">markdown-pdf</code>라는 라이브러리를 찾았다.</p>\n<p>여기까지 리서치를 마친 필자는 친구에게 구글 독스에서 마크다운으로 갈아타자는 제안을 했고, 친구도 고민 끝에 수락하여 이후 책의 집필은 모두 마크다운과 깃(Git)을 사용하여 진행했다.</p>\n<h3>Git을 이용한 문서의 버전관리</h3>\n<p>구글 독스를 사용할 때 겪었던 또 다른 문제점 중 하나가 바로 문서의 버전관리가 힘들다는 것이다. 물론 구글 독스도 <code class=\"language-text\">파일 > 버전기록</code> 메뉴에 들어가면 각 버전에서 추가된 내용이나 삭제된 내용을 확인할 수 있지만, 그 버전이 정확히 어떤 단위로 묶인 단위인지 명확하지않다는 것이 단점이다.</p>\n<p>하지만 깃을 사용하면 커밋을 할 때 의미있는 단위로 나누고 정확한 커밋 메세지를 작성함으로써 정확히 문서의 어떤 부분을 수정했는지 상대방에게 알릴 수 있다. 또한 일정 단위의 문서를 작성하고나면 <code class=\"language-text\">풀 리퀘스트(Pull Request)</code>를 통해 상대방에게 리뷰를 받는 식으로 서로 작성한 부분에 대해서 최소 1번 이상은 리뷰를 하도록 할 수 있다.</p>\n<p>그래서 필자와 친구는 <code class=\"language-text\">깃허브(Github)</code>에 레파지토리를 하나 생성하고 챕터 단위로 하나씩 맡아서 집필을 진행하되, 내용을 마스터 브랜치에 머지하고 싶을 땐 반드시 <code class=\"language-text\">풀 리퀘스트</code>를 보내고 머지하도록 협의하였고 그 결과 서로 작성한 부분이 아니더라도 내용을 파악하는데 큰 어려움이 없이 집필을 진행할 수 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ab6fb78bbb128bf0fd837c9b548a5ae/6569d/review.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 69.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9klEQVR42pWUDY+cIBCG/f9/rW2aXu9y7tb1E79FRF1PQPbtwDbpJU3bPZMnw4CMA/OOgVxWdANHz0e0/YCm6yFlA9F/xrpkOCxgjoOwf3DQvDYG6h3BVlRYLxlUXuHadhiyDqKoMeQnjCyFqBrIusXcdJAOGk805xjLGlpI2HnFIRcYssF2jrC/hMAlhXabsxIiLjDQR8Y4Q3v+gSnNyE/QRzFxAaexzAvotoel04ELz22cELSmQ6lKFNccfOfIuwKMMyR1irTNEdcJ4ipBVMaI2AUXsm4t63IUfYFiYBBqgjQSUs0I4ijEKXxCwwewukJHdhAC132HPoy/v8Na2NvtF7/HxtIa+ZrsdX/zfrCMA2TfYqCijOOIjorCOcc8L+QLLFS0R54bfcARvIYnfPry1QdjZQXGSm85+ZOcIWeC7L8eSyfY6UTOBkmS4HQ6+wkx0V1I6YO0HVVbTJThAqXU4xlGVLVv35/95rpuUDctGmIkf12v2LYNy7q6HY9leCbZPPmAAjlJoW4aJGmKljSptPbiNSTY/2Xn3vMZcipI31TYlfEBjLmr33G4brB37t3yd9y7SlOnJOcQcfiMeX2D1vdM3KL2gT/GrjQCF51Rh5QEq2rEWYGJJPP+oh/FaTNwxxReHivcj2Kintx2V9XbxwNai5/EnTY9Y+pYrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"review\" title=\"\" src=\"/static/4ab6fb78bbb128bf0fd837c9b548a5ae/6af66/review.png\" srcset=\"/static/4ab6fb78bbb128bf0fd837c9b548a5ae/69538/review.png 160w,\n/static/4ab6fb78bbb128bf0fd837c9b548a5ae/72799/review.png 320w,\n/static/4ab6fb78bbb128bf0fd837c9b548a5ae/6af66/review.png 640w,\n/static/4ab6fb78bbb128bf0fd837c9b548a5ae/d9199/review.png 960w,\n/static/4ab6fb78bbb128bf0fd837c9b548a5ae/21b4d/review.png 1280w,\n/static/4ab6fb78bbb128bf0fd837c9b548a5ae/6569d/review.png 1328w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>리뷰를 하면 좋은 점.jpg</small>\n</center>\n<p>물론 나중에 전체 리뷰를 할 때 한번에 고쳐야 될 부분이 많아지는 경우가 있어서 <code class=\"language-text\">충돌(Merge Conflict)</code> 때문에 조금 고생하기는 했지만, 구글 독스로 진행했다면 두 명이 동시에 수정한 부분이 어딘지도 모르고 넘어갔을 가능성이 컸을 것이다.</p>\n<h3>문서 컨버팅 하기</h3>\n<p>이렇게 작성된 문서는 중간중간 <code class=\"language-text\">PDF</code>로 변경되어 부분 출판되었다. 밑에서 다시 설명하겠지만, 집필 초기에 친구가 제안했던 “책의 타겟 독자층을 모집해서 우리 책으로 스터디를 진행해보자”라는 아이디어를 냈었다. 그래서 매주 토요일마다 집필된 책을 참고 자료로 사용하여 스터디를 진행하고 있었기 때문에 지속적으로 <code class=\"language-text\">md</code> 파일을 <code class=\"language-text\">PDF</code>로 변경해야했었다.</p>\n<p>그래서 <code class=\"language-text\">markdown-pdf</code> 라이브러리를 사용하여 간단한 출판 스크립트를 작성했고 챕터 하나의 집필이 끝날 때 지속적으로 부분 출판하여 스터디에 참여하신 분들이 끊기지 않고 진도를 나갈 수 있도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// vuejs-book/scripts/publish.js</span>\n<span class=\"token function\">glob</span><span class=\"token punctuation\">(</span><span class=\"token string\">'book/**/*.md'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> mdFiles</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> pdfFilePaths <span class=\"token operator\">=</span> mdFiles<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">path</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Ready </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> newPath <span class=\"token operator\">=</span> path\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'book/'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>destDir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.md'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.pdf'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> newPath<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token function\">mdpdf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">preProcessHtml</span><span class=\"token operator\">:</span> <span class=\"token function\">preProcessHtml</span><span class=\"token punctuation\">(</span>basePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cssPath</span><span class=\"token operator\">:</span> <span class=\"token string\">'./custom.css'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">remarkable</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">html</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>mdFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">to</span><span class=\"token punctuation\">(</span>pdfFilePaths<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pdfFilePaths<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pdf</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Created </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pdf<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">preProcessHtml</code>는 컨버팅을 진행한 후 책에 들어간 이미지의 경로가 맞지 않아 <code class=\"language-text\">pdf</code>파일에서 이미지가 출력되지 않는 이슈 때문에 작성한 함수인데, <code class=\"language-text\">마크다운</code>을 우선 <code class=\"language-text\">HTML</code>로 파싱한 후 <code class=\"language-text\">img</code> 엘리먼트를 찾아서 <code class=\"language-text\">file://</code> 프로토콜을 사용한 링크로 바꿔주는 역할을 한다. 이 과정을 거치고 난 후 <code class=\"language-text\">HTML to pdf</code> 컨버팅을 진행했더니 이미지가 정상적으로 첨부되는 것을 확인할 수 있었다.</p>\n<p>이렇게 출판한 <code class=\"language-text\">pdf</code> 파일들을 <code class=\"language-text\">구글 드라이브</code>에 업로드해서 스터디원이나 리뷰어 분들이 부분 출판된 내용을 바로바로 확인할 수 있도록 진행하였다. 그리고 출판사에 보낼 <code class=\"language-text\">MS Word</code>파일은 <code class=\"language-text\">pandoc</code>을 이용하여 컨버팅하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// vuejs-book/scripts/deploy.js</span>\n<span class=\"token function\">glob</span><span class=\"token punctuation\">(</span><span class=\"token string\">'book/**/*.md'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> mdFiles</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  mdFiles<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">path</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> chapter <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Ready for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chapter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> newPath <span class=\"token operator\">=</span> path\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'book/'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>destDir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chapter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/README.md</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chapter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.docx</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-f markdown -t docx -o </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// https://pandoc.org/MANUAL.html#syntax-highlighting 코드 하이라이팅 볼것</span>\n    <span class=\"token keyword\">const</span> originSource <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> source <span class=\"token operator\">=</span> originSource<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\(\\/assets</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>basePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/assets</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">nodePandoc</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Finish </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chapter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 작성된 문서 컨버팅 스크립트들은 <code class=\"language-text\">npm script</code>로 등록하여 언제든 간편하게 <code class=\"language-text\">md</code> 포맷을 <code class=\"language-text\">pdf</code>와 <code class=\"language-text\">docx</code> 포맷으로 뽑아낼 수 있도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"publish\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node scripts/publish.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node scripts/deploy.js\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 처음에 <code class=\"language-text\">md</code> 포맷을 <code class=\"language-text\">pdf</code>로만 변경할 때는 별 문제가 없었는데 나중에 <code class=\"language-text\">pandoc</code>을 통해 <code class=\"language-text\">docx</code> 포맷으로 변경할 때 글꼴 스타일에 관련된 이슈가 발생했다.</p>\n<p><code class=\"language-text\">pandoc</code>을 사용하여 <code class=\"language-text\">docx</code> 포맷으로 컨버팅할 때 일명 <code class=\"language-text\">레퍼런스 문서</code>라는 것을 설정할 수 있는데, 이 문서에 커스텀 글꼴 스타일을 설정해놓으면 컨버팅 되는 문서에서 이 문서의 글꼴 스타일을 참고하여 동일한 글꼴 스타일을 사용한 문서로 만들어준다. 그래서 처음에는 이 기능만 믿고 “출판사 포맷대로 글꼴 스타일을 설정해놓은 레퍼런스 문서를 하나 만들어놓으면 되겠구나”했었는데 막상 레퍼런스 문서 옵션을 사용하여 스크립트를 돌려보니 문서에 첨부한 코드 블록의 스타일이 와장창나는 사태가 발생했다.</p>\n<p>그래서 결국은 마지막에 출판사에 원고를 보낼 때에는 <code class=\"language-text\">pandoc</code>을 사용하여 <code class=\"language-text\">md</code> 포맷을 <code class=\"language-text\">docx</code> 포맷의 기본 글꼴 스타일로 컨버팅 한 후에 그 문서의 글꼴 스타일을 직접 수작업으로 변경하는 방법을 사용했다. 뭐 마지막에는 꽤 삽질을 하긴 했지만 그래도 <code class=\"language-text\">md</code> 포맷을 택함으로써 집필 과정에서 시간을 많이 줄일 수 있었고, 게다가 <code class=\"language-text\">Git</code>을 사용한 버전관리도 할 수 있엇으므로 결과적으로는 좋은 선택이었다고 생각한다.<small>(라고 필자만 생각하고 있는 것 같다. 친구는 별로였던 듯…)</small></p>\n<h2>공동 집필 과정에서의 충돌</h2>\n<p>필자는 혼자 책을 집필한 것이 아니라 친구와 함께 공동 집필을 한 것이기 때문에 서로의 의견을 일치시키고 합의점을 도출해내는 커뮤니케이션도 굉장히 중요한 일 중 하나였다.</p>\n<p>사실 필자와 이 친구는 함께 사이드 프로젝트를 진행해본 경험도 있고 평소에도 성격이 꽤 잘맞는 편이라서 같이 해외여행도 다녀온 막역한 사이이다. 하지만 책이라는 매체의 특성 상 코드와 다르게 배포 후 수정이 불가능해서 “최대한 완벽하게 끝내고 싶다”라는 마음 때문에 서로 의견의 일치를 보는 것이 평소보다 더 어려웠던 것 같다.</p>\n<h3>설계에 대한 관점의 차이</h3>\n<p>처음에 의견 충돌이 많이 났던 것은 예제 어플리케이션의 설계였다. 책에 들어가는 예제는 불특정 다수에게 노출되는 정보이기 때문에 최대한 주관성을 배제하고 널리 통용될 수 있는 지식을 사용하여 작성되어야한다. 그래서 필자와 친구는 “예제 어플리케이션의 설계를 어떻게 가져갈 것인가?”로 엄청 많은 이야기를 나누었다.</p>\n<p>간단하게는 컴포넌트의 네이밍과 프로젝트의 디렉토리 구조에서부터 스토어의 상태의 변경을 위한 액션은 어떤 컴포넌트가 Dispatch하는 것이 맞는 것이냐와 같이 심도있는 주제까지 다양한 이야기를 나누었다. 결국 이런 끊임없는 커뮤니케이션을 거쳐서 합의점을 도출해내고 나서야 예제 어플리케이션 개발에 들어갈 수 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b0843883f37a5a8955d1b73bfc9d2333/077b7/meeting.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADD0lEQVR42oWUa08iSRSG/f+bmNkPO2pgBFQIgtLNTRp0hnvb3G+iwAADCA6O1wG8jIjPVrf7YbMZ3Ure1Knq1JNzTnW9S/f394yGQ4anp1xfXzEajTgVca/f5+LykrOz74aGxv7QmMfn5/TF916vx3g8Ns4MBWMwGLD0NH+iUq1RKFVotdo0ThpUKiV63Q73d1Nmk1smP2/5eXPNzdWV0CV3syl3d3foyTw+Php6eHgw9pZeXhb0OwJSzlGvFvl6XKJeztA5zjM4KdKtZWiXNVpFlXw6SkzxMug00cfLywv/HQbwdtzh/FuNq+EJP/p1jisazeohp80CXysq9VycqhZFjYZRfDt0mvV3gIsFN9/bJJJx1MM0bZFZQ8BymRjlfJJyNkYmuU8uGSYvlAx76Lcb7wMvR01RrkY8lUA7TJJRoyhhBY8vgC/gZ8OxzV5QQovvcRBw0f2/DAfdiujdId2G6N1JRpScolaMk05ECIf8RPf9fIl4iR/IhGQ77cbR+8BOI0cpd0C1EDNA1XyUZFxB9kkEgn58fpmg3yOgEv6dTVrHtbeBCwFsHomeqXsUM6JXqoKWVkR2IZSQF4+0gyy7kSUniih31/GJo3LxH+Did8Bn6qUE6ZiXVNRH7MBD7LNMMiZKjci4XA6CXidhv5OgZMdhXaFUyL0CF28Ay9kvxPd3RI8k9hUXkZCLoG+bLfsG1g0rm1tWbLZ1tjbWWfv4gXIhaxxe/Bb4/ExOlBgJ2IkEnYR8DsIBJ9KunVWTmTWTCavFzMeVFUymVZaX/6CYz7wNfJ7PiUc8+Nxm/B6boaC8hSyaL7ltSC4bnm0Lu85PuB1mLKvL5LPqK1Ako1/Mv7U0F29Z8YreWP7EbV8VWhMAM163FdllMWAepwXXpklojfW/RIa59NsZ6g+8kNfQVPFSUuJVHKaMtV5WVlONWVOT4iKy4vbFj68mhIHUhQOdGS6ju47uTrrbXFxc6BnO6Xa/0Wy2aDSaIu7SbncM93h1kl/ci/hBxLPZjF9PT4bLTKdTYz2ZTIxYl77/N/+2Z+cT2oKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"meeting\" title=\"\" src=\"/static/b0843883f37a5a8955d1b73bfc9d2333/6af66/meeting.png\" srcset=\"/static/b0843883f37a5a8955d1b73bfc9d2333/69538/meeting.png 160w,\n/static/b0843883f37a5a8955d1b73bfc9d2333/72799/meeting.png 320w,\n/static/b0843883f37a5a8955d1b73bfc9d2333/6af66/meeting.png 640w,\n/static/b0843883f37a5a8955d1b73bfc9d2333/d9199/meeting.png 960w,\n/static/b0843883f37a5a8955d1b73bfc9d2333/077b7/meeting.png 1166w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Form 컴포넌트의 정의부터 시작해서 어떤 라이브러리를 사용할 것인지까지 일일히 다 정했었다.</small>\n</center>\n<h3>일하는 스타일의 차이</h3>\n<p>두 번째는 바로 <code class=\"language-text\">일하는 스타일</code>이었다. 사실 이게 정말 의외인 부분이었는데, 이미 필자는 이 친구와 사이드 프로젝트를 진행한 경험이 있었고, 도중에 의견 충돌이 나더라도 굉장히 서로 만족할 만한 결론을 도출해내면서 진행해왔기 때문에 이번에도 마찬가지일 것이라고 생각했다. 근데 이게 돈받고 하는 일이라서 그런지, 아니면 마감 기한이 정해져 있는 일이라서 그런지는 몰라도 사이드 프로젝트 때와는 굉장히 다른 상황이 펼쳐졌다.</p>\n<p>일단 필자는 어떤 일을 하든 마감 기한에 쫓기면서 하는 스타일이 아니다. 이렇게 할 수 있는 이유는 필자가 일하는 중간에 생기는 변수를 최소화하고 리스크가 생길 것 같은 일을 아예 차단해버리는 스타일이기 때문이다. 그리고 결정적으로 성격 자체가 좀 느긋하다. 좋게 말하면 느긋한거고 나쁘게 말하면 게으른거긴 한데, 뭐 어쨌든 그런 성격이다.</p>\n<p>하지만 이 친구는 뭘 하든 열정이 장난아니다. 하기 싫은 일이든 하고 싶은 일이든 항상 최선을 다하는 스타일이다. 이 친구가 이렇게 할 수 있는 이유는 기본적으로 책임감이 큰 성격이라서 그렇다고 생각한다. <small>(뭐 아닐 수도 있다. 아무리 친구라도 모르는 부분은 있으니)</small></p>\n<p>이 친구의 바로 이런 부분들이 필자에게 굉장히 자극을 주는 부분이고 친구라는 부분을 제외하고 개발자 대 개발자로 생각해도 굉장히 좋은 개발자라고 생각한다.</p>\n<p>하지만 같이 마감기한이 있는 일을 하다보니 이 친구 입장에서는 필자가 적극적으로 참여하지 않는다는 마음이 있었던 것 같고, 필자는 필자대로 “이게 이렇게까지 스트레스를 받으면서 할 일은 아닌데…”라는 생각이 있었던 것 같다. 그리고 이게 사람인 이상 마감기한이 다가올수록 “출판사와의 약속을 지키지 못하면 어떡하나”라는 불안감도 들기 마련이고, 둘 다 직장을 다니고 있기 때문에 회사 일은 또 회사 일대로 해야하는 상황이었다. 그래서 육체적인 피로감과 정신적인 피로감이 점점 쌓여서 그랬던 것 같기도 하다.</p>\n<p>그래도 다행히 이 친구와 필자의 가장 큰 공통점은 커뮤니케이션과 같은 소프트 스킬의 중요성을 알고 있다는 점이었다. 그래서 서로 마감기한에 쫓겨 스트레스를 받고 있는 상황에서도 최대한 서로를 배려하고 서로의 의견을 많이 듣고 교환하는 과정을 통해 큰 갈등 없이 책 집필을 마칠 수 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5c86ae98061c29fde3a0ee44cdef59c7/acb04/halong.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMFBP/EABYBAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABaec2OkFhN3Df/8QAHBAAAgICAwAAAAAAAAAAAAAAAQMAAgQREhQx/9oACAEBAAEFAkuKpVvKdo7ck1XjbqkptthIHqp//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPwFG3//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB8QAAIBAgcAAAAAAAAAAAAAAAABAhARMTIzUWFxgf/aAAgBAQAGPwK0somrcmmSlc2HgLsXlP/EABwQAQEBAAMAAwAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPyFSD9PjSvZzI2P7midGd5bB46MQKQFT1a5jenRL0GvJy7//2gAMAwEAAgADAAAAEFcHfP/EABYRAQEBAAAAAAAAAAAAAAAAAAEgMf/aAAgBAwEBPxApsP/EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8QqZVv/8QAIBABAAMAAQMFAAAAAAAAAAAAAQARIUExUWFxkbHB0f/aAAgBAQABPxC/0nVlu4+0CiiLTwHD1lFVE1v4hj8aErbhFdgUdQB44g5oIgvSWp69Z336lstXTVLSfkvP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"halong\" title=\"\" src=\"/static/5c86ae98061c29fde3a0ee44cdef59c7/c08c5/halong.jpg\" srcset=\"/static/5c86ae98061c29fde3a0ee44cdef59c7/0913d/halong.jpg 160w,\n/static/5c86ae98061c29fde3a0ee44cdef59c7/cb69c/halong.jpg 320w,\n/static/5c86ae98061c29fde3a0ee44cdef59c7/c08c5/halong.jpg 640w,\n/static/5c86ae98061c29fde3a0ee44cdef59c7/acb04/halong.jpg 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>저희 친해요 🖐</small>\n</center>\n<h2>책 리뷰하기</h2>\n<p>책을 집필하는 동안 필자와 친구가 풀 리퀘스트를 사용한 리뷰를 계속 하긴 했지만 작가 시점의 리뷰는 주로 <code class=\"language-text\">오탈자 수정</code>, <code class=\"language-text\">문체의 통일</code> 등의 기계적인 리뷰라면 다른 리뷰어 분들이 해주시는 리뷰는 “이 내용이 정말 도움이 되는가?”, “이런 내용이 있으면 더 좋을 것 같다.”와 같이 작가의 시점에서는 알아차리기 힘든 정성적인 리뷰들이다. 그래서 책을 집필하는 중이나 책을 집필한 후에 리뷰어 분들의 피드백을 최대한 많이 수집하고자 했다.</p>\n<p>사실 필자는 개발자 인맥도 별로 없고 사람 만나는 걸 좋아하는 편도 아니라서 직장 동료 외에는 리뷰를 부탁할 수 있는 사람이 많지 않았다. 하지만 친구는 필자보다 인맥도 풍부하고 사회성도 좋아서 리뷰를 부탁할 수 있는 사람도 많았다.<small>(대단쓰…)</small> 그런 이유로 책 리뷰는 필자 혼자서는 진행하지 못했을 일이고 진짜 친구 덕이 크다. 그리고 필자도 이 경험을 바탕으로 “아 나도 네트워킹 좀 해야하나…?”라는 생각이 싹트기 시작했다.</p>\n<h3>스터디원들의 리뷰</h3>\n<p>위에서 한번 설명했듯이, 책을 처음 집필할 때 이런 리뷰의 중요성을 알았던 친구가 먼저 책의 타겟 독자층을 모집해서 우리 책으로 스터디를 진행해보자는 아이디어를 제안해주었고 필자는 처음에는 고민했지만 다른 리뷰어분들이 해주시는 리뷰가 중요하다는 말에 설득당해서 스터디를 진행하게 되었다.</p>\n<p>필자는 낯을 가리는 성격이라 처음 보는 사람들과 스터디를 한다는 것에 대해서 익숙하지가 않다. 그래서 처음에는 “내가 스터디원들에게 뭘 해드려야하지…?”라는 고민을 굉장히 많이 했는데 막상 스터디가 시작되고 나니 그런 걱정은 필자의 기우였다는 것을 알 수 있었다. 스터디를 지원해주신 모든 분들이 굉장히 열정적으로 질문도 먼저 건네주시고, 더 알고 싶은 부분에 있어서도 확실하게 의사 표현을 해주셔서 필자도 편한 마음으로 스터디를 진행할 수 있었다. 그리고 모두 성격이 좋으셔서 낯가림이 심한 필자도 잘 어울릴 수 있었다.</p>\n<p>책을 집필하는 동안 실제 타겟 독자층이었던 스터디원들로부터 피드백을 받으며 책을 수정하다보니까 뭔가 책에 대한 자신감도 생겼고, 필자가 작성한 책으로 스터디하시면서 막힘없이 학습해나가시는 모습들을 보고 약간 뿌듯함도 느꼈던 것 같다. 실제로 필자는 내가 먼저 나서서 타인에게 지식을 공유하고 싶다는 욕구는 없는 편이었는데, 이번에 책도 집필하고 스터디를 진행하면서 필자는 별 거 아니라고 생각했던 지식들이 다른 분들에게는 큰 도움이 되는 것을 보고 교육에도 조금 관심이 생기기도 했고 낯가림도 조금은 나아진 것 같다. <small>(그래도 역시 인싸의 길은 멀고도 험하다…)</small></p>\n<h3>현업 개발자분들의 리뷰</h3>\n<p>책을 모두 집필하고 난 후에 주위의 현업 개발자 분들께도 리뷰를 부탁했는데, 이런 분들을 <code class=\"language-text\">베타 리더</code>라고 부른다고 한다. 필자도 이번에 처음 알았다.</p>\n<p>베타 리더 분들은 각자의 여유 시간에 따라서 <code class=\"language-text\">전체 리뷰</code>와 <code class=\"language-text\">챕터 리뷰</code>로 나눠서 진행해주셨는데, 필자가 집필하면서 놓쳤던 부분을 되짚어 주시기도 하고 이해가 어려울 것 같은 설명에 대해서도 지적해주시는 등 정말 꼼꼼하게 피드백을 해주셔서 굉장히 든든했다.</p>\n<h2>마치며</h2>\n<p>사실 처음 필자는 “책? 그냥 조금 긴 포스팅 느낌일 것 같은데”라는 안일한 마음으로 시작했는데, 얼마 지나지 않아서 그게 아니라는 것을 깨달았다. 이 포스팅에는 작성하지 않았지만 예제 어플리케이션을 만드는 일도 만만치 않았는데, 문제는 예제 어플리케이션을 수정하면 같은 부분을 책에서 찾아서 코드 블록을 수정하고 코드에 대한 설명도 그에 맞춰서 바꿔줘야하는 것이었다. <small>(게다가 클라이언트 어플리케이션 2개와 API 서버까지 만들어야했다.)</small></p>\n<p>예제 어플리케이션과 책의 내용이 조금만 싱크가 어긋나도 독자는 상당한 혼란을 느낄 수 있기 때문에 이런 부분을 꼼꼼히 체크해야했는데, 이게 제일 힘들었던 것 같다.</p>\n<p>그리고 포스팅과 다르게 책은 한 주제의 호흡을 굉장히 길게 가져가야 하는 매체이다보니까 앞 쪽의 내용과 뒤 쪽이 내용의 컨셉이 달라지면 안되는데, 필자는 이렇게 긴 글을 써본 적이 없기 때문에 주기적으로 앞 쪽의 내용과 문체를 확인해가면서 집필을 해야했다.</p>\n<p>그래도 이렇게 책을 한번 집필하고 나니까 뿌듯하기도 하고 글을 적는 행위에도 많이 익숙해져서 한 주에 한두번 포스팅 올리는 것 정도는 크게 어렵지 않아서 전체적으로는 좋은 느낌이다. 이 책을 보시는 많은 예비 독자들이 <code class=\"language-text\">유익했다</code>라고 느낄 수 있었으면 좋겠다. 특히 프론트엔드 개발을 처음 시작하시려는 분들이 이 책을 읽고 “어 뭐야 생각보다 별 거 없네?”라고 생각했으면 진짜 좋을 것 같다.</p>\n<p>그리고 마지막으로 바쁜 개인 시간 쪼개서 책을 리뷰해주신 베타 리더분들과 기술 서적 집필이라는 좋은 기회를 제안해준 김영훈 개발자에게 <strong>압도적인 감사</strong>를 올리고 싶다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/4b190/thanks.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAQBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFtswTKxRyQpB//xAAeEAACAgAHAAAAAAAAAAAAAAABAgADBBESEzEyM//aAAgBAQABBQIVFpUldj6QGXhSFbZGZmI9E6//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAeEAACAgICAwAAAAAAAAAAAAABAgAxESEDECKBof/aAAgBAQAGPwJnY4UGeNCwYwrcbjKnA+zQ2YTmzDE99f/EAB0QAAMAAgIDAAAAAAAAAAAAAAABESExEHFRgbH/2gAIAQEAAT8hyA5S4ZvuPgSOeGnpF7nHWhKs6BUT2h8OG1n/2gAMAwEAAgADAAAAEBMPAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB0QAQEAAwACAwAAAAAAAAAAAAERACExYfAQceH/2gAIAQEAAT8QNdEUtY7mbrYqXbUJ5xNgnKwwIEwQz1dAt/MCsCFCQliW4ZAU7NWa74zj278B7PrP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"thanks\" title=\"\" src=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/c08c5/thanks.jpg\" srcset=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/0913d/thanks.jpg 160w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/cb69c/thanks.jpg 320w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/c08c5/thanks.jpg 640w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/4b190/thanks.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>만약 스터디 회식 때 혹시 노래방을 가게 된다면 필자가 압도적 감사의 마음으로 옆에서 탬버린을 <code class=\"language-text\">16비트</code>로 쳐보겠다. <small>(준코에서 탬버린치다가 2개 부셔먹은 경력 보유 중)</small></p>\n<p>참고로 필자의 책은 <a href=\"http://www.yes24.com/Product/Goods/76639545\" target=\"_blank\" rel=\"nofollow\">Yes24</a>에서 구경해볼 수 있지만, 아직 초판 인쇄가 끝나지 않았기 때문에 배송은 다음 달부터 가능하다.</p>\n<p>하지만 필자는 인터넷에서 책을 구매하는 것보다 나중에 <code class=\"language-text\">교보문고</code>같은 오프라인 서점에 책이 입고되면 가서 직접 한번 읽어보고 사는 것을 추천하고싶다. 이 글을 읽는 미래의 독자님들께서 교보문고에 갔을 때 <code class=\"language-text\">민트색 표지에 커피 일러스트</code>를 보고나서 필자를 떠올리고 한번 책을 펼쳐보게 만드는 것만으로도 필자는 행복해질 것 같다.</p>\n<p>이상으로 흔한 개발랭이의 작가 입문기 포스팅을 마친다.</p>","fields":{"slug":"20190721-vuejs-book-retrospective","path":"/2019/07/21/vuejs-book-retrospective/","lang":"ko"},"frontmatter":{"title":"흔한 개발랭이의 작가 입문기","date":"2019-07-21","categories":["에세이"],"tags":["Vue","회고","개발 책","프로그래밍 책","공동집필","커피 한잔 마시며 끝내는 VueJS","책 집필","개발자"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#58b8a8","images":{"fallback":{"src":"/static/36bf9d7dadae859391a4aa978c7ae097/3a812/thumbnail.jpg","srcSet":"/static/36bf9d7dadae859391a4aa978c7ae097/1cda5/thumbnail.jpg 80w,\n/static/36bf9d7dadae859391a4aa978c7ae097/b1a47/thumbnail.jpg 160w,\n/static/36bf9d7dadae859391a4aa978c7ae097/3a812/thumbnail.jpg 320w,\n/static/36bf9d7dadae859391a4aa978c7ae097/698e2/thumbnail.jpg 640w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/36bf9d7dadae859391a4aa978c7ae097/3e5ca/thumbnail.webp 80w,\n/static/36bf9d7dadae859391a4aa978c7ae097/b72f1/thumbnail.webp 160w,\n/static/36bf9d7dadae859391a4aa978c7ae097/fc5c5/thumbnail.webp 320w,\n/static/36bf9d7dadae859391a4aa978c7ae097/c5332/thumbnail.webp 640w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#58b8a8","images":{"fallback":{"src":"/static/36bf9d7dadae859391a4aa978c7ae097/2c11c/thumbnail.jpg","srcSet":"/static/36bf9d7dadae859391a4aa978c7ae097/23110/thumbnail.jpg 750w,\n/static/36bf9d7dadae859391a4aa978c7ae097/da421/thumbnail.jpg 1080w,\n/static/36bf9d7dadae859391a4aa978c7ae097/a2093/thumbnail.jpg 1366w,\n/static/36bf9d7dadae859391a4aa978c7ae097/2c11c/thumbnail.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/36bf9d7dadae859391a4aa978c7ae097/6858b/thumbnail.webp 750w,\n/static/36bf9d7dadae859391a4aa978c7ae097/f5547/thumbnail.webp 1080w,\n/static/36bf9d7dadae859391a4aa978c7ae097/29310/thumbnail.webp 1366w,\n/static/36bf9d7dadae859391a4aa978c7ae097/dc0d9/thumbnail.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}]}]}}}