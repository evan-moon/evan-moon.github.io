{"componentChunkName":"component---src-templates-category-page-template-index-tsx","path":"/categories/튜토리얼/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"198db2f8-2aa3-5519-a026-aa9af4081cdc","tableOfContents":"<ul>\n<li>\n<ul>\n<li><a href=\"#declaration\">declaration</a></li>\n<li><a href=\"#declarationdir\">declarationDir</a></li>\n<li><a href=\"#declarationmap\">declarationMap</a></li>\n<li><a href=\"#downleveliteration\">downlevelIteration</a></li>\n<li><a href=\"#emitbom\">emitBOM</a></li>\n<li><a href=\"#emitdeclarationonly\">emitDeclarationOnly</a></li>\n<li><a href=\"#importhelpers\">importHelpers</a></li>\n<li><a href=\"#importsnotusedasvalues\">importsNotUsedAsValues</a></li>\n<li><a href=\"#inlinesourcemap\">inlineSourceMap</a></li>\n<li><a href=\"#inlinesources\">inlineSources</a></li>\n<li><a href=\"#noemit\">noEmit</a></li>\n<li><a href=\"#noemithelpers\">noEmitHelpers</a></li>\n<li><a href=\"#noemitonerror\">noEmitOnError</a></li>\n<li><a href=\"#preserveconstenums\">preserveConstEnums</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 지난 [tsconfig의 모든 것] Compiler options / Modules 포스팅에 이어 의 컴파일 옵션 중 출력 파일을 컨트롤 하는 옵션들을 소개할 예정이다.","html":"<p>이번 포스팅에서는 지난 <a href=\"/20210808-tsconfig-compiler-options-modules\">[tsconfig의 모든 것] Compiler options / Modules</a> 포스팅에 이어 <code class=\"language-text\">tsconfig</code>의 컴파일 옵션 중 출력 파일을 컨트롤 하는 옵션들을 소개할 예정이다.</p>\n<!-- more -->\n<p>이 옵션들은 타입스크립트에서만 지원되는 문법들을 자바스크립트로 어떻게 표현할 것인지, 혹은 ES6 이상의 문법을 ES5로 트랜스파일링할 때 어떻게 표현할 것인지와 같이 타입스크립트로 작성된 코드를 컴파일한 이후에 생성되는 자바스크립트 코드의 모습을 결정하는 옵션들이다.</p>\n<p>물론 Babel과 같은 트랜스파일러가 제공해주는 기능과 중복되는 부분이 있기 때문에, TSC와 Babel을 함께 사용하는 경우에는 tsconfig에서 모든 옵션을 섬세하게 설정해주지 않아도 되는 경우도 있다.</p>\n<h2 id=\"declaration\" style=\"position:relative;\">declaration<a href=\"#declaration\" aria-label=\"declaration permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>컴파일 할 때 타입 선언 파일도 함께 생성한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>컴파일 할 때 자바스크립트 파일만을 생성한다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">declaration</code> 옵션은 타입스크립트의 <code class=\"language-text\">*.d.ts</code> 파일을 내보낼지 말지를 결정하는 옵션이다. 만약 기본적으로 이 옵션은 꺼져있기 때문에, 별도의 설정 없이 타입스크립트를 컴파일하게 되면 <code class=\"language-text\">*.js</code> 파일만 덩그러니 생성되는 모습을 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// math.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>하지만 <code class=\"language-text\">declaration</code> 옵션을 켜게 되면, 생성된 자바스크립트 파일 외에도 타입 선언을 담고 있는 <code class=\"language-text\">*.d.ts</code> 파일을 함께 생성하게된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.d.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">declare</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>만약 여러분이 만든 모듈이 타입스크립트를 지원하도록 하고 싶다면, 사용자가 직접 모듈의 소스코드를 가져올 수 있도록 허용하거나 자바스크립트 파일을 제공하되 타입 선언 파일인 <code class=\"language-text\">*.d.ts</code> 파일을 함께 제공해줘야 하기 때문에, 타입스크립트 대상의 라이브러리를 개발한다면 이 옵션을 사용하여 컴파일 시 타입 선언 파일까지 함께 생성하는 것을 추천한다.</p>\n<h2 id=\"declarationdir\" style=\"position:relative;\">declarationDir<a href=\"#declarationdir\" aria-label=\"declarationdir permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">string</code></td>\n<td>타입 선언 파일을 내보낼 디렉토리의 경로</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">declarationDir</code> 옵션은 이름 그대로 타입 선언 파일을 내보낼 경로를 설정할 수 있는 옵션이다. 이때 <code class=\"language-text\">.</code>가 의미하는 현재 경로는 <code class=\"language-text\">tsconfig</code> 파일이 위치한 곳을 의미하기 때문에, 만약 컴파일된 파일들이 위치한 디렉토리 안 쪽에 타입 선언 파일을 내보내고 싶다면 <code class=\"language-text\">./types</code>와 같은 경로가 아닌, <code class=\"language-text\">./{outDir}/types</code>와 같이 디렉토리를 직접 지정해줘야 한다.</p>\n<p>만약 <code class=\"language-text\">declarationDir</code> 옵션을 별도로 설정해주지 않는다면 타입 선언 파일은 자신의 원본 자바스크립트 파일과 동일한 위치에 생성된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">declarationDir 옵션을 설정하지 않은 경우\n\nmyProject\n├── math.ts\n├── dist\n│   ├── math.d.ts &lt;\n│   └── math.js\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">declarationDir 옵션을 \"./dist/types\"로 설정한 경우\n\nmyProject\n├── math.ts\n├── dist\n│   ├── math.js\n│   └── types\n│       └── math.d.ts &lt;\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 하나의 디렉토리에 타입 선언 파일을 모아두게 되면 추후 <code class=\"language-text\">package.json</code>의 <code class=\"language-text\">types</code> 프로퍼티를 사용하여 편하게 해당 패키지의 타입 선언 파일들의 위치를 지정할 수 있으므로 필자는 <code class=\"language-text\">declarationDir</code> 옵션을 사용하여 타입 선언을 한 곳에 모아두는 편이다.</p>\n<h2 id=\"declarationmap\" style=\"position:relative;\">declarationMap<a href=\"#declarationmap\" aria-label=\"declarationmap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>타입 선언과 소스 코드를 연결하는 매핑 파일을 생성한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>매핑 파일을 생성하지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">declarationMap</code> 옵션은 개발자가 IDE에서 제공하는 “Go to Definition” 같은 네비게이션 기능을 통해 원본 소스 파일로 이동할 수 있도록 도와주는 맵핑 파일을 함께 생성할 것인지에 대한 여부를 결정한다.</p>\n<p>앞서 알아보았듯이 <code class=\"language-text\">declaration</code> 옵션을 사용하여 타입 선언 파일을 생성하게 되면 다음과 같은 결과물이 컴파일된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.ts (원본 소스 파일)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// math.js (자바스크립트)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.d.ts (타입 선언)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">declare</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이때 실제로 실행되는 코드를 담고 있는 자바스크립트 코드와 타입 선언을 담고 있는 타입 선언 파일의 연관 관계를 정의한 매핑 파일이 없다면, IDE에서 네비게이팅 기능을 사용했을 때 소스 코드가 아닌, <code class=\"language-text\">math.d.ts</code> 파일의 타입 선언으로 이동하게 된다.</p>\n<p>하지만 어차피 개발자 자신의 소스 코드에도 타입 선언에 대한 정보는 다 노출되고 있기 때문에, 네비게이팅을 사용하는 경우는 타입 선언 정의를 알고 싶다기 보다는 실제로 함수의 내부 구현을 보고 싶은 경우가 대부분일 것이다.</p>\n<p>이런 상황에서 <code class=\"language-text\">declarationMap</code> 옵션을 사용하면 개발자가 네비게이팅 기능을 사용했을 때 타입 선언이 아닌 소스 코드로 이동할 수 있도록 별도의 매핑 파일을 함께 생성해줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.d.ts (타입 선언)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">declare</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//# sourceMappingURL=math.d.ts.map</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// math.d.ts.map</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"math.d.ts\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sourceRoot\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"../../../utils/math.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"names\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"mappings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"AAAA,eAAO,MAAM,GAAG,MAAO,MAAM,SAAS,MAAM,WAAU,CAAC\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>매핑 파일은 JSON 포맷으로 구성되어 있으며, 타입 선언이 정의된 파일과 같은 경로에 생성된다. 이 매핑 파일은 원본 소스 코드의 경로를 가지고 있기 때문에, IDE의 네비게이팅 기능을 사용했을 때 “소스코드는 여기가 아니라 이 경로에 있음”이라고 알려줄 수 있는 것이다.</p>\n<p>즉, 이 기능을 100% 활용하고 싶다면 npm 레지스트리에 모듈을 배포할 때 반드시 소스 코드가 함께 포함되어야 한다. 일반적으로 npm 레지스트리에 배포할 때 소스코드가 아닌 빌드 결과물만을 배포하는 경우가 많은데, 이렇게 되면 어차피 라이브러리 내에 소스코드가 포함되어 있지 않기 때문에 매핑 파일을 함께 넣어줘도 의미가 없어지는 것이다.</p>\n<p>단순히 npm 레지스트리에 소스코드까지 포함해서 배포한다고 해서 내가 만든 모듈을 사용한 어플리케이션의 번들 사이즈가 늘어나는 것도 아니니, 내가 만든 라이브러리를 사용하는 개발자들의 생산성과 편의성을 많이 높혀주기 위해 <code class=\"language-text\">declarationMap</code>을 켜고 소스코드까지 포함해서 npm 레지스트리에 배포하는 것을 추천한다.</p>\n<h2 id=\"downleveliteration\" style=\"position:relative;\">downlevelIteration<a href=\"#downleveliteration\" aria-label=\"downleveliteration permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>ES6에 추가된 이터레이션 기능에 대한 명확한 구현을 함께 생성한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>기본적인 트랜스파일링만을 수행한다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">downlevelIteration</code> 옵션은 타입스크립트가 ES6에서 추가된 <code class=\"language-text\">for/of</code>, <code class=\"language-text\">Spread</code>, <code class=\"language-text\">Symbol.iterator</code> 등의 기능을 보다 명확하게 트랜스파일링을 하도록 만들 수 있는 옵션이다.</p>\n<p>컴파일 타겟인 자바스크립트 버전이 ES6 이상이라면 이 옵션은 크게 의미가 없지만, 크로스 브라우징 등을 위해 ES5 이하의 버전을 컴파일 타겟으로 삼는 경우에는 자바스크립트가 실행되는 런타임 때 이터레이터들이 개발자의 의도와 다르게 동작하는 것을 방지할 수 있다.</p>\n<p>예를 들어 <code class=\"language-text\">for/of</code>를 사용한 타입스크립트 코드를 ES5로 트랜스파일링한다면, 아래와 같은 결과물을 만나볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> s <span class=\"token keyword\">of</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> str <span class=\"token operator\">=</span> <span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> _i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> str_1 <span class=\"token operator\">=</span> str<span class=\"token punctuation\">;</span> _i <span class=\"token operator\">&lt;</span> str_1<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> _i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> s <span class=\"token operator\">=</span> str_1<span class=\"token punctuation\">[</span>_i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">for/of</code>는 ES5에는 없는 기능이므로 타입스크립트는 <code class=\"language-text\">for/of</code>를 일반적인 <code class=\"language-text\">for</code>문으로 트랜스파일링 한 것이다.</p>\n<p>여기까지 보면 별로 문제가 없는 것 같지만, 사실 이렇게 트랜스파일링된 코드는 원본 코드와 정확히 일치하는 동작을 보여주지는 않는다. 바로 이런 코드 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">'🙏'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> s <span class=\"token keyword\">of</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 코드에서 사용된 🙏 이모지는 필자가 개인적으로도 아주 애용하고 있는 이모지이다. 단순히 눈에 보이는 문자의 수가 한 개이기 때문에 이 이모지의 길이도 당연히 <code class=\"language-text\">1</code>이라고 생각할 수 있지만, 사실 이모지들의 길이는 <code class=\"language-text\">1</code>이 아니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'🙏'</span><span class=\"token punctuation\">.</span>length <span class=\"token comment\">// 2</span>\n<span class=\"token string\">'👩‍❤️‍💋‍👩'</span><span class=\"token punctuation\">.</span>length <span class=\"token comment\">// 11</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>즉, 이 이모지의 길이를 사용하여 일반적인 <code class=\"language-text\">for</code> 문을 작성하게 되면 제대로 된 문자를 뽑아내기가 어려울 수 있다는 것이다. 무슨 말인지 잘 이해가 안 된다면, 아래 코드를 크롬 개발자도구에 복붙해서 한번 실행시켜보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">\"🙏\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> str<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">for문 > </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> s <span class=\"token keyword\">of</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">for/of문 > </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>s<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">for문 > �\nfor문 > �\n\nfor/of문 > 🙏</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이것이 바로 <code class=\"language-text\">for/of</code> 문을 그냥 <code class=\"language-text\">for</code>문으로 트랜스파일링하면 안 되는 이유이다.</p>\n<p>이처럼 이모지의 길이가 1이 아닌 이유를 간단히만 설명하자면, 일단 이모지가 멀티바이트 문자이기 때문이기도 하고 계속 해서 새로운 이모지가 추가되기도 하고 기존 이모지들을 결합한 이모지들이 나오면서 이모지를 표현하는 방법이 괴랄해져서 그렇기도 하다. 이모지 길이에 대한 자세한 내용은 <a href=\"https://blog.jonnew.com/posts/poo-dot-length-equals-two\" target=\"_blank\" rel=\"nofollow\">이 포스팅</a>에 잘 설명되어있으니 한번 읽어보도록 하자.</p>\n<p>어찌됐던 여기서 중요한 포인트는 <code class=\"language-text\">for/of</code>와 <code class=\"language-text\">for</code>의 동작이 유사하다고 해서 묻어놓고 트랜스파일링을 했다가는 이런 참사가 발생할 수도 있다는 것이다.</p>\n<p>그래서 타입스크립트는 <code class=\"language-text\">downlevelIteration</code>이라는 옵션을 별도로 제공해서 <code class=\"language-text\">for/of</code>, <code class=\"language-text\">Spread</code>, <code class=\"language-text\">Symbol.iterator</code>와 같은 이터레이션 기능이 개발자의 의도와 다르게 동작하지 않도록 <code class=\"language-text\">Symbol.iterator</code> 같은 기능이 있는지 검사하거나, 아예 이런 기능을 구현해놓은 폴리필까지 함께 추가할 수 있도록 만들어 두었다.</p>\n<h2 id=\"emitbom\" style=\"position:relative;\">emitBOM<a href=\"#emitbom\" aria-label=\"emitbom permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>타입스크립트가 출력 파일을 생성할 때 BOM을 표시한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>타입스크립트가 출력 파일을 생성할 때 BOM을 표시하지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">emitBOM</code> 옵션은 타입스크립트가 출력 파일을 생성할 때 <a href=\"https://ko.wikipedia.org/wiki/%EB%B0%94%EC%9D%B4%ED%8A%B8_%EC%88%9C%EC%84%9C_%ED%91%9C%EC%8B%9D\" target=\"_blank\" rel=\"nofollow\">BOM(Bite Order Mark)</a>를 표시할지 말지를 결정할 수 있는 옵션이다.</p>\n<p>Bite Order Mark는 특별한 유니코드를 파일의 가장 앞 부분에 추가해서 이 파일이 어떤 인코딩 방식을 사용했는지를 나타내는 방법이다.</p>\n<p>BOM은 애초에 사람이 읽을 목적이 아니라 컴퓨터에게 현재 파일의 인코딩 정보를 알리기 위해서만 사용하기 때문에, 텍스트 에디터나 vim 같은 곳에서 파일을 열어보아도 BOM을 보여주지는 않는다.</p>\n<p>그러나 일반적으로 자바스크립트가 실행되는 런타임 환경에서 굳이 BOM까지 필요한 경우가 흔치 않기도 하고, 유니코드 3.2부터는 BOM을 사용하지 않을 것을 권장하고 있기도 해서, 굳이 켤 필요가 없는 옵션이기도 하다. <small>(타입스크립트 공식 문서에서도 굳이 안 켜도 된다고 하고 있다)</small></p>\n<h2 id=\"emitdeclarationonly\" style=\"position:relative;\">emitDeclarationOnly<a href=\"#emitdeclarationonly\" aria-label=\"emitdeclarationonly permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>자바스크립트 없이 타입 선언 파일만을 출력한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>자바스크립트 파일을 포함하여 출력한다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">emitDeclarationOnly</code> 옵션은 Declaration only라는 이름 그대로, 컴파일을 진행할 때 자바스크립트 파일 없이 타입 선언 파일만을 출력할지에 대한 여부를 결정하는 옵션이다.</p>\n<p>보통 타입스크립트를 자바스크립트로 변환할 때 타입스크립트 컴파일러가 아닌 별도의 도구를 사용하는 경우나, 기존에 자바스크립트로 만들어진 모듈에 타입 선언만을 제공해야하는 경우에 사용하게 된다.</p>\n<h2 id=\"importhelpers\" style=\"position:relative;\">importHelpers<a href=\"#importhelpers\" aria-label=\"importhelpers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>출력 파일 내에서 tslib가 제공하는 헬퍼 함수들을 사용한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>tslib가 제공하는 헬퍼 함수를 사용하지 않고 직접 헬퍼를 구현하도록 한다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">importHelpers</code> 옵션은 타입스크립트를 자바스크립트 ES5 이하의 버전으로 트랜스파일링할 때 발생하는 헬퍼 함수들을 출력 파일 내에 직접 작성할 것이냐, 아니면 <code class=\"language-text\">tslib</code> 라이브러리가 제공하는 헬퍼 함수로 대체할 수 있도록 할 것이냐를 결정할 수 있는 옵션이다.</p>\n<p>한번 소스 코드와 출력 파일을 함께 보면서 이해해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arr<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>arr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">fn</code> 함수는 인자로 받은 배열의 맨 앞에 <code class=\"language-text\">1</code>이라는 원소를 추가해서 반환하는 간단한 함수이다. 여러분도 아시다시피 <code class=\"language-text\">[...arr]</code>라는 문법으로 사용할 수 있는 Spread 기능은 ES5에 포함되어있지 않으므로, 타입스크립트는 <code class=\"language-text\">__spreadArray</code> 라는 헬퍼 함수를 출력 파일 내에 추가하여 Spread 기능을 트랜스파일링한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> __spreadArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>__spreadArray<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">to<span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">,</span> pack</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pack <span class=\"token operator\">||</span> arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> l <span class=\"token operator\">=</span> from<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> ar<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> l<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ar <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ar<span class=\"token punctuation\">)</span> ar <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      ar<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> from<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> to<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>ar <span class=\"token operator\">||</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">__spreadArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기서 중요한 것은 ES6의 Spread 기능을 구현하기 위해 <code class=\"language-text\">__spreadArray</code>라는 함수의 구현이 출력 파일 내에 함께 포함되었다는 것이다. 사실 이런 구현이 출력 파일내에 포함되는 것이 큰 문제는 아닐 수 있지만, 만약 저 <code class=\"language-text\">__spreadArray</code>를 다른 곳에서 또 사용해야하는 경우에는 그 모듈에 또 다시 <code class=\"language-text\">__spreadArray</code> 함수의 구현이 추가되기 때문에 중복된 코드가 발생하게 된다.</p>\n<p>이때 <code class=\"language-text\">importHelpers</code> 옵션을 사용하게 되면 이러한 헬퍼 함수들을 <code class=\"language-text\">tslib</code> 라이브러리에서 가져오도록 변경하여 코드의 중복을 제거할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> __spreadArray <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tslib'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">__spreadArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 되면 <code class=\"language-text\">__spreadArray</code> 함수를 <code class=\"language-text\">tslib</code>에서 불러와서 사용하게 되므로, 매번 <code class=\"language-text\">__spreadArray</code> 함수를 선언할 필요가 사라지기 때문에 코드의 중복을 제거할 수 있다. 하지만 이 옵션을 사용하여 트랜스파일링된 코드는 당연히 <code class=\"language-text\">tslib</code> 패키지를 설치되어있어야 제대로 작동하므로, 헬퍼 함수의 중복된 구현을 허용하는 것과 <code class=\"language-text\">tslib</code>를 내 어플리케이션에 설치하는 것의 득과 실을 잘 따져보고 옵션을 사용하도록 하자.</p>\n<h2 id=\"importsnotusedasvalues\" style=\"position:relative;\">importsNotUsedAsValues<a href=\"#importsnotusedasvalues\" aria-label=\"importsnotusedasvalues permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">remove</code></td>\n<td>출력 파일에서 런타임 때 필요없는 import 문을 제거한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">preserve</code></td>\n<td>출력 파일에서 타입 정보는 제거하되, import 문은 유지한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">error</code></td>\n<td>타입 정보만 가져오는 import 문을 사용했을 때 에러를 발생시킨다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">importsNotUsedAsValues</code> 옵션은 타입스크립트가 출력 파일을 생성할 때 필요없는 import 구문을 처리하는 방법을 제어할 수 있는 옵션이다. 이 옵션이 가지는 의미를 알기 위해서는 타입스크립트가 import 문을 처리하는 방법에 대해서 조금 알아야 한다.</p>\n<p>기본적으로 타입스크립트가 컴파일을 통해 자바스크립트 파일을 생성할 때, 타입과 관련된 정보는 지워버린다. 코드를 보면서 한번 이해해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> InterfaceFoo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/foo'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ClassBar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/bar'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> classBar<span class=\"token operator\">:</span> InterfaceFoo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ClassBar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/bar'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> classBar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>위 코드를 보면 <code class=\"language-text\">InterfaceFoo</code> 인터페이스를 가져오는 import 문이 자바스크립트 출력 파일 내에서는 사라진 것을 볼 수 있다. 왜냐하면 자바스크립트에는 타입스크립트의 타입이나 인터페이스 같은 기능이 없으니, 타입 정보를 남겨놔봤자 의미가 없기 때문이다.</p>\n<p>물론 앞서 이야기한대로 타입 정보는 어차피 자바스크립트에서 사용할 수 없으니, 이런 정보는 제거하는 것이 맞지만, 만약 <code class=\"language-text\">../utils/foo</code> 모듈이 의도적인 사이드이펙트를 포함하고 있을 경우에는 문제가 발생할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// utils/foo.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">InterfaceFoo</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">utils/foo.ts</code> 모듈은 인터페이스만을 노출하고 있는 모듈이지만, 내부에는 <code class=\"language-text\">console.log</code>라는 사이드 이펙트를 포함하고 있다. 이 예시에서는 단순한 콘솔 출력이지만, 실제로 Angular 같은 경우는 이런 모듈 내부에서 명시적으로 모듈을 주입하고 등록하는 사이드 이펙트가 포함되기도 한다.</p>\n<p>문제는 이런 경우에도 타입스크립트는 자바스크립트를 출력할 때 <code class=\"language-text\">utils/foo</code> 모듈을 import 했던 구문 자체를 지워버린다는 것이다. 그러면 당연히 <code class=\"language-text\">console.log</code>라는 사이드 이펙트는 자바스크립트 런타임에서 실행되지 않는다. 그래서 이런 경우 개발자들은 의도적으로 사이드 이펙트를 실행시키기 위해 타입스크립트를 속일 수 있는 import 문을 하나 더 추가해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> InterfaceFoo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/foo'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'../utils/foo'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ClassBar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/bar'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> classBar<span class=\"token operator\">:</span> InterfaceFoo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">'./utils/foo'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ClassBar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../utils/bar\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> classBar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>그래서 타입스크립트 3.8버전에는 “이 import문이 타입 정보만을 가져오는 구문이다”라는 것을 명시적으로 표현할 수 있는 <code class=\"language-text\">import type</code> 기능을 추가했고, 혹여나 일반적인 import 문을 사용하여 타입 정보만을 가져오더라도 import문을 남겨둘 수 있도록 제어할 수 있는 <code class=\"language-text\">importsNotUsedAsValues</code> 옵션을 제공하는 것이다.</p>\n<h2 id=\"inlinesourcemap\" style=\"position:relative;\">inlineSourceMap<a href=\"#inlinesourcemap\" aria-label=\"inlinesourcemap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>소스맵 파일을 따로 생성한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>소스맵 파일의 내용을 Base64로 인코딩하여 소스 파일에 추가한다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">inlineSourceMap</code> 옵션은 타입스크립트가 컴파일 시 어떤 방식으로 소스맵을 생성할 것인지를 결정하는 옵션이다. 기본적으로 타입스크립트는 <code class=\"language-text\">*.js.map</code> 파일의 형태로 소스맵을 제공하는데, 만약 <code class=\"language-text\">inlineSourceMap</code>이 <code class=\"language-text\">true</code>일 경우에는 소스 파일 내부에 주석으로 소스맵을 추가한다.</p>\n<p>간단한 함수를 가지고 있는 모듈을 직접 컴파일해보며 어떤 차이가 있는지 직접 알아보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// math.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>만약 <code class=\"language-text\">inlineSourceMap</code> 옵션이 꺼져 있는 경우, 타입스크립트는 별도의 소스맵 파일을 생성하고, 컴파일된 JS 파일에는 해당 소스맵의 경로만을 적어두는 형태로 소스맵을 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// math.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//# sourceMappingURL=math.js.map</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// math.js.map</span>\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"math.js\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sourceRoot\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"../../utils/math.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"names\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"mappings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"AAAA,MAAM,CAAC,IAAM,GAAG,GAAG,UAAC,CAAS,IAAK,OAAA,UAAC,CAAS,IAAK,OAAA,CAAC,GAAG,CAAC,EAAL,CAAK,EAApB,CAAoB,CAAC\"</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이때 컴파일된 JS 파일에는 소스맵 파일의 경로가 <code class=\"language-text\">#sourceMappingURL=math.js.map</code>의 형태로 추가되고, 소스맵 파일에는 <code class=\"language-text\">\"sources\": [\"../../utils/math.ts\"]</code>처럼 원본 타입스크립트 소스 파일의 경로가 적혀있는 것을 확인할 수 있다.</p>\n<p>만약 <code class=\"language-text\">inlineSourceMap</code> 옵션을 켜게되면 이제 타입스크립트는 소스맵 파일을 생성하지 않고, 컴파일된 JS 파일 내에 직접 소스맵 파일의 내용을 Base64로 인코딩해서 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0aC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3V0aWxzL21hdGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLElBQU0sR0FBRyxHQUFHLFVBQUMsQ0FBUyxJQUFLLE9BQUEsVUFBQyxDQUFTLElBQUssT0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFMLENBQUssRUFBcEIsQ0FBb0IsQ0FBQyJ9</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2 id=\"inlinesources\" style=\"position:relative;\">inlineSources<a href=\"#inlinesources\" aria-label=\"inlinesources permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>인라인 소스맵에 소스 코드의 내용은 포함시키지 않는다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>인라인 소스맵에 소스 코드의 내용도 함께 포함시킨다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">inlineSources</code> 옵션은 <code class=\"language-text\">inlineSourceMap</code> 옵션을 사용하여 만들어낸 인라인 소스맵에 원본 소스 코드의 내용도 함께 포함시킬 것인지 여부를 결정한다.</p>\n<p>이 옵션의 값이 <code class=\"language-text\">true</code>인 경우, 인라인 소스맵에 <code class=\"language-text\">sourceContent</code>라는 필드가 추가되고 해당 필드에는 소스 코드의 내용이 함꼐 포함된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0aC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3V0aWxzL21hdGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLElBQU0sR0FBRyxHQUFHLFVBQUMsQ0FBUyxJQUFLLE9BQUEsVUFBQyxDQUFTLElBQUssT0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFMLENBQUssRUFBcEIsQ0FBb0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhZGQgPSAoeDogbnVtYmVyKSA9PiAoeTogbnVtYmVyKSA9PiB4ICsgeTtcbiJdfQ==</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// Decoding된 소스맵</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"math.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sourceRoot\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"../../utils/math.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"names\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"mappings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"AAAA,MAAM,CAAC,IAAM,GAAG,GAAG,UAAC,CAAS,IAAK,OAAA,UAAC,CAAS,IAAK,OAAA,CAAC,GAAG,CAAC,EAAL,CAAK,EAApB,CAAoB,CAAC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sourcesContent\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"export const add = (x: number) => (y: number) => x + y;\\n\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>애초에 <a href=\"https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/preview#\" target=\"_blank\" rel=\"nofollow\">소스맵의 스펙</a> 상 <code class=\"language-text\">sourceContent</code> 필드는 원본 소스 파일에 접근하지 못한 경우를 대응하기 위한 일종의 예외처리에 가까우므로, 굳이 켜지 않아도 큰 문제가 없는 옵션이기도 하다.</p>\n<h2 id=\"noemit\" style=\"position:relative;\">noEmit<a href=\"#noemit\" aria-label=\"noemit permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>컴파일 후에 출력 파일을 내보낸다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>컴파일 후에 출력 파일을 내보내지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noEmit</code> 옵션은 이름 그대로 타입스크립트가 컴파일을 한 이후에 출력 파일들을 내보낼 것인지에 대한 동작을 결정한다. 설명만 들어보면 이런 경우가 필요할까 싶기는 한데, 생각보다 유용하게 자주 쓰이는 옵션이다.</p>\n<p>대표적인 예로는 CI나 Git Hook 같은 타이밍에 정적 타입 체크만 진행해야 하는 경우 <code class=\"language-text\">tsc --noEmit</code>와 같은 명령어를 NPM 스크립트로 등록해놓거나, Webpack, Parcel, Rollup 등의 도구를 사용하여 컴파일을 진행할 때도 정적 타입 체크만을 TSC에게 시키기 위해 해당 옵션을 사용하는 경우가 많다.</p>\n<h2 id=\"noemithelpers\" style=\"position:relative;\">noEmitHelpers<a href=\"#noemithelpers\" aria-label=\"noemithelpers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>컴파일된 파일에 <code class=\"language-text\">__awaiter</code>와 같은 헬퍼 함수를 포함시킨다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>컴파일된 파일에는 <code class=\"language-text\">__awaiter</code>와 같은 헬퍼 함수를 포함시키지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noEmitHelpers</code> 옵션은 컴파일이 완료된 출력 파일에 <code class=\"language-text\">__awaiter</code>나 <code class=\"language-text\">__generator</code>와 같은 헬퍼 함수들을 포함시킬지 여부를 결정한다.</p>\n<p><code class=\"language-text\">noEmitHelpers</code> 옵션의 동작이 <a href=\"#importhelpers\">importHelpers</a>와 유사하기 때문에 조금 헷갈릴 수 있다. <code class=\"language-text\">importHelpers</code> 옵션은 헬퍼 함수들의 구현을 “소스에 포함할지”, “다른 곳에서 import할지”를 결정한다면, <code class=\"language-text\">noEmitHelpers</code> 옵션은 헬퍼 함수들의 구현을 “소스에 포함할지”, “아예 하지 않을 것인지”를 결정하기 때문이다.</p>\n<p>이 차이점을 직접 컴파일된 코드를 보면서 알아보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// importHelpers, noEmitHelpers가 모두 꺼져있는 경우에는 출력 파일에 헬퍼의 구현도 포함된다</span>\n\n<span class=\"token keyword\">var</span> __awaiter <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>__awaiter<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">thisArg<span class=\"token punctuation\">,</span> _arguments<span class=\"token punctuation\">,</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">,</span> generator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> __generator <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>__generator<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">thisArg<span class=\"token punctuation\">,</span> body</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">__awaiter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token function\">__generator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token comment\">/*return*/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// importHelper가 켜져있는 경우에는 외부에서 헬퍼를 가져온다</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> __awaiter<span class=\"token punctuation\">,</span> __generator <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"tslib\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">__awaiter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token function\">__generator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token comment\">/*return*/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// noEmitHelpers가 켜져있는 경우에는 아예 헬퍼를 가져오거나 선언하는 코드 조차 없다</span>\n\n<span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">__awaiter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token function\">__generator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token comment\">/*return*/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 <code class=\"language-text\">importHelpers</code>와 <code class=\"language-text\">noEmitHelpers</code> 옵션이 모두 켜져있다면 헬퍼 함수를 “외부에서 가져올 것이냐”, “출력 파일에 포함시키지 않을 것이냐”라는 설정이 충돌하게 되는데, 이 경우에는 <code class=\"language-text\">importHelpers</code>의 동작을 우선적으로 따르게 되니 이 점을 주의하도록 하자.</p>\n<h2 id=\"noemitonerror\" style=\"position:relative;\">noEmitOnError<a href=\"#noemitonerror\" aria-label=\"noemitonerror permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>컴파일 중 에러가 발생하더라도 출력 파일을 내보낸다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>컴파일 중 에러가 발생한 경우 출력 파일을 내보내지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noEmitOnError</code> 옵션은 이름 그대로 컴파일 중 여러가지 요인으로 인해 에러가 발생하게 되는 경우 출력 파일을 내보낼 것인지에 대한 여부를 결정한다. 만약 이 옵션이 켜져있는 경우, 컴파일 중 에러가 발생하면 출력 파일이 내보내지지 않는다.</p>\n<p>이렇게만 보면 “당연히 에러가 나면 출력 파일을 안 만드는 게 맞지 않나?”라고 생각할 수 있지만, TSC의 Watch 옵션을 사용하고 있는 개발환경 같은 경우는 컴파일 중 에러가 발생해도 출력 파일을 생성하고 그로 인해 발생하는 사이드 이펙트 또한 함께 관찰하는 것이 더 편할 수도 있기 때문에, 개발환경에서는 해당 옵션을 끄고 운영환경 배포를 위한 빌드 타임 때는 켜놓는 것을 추천한다.</p>\n<h2 id=\"preserveconstenums\" style=\"position:relative;\">preserveConstEnums<a href=\"#preserveconstenums\" aria-label=\"preserveconstenums permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td><code class=\"language-text\">const enum</code> 키워드를 사용한 Enum 선언을 컴파일 타임 때 제거한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td><code class=\"language-text\">const enum</code> 키워드를 사용한 Enum 선언을 컴파일 타임 때 제거하지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">preserveConstEnums</code> 옵션은 컴파일 타임 때 <a href=\"https://www.typescriptlang.org/docs/handbook/enums.html#const-enums\" target=\"_blank\" rel=\"nofollow\">const enum</a> 키워드를 사용한 Enum 선언을 제거할 것인지에 대한 옵션이다. 타입스크립트는 런타임 때의 메모리 비용을 절약하기 위해 <code class=\"language-text\">const enum</code> 키워드로 선언한 Enum의 값을 참조하는 부분을 해당 Enum의 값으로 치환한다.</p>\n<p><code class=\"language-text\">enum</code> 키워드만을 사용하여 선언한 Enum과 다르게 <code class=\"language-text\">const enum</code> 키워드를 사용한 Enum은 반드시 상수 값만 가지는 것이 보장되기 때문에 참조 투명성 또한 보장되고, 결국 컴파일 타임 때 값을 그냥 치환해버려도 아무 문제가 없는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token keyword\">enum</span> Foo <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">A</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">B</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">C</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> Foo<span class=\"token punctuation\">.</span><span class=\"token constant\">A</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> Foo<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Foo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Foo<span class=\"token punctuation\">[</span>Foo<span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n    Foo<span class=\"token punctuation\">[</span>Foo<span class=\"token punctuation\">[</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">;</span>\n    Foo<span class=\"token punctuation\">[</span>Foo<span class=\"token punctuation\">[</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Foo <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>Foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\">/* A */</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;= Foo.A가 아닌, 값으로 치환되었다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 컴파일된 코드를 자세히 보면, Enum을 표현하기 위해 <code class=\"language-text\">Foo</code>라는 변수를 선언하고 IIFE를 사용하여 해당 변수에 값을 할당하고 있지만, 정작 이 변수에 접근하는 부분은 없는 것을 알 수 있다. 즉, 이 JS 코드가 실행되는 런타임 환경에서는 <code class=\"language-text\">Foo</code>라는 변수가 없어도 아무 문제가 없다는 것이다.</p>\n<p>이때 <code class=\"language-text\">preserveConstEnums</code> 옵션의 값을 <code class=\"language-text\">false</code>로 설정하면 이렇게 런타임에서는 아무 의미없는 Enum 선언을 제거할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\">/* A */</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>이렇게 <code class=\"language-text\">tsconfig</code> 4번째 시리즈인 <code class=\"language-text\">Emit</code> 편을 마무리했다. Emit과 관련된 역할을 하는 옵션들은 주로 TSC와 다른 도구를 결합하여 사용하거나, 번들 사이즈를 최적화해야하는 경우에 주로 건드리게 되는데, 필자 또한 꽤나 오랜만에 이 옵션들을 공부하게 되었던 지라 예전에 써본 옵션들이 있음에도 불구하고 기억이 가물가물 했던 것 같다.</p>\n<p>이상으로 [tsconfig의 모든 것] Compiler options / Emit 포스팅을 마친다.</p>","fields":{"slug":"20211030-tsconfig-compiler-options-modules-emit","path":"/2021/10/30/tsconfig-compiler-options-modules-emit/","lang":"ko"},"frontmatter":{"title":"[tsconfig의 모든 것] Compiler options / Emit","subTitle":"빌드 결과물의 형태를 제어하는 옵션들, 출력 전략을 설계하는 법","date":"Oct 30, 2021","categories":["프로그래밍","튜토리얼","자바스크립트"],"tags":["TypeScript","타입스크립트","tsconfig"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/d96f04d4b1d49fa98ee91007f9ad0674/d803c/thumbnail.png","srcSet":"/static/d96f04d4b1d49fa98ee91007f9ad0674/d803c/thumbnail.png 320w,\n/static/d96f04d4b1d49fa98ee91007f9ad0674/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/d96f04d4b1d49fa98ee91007f9ad0674/fc5c5/thumbnail.webp 320w,\n/static/d96f04d4b1d49fa98ee91007f9ad0674/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/d96f04d4b1d49fa98ee91007f9ad0674/01fb2/thumbnail.png","srcSet":"/static/d96f04d4b1d49fa98ee91007f9ad0674/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/d96f04d4b1d49fa98ee91007f9ad0674/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"2212aca4-174d-5d3e-82d1-d5d732a31cca","tableOfContents":"<ul>\n<li>\n<p><a href=\"#allowumdglobalaccess\">allowUmdGlobalAccess</a></p>\n</li>\n<li>\n<p><a href=\"#baseurl\">baseUrl</a></p>\n</li>\n<li>\n<p><a href=\"#paths\">paths</a></p>\n</li>\n<li>\n<p><a href=\"#module\">module</a></p>\n<ul>\n<li><a href=\"#commonjs\">CommonJS</a></li>\n<li><a href=\"#amd\">AMD</a></li>\n<li><a href=\"#umd\">UMD</a></li>\n<li><a href=\"#system\">System</a></li>\n<li><a href=\"#es-module\">ES Module</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#moduleresolution\">moduleResolution</a></p>\n<ul>\n<li><a href=\"#classic\">Classic</a></li>\n<li><a href=\"#node\">Node</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#noresolve\">noResolve</a></p>\n</li>\n<li>\n<p><a href=\"#resolvejsonmodule\">resolveJsonModule</a></p>\n</li>\n<li>\n<p><a href=\"#rootdir\">rootDir</a></p>\n</li>\n<li>\n<p><a href=\"#rootdirs\">rootDirs</a></p>\n</li>\n<li>\n<p><a href=\"#typeroots\">typeRoots</a></p>\n</li>\n<li>\n<p><a href=\"#types\">types</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 지난 [tsconfig의 모든 것] Compiler options / Type Checking 포스팅에 이어 의 컴파일 옵션 중 모듈과 관련된 옵션들에 대한 이야기를 해보려고 한다.","html":"<p>이번 포스팅에서는 지난 <a href=\"/20210808-tsconfig-compiler-options-type-check\">[tsconfig의 모든 것] Compiler options / Type Checking</a> 포스팅에 이어 <code class=\"language-text\">tsconfig</code>의 컴파일 옵션 중 모듈과 관련된 옵션들에 대한 이야기를 해보려고 한다.</p>\n<!-- more -->\n<p>이 옵션들은 타입스크립트를 컴파일할 때 모듈들이 어떤 모듈 시스템을 따르도록 할 것인지, 어떤 경로에 있는 파일들을 컴파일 할 것인지, 빌드된 자바스크립트 파일들이 어떤 모듈 방식을 따르게 할 것인지 등을 컨트롤 할 수 있는 것들인데, 일반적인 서비스를 만드는 경우보다는 타입스크립트로 작성된 라이브러리를 만들 때 자주 다루게 되는 옵션들이기도 하다.</p>\n<h2 id=\"allowumdglobalaccess\" style=\"position:relative;\">allowUmdGlobalAccess<a href=\"#allowumdglobalaccess\" aria-label=\"allowumdglobalaccess permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>umd 모듈로의 접근을 허용한다</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>umd 모듈로의 접근을 허용하지 않는다</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">allowUmdGlobalAccess</code> 옵션은 타입스크립트 모듈이 전역 객체에 모듈을 포함시켜 내보내는 UMD(Universal Module Definition)형태의 모듈에 접근이 가능하게 할 것인지를 컨트롤 하는 옵션이다.</p>\n<p>만약 이 옵션이 꺼져 있다면 jQuery의 <code class=\"language-text\">$</code>와 같은 전역 변수에 그냥 접근하는 것이 불가능해지고, 무조건 <code class=\"language-text\">import</code> 문을 통해서 모듈을 가져와야 한다.</p>\n<p>UMD 방식을 사용하여 만들어진 라이브러리들은 보통 이런 형태의 글로벌 타입 선언을 가지고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doThing1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> version<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">AnInterface</span> <span class=\"token punctuation\">{</span>\n  foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">namespace</span> myLibrary<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 타입 파일이 네임스페이스를 export 하도록 선언되어 있는 경우, 타입스크립트는 이 모듈이 암묵적으로 전역 변수인 <code class=\"language-text\">myLibrary</code>에 할당된다고 판단한다. 그렇기 때문에 이런 타입 선언을 내 소스에 포함시키면 <code class=\"language-text\">myLibrary</code>라는 네임스페이스를 통해 이 모듈의 내용물에 접근할 수가 있는 것이다.</p>\n<p>만약 <code class=\"language-text\">allowUmdGlobalAccess</code> 옵션이 꺼져있는 상태라면 이런 에러를 만나게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> myLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">doThing1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 'myLibrary' refers to a UMD global, but the current file is a module. Consider adding an import instead.ts(2686)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 <code class=\"language-text\">allowUmdGlobalAccess</code> 옵션을 켜게 되면 네임스페이스로 export된 UMD 모듈에 접근하는 것이 허용된다. 하지만 굳이 암묵적으로 전역 변수에 선언되어있는 모듈에 접근해서 사용하는 것보다 <code class=\"language-text\">import</code> 키워드로 명시적으로 모듈을 가져와서 사용하는 것이 더 안전하니, 피치 못하는 경우가 아니라면 가급적 해당 옵션을 켜두도록 하자.</p>\n<h2 id=\"baseurl\" style=\"position:relative;\">baseUrl<a href=\"#baseurl\" aria-label=\"baseurl permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">baseUrl</code> 옵션은 상대 경로로 모듈의 경로를 지정할 때 기준이 되는 위치를 지정할 수 있는 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── index.ts\n├── utils\n│   └── foo.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>예를 들어 위와 같은 상황일 때, <code class=\"language-text\">index.ts</code>에서 상대 경로를 사용하여 <code class=\"language-text\">foo.ts</code> 모듈을 가져오려면 <code class=\"language-text\">./utils/foo</code>와 같이 현재 기준이 되는 위치를 <code class=\"language-text\">./</code> 처럼 지정한 후 해당 모듈에 접근하게 된다.</p>\n<p>하지만 잘 생각해보면 아무리 상대 경로를 사용한다고 해도, 기준이 되는 위치 자체가 변하는 경우는 많지 않다는 것을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── index.ts\n├── utils\n│   └── foo.ts\n├── remotes\n│   └── bar.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 이런 구조의 프로젝트의 <code class=\"language-text\">remotes/bar</code> 모듈에서 <code class=\"language-text\">utils/foo</code> 모듈에 접근하려고 한다면 결국 <code class=\"language-text\">../utils/foo</code> 처럼 프로젝트의 루트까지 올라간 후 다시 내려오는 방식으로 접근을 하기 때문이다.</p>\n<p>그래서 <code class=\"language-text\">baseUrl</code> 옵션은 상대경로를 사용할 때마다 반복되는 “루트로의 여정”을 없애주는 역할을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 <code class=\"language-text\">baseUrl</code>에 입력하는 상대 경로의 기준은 <code class=\"language-text\">tsconfig</code>가 위치하는 곳이기 때문에 일반적으로는 프로젝트의 루트가 된다. 즉, 이렇게 설정한 후 우리가 모듈에 접근하기 위해 상대 경로를 사용하게 되면, 타입스크립트는 <code class=\"language-text\">baseUrl</code>에 입력된 루트의 위치에서부터 해당 모듈을 찾아가게 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> foo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'utils/foo'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 사실 .(루트)/utils/foo</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> bar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'remotes/bar'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 사실 .(루트)/remotes/bar</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">baseUrl</code> 옵션을 사용하면 매번 <code class=\"language-text\">./</code>나 <code class=\"language-text\">../</code> 등을 사용하여 루트를 먼저 찾은 후 모듈에 접근하는 상대 경로를 절대 경로처럼 사용할 수 있다.</p>\n<h2 id=\"paths\" style=\"position:relative;\">paths<a href=\"#paths\" aria-label=\"paths permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">paths</code> 옵션은 특정한 모듈 이름을 지정했을 때 컴파일러가 어디서 부터 모듈을 탐색해야 할 지를 지정할 수 있는 맵을 제공한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"app/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"app/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"app/_config/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"environment/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"environments/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"shared/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"app/_shared/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"helpers/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"helpers/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"tests/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"tests/*\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>맵에 포함되는 경로들은 <code class=\"language-text\">baseUrl</code>을 기준으로 상대 경로로 계산되기 때문에, <code class=\"language-text\">paths</code> 옵션을 사용하기 위해서는 반드시 <code class=\"language-text\">baseUrl</code> 옵션에 값을 채워주어야 한다. 즉, 위 예시의 <code class=\"language-text\">app/*</code>는 <code class=\"language-text\">./src/app/*</code>를 의미하며, 모듈을 불러올 때 <code class=\"language-text\">import foo from 'app/math'</code>와 같이 접근하게 되면, 타입스크립트는 자동으로 맵에 해당하는 경로인 <code class=\"language-text\">./src/app/math</code>를 탐색한 후 모듈을 가져오게 된다.</p>\n<p>만약 <code class=\"language-text\">paths</code> 옵션에 설정된 위치들을 전부 탐색했는데도 모듈을 찾지 못 했다면, <code class=\"language-text\">moduleResolution</code> 옵션에서 설정한 전략에 따라 추가적인 탐색을 진행하게 된다.</p>\n<p>사실 패스 매핑 자체는 워낙 간단한 설정이기 때문에 크게 어려울 것이 없지만, 종종 패스 매핑이 반드시 <code class=\"language-text\">baseUrl</code>을 기준으로 시작한다는 점을 까먹어서 실수를 하곤 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── src\n│   └── index.ts\n├── node_modules\n│   └── foo\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위와 같은 구조의 프로젝트에서 <code class=\"language-text\">baseUrl</code>로 <code class=\"language-text\">./src</code>를 지정한 상황을 생각해보자. 우리가 <code class=\"language-text\">foo</code>라는 패스에 <code class=\"language-text\">node_modules/foo</code>를 매핑하려면 어떻게 해야할까?</p>\n<p>이때 자주 하는 실수는 <code class=\"language-text\">tsconfig.json</code>의 위치를 기준으로 <code class=\"language-text\">\"foo\": \"./node_modules/foo\"</code>라고 설정하는 것이다. 아무래도 내가 지금 패스 매핑 작업을 하고 있는 파일이 <code class=\"language-text\">tsconfig.json</code>이니 별 생각없이 현재 파일 기준으로 경로를 지정하는 것이다.</p>\n<p>하지만 패스 매핑은 <code class=\"language-text\">baseUrl</code>을 기준으로 진행되기 때문에 이 경우에는 <code class=\"language-text\">src</code> 디렉토리가 기준점이 된다. 즉, <code class=\"language-text\">\"foo\": \"../node_modules/foo\"</code>로 매핑을 진행해주어야 한다는 것이다.</p>\n<p>간혹 이 점을 잊고 <code class=\"language-text\">tsconfig.json</code>의 위치를 기준으로 패스 매핑을 진행했다가 모듈 탐색에 실패하는 경우가 왕왕 있으니 주의하도록 하자.</p>\n<h2 id=\"module\" style=\"position:relative;\">module<a href=\"#module\" aria-label=\"module permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">CommonJS</code> (default)</td>\n<td>CommonJS 형식으로 모듈을 컴파일한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">AMD</code></td>\n<td>Asynchronous Module Definition 형식으로 모듈을 컴파일한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">UMD</code></td>\n<td>Universal Module Definition 디자인 패턴을 사용하여 모듈을 컴파일한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">System</code></td>\n<td>System.js 형식으로 모듈을 컴파일한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">ES6</code>, <code class=\"language-text\">ES2015</code>, <code class=\"language-text\">ES2020</code>, <code class=\"language-text\">ESNext</code></td>\n<td>ESM(ES Module) 방식으로 모듈을 컴파일한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">module</code> 옵션은 컴파일을 마친 자바스크립트 모듈이 어떤 모듈 시스템을 사용할 지를 설정하는 옵션이다.</p>\n<p>물론 ECMAScript에서 지정한 공식 모듈 시스템은 <code class=\"language-text\">import</code>, <code class=\"language-text\">export</code> 키워드를 사용하는 ESM 방식이기는 하지만, 현실적으로 이러한 모듈 시스템을 지원하는 브라우저가 아직 많지 않고, NodeJS 같은 경우 지난 12.0.0 버전에서 <code class=\"language-text\">--experimental-modules</code> 플래그 없이 ESM을 사용할 수 있는 기능이 추가되기는 했지만, 아직 생태계 전체에 ESM 시스템이 퍼져있는 상황은 아니다. <small>(NodeJS 진영은 아직 CommonJS를 많이 사용한다)</small></p>\n<p>이런 이유들로 인해 우리의 모듈이 무조건 ESM 시스템을 사용하도록 컴파일하기는 현실적으로 어렵기 때문에, 적절히 상황에 맞는 모듈 시스템을 선택할 수 있어야 하는 것이다.</p>\n<p>이 포스팅에서 자바스크립트의 모듈 시스템에 대한 모든 것을 다룰 수는 없으니, 각 모듈 시스템들의 특징 정도만 간단하게 알아보고 넘어가도록 하겠다. 한번 간단하게 두 개의 모듈로 구성된 어플리케이션을 상상해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// utils/math.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/math'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> add2 <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 어플리케이션의 <code class=\"language-text\">index.ts</code> 모듈은 <code class=\"language-text\">utils/math.ts</code> 모듈에서 <code class=\"language-text\">add</code>라는 함수를 가져와서 커링을 통해 <code class=\"language-text\">add2</code> 함수를 생성하고 다시 내보내는 모듈이다. 이제 이 어플리케이션을 각각의 모듈 시스템을 사용하도록 컴파일하면 <code class=\"language-text\">index.ts</code>가 어떻게 변경되는지, 그리고 각 모듈 시스템의 특징이 무엇인지 살펴보도록 하자.</p>\n<h3 id=\"commonjs\" style=\"position:relative;\">CommonJS<a href=\"#commonjs\" aria-label=\"commonjs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> math_1 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./utils/math\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> math_1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">CommonJS</code>는 Common이라는 이름답게, 자바스크립트 모듈을 브라우저 뿐 아니라 서버 환경이나 데스크탑 어플리케이션 내에서도 자유롭게 사용하는 것을 표방하고 있는 모듈 시스템이다.</p>\n<p>그런 이유로 서버 사이드에서 주로 사용하는 런타임인 NodeJS 같은 경우에는 아직까지 CommonJS 시스템을 사용하고 있는 환경이 많기 때문에 서버 사이드에서 사용할 라이브러리 등을 만든다면 해당 CommonJS 시스템을 사용하는 것을 고민해봐야 한다.</p>\n<p>CommonJS는 <code class=\"language-text\">exports</code> 또는 <code class=\"language-text\">module.exports</code> 객체의 프로퍼티에 모듈을 할당하고, 전역함수 <code class=\"language-text\">require</code>를 통해 동기적으로 모듈을 직접 가져오는 방식을 사용한다. 위 예시에서도 <code class=\"language-text\">math_1</code>이라는 변수에 <code class=\"language-text\">require</code>라는 함수를 통해 모듈을 할당하고, <code class=\"language-text\">exports.add2</code> 프로퍼티에 <code class=\"language-text\">add2</code> 함수를 다시 할당하고 있는 것을 볼 수 있다.</p>\n<p>이렇게 <code class=\"language-text\">require</code> 함수가 실행될 때 동기적으로 모듈을 가져오는 CommonJS의 특징 덕분에 <code class=\"language-text\">if</code> 문을 사용하여 “이럴 땐 A 모듈, 저럴 땐 B 모듈을 가져와!” 같은 짓을 하는 것도 가능하다.</p>\n<h3 id=\"amd\" style=\"position:relative;\">AMD<a href=\"#amd\" aria-label=\"amd permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"require\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"exports\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./utils/math\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">require<span class=\"token punctuation\">,</span> exports<span class=\"token punctuation\">,</span> math_1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> math_1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">AMD(Asynchronous Module Definition)</code>는 이름에 걸맞게 비동기적으로 모듈을 가져오는 방식을 사용하는 모듈 시스템이다.</p>\n<p>기존의 CommonJS는 동기적으로 모듈을 가져오는 것을 전제로 개발되었기 때문에 항상 비동기적으로 모듈을 가져오는 방식을 구현하기 위한 활발한 논의가 있었는데, 이 논의 과정 속에서 기존의 CommonJS의 정신인 “모든 환경에서 작동하는 자바스크립트 모듈”에 공감하지 못하는 사람들이 나왔고, 이 사람들이 따로 독립하여 AMD 그룹을 만들게 되었다.</p>\n<p>사실 브라우저 환경은 애초에 서버와 다르게, 필요한 모듈들을 서버로부터 받아와서 사용해야 하는 환경이다. 그렇기 때문에 필요한 모든 모듈을 한번에 받아서 실행하는 것보다 모듈 중에서 필요한 부분만 서버로부터 비동기적으로 가져와서 사용하는 것이 더 효율적인 것이다. 하지만 “모든 환경에서 작동하는 자바스크립트 모듈”을 목표로 하는 CommonJS 그룹에서는 이런 환경 차이를 통합하기가 쉽지 않았다.</p>\n<p>이 과정에서 “브라우저만이라도 제대로 해보자”라는 의견을 가진 사람들이 독립하여 AMD 시스템이 탄생하게 되었고, 그런 이유로 AMD 시스템은 브라우저에서의 비동기 모듈 호출에 초점을 맞추고 개발되었다. <small>(물론 CommonJS도 이후 비동기 모듈 로딩 기능을 따로 추가했다)</small></p>\n<p>하지만 결국 CommonJS에서 떨어져 나온 그룹인만큼 CommonJS와 AMD는 서로 호환할 수 있는 기능들을 많이 제공하고 있기 때문에, 기존의 CommonJS 모듈을 AMD 방식으로 래핑해서 사용하는 등의 응용도 가능하다.</p>\n<p>위 예시에서도 AMD 시스템의 <code class=\"language-text\">define</code> 함수가 기본적으로 CommonJS의 <code class=\"language-text\">require</code>, <code class=\"language-text\">export</code> 함수를 가져와서 사용하고 있는 모습을 볼 수 있다. 기본적으로 내부 구조는 CommonJS와 비슷하지만, <code class=\"language-text\">require</code>함수를 통해 모듈을 가져오는 것이 아니라, <code class=\"language-text\">define</code> 함수의 3번째 인자인 <code class=\"language-text\">math_1</code>을 통해 모듈을 주입받고 있다는 것이 CommonJS 시스템과의 결정적인 차이이다.</p>\n<h3 id=\"umd\" style=\"position:relative;\">UMD<a href=\"#umd\" aria-label=\"umd permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">factory</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> module <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> v <span class=\"token operator\">=</span> <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span>require<span class=\"token punctuation\">,</span> exports<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> define <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span> <span class=\"token operator\">&amp;&amp;</span> define<span class=\"token punctuation\">.</span>amd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"require\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"exports\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./utils/math\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">require<span class=\"token punctuation\">,</span> exports</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> math_1 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./utils/math\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    exports<span class=\"token punctuation\">.</span>add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> math_1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">UMD(Universal Module Definition)</code>은 모듈 시스템이라기보다 다양한 환경에서 Universal, 즉, 범용으로 사용할 수 있는 형태의 디자인 패턴이라고 볼 수 있다.</p>\n<p>그렇기 때문에 UMD 패턴은 보통 <code class=\"language-text\">RequireJS</code> 같은 라이브러리를 통해 사용하는 AMD나 CommonJS와 다르게, 직접 개발자가 직접 UMD 패턴을 사용한 코드를 작성해줘야 한다. 쉽게 말해 위의 예시처럼 IIFE(Immediately Invoked Function Expression, 즉시실행함수)를 사용하여 개발자가 직접 소스 코드 내에서 분기를 쳐주는 것이 결국 UMD 패턴이라는 것이다.</p>\n<p>위 예시를 보면 <code class=\"language-text\">module</code>과 <code class=\"language-text\">module.exports</code>가 존재한다면 CommonJS 시스템을, <code class=\"language-text\">define</code> 함수가 존재한다면 AMD 시스템을 사용하는 것을 볼 수 있다. 이처럼 UMD 패턴은 모듈이 사용되는 환경이 어떤 모듈 시스템을 사용하는지 여부와 상관없이 항상 동일한 경험을 제공할 수 있다는 장점이 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9a3cbcb2d8922dd1e01e855b408e4af4/22475/all_taken.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC10lEQVR42k2SSU9TURiGK1opBUpRFBREoy5ETYhKjDGaOEaN08aoCyMhaqIGB9hoxAEBK8YBp1Kwg9iR3tKWFluo4oSgSAMBozaGpYk7/QuP361GXTy55yb3Puf93nM0RX1PKertSTMnHmGWuk7EWNgbYGHMx/xoiNJwmBKhKNhFcTDMXCWEwauQ7e4UfGS7fpMjaAp7/xPGIqzzPqLYaqY8YWNt4iHL4iHKYrJBNMKSaJSybnmGujG6veg8frK9gtP7TzgjHKRAUsyJRyno66HM5+S4uZVLE5/Y9WaAc2NjVI+McHBgkKvjHzk9PELlwHvKXWZKLS3k2DrQq0ldIpVNNAa/n/xQF4VPu5mtCu+1UHfxIq9SXzieTOKanKR+fILDQ+/o//ady6Pj7In3s995h/VnjpDf1IxeCUpKz29hbqcfY0BhpiQtjIbZbGqgreEUV/pitHydpGpwiCqRbU8849S7Qfa9eEW5v4u5dVeYd7IanekW+j8d/hXmSso8RaFASi/pDqOLRDg2/IHUj5/cSn2lJt7HI1sblf2d7I4naJTvNjQ2sfxsLfuvNlDicJKZ7tGNJsfnR0UVGoNB8oIhpvuV9Ijmzyk2979ksRR/2mGn1uOlSrqskfWh2lq2XL/BxkAAvQj1HZ50j2lhrioUSZ4/gFFQT+/E0DAXkmPc/ZTi6NAHHKMTWOS9ZjjJoZ4Y8x62UnLvAfntdrQOd1qoIoeioI6dJ2MbJIlBZDrpY+fzl+ztfcbWrgCbFB/1g28wJUc58vY9B1+8Zqb8o3W6ybI/IcvmQmd3keVwibBTkgk6KTRDZFphmtNHxhMP2sduFjWZONBQx47GenaamimSRBkeH9oOJ1Otj5ki12a63Y1BUuaLXKOmyhTJOhHubjez0uZgjd3KUquDBdZ2tl2uZk3zTVbcvsPq89eouN/GKpudJa0WKtpaqbC0Y7TYKJW7WGzr4BekrCjuRnfpjQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"all taken\" title=\"\" src=\"/static/9a3cbcb2d8922dd1e01e855b408e4af4/6af66/all_taken.png\" srcset=\"/static/9a3cbcb2d8922dd1e01e855b408e4af4/69538/all_taken.png 160w,\n/static/9a3cbcb2d8922dd1e01e855b408e4af4/72799/all_taken.png 320w,\n/static/9a3cbcb2d8922dd1e01e855b408e4af4/6af66/all_taken.png 640w,\n/static/9a3cbcb2d8922dd1e01e855b408e4af4/d9199/all_taken.png 960w,\n/static/9a3cbcb2d8922dd1e01e855b408e4af4/22475/all_taken.png 1039w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>UMD === 뭘 좋아할 지 몰라서 모든 모듈 시스템을 다 준비했어</small>\n</center>\n<p>추가적으로, 모듈을 사용하는 환경이 CommonJS, AMD 두 시스템 모두 지원하지 않는 경우에는 UMD 패턴을 사용하여 전역 객체인 <code class=\"language-text\">globalThis</code>, <code class=\"language-text\">window</code>, <code class=\"language-text\">global</code> 등의 프로퍼티로 모듈을 넣는 최후의 방법도 있기는 하다.</p>\n<p>하지만 이 방법은 전역 스코프를 오염시키기 때문에 가급적이면 피하는 것이 좋기도 하고, 최근의 자바스크립트 런타임 환경에서 모듈 시스템 자체가 지원되지 않는 환경이 강제되는 경우는 흔치 않으므로 타입스크립트는 이런 방법까지는 사용하지 않는 것으로 보인다.</p>\n<h3 id=\"system\" style=\"position:relative;\">System<a href=\"#system\" aria-label=\"system permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">System<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"./utils/math\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">exports_1<span class=\"token punctuation\">,</span> context_1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> math_1<span class=\"token punctuation\">,</span> add2<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> __moduleName <span class=\"token operator\">=</span> context_1 <span class=\"token operator\">&amp;&amp;</span> context_1<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">setters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">math_1_1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                math_1 <span class=\"token operator\">=</span> math_1_1<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">execute</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">exports_1</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2\"</span><span class=\"token punctuation\">,</span> add2 <span class=\"token operator\">=</span> math_1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>UMD 패턴이 “네가 뭘 좋아할 지 몰라서 다 준비했어”의 디자인 패턴 버전이라면, <code class=\"language-text\">SystemJS</code>는 이걸 라이브러리로 구현한 모듈 로더이다. <small>(한 술 더 떴다)</small></p>\n<p>즉, SystemJS는 모듈 로더이기 때문에 모듈을 어떻게 정의하는지에 대한 것은 관여하지 않고, 그저 이미 CommonJS, AMD, ESM 방식으로 정의된 모듈을 로드해주기만 하는 녀석이다.</p>\n<p>SystemJS는 2016년 ECMA 재단이 ES6의 공식 모듈 스펙으로 <code class=\"language-text\">import</code>, <code class=\"language-text\">export</code> 키워드를 사용하는 ESM 패턴을 발표했을 때 즈음 꽤나 많이 사용되던 녀석인데, 그 이유는 이 당시 브라우저들이 이 스펙을 지원하지 않았기 때문이다.</p>\n<p>모듈링에 대한 공식 스펙은 정해졌으나 정작 그걸 실행시킬 브라우저 벤더들의 대응이 늦는 상황이라 ESM을 사용하고 싶어도 할 수가 없는 상황이었는데, 이때 SystemJS가 이 중간 다리 역할을 해줬었다. 당시에는 <a href=\"https://github.com/ModuleLoader/es-module-loader\" target=\"_blank\" rel=\"nofollow\">es-module-loader</a>라는 폴리필을 사용하여 ESM 방식의 모듈을 불러오도록 구현되어있었다.</p>\n<p>그런데 여기서 한 가지 의문이 드는 것이 “브라우저가 지원하지 않는 모듈을 불러와도 트랜스파일링을 하지 않으면 실행을 시킬 수 없는 경우도 있을텐데, SystemJS는 이 문제를 어떻게 해결하는 걸까?”라는 것인데, 정답은 의외로 가까운 곳에 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/934e6cd11f70c175f5171121f4db2f65/47311/cool.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAACBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB56Spyjs0/wD/xAAZEAEBAAMBAAAAAAAAAAAAAAABAgADEUL/2gAIAQEAAQUCjrIGbBb8VHJOuf/EABgRAAIDAAAAAAAAAAAAAAAAAAABESEx/9oACAEDAQE/AVTk0//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AYf/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIRITH/2gAIAQEABj8Ct2YOiCHrOn//xAAYEAADAQEAAAAAAAAAAAAAAAABESEAMf/aAAgBAQABPyGnEOXAlvy4sBMDcyKrzDMHBp5B5//aAAwDAQACAAMAAAAQj/8A/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAwEBPxC4NaP/xAAXEQADAQAAAAAAAAAAAAAAAAAAASEx/9oACAECAQE/EKUMh//EAB0QAQEAAgEFAAAAAAAAAAAAABEBACExUWFxgZH/2gAIAQEAAT8QEYDaY9sW2mi1n25ZldIzxkYiAAnnD+oHA9cvhnpz/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cool\" title=\"\" src=\"/static/934e6cd11f70c175f5171121f4db2f65/c08c5/cool.jpg\" srcset=\"/static/934e6cd11f70c175f5171121f4db2f65/0913d/cool.jpg 160w,\n/static/934e6cd11f70c175f5171121f4db2f65/cb69c/cool.jpg 320w,\n/static/934e6cd11f70c175f5171121f4db2f65/c08c5/cool.jpg 640w,\n/static/934e6cd11f70c175f5171121f4db2f65/6a068/cool.jpg 960w,\n/static/934e6cd11f70c175f5171121f4db2f65/47311/cool.jpg 1080w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>복잡한 건 잘 모르겠고, 그냥 babel 가져와서 런타임에 쿨하게 트랜스파일링 돌리자</small>\n</center>\n<p>그렇다. 이 방법을 쓰면 불러올 대상 모듈의 언어가 ES2020나 타입스크립트라도 아무 문제가 없고, 모듈 시스템으로 CommonJS를 사용하던 AMD를 사용하던 아무 문제가 없다. 물론 이 기능은 SystemJS의 기본 기능이 아니라서 <a href=\"https://github.com/systemjs/systemjs-babel\" target=\"_blank\" rel=\"nofollow\">systemjs-babel</a>이라는 익스텐션을 사용해야 하지만, 문제 해결 방식 자체가 상당히 화끈한 것이 인상적이다.</p>\n<p>하지만 런타임에 모듈을 트랜스파일링한다는 것은 단순히 트랜스파일링만의 문제가 아니라 모듈 간의 의존관계도 파악해야하고, 심지어 타입스크립트를 사용하는 경우에는 정적 타입 체크를 거친 컴파일까지 해야하기 때문에, 당연히 빌드 타임에 이런 무거운 작업을 수행해버리면 퍼포먼스가 떨어질 수 밖에 없다.</p>\n<p>2021년 현재, 모두가 알다시피 이런 무거운 작업들은 모두 빌드 타임에 진행해도 아무 문제가 없으니, 굳이 런타임에 이런 짓을 벌이는 SystemJS는 특수한 상황이 아니면 쓰이지 않는 분위기인 것 같다.</p>\n<h3 id=\"es-module\" style=\"position:relative;\">ES Module<a href=\"#es-module\" aria-label=\"es module permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/math'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> add2 <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">ESM(ES Module)</code> 방식은 ECMA 재단에서 공식으로 정의한 자바스크립트 생태계의 모듈 시스템이다.</p>\n<p>그런 이유로 <code class=\"language-text\">require</code>나 <code class=\"language-text\">define</code> 같은 별도의 함수에 의존하여 모듈을 불러오는 CommonJS나 AMD와 다르게 <code class=\"language-text\">import</code>, <code class=\"language-text\">export</code>라는 키워드를 사용하여 모듈을 불러오는 것을 볼 수 있다.</p>\n<p>2015년에 등장한 ESM은 2009년부터 사용하던 CommonJS나 AMD에 비하면 후발 주자인 주제에, 모듈에 <code class=\"language-text\">use strict</code> 디렉티브가 반드시 포함되어야 한다던가, <code class=\"language-text\">this</code>가 전역 객체인 <code class=\"language-text\">window</code>를 바라보지 않는 등의 변경 사항이 많았던 스펙이기도 했다.</p>\n<p>그래서 이런 제약이 없는 CommonJS나 AMD 시스템을 사용하던 어플리케이션들이 손쉽게 마이그레이션을 할 수 있는 상황이 아니였고, 그 상황이 지금까지도 이어져오고 있다.</p>\n<p>그런 이유로 오늘 날에도 네이티브 자바스크립트 환경에서 ESM을 사용하기 위해서 <code class=\"language-text\">script</code> 태그에 <code class=\"language-text\">type=\"module\"</code> 속성을 추가하거나, <code class=\"language-text\">package.json</code>에 <code class=\"language-text\">\"type\": \"module\"</code>이라는 필드를 추가해줘야 하는 등 별도의 작업이 필요한 것이다.</p>\n<p>물론 예전에 비하면 최근 많은 벤더들이 ESM을 지원하고 있지만, 그래도 아직까지 ESM을 안전하게 사용하기 위해서는 Webpack이나 Babel같은 번들러와 트랜스파일러를 조합하여 빌드 타임에 모듈 간의 의존 관계를 파악하고 런타임이 알아들을 수 있는 형태로 변환해주는 과정이 필요하기 때문에, 모듈을 사용하는 환경이 어떤 환경인지에 따라서 때로는 사용하기 번거로운 포맷이 될 수 있다는 것을 염두에 두어야 한다.</p>\n<p>다만 ESM은 이런 단점을 모두 씹어먹을 수 있을 정도의 한 가지 장점을 가지고 있는데, 바로 Webpack으로 모듈을 번들링할 때 트리쉐이킹이 수월하다는 것이다.</p>\n<p>Webpack의 <a href=\"https://webpack.js.org/plugins/module-concatenation-plugin/\" target=\"_blank\" rel=\"nofollow\">ModuleConcatenationPlugin</a>은 모듈들을 하나의 클로저로 통합하여 브라우저 환경에서 더 높은 퍼포먼스를 만들어내는데, 이때 CommonJS와 ESM 중 어떤 모듈 시스템을 사용하냐에 따라 결과물이 많이 달라지게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// CommonJS</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/* harmony import */</span> <span class=\"token keyword\">var</span> _utils__WEBPACK_IMPORTED_MODULE_0__ <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>_utils__WEBPACK_IMPORTED_MODULE_0__<span class=\"token comment\">/* .add */</span> <span class=\"token punctuation\">.</span><span class=\"token constant\">DG</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Webpack을 통해 번들링 했을 때 CommonJS 시스템을 사용한 모듈은  <code class=\"language-text\">__webpack_require__</code>라는 함수를 통해 불러와지게 되는데, 문제는 이게 모듈 내부에 있는 <code class=\"language-text\">add</code> 함수만 불러오는 것이 아니라 전체 모듈을 다 불러오는 코드라는 것이다.</p>\n<p>다음 라인인 <code class=\"language-text\">(0,_utils__WEBPACK_IMPORTED_MODULE_0__/* .add */ .DG)</code>를 보면, 불러온 모듈의 <code class=\"language-text\">DG</code>라는 프로퍼티에 접근하고 있는 것을 볼 수 있는데, 이 <code class=\"language-text\">DG</code>가 난독화된 <code class=\"language-text\">add</code> 함수의 이름이다.</p>\n<p>애초에 CommonJS는 <code class=\"language-text\">exports</code>라는 전역 객체의 프로퍼티에 값들을 할당하는 방식을 사용하기 때문에, “이 모듈에서 A라는 함수만 사용한다”라는 것을 파악하기가 쉽지가 않은 것이다.</p>\n<p>하지만 ESM 시스템을 사용한 모듈은 각각의 <code class=\"language-text\">export</code> 키워드를 사용하여 원하는 값을 따로 내보낼 수 있고, 그로 인해 상세한 의존 관계를 파악하기가 한결 수월하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ESM</span>\n\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// webpackBootstrap</span>\n<span class=\"token comment\">/******/</span>    <span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// CONCATENATED MODULE: ./utils/math.js**</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// CONCATENATED MODULE: ./index.js**</span>\n<span class=\"token keyword\">var</span> add2 <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Webpack을 통해 번들링한 ESM 시스템의 모듈을 보면, 애초에 모듈을 불러오는 코드 자체가 없고 심지어 모듈 내부에 있던 함수를 인라인으로 박아버렸다.</p>\n<p>물론 필자가 불러온 <code class=\"language-text\">add</code> 함수는 매우 작은 함수라 이런 식으로 표현될 수 있는 것이기는 하지만, 중요한 점은 모듈 내부에 있는 “특정 함수”만 가져왔다는 것이다.</p>\n<p>앞서 이야기 했듯이 ESM은 <code class=\"language-text\">import</code>, <code class=\"language-text\">export</code> 키워드를 통한 상세 의존 관계 파악이 쉬운 편이기 때문에 빌드 타임에 효율적으로 사용하는 코드와 사용하지 않는 코드를 발라내는 것이 가능하다.</p>\n<p>이렇게 트리쉐이킹이 쉽다는 강력한 이유 때문에 <del>Lodash를 제외한</del> 유명한 라이브러리들은 대부분 ESM 방식을 공식적으로 지원하고 있다.</p>\n<h2 id=\"moduleresolution\" style=\"position:relative;\">moduleResolution<a href=\"#moduleresolution\" aria-label=\"moduleresolution permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">Node</code></td>\n<td>Node 전략을 사용하여 모듈을 탐색한다. <code class=\"language-text\">module</code> 옵션이 CommonJS일 때 Default.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">Classic</code></td>\n<td>Classic 전략을 사용하여 모듈을 탐색한다. <code class=\"language-text\">module</code> 옵션이 CommonJS가 아닐 때 Default.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">moduleResolution</code> 옵션은 타입스크립트가 모듈을 불러올 때 이 모듈이 정확히 무엇을 참조하는 지를 확인하는 프로세스를 다루는 옵션이다. 이건 그냥 말로 설명하면 너무 어려우니 직접 코드를 보면서 알아보도록 하자.</p>\n<p>우선 타입스크립트는 크게 상대 경로와 절대 경로, 2가지 방법을 사용하여 모듈의 경로를 정의하는 방법을 사용하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/math'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 상대 경로</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> debounce <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 절대 경로</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>상대 경로의 경우에는 현재 위치를 나타내는 <code class=\"language-text\">.</code>이나 상위 디렉토리를 나타내는 <code class=\"language-text\">..</code> 등의 식별자를 사용하여 탐색을 위한 기점을 지정함으로써 정확한 모듈의 위치를 나타낼 수 있는 반면, 절대 경로의 경우에는 단순히 모듈의 이름만 적고 있기 때문에 정확한 모듈의 위치를 찾기 위해서 특정한 규칙을 기반으로 모듈을 찾아나서는 여행을 떠나야 한다.</p>\n<p>또한 상대 경로, 절대 경로 두 방법 모두 모듈의 확장자까지는 적고 있지 않기 때문에, 이 모듈이 <code class=\"language-text\">math.ts</code>, <code class=\"language-text\">math.d.ts</code> 등 어떤 확장자를 가지고 있는 파일인지도 알아내어야 한다.</p>\n<p>그렇기 때문에 타입스크립트는 모듈의 정확한 위치를 찾아내는 전략을 세워야 하는데, 이때 <code class=\"language-text\">moduleResolution</code> 옵션으로 Classic과 Node 중 어떤 전략을 사용할 것인지를 선택할 수 있는 것이다.</p>\n<p>사실 두 전략 모두 모듈의 위치를 찾는 기본적인 방법 자체는 크게 다르지 않다.</p>\n<p>만약 <code class=\"language-text\">import { add } from './math'</code>와 같이 상대 경로를 사용한 모듈을 찾을 때는 찾아 볼 디렉토리가 명확하기 때문에 해당 디렉토리 내에서만 파일을 찾아보고, <code class=\"language-text\">import { add } from 'math'</code>와 같이 절대 경로를 사용한 모듈을 찾을 때는 찾아야 할 디렉토리가 명확하지 않으니, 우선 해당 모듈을 불러온 파일이 위치한 디렉토리부터 뒤져보고, 없다면 한 단계 상위 디렉토리로, 그래도 없다면 또 한 단계 상위 디렉토리로 거슬러 올라가는 방식으로 모듈을 찾는다.</p>\n<p>이때 찾고자 하는 파일의 확장자가 무엇인지, 그리고 모듈을 찾을 때 어디를 먼저 찾아보는지에 따라서 Classic 전략과 Node 전략 간의 차이가 발생한다.</p>\n<h3 id=\"classic\" style=\"position:relative;\">Classic<a href=\"#classic\" aria-label=\"classic permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">Classic</code> 전략은 사실 상 타입스크립트의 기본 모듈 탐색 전략으로, 예전부터 사용하던 전략이기도 해서 하위 버전의 타입스크립트과의 호환성을 맞출 때에도 사용한다.</p>\n<p>Classic 전략은 상대 경로를 사용하여 불러온 모듈을 찾을 때, 해당 모듈을 불러오는 모듈의 위치를 기점으로 <code class=\"language-text\">*.ts</code>, <code class=\"language-text\">*.d.ts</code>의 순서로 탐색을 시작한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// /root/src/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./math'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<ol>\n<li>\n<p><code class=\"language-text\">/root/src/math.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/math.d.ts</code></p>\n</li>\n</ol>\n</blockquote>\n<p>앞서 이야기 했듯이 상대 경로를 사용한 경우에는 찾아봐야 하는 디렉토리의 위치가 명확하기 때문에 후보가 되는 확장자만 탐색을 진행한 후, 해당 모듈이 없는 경우 탐색을 종료하게 된다.</p>\n<p>반면 <code class=\"language-text\">import { add } from 'math'</code>와 같이 절대 경로를 사용한 모듈의 경우에는 현재 모듈을 불러온 경로부터 시작해서 한 단계씩 부모 디렉토리로 거슬러 올라가면서 탐색을 진행하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// /root/src/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'math'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<ol>\n<li>\n<p><code class=\"language-text\">/root/src/math.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/math.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/math.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/math.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/math.ts</code></p>\n</li>\n</ol>\n</blockquote>\n<p>절대 경로를 사용한 경우, 가장 처음으로 모듈을 불러온 파일이 위치한 <code class=\"language-text\">/root/src</code>에서부터 탐색을 시작한다. 이후 이 디렉토리에서 모듈을 찾지 못 하면 한 단계 씩 거슬러 올라가며 다시 탐색을 진행하고, 루트까지 탐색했는데도 해당 모듈이 없는 경우 탐색을 종료하게 된다.</p>\n<h3 id=\"node\" style=\"position:relative;\">Node<a href=\"#node\" aria-label=\"node permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">Node</code> 전략은 이름 그대로 NodeJS가 모듈을 찾는 방식을 그대로 모방하는 전략이며, Node 전략은 Classic 전략과 다르게 <code class=\"language-text\">*.ts</code>나 <code class=\"language-text\">*.d.ts</code> 확장자를 탐색하는 것을 넘어서서 조금 더 다양한 형태의 모듈까지 탐색을 한다.</p>\n<p>상대 경로를 사용한 경우는 Classic 전략과 비슷하게, 지정된 디렉토리 내부에서 다음과 같은 순서로 파일을 탐색하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// /root/src/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./math'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<ol>\n<li>\n<p><code class=\"language-text\">/root/src/math.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/math.tsx</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/math.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/math/package.json</code> (<code class=\"language-text\">types</code> 필드를 사용하는 경우에 한해)</p>\n</li>\n<li>\n<p><code class=\"language-text\">root/src/math/index.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">root/src/math/index.tsx</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">root/src/math/index.d.ts</code></p>\n</li>\n</ol>\n</blockquote>\n<p>뭔가 많이 추가된 것 같지만, 기본적으로는 Classic 전략과 마찬가지로 지정된 디렉토리 내부의 파일을 찾되, <code class=\"language-text\">*.tsx</code> 확장자를 가진 모듈과 <code class=\"language-text\">package.json</code> 내부의 <code class=\"language-text\">types</code> 속성, 그리고 모듈 이름과 동일한 디렉토리의 <code class=\"language-text\">index.*</code> 파일을 추가로 탐색할 뿐이다.</p>\n<p>이처럼 상대 경로를 사용한 모듈을 탐색할 때는 Node 전략과 Classic 전략 모두 비슷한 순서로 디렉토리 트리를 탐색하지만, 절대 경로로 지정된 모듈을 찾을 때는 차이가 커진다.</p>\n<p>왜냐하면 Node 전략은 Classic과 다르게, 절대 경로를 사용한 모듈을 찾을 때는 <code class=\"language-text\">node_modules</code> 디렉토리를 탐색하기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// /root/src/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'math'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<ol>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math.tsx</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math/package.json</code> (<code class=\"language-text\">types</code> 필드를 사용하는 경우에 한해)</p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/@types/math.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math/index.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math/index.tsx</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/src/node_modules/math/index.d.ts</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">/root/node_modules/math.ts</code> (부모 디렉토리로 이동 후 반복)</p>\n</li>\n</ol>\n<p>…</p>\n</blockquote>\n<p>Node 전략을 사용하게 되면 가장 먼저 <code class=\"language-text\">math</code> 모듈을 호출한 파일이 위치한 <code class=\"language-text\">/root/src</code> 디렉토리에 있는 <code class=\"language-text\">node_modules</code> 디렉토리에서 탐색을 진행한다.</p>\n<p>이때 상대 경로에서와 동일하게 <code class=\"language-text\">*.ts</code>, <code class=\"language-text\">*.tsx</code>, <code class=\"language-text\">*.d.ts</code> 파일과 <code class=\"language-text\">package.json</code>의 <code class=\"language-text\">types</code> 필드를 찾아보며, 그 이후에는 <code class=\"language-text\">@types</code> 디렉토리와 모듈 이름과 동일한 이름을 가진 디렉토리 밑에 있는 <code class=\"language-text\">index</code> 파일을 탐색한다.</p>\n<p>이렇게 한 번의 탐색 과정이 끝나도 원하는 모듈을 찾지 못했다면, 부모 디렉토리로 이동한 후 이 과정을 다시 반복한다. 그 후 루트에 도달하여 로컬 머신에 전역 설치된 모듈이 있는지까지 탐색했는데도 해당 모듈이 없다면 탐색을 종료하게 된다.</p>\n<p>이러한 탐색 과정은 NodeJS가 모듈을 찾는 과정과 동일하지는 않지만, 매우 비슷하다. NodeJS는 먼저 모듈과 동일한 이름의 파일을 찾은 후, <code class=\"language-text\">package.json</code>의 <code class=\"language-text\">main</code> 필드에 적힌 경로의 파일을 찾아 보고, 마지막으로 모듈과 동일한 디렉토리 밑에 있는 <code class=\"language-text\">index</code> 파일을 탐색하는데, 타입스크립트의 Node 전략이 바로 이 탐색 과정을 모방한 것이기 때문이다.</p>\n<p>타입스크립트 공홈에는 NodeJS가 사용하는 방식과 비교해서 크게 복잡하지 않으니 걱정말라고 하지만, 사실 애초에 NodeJS가 사용하고 있는 패키지 탐색 방식 자체가 비효율적이기는 하다. 그런 이유로 타입스크립트 4.0 버전부터는 불러오지 않은 모듈에 대해서는 더 이상 위와 같은 과정을 통해 타입 정보를 찾지 않도록 업데이트가 되었다.</p>\n<h2 id=\"noresolve\" style=\"position:relative;\">noResolve<a href=\"#noresolve\" aria-label=\"noresolve permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>어플리케이션에 포함된 모든 모듈을 해석한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>명시적으로 어플리케이션에 포함하기로한 모듈만 해석한다.</td>\n</tr>\n</tbody>\n</table>\n<p>기본적으로 타입스크립트 컴파일러는 어플리케이션에 포함된 모든 모듈을 컴파일하려고 시도한다. 즉, tsconfig 루트의 <a href=\"/2021/07/30/tsconfig-options-root-fields/#include\">include</a>나 <a href=\"/2021/07/30/tsconfig-options-root-fields/#files\">files</a> 필드에 포함하지 않은 파일이라고 해도, 어플리케이션 내에서 직접 <code class=\"language-text\">import</code> 문이나 <code class=\"language-text\">/// &lt;reference path=\"...\" /></code> 같은 디렉티브를 사용하여 모듈을 불러왔다면, 그 모듈 또한 컴파일 대상이라는 것이다.</p>\n<p>어찌보면 암시적으로 모듈을 컴파일 대상에 포함시킨다는 이야기인데, 이때 <code class=\"language-text\">noResolve</code> 옵션을 <code class=\"language-text\">true</code>로 설정하면 이런 암시적인 모듈 컴파일을 막을 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/index.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"noResolve\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// src/index.ts</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/math'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> add2 <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시의 <code class=\"language-text\">include</code> 필드에는 <code class=\"language-text\">src/index.ts</code>만 포함되어 있고, <code class=\"language-text\">utils/math</code> 모듈은 포함되어있지 않다.</p>\n<p>이런 경우일 때 <code class=\"language-text\">noResolve</code> 옵션의 값이 <code class=\"language-text\">false</code>라면 <code class=\"language-text\">index.ts</code>에서 사용하는 <code class=\"language-text\">utils/math</code> 모듈도 아무 문제 없이 컴파일되지만, <code class=\"language-text\">true</code>인 경우에는 해당 모듈을 찾을 수 없다는 에러가 발생하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">src/index.ts:1:21 - error TS2307: Cannot find module './utils/math' or its corresponding type declarations.\n\n1 import { add } from './utils/math';</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>즉, 반드시 명시적으로 <code class=\"language-text\">include</code>나 <code class=\"language-text\">files</code> 필드에 선언된 모듈들만 컴파일을 하고 있는 것이다. 이와 마찬가지 이유로 <code class=\"language-text\">/// &lt;reference path=\"...\" /></code> 같이 디렉티브를 사용하여 불러온 모듈들도 해당 필드에 포함되어 있지 않기 때문에 컴파일 대상에서 제외된다.</p>\n<p><code class=\"language-text\">noResolve</code> 옵션은 개발자가 타입스크립트의 컴파일 대상을 명시적으로 선언하게 만듦으로써 수월한 모듈 관리를 도와주기는 하지만, 디렉티브를 사용하여 불러온 모듈까지 컴파일 대상에서 제외한다는 특성 때문에 디렉티브를 사용하여 타입 정의 파일을 불러오는 NextJS 같은 라이브러리를 사용하고 있는 상황에서는 그냥 기본 값인 <code class=\"language-text\">false</code>로 사용하는 것이 정신 건강에 이롭다.</p>\n<h2 id=\"resolvejsonmodule\" style=\"position:relative;\">resolveJsonModule<a href=\"#resolvejsonmodule\" aria-label=\"resolvejsonmodule permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td><code class=\"language-text\">*.json</code> 확장자로 끝나는 모듈의 import를 허용하지 않는다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td><code class=\"language-text\">*.json</code> 확장자로 끝나는 모듈의 import를 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">resolveJsonModule</code> 옵션은 이름 그대로 JSON 파일로 구현된 모듈을 끌어다 쓸 수 있게 허용할 것인지에 대한 여부를 결정한다.</p>\n<p>만약 해당 옵션이 <code class=\"language-text\">false</code>라면, JSON 모듈을 가져왔을 때 타입스크립트는 해당 모듈을 찾을 수 없다는 에러를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// me.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"evan-moon\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Frontend Engineer\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> me <span class=\"token keyword\">from</span> <span class=\"token string\">'./me.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Cannot find module './settings.json'. Consider using '--resolveJsonModule' to import module with '.json' extension.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">resolveJsonModule</code> 옵션을 켜게 되면 일반적인 타입스크립트 모듈과 동일하게 JSON 모듈을 가져와서 사용할 수 있게 되고, 심지어 해당 파일을 분석하여 자동으로 타입 추론까지 해준다.</p>\n<p>하지만 이 경우 당연히 Enum이나 Union Type을 사용한 추론은 불가능하기 때문에 모든 값들은 <code class=\"language-text\">string</code>이나 <code class=\"language-text\">number</code> 등의 원시 타입으로 추론된다. 그러니 만약 강력한 타입 선언을 강제해야하는 경우라면 JSON 모듈이 아니라 타입스크립트 모듈을 사용하여 모델을 선언해주는 것이 좋다.</p>\n<h2 id=\"rootdir\" style=\"position:relative;\">rootDir<a href=\"#rootdir\" aria-label=\"rootdir permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">rootDir</code> 옵션은 모듈을 컴파일 한 이후 어떤 디렉토리를 루트로 하여 현재 구조를 유지할 것 인지를 결정한다.</p>\n<p>기본적으로 타입스크립트는 컴파일을 수행할 때 입력된 디렉토리의 구조를 그대로 유지하며 컴파일된 파일들을 출력하는데, 이때 <code class=\"language-text\">rootDir</code> 옵션을 사용하여 어떤 디렉토리를 루트로 설정할 것인지를 정하는 것이다.</p>\n<p>만약 이 옵션을 따로 설정하지 않는다면, 타입스크립트는 자동으로 해당 모듈의 엔트리 포인트가 되는 파일을 찾고, 해당 파일이 위치한 디렉토리를 루트로 설정하여 출력 디렉토리 구조를 설정하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── src\n│   ├── index.ts\n│   └── utils\n│       └── math.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위와 같은 구조의 프로젝트가 있다고 생각해보자. <code class=\"language-text\">rootDir</code> 옵션이 주어지지 않았을 때의 타입스크립트는 이 어플리케이션의 엔트리 포인트인 <code class=\"language-text\">src/index.ts</code>를 찾아내고, 이 파일의 위치인 <code class=\"language-text\">src</code>를 루트로 인식하게 된다.</p>\n<p>그렇기 때문에 출력 디렉토리는 루트를 <code class=\"language-text\">src</code> 디렉토리로 하는 다음과 같은 구조를 가지게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">dist\n├── index.ts\n└── utils\n    └── math.ts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그러나 만약 이 상태에서 <code class=\"language-text\">rootDir</code> 옵션을 현재 경로를 의미하는 <code class=\"language-text\">.</code>로 설정하게 되면, 출력 디렉토리의 구조가 변경되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rootDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">dist\n└── src\n    ├── index.ts\n    └── utils\n        └── math.ts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자가 루트 디렉토리를 현재 <code class=\"language-text\">tsconfig.json</code>이 위치한 <code class=\"language-text\">myProject</code> 디렉토리로 변경했기 때문에, 출력 디렉토리인 <code class=\"language-text\">dist</code>는 기존 프로젝트 디렉토리와 완전히 동일한 구조를 가지게 되고, 이로 인해 디렉토리 내부에 <code class=\"language-text\">src</code> 디렉토리까지 함께 생성된 형태로 출력되게 된다.</p>\n<p>어찌보면 굉장히 간단한 동작이지만, 이 옵션을 사용할 때는 한 가지 주의해야 할 점이 있다. 바로 <code class=\"language-text\">rootDir</code> 옵션은 컴파일 대상에 아무런 영향을 끼치지 않는다는 것이다.</p>\n<p>즉, 만약 <code class=\"language-text\">rootDir</code> 옵션을 사용한다면 모든 컴파일 대상 파일은 해당 디렉토리 밑에 위치해야 한다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── src\n│   ├── index.ts\n│   └── utils\n│       └── math.ts\n├── foo.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rootDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 설정을 살펴보면 루트 디렉토리로 <code class=\"language-text\">src</code> 디렉토리를 설정하고, <code class=\"language-text\">include</code> 옵션을 사용하여 모든 파일을 컴파일 할 것이라고 설정해주었다.</p>\n<p>문제는 이 “모든 파일”의 대상 중 하나인 <code class=\"language-text\">foo.ts</code>는 <code class=\"language-text\">src</code> 디렉토리에 들어가 있지 않은 녀석이라는 것이다. 즉, 설정에 모순이 발생한 것이다.</p>\n<p>이렇게 <code class=\"language-text\">rootDir</code> 옵션으로 루트 디렉토리를 정했다고 해도, 타입스크립트는 자동으로 <code class=\"language-text\">foo.ts</code>를 컴파일 대상에 포함시키지 않고, 이런 에러를 발생시킨다.</p>\n<blockquote>\n<p>File ‘/Users/john/myProject/foo.ts’ is not under ‘rootDir’ ‘/Users/john/myProejct/src’. <strong>‘rootDir’ is expected to contain all source files.</strong></p>\n</blockquote>\n<p>이 에러를 보면 알 수 있듯이, <code class=\"language-text\">rootDir</code> 옵션을 사용하여 루트 디렉토리를 설정했다면 반드시 모든 소스 파일들은 루트 디렉토리 내부에 들어있어야 하며, 만약 <code class=\"language-text\">include</code> 등을 사용하여 루트 디렉토리 밖에 있는 파일을 컴파일 대상으로 지정했다고 해도 자동으로 컴파일 해주거나 하지 않는다.</p>\n<h2 id=\"rootdirs\" style=\"position:relative;\">rootDirs<a href=\"#rootdirs\" aria-label=\"rootdirs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">rootDirs</code> 옵션은 일종의 가상 루트를 만들어 줄 수 있는 옵션이다. 이 옵션은 말로 설명하기 보다 코드로 보는 것이 훨씬 이해가 편하니, 바로 예시를 보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">myProject\n├── core\n│   └── index.ts\n├── utils\n│   └── math.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 이런 구조의 어플리케이션이 있다고 생각해보자. 만약 <code class=\"language-text\">core/index.ts</code>에서 <code class=\"language-text\">utils/math.ts</code> 모듈을 가져오고 싶다면 어떻게 해야할까?</p>\n<p>만약 <code class=\"language-text\">paths</code> 옵션을 사용하지 않았다면, 상대 경로를 사용하여 한 단계 상위 디렉토리로 거슬러 올라가서 해당 모듈에 접근할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// core/index.ts</span>\n<span class=\"token keyword\">import</span> math <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/math'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">rootDirs</code> 옵션은 이런 상황일 때 가상의 루트를 만들어서, <code class=\"language-text\">core</code> 디렉토리와 <code class=\"language-text\">utils</code> 디렉토리 내부에 있는 모듈들이 마치 “하나의 디렉토리” 내부에 있는 것처럼 사용할 수 있도록 만들어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rootDirs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"core\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"utils\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// core/index.ts</span>\n<span class=\"token keyword\">import</span> math <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/math'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 마치 같은 디렉토리에 있는 것처럼 사용한다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>만약 <code class=\"language-text\">core/components/Foo/index.tsx</code>와 같이 디렉토리 깊이가 깊다고 해도 <code class=\"language-text\">rootDirs</code>에 해당 디렉토리를 등록하게 되면, <code class=\"language-text\">rootDirs</code>에 등록된 디렉토리 끼리는 항상 같은 디렉토리에 있는 것처럼 모듈을 불러올 수 있다.</p>\n<p>그리고 <code class=\"language-text\">rootDirs</code> 옵션은 일종의 “가상 디렉토리”를 만들어서 이런 기능을 구현하는 방식을 사용하기 때문에, 컴파일한 이후의 출력 디렉토리 구조에는 전혀 영향을 주지 않는다. 말 그대로 가상이다.</p>\n<p>이처럼 <code class=\"language-text\">rootDirs</code> 옵션은 디렉토리의 깊이가 깊은 상황에도 간단하게 상대 경로를 사용할 수 있도록 만들어 주기 때문에 어찌 보면 편하다고 생각할 수도 있다.</p>\n<p>하지만 이런 설정을 사용하게 되면 실제 디렉토리 구조와 코드에서 모듈에 접근하기 위해 사용하는 경로 간의 괴리가 발생하게 됨으로써 직관적인 이해가 어려운 코드가 될 수도 있으며, 심지어 이 괴리의 원인을 확인하기 위해서는 <code class=\"language-text\">tsconfig.json</code>을 까봐야 하는 슬픈 상황이 발생할 수도 있다는 점을 꼭 염두에 두도록 하자.</p>\n<h2 id=\"typeroots\" style=\"position:relative;\">typeRoots<a href=\"#typeroots\" aria-label=\"typeroots permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>기본적으로 타입스크립트는 <code class=\"language-text\">@types</code> 패키지 디렉토리 밑에 있는 파일들을 자동으로 컴파일 대상으로 포함한다. 이때 앞서 설명했던 <code class=\"language-text\">resolve</code> 전략에 따라 <code class=\"language-text\">./node_modules/@types</code>, <code class=\"language-text\">../node_modules/@types</code> 등 디렉토리를 거슬러 올라가면서 <code class=\"language-text\">node_modules</code> 내부에 있는 <code class=\"language-text\">@types</code> 디렉토리를 탐색하는 것이다.</p>\n<p>하지만 <code class=\"language-text\">typeRoots</code> 옵션을 사용하면 타입스크립트가 찾아 헤매는 타입 파일들이 특정한 곳에 있다고 지정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"typeRoots\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./typings\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./node_modules/@types\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">typeRoots</code> 옵션에 적용하는 경로는 <code class=\"language-text\">tsconfig.json</code> 기준의 상대 경로이다. 또한 위 예시에서는 <code class=\"language-text\">./node_modules/@types</code> 디렉토리를 옵션에 포함시켰지만, 사실 없어도 아무 문제 없다.</p>\n<p>이렇게 <code class=\"language-text\">typeRoots</code>를 지정한 경우, 타입스크립트는 기존의 모듈 탐색 전략을 버리고 배열에 들어있는 경로에서만 타입 선언 모듈들을 찾기 때문에, 계속 부모 디렉토리로 거슬러 올라가며 타입 선언 모듈을 찾는 기존의 모듈 탐색 전략보다 효율적인 탐색 전략을 가져갈 수 있다.</p>\n<h2 id=\"types\" style=\"position:relative;\">types<a href=\"#types\" aria-label=\"types permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>앞서 설명했듯이 타입스크립트는 <code class=\"language-text\">@types</code> 패키지 디렉토리 밑에 있는 모든 파일들을 자동으로 컴파일 대상으로 포함하고, 이 과정에서 타입 선언을 전역 스코프에 뿌려버린다.</p>\n<p>이 타입 선언이 전역 스코프에 존재하기 때문에 우리가 <code class=\"language-text\">@types/node</code> 같은 모듈 내부에 포함된 <code class=\"language-text\">process</code> 객체 같은 녀석들을 별도의 타입 선언 없이도 사용할 수 있는 것이다.</p>\n<p>하지만 <code class=\"language-text\">types</code> 옵션을 사용하면, 특정한 패키지들의 타입만 전역 스코프에 포함시킬 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @types/node, @types/jest, @types/express만 가져온다</span>\n    <span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"jest\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위와 같이 설정할 경우, <code class=\"language-text\">node</code>, <code class=\"language-text\">jest</code>, <code class=\"language-text\">express</code> 패키지의 타입은 전역 스코프에 포함되어 <code class=\"language-text\">import express from 'express';</code>라는 구문만 적어도 자동으로 타입 평가가 진행되지만, 여기에 포함되지 않은 다른 라이브러리들은 직접 타입 선언 모듈을 가져와야 한다.</p>\n<p>여기서 주의해야할 점은 <code class=\"language-text\">types</code> 옵션의 대상 자체가 애초에 <code class=\"language-text\">@types</code> 패키지 디렉토리 내부에 존재하는 타입 선언 모듈들이라는 것이다.</p>\n<p>예를 들어 날짜 관련 라이브러리인 <code class=\"language-text\">moment</code>는 <code class=\"language-text\">@types/moment</code> 같은 타입 패키지를 추가적으로 설치하지 않고, 자체적으로 내장하고 있는 타입 선언 모듈을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"moment\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./moment.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jsnext:main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist/moment.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./moment.d.ts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 자체적으로 타입 선언 파일을 포함하고 있다</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 경우는 <code class=\"language-text\">import moment from 'moment'</code> 구문으로 이 라이브러리를 가져옴과 동시에 <code class=\"language-text\">moment.d.ts</code>도 자동으로 컴파일 대상으로 포함되므로, 당연히 제대로 타입을 사용할 수 있다.</p>\n<p>즉, <code class=\"language-text\">types</code> 옵션의 대상은 어디까지나 <code class=\"language-text\">@types/*</code> 패키지 내부에 포함된 타입 선언 모듈이고, 타입스크립트가 해당 타입 선언 모듈을 전역 공간에 뿌리는 경우에만 해당된다는 점을 헷갈리지 말자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이렇게 <code class=\"language-text\">tsconfig</code> 3번째 시리즈인 <code class=\"language-text\">Modules</code> 편을 마무리 했다. 모듈과 관련된 옵션들의 개수 자체는 많지 않지만, 아무래도 컴파일 과정에서 어떤 모듈 시스템을 사용할 지, 어떤 모듈 탐색 전략을 사용할 지 등을 다루는 옵션이다보니 부연 설명이 길어진 것 같다.</p>\n<p>그리고 여기까지 적고 나서 새삼스럽게 드는 생각은…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2f03c5fd1831cbdc146edbf1130bd061/00d43/tsconfig.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 94.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1UlEQVR42oVTZ1PbQBTU//8vhJrQMcaUDKGXTBKKcbflpi5Zstnsni1iEmbyYefda/v2nk5WEIXo9HuwB320e10EoxhjABlekb5O3tkc8j/EOIMVPj/BvblG+vhgkPz8geD7Pfy7WwT3d/9Y7/YGIfOqzebx8AtprQorPj9DvLmBeHcHCZEV95HuFz6EyRX2kNJmf2NvF+nFOSzv9BT9tVUMtzYRqvjoEEnpwCA+KGJ0WMKoVJr6xSJS+gnj8rPjoz9gPOVNreDsGwKSqWjy9QTR/h5aS0toL09hryyjM4O9sgJ7dYX5RWMDqvJ5K9mRVF5fwUquLzGhKk0ZExFVNhYW0Fz8ZBpFZOzylFTxNn0NU6z3eQ1d3tBZ/4KI4qz46hLZnPwRz5rq7WwbGxYK8GdKTHymKOBgd3sLDuGqljYyOzw5hk92Q6rdsHDIqQPtldbb2IDLvLe5zvO6UTJg3OXZ195JFnFATMLs8oKEzQaSVhOp3TGI6Q/4lIblZzgvZbiVl3foPz0a65TLJh+xPqjXEBIZ37Ll+R6SdIQ0S5FNxvDDAFW+p0argVqjblBlcYXQuVKvokxCod6c1lRYL/iBz4/CP2VCsjFJs1GCgAOaLBLsThv9ro0h/ySH03u8wYB/k9BlTnG73TK5iGTislxniAETQwZTEsYM6uwMB/A9FyELVSN4rmP8sW4jAXNQr2CpSM2yCiRxZFTOQzlZkWmg6kZJ/A5vhCKzeRU1aFLEHUqhVOfKVKNB883/VZhfWYStZhNtfvkO9yObQ369VjO7zVehXlkNNITak0gFkSlhlM0G5evId5j7Dn2JEJTTAKm38sY+v5ysSKWgx6/b5So6PA/600b5dqdj1pHndQ58n33hlFCBuh4mJ7zyHcqKUMV5Q5fN5glxqIhyZVqBrG6lj2UIpUpFUqblBiSsVSvcVdW8xRYfb6/bfXtGOfLnJpvHRPwbAA92vl9EkpcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tsconfig\" title=\"\" src=\"/static/2f03c5fd1831cbdc146edbf1130bd061/6af66/tsconfig.png\" srcset=\"/static/2f03c5fd1831cbdc146edbf1130bd061/69538/tsconfig.png 160w,\n/static/2f03c5fd1831cbdc146edbf1130bd061/72799/tsconfig.png 320w,\n/static/2f03c5fd1831cbdc146edbf1130bd061/6af66/tsconfig.png 640w,\n/static/2f03c5fd1831cbdc146edbf1130bd061/d9199/tsconfig.png 960w,\n/static/2f03c5fd1831cbdc146edbf1130bd061/00d43/tsconfig.png 1000w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>어...? 아직도 여기까지밖에 못 썼다고...?</small>\n</center>\n<p>사실 <code class=\"language-text\">tsconfig</code> 옵션이 많은 줄은 이미 알고 있었지만 이렇게까지 힘들 줄은 상상도 못 했다. <small><del>(글 쓰다가 손목이 아픈 적은 또 처음…)</del></small></p>\n<p>물론 공식 문서를 번역하는 느낌으로 쭉쭉 써내려간다면 금방 끝내겠지만, 애초에 이 포스팅 시리즈를 시작한 것은 그 정도의 정보를 원해서가 아니라 <code class=\"language-text\">tsconfig</code>를 완전 분석해보자는 목적이었으므로 한번 달려보도록 하겠다.</p>\n<p><a href=\"/2021/10/30/tsconfig-compiler-options-modules-emit/\">다음 포스팅</a>에서는 타입스크립트가 출력 파일을 생성할 때의 동작들을 다루는 방법에 대한 옵션들에 대해서 이야기해볼 예정이다.</p>\n<p>이상으로 [tsconfig의 모든 것] Compiler options / Modules 포스팅을 마친다.</p>","fields":{"slug":"20210822-tsconfig-compiler-options-modules","path":"/2021/08/22/tsconfig-compiler-options-modules/","lang":"ko"},"frontmatter":{"title":"[tsconfig의 모든 것] Compiler options / Modules","subTitle":"모듈 해석부터 경로 매핑까지, import 동작을 결정하는 컴파일러 옵션","date":"Aug 22, 2021","categories":["프로그래밍","튜토리얼","자바스크립트"],"tags":["TypeScript","타입스크립트","tsconfig"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/d803c/thumbnail.png","srcSet":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/d803c/thumbnail.png 320w,\n/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/fc5c5/thumbnail.webp 320w,\n/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/01fb2/thumbnail.png","srcSet":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/bd1dff385c51f51e8cdfb5ce1bf76e9e/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"15882f84-a7e3-57de-9c8b-d0e275040f44","tableOfContents":"<ul>\n<li>\n<p><a href=\"#unreachable-unused\">Unreachable, Unused</a></p>\n<ul>\n<li><a href=\"#allowunreachablecode\">allowUnreachableCode</a></li>\n<li><a href=\"#allowunusedlabels\">allowUnusedLabels</a></li>\n<li><a href=\"#nounusedlocals\">noUnusedLocals</a></li>\n<li><a href=\"#nounusedparameters\">noUnusedParameters</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%94%EB%AC%B5%EC%A0%81%EC%9D%B8-%EC%84%A0%EC%96%B8-%EA%B8%88%EC%A7%80\">암묵적인 선언 금지</a></p>\n<ul>\n<li><a href=\"#noimplicitany\">noImplicitAny</a></li>\n<li><a href=\"#noimplicitoverride\">noImplicitOverride</a></li>\n<li><a href=\"#noimplicitreturns\">noImplicitReturns</a></li>\n<li><a href=\"#noimplicitthis\">noImplicitThis</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#strict\">Strict</a></p>\n<ul>\n<li><a href=\"#alwaysstrict\">alwaysStrict</a></li>\n<li><a href=\"#strictbindcallapply\">strictBindCallApply</a></li>\n<li><a href=\"#strictfunctiontypes\">strictFunctionTypes</a></li>\n<li><a href=\"#strictnullchecks\">strictNullChecks</a></li>\n<li><a href=\"#strictpropertyinitialization\">strictPropertyInitialization</a></li>\n<li><a href=\"#useunknownincatchvariables\">useUnknownInCatchVariables</a></li>\n<li><a href=\"#strict-1\">strict</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#etc\">etc</a></p>\n<ul>\n<li><a href=\"#exactoptionalpropertytypes\">exactOptionalPropertyTypes</a></li>\n<li><a href=\"#nofallthroughcasesinswitch\">noFallthroughCasesInSwitch</a></li>\n<li><a href=\"#nopropertyaccessfromindexsignature\">noPropertyAccessFromIndexSignature</a></li>\n<li><a href=\"#nouncheckedindexedaccess\">noUncheckedIndexedAccess</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 의 컴파일 옵션의 타입 체킹 옵션들에 대한 이야기를 해보려고 한다. 사실 타입스크립트를 사용하는 이유는 대부분 자바스크립트가 제공하지 않는 강력한 타입 시스템이 가져다 주는 안정성 때문이므로 수없이 많은 컴파일 옵션들 중에서도 타입 체크에 대한 옵션들은 타입스크립트의 가장 핵심 기능을 관리하는 옵션들이라고 할 수 있다.","html":"<p>이번 포스팅에서는 <code class=\"language-text\">tsconfig</code>의 컴파일 옵션의 타입 체킹 옵션들에 대한 이야기를 해보려고 한다.</p>\n<p>사실 타입스크립트를 사용하는 이유는 대부분 자바스크립트가 제공하지 않는 강력한 타입 시스템이 가져다 주는 안정성 때문이므로 수없이 많은 컴파일 옵션들 중에서도 타입 체크에 대한 옵션들은 타입스크립트의 가장 핵심 기능을 관리하는 옵션들이라고 할 수 있다.</p>\n<!-- more -->\n<p>그만큼 타입스크립트는 “이런 코드는 금지야”라는 느낌의 단순한 옵션부터 타입 시스템의 원리를 알고 있어야 동작을 제대로 이해할 수 있는 옵션까지, 굉장히 다양한 옵션들을 제공하고 있다.</p>\n<p>대부분의 타입체크 컴파일 옵션들은 모두 타입스크립트의 타입 안정성을 더욱 단단하게 만들어 줄 수 있는 옵션들이기 때문에, 타입스크립트 팀에서도 가급적 모든 옵션을 켜는 것을 추천하고 있다.</p>\n<p>하지만 타입 안정성이 단단해진다는 것을 반대로 말하면, 평소라면 그냥 <code class=\"language-text\">any</code>타입을 타고 어물쩍 넘어갈 수 있었던 것들도 허용되지 않는다는 의미이다.</p>\n<p>즉, 타입스크립트를 점진적으로 도입하고 있는 어플리케이션에서는 타입 에러만 고치다가 많은 시간을 허비할 수도 있기 때문에, 현재 내가 속해있는 조직의 비즈니스 상황까지 잘 고려하여 옵션을 켜는 것을 추천한다.</p>\n<p>그럼 이제 타입스크립트의 타입 체킹 컴파일 옵션들이 실제로 내 코드에 어떤 영향을 끼치는 지에 대해서 한번 자세히 알아보도록 하자.</p>\n<h2 id=\"unreachable-unused\" style=\"position:relative;\">Unreachable, Unused<a href=\"#unreachable-unused\" aria-label=\"unreachable unused permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">Unreachable, Unused</code> 라는 이름으로 시작하는 옵션들은 소스코드에서 사용하지 않거나, 절대로 실행될 수 없는 코드를 어떻게 관리할 것인지에 대한 옵션들이다.</p>\n<h3 id=\"allowunreachablecode\" style=\"position:relative;\">allowUnreachableCode<a href=\"#allowunreachablecode\" aria-label=\"allowunreachablecode permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">undefined</code> (default)</td>\n<td>도달 할 수 없는 코드를 만나면 경고를 띄운다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>도달 할 수 없는 코드를 만나도 무시한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>도달 할 수 없는 코드를 만나면 에러를 발생시킨다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">allowUnreachableCode</code> 옵션은 컴파일러가 도달 할 수 없는 코드를 만났을 때 어떻게 반응할 것인지에 대한 설정을 의미한다. 도달할 수 없는 코드란, 다시 말해 실행될 수 없는 코드라는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">></span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Unreachable code detected.ts(7027)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">foo</code> 함수는 <code class=\"language-text\">if-else</code> 문에서 어떤 조건에 걸리던 무조건 값을 반환하고 함수를 종료시키는 동작을 가지고 있기 때문에, 함수 맨 마지막 라인의 <code class=\"language-text\">return true</code> 구문은 절대로 실행될 수가 없다. 바로 이 부분이 도달 할 수 없는 코드, Unreachable 코드인 것이다.</p>\n<p>이 옵션은 기본 값으로만 설정해도 저런 코드를 무시하는 것이 아니라 경고를 띄우도록 되어있기 때문에 딱히 해당 옵션을 켜지 않아도 어느 정도는 Unreachable 코드가 발생하는 상황을 방어할 수는 있다.</p>\n<p>그래도 저런 의미없는 구문이 소스코드에 남아있다면 개발자가 어플리케이션의 흐름을 잘못 이해하는 경우가 발생할 수도 있고, 저런 코드는 어차피 죽은 라인이라 그냥 지워버려도 어플리케이션에 어떠한 영향을 주지 않기 때문에, 되도록이면 옵션을 켜고 컴파일 타임 때 에러가 나도록 설정하는 것을 추천한다. <small><del>(물론 알 수 없는 이유로 저런 코드를 지웠는데 버그가 나는 경우도 간혹 있…)</del></small></p>\n<h3 id=\"allowunusedlabels\" style=\"position:relative;\">allowUnusedLabels<a href=\"#allowunusedlabels\" aria-label=\"allowunusedlabels permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">undefined</code> (default)</td>\n<td>사용하지 않는 라벨을 만나면 경고를 띄운다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>사용하지 않는 라벨을 만나도 무시한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code></td>\n<td>사용하지 않는 라벨을 만나면 에러를 발생시킨다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">allowUnusedLabels</code> 옵션은 컴파일러가 코드 내에서 사용하지 않는 라벨을 만났을 때 어떻게 반응할 것인지에 대한 설정을 의미한다.</p>\n<p>프로그래밍을 시작한 지 오래 되지 않은 분들은 이 “라벨”이라는 것이 익숙하지 않으실 수도 있는데, 사실 이 라벨이라는 기능은 타입스크립트에만 있는 것은 아니고 다른 언어들에도 있는 기능이다.</p>\n<p>필자는 6년 전 쯤 학교에서 C를 처음 배울 때 라벨을 사용해보기는 했는데, 그 이후로는 딱히 사용해본 적이 없다.</p>\n<p>라벨은 특정 문(statements)을 대상으로 하기 때문에 <code class=\"language-text\">if</code> 문, <code class=\"language-text\">for</code> 문 등에 이름을 붙히는 것이 가능해지며, 이렇게 이름을 붙힌 문의 이름을 통해 해당 문으로 접근하여 <code class=\"language-text\">break</code>나 <code class=\"language-text\">continute</code> 등의 명령으로 제어할 수 있게 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">;</span>\n\nouterLoop<span class=\"token operator\">:</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  innerLoop<span class=\"token operator\">:</span> <span class=\"token comment\">// Unused Label</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> j <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// i도 1이고 j도 1이면 바깥 루프를 건너뛴다.</span>\n      <span class=\"token keyword\">continue</span> outerLoop<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">i=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, j=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>j<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">번 루프 끝</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">i=0, j=0\ni=0, j=1\ni=0, j=2\n1번 루프 끝\ni=1, j=0\ni=2, j=0\ni=2, j=1\ni=2, j=2\n3번 루프 끝</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시를 보면 안 쪽에 위치한 <code class=\"language-text\">for</code> 문에서 <code class=\"language-text\">i</code>와 <code class=\"language-text\">j</code>가 둘 다 <code class=\"language-text\">1</code>인 상황을 만나면 바깥 쪽 <code class=\"language-text\">for</code> 문을 건너뛰도록 동작하고 있다. 그래서 출력을 확인해보면 <code class=\"language-text\">i=1, j=0</code>이 찍힌 이후 “n번 루프 끝”이라는 로그도 출력되지 않고 바로 세번째 순회를 실행하는 모습을 확인할 수 있다.</p>\n<p>이 때, 바깥 쪽 <code class=\"language-text\">for</code> 문의 라벨인 <code class=\"language-text\">outerLoop</code>는 안 쪽 <code class=\"language-text\">for</code> 문에서 사용된 것을 볼 수 있지만, 안 쪽 <code class=\"language-text\">for</code> 문의 라벨인 <code class=\"language-text\">innerLoop</code>는 어디서도 사용되지 않았다. 이것이 바로 Unused Label인 것이고, 우리는 <code class=\"language-text\">allowUnusedLabels</code> 옵션을 통해 타입스크립트 컴파일러가 이러한 사용되지 않은 라벨을 만났을 때 어떻게 반응할 지를 설정할 수 있는 것이다.</p>\n<p>하지만 라벨은 대부분 위에서 밑으로 실행되는 프로그램의 실행 흐름을 역행하게 만드는 주범이기도 하고, 함수처럼 명확한 스코프를 가지고 관심사가 분리된 녀석도 아니기 때문에, 가독성을 해쳐 개발자가 프로그램의 흐름을 읽기 어렵게 만드는 주범이다. <small>(애초에 라벨 + goto 문은 어셈블리 쓰던 시절에 나온 개념이라 C에서도 안티패턴이라고 싫어한다. )</small></p>\n<p>그러니 이 옵션을 켤지 말지를 고민하는 것이 아니라, 아예 라벨 자체를 사용하지 않는 것을 추천한다.</p>\n<h3 id=\"nounusedlocals\" style=\"position:relative;\">noUnusedLocals<a href=\"#nounusedlocals\" aria-label=\"nounusedlocals permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>사용하지 않는 로컬 변수가 있다면 에러를 발생시킨다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>사용하지 않는 로컬 변수가 있어도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noUnusedLocals</code> 옵션은 함수 내부에 사용하지 않는 지역 변수가 존재할 경우 어떻게 처리할 지에 대한 옵션이다. 만약 이 옵션이 <code class=\"language-text\">true</code>일 경우, 컴파일러는 사용하지 않는 지역 변수에 대해 에러를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 'bar' is declared but its value is never read.ts(6133)</span>\n  <span class=\"token keyword\">const</span> bar <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">noUnusedLocals</code> 옵션은 옵션 이름에 충실하게 함수 스코프가 아닌, 전역 스코프나 모듈 스코프에 있는 변수는 사용하지 않더라도 어떠한 에러나 경고도 발생시키지 않으니, 이 점을 유의하도록 하자.</p>\n<h3 id=\"nounusedparameters\" style=\"position:relative;\">noUnusedParameters<a href=\"#nounusedparameters\" aria-label=\"nounusedparameters permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>사용하지 않는 인자가 있다면 경고를 발생시킨다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>사용하지 않는 인자가 있어도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noUnusedParameters</code> 옵션은 함수의 인자 중 사용하지 않는 것이 있을 경우 어떻게 처리할 지에 대한 옵션이다. 만약 이 옵션이 <code class=\"language-text\">true</code>일 경우, 컴파일러는 사용하지 않는 인자에 대해 에러를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// 'name' is declared but its value is never read.ts(6133)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"암묵적인-선언-금지\" style=\"position:relative;\">암묵적인 선언 금지<a href=\"#%EC%95%94%EB%AC%B5%EC%A0%81%EC%9D%B8-%EC%84%A0%EC%96%B8-%EA%B8%88%EC%A7%80\" aria-label=\"암묵적인 선언 금지 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>타입스크립트의 타입 체킹 컴파일 옵션들을 보면 <code class=\"language-text\">noImplicit</code>라는 이름으로 시작하는 많은데, 이 의미는 “암묵적인 무언가”를 금지한다는 말이다.</p>\n<p>암묵적이라는 말은 결국 어떤 정보도 제공하지 않은채 몰래 뭔가를 수행한다는 의미이기 때문에, 개발자가 예측하지 못한 곳에서 문제가 발생할 가능성이 높아지는 것이다.</p>\n<p>그러니 되도록 <code class=\"language-text\">noImplicit</code>로 시작하는 옵션들을 모두 켜서, 타입스크립트 컴파일 타임에 나 몰래 뭔가를 알아서 평가해버리는 상황을 최대한 방어하도록 하자.</p>\n<h3 id=\"noimplicitany\" style=\"position:relative;\">noImplicitAny<a href=\"#noimplicitany\" aria-label=\"noimplicitany permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>타입 추론이 불가능하고 타입 선언도 되지 않은 값을 암묵적으로 <code class=\"language-text\">any</code> 타입으로 사용하는 것을 금지한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>타입 추론이 불가능하고 타입 선언도 되지 않은 값을 암묵적으로 <code class=\"language-text\">any</code> 타입으로 사용하는 것을 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p>타입스크립트는 딱히 개발자가 타입을 명시적으로 선언하지 않았고, 추론도 불가능한 값에 대해서 <code class=\"language-text\">any</code> 타입으로 평가하는데, <code class=\"language-text\">noImplicitAny</code> 옵션은 이렇게 <code class=\"language-text\">any</code> 타입으로 평가된 값이 존재할 때 에러를 발생시킬 지 여부를 결정하는 옵션이다.</p>\n<p>물론 이렇게 <code class=\"language-text\">any</code>타입으로 평가된 값이 존재한다면 타입 안정성에 좋지 않은 영향을 끼치기 때문에, 타입스크립트는 이 옵션을 켜지 않아도 <code class=\"language-text\">any</code> 타입에 대해서 경고를 띄워주기는 한다.</p>\n<p>하지만 단순 경고는 컴파일 타임 때 그냥 무시하고 넘어가게 되기 때문에, <code class=\"language-text\">noImplicitAny</code> 옵션을 사용하여 이런 <code class=\"language-text\">any</code> 타입에 대해서 아예 컴파일 타임 때 에러를 발생시키고 컴파일을 막아버리는 편이 훨씬 안전하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Parameter 's' implicitly has an 'any' type.ts(7006)</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">subtr</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"noimplicitoverride\" style=\"position:relative;\">noImplicitOverride<a href=\"#noimplicitoverride\" aria-label=\"noimplicitoverride permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>서브 클래스의 암묵적인 오버라이딩을 금지한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>서브 클래스의 암묵적인 오버라이딩을 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noImplicitOverride</code> 옵션은 클래스를 상속받은 서브 클래스가 슈퍼 클래스의 멤버 변수나 메소드를 암묵적으로 오버라이딩하는 것을 허용할 것인지에 대한 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Album</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">download</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token function\">upload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SharedAlbum</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Album</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// This member must have an 'override' modifier because it overrides a member in the base class 'Album'.ts(4114)</span>\n  <span class=\"token function\">download</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// overriding 키워드를 사용한 명시적 오버라이딩은 허용</span>\n  override <span class=\"token function\">upload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 이런 암묵적인 오버라이딩이 발생했을 때 컴파일러가 아무런 경고 또는 에러를 띄워주지 않는다면, 개발자가 인지하지 못한 채 슈퍼 클래스의 기능을 오버라이딩 해버리는 상황이 발생할 수 있다. <small>(<del>슈퍼 클래스의 모든 멤버 변수와 메소드 이름을 외우고 있는 것도 아니니 말이다</del>)</small></p>\n<p>이 경우 개발자가 의도치 않게 슈퍼 클래스의 기능을 훼손하여 예상하지 못한 에러가 발생할 수 있으므로, 가급적이면 암묵적인 오버라이딩을 금지하는 <code class=\"language-text\">noImplicitOverride</code>을 켜고 개발하는 것을 추천한다.</p>\n<h3 id=\"noimplicitreturns\" style=\"position:relative;\">noImplicitReturns<a href=\"#noimplicitreturns\" aria-label=\"noimplicitreturns permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>함수가 암묵적으로 <code class=\"language-text\">undefined</code>를 반환하는 상황을 금지한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>함수가 암묵적으로 <code class=\"language-text\">undefined</code>를 반환하는 상황을 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noImplicitReturns</code> 옵션은 함수가 암묵적으로 <code class=\"language-text\">undefined</code>를 반환하는 상황을 어떻게 처리할 것인지에 대한 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Not all code paths return a value.ts(7030)</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span> <span class=\"token punctuation\">(</span>v<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시의 <code class=\"language-text\">foo</code> 함수는 자신이 받은 인자가 <code class=\"language-text\">1</code>일 경우에는 <code class=\"language-text\">true</code>를 반환하고 그 외에는 아무것도 반환하지 않기 때문에 타입스크립트는 이 함수가 <code class=\"language-text\">boolean</code> 타입의 값을 반환한다고 추론한다.</p>\n<p>하지만 실제로는 <code class=\"language-text\">foo(2)</code>와 같이 조건에 맞지 않는 인자와 함께 함수를 호출하게 되면 아무것도 명시적으로 반환하지 않고 함수가 종료되면서, 암묵적으로 <code class=\"language-text\">undefined</code>가 반환되게 된다. 이 동작은 브라우저의 개발자 도구에서 아무 함수가 선언한다음 호출해보면 바로 확인해볼 수 있으니 한번 해보도록 하자.</p>\n<p>여기서 문제는 타입스크립트가 추론한 함수의 반환 타입은 분명 <code class=\"language-text\">boolean</code> 타입이지만, 실제로는 암묵적인 반환 타입인 <code class=\"language-text\">undefined</code>가 합쳐져 최종적으로 <code class=\"language-text\">boolean | undefined</code>가 반환될 수 있다는 것이다. 결국 이 모순으로 인해 런타임 때 예상하지 못한 에러가 발생할 수 있는 빌미를 제공하게 된다.</p>\n<p>그래서 <code class=\"language-text\">noImplicitReturns</code> 옵션은 이렇게 함수가 암묵적으로 <code class=\"language-text\">undefined</code>를 반환하는 상황일 경우, 함수가 값을 제대로 반환하고 있지 않다는 경고를 보여주는 역할을 한다. 해당 옵션을 켜는 경우, 위 예시의 <code class=\"language-text\">foo</code> 함수는 명시적으로 <code class=\"language-text\">undefined</code>를 반환하는 형태로 변경되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span> <span class=\"token punctuation\">(</span>v<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"noimplicitthis\" style=\"position:relative;\">noImplicitThis<a href=\"#noimplicitthis\" aria-label=\"noimplicitthis permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td><code class=\"language-text\">this</code>가 암묵적으로 <code class=\"language-text\">any</code>로 평가되는 경우를 금지한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td><code class=\"language-text\">this</code>가 암묵적으로 <code class=\"language-text\">any</code>로 평가되는 경우를 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noImplicitThis</code> 옵션은 <code class=\"language-text\">this</code>가 암묵적으로 <code class=\"language-text\">any</code>로 평가되는 경우를 금지한다. 이 옵션의 동작을 이해하려면 우선 자바스크립트나 타입스크립트의 <code class=\"language-text\">this</code>가 어떤 녀석인지 알아야 할 필요가 있지만, 이 포스팅은 <code class=\"language-text\">this</code>의 동작에 대한 주제가 아니므로 간단하게만 설명하고 넘어가도록 하겠다. <code class=\"language-text\">this</code>에 대해 더 깊은 지식을 원하시는 분은 이 <a href=\"https://poiemaweb.com/js-this\" target=\"_blank\" rel=\"nofollow\">포스팅</a>을 참고하도록 하자.</p>\n<p>기본적으로 자바스크립트의 <code class=\"language-text\">this</code>라는 녀석은 동적으로 바인딩 된다. 함수가 어떤 방식으로 호출되냐에 따라서 이 <code class=\"language-text\">this</code>가 가리키고 있는 것이 달라진다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Human</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">sayThis</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sayThis <span class=\"token operator\">=</span> evan<span class=\"token punctuation\">.</span>sayThis<span class=\"token punctuation\">;</span>\n\nevan<span class=\"token punctuation\">.</span><span class=\"token function\">sayThis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Human {}</span>\n<span class=\"token function\">sayThis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// globalThis</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시를 보면, 같은 <code class=\"language-text\">Human</code> 클래스의 메소드인데도 호출 방법에 따라 <code class=\"language-text\">this</code>가 동적으로 변경되고 있는 것을 확인할 수 있다. 자바스크립트의 <code class=\"language-text\">this</code>는 이처럼 예측하기 어려운 동작을 하기 때문에 개발자가 직접 <code class=\"language-text\">this</code>가 무엇인지를 정할 수 있는 <code class=\"language-text\">call</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">bind</code>와 같은 메소드들이나 <code class=\"language-text\">this</code> 바인딩 자체를 하지 않는 ES6의 화살표 함수 같은 녀석들이 필요한 것이다.</p>\n<p>바로 이 동적 바인딩이라는 방식 때문에 타입스크립트가 <code class=\"language-text\">this</code>의 타입 추론을 할 수 없는 상황도 왕왕 발생하는데, 그 중 대표적인 예가 함수 안의 함수, 흔히들 이야기하는 Inner Function에서 <code class=\"language-text\">this</code>에 접근하는 경우이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Human</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">sayThis</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">say</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 'this' implicitly has type 'any' because it does not have a type annotation.ts(2683)</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> evan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nevan<span class=\"token punctuation\">.</span><span class=\"token function\">sayThis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// globalThis</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시를 보면 <code class=\"language-text\">sayThis</code> 메소드 내부에서 다시 <code class=\"language-text\">say</code> 함수를 선언한 후 호출하고 있고, 안 쪽에 선언된 함수에서 <code class=\"language-text\">this</code>에 접근하고 있다. 상식적으로 생각하면 이 함수의 <code class=\"language-text\">this</code>는 왠지 <code class=\"language-text\">Human</code> 클래스가 되어야 할 것 같지만, 현실은 시궁창처럼 <code class=\"language-text\">globalThis</code>가 튀어나온다. <small>(이런 경우에는 화살표 함수 씁시다…)</small></p>\n<p>바로 이런 경우가 타입스크립트가 <code class=\"language-text\">this</code>에 대한 추론을 하지 못하는 경우이다. 이때 타입스크립트는 암묵적으로 <code class=\"language-text\">say</code> 함수 내부의 <code class=\"language-text\">this</code>를 <code class=\"language-text\">any</code>타입으로 바인딩하게 되고, 이로 인해 타입 안정성이 와장창 깨지게 된다.</p>\n<p>즉, <code class=\"language-text\">noImplicitThis</code> 옵션은 이렇게 <code class=\"language-text\">this</code> 타입이 암묵적으로 <code class=\"language-text\">any</code>로 평가되는 상황을 용인할 것인지에 대한 옵션인 것이다. 애초에 메소드 내부에 선언된 함수의 <code class=\"language-text\">this</code>에 전역 객체가 바인딩되는 동작을 응용하는 상황 자체가 거의 없으므로 이 옵션 또한 가급적이면 켜는 것을 추천한다.</p>\n<h2 id=\"strict\" style=\"position:relative;\">Strict<a href=\"#strict\" aria-label=\"strict permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">Strict</code> 옵션들은 타입스크립트가 일반적인 상황에서 타입을 평가할 때 얼마나 엄격하게 평가할 것인지를 관리하는 옵션들이다.</p>\n<p>이런 옵션들을 타입스크립트 팀에서는 Strict mode family라고 호칭하고 있는데, 간단하게는 자바스크립트의 <code class=\"language-text\">'use strict'</code> 디렉티브로 켤 수 있는 Strict 모드의 동작을 위반했는지 검사하는 옵션부터, 타입의 공변성과 반공변성을 검사하는 옵션까지, 다양한 상황에서 타입스크립트가 조금 더 엄격하게 타입을 평가할 수 있는 옵션들을 제공하고 있다.</p>\n<h3 id=\"alwaysstrict\" style=\"position:relative;\">alwaysStrict<a href=\"#alwaysstrict\" aria-label=\"alwaysstrict permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>소스 코드 내에서 Strict 룰을 위반하는 방법을 사용하면 에러를 발생시킨다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>소스 코드 내에서 Strict 룰을 위반하는 방법을 사용해도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">alwaysStrict</code> 옵션은 개발자가 타입스크립트를 사용할 때 자바스크립트의 Strict 룰을 위반하는 방법을 사용했을 때 에러를 발생시킨다. 이 옵션을 <code class=\"language-text\">true</code>로 설정하게 되면 타입스크립트는 각 소스 파일들의 상단에 마치 <code class=\"language-text\">use strict</code> 디렉티브가 선언되어 있는 것처럼 구문을 파싱하게 된다.</p>\n<p>참고로 타입스크립트의 대부분의 Strict 모드 관련 옵션들은 “모듈이 아닌 코드”를 위한 것이다. 타입스크립트는 ECMAScript 2015의 <a href=\"https://262.ecma-international.org/6.0/#sec-strict-mode-code\" target=\"_blank\" rel=\"nofollow\">Strict Mode Code</a> 섹션의 정의에 따라 모든 모듈 코드는 반드시 Strict 모드로 컴파일하기 때문이다.</p>\n<p>이 옵션을 사용할 때 한 가지 알아둬야 할 점은 <code class=\"language-text\">use strict</code> 디렉티브를 “소스 파일”에 내보내는 것이지, 결과물에 내보낸다는 것이 아니라는 것이다. 예시를 한번 보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// index.ts</span>\n\n<span class=\"token comment\">// Octal literals are not allowed in strict mode.ts(1121)</span>\n<span class=\"token keyword\">const</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">023</span><span class=\"token punctuation\">;</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">var</span> number <span class=\"token operator\">=</span> <span class=\"token number\">023</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>위 예시 같은 경우 IDE에서 <code class=\"language-text\">Octal literals are not allowed in strict mode.ts(1121)</code>라는 에러를 보여주기는 하지만, 정작 컴파일을 할 때는 아무 에러가 발생하지 않고 컴파일 후에 생긴 결과 파일을 확인해도 <code class=\"language-text\">use strict</code> 디렉티브는 포함되어 있지 않은 것을 볼 수 있다. 즉, 소스 코드를 파싱할 때는 에러를 인지하지만, 컴파일 결과에서까지 Strict 모드가 적용되는 것은 보장하지 않는 것이다.</p>\n<p>하지만 앞서 말한대로 모듈을 사용하고 있을 경우, 타입스크립트는 해당 옵션의 여부와 상관없이 소스 코드 파싱 및 컴파일 결과물에도 Strict 모드를 적용하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// index.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">023</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// index.js (common.js)</span>\n\n<span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>n <span class=\"token operator\">=</span> <span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nexports<span class=\"token punctuation\">.</span>n <span class=\"token operator\">=</span> <span class=\"token number\">023</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">.</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"strictbindcallapply\" style=\"position:relative;\">strictBindCallApply<a href=\"#strictbindcallapply\" aria-label=\"strictbindcallapply permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td><code class=\"language-text\">call</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">bind</code>를 사용하여 함수를 호출했을 때에도 인자의 타입을 검사한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td><code class=\"language-text\">call</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">bind</code>를 사용하여 함수를 호출했을 때에도 인자의 타입을 검사하지 않는다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">strictBindCallApply</code> 옵션은 <code class=\"language-text\">call</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">bind</code>와 같이 함수의 실행 컨텍스트를 변경할 수 있는 메소드를 사용하여 함수를 호출하거나 선언을 했을 때에도 함수에 올바른 타입의 인자가 주어졌는지를 검사할 수 있는 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hi, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"evan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// Argument of type 'boolean' is not assignable to parameter of type 'string'.ts(2345)</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 함수의 실행 컨텍스트를 변경하는 일이 자주 발생하는 것은 아니지만, 이 옵션이 꺼져있는 상태에서 <code class=\"language-text\">call</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">bind</code>를 사용하게 되면 타입스크립트는 함수의 인자에 제대로 된 타입이 넘겨졌는지 검사하지 않기 때문에, 이로인한 런타임 타입 에러가 발생할 수도 있다.</p>\n<h3 id=\"strictfunctiontypes\" style=\"position:relative;\">strictFunctionTypes<a href=\"#strictfunctiontypes\" aria-label=\"strictfunctiontypes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>함수의 인자가 반공변적인 타입으로 평가된다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>함수의 인자가 이변적인 타입으로 평가된다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">strictFunctionTypes</code> 옵션은 함수의 인자를 반공변적으로 평가되게 할 것인지에 대한 옵션이다. 이 포스팅은 공변성과 반공변성에 대한 주제가 아니니, 공변과 반공변에 대해 자세히 알고 싶으신 분들은 이 <a href=\"https://seob.dev/posts/%EA%B3%B5%EB%B3%80%EC%84%B1%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80/\" target=\"_blank\" rel=\"nofollow\">포스팅</a>을 한번 보고 오도록 하자.</p>\n<p>이 포스팅에서는 공변과 반공변에 대해서 간략하게만 설명하고 넘어가도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\nType '(string | number)[]' is not assignable to type 'string[]'.\n  Type 'string | number' is not assignable to type 'string'.\n    Type 'number' is not assignable to type 'string'.ts(2322)\n*/</span>\nfoo <span class=\"token operator\">=</span> bar<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시에서 필자는 <code class=\"language-text\">Array&lt;string></code>인 <code class=\"language-text\">foo</code> 변수에 <code class=\"language-text\">Array&lt;string | number></code> 타입인 <code class=\"language-text\">bar</code> 변수의 값을 할당하려고 했고, 타입스크립트는 <code class=\"language-text\">string | number</code> 타입은 <code class=\"language-text\">string</code> 타입인 값에 할당할 수 없다고 말하고 있다.</p>\n<p>왜 에러가 발생하는 것일까? 그 이유는 <code class=\"language-text\">string</code> 타입이 <code class=\"language-text\">string | number</code> 타입보다 작은 개념이기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b0ad89a090e9426b629aea7e838d5c43/38124/unionset.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVR42q2TX2+bMBTF+f7fZJqqSn1YXzZtT9vDlLSEAqEBG8JfQ+uQhjTb1HB6L4SUTOlbQQcsS/752PdcA4enbVus9Q6xWEHMHxA4FaKFxmO5xf6lBb/rPw2K5hHJkyKVUI3G5u8zrx4wMPjzQgsY5ExzODc57GkK9zYnFXAmOcSiQrIuIVcphE7pn0HqfixoTtEm+3b/BkxkDXuSwbcrTH76uLr4gctPX/Ht+jd85wG39xJmKJA2FX7ZE3z+comr79dwswAxuRU6gdrqHvhU78hVAc9S8GYKc5Nc3WS4mya0SQrHSzAjmBkIeEWMkNwtVAS/WnbjqM47sfuGjm+kYQ2XgTN11L1VHmUFIQHJoZC4i0JaXHSuWANsAJbk0uACsKsxsJNJbq0CliCglEdJnZ2ABrHbbFPBkN4HA88deSwriAgkRkfOz4orX25XfVHcUVH+d2nPh6JIeHmM5bp4F9j82w2x6TN4Fkpz5kLCiiQd6z13fUFOgs1Qdsph5jtldcGmjaRfIT0Em+8qrA/igHfB1qfBfmu9Z8QEDtyq09I/03qbofVU1yHceu2o9V4BQOhy3IbwEtMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unionset\" title=\"\" src=\"/static/b0ad89a090e9426b629aea7e838d5c43/6af66/unionset.png\" srcset=\"/static/b0ad89a090e9426b629aea7e838d5c43/69538/unionset.png 160w,\n/static/b0ad89a090e9426b629aea7e838d5c43/72799/unionset.png 320w,\n/static/b0ad89a090e9426b629aea7e838d5c43/6af66/unionset.png 640w,\n/static/b0ad89a090e9426b629aea7e838d5c43/38124/unionset.png 953w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>string | number 타입은 string과 number가 합쳐진 합집합을 의미한다.</small>\n</center>\n<p>이처럼 <code class=\"language-text\">string | number</code> 타입은 두 개의 타입이 합쳐진 합집합을 의미하고 있으니, 당연하게도 <code class=\"language-text\">string</code> 타입은 자신보다 더 큰 개념인 <code class=\"language-text\">string | number</code> 타입을 품을 수 없다.</p>\n<p>이 경우, 작은 개념인 <code class=\"language-text\">string</code> 타입을 <code class=\"language-text\">string | number</code> 타입의 “서브 타입”이라고 부르고, 큰 개념인 <code class=\"language-text\">string | number</code>을 <code class=\"language-text\">string</code> 타입의 “슈퍼 타입”이라고 부른다. <small>(참고로 부분 집합, 상위 집합도 영어로 subset, superset이다. 사실 상 여기서 이름을 따온 것이라고 보면 된다.)</small></p>\n<p>이와 동일하게 <code class=\"language-text\">Array&lt;string></code> 또한 <code class=\"language-text\">Array&lt;string | number></code> 타입보다 작은 개념이다. <code class=\"language-text\">string</code>만 가지고 있도록 선언한 배열에 <code class=\"language-text\">string</code>과 <code class=\"language-text\">number</code>를 모두 가진 배열을 할당할 수는 없는 노릇이니 타입스크립트는 에러를 발생시킨다.</p>\n<blockquote>\n<p>이처럼 어떠한 타입 <code class=\"language-text\">T</code>가 타입 <code class=\"language-text\">T'</code>의 서브 타입인 경우, <code class=\"language-text\">C&lt;T></code> 또한 <code class=\"language-text\">C&lt;T'></code>의 서브 타입이라면 이때 타입 <code class=\"language-text\">C</code>를 <strong>공변적</strong>, 또는 <strong>공변성을 가지고 있다</strong>고 이야기한다.</p>\n</blockquote>\n<p>공변성이 무엇인지 이해했다면 나머지는 쉽다. 반공변성은 공변성의 반대이기 때문이다. 즉 타입 <code class=\"language-text\">T</code>가 타입 <code class=\"language-text\">T'</code>의 서브 타입일 때, 반대로 <code class=\"language-text\">C&lt;T'></code>가 <code class=\"language-text\">C&lt;T></code>의 서브 타입이 된다면, 이때 타입 <code class=\"language-text\">C</code>를 <strong>반공변적</strong>이라고 한다.</p>\n<p>이렇게 타입이 반공변적으로 평가되어야 하는 경우가 있을까 싶기도 한데, 의외로 가까운 곳에 있다. 바로 <code class=\"language-text\">strictFunctionTypes</code> 옵션이 다루고 있는 주체인 함수의 인자이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Func<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> stringOrNumber<span class=\"token operator\">:</span> Func<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> onlyString<span class=\"token operator\">:</span> Func<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\nType 'Func&lt;string>' is not assignable to type 'Func&lt;string | number>'.\n  Type 'string | number' is not assignable to type 'string'.\n    Type 'number' is not assignable to type 'string'.ts(2322)\n*/</span>\nstringOrNumber <span class=\"token operator\">=</span> onlyString<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>앞서 보았던 공변성 예시에서 <code class=\"language-text\">string</code> 타입은 <code class=\"language-text\">string | number</code>의 서브 타입이라고 이야기 했었다.</p>\n<p>만약 함수의 인자가 공변적으로 평가된다면, <code class=\"language-text\">Func&lt;string></code> 또한 <code class=\"language-text\">Func&lt;string | number></code>의 서브 타입이 되어야한다는 의미이기 때문에 <code class=\"language-text\">Func&lt;string></code> 타입에 <code class=\"language-text\">Func&lt;string | number></code> 타입을 할당해도 문제가 발생하지 않아야 한다.</p>\n<p>하지만 이 예시를 보면 그게 아니라는 것을 알 수 있다. <code class=\"language-text\">Func&lt;string | number></code>는 분명 슈퍼 타입인 <code class=\"language-text\">string | number</code>를 인자로 받는 함수 타입이지만, 이 타입에 인자로 서브 타입인 <code class=\"language-text\">string</code>만을 받는 <code class=\"language-text\">Func&lt;string></code> 타입의 함수를 할당하려고 하면 타입스크립트는 에러를 발생시킨다.</p>\n<p>즉, 함수의 인자는 반공변적으로 평가되기 때문에, 공변성을 가지고 있는 <code class=\"language-text\">Array</code> 타입과는 정반대로 작동하고 있는 것이다.</p>\n<p>이 동작이 어렵게 느껴질 수도 있지만 잘 생각해보면 이해가 되는 것이, <code class=\"language-text\">onlyString</code> 함수는 <code class=\"language-text\">Func&lt;string></code> 타입이기 때문에 인자가 반드시 <code class=\"language-text\">string</code> 타입일 것이라고 가정하고 정의된 함수이기 때문이다.</p>\n<p>만약 이런 함수를 <code class=\"language-text\">string | number</code> 타입의 인자를 받을 수 있다는 함수라고 인정해버린다면, 개발자가 실수로 <code class=\"language-text\">onlyString</code> 함수에 <code class=\"language-text\">number</code> 타입의 인자를 넘길 수도 있다는 것이고, 이 경우 <code class=\"language-text\">onlyString</code> 함수는 장렬한 런타임 타입 에러와 함게 전사할 것이다.</p>\n<center>\n  <div style=\"max-width: 400px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/300c81767ca8abe09ea1f7f958e3a5ae/80e3c/cube.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAMCBAX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHtRRi95grMG6AX/8QAGhAAAgIDAAAAAAAAAAAAAAAAAhIAAQMQEf/aAAgBAQABBQIzShzPrNF6ddiU5BR6/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/ARIiv//EABgRAAIDAAAAAAAAAAAAAAAAAAARARAh/9oACAECAQE/AdYyK//EABwQAAIBBQEAAAAAAAAAAAAAAAABIQIQERJBUf/aAAgBAQAGPwImmyxL8KdnAzfos8m3/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARIRAxUUH/2gAIAQEAAT8hPQV8IVhguu4AFBkvo1fDNLB0Psa1mxQ6oVMJ704//9oADAMBAAIAAwAAABDL14L/xAAZEQACAwEAAAAAAAAAAAAAAAABIQAQEYH/2gAIAQMBAT8Qb0OdjgbX/8QAGREAAgMBAAAAAAAAAAAAAAAAAREAECFx/9oACAECAQE/ECeUDBqYOV//xAAcEAEBAAMBAAMAAAAAAAAAAAABEQAhMUEQUXH/2gAIAQEAAT8QpkXMAhFRdFyOYPM3RXZKl7M0/EK4Pn9cviwwp0+8W+3O9Rx5s8Rm/j//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cube\" title=\"\" src=\"/static/300c81767ca8abe09ea1f7f958e3a5ae/c08c5/cube.jpg\" srcset=\"/static/300c81767ca8abe09ea1f7f958e3a5ae/0913d/cube.jpg 160w,\n/static/300c81767ca8abe09ea1f7f958e3a5ae/cb69c/cube.jpg 320w,\n/static/300c81767ca8abe09ea1f7f958e3a5ae/c08c5/cube.jpg 640w,\n/static/300c81767ca8abe09ea1f7f958e3a5ae/80e3c/cube.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>이건 마치 네모만 끼울 수 있게 만든 구멍에<br>별 모양도 어떻게든 끼울 수 있다고 설명서를 제공하는 꼴이랄까...</small>\n  <br>\n  <br>\n</center>\n<p>이런 함수의 특성으로 인해 함수의 인자는 반공변적으로 평가되는 것이 훨씬 안전하기 때문에, 타입스크립트는 <code class=\"language-text\">strictFunctionTypes</code> 옵션을 제공하고 있는 것이다.</p>\n<p>만약 이 옵션이 꺼져있다면 함수의 인자가 반공변적으로 평가되지 않기 때문에 위 예시에서 보았던 할당의 제약이 모두 사라지게 된다. 이렇게 되면 앞서 말한대로 개발자의 실수로 함수의 인자로 잘못된 타입을 넘겨 런타임 에러가 발생할 확률이 커지게 되므로 가급적이면 <code class=\"language-text\">strictFunctionTypes</code>을 켜도록 하자. <small><del>(생각보다 크게 불편하지도 않다)</del></small></p>\n<h3 id=\"strictnullchecks\" style=\"position:relative;\">strictNullChecks<a href=\"#strictnullchecks\" aria-label=\"strictnullchecks permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>구체적인 값이 존재해야하는 상황에서 값이 <code class=\"language-text\">null</code>이거나 <code class=\"language-text\">undefined</code>일 가능성이 존재하는 경우 에러를 발생시킨다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>구체적인 값이 존재해야 하는 상황에서, 값이 <code class=\"language-text\">null</code>이거나 <code class=\"language-text\">undeinfed</code>일 가능성이 존재해도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">strictNullChecks</code> 옵션은 구체적인 값이 반드시 존재해야하는 상황일 때, 어떠한 값이 <code class=\"language-text\">null</code>이거나 <code class=\"language-text\">undefined</code>일 가능성이 존재한다면 에러를 발생시키는 옵션이다.</p>\n<p>구체적인 값이 반드시 존재해야하는 상황은 대부분 <code class=\"language-text\">foo.a</code>처럼 어떤 객체의 프로퍼티에 접근하려고 시도하는 상황이라고 볼 수 있는데, 이렇게 접근할 때 만약 <code class=\"language-text\">foo</code> 변수의 값이 <code class=\"language-text\">null</code>이거나 <code class=\"language-text\">undefined</code>라면 레퍼런스 런타임 에러가 발생하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> people<span class=\"token operator\">:</span> Person<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'evan'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myPerson <span class=\"token operator\">=</span> people<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> name <span class=\"token operator\">===</span> <span class=\"token string\">'john'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Uncaught ReferenceError: myPerson is not defined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시에서 사용한 <code class=\"language-text\">Array.prototype.find</code> 메소드는 <code class=\"language-text\">T | undefined</code> 타입을 반환하도록 정의되어있는데, 이는 <code class=\"language-text\">find</code> 메소드가 배열에서 목표로 했던 원소를 찾을 수도 있고 없을 수도 있기 때문이다.</p>\n<p>그렇기 때문에 이 예시에서의 <code class=\"language-text\">myPerson</code> 변수는 <code class=\"language-text\">Human | undefined</code>의 타입을 가지게 되며, 실제로 위 코드를 실제로 실행시켜보면 이름으로 <code class=\"language-text\">evan</code>이라는 값을 가지고 있는 원소가 배열 내에 없기 때문에 결국 <code class=\"language-text\">myPerson</code> 변수의 값은 <code class=\"language-text\">undefined</code>가 되고, 마지막 콘솔 라인에서 런타임 레퍼런스 에러가 발생하게 된다.</p>\n<p>만약 <code class=\"language-text\">strictNullChecks</code> 옵션이 꺼져있는 상태라면 이런 상황이라도 타입스크립트는 값이 <code class=\"language-text\">undefined</code>일 가능성이 존재하는 <code class=\"language-text\">myPerson</code>의 프로퍼티에 접근할 때 어떠한 경고나 에러도 주지 않지만, 옵션을 켜게되면 다음과 같은 에러가 발생하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> people<span class=\"token operator\">:</span> Person<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'evan'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myPerson <span class=\"token operator\">=</span> people<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=></span> value<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'john'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Object is possibly 'undefined'.ts(2532)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 상황에서는 명시적으로 <code class=\"language-text\">if</code> 문을 사용하여 <code class=\"language-text\">myPerson</code> 변수가 <code class=\"language-text\">null</code> 또는 <code class=\"language-text\">undefined</code> 인지 검사하거나, <code class=\"language-text\">myPerson?.name</code> 처럼 옵셔널 체이닝을 사용하여 프로퍼티에 접근함으로써 타입 안정성을 유지하며 문제를 해결할 수 있다.</p>\n<h3 id=\"strictpropertyinitialization\" style=\"position:relative;\">strictPropertyInitialization<a href=\"#strictpropertyinitialization\" aria-label=\"strictpropertyinitialization permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>객체가 생성된 시점에 반드시 존재해야 하는 멤버 변수가 초기화되지 않았다면 에러를 발생시킨다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>객체가 생성된 시점에 반드시 존재해야 하는 멤버 변수가 초기화되지 않았어도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">strictPropertyInitialization</code> 옵션은 클래스의 멤버 변수가 안전하지 않은 타입을 가지게 되었을 때 어떻게 처리할 지에 대한 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserAccount</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Property 'email' has no initializer and is not definitely assigned in the constructor.</span>\n  email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n  address<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시에서 클래스 <code class=\"language-text\">UserAccount</code>는 총 3개의 멤버 변수를 가지고 있는데, <code class=\"language-text\">name</code>과 <code class=\"language-text\">email</code>은 값이 반드시 존재해야하는 타입으로 선언된 멤버 변수이고, <code class=\"language-text\">address</code>는 값이 <code class=\"language-text\">undefined</code>일 수도 있는 옵셔널한 타입으로 선언된 멤버 변수이다.</p>\n<p>하지만 클래스의 생성자를 보면 <code class=\"language-text\">name</code> 멤버 변수만 초기화를 하고 있다. 이대로라면 객체가 생성되었을 때 반드시 <code class=\"language-text\">string</code> 타입의 값을 가지고 있어야 하는 <code class=\"language-text\">email</code> 멤버 변수가 <code class=\"language-text\">undefined</code>로 할당된 채로 객체가 생성되어 버리는 것이다. 즉, 타입 안정성이 깨져버리게 된다.</p>\n<p><code class=\"language-text\">strictPropertyInitialization</code> 옵션을 사용하면 이렇게 클래스를 사용하여 생성한 객체가 정의된 타입과 맞지 않는 멤버 변수를 가지게 되는 경우에 에러를 발생시키기 때문에, 높은 타입 안정성을 가지고 갈 수 있다.</p>\n<h3 id=\"useunknownincatchvariables\" style=\"position:relative;\">useUnknownInCatchVariables<a href=\"#useunknownincatchvariables\" aria-label=\"useunknownincatchvariables permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>catch 문의 error 인자를 <code class=\"language-text\">unknown</code> 타입으로 평가한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>catch 문의 error 인자를 <code class=\"language-text\">any</code> 타입으로 평가한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">useUnknownInCatchVariables</code> 옵션은 그 이름이 말해주듯이, catch 문의 인자로 주어지는 <code class=\"language-text\">error</code> 값을 어떤 타입으로 평가할 지에 대한 옵션이다.</p>\n<p>기본적으로 타입스크립트는 Catch 문의 인자를 <code class=\"language-text\">any</code> 타입으로 평가하기 때문에 이런 느낌으로 코드를 작성하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>whatever<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>기본적으로 아무런 옵션도 주지 않았을 때, 타입스크립트는 catch 문의 인자인 <code class=\"language-text\">e</code>를 <code class=\"language-text\">any</code> 타입으로 평가하기 때문에, 이 값을 가지고 어떤 짓을 하던 컴파일 타임에는 아무 에러도 발생하지 않는 것이다. 하지만 만약 <code class=\"language-text\">e</code>가 <code class=\"language-text\">null</code>이나 <code class=\"language-text\">undefined</code>라면 바로 런타임 레퍼런스 에러가 발생할 수 있는 위험한 상황이다.</p>\n<p>이제 <code class=\"language-text\">useUnknownInCatchVariables</code>을 켜게 되면 타입스크립트는 이제 catch 문의 인자로 넘어오는 값을 더 이상 <code class=\"language-text\">any</code> 타입이 아닌, <code class=\"language-text\">unknown</code> 타입으로 평가하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Property 'message' does not exist on type 'unknown'.ts(2339)</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 이건 통과</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>단순히 “무시해라”라는 의미를 가진 <code class=\"language-text\">any</code> 타입과 다르게, <code class=\"language-text\">unknown</code> 타입은 “타입을 알 수 없으니 정의가 필요하다”라는 의미를 가지고 있기 때문에, 반드시 타입에 대한 정보를 타입스크립트에게 알려줘야 한다.</p>\n<p>물론 이렇게 catch 문의 인자를 <code class=\"language-text\">unknown</code>으로 평가하게 되면, catch 문 내부에서 인자의 타입을 체크하는 과정이 필요해지기 때문에 조금 귀찮아 질 수는 있지만, 개인적으로는 예상하지 못 한 순간에 런타임 에러가 터지느니 프로그래밍할 때 조금 귀찮은 게 훨씬 낫다고 생각한다.</p>\n<h3 id=\"strict-1\" style=\"position:relative;\">strict<a href=\"#strict-1\" aria-label=\"strict 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>컴파일러 옵션의 Strict 관련 옵션들을 일괄적으로 켠다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>컴파일로 옵션의 Strict 관련 옵션들을 개별적으로 켠다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">strict</code> 옵션은 그 자체로 어떤 역할을 하는 것이 아니라, 다른 Strict 관련 옵션들을 일괄적으로 켜고 끌 수 있는 옵션이다. <code class=\"language-text\">strict</code> 옵션으로 켜고 끌 수 있는 일명 Strict mode family는 다음과 같다.</p>\n<hr>\n<ul>\n<li><a href=\"#alwaysstrict\">alwaysStrict</a></li>\n<li><a href=\"#strictbindcallapply\">strictBindCallApply</a></li>\n<li><a href=\"#strictfunctiontypes\">strictFunctionTypes</a></li>\n<li><a href=\"#strictnullchecks\">strictNullChecks</a></li>\n<li><a href=\"#strictpropertyinitialization\">strictPropertyInitialization</a></li>\n<li><a href=\"#useunknownincatchvariables\">useUnknownInCatchVariables</a></li>\n<li><a href=\"#noimplicitany\">noImplicitAny</a></li>\n<li><a href=\"#noimplicitthis\">noImplictThis</a></li>\n</ul>\n<hr>\n<p>만약 <code class=\"language-text\">strict</code> 옵션을 <code class=\"language-text\">true</code>로 설정하면 Strict mode family 옵션들의 값도 함께 <code class=\"language-text\">true</code>로 적용되지만, 만약 개별 옵션을 <code class=\"language-text\">false</code>로 오버라이딩한다면 해당 옵션만 끌 수도 있다.</p>\n<p>타입스크립트 팀은 추후 배포될 타입스크립트 버전에 추가되는 새로운 Strict mode family 옵션도 모두 <code class=\"language-text\">strict</code> 옵션으로 관리할 수 있도록 만들 예정이라고 하니, 타입스크립트 버전을 업데이트하게 되면 기존에는 없던 새로운 타입 에러가 발생할 수도 있다는 사실을 유념하도록 하자.</p>\n<h2 id=\"etc\" style=\"position:relative;\">etc<a href=\"#etc\" aria-label=\"etc permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이 섹션은 필자가 옵션들을 정리하면서, 카테고라이징을 하기 애매하다고 생각한 옵션들을 모아둔 섹션이다. 물론 이 옵션들 또한 안전한 프로그래밍에 큰 도움이 되는 옵션들이기 때문에 가급적 켜는 것을 추천한다.</p>\n<h3 id=\"exactoptionalpropertytypes\" style=\"position:relative;\">exactOptionalPropertyTypes<a href=\"#exactoptionalpropertytypes\" aria-label=\"exactoptionalpropertytypes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>옵셔널 프리픽스가 정말로 객체 내에 없다는 것을 보장한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>옵셔널 프리픽스를 사용한 값에 <code class=\"language-text\">undefined</code>를 할당하는 것을 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">exactOptionalPropertyTypes</code> 옵션은 <code class=\"language-text\">?</code> 프리픽스로 표현되는 타입이나 인터페이스 내부의 옵셔널 프로퍼티를 얼마나 엄격하게 처리할 지를 결정하는 옵션이다. 한번 같이 예시를 보면서 어떤 차이점이 있는지 살펴보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserDefaults</span> <span class=\"token punctuation\">{</span>\n  color<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dark\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"light\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>위 인터페이스가 가지고 있는 <code class=\"language-text\">color</code> 프로퍼티는 <code class=\"language-text\">?</code>로 표현되는 옵셔널 프리픽스와 함께 선언되었기 때문에, 해당 프로퍼티가 인터페이스 내에 존재할 수도 있고 없을 수도 있다는 것을 표현하고 있다. 그렇기 때문에 기본적으로 타입스크립트는 이 프로퍼티의 타입을 <code class=\"language-text\">dark | light | undefiend</code>로 평가하게 된다.</p>\n<p>여기서 약간 모순이 생기는데, 옵셔널 프로퍼티는 사실 “이 프로퍼티가 있을 수도 있고 없을 수도 있어”라는 의미이지, “이 프로퍼티가 존재는 하는데 값이 <code class=\"language-text\">undefined</code>야”라는 의미가 아니기 때문이다. 그러나 타입스크립트에서는 옵셔널로 선언된 프로퍼티에 <code class=\"language-text\">undefined</code>를 직접 할당함으로써 옵셔널 프로퍼티의 조건을 만족시킬 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> user<span class=\"token operator\">:</span> UserDefaults <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  color<span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// dark | light | undefined</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>하지만 <code class=\"language-text\">exactOptionalPropertyTypes</code> 옵션을 켜게 되면 이제 이런 행위가 불가능해진다. 개발자는 옵셔널 프로퍼티로 선언된 프로퍼티에 <code class=\"language-text\">undefined</code>를 할당할 수 없으며, 만약 할당을 시도했다가는 다음과 같은 에러를 만나며 컴파일러에게 혼쭐이 나게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> user<span class=\"token operator\">:</span> UserDefaults <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Type 'undefined' is not assignable to type '\"light\" | \"dark\"'.ts(2322)</span>\n  color<span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 컴파일러가 던진 에러 메세지를 보면, 기존에는 <code class=\"language-text\">dark | light | undefeind</code>와 같이 <code class=\"language-text\">undefined</code>까지 유니온 타입으로 묶어서 선언하던 방식과 다르게, 타입 자체는 <code class=\"language-text\">dark | light</code>으로만 정의되어있고 키의 존재 유무로만 옵셔널 프로퍼티를 판단하는 모습을 볼 수 있다.</p>\n<h3 id=\"nofallthroughcasesinswitch\" style=\"position:relative;\">noFallthroughCasesInSwitch<a href=\"#nofallthroughcasesinswitch\" aria-label=\"nofallthroughcasesinswitch permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td><code class=\"language-text\">switch</code> 문 내에 Fallthrough 케이스가 존재하면 경고를 보여준다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td><code class=\"language-text\">switch</code> 문 내에 Fallthrough 케이스가 존재해도 무시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noFallthroughCasesInSwitch</code> 옵션은 Fallthrough, 즉 <code class=\"language-text\">switch</code> 문이 완료되지 않는 케이스가 존재하는 경우에 경고를 보여줄 지에 대한 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> v<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span>\n    <span class=\"token comment\">// Fallthrough case in switch.ts(7029)</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token number\">2</span><span class=\"token operator\">:</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 경우 첫 번째 케이스 문이 수행되고 <code class=\"language-text\">switch</code> 문이 종료되는 것이 아니라, 이에 이어서 두 번째 케이스 문까지 수행되기 때문에, 개발자가 의도하지 않은 동작이 되어버릴 가능성이 존재한다.</p>\n<p>이렇게 <code class=\"language-text\">switch</code> 문을 종료시키지 않고 다음 케이스로 그냥 흘려버리는 케이스를 <code class=\"language-text\">Fallthrough case</code>라고 부르는데, C++이나 Swift 같은 언어에서는 이런 케이스에 명시적으로 <code class=\"language-text\">[[fallthrough]]</code>와 같은 키워드를 작성하게 함으로써 개발자가 한 눈에 “이 케이스 문은 다음 케이스까지 실행시키겠구나”라는 것을 알 수 있지만, 자바스크립트는 이렇게 명시적으로 Fallthrough case를 표현하는 문법이 없기 때문에 개발자가 실수하기 쉬운 구조이다.</p>\n<p>그래서 타입스크립트는 이런 Fallthrough case가 발생했을 때 경고를 보여주는  <code class=\"language-text\">noFallthroughCasesInSwitch</code> 옵션을 제공함으로써 개발자가 Fallthrough case를 확실하게 인지할 수 있도록 도와주고 있다.</p>\n<h3 id=\"nopropertyaccessfromindexsignature\" style=\"position:relative;\">noPropertyAccessFromIndexSignature<a href=\"#nopropertyaccessfromindexsignature\" aria-label=\"nopropertyaccessfromindexsignature permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>인덱스 시그니처로 선언된 프로퍼티에 <code class=\"language-text\">.</code> 문법을 사용하여 접근하는 것을 방어한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>인덱스 시그니처로 선언된 프로퍼티에 <code class=\"language-text\">.</code> 문법을 사용하여 접근하는 것을 허용한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noPropertyAccessFromIndexSignature</code> 옵션은 인터페이스나 타입에 미리 정의되지 않은 프로퍼티에 <code class=\"language-text\">.</code> 문법을 사용하여 접근하는 것을 방어한다.</p>\n<p>물론 아예 정의되지 않은 프로퍼티에 접근한다는 상황은 당연히 에러가 나야하는 상황이지만, 이 옵션이 관여하는 상황은 조금 애매하게 타입 선언이 되어있는 경우이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">GameSettings</span> <span class=\"token punctuation\">{</span>\n  speed<span class=\"token operator\">:</span> <span class=\"token string\">'fast'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'medium'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'slow'</span><span class=\"token punctuation\">;</span>\n  quality<span class=\"token operator\">:</span> <span class=\"token string\">'high'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'low'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">GameSettings</code> 인터페이스는 명확하게 선언된 <code class=\"language-text\">speed</code>와 <code class=\"language-text\">quality</code>라는 프로퍼티와, <code class=\"language-text\">[key: string]: string</code> 이라는 인덱스 시그니처 프로퍼티를 가지고 있다. 이렇게 인덱스 시그니처로 선언한 프로퍼티는 키의 타입과 값의 타입이 <code class=\"language-text\">string</code> 타입이만 하면 모든 것을 허용하겠다는 것과 마찬가지이므로 모호한 타입이라고 하는 것이다.</p>\n<p>이런 타입 정의를 바탕으로 개발자가 <code class=\"language-text\">GameSettings</code> 타입인 객체의 프로퍼티에 접근하는 상황을 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> getSettings <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> GameSettings <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    speed<span class=\"token operator\">:</span> <span class=\"token string\">'fast'</span><span class=\"token punctuation\">,</span>\n    quality<span class=\"token operator\">:</span> <span class=\"token string\">'high'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> settings <span class=\"token operator\">=</span> <span class=\"token function\">getSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsettings<span class=\"token punctuation\">.</span>speed<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Good</span>\nsettings<span class=\"token punctuation\">.</span>quality<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Good</span>\nsettings<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Good...?</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 예시에서 개발자는 <code class=\"language-text\">GameSettings</code> 타입인 <code class=\"language-text\">settings</code> 객체의 프로퍼티들에 접근하고 있다. 물론 명확하게 선언된 <code class=\"language-text\">speed</code>와 <code class=\"language-text\">quality</code> 프로퍼티는 반드시 존재하는 것이 확실하지만, <code class=\"language-text\">settings.user</code>는 다르다.</p>\n<p>이 프로퍼티는 <code class=\"language-text\">[key: string]: string</code> 이라는 타입 선언에 의존하고 있는 녀석이기 때문에, 이 값이 명확히 존재한다고 말할 수 없기 때문이다.</p>\n<p><code class=\"language-text\">noPropertyAccessFromIndexSignature</code> 옵션은 이처럼 반드시 존재하는 프로퍼티는 <code class=\"language-text\">.</code> 문법을 통해 접근할 수 있게 하되, 존재하지 않을 가능성이 있는 프로퍼티는 <code class=\"language-text\">settings['user']</code>와 같은 Index 문법을 사용하여 접근하도록 함으로써 이 두 가지 케이스를 구분하도록 강제한다.</p>\n<h3 id=\"nouncheckedindexedaccess\" style=\"position:relative;\">noUncheckedIndexedAccess<a href=\"#nouncheckedindexedaccess\" aria-label=\"nouncheckedindexedaccess permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<table>\n<thead>\n<tr>\n<th>값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">true</code></td>\n<td>인덱스 시그니처로 선언된 프로퍼티를 Optional 타입으로 평가한다.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">false</code> (default)</td>\n<td>인덱스 시그니처로 선언된 프로퍼티도 정의된 타입으로만 평가한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">noUncheckedIndexedAccess</code> 옵션은 인덱스 시그니처로 선언한 프로퍼티를 어떻게 추론할 것인지에 대한 옵션이다.</p>\n<p>기본적으로 타입스크립트는 <code class=\"language-text\">[key: string]: string</code> 처럼 인덱스 시그니처로 선언된 프로퍼티가 있다면, 딱 선언된 대로만 추론해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">EnvironmentVars</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">const</span> env<span class=\"token operator\">:</span> EnvironmentVars <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nodeEnv <span class=\"token operator\">=</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>하지만 앞서 말했듯이 인덱스 시그니처로 선언된 프로퍼티는 실제로는 있을 수도 있고 없을 수도 있는 옵셔널한 값이다. 즉, <code class=\"language-text\">env.NODE_ENV</code>의 타입은 사실 <code class=\"language-text\">string</code>이 아니라 <code class=\"language-text\">string | undefined</code>인 것이다.</p>\n<p><code class=\"language-text\">noUncheckedIndexedAccess</code> 옵션은 이렇게 인덱스 시그니처로 선언한 프로퍼티를 <code class=\"language-text\">T | undefined</code> 타입으로 평가하여 혹시나 발생할 수 있는 런타임 레퍼런스 에러를 방지해준다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>타입스크립트의 타입 체킹 컴파일 옵션들은 높은 타입 안정성을 유지할 수 있도록 도움을 주는 녀석들이지만, 타입스크립트와 같은 정적 타이핑 언어 자체에 익숙하지 않은 개발자에게는 가파른 러닝 커브로 다가올 수도 있는 부분이다.</p>\n<p>또한 처음 프로젝트를 생성할 때부터 타입스크립트를 사용하는 경우도 있지만, 자바스크립트를 사용하다가 점진적으로 타입스크립트를 도입하고 있는 조직도 존재하기 때문에, 이렇게 다양한 옵션을 제공하여 개발자가 원하는 정적 타이핑 환경을 구축할 수 있게 해주는 것은 큰 장점이라고 생각한다. <small><del>(물론 옵션도 공부해야 함…)</del></small></p>\n<p><a href=\"/2021/08/22/tsconfig-compiler-options-modules/\">다음 포스팅</a>에서는 컴파일 옵션 중에서도 타입스크립트가 컴파일을 수행할 때 “어떤 소스코드를 어떤 방식으로 컴파일하여 결과물을 만들어 낼 지에 관여하는 옵션들”에 대해서 이야기해보도록 하겠다.</p>\n<p>이상으로 [tsconfig의 모든 것] Compiler options / Type Checking 포스팅을 마친다.</p>","fields":{"slug":"20210808-tsconfig-compiler-options-type-check","path":"/2021/08/08/tsconfig-compiler-options-type-check/","lang":"ko"},"frontmatter":{"title":"[tsconfig의 모든 것] Compiler options / Type Checking","subTitle":"타입 검사의 강도와 안정성, 실무에서 체감되는 옵션들의 차이","date":"Aug 08, 2021","categories":["프로그래밍","튜토리얼","자바스크립트"],"tags":["TypeScript","타입스크립트","tsconfig"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/56bd7d19cbdec50908e5f57ff0589f62/d803c/thumbnail.png","srcSet":"/static/56bd7d19cbdec50908e5f57ff0589f62/d803c/thumbnail.png 320w,\n/static/56bd7d19cbdec50908e5f57ff0589f62/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/56bd7d19cbdec50908e5f57ff0589f62/fc5c5/thumbnail.webp 320w,\n/static/56bd7d19cbdec50908e5f57ff0589f62/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/56bd7d19cbdec50908e5f57ff0589f62/01fb2/thumbnail.png","srcSet":"/static/56bd7d19cbdec50908e5f57ff0589f62/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/56bd7d19cbdec50908e5f57ff0589f62/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"0ac439ab-855f-5520-af64-44ebedcb8b80","tableOfContents":"<ul>\n<li><a href=\"#include\">include</a></li>\n<li><a href=\"#files\">files</a></li>\n<li><a href=\"#exclude\">exclude</a></li>\n<li><a href=\"#extends\">extends</a></li>\n<li><a href=\"#references\">references</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","excerpt":"필자가 타입스크립트를 사용하게 된 지도 어언 4년 정도가 지났다. 필자는 자바스크립트에는 없던 타입스크립트가 제공하는 강력한 정적 타입 검사 기능에 흠뻑 빠져버렸고, 지금까지 꽤 많은 프로젝트들을 타입스크립트로 작성해왔다.","html":"<p>필자가 타입스크립트를 사용하게 된 지도 어언 4년 정도가 지났다. 필자는 자바스크립트에는 없던 타입스크립트가 제공하는 강력한 정적 타입 검사 기능에 흠뻑 빠져버렸고, 지금까지 꽤 많은 프로젝트들을 타입스크립트로 작성해왔다.</p>\n<!-- more -->\n<p>그러다가 며칠 전 타입스크립트로 작성한 프로젝트를 새롭게 만들게 되면서 평소처럼 자연스럽게 <code class=\"language-text\">tsconfig</code>를 세팅하고 있었는데, 뭔가 마음처럼 잘 안되어서 <a href=\"https://www.typescriptlang.org/tsconfig\" target=\"_blank\" rel=\"nofollow\">tsconfig 공식 문서</a>를 한참 들여다보던 중 문득 이런 생각이 들었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5fe0821bc535c0c02b3be547c5507fb8/7bf67/jordan-peele.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHlNNiqGkC//8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAAxARIf/aAAgBAQABBQIjTNg9iypQV//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/Aar/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAAAASAx/9oACAEBAAY/AkUx/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8hG5ex2OHCabs3Y6Syttn/2gAMAwEAAgADAAAAEKjv/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EMBH/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxB5So//xAAbEAEAAwEAAwAAAAAAAAAAAAABABFBITFRcf/aAAgBAQABPxBRQTZsIZvplZEPynD7tjX44cc5GAlctn//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jordan peele\" title=\"\" src=\"/static/5fe0821bc535c0c02b3be547c5507fb8/c08c5/jordan-peele.jpg\" srcset=\"/static/5fe0821bc535c0c02b3be547c5507fb8/0913d/jordan-peele.jpg 160w,\n/static/5fe0821bc535c0c02b3be547c5507fb8/cb69c/jordan-peele.jpg 320w,\n/static/5fe0821bc535c0c02b3be547c5507fb8/c08c5/jordan-peele.jpg 640w,\n/static/5fe0821bc535c0c02b3be547c5507fb8/7bf67/jordan-peele.jpg 680w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>어...? 내가 이걸 진짜 알고 쓰는 게 맞나...?</small>\n</center>\n<p>필자만 그런 것일 수도 있지만, 사실 이런저런 프로젝트를 만들다보면 <code class=\"language-text\">tsconfig</code>를 직접 손으로 한땀 한땀 작성하는 경우가 많지는 않게 되는 것 같다.</p>\n<p>물론 맨 처음 타입스크립트로 프로젝트를 개발했을 때는 손수 정성을 들여 작성했을 것이다. <small><del>(사실 오래 되서 잘 기억이…)</del></small> 하지만 언젠가부터는 그냥 기존에 잘 돌아가고 있는 프로젝트의 <code class=\"language-text\">tsconfig</code>를 복붙해서 새로운 프로젝트에 꽂아넣고 약간의 커스터마이징만 직접 해주는 방식으로 프로젝트를 세팅하고 있었던 것이다.</p>\n<p>그래서 다시 초심으로 돌아가 <code class=\"language-text\">tsconfig</code>에 있는 옵션들이 내 타입스크립트 프로젝트에 어떤 영향을 주는 지 한번 찬찬히 뜯어보려고 한다.</p>\n<p>사실 <code class=\"language-text\">tsconfig</code>의 모든 것을 하나의 포스팅으로 풀어내고 싶었지만, 이 놈의 컴파일 옵션들이 워낙 많다보니 포스팅이 500줄이 넘어가는 슬픈 상황을 마주하게 되었으므로, 이번 포스팅에서는 <code class=\"language-text\">tsconfig</code>의 루트에 있는 필드들에 대해서만 자세히 알아보고, 이후 다른 포스팅에서 컴파일 옵션들에 대한 설명을 이어가도록 하겠다.</p>\n<h2 id=\"include\" style=\"position:relative;\">include<a href=\"#include\" aria-label=\"include permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">string[]</code></td>\n<td><code class=\"language-text\">[]</code>, <code class=\"language-text\">['**/*']</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"tests/**/*\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">include</code> 필드는 타입스크립트 어플리케이션에 포함할 파일 목록을 선언할 때 사용하며, <code class=\"language-text\">files</code> 필드의 존재 여부에 따라 기본값이 변경되는데, 만약 <code class=\"language-text\">ㅋ</code> 필드가 선언되어 있다면 <code class=\"language-text\">[]</code>로, 선언되어 있지 않다면 <code class=\"language-text\">[\"**/*\"]</code>으로 기본 값이 설정된다.</p>\n<p>이 필드는 <code class=\"language-text\">files</code> 필드와 하는 일이 비슷하지만, <code class=\"language-text\">include</code> 필드에는 glob 문법을 사용하여 포함할 파일 경로의 패턴을 표현할 수 있기 때문에 일반적으로는 <code class=\"language-text\">files</code> 보다 <code class=\"language-text\">include</code>를 주로 사용한다.</p>\n<p>glob 문법은 <code class=\"language-text\">*</code>이나 <code class=\"language-text\">?</code> 같은 와일드 카드를 사용하여 여러 파일 이름의 패턴을 나타내게 되는데, 문법 자체는 정규 표현식과 유사하기 때문에 익히기에 크게 어렵지 않다.</p>\n<table>\n<thead>\n<tr>\n<th>와일드카드</th>\n<th>설명</th>\n<th>예시</th>\n<th>일치하는 파일이름</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">*</code></td>\n<td><code class=\"language-text\">/</code>를 제외한 0번 이상 나타나는 문자를 매칭</td>\n<td><code class=\"language-text\">types*.ts</code></td>\n<td>types.d.ts, types.ts, types.test.ts</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">**</code></td>\n<td><code class=\"language-text\">/</code>를 포함한 0번 이상 나타나는 문자를 매칭</td>\n<td><code class=\"language-text\">src/**/index.ts</code></td>\n<td>src/index.ts, src/utils/index.ts, src/test/index.ts</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">?</code></td>\n<td>하나의 문자를 매칭, 정규식의 <code class=\"language-text\">.</code>과 동일</td>\n<td><code class=\"language-text\">?at.ts</code></td>\n<td>Cat.ts, Bat.ts, Rat.ts</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">[ab]</code></td>\n<td><code class=\"language-text\">[]</code> 안에 있는 문자 중 하나를 매칭</td>\n<td>`[C</td>\n<td>B]at.ts`</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">[a-z]</code></td>\n<td><code class=\"language-text\">[]</code> 안에 있는 문자의 범위</td>\n<td><code class=\"language-text\">test[0-9].ts</code></td>\n<td>test0.ts, test1.ts, test9.ts</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">{ab,bc}</code></td>\n<td><code class=\"language-text\">{}</code> 안에 있는 문자열 중 하나를 매칭</td>\n<td><code class=\"language-text\">*.{ts,tsx}</code></td>\n<td>foo.ts, foo.tsx</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">{ab,bc}</code></td>\n<td><code class=\"language-text\">{}</code> 안에 있는 문자열 중 하나를 매칭</td>\n<td><code class=\"language-text\">*.{ts,tsx}</code></td>\n<td>foo.ts, foo.tsx</td>\n</tr>\n</tbody>\n</table>\n<p>glob 문법은 파일 경로를 통해 원하는 파일을 잡아내야하는 거의 모든 상황에서 유용하게 사용되기 때문에, 한번만 익숙해지고 나면 앞으로 프로그래밍을 하면서 만나게 될 설정 파일들이 조금은 친숙하게 다가올 것이다.</p>\n<h2 id=\"files\" style=\"position:relative;\">files<a href=\"#files\" aria-label=\"files permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">string[]</code></td>\n<td><code class=\"language-text\">false</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"./src/index.ts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"./src/utils.ts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"./src/models.ts\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">files</code> 필드는 타입스크립트 어플리케이션에 포함할 파일 목록을 명시적으로 선언할 때 사용한다. <code class=\"language-text\">includes</code> 필드와 비슷하지만, <code class=\"language-text\">files</code> 필드는 <code class=\"language-text\">src/**/*</code>와 같은 glob 문법을 사용할 수 없기 때문에, 일일히 파일명을 입력해줘야 한다는 단점이 있다.</p>\n<p>만약 <code class=\"language-text\">files</code> 필드에 값이 존재한다면 <code class=\"language-text\">includes</code> 필드의 기본 값은 <code class=\"language-text\">['**/*']</code>에서 빈 배열인 <code class=\"language-text\">[]</code>으로 변경된다. 즉, 기존에 <code class=\"language-text\">includes</code> 필드의 기본 값에 의존하고 있었다면, <code class=\"language-text\">files</code> 필드에 값을 추가함으로써 컴파일 결과물이 완전히 달라질 수 있으니 이 점을 유의해야 한다.</p>\n<h2 id=\"exclude\" style=\"position:relative;\">exclude<a href=\"#exclude\" aria-label=\"exclude permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">string[]</code></td>\n<td><code class=\"language-text\">['node_modules', 'bower_components', 'jspm_packages']</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"src/**/*\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"src/**/*.test.ts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"node_modules\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">exclude</code> 필드는 “제외하다”라는 사전적 의미 그대로 <code class=\"language-text\">include</code> 필드에 선언한 파일들 중에서 “이 파일들은 포함하지마”라는 설정을 할 때 사용한다.</p>\n<p>이 필드의 기본 값인 <code class=\"language-text\">node_modules</code>, <code class=\"language-text\">bower_components</code>, <code class=\"language-text\">jspm_packages</code> 라는 친구들을 보면 알 수 있겠지만, 보통 타입스크립트로 작성된 패키지는 <code class=\"language-text\">js</code> + <code class=\"language-text\">*.d.ts</code> 파일들의 조합으로 빌드해서 배포하기 때문에, 타입스크립트는 기본적으로 이런 외부 패키지들이 빌드가 되어있다고 가정하고 있는 것이다.</p>\n<p>만약 외부에서 받아온 패키지도 컴파일이 필요한 상황이라면 <code class=\"language-text\">exclude</code> 필드를 수정해주면 된다. <small>(참고로 <code class=\"language-text\">Next.js</code>는 이 필드에 기본적으로 <code class=\"language-text\">node_modules</code>가 포함되어 있도록 프로젝트를 세팅하고, 이 값을 지워도 빌드할 때 자동으로 다시 넣어버린다…)</small></p>\n<p>그리고 한 가지 중요한 점은 <code class=\"language-text\">exlucde</code> 필드는 단지 <code class=\"language-text\">include</code> 필드에 세팅해준 파일들을 찾아올 때 “이건 찾지마”라는 의미이기 때문에 이 필드에 넣어준 파일들이라고 해서 반드시 내 어플리케이션에 포함되지 않는 것이 아니라는 것이다.</p>\n<p>즉, <code class=\"language-text\">exlucde</code> 필드에 <code class=\"language-text\">node_modules</code> 같은 디렉토리가 세팅되어있다고 해도 코드 내에서 import 문을 사용하여 직접 해당 모듈을 가져오는 경우나 <code class=\"language-text\">/// &lt;reference path=\"...\" /></code> 처럼 트리플 슬래시 디렉티브를 사용하여 컴파일러에게 특정 모듈을 포함하라고 직접 지시하는 경우, 그리고 <code class=\"language-text\">files</code> 필드를 사용하여 직접 컴파일할 파일을 명시하는 경우에는 <code class=\"language-text\">exlucde</code> 필드에 뭘 세팅했던 무시하고 해당 모듈을 가져온다.</p>\n<h2 id=\"extends\" style=\"position:relative;\">extends<a href=\"#extends\" aria-label=\"extends permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">string</code></td>\n<td><code class=\"language-text\">false</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.base.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"noImplicitAny\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"strictNullChecks\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// tsconfig.base.json의 설정을 가져와서 확장한다.</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./tsconfig.base.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"./src/main.ts\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">extends</code> 필드는 이름 그대로 다른 <code class=\"language-text\">tsconfig</code>의 경로를 지정하면 해당 <code class=\"language-text\">tsconfig</code>를 상속할 수 있는 필드이다. 필자 같은 경우에는 다른 사람이 미리 만들어 놓은 설정을 가져와서 조금 커스터마이징하는 상황이나, 모노 레포지토리에 포함된 모든 프로젝트에 공통적으로 적용하고 싶은 설정이 있는 경우에 주로 사용했던 것 같다.</p>\n<p>만약 상속 대상인 <code class=\"language-text\">tsconfig.base.json</code>의 내부 필드에 <code class=\"language-text\">./src</code>와 같은 상대 경로가 지정되어 있는 경우에는 해당 상속 파일을 불러온 주체인 <code class=\"language-text\">tsconfig.json</code> 기준으로 상대 경로가 계산된다.</p>\n<p>또한 이렇게 다른 <code class=\"language-text\">tsconfig</code>를 상속하여 새로운 <code class=\"language-text\">tsconfig</code>를 정의하는 경우, <code class=\"language-text\">files</code>, <code class=\"language-text\">include</code>, <code class=\"language-text\">exclude</code> 처럼 배열을 사용하여 선언된 필드들은 확장되는 것이 아니라 필드 자체가 덮어씌워지기 때문에 이 점을 유의해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.base.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"./src/main.ts\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./tsconfig.base.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"./src/index.ts\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그러므로 위의 예시 같은 상황이라면 최종 <code class=\"language-text\">files</code>필드는 <code class=\"language-text\">[\"./src/main.ts\", \"./src/index.ts\"]</code>로 합쳐지는 것이 아니라 <code class=\"language-text\">[\"./src/index.ts\"]</code>로 평가된다. <code class=\"language-text\">extends</code>라는 필드 이름을 보면 왠지 필드의 값도 확장해줄 것 같지만, 아무런 경고나 에러도 없이 그냥 쿨하게 오버라이팅 해버리므로 주의하도록 하자.</p>\n<h2 id=\"references\" style=\"position:relative;\">references<a href=\"#references\" aria-label=\"references permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>타입</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">Array&lt;{ path: string; prepend: boolean; }></code></td>\n<td><code class=\"language-text\">false</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// my-project/test/tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// my-project/src/tsconfig.json을 참조한다</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../src\"</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">reference</code> 필드는 같은 프로젝트 안에서 모듈 별로 여러 개의 <code class=\"language-text\">tsconfig</code>를 사용하는 경우, 이 모듈들의 참조 관계를 표현하기 위한 필드이다. 보통 하나의 프로젝트에서는 하나의 <code class=\"language-text\">tsconfig</code>만 사용하는 경우가 많기 때문에 거의 사용할 일이 없기는 하다.</p>\n<p>사실 타입스크립트가 이런 옵션을 제공하는 이유는 바로 이런 경우 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">├── src/\n│   ├── converter.ts\n│   └── units.ts\n├── test/\n│   ├── converter-tests.ts\n│   └── units-tests.ts\n└── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 프로젝트는 소스 코드와 테스트 코드가 별도의 디렉토리로 분리되어있고, 루트에는 하나의 <code class=\"language-text\">tsconfig</code>가 전체 프로젝트의 컴파일 옵션을 관리하고 있다. 이런 구조의 프로젝트는 상당히 흔한 구조이기는 하지만, 막상 이렇게 만들어놓고 개발을 하다보면 몇 가지 불편한 점이 생긴다.</p>\n<blockquote>\n<ol>\n<li>소스 코드인 <code class=\"language-text\">src</code> 모듈에서도 테스트 코드인 <code class=\"language-text\">test</code> 모듈을 불러올 수가 있음…</li>\n<li>소스 코드에서 절대 오류가 발생하지 않는 부분을 수정했는데도 테스트 코드까지 다시 타입 검사해야 함…</li>\n<li>반대로 테스트 코드를 고치면 소스 코드까지 다시 타입 검사해야 함…</li>\n</ol>\n</blockquote>\n<p>물론 평소라면 어느 정도 감당이 가능한 불편함이기는 하지만, 프로젝트의 크기가 커지면 커질 수록 컴파일러의 타입 검사도 비례해서 느려지기 때문에 어느 순간부터는 개발 자체에 어려움을 느낄 수도 있다. 그렇다면 프로젝트의 모듈마다 <code class=\"language-text\">tsconfig</code>를 만들어 두고 따로 컴파일하면 어떨까?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">├── src/\n│   ├── converter.ts\n│   ├── units.ts\n│   └── tsconfig.json\n└── test/\n    ├── converter-tests.ts\n    ├── units-tests.ts\n    └── tsconfig.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 각각의 모듈 별로 <code class=\"language-text\">tsconfig</code>를 가지도록 구성하면 위에서 이야기했던 문제들은 어느 정도 해결된다. 하지만 이 경우에는 각각의 모듈 별로 따로 컴파일해줘야 하는데다가, 기본적으로 <code class=\"language-text\">tsc</code>는 하나의 프로세스만 띄울 수 있도록 만들어졌기 때문에 동시에 여러 개의 <code class=\"language-text\">tsconfig</code>를 토대로 빌드를 하거나 소스 코드의 변경 사항을 감시하는 것이 불가능하다.</p>\n<p>그래서 타입스크립트 팀에서는 <code class=\"language-text\">references</code>라는 필드로 이 문제를 해결하려고 하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// my-project/test/tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// my-project/src/tsconfig.json을 참조한다</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../src\"</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 예시는 <code class=\"language-text\">references</code> 필드를 사용하여 <code class=\"language-text\">test</code> 모듈에서 <code class=\"language-text\">src</code> 모듈을 참조하고 있다는 것을 표현하고 있다. 이때 <code class=\"language-text\">test</code> 모듈에서 <code class=\"language-text\">src</code> 모듈에 있는 하위 모듈들을 불러오게 되면 소스 코드인 <code class=\"language-text\">*.ts</code>가 아니라 빌드가 완료된 결과물인 <code class=\"language-text\">*.d.ts</code> 파일을 가져온다. <small>(<code class=\"language-text\">tsc --build</code>를 사용하면 해당 모듈의 최신 상태를 감지하고 증분 빌드도 해준다.)</small></p>\n<p>프로젝트 레퍼런스에 대한 자세한 내용은 이 포스팅의 주제는 아니니, 더 궁금하신 분들은 타입스크립트 공식 문서의 <a href=\"https://www.typescriptlang.org/docs/handbook/project-references.html\" target=\"_blank\" rel=\"nofollow\">Project Referneces</a> 문서를 확인해보도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이번 포스팅에서는 <code class=\"language-text\">tsconfig</code>의 루트에 있는 몇 가지 필드들의 역할을 알아보았다. 사실 하나의 포스팅으로 <code class=\"language-text\">tsconfig</code>를 깔끔하게 정리하고 싶었는데, 이 친구가 워낙 방대한 옵션들을 가지고 계신지라 부득이하게 여러 개의 포스팅으로 나눠서 집필하게 되었다.</p>\n<p>이어지는 <a href=\"/2021/08/08/tsconfig-compiler-options-type-check/\">다음 포스팅</a>에서는 타입스크립트의 컴파일 옵션들 중 타입 체크에 관한 옵션들에 대해서 이야기해보도록 하겠다.</p>\n<p>이상으로 [tsconfig의 모든 것] Root fields 포스팅을 마친다.</p>","fields":{"slug":"20210730-tsconfig-options-root-fields","path":"/2021/07/30/tsconfig-options-root-fields/","lang":"ko"},"frontmatter":{"title":"[tsconfig의 모든 것] Root fields","subTitle":"복붙하던 tsconfig를 다시 읽다 - 루트 필드가 만드는 프로젝트의 기준점","date":"Jul 30, 2021","categories":["프로그래밍","튜토리얼","자바스크립트"],"tags":["TypeScript","타입스크립트","tsconfig"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/18562cf9f40ec5572baa9105e9ecddbd/d803c/thumbnail.png","srcSet":"/static/18562cf9f40ec5572baa9105e9ecddbd/d803c/thumbnail.png 320w,\n/static/18562cf9f40ec5572baa9105e9ecddbd/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/18562cf9f40ec5572baa9105e9ecddbd/fc5c5/thumbnail.webp 320w,\n/static/18562cf9f40ec5572baa9105e9ecddbd/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/18562cf9f40ec5572baa9105e9ecddbd/01fb2/thumbnail.png","srcSet":"/static/18562cf9f40ec5572baa9105e9ecddbd/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/18562cf9f40ec5572baa9105e9ecddbd/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a24d87ce-d247-51be-a7c7-279b2b311348","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B7%9C%EC%8B%9D%EC%9D%B4%ED%98%95-%EB%84%8C-%EB%88%84%EA%B5%AC%EB%83%90\">규식이형, 넌 누구냐?</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8-%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EA%B8%B0%EB%8A%A5%EB%93%A4\">기본적인 정규식의 기능들</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B9%EC%A0%95-%EB%AC%B8%EC%9E%90%EC%9D%98-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%BA%90%EB%A6%AD%ED%84%B0-%ED%81%B4%EB%9E%98%EC%8A%A4\">특정 문자의 그룹을 잡아내는 캐릭터 클래스</a></li>\n<li><a href=\"#%EB%AC%B8%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B2%BD%EA%B3%84%EB%A5%BC-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%95%B5%EC%BB%A4\">문자가 아닌 경계를 잡아내는 앵커</a></li>\n<li><a href=\"#%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EC%98%B5%EC%85%98-%EA%B8%B0%EB%8A%A5-%ED%94%8C%EB%9E%98%EA%B7%B8\">정규식의 옵션 기능, 플래그</a></li>\n<li><a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%B4-%EB%AA%87-%EB%B2%88%EC%9D%B4%EB%82%98-%EB%82%98%EC%99%94%EB%8A%94%EC%A7%80-%EC%B0%BE%EC%95%84%EC%A3%BC%EB%8A%94-%EC%88%98%EB%9F%89%EC%9E%90\">패턴이 몇 번이나 나왔는지 찾아주는 수량자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%8C%EB%A9%B4-%EB%8D%94-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EA%B8%B0%EB%8A%A5%EB%93%A4\">알면 더 효율적인 기능들</a></p>\n<ul>\n<li><a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%84-%EA%B8%B0%EC%96%B5%ED%95%98%EB%8A%94-%EC%BA%A1%EC%B2%98%EB%A7%81\">패턴을 기억하는 캡처링</a></li>\n<li><a href=\"#greedy-vs-lazy\">Greedy vs Lazy</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"개발자들은 자연어로 주어지는 문제 상황을 파악하고 프로그램을 설계하고 작성하는 사람들이다. 이런 업무를 수행하기 위해 개발자들은 불규칙하게 쏟아지는 정보들 속에서 필요한 부분들을 걸러내거나 무분별하게 선언된 클래스나 변수들을 추상화하는 등의 업무를 수행하게 된다.","html":"<p>개발자들은 자연어로 주어지는 문제 상황을 파악하고 프로그램을 설계하고 작성하는 사람들이다. 이런 업무를 수행하기 위해 개발자들은 불규칙하게 쏟아지는 정보들 속에서 필요한 부분들을 걸러내거나 무분별하게 선언된 클래스나 변수들을 추상화하는 등의 업무를 수행하게 된다.</p>\n<!-- more -->\n<p>이러한 일들을 해내기 위해 필요한 역량은 여러가지가 있겠지만 그 중에서도 특히 중요한 한 가지 역량은 바로 불규칙해 보이는 정보들 속에서 규칙성, 즉 패턴을 찾아내는 능력이다.</p>\n<p>그 중에서도 일반적인 비즈니스 상황에서 접할 수 있는 가장 흔한 문제는 파일을 파싱하거나 사용자의 입력을 검증하거나 하는 경우처럼 불규칙한 문자열 속에서 패턴을 찾아내어 원하는 정보를 취득하는 경우가 많다. 그러나 이런 문제는 경우의 수가 워낙 많기 때문에 일반적인 프로그래밍만으로 문제를 해결하려고 하면 화려한 <code class=\"language-text\">if</code> 문이 나를 감싸는 상황을 만날 수도 있다.</p>\n<p>바로 이런 문제를 쉽게 해결할 수 있도록 도와주는 도구가 정규식이다.</p>\n<h2 id=\"규식이형-넌-누구냐\" style=\"position:relative;\">규식이형, 넌 누구냐?<a href=\"#%EA%B7%9C%EC%8B%9D%EC%9D%B4%ED%98%95-%EB%84%8C-%EB%88%84%EA%B5%AC%EB%83%90\" aria-label=\"규식이형 넌 누구냐 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>정규식의 정식 풀네임은 정규 표현식(Regular Expression)이지만, 사실 정규 표현식이라는 풀네임보다는 정규식, Regex, <del>규식이형</del> 등으로 더 자주 불리고는 한다.</p>\n<p>정규식은 패턴을 표현할 수 있는 일종의 표현식이고 이 표현식을 문자열에 적용하여 원하는 부분을 쏙쏙 끄집어 낼 수 있는 굉장히 편리한 도구이지만, 그 특유의 악랄한 가독성 덕분에 왠지 모를 기피의 대상이 되고는 한다.</p>\n<p>사실 필자도 정규식을 꽤나 자주 사용하는 편이지만, 왠만큼 자주 사용하는 표현이 아니라면 무조건 구글링을 해서 표현을 찾아보고 <a href=\"https://regexr.com/\" target=\"_blank\" rel=\"nofollow\">RegExr</a> 사이트에서 검수를 돌려보고는 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB32UTM6UU0wG1Av/EABoQAQEBAQADAAAAAAAAAAAAAAECAxEAEiH/2gAIAQEAAQUCvXlNEnfLZ96iED5pAumJZJw//8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQMBAT8BIf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABsQAAICAwEAAAAAAAAAAAAAAAERABACITFB/9oACAEBAAY/Al5GclSLm+WiShX/xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFRgaH/2gAIAQEAAT8hW+aewNVPZdBHDLg9NkzifghA79iJfIG5pUpS2jE//9oADAMBAAIAAwAAABBsPwP/xAAaEQEAAQUAAAAAAAAAAAAAAAABEBEhQWHB/9oACAEDAQE/EBat4OdvI//EABcRAQEBAQAAAAAAAAAAAAAAAAABMUH/2gAIAQIBAT8Qmq6r/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARIUExUYH/2gAIAQEAAT8QaOoLcX3IcLIJ/YXBgInSPUmgph2AgAcL0SHQoDG3nJZzdCys2e0w2Fr9chA0ILrwJ//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"regex meme\" title=\"\" src=\"/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg\" srcset=\"/static/cf1e76c74723af6eb45ee626ca4269a9/0913d/regex_meme.jpg 160w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/cb69c/regex_meme.jpg 320w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg 640w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/6a068/regex_meme.jpg 960w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이런 짤이 있을 정도로 정규식을 처음 보면 이게 뭔가 싶다</small>\n</center>\n<p>하지만 정규식의 주 사용처가 문자열 내에서 패턴을 찾아내는 것이고, 이런 상황은 개발자로 일을 하다보면 자주 마주치는 상황 중 하나이기 때문에 언젠가는 반드시 정규식과 마주하게 될 일이 생기게 된다. 즉, 정규식을 무작정 피할 수도 없다는 뜻이다. <small><del>(그냥 도망치는 걸 포기하면 편하다)</del></small></p>\n<p>물론 아무 생각없이 정규식을 보았을 때는 “이게 뭔 말이야…?” 싶겠지만, 결국 아무리 긴 정규 표현식도 작은 표현들이 합쳐져서 만들어진 것이므로 막상 뜯어보면 생각보다 간단한 표현인 경우가 많다.</p>\n<h2 id=\"기본적인-정규식의-기능들\" style=\"position:relative;\">기본적인 정규식의 기능들<a href=\"#%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8-%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EA%B8%B0%EB%8A%A5%EB%93%A4\" aria-label=\"기본적인 정규식의 기능들 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>정규식에는 굉장히 다양한 키워드들이 있으며, 결국 이런 키워드들을 잘 조합하여 원하는 패턴을 잡아낼 수 있는 표현식을 만드는 것이 정규식 사용법의 전부이다. 한 마디로 이야기하자면 정규식을 시작하는 가장 기본적인 방법은 이 키워드들을 암기하는 것이다.</p>\n<p>물론 구글에 “정규식”이라고만 검색해도 방대한 양의 자료들이 쏟아져나오기 때문에 굳이 수 많은 키워드들을 다 알아야할 필요는 없지만, 기본적인 것들이라도 암기하고 있다면 간단한 패턴 매칭 문제 정도는 딱히 구글신께 물어보지 않아도 해결할 수 있기 때문에 생산성 측면에서 이득이다. <small>(어차피 다 외우는 건 불가능하다)</small></p>\n<p>결국 이 기능을 상황에 따라 적절하게 조합하며 사용하는 것이 결국 정규식을 얼마나 잘 사용하냐는 것의 척도이므로 이번 포스팅에서는 정규식이 제공하는 기능을 간단하게 핥아만 보고, 다음 포스팅에서 실무에서 발생할 법한 예제들을 통해 설명을 더 자세히 풀어가고자 한다.</p>\n<h3 id=\"특정-문자의-그룹을-잡아내는-캐릭터-클래스\" style=\"position:relative;\">특정 문자의 그룹을 잡아내는 캐릭터 클래스<a href=\"#%ED%8A%B9%EC%A0%95-%EB%AC%B8%EC%9E%90%EC%9D%98-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%BA%90%EB%A6%AD%ED%84%B0-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"특정 문자의 그룹을 잡아내는 캐릭터 클래스 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>정규식에는 특정한 문자 혹은 특정한 문자들의 그룹을 의미하는 다양한 키워드들이 있다. 이렇게 특정한 문자를 찾는 녀석들을 “캐릭터 클래스(Character Class)“라고 부른다.</p>\n<p>정규식의 핵심 기능이 내가 원하는 문자를 찾는 것이니 만큼, 캐릭터 클래스의 종류와 역할을 어느 정도 알고 있다면 간단한 정규식 정도는 구글링 없이도 대충 파악할 수 있다.</p>\n<h4 id=\"특정한-문자부터-찾아내보자\" style=\"position:relative;\">특정한 문자부터 찾아내보자<a href=\"#%ED%8A%B9%EC%A0%95%ED%95%9C-%EB%AC%B8%EC%9E%90%EB%B6%80%ED%84%B0-%EC%B0%BE%EC%95%84%EB%82%B4%EB%B3%B4%EC%9E%90\" aria-label=\"특정한 문자부터 찾아내보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>정규식에는 <code class=\"language-text\">\\d</code>, <code class=\"language-text\">\\w</code> 등 한 눈에 봐서는 의미를 알기 힘든 캐릭터 클래스들이 수두룩하게 포함되어 있지만, 사실 이런 요상한 키워드들만 사용되는 것은 아니다. 예를 들면 엄청 긴 문장 속에서 특정한 단어만 뽑아내고 싶다면 그냥 이렇게 작성해도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">hello</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이처럼 정규식에는 일반 문자도 자유롭게 사용할 수 있기 때문에 특정 문자의 그룹을 의미하는 키워드인 <code class=\"language-text\">\\w</code>, <code class=\"language-text\">\\s</code> 등을 사용할 때 반드시 키워드의 앞에 <code class=\"language-text\">\\</code>를 사용하여 이스케이핑을 해주는 것이다. 즉, <code class=\"language-text\">\\s</code>는 키워드 문자이지만 <code class=\"language-text\">s</code>는 그냥 s다.</p>\n<p>이러한 이스케이핑 처리 때문에 정규식에 익숙하지 않은 사람은 이게 <code class=\"language-text\">s</code>인지, 공백을 의미하는 <code class=\"language-text\">\\s</code> 키워드인지 헷갈리는 경우가 많은데, 이건 사실 팁이라고 할만한 게 없다. 그냥 <code class=\"language-text\">/\\/s\\.s.{1,2}/</code> 이런 모양을 보면 앞에서부터 하나씩 잘라가면서 읽어보도록 하자.</p>\n<p>그리고 이렇게 정규식에 <code class=\"language-text\">hello</code>와 같이 특정한 문자를 사용하여 문자열 속에서 자신이 원하는 정확한 패턴을 찾아낼 수는 있지만, 이런 방식으로 특정 패턴을 찾는 것 뿐이라면 굳이 정규식을 사용하지 않더라도 <code class=\"language-text\">include</code>나 <code class=\"language-text\">indexOf</code>, <code class=\"language-text\">search</code> 같은 <code class=\"language-text\">String.prototype</code> 메소드들에 일반 문자열을 인자로 사용하는 것만으로도 충분하기 때문에 큰 의미가 없다.</p>\n<p>정규식의 진짜 힘은 이런 특정 문자열을 찾는 것이 아니라 내가 원하는 문자열의 그룹을 찾아내는 것에 있다.</p>\n<h4 id=\"원하는-문자의-그룹을-만들어보자\" style=\"position:relative;\">원하는 문자의 그룹을 만들어보자<a href=\"#%EC%9B%90%ED%95%98%EB%8A%94-%EB%AC%B8%EC%9E%90%EC%9D%98-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\"원하는 문자의 그룹을 만들어보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>만약 우리가 유저의 입력이 오직 영어로만 이루어져있는지 검증을 해야하는 상황이라고 생각해보자. 물론 영어는 대소문자를 모두 합쳐 총 48개의 문자로 이루어져 있기 때문에 알파벳으로 이루어진 맵이나 배열을 만들어서 일일히 검증하거나, 최악의 경우에는 논리 조건 48개를 <code class=\"language-text\">||</code> 연산자로 묶어서 써도 된다. <small><del>(예외 처리까지 합치면 논리 조건 49개…)</del></small></p>\n<p>하지만 이 방법이 그다지 쿨한 방법이 아니라는 것에는 다들 어느 정도 동의할 것이라고 생각한다. 게다가 영어만 검사하는 것이 아니라 숫자까지 포함되었는지를 검사한다던가, 영어가 n번 반복하는 것을 검사한다던가 하는 식으로 조건이 추가되면 추가될수록 필요한 논리도 늘어나기 때문에 코드는 점점 더 복잡해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> alphabet <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isAlphabet</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">string</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span>char <span class=\"token operator\">=></span> alphabet<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>char<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <small>사실 간단하게 영어만 검사하는 것이라면 이런 식으로 처리할 수 있기는 하다</small>\n  <br />\n  <br />\n</center>\n<p>그래서 정규식은 사용자가 커스텀한 그룹을 만들어서 원하는 문자를 잡아낼 수 있는 기능 또한 제공해준다. 사용하는 방법 또한 심플한데, 단순히 대괄호(<code class=\"language-text\">[]</code>) 안에 그룹핑하고 싶은 문자들을 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// x 또는 y 또는 z를 잡아내라!</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">[</span>xyz<span class=\"token punctuation\">]</span><span class=\"token operator\">/</span>\n\n<span class=\"token comment\">// x 또는 y 또는 z가 아닌 것을 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^xyz]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// a~z까지 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-z]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// a~z, A~Z까지 잡아내라!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-zA-Z]</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 대괄호 안에는 일반 문자만 들어갈 수 있는 것은 아니고, <code class=\"language-text\">-</code> 키워드를 사용하여 문자의 범위를 표현할 수도 있고, 맨 앞에 <code class=\"language-text\">^</code> 문자를 붙힘으로써 “Not” 또한 표현할 수 있다.</p>\n<p>그리고 위 표현 중 <code class=\"language-text\">a-z</code>와 같이 문자의 범위로 그룹을 설정하는 문법도 등장하는데, 이 범위는 <a href=\"http://www.asciitable.com/\" target=\"_blank\" rel=\"nofollow\">Ascii Table</a>에서의 범위를 의미한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42pWVW2/TQBCFF9GQxLk5iR2HYGgFlNhJCIUWIR6QEIgXxP//PcyKb6PTiVFhpSN5x+szZ27rEEL4ZfhsaAw/DS8N3wxbwx3Pe8MP9jfy/rvhleGL4athZQifeJjzsm94z/7KMDZUEC0MteG5YWI4GqY8x3NPIuEthsywCX/WwTAwrNnPDK2hB/mcjxvOTYOsD7CP8BzwHG2FEB5FbQlhTMVQCB8F8jJDYc2LPQ5K9jGCHakpcdTDNuT707rBQyR8IbYRoSXCPepWoEdqhig/reQlEjyTHEYHS6dwjcIlIe9cyGeESeEWW/4XwgqF266ipHxFXAphBjTkjSNsUDpQwoNU+UoIxy6HO8nhGsKWSCZeYQZBUtjgIOVwzLkaWyVV7v9LyC37p6KwJdxU5QsIz3L4DoNWuSGUQggb+q2QKrcQ3gv5VhTWrvKlU1jgfO4mZe5Hb+QUtv9B2JduOCn0s9xim7kql9gWEL4l5JES3vGBNvaBvW/sBbYlVe4kVIW1KMxoDw15Rche4b0qf8SgfZhmuXSTspZKa5XPCHM3KanZc9c2BYQlIb/uum1Slcf8T7Sxpx2NncukXD9EeCl9OOGwElY4SQrfcCbrqrIqPHYQag4ruRwGcu50O6cqb9zl8FgIt9LYueTwIv1L4voNxWskW8umJHYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ascii table\" title=\"\" src=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" srcset=\"/static/55b14704e00c60b3167cd812dcd52258/69538/ascii-table.png 160w,\n/static/55b14704e00c60b3167cd812dcd52258/72799/ascii-table.png 320w,\n/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png 349w\" sizes=\"(max-width: 349px) 100vw, 349px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>위 테이블을 보면 영어 대문자 그룹(65 ~ 90)과 소문자 그룹(97 ~ 122) 사이에 <code class=\"language-text\">[</code>나 <code class=\"language-text\">^</code>과 같은 특수 문자들이 포함되어 있는 것을 볼 수 있는데, 정규식은 이 아스키 코드를 기반으로 작동하기 때문에 영어만 잡아내고 싶다고 <code class=\"language-text\">a-Z</code>와 같은 범위로 문자열 그룹을 잡아버리면 저 사이에 있는 특수문자들까지도 그룹에 포함되어버린다.</p>\n<p>그래서 필자는 영어만 따로 걸러내기 위해 <code class=\"language-text\">a-z</code>와 <code class=\"language-text\">A-Z</code> 범위를 구분해서 정규식에 표현해준 것이다.</p>\n<p>이런 식으로 아스키 코드에 대한 지식이 있다면 <code class=\"language-text\">-</code> 문자 범위 키워드를 사용하여 손 쉽게 원하는 문자열의 그룹을 만들어 낼 수 있고, 사실 아스키 코드에 대해 잘 모르더라도 구글에 “Ascii Table”이라고 검색하면 저런 코드표가 쏟아져 나오기 때문에 그냥 저 테이블을 보면서 정의해도 된다.</p>\n<p>하지만 매번 이렇게 그룹을 직접 설정하는 것 또한 어찌보면 귀찮은 일이다. <small><del>(개발자는 게으를수록 일을 잘 하…)</del></small> 그래서 정규식은 친절하게도 사용자가 매번 이렇게 직접 그룹을 정의하지 않아도 되도록 미리 정의된 몇 가지 그룹을 지원한다.</p>\n<h4 id=\"code-classlanguage-textcode\" style=\"position:relative;\"><code class=\"language-text\">.</code><a href=\"#code-classlanguage-textcode\" aria-label=\"code classlanguage textcode permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>새로운 라인을 의미하는 <code class=\"language-text\">\\n</code> 이스케이프를 제외한 모든 문자 하나를 의미한다. 즉, 그 문자가 무엇이든 상관없이 그냥 문자라면 모두 매칭한다. 당연히 이 문자라는 것의 정의에는 공백도 포함하기 때문에 <code class=\"language-text\">I am Evan</code>과 같이 공백을 포함한 문자열에 <code class=\"language-text\">.</code> 캐릭터 클래스를 사용한다면 공백도 포함하여 검색된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 문자열의 시작부터 4글자 매칭해!</span>\n<span class=\"token string\">'I am Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^....</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"I am\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>만약 이 캐릭터 클래스를 앞서 말한 커스텀 그룹으로 표현하려면 아스키 코드에서 <code class=\"language-text\">\\n</code>를 제외한 모든 문자를 대괄호 안에 넣어야한다는 이야기인데, 이건 당연히 불가능하다. 그래서 이런 캐릭터 클래스를 잘 사용하는 것이 정규식을 편하게 작성할 수 있는 첫 걸음이라고 하는 것이다.</p>\n<h4 id=\"code-classlanguage-textdcode-code-classlanguage-textdcode-클래스\" style=\"position:relative;\"><code class=\"language-text\">\\d</code>, <code class=\"language-text\">\\D</code> 클래스<a href=\"#code-classlanguage-textdcode-code-classlanguage-textdcode-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"code classlanguage textdcode code classlanguage textdcode 클래스 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">d</code> 키워드는 Digit, 즉 숫자를 표현하는 문자를 의미한다. 이 숫자 또한 아스키 코드 상으로는 <code class=\"language-text\">0</code> ~ <code class=\"language-text\">9</code>(33 ~ 52)인 문자를 의미하기 때문에, II나 五와 같은 문자는 숫자로 판단되지 않는다.</p>\n<p>소문자인 <code class=\"language-text\">\\d</code> 키워드는 숫자에 해당하는 문자를, 대문자인 <code class=\"language-text\">\\D</code>는 숫자가 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-1111-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// -를 제외한 0-9까지의 문자가 매칭된다</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"code-classlanguage-textwcode-code-classlanguage-textwcode-클래스\" style=\"position:relative;\"><code class=\"language-text\">\\w</code>, <code class=\"language-text\">\\W</code> 클래스<a href=\"#code-classlanguage-textwcode-code-classlanguage-textwcode-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"code classlanguage textwcode code classlanguage textwcode 클래스 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">w</code> 캐릭터 클래스는 Word를 의미한다. 이때 정규식에서 정의하는 Word라는 녀석들은 아스키 코드 상으로 <code class=\"language-text\">A</code> ~ <code class=\"language-text\">Z</code>(65 ~ 90), <code class=\"language-text\">a</code> ~ <code class=\"language-text\">z</code>(97 ~ 122), 그리고 앞서 설명한 <code class=\"language-text\">\\d</code>(숫자) 그룹에 해당하는 녀석들이다.</p>\n<p>즉, 저 아스키 코드 범위에 포함되지 않는 한글, 키릴 문자 등은 Word가 아니므로 <code class=\"language-text\">\\w</code> 키워드로는 잡아낼 수 없다는 점을 주의해야한다. 이 녀석도 <code class=\"language-text\">d</code> 클래스와 마찬가지로 소문자인 <code class=\"language-text\">\\w</code>는 Word인 문자를 의미하고, 대문자인 <code class=\"language-text\">\\W</code>는 Word가 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Phone(전화): 010-0000-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// :과 -, 그리고 한글은 Word에 포함되지 않으므로 영어와 숫자만 매칭된다 </span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"P\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"code-classlanguage-textscode-code-classlanguage-textscode-클래스\" style=\"position:relative;\"><code class=\"language-text\">\\s</code>, <code class=\"language-text\">\\S</code> 클래스<a href=\"#code-classlanguage-textscode-code-classlanguage-textscode-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"code classlanguage textscode code classlanguage textscode 클래스 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">s</code> 키워드는 Space라는 의미이며, 말 그대로 공백 문자를 의미한다. <code class=\"language-text\">s</code> 키워드도 다른 녀석들과 마찬가지로 소문자인 <code class=\"language-text\">\\s</code>는 공백인 문자, 대문자인 <code class=\"language-text\">\\S</code>는 공백이 아닌 문자를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Hi, my name is Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\s</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 위 문자열에 존재하는 4개의 공백이 매칭된다</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"문자가-아닌-경계를-잡아내는-앵커\" style=\"position:relative;\">문자가 아닌 경계를 잡아내는 앵커<a href=\"#%EB%AC%B8%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B2%BD%EA%B3%84%EB%A5%BC-%EC%9E%A1%EC%95%84%EB%82%B4%EB%8A%94-%EC%95%B5%EC%BB%A4\" aria-label=\"문자가 아닌 경계를 잡아내는 앵커 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>앞서 우리가 살펴보았던 키워드들은 모두 하나의 문자를 의미하는 키워드들이었지만, 정규식은 특정 문자가 아닌, 문자와 문자 간의 경계를 매칭할 수 있는 기능 또한 제공한다.</p>\n<p>이렇게 경계를 잡아내는 키워드들을 “앵커”라고 부른다. 앵커는 단지 경계만을 의미하기 때문에 보통 단독으로 쓰이기 보다는 캐릭터 클래스와 함께 조합하여 특정 경계 뒤나 앞에 위치하는 문자를 잡아내는 방식으로 사용된다.</p>\n<p>앵커는 말 그대로 “경계” 그 자체를 잡아내는 것이기 때문에 앵커만 단독으로 사용하게 된다면 매칭 결과로 길이가 <code class=\"language-text\">0</code>인 문자열이 반환된다.</p>\n<h4 id=\"code-classlanguage-textcode-code-classlanguage-textcode-앵커\" style=\"position:relative;\"><code class=\"language-text\">^</code>, <code class=\"language-text\">$</code> 앵커<a href=\"#code-classlanguage-textcode-code-classlanguage-textcode-%EC%95%B5%EC%BB%A4\" aria-label=\"code classlanguage textcode code classlanguage textcode 앵커 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">^</code> 앵커는 문자열이 시작하는 경계, <code class=\"language-text\">$</code>는 문자열이 끝나는 경계를 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ^(문자열 시작 경계) 바로 뒤에 위치한 문자만 매칭해라</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// $(문자열 끝 경계) 바로 앞에 위치한 문자만 매칭해라</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>당연한 이야기겠지만 문자열의 시작 경계인 <code class=\"language-text\">^</code> 앞에 위치하는 문자나, 문자열의 끝 경계인 <code class=\"language-text\">$</code> 뒤에 위치하는 문자라는 것은 존재할 수 없기 때문에 <code class=\"language-text\">.^</code>이나 <code class=\"language-text\">$.</code>과 같은 표현식은 아무것도 매칭할 수가 없다.</p>\n<h4 id=\"code-classlanguage-textbcode-code-classlanguage-textbcode-앵커\" style=\"position:relative;\"><code class=\"language-text\">\\b</code>, <code class=\"language-text\">\\B</code> 앵커<a href=\"#code-classlanguage-textbcode-code-classlanguage-textbcode-%EC%95%B5%EC%BB%A4\" aria-label=\"code classlanguage textbcode code classlanguage textbcode 앵커 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">b</code> 키워드는 Boundary를 의미하며, 이 바운더리라는 녀석은 Word 그룹으로 이루어진 단어 간의 모든 경계를 의미한다. 즉, 쉽게 말하자면 문자열의 시작과 끝 경계를 의미하는 <code class=\"language-text\">^</code>이나 <code class=\"language-text\">$</code> 앵커의 상위호환이라고 볼 수 있다.</p>\n<p>이 앵커를 사용할 때 주의해야할 점은 “Word 그룹으로 이루어진 단어”이기 때문에 <code class=\"language-text\">\\w</code> 그룹에 포함되는 영어나 숫자에만 한정되는 이야기라는 것이다.</p>\n<p>문자열의 시작과 끝이라는 명확한 정의와는 다르게 막연하게 단어 간의 경계라고만 이야기하면 조금 이해가 안될 수도 있는데, 직접 예시를 보면 생각보다 그렇게 어렵지 않다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 예시에서 필자는 <code class=\"language-text\">\\b</code> 키워드를 사용하여 <code class=\"language-text\">abc def</code>라는 문자열 내의 모든 단어 경계를 잡아냈다. 그리고 그 결과물을 보면 모두 길이가 <code class=\"language-text\">0</code>인 문자열이 나온 것을 알 수 있다. 앞서 이야기했듯이 경계라는 것은 어떤 문자가 아니기 때문에 길이가 없다고 보는 것이다.</p>\n<p>방금 필자가 예시로 사용한 <code class=\"language-text\">abc def</code>라는 문자열 내의 단어들 간의 경계는 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVR42l2STU/bQBCG+cP0wC0SIHEoKkINCIEg6qlqqoo4uXDhBodElIiI8Bc4cIjrxHYcf+56H2btJKS80uyu57HfGY+9hSiYpcy8BG8Sk8aFTWFMtRFHBaGfMQ+yNVvJMpsP/ZRkUbMtu+SpJgpzFvOcoig/GeZM3RhfCtrzptJEVY3UbMPQqshLTFm7lEphJKqz5LQqURK2iJHFMqN1zXXNV1obqlwLtKYSYYj2PHlIoSWnpGvLjeVipF0XPZvZamv+Ybh8NZUW/HscMh0OGToOb4MB8/GY17t7ijCiFP7WH/DY6eDKPYuXF0a9Ln+dHiZbzla6rwwrz0Lz1HG42N3lx8EBPw8PcU6aPF93IIoJJh7d702u9ve53Nvj5vyCr1+26f9qyzCzDUM7h2W7vbMzvu3scN1sitkJf46PGUlH5DmhjOD30RFtidNGg367zW2rhfvwUPH/DFfKZHZZEJD6PrFEKtfBZLL+5NF0WnMJuxPHmCT5+CWAd1F4UjIJMUWSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries\" title=\"\" src=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png\" srcset=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/69538/boundaries.png 160w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/72799/boundaries.png 320w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png 640w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d9199/boundaries.png 960w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png 1130w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>복잡하게 생각할 것 없이 각 단어의 경계가 어디인지 생각해보면 된다</small>\n</center>\n<p>이에 반해 대문자인 <code class=\"language-text\">\\B</code> 키워드는 단어 간의 경계가 아닌 부분을 잡아낸다. 쉽게 이야기하면 단어가 끝나지 않는 경계 부분을 잡아낸다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\B</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이번에도 이전과 같이 4개의 경계가 뽑혀져 나왔지만 이번에는 이 경계들의 의미하는 바가 전혀 다르다. 이번에 뽑혀져 나온 경계는 “단어가 끝나지 않은 부분의 경계”이기 때문이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMklEQVR42m2S208TURDG96/knQfriwkQCbEl4QHCTYWIwUQESV8AjZBwMUYNofhgBRoCGKFSWygUaekFCnS3ezv9OdsCyUYm2d05+818852Z0RBTbo3c32tKZzq5k2sKZxX0is19Zug2F0WDy/Mq5wUD/cpCqdodrnmvmpw9sFyqcnlhUhLfrDp+ppsc/doim7miKMXPPBF5A9dRfkLPHFvdAZbp1ovcZ54ay2wUcyTetpQP124zPULbdv8nvHVuvq6r6vgtoSM5SjClGsRaTQ6u62DJFb0AJb5p2KJWAl3Xr07Ojvz3FCrlijoH2/S3RrNSKUj+wdj7TTLyDZVKcvVzDzeZRCUS2Pl8Q025DIKdrm9w+iMGhweY8f36s7m4yH4k4vUDrbi2xvL4G+JLn3jW3sH04CCl7xtEp6ZZHhvDOT5uqCsU2F+YJ/ggwMb7WdZnpvk1v0js3Qc6mpvZmZuTXllo6dVVeltaGHjcznhPD+G+Pp53PGGit5f01y9U0+k6YV5u8ioUItw/wItgJ6GHAUZCncwMDRMMBMisrIBpon2emOBRUxOjwSBvu7t53dXFwssRRiU5Gg5jHx3VCS+EeLi1ladtbUz199MpJJHJSRIfl5gdGkLt7ODoOlo1l+Nwa4vLgwOy29skolFq2Swnu7ukNjdlk42bvXI4jcc5lBg7k+E4FiMrJIYUKku/LeGp9/Bub2XatVIJVSziVir+lcG/QkqKKBmWkkHVHP+U/wHruB77k5EMYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries2\" title=\"\" src=\"/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png\" srcset=\"/static/97a4fb713d83f95c04382b7fb6b20106/69538/boundaries2.png 160w,\n/static/97a4fb713d83f95c04382b7fb6b20106/72799/boundaries2.png 320w,\n/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png 640w,\n/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png 868w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>단어가 끝나지 않은 부분의 경계</small>\n</center>\n<p>즉, <code class=\"language-text\">b</code> 키워드는 다른 키워드들과 다르게 어떤 하나의 문자를 매칭하는 것이 아니라 경계를 잡아내는 것이기 때문에, 이 특징만 잘 기억하고 있으면 은근히 여기저기 잘 써먹을 수 있다.</p>\n<h3 id=\"정규식의-옵션-기능-플래그\" style=\"position:relative;\">정규식의 옵션 기능, 플래그<a href=\"#%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%98-%EC%98%B5%EC%85%98-%EA%B8%B0%EB%8A%A5-%ED%94%8C%EB%9E%98%EA%B7%B8\" aria-label=\"정규식의 옵션 기능 플래그 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>정규식을 보다보면 종종 정규식의 맨 뒤에 <code class=\"language-text\">/정규식/g</code>와 같이 <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">m</code> 등의 문자가 추가로 붙는 것을 발견할 수 있는데, 이 친구들은 일종의 옵션 기능 역할을 가지고 있는 “플래그”이다.</p>\n<p><code class=\"language-text\">/</code>를 사용하여 정규식을 리터럴 선언하는 하는 경우가 아니라 <code class=\"language-text\">new RegExp()</code> 생성자를 호출하여 정규식을 사용하는 경우에는 생성자 함수의 두번째 인자로 플래그를 살포시 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">정규식</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gi</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> regex2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">정규식</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'gi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 이 두 개는 같은 패턴을 가진 정규식이다</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">.</span>flags <span class=\"token operator\">===</span> regex2<span class=\"token punctuation\">.</span>flags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>정규식은 <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">m</code>, <code class=\"language-text\">s</code>, <code class=\"language-text\">u</code>, <code class=\"language-text\">y</code> 총 6개의 플래그를 제공하고 있지만, 이 포스팅에서는 이 중 가장 많이 사용되는 <code class=\"language-text\">g</code>와 <code class=\"language-text\">i</code>, 그리고 <code class=\"language-text\">m</code> 플래그에 대해서만 간단하게 설명할 예정이니, 나머지 플래그가 궁금하다면 구글링을 해보도록 하자.</p>\n<h4 id=\"code-classlanguage-textgcode-플래그\" style=\"position:relative;\"><code class=\"language-text\">g</code> 플래그<a href=\"#code-classlanguage-textgcode-%ED%94%8C%EB%9E%98%EA%B7%B8\" aria-label=\"code classlanguage textgcode 플래그 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">g</code> 플래그는 <code class=\"language-text\">global</code>의 약자로, 이 플래그를 가지고 있는 정규식은 주어진 문자열 내에서 패턴과 매칭되는 모든 부분을 찾아낸다. 만약 <code class=\"language-text\">g</code> 플래그가 없다면 정규식은 문자열 내에서 가장 처음 매칭되는 한 부분만을 찾아낼 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"w\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>기본적으로 글로벌 매칭을 의미하는 플래그인 <code class=\"language-text\">g</code> 플래그가 없다면 정규식은 단 하나의 문자만을 매칭하지만, <code class=\"language-text\">g</code> 플래그를 사용하면 문자열 내에서 해당 정규식에 매칭되는 모든 문자를 찾아낸다. 글로벌 플래그에 관한 것은 필자가 굳이 설명하지 않아도 콘솔에서 몇 번 해보다보면 감이 올테니 자세히 설명하지는 않겠다.</p>\n<h4 id=\"code-classlanguage-texticode-플래그\" style=\"position:relative;\"><code class=\"language-text\">i</code> 플래그<a href=\"#code-classlanguage-texticode-%ED%94%8C%EB%9E%98%EA%B7%B8\" aria-label=\"code classlanguage texticode 플래그 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">i</code> 플래그는 <code class=\"language-text\">ignoreCase</code>의 약자로, 정규식 내에 사용된 문자열의 대소문자를 구분하지 않고 모두 매칭하겠다는 의미를 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">abcd</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abcd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABCD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>일반적으로 유저의 입력을 통해 생성된 문자열은 <code class=\"language-text\">My name is Evan</code>, <code class=\"language-text\">my name is evan</code> 등과 같이 사람에 따라 대소문자의 사용 방법이 조금씩 다를 수 있지만, <code class=\"language-text\">i</code> 플래그를 사용하면 이런 걱정없이 맘 편하게 원하는 문자열을 찾아낼 수 있다.</p>\n<h4 id=\"code-classlanguage-textmcode-플래그\" style=\"position:relative;\"><code class=\"language-text\">m</code> 플래그<a href=\"#code-classlanguage-textmcode-%ED%94%8C%EB%9E%98%EA%B7%B8\" aria-label=\"code classlanguage textmcode 플래그 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">m</code> 플래그는 <code class=\"language-text\">multiline</code>의 약자로, 말 그대로 여러 라인으로 구성된 문자열을 검사하겠다는 것을 의미한다. 하지만 한 가지 이상한 점은 딱히 이 플래그가 없어도 정규식은 여러 줄로 된 문자열을 잘 매칭한다는 것이다.</p>\n<p>한번 템플릿 스트링을 사용하여 여러 라인으로 구성된 문자열을 만들어보고 정규식을 사용하여 간단한 패턴을 잡아내보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">abcd\\nefgh\\nijkl</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\nstring<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cd\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"kl\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>사실 정규식은 그냥 주어진 문자열 중에서 매칭되는 패턴을 찾아내는 녀석이기 때문에 굳이 <code class=\"language-text\">m</code> 플래그를 사용하지 않아도 여러 줄의 문자열도 잘 매칭한다.</p>\n<p>그렇다면 굳이 <code class=\"language-text\">m</code> 플래그가 필요한 이유가 무엇일까? 그 이유는 정규식이 바로 새로운 라인을 표현하는 <code class=\"language-text\">\\n</code> 이스케이프를 어떻게 바라보게 할 지 정할 수 있기 때문이다.</p>\n<p>이번에는 방금 작성했던 정규식에 문자열의 시작을 의미하는 <code class=\"language-text\">^</code> 앵커를 추가해서 단순히 <code class=\"language-text\">\\w</code> 그룹의 두 글자가 아닌 문자열의 시작 부분의 두 글자를 잡아보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>단순히 <code class=\"language-text\">\\w</code> 그룹의 두 글자를 잡아낼 때와는 다르게 이번에는 <code class=\"language-text\">ab</code>만 뽑혀나오는 것을 확인할 수 있는데, 이는 문자열 내에서 <code class=\"language-text\">\\n</code> 이스케이프로 라인이 나누어져있더라도 정규식에게는 그저 하나의 문자열이라고 인식되기 때문이다.</p>\n<p>기본적으로 정규식은 하나의 문자열 객체를 기준으로 패턴을 매칭하기 때문에 전체 문자열의 첫 글자인 <code class=\"language-text\">a</code> 앞에 있는 경계만 문자열의 시작(<code class=\"language-text\">^</code>)이라고 판단한 것이다.</p>\n<p>바로 이런 상황일 때 <code class=\"language-text\">m</code> 플래그를 사용하면 이전과는 다른 결과를 만들어낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>쨘, 이번에는 하나의 문자열이 아니라 <code class=\"language-text\">\\n</code> 이스케이프를 기준으로 각각 별도의 문자열로 평가되어 정규식이 적용되는 것을 볼 수 있다. 즉, <code class=\"language-text\">m</code> 플래그는 단순히 여러 줄의 문자열을 검사한다는 의미가 아니라 <code class=\"language-text\">\\n</code> 이스케이프 문자를 기준으로 라인을 나누어 각각의 문자열을 하나의 검사 대상으로 보겠다는 의미인 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42m1Ta08aQRTdf84fwU8mtSQWaCMULfUBRogCAkKoqAhqdBeFfTA7uzszcHpnfETSTkLYnTn3zDnn3rUSKRHHMYRSUPRLkgRRFEGIBMvlEp+XovfkDaPx+lwIgTiJzZ6ut17abbgnJ7g+O0OTngs7Oziu1hCGkblIr9VqZf7jMMRLpwOvXsdVs4n2xQW+5/PodC4Iz40Qy97dRdBoYFCpoFQuI5/PonrYwPXAgZRindB14RSLBt/e30eRajOZr6hVu7j5Q3glYAmyzBiD7/vgnGOxWIBHHEEQGDuflyRLnPY4KY0Iqx3oGq2MsfDV8tHREba2tlCkm0ulEj1/wehmgkXATC5rCumS+WBgLE/Oz/GjUEA2m8XTo01CXvFWOp3G6empIUulUjg4+I3acRtXA/sfy9F0CodiiUYj/KSsNb5c/oX6cZci0ngi9DzPME8mE3S7Xbju3NjWEfzPckjx6MkY396i1+sZbEgRaIVKSVgVasbl5SU2NzfRarWwt7dHpK4BfhC+KUxozx0Owe/vcU5NOSO8jiyk/BidGcu5XA79fh8bGxsoUCZ6bB6oQDfqnfDDMqmeUjyc3BxubyPzLWtqHNs2AnSTrJgG+O5ubCzqLoXU4YT25FJ9EL2vJb0LPdTPU0jqrqCMtV0dgcbrc0u6HnhMXwCXCJgA8wjoh5BzD0up1iyv9Kj4NGJMIY4UXD+GZPSVzTwIL4CKKcPYdvA4DWHfeXh0GJyHOfjTM4LhmIrDNctqNgMnwvHEx8xmGI3niGYLsNsHzPsj8FmAv+izel8PUmvHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"multiline\" title=\"\" src=\"/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png\" srcset=\"/static/69dd01cadc54feeecd2154af66259484/69538/multiline.png 160w,\n/static/69dd01cadc54feeecd2154af66259484/72799/multiline.png 320w,\n/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png 640w,\n/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png 873w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>m 플래그가 있냐 없냐에 따라 각각의 라인을 통합하여<br>하나의 문자열로 볼 것인지, 각각의 문자열로 볼 것인지가 결정된다.</small>\n</center>\n<p><code class=\"language-text\">m</code> 플래그 같은 경우는 짧은 문자열을 다루는 상황보다는 개행이 포함된 긴 문자열을 다루는 상황일 때 사용하게 되는데, 필자 또한 비즈니스 내에서 유저의 간단한 입력을 검사하는 경우보다는 행이 변경될 때마다 가장 첫 글자를 대문자로 적어야하는 영문법을 검사한다던가, 비압축 파일을 파싱한다던가 하는 경우에 주로 사용했었던 것 같다.</p>\n<h3 id=\"패턴이-몇-번이나-나왔는지-찾아주는-수량자\" style=\"position:relative;\">패턴이 몇 번이나 나왔는지 찾아주는 수량자<a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%B4-%EB%AA%87-%EB%B2%88%EC%9D%B4%EB%82%98-%EB%82%98%EC%99%94%EB%8A%94%EC%A7%80-%EC%B0%BE%EC%95%84%EC%A3%BC%EB%8A%94-%EC%88%98%EB%9F%89%EC%9E%90\" aria-label=\"패턴이 몇 번이나 나왔는지 찾아주는 수량자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>방금 전 예시에서 필자는 <code class=\"language-text\">\\w</code> 그룹의 두 글자를 찾아내기 위해 <code class=\"language-text\">{2}</code>라는 표현을 사용했었다. 이 표현은 바로 앞에 오는 표현의 반복 횟수를 의미하는데, <code class=\"language-text\">{0,2}</code>처럼 최소, 최대 반복 횟수를 사용하여 반복되는 범위를 표현해줄 수도 있다.</p>\n<p>이렇게 앞에 위치한 패턴이 몇 번이나 일치하는지를 잡아낼 수 있는 표현을 수량자라고 한다.</p>\n<h4 id=\"반복되는-횟수를-명시해보자\" style=\"position:relative;\">반복되는 횟수를 명시해보자<a href=\"#%EB%B0%98%EB%B3%B5%EB%90%98%EB%8A%94-%ED%9A%9F%EC%88%98%EB%A5%BC-%EB%AA%85%EC%8B%9C%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"반복되는 횟수를 명시해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aaaabbbcc'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{3}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abb\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bcc\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 <code class=\"language-text\">\\w{3}</code>이라는 표현은 단순히 Word 그룹이 3번 반복되는 패턴을 찾으라는 표현이기 때문에, 정규식은 문자열 전체에서 Word 그룹이 3번 반복되고 있는 케이스를 뽑아내고 있는 것을 볼 수 있다.</p>\n<p>사실 반복이라는 패턴은 굉장히 여러 곳에 응용될 수 있는데, 그 중 대표적인 예가 바로 전화번호나 주민등록번호처럼 같은 그룹의 문자가 일정 횟수 이상 반복되는 것이 정해져있는 정보이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-0101-0101'</span>\n<span class=\"token string\">'02-0101-0101'</span>\n<span class=\"token string\">'031-010-0101'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>대한민국의 전화번호는 대부분 이 3가지 패턴 안에서 결정되는데, 휴대폰 번호같은 경우 반드시 맨 앞에는 3자리의 통신사 식별번호가 위치하고 그 뒤에는 4자리의 전화번호 필드가 두 번 반복되는 형태를 가지며, 그 외 유선전화는 2-3자리의 지역번호 뒤로 3-4 자리의 필드와 4자리의 필드가 반복되는 형태를 가진다.</p>\n<p>이런 경우 수량자를 사용하면 간단하게 원하는 패턴을 잡아낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 휴대폰 번호를 잡아내는 패턴</span>\n<span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token operator\">|</span><span class=\"token number\">1</span><span class=\"token operator\">|</span><span class=\"token number\">6</span><span class=\"token operator\">|</span><span class=\"token number\">8</span><span class=\"token operator\">|</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 패턴을 보고 나이가 어리신 분들은 “왜 <code class=\"language-text\">010</code>으로 안 잡고 굳이 저런 숫자들을 넣어주는거지?”라는 의문을 가지실 수도 있는데…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABroz5g9t7JJoTVAqf/8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDABESIv/aAAgBAQABBQK1erTcUGunOmXlVSHFD6M1eYAUf//EABcRAQADAAAAAAAAAAAAAAAAABABETH/2gAIAQMBAT8BonD/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREx/9oACAECAQE/AbI0/8QAHBAAAgICAwAAAAAAAAAAAAAAAAEQESFRAhLB/9oACAEBAAY/AlsxFbFhv0vi7UdWUlSP/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFBYXGh/9oACAEBAAE/IcEGn2LnnYyoRs1x7iE2NhAW4RleJwDvG4QEHCf/2gAMAwEAAgADAAAAEOMIAP/EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAEDAQE/EDSVgv/EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAECAQE/EBaFov/EAB0QAQACAgMBAQAAAAAAAAAAAAEAESFBMVFhcaH/2gAIAQEAAT8QAt9zTgOuq91La8qBkjlxMMA2jpLOI6I3Xu/IRTgJARcVCEwb1ZUHefz5DLBQNBP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"old phone\" title=\"\" src=\"/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg\" srcset=\"/static/b89f9481679525d129c49f370f62a88d/0913d/old_phone.jpg 160w,\n/static/b89f9481679525d129c49f370f62a88d/cb69c/old_phone.jpg 320w,\n/static/b89f9481679525d129c49f370f62a88d/41099/old_phone.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>한국인의 통신채널, 스피드 011...</small>\n</center>\n<p>사실 휴대폰 통신사 식별번호는 <code class=\"language-text\">010</code>만 있는 것이 아니다. 예전에는 <code class=\"language-text\">011</code>, <code class=\"language-text\">016</code>, <code class=\"language-text\">018</code> 등 다양한 통신사 식별번호가 있었다가 나중에 <code class=\"language-text\">010</code>으로 통합된 것이라 아직도 이런 구 식별번호를 사용하시는 분들이 있을 수도 있기 때문에 이런 로직을 작성할 때는 주의하도록 하자. <small><del>(이제 이거 알면 빼박 늙었다는 증거…)</del></small></p>\n<h4 id=\"원하는-패턴이-한번-이상-출현했는지-알아보자\" style=\"position:relative;\">원하는 패턴이 한번 이상 출현했는지 알아보자<a href=\"#%EC%9B%90%ED%95%98%EB%8A%94-%ED%8C%A8%ED%84%B4%EC%9D%B4-%ED%95%9C%EB%B2%88-%EC%9D%B4%EC%83%81-%EC%B6%9C%ED%98%84%ED%96%88%EB%8A%94%EC%A7%80-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" aria-label=\"원하는 패턴이 한번 이상 출현했는지 알아보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이렇게 정규식은 간단하게 반복되는 횟수를 명시하여 수량자 앞에 위치한 패턴이 얼마나 반복되었는지를 표현할 수 있지만, 이 수량자는 너무 명확한 표현이라서 “있거나 없을 수도 있다”라던가 “n개 이상 등장”과 같은 추상적인 패턴을 표현하기에는 적합하지않다.</p>\n<p>그렇기 때문에 정규식은 n개 이상과 같이 조금 더 추상적인 패턴의 등장 횟수를 매칭할 수 있는 수량자들 또한 제공해주고 있다.</p>\n<h5 id=\"code-classlanguage-textcode-수량자\" style=\"position:relative;\"><code class=\"language-text\">*</code> 수량자<a href=\"#code-classlanguage-textcode-%EC%88%98%EB%9F%89%EC%9E%90\" aria-label=\"code classlanguage textcode 수량자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p><code class=\"language-text\">*</code> 수량자는 이전에 등장한 패턴이 0회 이상 등장하는지 여부를 나타내는 수량자이다. 0회 이상이란 표현이 조금 애매할 수 있는데, 조금 더 풀어서 이야기하면 이 수량자 앞에 위치한 패턴은 등장하지 않을 수도 있고 여러 번 반복될 수도 있다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b 앞에 위치한 a는</span>\n<span class=\"token comment\">// 없어도 되고 여러 번 나와도 다 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a*b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">*</code> 수량자 앞에 위치한 패턴은 아무리 많이 등장해도 전부 잡히기 때문에 <code class=\"language-text\">a</code>의 갯수가 아무리 늘어난다하더라도 모두 잡아낼 수 있게된다.</p>\n<h5 id=\"code-classlanguage-textcode-수량자-1\" style=\"position:relative;\"><code class=\"language-text\">?</code> 수량자<a href=\"#code-classlanguage-textcode-%EC%88%98%EB%9F%89%EC%9E%90-1\" aria-label=\"code classlanguage textcode 수량자 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p><code class=\"language-text\">?</code> 수량자는 이전에 등장한 패턴이 0 또는 1회 등장하는지 여부를 나타내는 수량자이다. <code class=\"language-text\">*</code> 수량자와는 다르게, <code class=\"language-text\">?</code> 수량자 앞에 위치한 패턴은 아무리 많이 등장하더라도 단 한 개만 잡아낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b 앞에 위치한 a는</span>\n<span class=\"token comment\">// 없어도 되고 여러 번 나와도 1개만 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a?b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"code-classlanguage-textcode-수량자-2\" style=\"position:relative;\"><code class=\"language-text\">+</code> 수량자<a href=\"#code-classlanguage-textcode-%EC%88%98%EB%9F%89%EC%9E%90-2\" aria-label=\"code classlanguage textcode 수량자 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p><code class=\"language-text\">+</code> 수량자는 이전에 등장한 패턴이 반드시 한 번 이상 등장해야한다는 것을 의미한다. 즉 <code class=\"language-text\">+</code> 수량자 앞에 위치한 패턴이 등장하지 않는다면 매칭에 실패하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// b앞에 위치한 a는</span>\n<span class=\"token comment\">// 반드시 존재해야하고 여러 번 나와도 다 잡아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a+b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">+</code> 수량자의 의미를 조금 더 쉽게 설명해보자면 “몇 번이든 좋으니까 있기만 하면 된다”라는 의미이기 때문에 문자열 중에서 반드시 존재해야하는 문자를 잡아낼 때 유용하게 사용할 수 있다.</p>\n<h2 id=\"알면-더-효율적인-기능들\" style=\"position:relative;\">알면 더 효율적인 기능들<a href=\"#%EC%95%8C%EB%A9%B4-%EB%8D%94-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EA%B8%B0%EB%8A%A5%EB%93%A4\" aria-label=\"알면 더 효율적인 기능들 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>지금까지 정규식이 제공하는 기본적인 기능인 캐릭터 클래스, 앵커, 플래그 그리고 수량자에 대해 알아보았다. 사실 이 정도만 알고 있어도 일반적인 비즈니스 상황에서 정규식을 사용하는데에는 큰 무리가 없지만, 간혹 이 기능만으로는 처리가 귀찮은 상황들이 터지게 된다.</p>\n<p>지금부터는 조금 더 편하게 정규식을 사용하기 위해서 알고 있으면 좋은 기능들에 대한 이야기를 해보도록 하겠다.</p>\n<h3 id=\"패턴을-기억하는-캡처링\" style=\"position:relative;\">패턴을 기억하는 캡처링<a href=\"#%ED%8C%A8%ED%84%B4%EC%9D%84-%EA%B8%B0%EC%96%B5%ED%95%98%EB%8A%94-%EC%BA%A1%EC%B2%98%EB%A7%81\" aria-label=\"패턴을 기억하는 캡처링 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>정규식은 단순히 문자열 내에서 패턴을 매칭하기만 하는 것이 아니라, 매칭된 패턴을 기억하고 있을 수 있는 기능도 제공한다. 이렇게 패턴을 기억할 수 있는 기능은 문자열을 치환하는 작업을 진행할 때 변경되면 안 되는 부분과 변경되어야 하는 부분을 구분하여 원하는 부분만 바꿔치거나, 중복 입력된 부분을 찾는 등의 작업에서 꽤나 유용하게 사용된다.</p>\n<p>예를 들어 <code class=\"language-text\">$10000</code>과 같이 달러 단위를 의미하는 문자열이 있다고 생각해보자. 이 문자열을 잡아낼 수 있는 패턴은 무엇일까?</p>\n<p>길게 생각할 것도 없이 달러 단위를 의미하는 문자열은 <code class=\"language-text\">$</code> 뒤에 반드시 한 개 이상의 숫자가 위치하여야 정보성이 있다고 판단할 수 있기 때문에 간단하게 <code class=\"language-text\">$</code>문자와 그 뒤에 오는 1개 이상의 숫자를 잡아낼 수 있는 표현을 사용하면 우리는 원하는 패턴을 잡아낼 수 있다. <small>(그냥 <code class=\"language-text\">$</code>는 문자열의 끝을 나타내는 앵커이기 때문에 반드시 앞에 <code class=\"language-text\">\\</code>를 붙혀 이스케이핑해주는 것을 잊지말자)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$\\d+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"$10000\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>자, 이렇게 정규식을 통해 잡아낸 <code class=\"language-text\">$10000</code>라는 문자열을 <code class=\"language-text\">10000 달러</code>라는 문자열로 변경하고 싶다면 어떻게 할 수 있을까?</p>\n<p>간단하게 생각하면 <code class=\"language-text\">String.prototype.replace</code> 메소드를 사용하면 될 것 같지만, 위 정규식을 사용하여 잡아낸 패턴은 <code class=\"language-text\">$10000</code> 전체이기 때문에 <code class=\"language-text\">10000</code>이라는 문자만 그대로 유지하며 <code class=\"language-text\">$</code> 부분만 치환하는 것은 불가능하다.</p>\n<p>즉, 이 문제를 해결하기 위해서는 패턴을 매칭된 부분 중 특정 부분을 기억하는 기능이 필요한 것이다. 바로 이런 상황일 때 캡쳐링을 사용하면 문제를 쉽게 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 기억하고자 하는 부분을 괄호로 감싸자!</span>\n<span class=\"token operator\">/</span>\\<span class=\"token function\">$</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 표현이 이전 표현과 다른 점은 단지 <code class=\"language-text\">\\d+</code> 부분을 괄호로 감싼 것 뿐이지만, 이렇게 특정 표현을 괄호로 감싸게 되면 정규식은 이 부분을 캡쳐링하게 된다.</p>\n<p><code class=\"language-text\">String.prototype.replace</code> 메소드의 두 번째 인자는 치환될 문자열을 의미하는데, 이렇게 캡쳐링된 패턴은 치환될 문자열 내에서 <code class=\"language-text\">$n</code>이라는 특수한 표현으로 다시 불러올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$(\\d+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$1 달러'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"10000 달러\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">$1</code>은 단지 정규식 패턴 내에서 캡처링된 첫 번째 그룹을 의미하는 것이기 때문에 캡처링된 패턴이 늘어나면 <code class=\"language-text\">$2</code>나 <code class=\"language-text\">$3</code>처럼 두 번째, 세 번째 패턴을 계속 불러올 수도 있다.</p>\n<p>그리고 이렇게 특정한 패턴을 캡처하여 기억할 수 있는 기능은 반복되는 문자를 찾아내는 데에도 유용하게 사용될 수 있는데,  반복되는 문자라는 것 자체가 이전에 나타난 문자가 그 다음에 연속해서 다시 나타나는 것을 의미하기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이 정규식에서 필자는 <code class=\"language-text\">(\\w)</code> 표현을 사용하여 문자열 내의 Word 그룹에 속한 글자를 캡처링하였고, 이후 <code class=\"language-text\">\\1</code>이라는 표현을 사용하여 캡처링한 패턴을 다시 불러왔다.</p>\n<p>즉, <code class=\"language-text\">\\w</code>에 매칭된 패턴을 <code class=\"language-text\">\\1</code>을 통해 불러옴으로써 반복이라는 패턴을 표현할 수 있는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aabccdeef'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ee\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이렇게 문자열 내에 동일한 문자가 반복되는 패턴을 찾아내는 표현은 <code class=\"language-text\">(.)\\1{2}</code>와 같이 수량자와 조합되어 “동일한 글자가 3번 이상 반복되면 안 됨”과 같은 비밀번호 검증 로직에 유용하게 사용되기도 한다.</p>\n<h3 id=\"greedy-vs-lazy\" style=\"position:relative;\">Greedy vs Lazy<a href=\"#greedy-vs-lazy\" aria-label=\"greedy vs lazy permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>앞서 우리는 1개 이상 존재하는 패턴을 매칭하는 <code class=\"language-text\">+</code> 수량자와 0개 이상 존재하는 패턴을 매칭하는 <code class=\"language-text\">*</code> 수량자에 대해 알아보았었다. 이렇게 n개 이상이라는 수량자를 사용하게 되면 패턴을 매칭할 때 약간은 애매한 부분이 생기게 되는데, 바로 이런 케이스이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// &lt;, >으로 감싸진 모든 문자열을 찾아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 정규식은 단지 <code class=\"language-text\">&lt;</code>, <code class=\"language-text\">></code>으로 감싸진 모든 문자열을 찾으라는 표현이기 때문에 <code class=\"language-text\">&lt;</code>과 <code class=\"language-text\">></code>으로 감싸진 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code> 전체를 잡아내는 게 당연한 것이 아닌가하고 생각할 수도 있지만, 사실 <code class=\"language-text\">&lt;</code>과 <code class=\"language-text\">></code>으로 감싸진 패턴은 저 하나만 존재하는 것이 아니다.</p>\n<p>바로 <code class=\"language-text\">&lt;p></code>와 <code class=\"language-text\">&lt;/p></code>도 위 정규식이 잡아낼 수 있는 범주에 들어가는 패턴이기 때문이다. 하지만 정규식은 기본적으로 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code>와 같이 최대한 길게 매칭되는 패턴을 잡도록 세팅되어있기 때문에, 결과가 이렇게 나오는 것이다.</p>\n<p>이때 이렇게 최대한 길게 매칭되는 패턴을 잡으려는 매칭 방법을 탐욕(Greedy) 매칭이라고 한다. 말 그대로 탐욕스럽게 최대한 길게 매칭되는 부분을 먹어버리는 것이다. <small>(매 순간 항상 최적의 선택을 하는 의미의 Greedy 알고리즘이랑은 용어만 같고, 사실 상 다른 개념이다)</small></p>\n<p>그렇다면 위 패턴을 사용하여 작은 매칭 단위인 <code class=\"language-text\">&lt;p></code>와 <code class=\"language-text\">&lt;/p></code>를 잡아내고 싶다면 어떻게 하면 될까?</p>\n<blockquote>\n<p>바로 정규식을 <strong>게으르게(Lazy)</strong> 만들면 된다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// &lt;, >으로 감싸진 모든 문자열을 게으르게 찾아라!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*?></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이전 표현과 비교했을 때 달라진 부분은 “0개 이상의 패턴”을 의미하는 <code class=\"language-text\">*</code> 수량자의 뒤 쪽에 <code class=\"language-text\">?</code>를 붙혔다는 것이다. 이렇게 게으른 매칭을 사용하게 되면 정규식은 매칭할 수 있는 패턴들 중 가능한 가장 짧은 패턴들을 찾게된다. 같은 표현을 가지고 패턴을 찾으라고 일을 시켰을 때, 최대한 짧은 패턴만 찾고 일을 마치려고 하니 게으르다고 표현하는 것이다.</p>\n<p>정리하자면 <code class=\"language-text\">*</code>나 <code class=\"language-text\">+</code>과 같이 n개 이상을 나타내는 수량자는 기본적으로 매칭할 수 있는 패턴 중 가장 긴 것을 탐욕(Greedy)스럽게 매칭하고, 이 수량자 뒤 쪽에 <code class=\"language-text\">?</code>를 붙히게 되면 게으르게(Lazy) 매칭할 수 있는 패턴 중 가장 짧은 것을 매칭하게 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Greedy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+></span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// Lazy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+?></span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 Greedy, Lazy 매칭의 차이를 모르고 있다면 방금 전 예시의 <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code> 처럼 매칭할 수 있는 패턴의 종류가 여러 개인 경우 원하는 패턴을 잡아낼 수 없으니, 이 차이를 잘 기억해두도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 대학생 때 정규식을 처음 접하게 되었었는데, 당시 OBJ 파일을 <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"nofollow\">ThreeJS</a> 객체로 표현하는 일종의 파서를 만들고 있었기 때문에 정규식을 상당히 하드하게 사용해야 했었던 기억이 난다. <small>(당시 ThreeJS에서 제공하는 OBJ Loader에 버그가 있었다 😢)</small></p>\n<p>OBJ 파일은 각 버텍스의 좌표와 텍스쳐의 UV 매핑 좌표, 그리고 각 버텍스들의 방향을 나타내는 노말 등을 다음과 같이 나타내는 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"*.obj\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-*.obj line-numbers\"><code class=\"language-*.obj\"># 버텍스 좌표\nv -1.692615 -0.021714 -1.219301\nv 7.334266 -0.021714 -1.219302\nv 7.334265 0.021714 -1.219302\nv -1.692616 0.021714 -1.219301\nv -1.692616 -0.000000 -1.241016\nv 7.334265 0.000000 -1.241017\nv 7.334266 0.000000 -1.197588\nv -1.692615 -0.000000 -1.197587\n\n# 텍스처 UV 값\nvt 0.0000 0.0000\nvt 1.0000 0.0000\nvt 1.0000 1.0000\nvt 0.0000 1.0000\nvt 0.0000 0.0000\nvt 1.0000 0.0000\nvt 1.0000 1.0000\nvt 0.0000 1.0000\n\n# 버텍스의 노말 값\nvn -0.0000 -0.0000 -1.0000\nvn 0.0000 -1.0000 -0.0000\n\nusemtl Material.001\n\n# 각 페이스를 구성하는 버텍스의 인덱스들\nf 1/1/1 4/2/1 3/3/1 2/4/1\nf 8/5/2 5/6/2 6/7/2 7/8/2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 필자는 이 파일을 읽어와 앞서 설명한 정규식의 <code class=\"language-text\">m</code> 플래그를 사용하여 각각의 라인 별로 나눈 후, <code class=\"language-text\">v</code>로 시작하면 버텍스 좌표, <code class=\"language-text\">vt</code>로 시작하면 텍스쳐의 uv, <code class=\"language-text\">vn</code>으로 시작하면 버텍스의 노말값 등으로 파싱을 해야했었는데, 물론 어렵고 복잡한 과정이기는 했지만 재미있기도 했던 기억이 있다.</p>\n<p>컴퓨터가 만든 파일이라는 것이 사실은 어떤 의미를 가진 문자열의 연속이라는 사실도 새로웠지만, 정규식을 사용하여 이 문자열을 의미있는 정보로 가공할 수 있다는 게 더 재밌었다.</p>\n<p>하지만 앞서 이야기했듯이 정규식은 이런 파서를 만들 때보다 일반적인 비즈니스 로직 상에서 더 자주 사용된다. 비밀번호나 이메일 주소 등 사용자가 틀릴 가능성이 높은 입력을 검사할 때 정규식은 말 그대로 치트키처럼 사용될 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 399px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42p1T2Y7CMBDr///c8sA+8oSABnoftMmk8XpSjiJYCYjkJk0ztjMzTfqmwe96jZ/VClVdw3sPay2ccx9BRKAjKcsKTd2gbduv0XUd8jyPxElVVVDUdPctGt5SCdVlInK17OHkbn+Jec897WlqlgghINGcqUJRFDGHTUv7XBdFieyUoeQcHWQZjDHI6ETdDMMQc6YkOpRnmqaZ0DmLkXkYux6WGEigihqkszqydozv4zhGaNxy3An5CAzwVPV0JCaFbLe4yOPd8eAwEJ6FkdMpwpcF7GZzu84XhHTY1JDjkU4LSMYW2O+iyLtOnx2yEHI0dFdCtKfSAyRN59M8+ED6QuCRkAuJ+TPz1VnZmMsr4ccOL0WR/Z7XzeguhdN8ktweDnAUmvoenlV2ux2FzJPQjTD+g/wQ2B5Tf55nBk5sjTDamFvPlgpsZBUO/BbO5/8dKqG+aPu8BMVe7mvMAsqjf8of4zBFjqIV43cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"password rule\" title=\"\" src=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" srcset=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/69538/password_rule.png 160w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/72799/password_rule.png 320w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png 399w\" sizes=\"(max-width: 399px) 100vw, 399px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>물론 기본적으로 제공되는 메소드들을 잘 사용해도 검사는 할 수 있지만, 정규식으로 훨씬 간단하게 해결할 수 있다</small>\n</center>\n<p>만약 정규식을 모른다면 이메일 주소와 같은 간단한 문자열의 유효성을 검증하기 위해서 여러 개의 빌트인 메소드들을 조합하여 검사해야하기 때문에 꽤나 비효율적이다. 게다가 개인적으로는 아무리 정규식이 읽기가 어렵다지만 이렇게 복잡한 메소드들의 조합보다는 차라리 정규식이 가독성이 더 좋은 것이 아닌가하는 생각도 있다.</p>\n<p>물론 정규식은 코드처럼 라인이나 인덴트가 나누어져 있지도 않기 때문에 마치 무의미한 문자들의 나열처럼 보인다. 하지만 어차피 정규식이 제공하는 표현은 그렇게 많은 편이 아니기 때문에 조금만 사용하다보면 짧은 정규식 정도는 누구나 금방 이해할 수 있을 정도라고 생각한다.</p>\n<p>이상으로 불규칙 속에서 규칙을 찾아내자 포스팅을 마치며, 다음 포스팅에서는 필자가 지금까지 개발자로 일을 하면서 정규식을 실제로 사용했던 사례들을 토대로 정규식을 설명하는 내용을 풀어볼 예정이다.</p>","fields":{"slug":"20200724-about-regular-expression","path":"/2020/07/24/about-regular-expression/","lang":"ko"},"frontmatter":{"title":"불규칙 속에서 규칙을 찾아내는 정규 표현식","subTitle":"정규식이 패턴을 인식하는 방식","date":"Aug 10, 2020","categories":["프로그래밍","튜토리얼"],"tags":["정규식","정규표현식","Regexp","Regular Expression","캐릭터 클래스","Character Class","Anchor","앵커","캡쳐링","Capturing Group","Greedy","Lazy"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/fc5c5/thumbnail.webp 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"aa1ac68c-38b9-5f34-865d-9a03bce57122","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%95%BC%ED%81%AC-%EC%89%90%EC%9D%B4%EB%B9%99%EC%9D%98-%EC%8B%9C%EC%9E%91\">야크 쉐이빙의 시작</a></p>\n</li>\n<li>\n<p><a href=\"#gatsby%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%84%A4%EB%AA%85\">Gatsby에 대한 간단한 설명</a></p>\n<ul>\n<li><a href=\"#graphql\">GraphQL</a></li>\n<li><a href=\"#graphql%EC%9D%84-%EC%A7%81%EC%A0%91-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\">GraphQL을 직접 사용해보자</a></li>\n<li><a href=\"#%EB%8F%99%EC%A0%81-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A7%8C%EB%93%A4%EA%B8%B0\">동적 파라미터를 받는 페이지 만들기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%98%EC%99%B8%EB%A1%9C-%EA%B7%80%EC%B0%AE%EC%95%98%EB%8D%98-%EB%B6%80%EB%B6%84\">의외로 귀찮았던 부분</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%A7%81%ED%81%AC%EC%99%80%EC%9D%98-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%8B%A0%EA%B2%BD%EC%8D%A8%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4\">기존 링크와의 연결을 신경써줘야한다</a></li>\n<li><a href=\"#%EB%82%B4%EA%B0%80-%EC%A7%81%EC%A0%91-%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4\">내가 직접 다 만들어야한다</a></li>\n<li><a href=\"#cli%EC%97%90-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%83%9D%EC%84%B1-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%97%86%EB%8B%A4\">CLI에 포스팅 생성 기능이 없다</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"필자는 지난 황금 연휴 동안 기존에 Hexo를 사용하여 만들었던 블로그를 Gatsby로 마이그레이션했다. 이번 포스팅에서는 1주일 조금 넘게 마이그레이션을 진행하면서 새롭게 학습했던 것들에 대한 공유와 더불어 의외로 예상하지 못했던 이슈들에 대한 공유를 진행해볼까 한다.","html":"<p>필자는 지난 황금 연휴 동안 기존에 Hexo를 사용하여 만들었던 블로그를 Gatsby로 마이그레이션했다. 이번 포스팅에서는 1주일 조금 넘게 마이그레이션을 진행하면서 새롭게 학습했던 것들에 대한 공유와 더불어 의외로 예상하지 못했던 이슈들에 대한 공유를 진행해볼까 한다.</p>\n<!-- more -->\n<h2 id=\"야크-쉐이빙의-시작\" style=\"position:relative;\">야크 쉐이빙의 시작<a href=\"#%EC%95%BC%ED%81%AC-%EC%89%90%EC%9D%B4%EB%B9%99%EC%9D%98-%EC%8B%9C%EC%9E%91\" aria-label=\"야크 쉐이빙의 시작 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 처음부터 Hexo를 버릴 생각은 아니었다. 물론 ejs 엔진 기반의 Hexo보다 리액트 기반의 Gatsby가 편한 건 사실이지만, 마이그레이션에 리소스를 쏟는 동안 포스팅을 작성하지 못할 뿐더러 굳이 그 정도 리소스를 소비할 만큼의 불편함도 딱히 느끼지 못하고 있었기 때문이다.</p>\n<p>게다가 블로그라는 매체는 글 자체가 주요 컨텐츠이기 때문에 여러가지 다양한 기능을 굳이 블로그에 붙힐 필요도 없다고 생각했다. 만약 필요한 기능이 있더라도 대부분 다른 사람들이 플러그인으로 먼저 구현해놓았기 때문에 필자는 그냥 그걸 가져다가 쓰기만 하면서 포스팅을 집필하는 것 자체에만 집중하고 싶었다.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBQT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGvsze/N3oGsCRRtiT/xAAdEAACAQQDAAAAAAAAAAAAAAABAwACBCIxERIT/9oACAEBAAEFAuzHNHoucmWbaaQxuI1Achr/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAXEQADAQAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AWZEf//EAB8QAAIABgMBAAAAAAAAAAAAAAECABAREjFBAyEiUf/aAAgBAQAGPwIrxm1V3Hprx9kyncUJXvFJjEv/xAAcEAEAAgMAAwAAAAAAAAAAAAABABEhMWFRcZH/2gAIAQEAAT8hpvxGQAEmCtI9nqjIgq7XcC1oiq7FhLp0Z8kooPia5//aAAwDAQACAAMAAAAQK8C+/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAEQIRExgf/aAAgBAgEBPxClY6JGo0R//8QAHxABAAIBBQADAAAAAAAAAAAAAQARITFBUWFxgbHw/9oACAEBAAE/ELMBwrV/bR01+AANx2eYKCYPUFO8UtFVfMW9DWLoynxLE6jnD0zQ/cekFTISZ+M//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"why\" title=\"\" src=\"/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg\" srcset=\"/static/541b7115291302457477eabd84aa37bc/0913d/why.jpg 160w,\n/static/541b7115291302457477eabd84aa37bc/cb69c/why.jpg 320w,\n/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg 640w,\n/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>Gatsby가 편한건 알겠는데...굳이 마이그레이션까지 해야하나...?</small>\n  <br>\n  <br>\n</center>\n<p>그러나 문제는 의외의 곳에서 발생했다. 사실 필자는 지금까지 작성한 포스팅을 영어로 번역해서 다시 작성하려는 계획을 가지고 있었는데, 원래 연휴가 시작하기 전에 블로그에 i18n 세팅을 해놓은 뒤 연휴 동안 여유있게 한 두개의 포스팅을 먼저 번역하려고 했었다.</p>\n<p>물론 Hexo는 자체적으로도 i18n 설정을 제공하고 있고, 필자가 사용하고 있던 테마인 <a href=\"https://github.com/ppoffice/hexo-theme-icarus\" target=\"_blank\" rel=\"nofollow\">Icarus</a> 테마에서도 i18n 기능을 제공해주는 것으로 알고 있었기 때문에 몇 가지 설정만으로 간단하게 이 기능을 구현할 수 있을 것이라 생각했다.</p>\n<p>그리고 Hexo에서 제공하는 <a href=\"https://hexo.io/ko/docs/internationalization.html\" target=\"_blank\" rel=\"nofollow\">i18n 설정 가이드 문서</a>에도 설정 파일에 언어 종류를 추가함으로써 여러 개의 언어를 사용할 수 있는 환경을 구축할 수 있다고 이야기하고 있기 때문에 그리 큰 작업이 아닐 것이라고 예상했었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># _config.yml</span>\n\n<span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ko\n  <span class=\"token punctuation\">-</span> en <span class=\"token comment\"># 새로운 언어 추가!</span>\n\n<span class=\"token comment\"># ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 Hexo의 가이드 문서대로라면 i18n 설정을 추가하는 것은 몇 분이면 끝날 수도 있는 굉장히 간단한 일이었지만…</p>\n<center>\n  <br />\n  .<br />\n  .<br />\n  .<br />\n  .<br />\n  <br />\n</center>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">ERROR Render HTML failed: index.html\nTypeError: /Users/evan/dev/evan-blog/themes/icarus/layout/layout.ejs:2\n    1| <span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n >> 2| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">&lt;%-</span> <span class=\"token attr-name\">has_config('language')</span> <span class=\"token attr-name\">?</span> <span class=\"token attr-name\">'</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span> + get_config('language').substring(0, 2) + '<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">'</span> <span class=\"token attr-name\">:</span> <span class=\"token attr-name\">''</span> <span class=\"token attr-name\">%</span><span class=\"token punctuation\">></span></span>>\n    3| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    4|     &lt;%- partial('common/head') %>\n    5| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 378px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 91.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEVUlEQVR42gFKBLX7AKbE1M7FxtHHyNLIy9HIy9bNzcS8u1JcQYyLdK+ijKqghb+yn4a7xHCtonq0v2m50JiqgqSNY6N9gat6iwC9urzNxMXPxsfSycrRxsjSytHPxbeDejyFdD1rWzReUSp1YzWZnXCYwrSWiXd/pKmItKSqnVaBsLB7qMEAz8TEzsTFz8XG0cfG0MbP4c+1m4RLMykZBQMGAAAAAQEAAAABDQUBYVUtxZVWjqSnZa/CnqaCdba/YrfIAMzCw87Exc/ExM7FzODQtYRwOgYDBQAAACYiKGlnbIOBhnJvdDs6QQAAAkM7HpKghGWvw2G0vGisvWGsvwDNwsPPxMXKxcvc0Mech1EFAwcNDBKBfoTl4+7////+/v7////6+f2fnaMHBA1WTiueubKFrsqcus+gudAAzMLEzMDB3bmq5tB6KiQXAAAFko6V//7/8e336ufy6uj06efz6ejy////oZ6nAgAAsqBi2sGxu6Opy7SzAMzIyMWWme2jXbekRgAAAUA+Qu3p8+fk7Ojl7enk6uvn8ujj6+bi6uTi6/Tx+zs6Sk5GF/G+cMSThcinnADIw8XEnZrjs0dXSiAAAACLiI369v/X0tzCv8jw7Pfl3uHq4+jd2eK8ucL39Pyjn6kWEQvCmkHNl4LOq6IAxbu+0ca+n4ZLDwoHAAABqqWr9vH65OHo49/e9O3X++pn+/Cb7efe4dza7enzy8XMGBYee2IwtpJ5rIyGAMK4uNXJy1hSVwAAAAIABKKepPDg7evZ6+vcj9W+OHxsH4h4J+LOUencwevS6szDyhgXHkIwLLeTgLubjQDBtbfLwMNDPkIAAAMAAAFoZWrr2OHZxdDb0sXItGechTeplEXZzJva09ro1+Cfl50AAAJCNzTBooq7nIYAvrO1wLa4OTQ5AgAFBwUJFRMYpZ+k4NfX3NLV3tbY49nK5NrT39jd4dvcwby/MC0yAQAFKiQkt5uDv6KLALywrbusqCklJwAAAAYFCgIABA4PFGdhZqWcm7yxscG4usW8vbSsq4F7fiQhJgMCBggGDBMQEq+Uf8KljQCfhl2QhFtQSUgrJy8bFRsUEBUQBAkEAQMMCg4jHyMpJikqJioeGyAFBAcFBAkNCxAaFx1FQEiulYTCo4kAWFhARko+aGBlSUlRayAkdmRoaygrnDQ2TlRYenh7f3+AhYSGtLS0h4eIdnV4iYeKOTM6W1Zho46DwaGHACktJzk7NGFWXkZHUJUTFZtrbU09QZM5OmZqb5yYmqqqq4uJi729vYmHiqenqJSTlTYxOFRPW4h4dMChhAA0OxtLSTpXUFk4MThfJSlqRUtFMzlgP0Q/QEdoZWqEhIdOS1F8e35kYmZubXBUU1dFQEpDQEpxZ2y8noQAXV0/Y1tdTUZPPzpBOz9HQUFLVlJcUE9ZdHB5qamxsbC3trW8gH6HRUJLKygwR0JMV1RdXFhiVE5YmoR2qNstTgis+m0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"chit\" title=\"\" src=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" srcset=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/69538/chit.png 160w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/72799/chit.png 320w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png 378w\" sizes=\"(max-width: 378px) 100vw, 378px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이건 또 뭐임...?</small>\n</center>\n<p>마치 <code class=\"language-text\">_config.yml</code> 파일에 코드 한 줄 추가하면 해피엔딩일 것처럼 설명해놓았던 Hexo의 문서와 다르게 역시 현실은 녹록치 않았다.</p>\n<p>사실 이 에러가 발생하는 이유 자체는 간단명료하다. Hexo의 Config 파서는 한 프로퍼티에 여러 개의 값이 설정되는 경우 이 값들을 배열로 파싱해서 반환하는데, Icarus 테마는 <code class=\"language-text\">language</code> 프로퍼티가 반드시 String 타입으로 들어올 것이라고 가정하고 <code class=\"language-text\">substring</code> 메소드를 사용하고 있기 때문에 이런 에러가 발생하는 것이다.</p>\n<p>이 상황 속에서 필자가 선택할 수 있는 옵션은 대략 4가지 정도였다.</p>\n<hr>\n<ol>\n<li>Icarus 테마를 직접 고친다.</li>\n<li>i18n을 잘 지원하는 다른 Hexo 테마를 사용한다.</li>\n<li>직접 Hexo 테마를 만든다.</li>\n<li>그냥 Hexo를 버리고 자유로운 Gatsby로 갈아탄다.</li>\n</ol>\n<hr>\n<p>Hexo의 테마는 npm이나 yarn과 같은 패키지 관리자를 통해 설치하는 것이 아니라 직접 테마를 다운로드 받아 소스에 포함시키는 방식으로 적용되므로 1번 옵션과 같이 사용자가 직접 테마를 수정하는 일도 가능하다. 그리고 이전에도 비슷한 문제가 발생했을 때 몇 번 테마를 직접 수정했던 적도 있어서 이번에도 조금 수정해주면 해결될 것이라고 생각했다.</p>\n<p>그러나 <code class=\"language-text\">language</code> 프로퍼티가 배열로 변경되면서 발생하는 사이드 이펙트는 <code class=\"language-text\">layout.ejs</code> 파일 내에서만 발생하는 것이 아니라서 꽤 많은 부분을 손 대야 할 것 같았다.</p>\n<p>그렇다고 2번 옵션을 선택하자니 그것도 뭔가 찜찜하다. 이 상황의 근본적인 문제는 단지 Icarus 테마가 Multiple Language를 지원하지 않는다는 것이 아니라, 필자의 블로그가 다른 사람이 만든 테마의 제한적인 기능에 너무 의존하고 있다는 것이기 때문이다. 결국 해당 기능을 지원하는 다른 테마로 변경한다고 해도 비슷한 상황이 반복될 가능성이 높다.</p>\n<p>자, 그럼 직접 Hexo 테마를 만든다는 3번 옵션은 어떨까? 테마를 만든 김에 오픈소스로 배포도 하면 좋지 않을까?</p>\n<p>하지만 Hexo의 테마를 만드려면 ejs와 jQuery와 같은 올드한 기술을 적극 사용해야한다. 게다가 어차피 테마를 만드는 것이나 마이그레이션을 하는 것이나 필요한 리소스는 크게 다르지 않다. 오히려 ejs로 UI를 그리는 것보다 필자에게 익숙한 리액트 기반으로 되어있는 Gatsby를 사용하는 것이 더 이득이다.</p>\n<p>결국 이러한 이유들로 Hexo에서 Gatsby로 환승을 하기로 마음을 먹게 되었다.</p>\n<p>사실 Hexo에서 Gatsby로 건너가는 마이그레이션 자체는 크게 어렵지 않다. Gatsby의 공식 블로그에서도 <a href=\"https://www.gatsbyjs.org/blog/2017-10-01-migrating-my-blog-from-hexo-to-gatsby/\" target=\"_blank\" rel=\"nofollow\">Migrating My Blog From Hexo To Gatsby</a>라는 문서를 제공하고 있는데다가 그 과정이 그렇게 어려운 것도 아니기 때문이다.</p>\n<p>그러나 필자의 블로그는 이미 운영 중인 서비스나 마찬가지이기 때문에, 단지 정적 페이지 생성기를 변경하는 것이 아니라 기존에 있는 기능을 전부 다시 구현해야하는 작업이 추가로 필요하다.</p>\n<p>만약 Hexo의 플러그인을 사용하여 편하게 사용하고 있던 기능이 Gatsby에서는 지원되지 않는다면 일일히 다 만들어줘야 하며, 테마를 사용하면서 신경쓰고 있지 않았던 CSS를 사용한 스타일도 반응형 디자인까지 전부 고려해서 직접 작성해야하는 일은 그렇게 가벼운 작업이 아니다.</p>\n<p>그리고 이 마이그레이션 작업을 진행하는 동안 블로그 포스팅을 작성하거나 다른 토이프로젝트를 진행하는 일을 병행하기는 어렵기 때문에, 최대한 빠른 시간 안에 집중해서 호다닥 끝내야한다고 생각했다.</p>\n<p>마침 4월 30일 석가탄신일부터 장장 6일 간에 걸친 황금 연휴가 시작되었고, 이 정도의 황금 연휴는 올해 안에 다시 오지 않기 때문에 이런 대작업을 진행하기에는 올해 마지막 기회라고 봐도 좋았다. 여기까지 생각이 닿은 필자는 바로 브랜치를 따고 Hexo에서 Gatsby로 환승하는 작업을 시작했다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBAv/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAZ15zKyYX//EABgQAAMBAQAAAAAAAAAAAAAAAAABAwIR/9oACAEBAAEFAp00K3R2M8HhDSP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERMRAhMoH/2gAIAQEABj8CsmfMUh6OUf/EABsQAQACAwEBAAAAAAAAAAAAAAEAESExcVGh/9oACAEBAAE/IQO3IuSnqijr7KpPcFrfJZh//9oADAMBAAIAAwAAABBY/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EMVD/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qtb//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhYYExkf/aAAgBAQABPxBEiXnaHCgKem+RKWO4GC7kTKKRztiJt8Ln/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"yak\" title=\"\" src=\"/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg\" srcset=\"/static/0081bd73b6f38b83ddb98effd99285d2/0913d/yak.jpg 160w,\n/static/0081bd73b6f38b83ddb98effd99285d2/cb69c/yak.jpg 320w,\n/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg 640w,\n/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>그렇게 야크 쉐이빙이 시작됐다...</small>\n</center>\n<h2 id=\"gatsby에-대한-간단한-설명\" style=\"position:relative;\">Gatsby에 대한 간단한 설명<a href=\"#gatsby%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%84%A4%EB%AA%85\" aria-label=\"gatsby에 대한 간단한 설명 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42mNgoBX4z/Cf8f///4xg9n8Em1LAxMCgzgukmVHFwJh4l4HocOVq2RkVazas6Nv1cm7Dhp0VAZPVQOL19fUwwxhxOwJJDua1GVXrlm+cdOx/beiMn/Mqtv2v9JuyA6rEE4jDgJgTiNmAWAlqiBsQK0DVsKJbyLqgcevVtVP2/c936fo1sXD5/0WNO+6zMYioArVWAPXHAdXUghwMxB1AXArErUDcBMRZUAsZYS4Ee2ly0cqFt449/79x+sGfu+ed+7+0Y+dGsH9YmcKhmmKAuBiIvaEGFAAxzKIguPdhYRgqXyIxuXj5spk1ax9NLl65Ply+HOwdewZ7FmgkMUK9hhxRIDE9IObBFUeM4gyu3GixzAjFTGjhxIiGMeKbkQEao+B0yEB0OmRkoCUAAFcqZS1w+C9uAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"gatsby\" title=\"\" src=\"/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png\" srcset=\"/static/2bab627a79337d768c8221c571d2c81a/69538/gatsby.png 160w,\n/static/2bab627a79337d768c8221c571d2c81a/72799/gatsby.png 320w,\n/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png 640w,\n/static/2bab627a79337d768c8221c571d2c81a/d9199/gatsby.png 960w,\n/static/2bab627a79337d768c8221c571d2c81a/21b4d/gatsby.png 1280w,\n/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p><strong>Gatsby</strong> is a free and open source framework based on React that helps developers build blazing fast websites and apps</p>\n<p><em><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow\">Gatsby Offical Site</a></em></p>\n</blockquote>\n<p>Gatsby는 리액트 기반의 정적 사이트 생성기이다.</p>\n<p>개인적으로 Gatsby의 최대 장점은 아마 리액트 기반이라는 것이 아닐까라는 생각을 하는데, 리액트는 이미 전 세계의 프론트엔드 개발자들에게 사랑받는 UI 라이브러리이기 때문에, Ruby를 사용하는 <a href=\"http://jekyllrb-ko.github.io/\" target=\"_blank\" rel=\"nofollow\">Jekyll</a>이나 ejs를 학습해야하는 <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"nofollow\">Hexo</a>에 비해 학습 비용이 상대적으로 낮기 때문이다.</p>\n<p>그리고 다른 개발자 분들이 만들어 놓은 프로젝트 스타터를 사용하면 직접 보일러플레이트를 작성할 필요가 없기 때문에 빠르게 프로젝트를 세팅할 수도 있다. 필자는 gatsby-starter-blog라는 스타터를 사용해서 프로젝트를 세팅했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby new evan-blog https://github.com/gatsbyjs/gatsby-starter-blog</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 스타터 외에도 국내외의 개발자 분들이 블로그용 스타터를 만들어서 깃허브에 올려놓은 경우가 많으므로 한번 쭉 흝어보고 마음에 드는 스타터를 사용하도록 하자.</p>\n<p>또 한 가지 특이한 점이 있다면 리액트 컴포넌트 내에서 데이터를 Fetch 해오기 위한 수단으로 <a href=\"https://graphql.org/\" target=\"_blank\" rel=\"nofollow\">GraphQL</a>을 채택했다는 점인데, 아무래도 REST API에 익숙한 개발자들이 많기 때문에 처음에는 조금 어색할 수 있지만, 개념 자체가 그렇게 어려운 편은 아니기 때문에 막상 몇 번 쓰다보면 금방 적응할 수 있는 것 같다.</p>\n<h3 id=\"graphql\" style=\"position:relative;\">GraphQL<a href=\"#graphql\" aria-label=\"graphql permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>GraphQL(Graph Query Language)은 이름 그대로 새로운 개념의 질의 언어이다. 우리가 평소에 자주 사용하는 SQL(Structured Query Language)와 같이 어떤 시스템으로부터 데이터를 가져오기 위해 질의를 날리는 수단으로 이용된다는 것이다.</p>\n<p>SQL이 데이터베이스 시스템에 저장되어 있는 데이터를 가져오기 위해 데이터베이스에게 질의를 날리기 위한 용도로 사용된다면, GraphQL은 클라이언트가 서버에게 데이터를 보내달라고 질의하는 목적으로 사용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> frontmatters<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> thumbnail <span class=\"token keyword\">FROM</span> post <span class=\"token keyword\">WHERE</span> post_id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">post</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">frontmatters</span>\n    <span class=\"token property\">title</span>\n    <span class=\"token property\">thumbnail</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>기존의 REST API를 사용할 때의 클라이언트는 단지 서버가 제공해주는 엔드포인트로 요청을 보내고 미리 정해진 구조의 응답을 받아서 데이터를 사용했지만, GraphQL을 사용하는 클라이언트는 능동적으로 자신이 필요한 데이터를 선택하여 서버에게 질의할 수 있다는 장점을 가진다.</p>\n<p>그러나 클라이언트가 원하는 스키마의 쿼리를 맘대로 날릴 수 있다는 장점은 반대로 사용자에게 제어권을 넘겨준다는 클라이언트 프로그램의 특성을 생각하면 보안 측면에서의 단점도 될 수 있고, 백엔드 개발자에 비해 상대적으로 쿼리에 미숙한 클라이언트 개발자가 슬로우 쿼리를 발생시킬 수도 있다.</p>\n<p>그렇기 때문에 GraphQL의 백엔드 시스템은 반드시 이러한 상황에 대한 조치를 적절하게 취해줘야하고, GraphQL의 이러한 단점들은 REST API에 비해 안정성이 떨어진다고 판단될 수 있기 때문에 아직 대규모 프로젝트에서 사용되는 사례는 드문 것 같다. <small>(실제로 이런 방식에 대한 개발자들의 호불호도 꽤나 갈린다)</small></p>\n<p>그러나 Gatsby는 정적 사이트 생성기이기 때문에 GraphQL을 사용하여 쿼리를 날리는 상황 자체가 런타임이 아닌 컴파일타임만으로 제한되어 있고, 슬로우 쿼리가 발생된다해도 사용자에게 실제로 피해가 가는 것이 아닌 빌드가 조금 더 느려진다 뿐이므로 이러한 단점들이 상대적으로 상쇄되는 환경이라고 볼 수 있다.</p>\n<h3 id=\"graphql을-직접-사용해보자\" style=\"position:relative;\">GraphQL을 직접 사용해보자<a href=\"#graphql%EC%9D%84-%EC%A7%81%EC%A0%91-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"graphql을 직접 사용해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Gatsby는 로컬 환경에서 자유롭게 쿼리를 날려볼 수 있는 페이지를 별도로 제공해주고 있다. 이 페이지가 Swagger같이 일종의 API 문서 역할을 하는 것이다. <code class=\"language-text\">gatsby develop</code> 명령어를 이용하여 로컬 서버를 실행하고 <code class=\"language-text\">localhost:8000/__graphql</code>로 접속하면 Gatsby가 제공하는 쿼리 테스트 페이지를 만나볼 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvUlEQVR42pWUiW6kMBBE+f/PzGQn4fbZNja40o2BHKvdmVgqeUayilfVhmaLEdETKATIcs7j9XZD3/YYhhHTOGEQTRPatsXMu9Ya86z+llJo7p3CoAjnyjnDaIOu04hLxpY3LLkgrhuscXhrZz5v4UMEMQyF72qsCiCXkLcNhQ2XZUFKCcov8HZBYcOyrChsKAaT8bixqR4NvHLw2ldZqoZGE5QO8DFhY9MoFbBKKShbFWTn/4FrsVyPth6OKekwIQpVYihGs4tXZKET/VxiKD0bR7gPGmbm2NpVGfqMnPOK18EipPXqcF3XfxoKoeLYbnY15kl39NnIwb4TfKbintKS/msohG8XYe3O8wNE5AMaOawnQnCZi1/3uI8I553w6JDpvFw7J7+ZUAbRMn7i/ZnIMpB3nrCRCZuD0IXPDhMbTDZ8u4cPCXkQQnjG3PV1KC+dgQv5d4TaHXRVl6Hj3O1MyGt5mnBiMzseQ+G4u+E5ZenPUHo6shC2QnjGPa7NTipTvg8Ggwn8MjwmPN+UUQmhATEhuTqUSkto/vQGIxsWVEN5l+VrIiKiS977/Usk97DngViJeQ7EHx3GiA9XrpC2+k2iPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"query test page\" title=\"\" src=\"/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png\" srcset=\"/static/42203ec8bbd0d883d511c96198e0d7c9/69538/query-test-page.png 160w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/72799/query-test-page.png 320w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png 640w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/d9199/query-test-page.png 960w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/21b4d/query-test-page.png 1280w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png 2684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>필자 역시 GraphQL을 사용해본 경험이 별로 없었기 때문에 처음에는 감을 잘 못 잡고 있었는데 이 페이지에서 30분 정도 이것저것 만져보다 보니까 대충 어떤 식으로 쿼리를 날려야하는지 감을 잡을 수 있었다.</p>\n<p>필자가 선택한 스타터인 gatsby-starter-blog는 기본적으로 마크다운을 사용한 블로그 작성에 필요한 Gatsby 플러그인들을 포함하고 있기 때문에 마크다운 파일을 파싱하는 <code class=\"language-text\">markdownRemark</code>나 이미지 리소스를 파싱하는 <code class=\"language-text\">imageSharp</code>와 같은 쿼리 타입들이 추가되어있지만, 만약 이 친구들이 보이지 않는다면 gatsby-transformer-remark와 같은 플러그인을 직접 설치해서 추가해줘야한다.</p>\n<p>이렇게 <code class=\"language-text\">__graphql</code> 페이지에서 이것저것 만져보면서 대충 Gatsby의 GraphQL 인터페이스에 대한 감을 잡았다면, 리액트 컴포넌트 내에서 <code class=\"language-text\">useStaticQuery</code> 훅을 사용하여 쿼리를 직접 날리면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query MyQuery {\n    markdownRemark(frontmatter: {title: {eq: \"테스트 포스트\"}}) {\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">markdownRemark</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">frontmatter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"테스트 포스트\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-09T12:57:08.000Z\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>방금 필자가 보인 예시의 <code class=\"language-text\">useStaticQuery</code> 훅은 이름 그대로 정적인 쿼리만을 제공하기 때문에 위 쿼리는 단지 <code class=\"language-text\">frontmatter.title</code>이 정확히 <code class=\"language-text\">테스트 포스트</code>인 데이터를 가져올 뿐이다. 만약 억지로 <code class=\"language-text\">graphql</code> 함수의 인자로 변수가 포함된 템플릿 스트링을 넘기려고 한다면 다음과 같은 에러를 만나게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Error: It appears like Gatsby is misconfigured.\nGatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away.\nUnfortunately, something went wrong and the query was left in the compiled code.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><em>Gatsby에서 사용하는 <code class=\"language-text\">graphql</code> 호출은 오직 컴파일 타임에만 평가됨.<br /></em>\n<em>님이 쿼리를 잘못써서 쿼리가 평가가 안됐음.</em></p>\n</blockquote>\n<p>즉, 사용자가 쿼리로 사용하는 템플릿 스트링에 변수를 포함시킨다고 해도 이 변수는 “런타임” 때 평가되기 때문에 Gatsby가 코드를 컴파일할 때는 이 변수에 어떤 값이 들어올 지 알 수가 없다는 것이다.</p>\n<p>하지만 블로그 포스팅 페이지를 만드려면 반드시 <code class=\"language-text\">/posts/2</code> 같이 URL을 통해 동적인 파라미터를 받고, 이 파라미터를 사용하여 “2번 포스트를 가져와!”와 같은 쿼리를 날릴 수 있어야한다. 이럴 때 사용하는 것이 바로 <code class=\"language-text\">pageQuery</code>이다.</p>\n<h3 id=\"동적-파라미터를-받는-페이지-만들기\" style=\"position:relative;\">동적 파라미터를 받는 페이지 만들기<a href=\"#%EB%8F%99%EC%A0%81-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"동적 파라미터를 받는 페이지 만들기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>블로그의 가장 기본적인 기능은 동일한 UI 템플릿에 다른 내용이 표현되어야 한다는 것이다.</p>\n<p>일반적으로 이러한 기능을 구현해야하는 경우, 런타임 때 클라이언트가 서버의 HTTP API를 사용하여 데이터를 받아온 후 렌더하거나, SEO가 중요한 페이지일 경우 SSR(Server Side Rendering) 서버가 데이터를 받아온 뒤 렌더된 페이지를 클라이언트에게 응답으로 보내주는 방식으로 구현한다.</p>\n<p>하지만 Gatsby는 정적 사이트 생성기이기 때문에 어플리케이션이 작동하고 있는 런타임에 데이터를 동적으로 받아와서 가공하는 방식이 아니라, 컴파일 타임에 GraphQL을 사용하여 데이터를 받아온 뒤 실제 페이지 파일을 생성해야한다.</p>\n<p>이게 어떤 말인지 잘 이해가 가지 않는다면 <code class=\"language-text\">public</code> 디렉토리 내부의 파일을 한번 살펴보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> evan-blog/public/page-data <span class=\"token operator\">&amp;&amp;</span> ll\n\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2017</span>\ndrwxr-xr-x   <span class=\"token number\">5</span> evan  <span class=\"token number\">1525943656</span>   160B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2018</span>\ndrwxr-xr-x  <span class=\"token number\">10</span> evan  <span class=\"token number\">1525943656</span>   320B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2019</span>\ndrwxr-xr-x   <span class=\"token number\">7</span> evan  <span class=\"token number\">1525943656</span>   224B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2020</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>.html\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 about\ndrwxr-xr-x  <span class=\"token number\">19</span> evan  <span class=\"token number\">1525943656</span>   608B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 categories\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 dev-404-page\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 index\ndrwxr-xr-x   <span class=\"token number\">6</span> evan  <span class=\"token number\">1525943656</span>   192B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 page</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자의 블로그 포스트 경로는 <code class=\"language-text\">/2020/05/09/blog-title/</code>과 같은 포맷을 가지고 있기 때문에 Gatsby는 필자의 블로그를 컴파일할 때 실제로 <code class=\"language-text\">public/page-data</code> 디렉토리 내부에 <code class=\"language-text\">2020</code>, <code class=\"language-text\">05</code>, <code class=\"language-text\">09</code>, <code class=\"language-text\">blog-title</code>이라는 디렉토리를 생성하고 그 안에 <code class=\"language-text\">page-data.json</code>이라는 파일을 생성하며, 이 안에는 렌더할 HTML을 문자열로 가지고 있다.</p>\n<p>즉, 런타임에 동적으로 데이터를 받아와서 페이지의 내용을 렌더하는 것이 아니라, 컴파일을 할 때 하나의 포스팅 당 하나의 페이지 파일을 실제로 생성해야한다는 것이다. 이 차이점을 잘 파악한다면 정적 사이트 생성기를 조금 더 편하게 다룰 수 있다.</p>\n<h4 id=\"createpages-api\" style=\"position:relative;\">createPages API<a href=\"#createpages-api\" aria-label=\"createpages api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Gatsby는 컴파일 타임 때 사용자가 입맛에 맞는 페이지를 생성할 수 있도록 <code class=\"language-text\">createPages</code>라는 API를 제공한다. 이 API는 <code class=\"language-text\">gatsby-node.js</code> 파일에서 모듈로 export하는 방식으로 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>첫 번째 인자인 <code class=\"language-text\">graphql</code>은 리액트 컴포넌트 내부에서 GraphQL을 사용할 때 호출하는 함수와 동일한 녀석이고, 두 번째 인자인 <code class=\"language-text\">actions</code>는 우리가 <a href=\"https://haruair.github.io/flux/docs/overview.html\" target=\"_blank\" rel=\"nofollow\">Flux 아키텍처</a>에서 이야기하는 그 액션과 동일한 녀석이다.</p>\n<p>Gatsby는 내부적으로 <a href=\"https://redux.js.org/\" target=\"_blank\" rel=\"nofollow\">리덕스(Redux)</a>를 사용하여 상태 관리를 하고 있고,  Gatsby의 모든 API는 인자로 이러한 액션 목록을 받고 있기 때문에 우리는 자유롭게 이 액션들을 사용하여 Gatsby에게 명령을 내릴 수 있다. 그 중 <code class=\"language-text\">createPage</code>라는 액션이 바로 페이지를 생성하라는 명령을 내릴 수 있는 액션이다.</p>\n<p>자, 그럼 대략 이런 플로우를 생각해볼 수 있겠다.</p>\n<blockquote>\n<ol>\n<li>GraphQL로 작성된 포스팅을 싹 다 가져온다</li>\n<li>포스팅 데이터를 순회하면서 <code class=\"language-text\">createPage</code> 액션을 디스패치해서 페이지를 하나씩 생성한다.</li>\n<li>Profit!</li>\n</ol>\n</blockquote>\n<p>글로만 봐도 이미 심플해보이지만, 막상 해보면 실제로는 별로 고민할 필요도 없을 정도로 더 심플하다. 그럼 포스팅 페이지를 한번 생성해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/Post.tsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 1. 모든 포스팅 데이터를 긁어온다</span>\n  <span class=\"token keyword\">const</span> allPostsQuery <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    allMarkdownRemark {\n        edges {\n          fields {\n            path\n          }\n          node {\n            id\n          }\n        }\n      }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 2. 포스팅 데이터를 순회하며 페이지 파일을 생성한다.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">edges</span><span class=\"token operator\">:</span> posts <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> allPostsQuery<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">;</span>\n  posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> template<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">postId</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">createPages</code> API를 사용하여 페이지 파일 생성 로직을 작성해주게 되면 나머지 귀찮은 작업은 Gatsby가 알아서 해주기 때문에 굉장히 편리하다.</p>\n<p>하지만 <code class=\"language-text\">createPage</code> 함수는 단지 페이지 파일을 생성할 뿐이고, <code class=\"language-text\">Page.tsx</code> 컴포넌트에게 포스팅 데이터를 넘겨주는 것은 아니다. 대신 우리는 <code class=\"language-text\">createPage</code> 함수의 <code class=\"language-text\">context</code> 옵션을 사용하여 원하는 데이터를 템플릿 컴포넌트에게 넘겨줄 수 있고, 템플릿 컴포넌트 내에서 이 컨텍스트 데이터를 이용하여 다시 포스팅 데이터를 가져오는 과정이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// Post.tsx</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery($postId: String!) {\n    markdownRemark(id: {eq: $postId}) {\n      fields {\n        path\n      }\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  pageContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    postId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> frontmatter <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>markdownRemark<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우리가 <code class=\"language-text\">createPage</code>의 <code class=\"language-text\">context</code> 옵션을 통해 컴포넌트로 넘긴 변수는 컴포넌트 파일 내부의 <code class=\"language-text\">pageQuery</code> 모듈에게 주입된다.</p>\n<p>필자가 작성한 쿼리를 보면 <code class=\"language-text\">query PostQuery($postId: String!) {}</code>과 같이 쿼리의 인자로 <code class=\"language-text\">postId</code>라는 변수를 받은 후에 <code class=\"language-text\">markdownRemark</code> 쿼리 타입에 사용하고 있는 모습을 볼 수 있다. 이런 과정을 통해 우리는 동적인 값을 사용하여 데이터를 가져올 수 있는 페이지를 생성할 수 있는 것이다.</p>\n<p>이 외에도 <code class=\"language-text\">createRedirect</code>, <code class=\"language-text\">createNode</code> 등 다양한 액션들을 지원하고 있고, 이런 API와 액션들을 조합하여 재미있는 기능을 만들 수도 있지만, 블로그 같은 어플리케이션에 필요한 페이지네이션이나 카테고리, 태그 페이지와 같은 간단한 기능은 대부분 <code class=\"language-text\">createPage</code> 액션만으로도 충분히 구현 가능하다.</p>\n<h2 id=\"의외로-귀찮았던-부분\" style=\"position:relative;\">의외로 귀찮았던 부분<a href=\"#%EC%9D%98%EC%99%B8%EB%A1%9C-%EA%B7%80%EC%B0%AE%EC%95%98%EB%8D%98-%EB%B6%80%EB%B6%84\" aria-label=\"의외로 귀찮았던 부분 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이렇게 Gatsby에 대한 기본적인 학습을 하고난 후 기존에 Hexo로 구현되어있던 기능들과 Icarus 테마에서 제공하던 스타일을 전부 직접 구현해야하는 작업을 하게 되었는데, 이 마이그레이션 작업을 하는 동안 대부분의 시간을 여기에 쏟았다고 해도 과언이 아닐 정도로 지루한 작업의 연속이었다.</p>\n<p>물론 모든 기능을 다 구현하면 시간이 너무 오래 걸릴 수도 있으니 기존 기능들 중에서 사람들이 자주 사용하거나, SEO에 영향을 줄 것 같은 기능을 우선 구현하는 것을 목표로 잡기는 했지만 그래도 코드의 양이 많은 것은 변하지 않는 사실이라 인내심을 가지고 하루에 조금씩이라도 꾸준히 작업하는 것을 목표로 했다.</p>\n<h3 id=\"기존-링크와의-연결을-신경써줘야한다\" style=\"position:relative;\">기존 링크와의 연결을 신경써줘야한다<a href=\"#%EA%B8%B0%EC%A1%B4-%EB%A7%81%ED%81%AC%EC%99%80%EC%9D%98-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%8B%A0%EA%B2%BD%EC%8D%A8%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"기존 링크와의 연결을 신경써줘야한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>어떤 웹 서비스를 마이그레이션할 때 주의해야 할 것 중 하나는 바로 기존 페이지로 연결되는 링크가 죽으면 안된다는 것이다. 예를 들어 마이그레이션 전의 <code class=\"language-text\">/posts/1</code>이라는 URL이 1번 포스팅을 볼 수 있는 페이지로 연결되는 링크였다면, 이 규칙은 반드시 마이그레이션 후에도 동일해야한다.</p>\n<p>만약 이 규칙이 깨지게 되는 경우, 해당 링크로 접속하는 사용자는 <code class=\"language-text\">404</code> 상태를 보게 될 것이기 때문이다. 필자의 블로그 포스팅의 경우 이미 다양한 채널들을 통해 공유가 되었고, 또 다른 블로그에 참조 포스팅으로 링킹되어있는 경우도 많기 때문에, 필자는 이 부분에 대해서 신경을 쓸 수 밖에 없었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAP/2gAMAwEAAhADEAAAAYiE51kzRP/EABoQAAICAwAAAAAAAAAAAAAAAAECABIDESH/2gAIAQEAAQUC0IAsbIqksaWMbrf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQIBAT8BjL//xAAZEAABBQAAAAAAAAAAAAAAAAAAARARIdH/2gAIAQEABj8CNIEt/wD/xAAbEAEAAgIDAAAAAAAAAAAAAAABACERMUFhsf/aAAgBAQABPyF7B8mAWsUpC4uU03Gorc//2gAMAwEAAgADAAAAEFMf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAwEBPxCMU//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAgEBPxASbAv/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRkf/aAAgBAQABPxBwhkQbajPZdFe+n2X/AGQ6I6oKrnUrhwHscUp1n//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"whoami\" title=\"\" src=\"/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg\" srcset=\"/static/b8cf4a7419783c7dc8a53d556099190c/0913d/whoami.jpg 160w,\n/static/b8cf4a7419783c7dc8a53d556099190c/cb69c/whoami.jpg 320w,\n/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg 640w,\n/static/b8cf4a7419783c7dc8a53d556099190c/6a068/whoami.jpg 960w,\n/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>기존 링크를 제대로 처리해주지 않는다면 유저는 404 페이지를 보게 된다.</small>\n</center>\n<p>또한 SEO 측면에서도 기존 포스팅 링크에서 <code class=\"language-text\">404</code>가 떨어진다면 검색엔진 봇은 해당 페이지가 삭제된 것으로 인식하기 때문에 검색 결과에서 해당 포스팅을 내리게 될 것이다. 혹여나 불가피하게 기존의 링크를 다른 링크로 변경해야하는 상황이라고 한다면 반드시 명시적으로 <code class=\"language-text\">301</code> 상태코드를 응답으로 반환하여 <code class=\"language-text\">/posts/1</code>이라는 링크가 어떤 링크로 변경되었는지를 검색엔진 봇에게 알려야한다.</p>\n<p>필자가 기존에 사용하던 Hexo는 <code class=\"language-text\">yyyymmdd-{postTitle}</code> 형식의 제목을 가진 포스트를 자동으로 <code class=\"language-text\">/yyyy/mm/dd/{postTitle}/</code> 형식의 URL로 매핑해주는 기능을 가지고 있었지만, Gatsby에는 딱히 이런 기능이 없다.</p>\n<p>물론 gatsby-starter-blog 스타터는 기본적으로 각 포스트 마크다운 파일의 경로를 가져와서 그대로 URL로 사용하는 코드를 보일러플레이트로 제공하지만, 이 방식은 기존 Hexo 블로그의 URL 생성 방식과 다른 방식이기 때문에 포스트들이 이전과 동일한 URL을 가질 수 있도록 별도의 작업이 필요했다.</p>\n<p>이를 위해 페이지 파일을 컴파일할 때 각 포스트의 파일 경로를 토대로 정규식을 사용하여 URL을 만들어 낸 후 포스트 노드 필드에 <code class=\"language-text\">path</code>라는 키로 삽입하는 방식을 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> filePath<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n      <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?&lt;=\\/)(\\d{4})(\\d{2})(\\d{2})(-)(?=.+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'$1/$2/$3/'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">slug</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> filePath<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">path</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">createNodeField</code> 액션을 통해 생성한 노드의 필드는 <code class=\"language-text\">fields</code>라는 프로퍼티에 삽입되며, 쿼리를 사용할 때 요런 느낌으로 접근할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery {\n    markdownRemark {\n      fields {\n        path\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 기존 블로그와 동일한 링크를 가지도록 매핑하는 일은 크게 어렵거나 복잡한 일은 아니었지만, 단 한 개의 링크라도 망가지지 않도록 신경써서 작업해야하는 일이었고, 제대로 매핑되었는지 일일히 테스트도 해야했기 때문에 귀찮음 1순위였던 작업이었다.</p>\n<h3 id=\"내가-직접-다-만들어야한다\" style=\"position:relative;\">내가 직접 다 만들어야한다<a href=\"#%EB%82%B4%EA%B0%80-%EC%A7%81%EC%A0%91-%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"내가 직접 다 만들어야한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>기존에 Hexo를 사용할 때는 테마에서 제공해주는 기능을 가져다 사용하거나, 플러그인을 적극적으로 활용했었기 때문에 필자가 직접 개발을 해야하는 경우가 거의 없었다. 그러나 애초에 이 마이그레이션을 진행하게 된 계기가 테마나 플러그인에 너무 의존했기 때문이었으니, 이왕 Gatsby를 사용할 거라면 되도록 기능을 직접 구현하는 방향을 선택했다.</p>\n<p>예를 들면 관련 포스팅 섹션 같은 경우에는 기존에 <a href=\"https://github.com/tea3/hexo-related-popular-posts\" target=\"_blank\" rel=\"nofollow\">hexo-related-popular-posts</a> 플러그인을 사용하여 렌더하고 있었지만, Gatsby 진영에는 딱히 쓸만한 녀석이 없는 것 같아서 요런 느낌으로 직접 구현했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> intersection <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash/intersection'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useAllPosts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/hooks/useAllPosts'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RelatedPosts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tags<span class=\"token punctuation\">,</span> currentPost <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useAllPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> relatedPosts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> posts\n      <span class=\"token comment\">// 현재 포스트는 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>post <span class=\"token operator\">=></span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">!==</span> currentPost<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 현재 포스트의 태그와 다른 포스트의 태그 중 겹치는 부분을 찾는다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>post <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        post<span class=\"token punctuation\">,</span>\n        tags<span class=\"token operator\">:</span> <span class=\"token function\">intersection</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 겹치는 태그가 없는 포스트는 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tags <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 겹치는 태그가 많은 순으로 내림차순 정렬한다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>v <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 가장 겹치는 부분이 많은 최대 5개 포스트만 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">MAX_COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentPost<span class=\"token punctuation\">,</span> posts<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 관련 포스팅이라고 해봤자 단순히 현재 포스팅과 똑같은 태그를 가장 많이 가지고 있는 포스팅들을 솎아내는 것이기 때문에 별로 복잡할 것도 없었다.</p>\n<p>물론 일일히 이런 걸 다 구현해야한다는 것이 번거롭기는 하지만, 반대로 생각하면 필자가 원하는 기능을 구현할 수 있는 자유도도 높아졌다는 이야기므로 이 정도 번거로움은 감수하는 것이 맞는 듯 하다.</p>\n<h3 id=\"cli에-포스팅-생성-기능이-없다\" style=\"position:relative;\">CLI에 포스팅 생성 기능이 없다<a href=\"#cli%EC%97%90-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%83%9D%EC%84%B1-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%97%86%EB%8B%A4\" aria-label=\"cli에 포스팅 생성 기능이 없다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>애초에 Gatsby는 마크다운 블로그 전용이 아니라 범용적인 정적 사이트 생성기이기 때문에 CLI를 통한 포스팅 생성 기능 같은 것은 제공해주지 않는다.</p>\n<p>그렇다고 매번 디렉토리 생성하고 디렉토리 이름 바꿔주고 포스팅 파일 만들고 하는 작업을 손으로 할 수는 없으니 아주 간단한 스크립트를 하나 작성해서 사용하기로 했다. 포스팅 파일을 생성할 때마다 일일히 문자열로 기본 템플릿을 만들어 줄 수도 있지만, 조금 더 간단하게 처리할 수 있는 방법은 바로 예제 파일을 사용하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token comment\">&lt;!-- example.md --></span>\n\n<span class=\"token hr punctuation\">---</span>\n\ntitle: $title\ndate: $date\ntags:\ncategories:\nthumbnail:\n\n<span class=\"token hr punctuation\">---</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 예제 파일을 하나 만들어 놓고 새로운 포스팅 파일을 생성할 때 이 예제 파일을 불러와서 <code class=\"language-text\">$title</code>과 <code class=\"language-text\">$date</code>만 적당한 문자열로 변경해주면 간단하게 새로운 포스팅 파일을 생성할 수 있다.</p>\n<p>이후 <code class=\"language-text\">readline</code> API를 사용하여 런타임 중에 시스템 입력을 통해 포스팅의 제목을 입력받고, 포스팅 생성 시간을 이 마크다운 파일에 기록해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> new-post\n\n<span class=\"token function\">yarn</span> run v1.22.0\n$ <span class=\"token function\">node</span> ./scripts/newPost.js\n포스팅의 제목을 입력해주세요. 이 제목이 포스팅의 URL이 되기 때문에 공백없는 영어로 작성해야합니다.\n <span class=\"token operator\">=</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 카테고리나 태그도 포스팅 생성 시에 입력받게 만들 수도 있지만, 필자는 포스팅을 작성하는 중에 카테고리나 태그를 바꾸는 일이 워낙 빈번한지라 딱히 효용성이 없다고 느껴져서 딱히 관련 기능을 추가하지는 않았다. <small><strike>(사실 귀찮은 게 더 크다…)</strike></small></p>\n<p>필자 뿐만 아니라 다른 분들도 직접 스크립트를 작성해서 이런 작업을 수행하고 있지만, 필자의 심플한 스크립트와 다르게 다른 분들이 만든 스크립트는 번쩍번쩍 화려하고 기능도 좋은 것들이 많으니 한번 찾아보도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>처음 블로그 마이그레이션 작업을 시작할 때는 한 달 정도 걸릴 것이라고 생각했는데, 황금 연휴의 힘인지 의외로 작업이 빨리 끝났다.</p>\n<p>물론 이전에 비해서 디자인도 약간 투박한 느낌이고 버그도 존재하는 구멍이 숭숭 뚫려있는 어플리케이션으로 퇴보하기는 했지만, 그래도 처음 목표였던 “맘대로 기능을 붙힐 수 있는 어플리케이션”으로 진화했기에 일단은 만족스럽다.</p>\n<p>그리고 이번 마이그레이션을 진행하면서 원래 붙어있던 구글 애드센스도 그냥 없애버렸다. 광고로 들어오는 수입이 워낙 작고 귀여운 수준이기도 하지만, 그것보다는 광고로 인해 필자의 블로그를 찾아주시는 독자 분들에게 피로감을 줄 수도 있다는 판단이 들었기 때문이다. <small><strike>(돈은 주식과 부동산으로…읍읍)</strike></small></p>\n<p>어쨌든 시작은 i18n 기능을 블로그에 붙히는 것이었는데 갑자기 마이그레이션을 하게 되버려서 뭔가 야크 쉐이빙 냄새가 조금 나기는 하지만 결과적으로 Hexo를 버림으로써 이런저런 기능적인 제약에서 벗어나게 되었으니, 앞으로는 포스팅 집필을 하면서도 심심할 때마다 조금씩 블로그에 재미있는 기능도 붙혀볼 예정이다.</p>\n<p>이상으로 Hexo에서 Gatsby로 블로그 마이그레이션 야크쉐이빙 후기 포스팅을 마친다.</p>","fields":{"slug":"20200509-gatsby-migration-retrospective","path":"/2020/05/09/gatsby-migration-retrospective/","lang":"ko"},"frontmatter":{"title":"Hexo에서 Gatsby로 블로그 마이그레이션 야크쉐이빙 후기","subTitle":"기능 하나 추가하다 블로그를 통째로 다시 만든 이야기","date":"May 09, 2020","categories":["프로그래밍","튜토리얼"],"tags":["Gatsby","Hexo","마이그레이션","개발자","개발자 블로그","야크 쉐이빙"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/8e1cc1a52ffd263af7247d9f38008f4c/d803c/thumbnail.png","srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/d803c/thumbnail.png 320w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/fc5c5/thumbnail.webp 320w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/8e1cc1a52ffd263af7247d9f38008f4c/01fb2/thumbnail.png","srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"614173b8-4e46-52c7-b88a-2b27378cd5f8","tableOfContents":"<ul>\n<li>\n<p><a href=\"#gtm%EC%9D%84-%EC%9E%90%EC%9C%A0%EB%A1%AD%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%84%A0%ED%96%89%EC%A7%80%EC%8B%9D\">GTM을 자유롭게 사용하기 위한 선행지식</a></p>\n</li>\n<li>\n<p><a href=\"#gtm%EC%9D%98-%EC%9E%91%EB%8F%99-%EC%9B%90%EB%A6%AC\">GTM의 작동 원리</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%83%9C%EA%B7%B8\">태그</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%8A%B8%EB%A6%AC%EA%B1%B0\">트리거</a></p>\n<ul>\n<li><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80%EB%B7%B0\">페이지뷰</a></li>\n<li><a href=\"#%ED%81%B4%EB%A6%AD\">클릭</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B0%B8%EC%97%AC\">사용자 참여</a></li>\n<li><a href=\"#%EA%B8%B0%ED%83%80\">기타</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B3%80%EC%88%98\">변수</a></p>\n<ul>\n<li><a href=\"#%ED%83%90%EC%83%89\">탐색</a></li>\n<li><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%B3%80%EC%88%98\">페이지 변수</a></li>\n<li><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9A%94%EC%86%8C\">페이지 요소</a></li>\n<li><a href=\"#%EC%9C%A0%ED%8B%B8%EB%A6%AC%ED%8B%B0\">유틸리티</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"Google Tag Manager, 통칭 GTM은 지난 2012년에 출시된 인터넷 인터페이스 상에서의 웹 분석, 광고 성과 측정, 제휴 마케팅 추적 등 다양한 태그를 관리할 수 있는 구글의 이벤트 트래킹 솔루션 중 하나이다. 필자는 이전 직장에서 Google Analytics나 Segment와 같은 이벤트 트래킹 솔루션을 사용하고 있었는데, 물론 이런 툴만으로도 원하는 유저 행동 데이터를 수집하기에 큰 어려움은 없었지만 이 툴들의 단점은 PO나 마케터나 원하는 행동 데이터를 추가로 추적하고 싶을 때마다 개발자에게 코드를 심어달라고 요청해야 한다는 것이다.","html":"<p>Google Tag Manager, 통칭 GTM은 지난 2012년에 출시된 인터넷 인터페이스 상에서의 웹 분석, 광고 성과 측정, 제휴 마케팅 추적 등 다양한 태그를 관리할 수 있는 구글의 이벤트 트래킹 솔루션 중 하나이다.</p>\n<p>필자는 이전 직장에서 Google Analytics나 Segment와 같은 이벤트 트래킹 솔루션을 사용하고 있었는데, 물론 이런 툴만으로도 원하는 유저 행동 데이터를 수집하기에 큰 어려움은 없었지만 이 툴들의 단점은 PO나 마케터나 원하는 행동 데이터를 추가로 추적하고 싶을 때마다 개발자에게 코드를 심어달라고 요청해야 한다는 것이다.</p>\n<!-- more -->\n<p>그러나 GTM을 사용하게 되면 개발자가 코드 상에서 이벤트를 정의하고 발송하는 부분이 크게 줄어들고, GTM이 제공하는 관리 페이지에서 직접 PO나 마케터가 직접 이벤트를 정의하고 심지어 어떤 시점에 이벤트를 발송할 것인지도 정할 수 있다. 또한 어플리케이션의 코드 내에 비즈니스 로직과 전혀 관련없는 이벤트 로그 코드가 섞이지 않기 때문에 개발자에게도 이득인, 어찌보면 누이좋고 매부좋은 툴이라고 할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 479px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 106.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHu53ELhQNQf//EABoQAAICAwAAAAAAAAAAAAAAAAABAhESMUH/2gAIAQEAAQUCY7vE6xDRHZ//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAABECD/2gAIAQEABj8Csr//xAAcEAACAwEAAwAAAAAAAAAAAAABEQAhMUEQUaH/2gAIAQEAAT8htX2WqrdjHqhBMsRrfqMrjOqXZoK8f//aAAwDAQACAAMAAAAQ888A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHxABAAICAgIDAAAAAAAAAAAAAQARITFRYRCBQbHw/9oACAEBAAE/EL0zBTB/cQKwBcrZK0/G79TZfshAdbG9ShEjCsL9xI1p7lEpIbEiu8l578f/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"good\" title=\"\" src=\"/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg\" srcset=\"/static/0f613bfdd99c52ba9b1855cd933ded24/0913d/good.jpg 160w,\n/static/0f613bfdd99c52ba9b1855cd933ded24/cb69c/good.jpg 320w,\n/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg 479w\" sizes=\"(max-width: 479px) 100vw, 479px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>솔직히 개발자 입장에서는 이벤트 로그 심는 것만 안 해도 개이득이다</small>\n</center>\n<p>그러나 아무리 GTM을 사용하여 이벤트를 정의한다고 해도 이 작업들이 프로그래밍과 전혀 관련이 없는 것은 아니다. 물론 GTM 관리 페이지에서 제공하는 기본 기능만으로도 간단한 이벤트를 정의하고 발송하는 것은 크게 어렵지 않지만, 조금 더 복잡한 상황을 구분해야하는 이벤트를 만들고 싶다면 아무래도 변수나 트리거와 같은 프로그래밍 개념에 대한 이해가 필요하다. <small>(Data Layer를 이해해야 진짜 GTM을 쓰는 것이라고 하는 포스팅도 있을 정도다)</small></p>\n<p>그래서 이 포스팅은 개발자만을 위한 포스팅이라기보다 PO나 마케터 같이 개발자와 협업하는 비개발 직군이 GTM을 사용할 때 알아야 하는 최소한의 개발 지식을 쉽게 이해하고 GTM을 사용하도록 만드는 것에 초점을 맞추고 있다. 만약 여러분이 비개발직군이 아니라 GTM을 조직에 도입하고자 하는 개발자라면, 이 포스팅에서 이야기하는 개념들을 어떻게 하면 비개발 직군이 더욱 잘 이해할 수 있도록 설명할 수 있을지에 대해 고민해보며 읽어보는 것도 나쁘지 않을 것 같다.</p>\n<h2 id=\"gtm을-자유롭게-사용하기-위한-선행지식\" style=\"position:relative;\">GTM을 자유롭게 사용하기 위한 선행지식<a href=\"#gtm%EC%9D%84-%EC%9E%90%EC%9C%A0%EB%A1%AD%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%84%A0%ED%96%89%EC%A7%80%EC%8B%9D\" aria-label=\"gtm을 자유롭게 사용하기 위한 선행지식 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>일단 기본적으로 웹 클라이언트 환경에서 HTML, CSS, 자바스크립트가 하는 역할에 대해서는 어느 정도 숙지하고 있어야 한다. 물론 이런 지식을 모른다고 해도 GTM을 사용하는 데 크게 무리는 없지만, 정확히 원하는 시점에 원하는 값을 담아 이벤트를 발송하는 것에 대해 약간의 제약이 생기게 된다.</p>\n<p>예를 들어 사용자가 특정 버튼을 클릭하는 상황을 생각해보자. 우선 여러분은 유저가 “특정 버튼”을 클릭했다는 것을 알 수 있어야 한다. 이 과정에서 GTM은 CSS 선택자라는 것을 사용하여 이 특정 버튼을 구분할 수 있는 기능을 제공하고 있는데, 만약 CSS 선택자에 대한 지식이 없다면 여러분은 “모든 버튼”에 클릭 이벤트를 걸 수 밖에 없을 것이다.</p>\n<p>또는 최근에는 자바스크립트로 페이지의 내용만을 갈아치우며 렌더링하는 SPA(Single Page Application) 방식을 많이 사용하는데, 브라우저의 History에 대한 이해없이 “페이지 뷰” 트리거만을 사용한다면 페이지가 변경되는 것을 제대로 감지하지 못할 수도 있다.</p>\n<p>그런 이유로, 만약 이 포스팅을 읽고 있는 여러분에게 이러한 지식이 전혀 없다면 필자가 설명하는 것들이 정확히 무엇을 말하는 지 이해하기가 어려울 수 있다. 만약 본인이 이 경우에 해당된다면 생활코딩의 <a href=\"https://opentutorials.org/course/3083\" target=\"_blank\" rel=\"nofollow\">Web</a> 수업을 핥아보고 올 것을 추천한다.</p>\n<h2 id=\"gtm의-작동-원리\" style=\"position:relative;\">GTM의 작동 원리<a href=\"#gtm%EC%9D%98-%EC%9E%91%EB%8F%99-%EC%9B%90%EB%A6%AC\" aria-label=\"gtm의 작동 원리 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>GTM은 “태그”를 사용하여 이벤트의 종류를, “트리거”를 사용하여 이벤트를 발송할 시점을, “변수”를 사용하여 이벤트에 담길 데이터를 정의할 수 있는 기능을 제공한다.</p>\n<p>물론 앞서 말한대로 개발자들이야 트리거나 변수와 같은 개념을 이미 알고 있으니 괜찮겠지만, 비개발 직군에게는 트리거나 변수와 같은 개념 자체가 직관적으로 와닿지 않을 수 있기 때문에 각 트리거나 변수 종류를 설명하면서, 동시에 이것들이 의미하는 것이 어떤 것인지에 대한 설명도 조금씩 진행하려고 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 476px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 173.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAENUlEQVR42p1WWW8jRRD2L0bilYd9AgmthEBCsITshl12EzAhCwHEio0ENus4h8F2HMf3OT4m9viY2zPj46Oq7UmcsIedlr7prp7ur6urq6s6oGo6GIZpQTdMAdOyhazpBvz/qyLAEwdDFflCEXWpgWqtRu0CSqUyukrvxkKrIOBr0mrL6HQVQSI1mmi22mIh///yJO7z4ctXhBZtbzabYQZgOp2KNpfJZEqYXMl+EWOXwGO4jEbOfMsjx4Wh64hGozg5OUEkEkE8HkcsFkMoFEIikUA4HBYyo0Dm8Im5SJKEfr+PMREPVW2uIa+iqio0TYOiKKI2TVP0GYaBTqeDbreLwWAgZF87Lo7jiPkjZ6Eh26nX62NINYPtxSsNBkNRc59Ofdyv0YThYrwPHtfrD4S9hQ1NyxLsrueJ2rJtUTuuL48E7NE1uN+HL/NOedGA47riMGRZhkekXLjmLfvyKoUVWhB6wga5XE4Ylwvbq1gsClsuH8BKhKwuTRFacudtt1gFgtBdEArHJDvydTPJftwWMK3r9ruw7Nj80XRyEXFvDdFeFzq5EruTILxojZFrj9EYAhVlhoumhwz3yRNkqZ/bbwPPL8geBpq1IGyMcZyz8P5XWXz5WxOlywlexlU8PpBxmDGRljyc1VykGpM3IlGfoNZ1yDPIhil5hsPWFO89a+OLsIqsDkRJ/r0wxVEbSNLBJ7pUS9M3IlGfotUbzQmlYgvyqyjG5ymodFcboUN0Dk/QOz6FHDlGKxRB8zQBqWNDUlyCcwN1gjwYXR+Ku/MA1jefIf75fcg7mxj/8Rzd4Bba25sw93fgHOzD++QDWPk0TG8M09CF09/GNeGPjyEXcvho4wkiyTRc8ql8u4Ozch2XOhmaZOvXIMxUHLo3pXutvz3A2sGHMPMZuBT/LDp6jS65RT9sWtWg4KA5Huy9JzDTidUIR0RoFLNQNPMqt3DtRxrVo9D009M1CH94BJ00fLr7M2L/xilQTkV++SeeRDKZQqOvwtnfhnG+zpZLeZwXKqjXG+IKsoYc3zigsob2Ohr6hLOlC86xjXMEn542nq1H6OxuQc2lcfB3FMmzc3COKVfryOQKUCgLGpSD1iJ0yeeUdAoPd3bxZzgCbzJDrdFCoVwVod0g1e29Z3O3Ga+y5effwtn4GLMXQUz2tmBvP4AX3MRk9xHc7zZgf/81nE/vwagUoZML6bdy9P8TPUVlTaqhnkpiWC3DbEpQinm0M2mSKzAbdeidSxpsrf5y6NOp3vvwPn558VJE30Q6g6NYAjK9IkyyqcYB9B2a3QiwjLZMuZfSou/YDG1FktcS+ilRuI1Im/MUeqfHEl+z9EUWNXp9MVE2V8Rf4Vc4OqVw1mwLZ9fW2TK/CEqVGuTLjkj0cofSaKlKz7smuc5wLS0Dr3tkcvvOW14W/G1p/lvmDofyH/xpSptwbuc+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"aside\" title=\"\" src=\"/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png\" srcset=\"/static/1caeb1dc2b0b430585266bed369411cf/69538/aside.png 160w,\n/static/1caeb1dc2b0b430585266bed369411cf/72799/aside.png 320w,\n/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png 476w\" sizes=\"(max-width: 476px) 100vw, 476px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이 3가지 키워드를 이해하는 것이 바로 GTM을 이해하는 것이다</small>\n</center>\n<p>자, 본격적으로 태그, 트리거, 변수에 대한 설명에 들어가기에 앞서, GTM을 사용하지 않는 상황에 대한 이해가 필요할 것 같다.</p>\n<p>만약 GTM과 같은 툴을 사용하지 않는다면, PO나 DA, 마케터처럼 데이터를 원하는 사람들이 이벤트를 정의해주고 개발자는 이벤트 발송 로직을 어플리케이션의 소스 코드에 추가해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">login</span> <span class=\"token punctuation\">(</span>loginData<span class=\"token operator\">:</span> LoginData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 로그인 통신 및 데이터 파싱</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      body<span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>loginData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 로그인 성공 Google Analytics 이벤트 발송</span>\n    <span class=\"token function\">gtag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'event'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 로그인이 실패했을 때를 대비한 예외처리</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 여러분이 코드를 읽지 못한다고 해도 상관없다. 이 코드에서 가장 중요한 부분은 <code class=\"language-text\">gtag('event', 'login', { userId: user.id });</code>라는 코드, 단 한 줄이기 때문이다. 필자는 이 코드를 사용하여 로그인 이벤트가 발생했고, 로그인한 유저의 ID가 무엇인지를 Google Analytics에게 알린 것이다.</p>\n<p>물론 이런 식으로 개발자가 코드를 작성하여 이벤트를 직접 발송하더라도 별다른 문제가 발생하지는 않지만, 개발자는 개발자대로 비즈니스 로직과 전혀 관련없는 이벤트 코드를 별도로 관리해야한다는 어려움<small><strike>(귀찮음)</strike></small>이 있고, PO나 마케터, 데이터 분석가 같이 실제로 데이터를 필요로 하는 직군들은 개발자가 코드를 심어줄 때까지 아무것도 하지 못하고 계속 기다려야한다는 단점이 있다.</p>\n<p>그래서 GTM은 태그, 트리거, 변수와 같은 개념을 사용하여 개발자가 아닌 사람도 GTM이 제공하는 관리 페이지를 사용하여 손쉽게 이벤트를 정의할 수 있는 기능을 제공하는 것이다.</p>\n<p>이렇게 코드를 사용하여 이벤트를 발송하면 태그, 변수, 트리거같은 개념을 명확하게 구분하지 않아도 프로그램의 흐름에 따라 모든 것이 결정되지만, GTM은 이벤트가 프로그램의 흐름과 별도로 관리되는 것을 전제로 하고 있기 때문에 이 개념들을 명확하게 구분하고 있다.</p>\n<h2 id=\"태그\" style=\"position:relative;\">태그<a href=\"#%ED%83%9C%EA%B7%B8\" aria-label=\"태그 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>태그는 Google과 같은 제 3자에게 정보를 전송하는 자바스크립트 코드…라고 설명되어있긴 하지만 이게 바로 일반적으로 우리가 이벤트라고 부르는 것과 비슷한 것이다.</p>\n<p>기본적으로 GTM은 이벤트 트래킹 솔루션이 아니라 이벤트 트래킹 “관리” 솔루션이기 때문에, GTM이 직접 이벤트를 받아서 서버에 저장하는 것이 아니다. GTM은 Google Analytics과 같이 GTM에 연동된 다른 솔루션의 이벤트를 빌려오고 중계해주는 일종의 브로커 역할을 할 뿐이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5a276e9a2639ac3770142c6bd477e389/11a8f/tags.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkklEQVR42q2V226EMAxE+f+PbKvlFi4BAiEBEpjabveh7UOBNpIV7SqaHDtjk1hrsa4r/mslzi9Ytw2BYlkWEY8xYvv8zfslQdgUYcqRZiVeX16QZRmUUiiKAlVVoe/7a4JH9NiDJ5oV8zzDOSdkvIcQ5NBxHL8Gn933nQRtgWAV8rJC+ngIXV3XaJpGhM8uYwy89yS4TYjLBK17SZGFOE2ttexn6Dj4cqZMMBfYnUI/sGgrNw3DIGJ8Ix8+s6ZpEtHEUN1GF6HKgh6ilJS7rjtdu++RGDdi9hHjaISOH+ZZu1uCwzTAzAFtU1MNa6Hj+t02tiFj2yWio/q1JHTVLj8IVdXCkpgiq5RlKYZmwiuW+ULol4Cwbpjdh6mfhGzSW4RV3cB2Gorql1PbceuxbZjwluBIL+yIkj3IXuI/eTjcJnzTB7Ql25he+vnP4+vwBzYXkBc0cdJUUmYv3iakNsbmd9jZirE5OHV+nDuiCWKLuA0oaNrkeSbDge3Dg4LFL6dM0xVHXInKSvvxJ+FJeCfld8wZIlE6pC3bAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tags\" title=\"\" src=\"/static/5a276e9a2639ac3770142c6bd477e389/6af66/tags.png\" srcset=\"/static/5a276e9a2639ac3770142c6bd477e389/69538/tags.png 160w,\n/static/5a276e9a2639ac3770142c6bd477e389/72799/tags.png 320w,\n/static/5a276e9a2639ac3770142c6bd477e389/6af66/tags.png 640w,\n/static/5a276e9a2639ac3770142c6bd477e389/d9199/tags.png 960w,\n/static/5a276e9a2639ac3770142c6bd477e389/11a8f/tags.png 1272w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이것저것 외부 솔루션을 많이 지원해주지만 역시 추천은 구글 제품만...</small>\n</center>\n<p>이때 다른 솔루션의 이벤트에 “어떤 것을 담을 지”를 정하는 개념이 바로 “태그”이다. 즉, GTM의 태그는 Google Analytics의 이벤트가 될 수도 있고, Criteo의 태그가 될 수도 Hotjar의 트래킹 이벤트가 될 수도 있다는 것이다.</p>\n<h2 id=\"트리거\" style=\"position:relative;\">트리거<a href=\"#%ED%8A%B8%EB%A6%AC%EA%B1%B0\" aria-label=\"트리거 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>트리거는 한국어로 직역하면 방아쇠라는 뜻이다. 즉, 트리거는 단어 그대로 태그라는 총알을 언제 발사할 것인지를 정하는 방아쇠 역할을 한다.</p>\n<p>방아쇠를 당기는 시점은 유저가 회원가입 버튼을 클릭 했을 때나 상품 판매 페이지가 오픈되었을 때일 수도 있고, 혹은 사용자가 스크롤을 쭉 내리다가 이번에 새로 추가된 배너를 보았을 때일 수도 있다.</p>\n<p>사실 이렇게 특정 이벤트를 발송하는 시점을 정하는 것은 필자같은 개발자보다 실제로 데이터를 만져야하는 전문가들이 더 잘 알 것이므로 깊은 설명은 하지 않도록 하겠다.</p>\n<p>GTM은 상당히 여러 종류의 트리거를 지원하고 있는데, 당연히 이 트리거들이 의미하는 것이 정확히 무엇인지 알면 알수록 더 다양하고 세밀한 시점에 이벤트를 발송하도록 만들 수 있으니 한번 짚고 넘어가도록 하자.</p>\n<h3 id=\"페이지뷰\" style=\"position:relative;\">페이지뷰<a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80%EB%B7%B0\" aria-label=\"페이지뷰 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"페이지-뷰\" style=\"position:relative;\">페이지 뷰<a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%B7%B0\" aria-label=\"페이지 뷰 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>페이지 뷰는 웹 브라우저가 해당 페이지를 로드하기 시작하는 시점에 바로 발동되는 트리거이다. 개발자들을 위해 추가 설명하자면 아직 페이지의 리소스가 모두 로드되지 않은 시점이기 때문에 사용자는 페이지의 내용을 보지 못했지만 어찌되었든 해당 페이지의 서버와 연결은 되어 리소스를 로드하기는 시작한 상태이다.</p>\n<h4 id=\"dom-사용-가능\" style=\"position:relative;\">DOM 사용 가능<a href=\"#dom-%EC%82%AC%EC%9A%A9-%EA%B0%80%EB%8A%A5\" aria-label=\"dom 사용 가능 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>브라우저가 페이지의 DOM 렌더링을 모두 완료되었을 때 발동되는 트리거이다. 그렇기 때문에 DOM과 상호작용을 해야하는 태그라면 해당 트리거를 사용하는 것이 좋다.</p>\n<h4 id=\"창-로드\" style=\"position:relative;\">창 로드<a href=\"#%EC%B0%BD-%EB%A1%9C%EB%93%9C\" aria-label=\"창 로드 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>페이지에 필요한 모든 리소스가 전부 로드되었을 때 발동되는 트리거이다. 사용자는 제대로된 페이지의 UI를 보고 있을 가능성이 높다.</p>\n<h3 id=\"클릭\" style=\"position:relative;\">클릭<a href=\"#%ED%81%B4%EB%A6%AD\" aria-label=\"클릭 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"링크만\" style=\"position:relative;\">링크만<a href=\"#%EB%A7%81%ED%81%AC%EB%A7%8C\" aria-label=\"링크만 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>말 그대로 링크가 클릭될 때만 발동되는 트리거이다. 이 트리거는 “태그 대기”라는 옵션을 제공하고 있는데, 이 옵션을 사용하면 유저가 링크를 클릭하고 나면 태그를 발송하고 나서 사용자를 이동시킨다.</p>\n<p>그 이유는 태그를 발송하기 전에 페이지가 이동되어버린다면 태그 발송 액션 자체가 무효화될 위험이 있기 때문인데, 반대로 유저는 링크를 클릭해도 태그가 발송되는 동안 약간의 시간을 더 기다렸다가 페이지가 이동되는 경험을 가지게 되므로 UX에는 딱히 좋지 않을 수도 있다.</p>\n<h4 id=\"모든-요소\" style=\"position:relative;\">모든 요소<a href=\"#%EB%AA%A8%EB%93%A0-%EC%9A%94%EC%86%8C\" aria-label=\"모든 요소 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>모든 요소가 클릭될 때 발동되는 트리거이며, 여기에는 당연히 링크도 포함된다.</p>\n<h3 id=\"사용자-참여\" style=\"position:relative;\">사용자 참여<a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B0%B8%EC%97%AC\" aria-label=\"사용자 참여 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"스크롤-깊이\" style=\"position:relative;\">스크롤 깊이<a href=\"#%EC%8A%A4%ED%81%AC%EB%A1%A4-%EA%B9%8A%EC%9D%B4\" aria-label=\"스크롤 깊이 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>사용자가 전체 페이지의 일정 비율 이상 스크롤 했을 때 트리거가 발동된다. 세로 스크롤 깊이는 아래로 스크롤 했을 때를 기준으로, 가로 스크롤 깊이는 오른쪽으로 스크롤 했을 때를 기준으로 한다. 깊이는 비율 또는 픽셀로 입력할 수 있다.</p>\n<h4 id=\"양식-제출\" style=\"position:relative;\">양식 제출<a href=\"#%EC%96%91%EC%8B%9D-%EC%A0%9C%EC%B6%9C\" aria-label=\"양식 제출 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>페이지에 있는 <code class=\"language-text\">Form</code> 엘리먼트에서 <code class=\"language-text\">Submit</code> 이벤트가 발생하였을 때 트리거가 발동된다.</p>\n<p>단, 이 트리거를 사용할 때는 Form 엘리먼트를 사용하지 않는 경우도 있고, 혹여 Form 엘리먼트를 사용하고 있더라도 Form 엘리먼트의 Submit 이벤트가 브라우저를 강제로 새로고침하는 기능을 가지고 있기 때문에 개발자들이 Submit 이벤트를 강제로 취소시키는 경우가 있다는 점을 유의해야한다.</p>\n<p>그래서 이 트리거를 사용하고 싶다면, 해당 페이지에서 데이터를 어떤 방식으로 서버에 제출하고 있는지 개발자에게 미리 한번 쯤 물어보는 것을 추천한다.</p>\n<h4 id=\"요소-공개-상태\" style=\"position:relative;\">요소 공개 상태<a href=\"#%EC%9A%94%EC%86%8C-%EA%B3%B5%EA%B0%9C-%EC%83%81%ED%83%9C\" aria-label=\"요소 공개 상태 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>요소 공개 상태는 어떤 요소가 화면에 노출되었을 때 발동되는 트리거이다. 화면에 노출되었다는 기준은 스크롤 같은 행위를 통해 해당 요소가 화면 안으로 들어온 경우일 수도 있고, 토글 버튼과 같이 조건에 따라 노출되는 요소가 노출된 경우일 수도 있다.</p>\n<p>GTM은 각 요소의 노출 기준 외에도 “트리거 실행 시점”이라는 기능을 통해 요소가 노출될 때마다 트리거를 발동할 것인지, 처음 노출될 때 한번만 트리거를 발동할 것인지와 같은 옵션을 제공하고 있다.</p>\n<h3 id=\"기타\" style=\"position:relative;\">기타<a href=\"#%EA%B8%B0%ED%83%80\" aria-label=\"기타 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"기록-변경\" style=\"position:relative;\">기록 변경<a href=\"#%EA%B8%B0%EB%A1%9D-%EB%B3%80%EA%B2%BD\" aria-label=\"기록 변경 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>기록 변경 이벤트에 기반한 트리거는 URL 해시가 변경되거나 사이트에서 HTML5 History API의 <code class=\"language-text\">pushState</code> 메소드를 사용할 때 태그를 실행한다. 예를 들어 이 트리거는 SPA 어플리케이션에서 가상 페이지뷰를 추적하는 태그를 실행하려고 할 때 유용하다.</p>\n<p>다시 말해 실제로 페이지를 이동하던 하지 않던 브라우저 히스토리를 건드리면 해당 트리거가 실행된다는 것이다.</p>\n<h4 id=\"맞춤-이벤트\" style=\"position:relative;\">맞춤 이벤트<a href=\"#%EB%A7%9E%EC%B6%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8\" aria-label=\"맞춤 이벤트 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>아래에서 다시 후술하겠지만 GTM은 <code class=\"language-text\">dataLayer</code>라는 자바스크립트 전역 변수를 감시하고 있으며, 이 변수에 데이터가 들어오는 것을 감지하여 트리거를 발동하거나 변수에 값을 할당하고 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6fa81/custom-event.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbElEQVR42q2Q0Q2AMAhE2X8+V/DTtAGVCm3PSpzASvISuI+Dg3JO0FLQekdrbQozAx1aYvijaq0gWxfwuFJkRx9XzuDuIN9TNO51iJji8aDMguM8Y8MvkZkZD6o6/csw3FICi7yxPcSvXJfhBqafKg6L/TB6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"custom event\" title=\"\" src=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6af66/custom-event.png\" srcset=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/69538/custom-event.png 160w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/72799/custom-event.png 320w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6af66/custom-event.png 640w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/d9199/custom-event.png 960w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/21b4d/custom-event.png 1280w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6fa81/custom-event.png 1856w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>위 그림처럼 GTM 관리 페이지에서 <code class=\"language-text\">my-custom-event</code>라는 이름의 맞춤 이벤트를 정의해놓으면, GTM은 <code class=\"language-text\">dataLayer</code> 배열에 <code class=\"language-text\">event: my-custom-event</code>라는 값이 들어오는지 감시하다가 저 값이 들어오면 트리거를 발동하게 된다.</p>\n<p>즉, GTM에서 기본으로 제공하지 않는 복잡한 상황이나 특수한 상황을 잡아내어 트리거를 발동하고 싶을 때 코드 상으로 자유롭게 트리거를 발동할 수 있다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 트리거 발동</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> <span class=\"token string\">'my-custom-event'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 이렇게 <code class=\"language-text\">dataLayer</code> 배열을 사용하여 트리거를 발동하거나 변수에 값을 할당하는 것은 개발자가 직접 코드를 심어줘야하기는 하지만, 다른 이벤트 솔루션에 비하면 코드량이 상당히 적고 트리거를 발동하는 방법 또한 간단하기 때문에 관리가 용이한 편이다.<small><strike>(전역 변수를 사용해야한다는 것만 빼면…)</strike></small></p>\n<h2 id=\"변수\" style=\"position:relative;\">변수<a href=\"#%EB%B3%80%EC%88%98\" aria-label=\"변수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>변수란 말 그대로 변할 수 있는 수나 값을 이야기한다. 변수는 이름(Key)와 값(Value)로 구성되어 있으며, GTM은 항상 이 변수들을 감시하고 있다. 변수는 트리거가 발동되는 시점을 컨트롤할 때 사용될 수도 있고, GTM 내부에서 반복적으로 사용되어야 하는 값들을 저장해놓기도 한다.</p>\n<p>예를 들어 전자의 경우 지금 이 버튼을 클릭한 유저의 아이디가 1일 경우에 이벤트를 발송해라! 라는 조건같은 것을 이야기하는 것이고, 후자의 경우에는 Google Analytics나 Google Adwards에서 제공하는 ID 같은 값을 저장하는 경우를 의미한다.</p>\n<h3 id=\"탐색\" style=\"position:relative;\">탐색<a href=\"#%ED%83%90%EC%83%89\" aria-label=\"탐색 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"http-리퍼러\" style=\"position:relative;\">HTTP 리퍼러<a href=\"#http-%EB%A6%AC%ED%8D%BC%EB%9F%AC\" aria-label=\"http 리퍼러 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>HTTP 리퍼러를 반환한다. 리퍼러란 기본적으로 “이전 페이지 주소”를 의미한다고 생각하면 편하다. 리퍼러는 여러 광고 매체를 통해 유저를 유입시키고 있는 마케터에게 굉장히 중요한 값일 수 있는데, 유저가 어떤 광고 매체를 통해 우리의 서비스에 유입되었는지를 알 수 있는 가장 명확한 지표이기 때문이다. 참고로 이 값은 <code class=\"language-text\">document.referrer</code>에 있는 값을 사용하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/23e1038d472a6a78bfea69a484bb3302/f3015/component.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAv0lEQVR42qWSSw7DIAxEuf8tu8yn0EAABzBTcNtIXSYgDRghPc3YqBgjvPeotYpGl8o5o5Qilx90RKo7XNcVzjnsuxcwtwe+COrGci7NYXMXI6FyAXM5rff0V8RcRWreEh6zh40V7gAsVZjQavr082pXlYsZL0fwR/2KYUNBaOctYM9PrY9EEVz+Y9+acgfaNhBjDJ5PjRDCOfHbwG2z0FpjmiaZeEppzKFzuwCXZZHvMxS5b0TU/uAOa63UI8A3ojJmrfTRar0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"component\" title=\"\" src=\"/static/23e1038d472a6a78bfea69a484bb3302/6af66/component.png\" srcset=\"/static/23e1038d472a6a78bfea69a484bb3302/69538/component.png 160w,\n/static/23e1038d472a6a78bfea69a484bb3302/72799/component.png 320w,\n/static/23e1038d472a6a78bfea69a484bb3302/6af66/component.png 640w,\n/static/23e1038d472a6a78bfea69a484bb3302/d9199/component.png 960w,\n/static/23e1038d472a6a78bfea69a484bb3302/21b4d/component.png 1280w,\n/static/23e1038d472a6a78bfea69a484bb3302/f3015/component.png 1804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>또한 GTM에서 제공하고 있는 구성요소 유형 메뉴를 사용하여 전체 URL만 가져올 것인지, 경로만 가져올 것인지 등의 세부 옵션을 선택할 수 있다.</p>\n<p>비개발 직군들을 위해 간단히 설명하자면 URL은 아래 그림과 같이 여러 구성요소들로 이루어져있다. 이 구성요소들은 각자 담고 있는 정보의 의미가 다르고, 이 구성요소들을 모두 퉁쳐서 URL 또는 URI라고 부르는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e25190005d12938c253cc72ca06777b1/5bd27/uri-structure.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVR42h2MX0+CcAAA+f6PPbae6qG1XGuKytLE0JW62nKaGvkPDIQE4YdoU9CLtd12u5eTzu47XFSGeJsDJCdadQM590qzOmUfgxMbKN0cxbcbpmKIOzBoXSt08xqd2xpiPMbvFdHVK8LhI1LP8Jk4EftsRsba22HO1qzcmGMKv8cYOzRZ+FM2qWAf7fCNJYHhElgrku2GJLLYOmMSYSP1TcHsZ4tpBlhGgGOJzAJ7EWKZ4b8d8Z1N5wT2D2KxIlr6rOcOke0RZB27LgdvwilNkM4rIy61GaXyEK2sUyuOqCs6VXnAk/KF+tCnNpBR9QJdrYFeavOptBnIz/TzDT4KLyyaKv77Hek24A//mh4jJrvfIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"uri structure\" title=\"\" src=\"/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png\" srcset=\"/static/e25190005d12938c253cc72ca06777b1/69538/uri-structure.png 160w,\n/static/e25190005d12938c253cc72ca06777b1/72799/uri-structure.png 320w,\n/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png 640w,\n/static/e25190005d12938c253cc72ca06777b1/d9199/uri-structure.png 960w,\n/static/e25190005d12938c253cc72ca06777b1/21b4d/uri-structure.png 1280w,\n/static/e25190005d12938c253cc72ca06777b1/5bd27/uri-structure.png 1432w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>혹여 굳이 전체 URL이 필요없고 URL 내에 들어있는 특정 정보만 필요한 경우에는 구성요소 유형 메뉴를 사용하여 데이터를 필터링하는 것을 추천한다.</p>\n<h4 id=\"url\" style=\"position:relative;\">URL<a href=\"#url\" aria-label=\"url permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>현재 페이지의 URL을 반환한다. 리퍼러와 마찬가지로 구성요소 유형 메뉴를 사용하여 원하는 값을 필터링해서 가져올 수 있다.</p>\n<h3 id=\"페이지-변수\" style=\"position:relative;\">페이지 변수<a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%B3%80%EC%88%98\" aria-label=\"페이지 변수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"당사-쿠키\" style=\"position:relative;\">당사 쿠키<a href=\"#%EB%8B%B9%EC%82%AC-%EC%BF%A0%ED%82%A4\" aria-label=\"당사 쿠키 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>사용자가 머물고 있는 도메인의 쿠키 중에 이름이 일치하는 쿠키의 값을 반환한다. 쿠키는 브라우저에 저장되는 작은 단위의 텍스트 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ThVbdUg.; APISID=Twvmlsi3NXZBQQKv/AfV5gB9toKeSC3cui; SAPISID=qcBt_OBeNnbuq1sG/AuZto1M1fXt3YRBoD; __Secure-APISID=Twvmlsi3NXZBQQKv/AfV5gB9toKeSC3cui; __Secure-3PAPISID=qcBt_OBeNnbuq1sG/AuZto1M1fXt3YRBoD; PREF=al=ko&amp;f6=400&amp;f4=4000000; wide=1; SIDCC=AJi4QfFq_T4Wv10c3rnS-qZdLNrXY_FS-TQVBAdC6uD4uTmYU0xW3lCfJd4DcJqMecClwMXWbQ</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>쿠키는 <code class=\"language-text\">key=value;key2=value2;</code> 포맷으로 이루어진 일종의 문자열인데, 브라우저 자체에서 텍스트 파일로 관리하고 있기 때문에 사용자가 브라우저를 종료하더라도 값이 삭제되지 않는다. 그렇기 때문에 쿠키는 “3일 동안 이 창 열지 않기”와 같이 브라우저의 종료 여부와 상관없이 유지되어야 하는 상태를 관리하기 위해 자주 사용되는 한다.</p>\n<p>또한 쿠키는 브라우저 자체에 저장되기 때문에 각자 다른 사이트들의 쿠키가 섞이지 않도록 각 사이트를 구분하는 도메인 값을 가지고 있는데, 만약 쿠키가 <code class=\"language-text\">evan.com</code>의 도메인을 가지고 있다면 <code class=\"language-text\">dev.evan.com</code>, <code class=\"language-text\">www.evan.com</code> 등의 사이트 또한 같은 사이트라고 인식되어 쿠키가 공유되지만, 만약 쿠키의 도메인이 <code class=\"language-text\">dev.evan.com</code>과 같이 서브 도메인까지 가지고 있는 쿠키라면 <code class=\"language-text\">www.evan.com</code>과 같은 사이트는 다른 사이트로 인식이 되어 사용할 수 없다는 점을 유의해야한다.</p>\n<h4 id=\"데이터-영역-변수\" style=\"position:relative;\">데이터 영역 변수<a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%98%81%EC%97%AD-%EB%B3%80%EC%88%98\" aria-label=\"데이터 영역 변수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>트리거의 맞춤 이벤트를 설명할 때 이야기했던 <code class=\"language-text\">dataLayer</code>를 사용하여 동적으로 값을 할당할 수 있는 변수이다. 이 변수는 GTM에서 특별히 취급하고 있는 변수이기 때문에 개발자가 직접 코드 상에서 전역 변수로 선언을 해주고 초기화를 해줘야한다.</p>\n<p>그리고 코드 상에서 이 배열에 <code class=\"language-text\">push</code> 메소드를 사용하여 데이터를 입력하고, 이때 입력된 키를 기준으로 값을 찾아서 데이터 영역 변수로 사용하게 된다. 말로만 설명하면 어려우니 예시를 한번 보도록 하자.</p>\n<p>먼저 GTM의 관리 페이지에서 데이터 영역 변수를 하나 생성하고 데이터 영역 변수 이름을 <code class=\"language-text\">userId</code>로 설정해두었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4b9a39df107b45ec8fe2d85bc7294370/ec5f6/dataLayer.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.874999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAYUlEQVR42qXOUQ7AIAgDUO9/WOOMExG0E5bsAKNJP+CjeenuHVetWGth740V6BRBYmaMMXzQGomqIs05kXNGaw31SE35NyL6ConIlTYeFpqslOJHRPcNEo2jY3/YYKQiggc5etulAGQowgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dataLayer\" title=\"\" src=\"/static/4b9a39df107b45ec8fe2d85bc7294370/6af66/dataLayer.png\" srcset=\"/static/4b9a39df107b45ec8fe2d85bc7294370/69538/dataLayer.png 160w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/72799/dataLayer.png 320w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/6af66/dataLayer.png 640w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/d9199/dataLayer.png 960w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/21b4d/dataLayer.png 1280w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/ec5f6/dataLayer.png 1852w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>즉, 방금 GTM 관리 페이지에서 생성한 이 변수는 코드 상에 선언된 <code class=\"language-text\">dataLayer</code>라는 배열에 <code class=\"language-text\">userId</code>라는 키를 가진 데이터가 입력되면 그 변수를 사용하겠다는 의미인 것이다. 만약, 이 변수에 값을 할당하고 싶다면 코드 상에서 <code class=\"language-text\">{ userId: 1 }</code>과 같이 해당 변수의 이름과 동일한 키를 가진 객체를 <code class=\"language-text\">dataLayer</code> 배열로 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">userId</span><span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 이렇게 입력된 변수를 이벤트에 담을 수도 있고, 이 변수에 값이 할당된 시점을 감지하여 트리거를 걸 수도 있다.</p>\n<h4 id=\"맞춤-자바스크립트\" style=\"position:relative;\">맞춤 자바스크립트<a href=\"#%EB%A7%9E%EC%B6%A4-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"맞춤 자바스크립트 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>변수의 값이 자바스크립트 함수의 결과로 설정된다. 여기에 사용되는 자바스크립트 함수는 값을 반환하는 익명 함수의 형태를 가져야 한다.</p>\n<p>이 변수는 말 그대로 함수를 실행시켜서 나온 결과물을 그대로 사용하는 것이기 때문에, 프로그래밍에서 사용하는 조건문이나 반복문 같은 기능을 그대로 사용할 수 있다는 것이 장점이다.</p>\n<p>예를 들어 유저가 어떤 요소를 클릭했을 때 클릭한 시간을 <code class=\"language-text\">2020-04-11T07:56</code>과 같은 ISO 포맷의 문자열로 보고 싶다면, 이런 맞춤 자바스크립트를 작성하면 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>결국 이 자바스크립트 코드는 여러분의 어플리케이션에 삽입되어 실행하는 것이기 때문에, 만약 여러분의 어플리케이션에 전역 변수가 있다면 해당 변수에 접근할 수도 있다.</p>\n<h4 id=\"자바스크립트-변수\" style=\"position:relative;\">자바스크립트 변수<a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B3%80%EC%88%98\" aria-label=\"자바스크립트 변수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>말 그대로 어플리케이션에 선언되어있는 자바스크립트 전역 변수를 그대로 가져와서 GTM 변수로 사용한다.</p>\n<p>만약 본인이 전역 변수의 개념을 잘 모른다고 해도 상관없다. 전역 변수를 간단하게 알아낼 수 있는 방법이 있으니 말이다. 우선 여러분의 어플리케이션에 접속한 뒤 브라우저 개발자 도구를 켜고 콘솔에 <code class=\"language-text\">window</code>를 입력하고 엔터를 쳐보면 다음과 같은 데이터들이 주르륵 나올 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/127c25629e099e5b136d9b4782552e8e/26162/window.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 29.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/UlEQVR42nWQWXaDMAxF2UnL4EmyMVBISAjsf1evz4S/tB/3SEeyZetW27ogpYA8KFL0kGBIh561lDyiOKhY5D6wpux5mO4L1tRw9pNqzwee44F+XKAxQTQixggRhbcO3jlY4r1HCALnPCzrxlh0XfdB9ep3bHnDNI643W5Y5gfGYUaQAOEluYYVRIRD/flgCOH/gcdwYJomrOsd9+WFqBPq+hstDzSkbVs0pL1omuaMfw9MO9bhCU2JHjO9jVwzcC1LJxbemDO3jK7kJRYN1r3rF0WBYa96pg17fmDiOj9kVq7FC6dLxsxDZT1lHvmD0lPV03Fx+s6LCj39/gIJcLI5AV/ZDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"window\" title=\"\" src=\"/static/127c25629e099e5b136d9b4782552e8e/6af66/window.png\" srcset=\"/static/127c25629e099e5b136d9b4782552e8e/69538/window.png 160w,\n/static/127c25629e099e5b136d9b4782552e8e/72799/window.png 320w,\n/static/127c25629e099e5b136d9b4782552e8e/6af66/window.png 640w,\n/static/127c25629e099e5b136d9b4782552e8e/d9199/window.png 960w,\n/static/127c25629e099e5b136d9b4782552e8e/21b4d/window.png 1280w,\n/static/127c25629e099e5b136d9b4782552e8e/26162/window.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>쨔잔. 적나라하게 드러난 Window 객체의 모습</small>\n  <br>\n</center>\n<p>자바스크립트의 전역 변수는 반드시 글로벌 객체인 <code class=\"language-text\">window</code>에 담기도록 설계되어 있다. 즉, 콘솔에서 <code class=\"language-text\">window</code> 객체의 내용물을 찍어보았을 때 나오는 이 값들이 여러분이 GTM에 끌어다 사용할 수 있는 전역 변수들이라고 이해하면 된다.</p>\n<h3 id=\"페이지-요소\" style=\"position:relative;\">페이지 요소<a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9A%94%EC%86%8C\" aria-label=\"페이지 요소 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"요소-공개-상태-1\" style=\"position:relative;\">요소 공개 상태<a href=\"#%EC%9A%94%EC%86%8C-%EA%B3%B5%EA%B0%9C-%EC%83%81%ED%83%9C-1\" aria-label=\"요소 공개 상태 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>어떤 요소가 화면에 공개된 상태를 가져온다. 다시 말해 해당 요소가 화면에 표시되고 있는지 아닌지에 대한 값이다.</p>\n<p>ID나 CSS 선택자를 사용하여 요소를 선택할 수 있으나 만약 CSS 선택자를 사용한다면 동시에 여러 개의 요소가 선택될 수도 있으며, 이 경우 가장 첫 번째 요소만을 가져오니 주의하도록 하자.</p>\n<p>만약 본인이 개발자가 아니라고 해도 내가 원하는 요소가 어떤 DOM 엘리먼트인지 간편하게 알아낼 수 있으니 걱정하지말자. Google Chrome 기준으로 여러분이 알고 싶은 요소 위에 마우스 커서를 위치시키고 오른쪽 버튼을 클릭하면 도구 항목이 노출되는데, 여기서 “검사” 메뉴를 클릭하면 개발자 도구가 노출되며 여러분이 검사를 지정한 요소가 자동으로 선택된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5b4a36eed598fb2bf2724948f040109e/91e7e/inspect_result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBUlEQVR42q1QX0+DMBzkW/uJ9hmML/qibwpjWbaMTCID+RNXoKUtKx2cbTFmifNtv+Ry/V3Ty109mJG9hD5rTNNkNgv84Wkaf+7xq4/jrF3q3kn2aDOC5kBQfjLkBUeRd6hKjizrUBjOzd62PQiRSFOGJKEoKw7GOIQQoJQ6dobNkWHzdEC1zBFvaqzWLYKgxm7HEIYNoojh9e2IoujxHnfwA4JgSbDfd8ZQQMrZkDHmknq0tamY8damtsL5AuOooLXlAUr10MPJnS2srtSMYRhcQvsF3tbUvfc/8LxOIbgA/wf2wTVt1rkzdZUftzXuFiEWLwluMV5UUDyscvjx120MceP5BtIXayksc3klAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"inspect result\" title=\"\" src=\"/static/5b4a36eed598fb2bf2724948f040109e/6af66/inspect_result.png\" srcset=\"/static/5b4a36eed598fb2bf2724948f040109e/69538/inspect_result.png 160w,\n/static/5b4a36eed598fb2bf2724948f040109e/72799/inspect_result.png 320w,\n/static/5b4a36eed598fb2bf2724948f040109e/6af66/inspect_result.png 640w,\n/static/5b4a36eed598fb2bf2724948f040109e/91e7e/inspect_result.png 692w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이때 요소 위에 툴팁으로 노출된 <code class=\"language-text\">button.btn.gtm-text-input__variable-btn</code> 이라는 것이 바로 CSS 선택자다. 그러나 앞서 이야기 했듯이, CSS 선택자는 고유한 ID 같은 것이 아니다. 같은 선택자로도 여러 개의 요소가 선택될 수 있기 때문에 되도록이면 ID를 사용하는 것이 좋으며, ID가 설정되어 있는 요소 같은 경우 <code class=\"language-text\">#foo</code>와 같이 <code class=\"language-text\">#</code>으로 시작하는 CSS 선택자가 붙어 있을 것이다.</p>\n<p>출력 유형에는 참/거짓 또는 비율이 있으며, 참/거짓을 선택했을 시 해당 요소가 화면에 얼마나 보일 때 “보인다”라고 정의할 것인지를 결정하는 최소 비율을 정해줄 수 있다.</p>\n<p>참고로 이 최소 비율 값은 투명도가 아니라 해당 요소가 얼마나 화면에 걸쳐 보이는 지를 의미한다. 즉, 반만 짤려보이면 50%인 셈이다.</p>\n<h4 id=\"dom-요소\" style=\"position:relative;\">DOM 요소<a href=\"#dom-%EC%9A%94%EC%86%8C\" aria-label=\"dom 요소 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>값이 DOM 엘리먼트의 텍스트 또는 지정된 DOM 요소 속성의 값으로 설정된다. 선택 사항인 속성 이름이 설정되면 속성에서 지정된 값이 변수의 값에서 반환된다. 그렇지 않으면 DOM 요소 내의 텍스트가 변수의 값이 된다.</p>\n<p>DOM 엘리먼트라는 것은 일반적으로 HTML을 사용하여 작성하는 그 구조를 생각하면 편하다. 간단한 예시로 요런 DOM이 있다고 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>하이!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>제출하기<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>만약 필자가 GTM의 관리 페이지에서 DOM 요소 변수를 <code class=\"language-text\">#foo</code> 요소로 지정했다면 해당 변수의 값은 <code class=\"language-text\">span</code> 엘리먼트가 가지고 있는 텍스트인 <code class=\"language-text\">하이!</code>가 될 것이다. 그러나 만약 필자가 DOM 요소 변수를 <code class=\"language-text\">#button</code>으로 지정하고 속성 이름 항목에 <code class=\"language-text\">data-type</code>을 입력해놓았다면 해당 변수의 값은 <code class=\"language-text\">submit</code>이 된다.</p>\n<h4 id=\"자동-이벤트-변수\" style=\"position:relative;\">자동 이벤트 변수<a href=\"#%EC%9E%90%EB%8F%99-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B3%80%EC%88%98\" aria-label=\"자동 이벤트 변수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>자동 이벤트 변수는 클릭, 요소 공개와 같이 HTML 요소와 관련있는 트리거를 통해 이벤트가 발생될 때 자동으로 요소와 관련된 정보를 수집한다.</p>\n<p>자, 사용자가 어떤 <code class=\"language-text\">img</code> 요소를 클릭했을 때 그 이미지가 정확히 무엇이었는지 알고 싶은 상황을 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/test.png<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>테스트 이미지<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>우리는 클릭 트리거를 사용하여 사용자가 저 이미지를 클릭했다는 사실은 알 수 있지만, 이미지 자체를 변수에 담지 않는 이상 사용자가 어떤 이미지를 클릭한 것인지는 알 방도가 없다. 이때 우리가 사용할 수 있는 속성이 바로 <code class=\"language-text\">alt</code>이다.</p>\n<p><code class=\"language-text\">alt</code> 속성은 혹시 모를 상황에 이미지가 노출되지 않으면 대체(Alternate)로 노출되는 텍스트이다. 또한 시각 장애인과 같이 이미지를 보는 것 자체가 불가능한 경우에는 컴퓨터가 저 텍스트를 음성으로 변환하여 읽어줄 수도 있기 때문에, 웹 표준에서는 <code class=\"language-text\">img</code> 요소를 사용할 때 반드시 <code class=\"language-text\">alt</code> 속성을 함께 사용하도록 권고하고 있다.</p>\n<p>즉, <code class=\"language-text\">alt</code> 속성에는 “이 이미지가 어떤 이미지인지”를 잘 표현하는 텍스트가 들어가야 하기 때문에 우리는 저 속성이 가지고 있는 텍스트를 통해 사용자가 어떤 이미지를 보았고 클릭한 것인지 간접적으로 알 수 있는 것이다.</p>\n<p>자동 이벤트 변수는 HTML 요소와 관련있는 트리거가 발동되었을 때 해당 요소의 정보를 자동으로 수집하기 위한 목적으로 사용되기 때문에, 이런 상황에서 굉장히 유용하게 사용될 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/763f96936678d21802d69b89f80c4767/fcbaf/alt.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeUlEQVR42qWRQQ6EMAhFe/8zeoGJOystIPQrMZoZdzIkbCB5PKAwC1g2uDvMHGPgryxzdUwfBdOCdSVc8RYUMmaGIrpB1AJxWI6jeWXSkHtHI/opBjhOkIkiIiBqD6vTMgVk5vsZ58oAtYYYlAL2zqi1QlW/HpI33AGLpitrhdVudgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt\" title=\"\" src=\"/static/763f96936678d21802d69b89f80c4767/6af66/alt.png\" srcset=\"/static/763f96936678d21802d69b89f80c4767/69538/alt.png 160w,\n/static/763f96936678d21802d69b89f80c4767/72799/alt.png 320w,\n/static/763f96936678d21802d69b89f80c4767/6af66/alt.png 640w,\n/static/763f96936678d21802d69b89f80c4767/fcbaf/alt.png 895w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>요소 속성인 `alt`가 가지고 있는 값을 자동으로 가져와줘!</small>\n  <br>\n</center>\n<p>이 변수는 이런 상황 뿐 아니라 <code class=\"language-text\">form</code> 요소가 제출될 때 해당 폼의 ID를 가져오거나, 링크가 클릭되었을 때 해당 링크의 텍스트나 타겟 URL을 가져오는 등 다양한 경우에 응용될 수 있기 때문에 시멘틱 마크업과 같이 HTML이 작성되는 방법에 대한 어느 정도 지식이 있다면 활용도가 굉장히 높은 변수이다.</p>\n<h3 id=\"유틸리티\" style=\"position:relative;\">유틸리티<a href=\"#%EC%9C%A0%ED%8B%B8%EB%A6%AC%ED%8B%B0\" aria-label=\"유틸리티 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"맞춤-이벤트-1\" style=\"position:relative;\">맞춤 이벤트<a href=\"#%EB%A7%9E%EC%B6%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-1\" aria-label=\"맞춤 이벤트 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>맞춤 이벤트 변수는 트리거 섹션에서 설명했던 <a href=\"#%EA%B8%B0%ED%83%80\">맞춤 이벤트 트리거</a>와 관련이 있다. 앞서 설명한대로 맞춤 이벤트 트리거는 <code class=\"language-text\">dataLayer</code> 배열에 <code class=\"language-text\">event</code>라는 키를 가진 객체가 주입될 때 발동하게 되는데, 이때 맞춤 이벤트 변수는 해당 이벤트의 이름으로 자동 할당된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 트리거 발동</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> <span class=\"token string\">'my-custom-event'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">맞춤 이벤트 변수: my-custom-event</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"상수\" style=\"position:relative;\">상수<a href=\"#%EC%83%81%EC%88%98\" aria-label=\"상수 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>변경될 수 있다는 의미를 지닌 변수와 달리 상수는 변하지 않는 값을 의미한다. Google Analytics나 Criteo와 같은 외부 솔루션을 사용할 때 계정마다 인증을 위한 키를 발급해주는데, 이런 키들을 GTM에 상수로 등록해놓고 편하게 관리하는 경우에도 사용된다.</p>\n<h4 id=\"임의의-숫자\" style=\"position:relative;\">임의의 숫자<a href=\"#%EC%9E%84%EC%9D%98%EC%9D%98-%EC%88%AB%EC%9E%90\" aria-label=\"임의의 숫자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>말 그대로 0 ~ 2,147,483,647 사이의 랜덤한 숫자를 매번 변수에 할당해주는 기능을 가지고 있는 유틸리티 변수이다.</p>\n<h4 id=\"참고표\" style=\"position:relative;\">참고표<a href=\"#%EC%B0%B8%EA%B3%A0%ED%91%9C\" aria-label=\"참고표 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>참고표는 지정한 입력 변수가 참고표에 입력해둔 조건에 맞아떨어진다면 특정한 출력을 내보내는 변수이다. 즉, 입력 변수가 참고표의 입력 란에 있는 문자열을 포함하고 있다면 출력 란에 있는 값을 반환하는 일종의 조건문을 담고 있는 테이블이라고 생각하면 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/e0577/table.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVR42q1RyxKCMAzs/3+lVy2DSqC06WNtipXHQQXdmWU6JNkkG2UdYxgZMUakhB+YChWNESfNYGtKoGKvoPcBIUQoZoaz9tVh5pEJAWWzWNu2z5UnMXkLj6AICt8hLb34JOicQ6X3frW2TCmWSMNhMMWjrTUhhFzL81Gk4HYndF33nHSdbIzJ/12JbxsKpV5yqo+qoQgaA1L0+AeUzoLnSwOtdZmoXq2u9w2WeUo+fT/kS19B1OfgdF0iKg32TvgAU1sXz1yrLDQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"table\" title=\"\" src=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/6af66/table.png\" srcset=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/69538/table.png 160w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/72799/table.png 320w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/6af66/table.png 640w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/d9199/table.png 960w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/21b4d/table.png 1280w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/e0577/table.png 1796w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>필자가 입력 변수로 선택한 “리퍼러”라는 값은 사용자가 필자의 블로그에 들어오기 전에 어떤 페이지에 있었는가를 담고 있는 변수이다. 이때 필자는 참고표를 사용하여 리퍼러에 <code class=\"language-text\">evan-moon.github.io</code>라는 문자열이 포함되어 있다면 <code class=\"language-text\">EVAN_BLOG</code>라는 값을, 만약 아니라면 <code class=\"language-text\">EXTERNAL_PAGE</code>라는 값을 기본값으로 이 변수에 담기도록 세팅해놓은 것이다.</p>\n<p>이때 행을 하나 더 추가하여 입력에는 <code class=\"language-text\">google.com</code>을 출력에는 <code class=\"language-text\">GOOGLE</code>과 같은 값을 담을 수도 있겠다.</p>\n<h4 id=\"정규식-표\" style=\"position:relative;\">정규식 표<a href=\"#%EC%A0%95%EA%B7%9C%EC%8B%9D-%ED%91%9C\" aria-label=\"정규식 표 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>정규식 표는 참고표와 동일하게 입력 변수가 정규식 표의 입력 란에 있는 조건에 매칭되는 경우 특정한 출력 값을 반환하는 조건문을 담고 있는 테이블이다. 그러나 정규식 표에는 문자열을 가지고 놀기에 아주 좋은 도구인 정규식을 사용할 수 있기 때문에, 단순히 특정 문자열의 포함 여부만을 검사할 수 있는 참고표보다 더 강력한 기능을 제공한다.</p>\n<p>정규식 표의 사용 방법은 참고표와 완벽하게 동일하지만, 정규식 표의 입력 란에는 단순한 문자열이 아닌 정규식을 넣어줘야 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/248c54e49684bee5a093700cb1f23e95/fa60d/regex.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVR42q2R6wqDMAyF+/6PuZ8DW2e16S09azI6UBioLHBUYnOSfDWUCnzIyDmDuaE13JLUioynhsdUkWjTxIirhqVUlUkpIWxbT7aD7k1qiCKcc+DK37GrfjPuhBF2MUad6leMqU8ZhhDg/QIiwrqu+h4GtVbIBltHMs9zZ1R2DUSSGzV6KQLSLgEUO8tuHjvTcZi56vQ5F/0nxUfWkpMzo5F5vsQwapd/hHErw7q5r+R0RdHncvg0t52hPISdtU45TZNFSrlz9Wp+1fANN7YW/GyjVL8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"regex\" title=\"\" src=\"/static/248c54e49684bee5a093700cb1f23e95/6af66/regex.png\" srcset=\"/static/248c54e49684bee5a093700cb1f23e95/69538/regex.png 160w,\n/static/248c54e49684bee5a093700cb1f23e95/72799/regex.png 320w,\n/static/248c54e49684bee5a093700cb1f23e95/6af66/regex.png 640w,\n/static/248c54e49684bee5a093700cb1f23e95/d9199/regex.png 960w,\n/static/248c54e49684bee5a093700cb1f23e95/21b4d/regex.png 1280w,\n/static/248c54e49684bee5a093700cb1f23e95/fa60d/regex.png 1792w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>필자가 방금 생성한 이 변수는 입력 변수로 리퍼러를 받아온 후 <code class=\"language-text\">^(http(s)?:\\/\\/)(.+\\.github\\.io)</code> 이라는 정규식에 리퍼러가 매치된다면 <code class=\"language-text\">OOO에서 왔어염</code>이라는 값을 반환하도록 설정되어있다.</p>\n<p>즉, 만약 리퍼러가 필자의 블로그인 <code class=\"language-text\">https://evan-moon.github.io</code>라면 <code class=\"language-text\">evan-moon.github.io에서 왔어염</code>이라는 값을 반환하도록 설정해놓은 것이다. 이처럼 단순히 문자열의 포함 여부만을 검사할 수 있던 참고표에 비해 정규식 표는 정규식을 사용하여 더 정교한 문자열 검사와 캡처링 기능까지 사용할 수 있기 때문에 응용할 수 있는 범위도 훨씬 넓다.</p>\n<p>만약 여러분이 생성한 정규식 표가 어떻게 작동하는 지 디버깅해보고 싶다면, 브라우저 콘솔 상에서 직접 정규식을 사용하여 문자열을 치환해보면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^(http(s)?:\\/\\/)(.+\\.github\\.io)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'https://evan-moon.github.io'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">,</span> <span class=\"token string\">'$3에서 왔어염'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'evan-moon.github.io에서 왔어염'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>물론 정규식이라는 언어 자체가 워낙 읽기도 어렵고 기능도 다양하기 때문에 학습 난이도는 다른 프로그래밍 언어에 비해 높은 편이라 비개발 직군에 종사하시는 분들에게는 큰 장벽처럼 느껴질 수도 있지만, 정규식 표는 참고표에 비해 자유도가 훨씬 높고 다양한 응용도 가능하기 때문에 이런 문자열 가지고 놀기에 욕심이 있으신 분들은 한번쯤 정규식을 공부해보는 것을 추천한다. <small>(사실 규식이형은 개발자들에게도 악명이 높다)</small></p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>GTM은 개발자가 비즈니스 코드 상에서 이벤트 로그를 관리하지 않고, 이벤트 로그에 대한 직접적인 니즈가 있는 비개발 직군이라도 직접 이벤트를 정의하고 발송 타이밍을 정의할 수 있도록 도와주는 솔루션이다.</p>\n<p>그러나 아이러니하게도 GTM을 100% 활용하기위해서는 프로그래밍에 대한 지식이 어느 정도 필요하기에, 필자는 이 포스팅을 통해 비개발 직군들이 GTM을 활용하기 위한 최소한의 지식을 얻어가기를 바라는 마음으로 이 포스팅을 작성했다.</p>\n<p>물론 GTM을 활용할 때 필요한 프로그래밍 지식들을 짧은 설명만으로 언급하고 넘어간 것이 아쉽기는 하지만, 자바스크립트의 전역 변수, CSS 셀렉터, HTML History 같은 것들을 이 포스팅에서 하나씩 자세히 설명해버리면, 더 이상 포스팅이 아니라 그냥 책이 되어버리므로 양해를 바란다.</p>\n<p>혹 이 글을 읽고 있는 여러분이 GTM을 팀에 도입하자고 먼저 제안한 개발자라면 여러분은 다른 비개발 직군인 팀원들이 GTM에 적응할 수 있도록 도와줘야 할 최소한의 책임이 있으니, 각 변수와 트리거의 특징과 용도를 어떻게 비개발 직군인 팀원들이 잘 이해할 수 있도록 설명할 수 있을 지 고민해보는 것도 좋을 것 같다.</p>\n<p>이상으로 GTM, Google Tag Manager 뜯어보기 포스팅을 마친다.</p>","fields":{"slug":"20200419-what-is-gtm-google-tag-manager","path":"/2020/04/19/what-is-gtm-google-tag-manager/","lang":"ko"},"frontmatter":{"title":"GTM, Google Tag Manager 뜯어보기","subTitle":"개발자 없이 이벤트를 달 수 있다고? Google Tag Manager 파헤치기","date":"Apr 19, 2020","categories":["소프트스킬","튜토리얼"],"tags":["GTM","Google Tag Manager","Google Analytics","GA 마케팅","데이터 분석","개발자와 대화","마테크","Mar Tech"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/561462d8d0ace59b85f8ccc66260a39b/d803c/thumbnail.png","srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/d803c/thumbnail.png 320w,\n/static/561462d8d0ace59b85f8ccc66260a39b/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/fc5c5/thumbnail.webp 320w,\n/static/561462d8d0ace59b85f8ccc66260a39b/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/561462d8d0ace59b85f8ccc66260a39b/01fb2/thumbnail.png","srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"171cb460-3153-501a-a251-8329fcaf57a9","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%BB%A4%EB%B0%8B-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC%EA%B0%80-%EC%99%9C-%EC%A4%91%EC%9A%94%ED%95%9C%EA%B0%80%EC%9A%94\">커밋 히스토리가 왜 중요한가요?</a></p>\n<ul>\n<li><a href=\"#%EB%B2%84%EA%B7%B8%EA%B0%80-%EC%96%B8%EC%A0%9C-%ED%84%B0%EC%A1%8C%EB%8A%94%EC%A7%80-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0%EA%B0%80-%EC%89%BD%EB%8B%A4\">버그가 언제 터졌는지 파악하기가 쉽다</a></li>\n<li><a href=\"#%EB%A0%88%EA%B1%B0%EC%8B%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%B4%EC%95%BC%ED%95%A0-%EB%95%8C\">레거시 코드를 수정해야할 때</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC%EB%A5%BC-%EA%B9%94%EB%81%94%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%9C%EB%8A%94-3%EA%B0%80%EC%A7%80-%EB%A8%B8%EC%A7%80-%EC%A0%84%EB%9E%B5\">히스토리를 깔끔하게 만드는 3가지 머지 전략</a></p>\n<ul>\n<li><a href=\"#create-a-merge-commit\">Create a merge commit</a></li>\n<li><a href=\"#squash-and-merge\">Squash and merge</a></li>\n<li><a href=\"#rebase-and-merge\">Rebase and merge</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 Git의 머지 전략 중 대표적인 3가지인 Merge, Squash and merge, Rebase and merge의 차이에 대해서 한번 이야기해보려고 한다. 이전에 포스팅했던 Git 뉴비를 위한 기초 사용법 - 버전관리 포스팅에서 한 차례 가볍게 언급을 했었지만, 이번에는 조금 더 자세히 알아보려고 한다.","html":"<p>이번 포스팅에서는 Git의 머지 전략 중 대표적인 3가지인 Merge, Squash and merge, Rebase and merge의 차이에 대해서 한번 이야기해보려고 한다. 이전에 포스팅했던 <a href=\"/2019/07/28/git-tutorial-advanced/\">Git 뉴비를 위한 기초 사용법 - 버전관리</a> 포스팅에서 한 차례 가볍게 언급을 했었지만, 이번에는 조금 더 자세히 알아보려고 한다.</p>\n<!-- more -->\n<p>이 3가지 머지 전략 모두 브랜치를 머지한다는 목적은 같지만, 어떤 방식을 선택하냐에 따라 커밋 히스토리가 기록되는 방식이 달라지게 된다.</p>\n<p>이 3가지 머지 전략은 Github 뿐만 아니라 Atlassian의 Bitbucket에서도 동일하게 지원하고 있는데, 그 만큼 머지를 할 때 커밋 히스토리를 어떤 방식으로 남길 것이냐를 선택할 수 있는 것이 중요하다고 말할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d1204dccc045a7c8925d2244d894c1fa/66632/github-merge.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACC0lEQVR42l1STW/TQBTM/1ePgBDiBCo9gwpIXJAqpAKX0kpVEgmSNh+249hr79pe74ftYWwnAdXS6L19uzs7b/wmLxbvcKtmuJUz7FWKvRwhyhxCZUhyMcRUCqSHmPS5zBBnCbSr4dHAdR62c5j8FHd41AF+5VNkcY48JHYSMlEIghDr9RZhGGK12mC3i6GUQp5LIkeyT2CtxfFruxaTPlGuxOfoCufrS1xsPuHNw3tcTD9AlgV0bVDWlnCobQPjOlhHRYTxHWrTQBsPY6nQ+5FwbwRezi7w7P4tnk/PcXb3Gmc/XiHJBKQs2KrBTtWIlMZWauyocC9zBFxHByRVDd0YTL59+Yhwu0LbknibIA3pWZSN7fOiKgoYY6jAUo0haqrs1TpUtWY0qLRGUZbMLSa311eIgzU8GVNBIkl/CMUDRVGSzKLrOl7QrJdIM/pbVMM6EWMuWIsTwVo9ttw0zfD6NohGhBFbVajpX1FWw56jP8438E074Jj/X/PMJ/3rnof7S1nGUcmygayl4n5viIRz/kTwFNaNP6TPB4X9Qclx+L1Y4uFxhcXyATFHoqo0yqoaYg9FtYbenRS13RA7xsa1MNr+a7mfJ6mKQV3BcRFUW5Kgrx/3Mu7pnjhnflhL+jxPl/i+ucE8XoyEp9YYjzjWn9Y8f1JEn9f0ebUJEO72uInv8XVzjbn4g7/tXkXuv/yHQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"github merge\" title=\"\" src=\"/static/d1204dccc045a7c8925d2244d894c1fa/6af66/github-merge.png\" srcset=\"/static/d1204dccc045a7c8925d2244d894c1fa/69538/github-merge.png 160w,\n/static/d1204dccc045a7c8925d2244d894c1fa/72799/github-merge.png 320w,\n/static/d1204dccc045a7c8925d2244d894c1fa/6af66/github-merge.png 640w,\n/static/d1204dccc045a7c8925d2244d894c1fa/d9199/github-merge.png 960w,\n/static/d1204dccc045a7c8925d2244d894c1fa/21b4d/github-merge.png 1280w,\n/static/d1204dccc045a7c8925d2244d894c1fa/66632/github-merge.png 1504w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Github에서는 Pull Request를 머지할 때 머지 전략을 선택할 수 있다.</small>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9ae978fbaf7a2bc7cedbf340525bfad9/27b7a/bitbucket-merge.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1UlEQVR42pVSy0ocQRStr8lnBCRx4UaCuowgiosIwbh1l0AwC0USETUxBDWKIEgernQRXYioMSCD4mPawc4408/ptzPT090ndatnHF0o5MKhu27VvXXuqcMyxxL2/hzhJHuJM0nGweEJdvYzsGwXFEmS4H+CmSVHFBcUA5pegmk5UHUThmmjqJoCqmbiqqhDNyzoZgqjZEPja4Xv64bNczYUfk40pGKVN6MNWovm/HCJX0QXeF4A2/Hgej78oIzgOoUfXCMIGv9lTswDS4kmCMMqwmoVtVqNIxTZja19zMx9w+zXH/g4/x2fF39i6ssq3n9awQeOicZ3dgXj08tYW98Gq0UJKmHEqWvQNA2FQhHSxQVc18Ho5BKev3iN/qF36B54g77BEXT0DKPl2Us87RrEk84UrV2v8Lh9AMNvZxoM04jjGJZlQVVV+L7PdXJwmpWRk4scBf5ofyHnFSEP6XUbJJNhOmAHUoBfGReSUqkP3wzPD0QTaibnVUi5K6FxHJNEJE10B5Rjj3oPwdp20T8m1Vk2W5LQ2Vyes7xEpRre2Og+RFEEtvbbxsKmgb1zv17QZEgvSHYh0Fj08g/5kiRjD5m0XK4Iv5F1hEf5uMTiPtDY/wDPJ9q6ESHFOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bitbucket merge\" title=\"\" src=\"/static/9ae978fbaf7a2bc7cedbf340525bfad9/6af66/bitbucket-merge.png\" srcset=\"/static/9ae978fbaf7a2bc7cedbf340525bfad9/69538/bitbucket-merge.png 160w,\n/static/9ae978fbaf7a2bc7cedbf340525bfad9/72799/bitbucket-merge.png 320w,\n/static/9ae978fbaf7a2bc7cedbf340525bfad9/6af66/bitbucket-merge.png 640w,\n/static/9ae978fbaf7a2bc7cedbf340525bfad9/27b7a/bitbucket-merge.png 804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Bitbucket에서는 레파지토리 설정에서 기본 머지 전략을 선택할 수도 있다.</small>\n</center>\n<p>Github과 Bitbucket의 머지 전략은 이름은 조금 다르지만 이것들이 의미하는 기능은 모두 같다. Github의 <code class=\"language-text\">Create a merge commit</code>은 Bitbucket의 <code class=\"language-text\">Merge commit</code>과 같은 전략이고 <code class=\"language-text\">Squash and merge</code>는 <code class=\"language-text\">Squash</code>와, <code class=\"language-text\">Rebase and merge</code>는 <code class=\"language-text\">Fast forward</code>와 같은 전략을 의미한다.</p>\n<p>물론 이 머지 전략들은 각자 장단점이 있기 때문에 적재적소에 잘 사용하는 것이 중요하다. 예를 들어, Git Flow를 사용할 때는 기능 개발을 하는 <code class=\"language-text\">feature</code> 브랜치가 <code class=\"language-text\">develop</code> 브랜치로 머지될 때는 <code class=\"language-text\">Squash and merge</code>를, <code class=\"language-text\">develop</code> 브랜치가 <code class=\"language-text\">master</code> 브랜치로 머지될 때는 <code class=\"language-text\">Merge</code>을 사용하는 등 유연하게 사용하기도 한다.</p>\n<p>하지만 적재적소에 잘 사용하려면 각각의 머지 전략이 어떤 방식으로 브랜치를 머지하는지 잘 알고있어야 가능한 법이다. 그래서 이번 포스팅에서는 이 3가지 머지 방식이 뭐가 어떻게 다른지 살펴보려고 한다.</p>\n<h2 id=\"커밋-히스토리가-왜-중요한가요\" style=\"position:relative;\">커밋 히스토리가 왜 중요한가요?<a href=\"#%EC%BB%A4%EB%B0%8B-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC%EA%B0%80-%EC%99%9C-%EC%A4%91%EC%9A%94%ED%95%9C%EA%B0%80%EC%9A%94\" aria-label=\"커밋 히스토리가 왜 중요한가요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>일단 머지 전략에 대한 설명에 들어가기에 앞서, Git의 커밋 히스토리가 왜 중요한지에 대해 간단히 이야기해보려고 한다. 서두에서 이야기한 3가지 머지 전략은 브랜치를 머지할 때 커밋 히스토리를 어떻게 남길 것이냐를 선택하는 것이나 마찬가지이기 때문에 개발자들이 왜 커밋 히스토리에 이렇게 목매는지에 대한 이해가 필요하다.</p>\n<p>모두 알다시피 커밋(Commit)은 Git을 구성하는 중요한 요소 중 하나이며, 원칙적으로 하나의 커밋은 “의미있는 하나의 변경사항”을 의미한다.</p>\n<p>그 말인 즉슨, 커밋 메세지만 보고도 어떤 사항이 어떤 이유로 변경되었는지 쉽게 파악할 수 있어야한다는 것이다. 많은 개발자들이 의미 있는 커밋 메세지에 대한 중요성을 언급하는 이유도 짧은 커밋 메세지만 보고도 언제, 어떻게 코드가 변경되었는가를 한번에 알고 싶기 때문이다.</p>\n<p>이 커밋들이 모여서 시간 순으로 정렬된 것을 커밋 히스토리(Commit History)라고 부른다. 히스토리라는 단어에서 알 수 있듯이, 이건 말 그대로 이 프로그램의 역사와 같은 것이다. 많은 개발자들이 커밋 히스토리에 의미있는 역사를 기록하는 것이 굉장히 중요하다고 하는 이유에는 여러 가지가 있겠지만 대표적인 두 가지는 다음과 같다.</p>\n<h3 id=\"버그가-언제-터졌는지-파악하기가-쉽다\" style=\"position:relative;\">버그가 언제 터졌는지 파악하기가 쉽다<a href=\"#%EB%B2%84%EA%B7%B8%EA%B0%80-%EC%96%B8%EC%A0%9C-%ED%84%B0%EC%A1%8C%EB%8A%94%EC%A7%80-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0%EA%B0%80-%EC%89%BD%EB%8B%A4\" aria-label=\"버그가 언제 터졌는지 파악하기가 쉽다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우리가 Git을 사용하여 프로그램의 버전 관리를 할 때 혼자 개발을 진행하는 경우도 있지만 대부분의 경우 다른 여러 명의 개발자들과 함께 협업을 하게 된다. 이때 프로그램의 변경 사항이 많을 수록, 혹은 프로그램의 규모 자체가 큰 경우 협업에 참여하고 있는 개발자들은 사소한 실수로 인해서 버그를 발생시킬 가능성 또한 커지게 된다</p>\n<p>이때 개발자들이 커밋 히스토리를 보고 어떤 이유로 어떤 코드가 수정되었는지 빠르게 파악할 수 있다면 해당 버그의 원인을 찾는 것이 더 빨라진다.</p>\n<p>예를 들어 새로운 버전을 릴리즈한 후에 결제 관련 버그가 터졌다고 생각해보자. 이때 당연히 개발자들은 결제에 관련된 코드부터 뜯어보기 시작할 것이다. 하지만 대부분의 프로그램은 내부적으로 수많은 모듈 간의 디펜던시가 얽혀있는 경우가 많기 때문에 그걸 짧은 시간안에 전부 파악하고 버그의 원인을 찾아서 수정한다는 것은 쉬운 일이 아니다. 이때 잘 정리된 커밋 히스토리가 있다면 이번 버전에서 결제 관련된 부분을 수정한 커밋을 찾아서 어떤 코드가 수정되었는지 빠르게 확인할 수 있다.</p>\n<p>만약 이전 버전에서는 문제가 없었고 이번에 배포한 버전에서 문제가 발생했다면 결제 관련 버그가 발생한 이유는 해당 커밋에서 수정한 코드 때문일 가능성이 높기 때문에 조금 더 빠른 대응이 가능하다.</p>\n<h3 id=\"레거시-코드를-수정해야할-때\" style=\"position:relative;\">레거시 코드를 수정해야할 때<a href=\"#%EB%A0%88%EA%B1%B0%EC%8B%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%B4%EC%95%BC%ED%95%A0-%EB%95%8C\" aria-label=\"레거시 코드를 수정해야할 때 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>두번째 이유는 조금 슬픈 상황인데, 바로 레거시 코드를 고쳐야하는데 코드 짠 사람이 없을 때이다. 이 사람이 없는 이유는 퇴사라던가, 퇴사라던가, 퇴사같은 경우가 있다.</p>\n<p>사실 레거시 코드가 무서운 이유는 코드 자체가 너무 복잡해서 파악하기 힘들다는 것 보다는 이걸 건드렸을 때 다른 부분에 문제가 없을 것이란 보장이 없기 때문이다. 게다가 이런 레거시 코드는 어느 회사에나 다 존재하기 때문에 레거시를 수정해야하는 상황이 그렇게 드문 상황도 아니다.</p>\n<p>만약 그 코드가 딱 봐도 책임 분리가 잘 되어 있는 코드거나 간단한 코드라면 뭐 그냥 가벼운 마음으로 수정할 수도 있지만, 대부분 우리가 수정하기 망설여지는 코드는 그냥 레거시가 아니라 오랜 시간 숙성된 레거시인 경우가 많다. 특히 이 코드가 회사 창립 초창기에 작성된 코드일 경우에는 그냥 코드만 봐도 당시 개발자가 얼마나 정신없이 개발을 했는지 알 수 있을 정도인 것들도 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ff3b0e8534d894be52c11ed409df53ef/72e01/exit-office.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAMC/9oADAMBAAIQAxAAAAFslaEgNEL/xAAYEAADAQEAAAAAAAAAAAAAAAABAhEAA//aAAgBAQABBQKwKza3EVjyZsvIqv8A/8QAGREAAQUAAAAAAAAAAAAAAAAAAAECAxJR/9oACAEDAQE/AY26VU//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQISUf/aAAgBAgEBPwGbwsj/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIRIVEiMUH/2gAIAQEABj8CexOVU9eGDiON0V2f/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAITFBYYH/2gAIAQEAAT8hDwaVMpGBZF2AQaEQaAPssAt1BBqbn//aAAwDAQACAAMAAAAQy+//xAAXEQEBAQEAAAAAAAAAAAAAAAABACFB/9oACAEDAQE/EAV5JBwv/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxCulbBzWf/EABoQAQADAQEBAAAAAAAAAAAAAAEAESExQeH/2gAIAQEAAT8QvMrQahAJewggUyeJGNdV0iKAxOJi/Imyh17P/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"exit office\" title=\"\" src=\"/static/ff3b0e8534d894be52c11ed409df53ef/c08c5/exit-office.jpg\" srcset=\"/static/ff3b0e8534d894be52c11ed409df53ef/0913d/exit-office.jpg 160w,\n/static/ff3b0e8534d894be52c11ed409df53ef/cb69c/exit-office.jpg 320w,\n/static/ff3b0e8534d894be52c11ed409df53ef/c08c5/exit-office.jpg 640w,\n/static/ff3b0e8534d894be52c11ed409df53ef/6a068/exit-office.jpg 960w,\n/static/ff3b0e8534d894be52c11ed409df53ef/72e01/exit-office.jpg 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>호랭이는 죽어서 가죽을 남기고 개발자는 죽어서 레거시를 남...</small>\n</center>\n<p>이런 코드의 경우 섣불리 수정했다가 예상 못한 곳에서 도미노처럼 와장창나는 경우가 있기 때문에 이 와장창을 몇번 경험해본 개발자들은 레거시 코드를 수정함에 있어서 신중하게 접근할 수 밖에 없다. 그럼 이 상황에서 우리가 선택할 수 있는 방법은 대략 4가지 정도가 있다.</p>\n<blockquote>\n<ol>\n<li>건드리기 무서우니까 그냥 냅둔다.</li>\n<li>퇴사자한테 어떻게든 연락해서 물어본다.</li>\n<li>주변에 있는 개발자를 붙잡고 물어본다.</li>\n<li>그냥 내가 분석한다.</li>\n</ol>\n</blockquote>\n<p>음, 일단 1번의 경우는 본인이 PO나 CTO를 설득할 말빨이 없다면 성공할 확률이 낮다고 본다. 그리고 아마 좋은 소리를 들을 것 같지도 않다. 일단 개발자로써 월급을 받고 있으니 월급 값은 해야하지 않는가?</p>\n<p>그렇다고 이미 퇴사한 사람한테 카톡해서 코드를 작성한 의도를 물어보기에는 왠지 싸대기 맞을 것 같기도 하고 좀 그렇다. 3번 같은 경우는 그나마 나은 경우긴 하지만 다른 팀원들도 다 바쁜데 매번 붙잡고 물어볼 수도 없는 노릇이니 결국 직접 분석하는게 제일 깔끔한 방법이다.</p>\n<p>하지만 이 분석이라는 것이 말이 쉽지, 실제로 거대한 어플리케이션에서 단 하나도 놓치지 않고 모든 의존 관계를 파악한다는 것은 사실 쉬운 일이 아니다. 게다가 이런 분석은 단순히 코드만 본다고 되는 것이 아니라 비즈니스와도 밀접한 관련이 있는 경우가 많기 때문에 해당 기능의 개발 당시 비즈니스 히스토리도 어느 정도 함께 파악하는 것이 좋다.</p>\n<p>그나마 팀 내에 해당 기능을 개발하게 된 히스토리를 알고 있는 동료가 있다면 다행이지만, 그 마저도 없을 경우 우리가 의지할 것은 당시의 개발자가 어떤 의도로 코드를 고쳤는지 기록해놓은 커밋 히스토리 밖에 없는 것이다.</p>\n<p>물론 정신없이 개발하는 와중에 커밋 메세지에 당시의 비즈니스적인 의도까지 담는 경우는 거의 없기 때문에 비즈니스 히스토리는 파악하기 힘들 수 있지만, 의미있는 단위로 커밋이 되어있다면 적어도 어떤 의도로 이 코드를 수정했는지 정도는 파악할 수 있다.</p>\n<p>말 그대로 역사를 읽는 것이다. 하지만 이때 커밋 히스토리가 너무 쓸데 없이 복잡하거나 커밋 메세지가 개판이라면 아무래도 읽어나가는데 어려움이 있을 수 밖에 없다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/451016cbf7ad1b82b51fe0d26765b57d/94829/bad-commit-message.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABibAAAYmwFJdYOUAAABu0lEQVR42mWSWavaYBCG8/9v/AEKXor7UhdUEKNxwcQkarReKIoal3JcT6yJEe3DSWuhnYsP8mWemXfe+YRCodDr9drttiiKkiR1Op14PO7z+QKBADfdbrfZbFarVRJIGwwG/PX7/aSl02lB1dS7eweLRCKcxWKxVqvlcrlWqxUKhbLZLDxV5vP56/WyLGu325mmeT6fNU0TZE127k65XKYkTCwWq1Qq0+l0NpspiiLLsuM4YM/nk/NyuQCvVqvj8djv9wVFV9yHW6/XYYApUSqVhsPheDx+PB4e5sW783q9/g13VOWn7QCkUilgRC6Xy8ViQZLruh7zjuv16sGHwwELBGM6mq9M4EQikclk0K/r+ul0+qfnG95ut38769/75vZHTRS/fQWeMRL27Pf7/2XjEzCG/ZlZU2zHbkiS5xlue/oJxKuqSp+3Yd7Mm82GKqxNqDfrH/sPNsligsFgNBqlBP5BMvxoNKIVht9uN9u2acjlZDJBHZsXVqb5aVnGwKAzJZLJJHCjgRSJ9RqGgYX0Z2ecvCg2D4kp9Bc8JygTDochy1+BZyShn2fEJ88mn8/zBNCFr4jyBvkFlWwoGvHKht0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bad commit message\" title=\"\" src=\"/static/451016cbf7ad1b82b51fe0d26765b57d/6af66/bad-commit-message.png\" srcset=\"/static/451016cbf7ad1b82b51fe0d26765b57d/69538/bad-commit-message.png 160w,\n/static/451016cbf7ad1b82b51fe0d26765b57d/72799/bad-commit-message.png 320w,\n/static/451016cbf7ad1b82b51fe0d26765b57d/6af66/bad-commit-message.png 640w,\n/static/451016cbf7ad1b82b51fe0d26765b57d/94829/bad-commit-message.png 878w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    이렇게 커밋해버리면 뭘 고친건지 알 수가 없다.<br>\n    [출처] https://xkcd.com/\n  </small>\n</center>\n<p>그래서 개발자들이 의미 있는 단위의 커밋, 의미 있는 커밋 메세지를 강조하는 것이고 여기에 더해 적절한 머지 전략을 사용하여 가독성이 높고 의미도 있는 커밋 히스토리 그래프를 유지하려고 하는 것이다. 필자는 이 중 깔끔한 히스토리 그래프를 만드는 방법에 대해 설명하려고 하는 것이고, 이때 필요한 것이 적절한 브랜치 머지 전략의 선택인 것이다.</p>\n<h2 id=\"히스토리를-깔끔하게-만드는-3가지-머지-전략\" style=\"position:relative;\">히스토리를 깔끔하게 만드는 3가지 머지 전략<a href=\"#%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC%EB%A5%BC-%EA%B9%94%EB%81%94%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%9C%EB%8A%94-3%EA%B0%80%EC%A7%80-%EB%A8%B8%EC%A7%80-%EC%A0%84%EB%9E%B5\" aria-label=\"히스토리를 깔끔하게 만드는 3가지 머지 전략 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>위에서 한번 설명했듯이 <code class=\"language-text\">Merge</code>, <code class=\"language-text\">Squash and merge</code>, <code class=\"language-text\">Rebase</code>는 두 개의 브랜치를 머지한다는 의미는 모두 같지만 머지하는 방법과 커밋 히스토리의 기록을 다르게 가져가는 머지 전략들이다. 한번 이 3가지 전략이 어떤 방식으로 브랜치를 머지하는 지, 커밋 히스토리는 어떻게 기록되는지 살펴보고 이에 따른 장단점을 알아보도록 하자.</p>\n<h3 id=\"create-a-merge-commit\" style=\"position:relative;\">Create a merge commit<a href=\"#create-a-merge-commit\" aria-label=\"create a merge commit permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f9a4ec20e6230ef84a62c6ca04cdc397/0f98f/merge-icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2AbBP/xAAXEAEAAwAAAAAAAAAAAAAAAAARACFB/9oACAEBAAEFAtoJ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEABj8CHk//xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhMWFx/9oACAEBAAE/IXEK4PQTY0eT/9oADAMBAAIAAwAAABCDz//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EAJ//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EFFt/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAMVH/2gAIAQEAAT8QBFpjXm6/RHrkqBd//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge icon\" title=\"\" src=\"/static/f9a4ec20e6230ef84a62c6ca04cdc397/c08c5/merge-icon.jpg\" srcset=\"/static/f9a4ec20e6230ef84a62c6ca04cdc397/0913d/merge-icon.jpg 160w,\n/static/f9a4ec20e6230ef84a62c6ca04cdc397/cb69c/merge-icon.jpg 320w,\n/static/f9a4ec20e6230ef84a62c6ca04cdc397/c08c5/merge-icon.jpg 640w,\n/static/f9a4ec20e6230ef84a62c6ca04cdc397/6a068/merge-icon.jpg 960w,\n/static/f9a4ec20e6230ef84a62c6ca04cdc397/eea4a/merge-icon.jpg 1280w,\n/static/f9a4ec20e6230ef84a62c6ca04cdc397/0f98f/merge-icon.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>머지(Merge)는 우리가 알고 있는 일반적인 머지 전략이다. 머지의 장점은 기존 개발자들에게 익숙한 개념이라는 것과 머지된 브랜치가 삭제되어 사라졌다고 해도 히스토리 그래프 상에서는 그대로 다른 가지로 표기되기 때문에 “어떤 브랜치에서 어떤 커밋이 진행되어 어떻게 머지가 되었군”이라는 자세한 정보를 얻을 수 있다는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c3313dab97a553388c8c007a506e7f57/f5eb6/merge-commit-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 24.375000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVR42i2O207CUBRE+Q0QoTHCkQJNbSkttBSQi225FBMrLRf9Gl/9BZ9NiA/GxM9bHqoPK7OzZzKZQmmWUFxEKHFM63jkJssku1zV/T6ndTgg0gzx74ltSmuXoj8fpMpcukXb7/KOgtBDGopGU+2RhhuS+YrVcM7Sn/Ek7/UoIBwGLLwJK39OLL1Zf4rvLxmPYzwvwnVDwiCh1fQo6FofR9Xw1SYf0yqnbY/PncvpscNXZvOeeLw5Rb4TU/5Mfl58Xu87eNMN4TrD8SMGkxil3uHy2pALzRBV3NJoOyyHd6xmEcFgIlcM6esWlm5jqDpO28CW9PQuhtZF1Qc5ou0iNJerho0iLApKe0SlblHXPLx5Qn/ygDlYoPUCysKmVOv8ab3LhaRUsyjLfKVm5lTlsqrMnMvOhb/1N62lOOEMdgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge commit 1\" title=\"\" src=\"/static/c3313dab97a553388c8c007a506e7f57/f5eb6/merge-commit-1.png\" srcset=\"/static/c3313dab97a553388c8c007a506e7f57/69538/merge-commit-1.png 160w,\n/static/c3313dab97a553388c8c007a506e7f57/72799/merge-commit-1.png 320w,\n/static/c3313dab97a553388c8c007a506e7f57/f5eb6/merge-commit-1.png 359w\" sizes=\"(max-width: 359px) 100vw, 359px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>first-merge 브랜치가 master로 머지된 히스토리</small>\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 366px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aa5b099efda7066ad8426c42536cfbed/8b153/merge-commit-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 23.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVR42pWP3VKDMBSEeQ2V2mLbqY4VQwgIJJQKbVPCn1CcqRe+/2OsadQH6MXON2dnZ8851iRRsGkEeuwghjOCqoevPhDWJzDV460ZDaN2NBladng9NH/ep/GJnnl/xjpXsMiaw3lwwWKJfD8g3bZINhX4pkaWd+BZDT/cIUkVIl6aOYgPENvG5GKhwKI9dnI0Oat4IXhauiC6sB6+8S4HMC4RihI3Mxf23MNkQQ1tzbsL57/818W/dYjO+bCoK+AsCNygQC5PiLMKVG/0tKYrBucxvErW9DnTzR58/UbZfiEtOn3dESyRuF/6mK2Cq/QD9HOjFpQkio0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge commit 2\" title=\"\" src=\"/static/aa5b099efda7066ad8426c42536cfbed/8b153/merge-commit-2.png\" srcset=\"/static/aa5b099efda7066ad8426c42536cfbed/69538/merge-commit-2.png 160w,\n/static/aa5b099efda7066ad8426c42536cfbed/72799/merge-commit-2.png 320w,\n/static/aa5b099efda7066ad8426c42536cfbed/8b153/merge-commit-2.png 366w\" sizes=\"(max-width: 366px) 100vw, 366px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>추후 first-merge 브랜치를 삭제하더라도 히스토리와 브랜치 가지는 그대로 남아있다</small>\n</center>\n<p>반면에 단점은 너무 자세하게 히스토리가 남기 때문에 브랜치의 개수가 많아지거나 머지 횟수가 잦아질수록 히스토리 그래프의 가독성이 떨어진다는 것이다.</p>\n<p>또한 원칙적으로 커밋은 의미있는 변경 사항의 최소 단위라고는 하지만 사실 실무에서 일을 하다보면 오타 수정과 같은 자잘한 커밋을 하는 경우도 많다. 사실 이런 자잘한 커밋의 경우 별로 정보성이 없기 때문에 이런 커밋들이 많아지면 오히려 히스토리의 가독성을 저해하는 원인이 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 565px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fe12d5273d6d2fc310b7b4010e02c31a/07eba/merge-commit-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVR42oVQTU/CQBTsnzAaD/0K/YAI/dxtC912C2JLTAokmBovhMSzHvz/Gd8S8WBIPExmdt57s/tWMz2GX/gclhHi/rDD7ccRthXDGmewlP8PTJ/BmmTQTDe9GnjzeYRJ2vBTGB7BTQgxdCeBTvrMF6gz1VSwZqgQCrN+Am09wN1+C/vrhJyvwOZP4PM10rxBQnohGohKorqgrjEvqZY9YpoU0EZZC30U0e3qySkcl0Pv3/BwGjDmLUZxByfpiEmzHh7r4KctfNZifIaqK97BpT4tlC8woxpRViKoBQJ6zXQYkLz3mEmJsCRfCLBKIBKkS0FedWblK47J5/USUbmGFlQ9wmKJSi4oUGLKN5gMrxS4pYE1DS9paAVOHBYNgj+YEeJCglfUu2ihuWot3mGSr+DkasUN7OcDvH0PN67hMklrSlpL0kr1VTiqL5X0RQ2+Afgv4fUDEjtnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge commit 3\" title=\"\" src=\"/static/fe12d5273d6d2fc310b7b4010e02c31a/07eba/merge-commit-3.png\" srcset=\"/static/fe12d5273d6d2fc310b7b4010e02c31a/69538/merge-commit-3.png 160w,\n/static/fe12d5273d6d2fc310b7b4010e02c31a/72799/merge-commit-3.png 320w,\n/static/fe12d5273d6d2fc310b7b4010e02c31a/07eba/merge-commit-3.png 565w\" sizes=\"(max-width: 565px) 100vw, 565px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>규모가 큰 어플리케이션일수록 이런 복잡한 히스토리가 그려지기 쉽다</small>\n</center>\n<p>위 그림에서 볼 수 있듯이 머지가 수행되었을 때 생기는 머지 커밋(Merge commit)은 “어느 순간에 어떤 브랜치의 변경사항이 머지되었다”라는 소중한 정보를 주는 커밋이지만 개발이 진행되고 있는 브랜치가 많아진 상황에서는 이 머지 커밋들과 해당 브랜치에서 발생한 커밋들이 전부 기록되기 때문에 그래프가 너무 복잡해져서 오히려 히스토리를 추적하기 힘들 수도 있다.</p>\n<p>위 예시의 그래프는 조금 오래된 히스토리라 헤드가 앞으로 나아가면서 해당 시점의 <code class=\"language-text\">master</code> 브랜치가 최신 버전인 상황이기 때문에 반드시 맨 아래 쪽에 <code class=\"language-text\">master</code> 브랜치가 위치한다.</p>\n<p>그 덕분에 <code class=\"language-text\">master</code> 브랜치를 기준으로 읽어나간다면 어느 정도 흐름을 읽을 수 있지만, 한창 개발이 진행되는 중이라 <code class=\"language-text\">master</code>의 헤드가 뒤로 밀리기도 하는 상황이면 그래프의 맨 아래 쪽에 <code class=\"language-text\">master</code> 브랜치가 위치하지 않고 중간 어딘가 쯤에 끼어있기도 하기 때문에 히스토리 그래프를 읽으면서 추적하다가 놓칠 때도 있다. <small>(해보신 분은 알겠지만 진짜 눈알 빠질 것 같다)</small></p>\n<h3 id=\"squash-and-merge\" style=\"position:relative;\">Squash and merge<a href=\"#squash-and-merge\" aria-label=\"squash and merge permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2610488c84f5e8c35c1a9e967b0289a6/0f98f/merge-squash-icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd6EUH//xAAWEAEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQEAAQUCML//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAEDH/2gAIAQEABj8CIv/EABgQAAMBAQAAAAAAAAAAAAAAAAERMQAh/9oACAEBAAE/IUC4OTFARcho3//aAAwDAQACAAMAAAAQD/8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EALW/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EFbC/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8QpAq6NQtyCFK5vcVWK+k//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge squash icon\" title=\"\" src=\"/static/2610488c84f5e8c35c1a9e967b0289a6/c08c5/merge-squash-icon.jpg\" srcset=\"/static/2610488c84f5e8c35c1a9e967b0289a6/0913d/merge-squash-icon.jpg 160w,\n/static/2610488c84f5e8c35c1a9e967b0289a6/cb69c/merge-squash-icon.jpg 320w,\n/static/2610488c84f5e8c35c1a9e967b0289a6/c08c5/merge-squash-icon.jpg 640w,\n/static/2610488c84f5e8c35c1a9e967b0289a6/6a068/merge-squash-icon.jpg 960w,\n/static/2610488c84f5e8c35c1a9e967b0289a6/eea4a/merge-squash-icon.jpg 1280w,\n/static/2610488c84f5e8c35c1a9e967b0289a6/0f98f/merge-squash-icon.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>Squash and merge에서 Squash는 여러 개의 커밋을 하나로 합치는 기능을 말한다. 즉, 이 기능은 머지할 브랜치의 커밋을 전부 하나의 커밋으로 합친 뒤 타겟 브랜치에 커밋하는 방식으로 머지를 진행한다. 즉 Squash and merge에서 발생하는 머지 커밋은 실질적인 머지로 인해서 생성된 머지 커밋이라기보다는 그냥 다른 브랜치의 변경 사항을 하나로 뭉쳐놓은 커밋인 것이다.</p>\n<p>그래도 Squash and merge 전략은 일단 머지 커밋이 남긴 하기 때문에 머지가 되었다는 사실을 히스토리 상에서 한번에 알아볼 수 있고 버전 별로 어떤 것이 변경 되었는지 한 눈에 알수 있다는 것이 장점이다. 또한 머지된 브랜치의 자잘한 커밋 사항이 남지 않기 때문에 머지가 되었다는 사실 자체에만 집중한 기록이 남게되고, 그로 인해 이 프로그램의 변경 사항을 읽기가 한결 수월해진다.</p>\n<p>단점은 일반적인 머지 커밋보다는 아무래도 정보력이 떨어진다는 것이다. 일반 머지는 해당 브랜치에서 누가 어떤 커밋을 통해 어떤 라인을 수정 했는지 까지 알려주지만 Squash and merge 전략은 머지 대상 브랜치의 모든 커밋을 하나로 통합해버리기 때문에 그 정도의 자세한 정보는 알 수가 없다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 505px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d44cd2e6028f937bf96167014bb39427/c0cb9/squash-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVR42oWQW08TURRG5x+oMT7RUrB2aKczZ26d6bSdXoG2giBNoyEglxIQ1NoOWEhINBoExRdNTPwhPpj475bHmigPRh9Wvn1OctbZeytCGFiWS6txn7lai3ZrkUa9iesE5NwCjhtgy9qRtesUMbIFhF7AFqUxRjYYn3WZWS2P4kihaM6jvT8iOXqFPfiCHX0m0XtDcvs1xt4F5v4FWu8C9ckpuXeH2OeHGGdD9LMB5ttfaZ9H5C9HKPONOr7saKqzTNjpcLK5zcnuHgdrjxDdIdbGS8zVY+z1U8R6n/rwGbXoOWWZ1aMBs0cRYdSnOuzj7vRQhJFFy9pUTIdodpLvLwy+Hhf4NnK5fFzkw0GeT/0CHwdVltstKrUVSuECpl1FiDKGRJhVNL3ERNxAMfQMquETeAFLzYBot83Oap3Njs/aks/WPZP9rkdvxccLpMCbQ7Mr3Jb7iqVc4mpO4jIpczojd2hoM6SMPL5cvm6FeMUFMqLCrbjFzZjJ9XiOazGHG3GXiaQU3HGYlKKpGY/ptH8Fb3ynBMUyGatA6OXQyg8obZyR744w5rZIl7rYfkNSR3dkV1cEPx//DWW+vURajpxMy9bdFdTFEWrzKTO1TdLhQ/zwLl6phcjV/yn6LaxVQ9S0TkKVP6csEtMZSZZEUoyJJW3JnzH/J/wBIgU0peEqmd4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"squash 1\" title=\"\" src=\"/static/d44cd2e6028f937bf96167014bb39427/c0cb9/squash-1.png\" srcset=\"/static/d44cd2e6028f937bf96167014bb39427/69538/squash-1.png 160w,\n/static/d44cd2e6028f937bf96167014bb39427/72799/squash-1.png 320w,\n/static/d44cd2e6028f937bf96167014bb39427/c0cb9/squash-1.png 505w\" sizes=\"(max-width: 505px) 100vw, 505px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>머지하기 전 히스토리 그래프</small>\n</center>\n<p>지금 상황은 <code class=\"language-text\">update-a-txt</code> 브랜치의 헤드가 <code class=\"language-text\">master</code>의 헤드보다 하나 더 앞으로 나아간 상황이다. <code class=\"language-text\">update-a-txt</code> 브랜치의 가지를 보면 <code class=\"language-text\">update a txt</code>, <code class=\"language-text\">Add b txt</code> 총 2개의 커밋이 있고 최근에 <code class=\"language-text\">master</code>에서 최신 변경 사항을 받아왔다. 이때 Squash and merge 전략을 사용하여 <code class=\"language-text\">master</code>에 머지를 하게 되면 이 브랜치에 있는 모든 커밋은 하나의 커밋으로 합쳐져서 마스터에 커밋된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/009c6c686932a98ea7d653185d3b23af/c0388/squash-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVR42oWQW08TURSF518oQgoOTBvsbe5z2ulcoBdUWloLlQRNL6jEQNXEiAXTJppgNJpo39QXH/yjn4eqJD6gD1/WXjlZK3sfpXLzDpWNLW632lTrLexiiFkoYfsBTjHC8mJMNyZrBbPZEeszr9shhh1doP9W5fpoyPzJC8wnXzCefmZpcIYxnJI/nLI6eoX4eIr+7hj/wwnqmyOujB8xNz5gbnLAVTn/4dyfoyTKdZxyyKTTYNK9y+tuh5edJs8bNd4+3ub90Sbt3g7e/kPcbpfc3j3sfk/qHs5ggPdgH6ffx+r1MOW7ksuU8NImu7Uq22sxO+sxrThiKwxpBQHNYkBcqCDEBmGwiWWusayaaCs2Sc0hlXLRpGorv1CyeZ/7tRRfjwXfRhHfT32mzwSfhgY/xj5nh7Kw1qRUbsm/raLe8FhMORckUvZfXrFyLrGwqN1qEMYVdMMjr0vyNoYlyOqCZKaAlimirsqypM2SDF6G4smw77r41Q4iaqCmfa4tWyzIM+blWQuaTUKzZiwmnX+WzQrTui83EoTVNsW4TtqIZuH/BS8r/AmoMhS1nhqP9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"squash 2\" title=\"\" src=\"/static/009c6c686932a98ea7d653185d3b23af/c0388/squash-2.png\" srcset=\"/static/009c6c686932a98ea7d653185d3b23af/69538/squash-2.png 160w,\n/static/009c6c686932a98ea7d653185d3b23af/72799/squash-2.png 320w,\n/static/009c6c686932a98ea7d653185d3b23af/c0388/squash-2.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Squash and merge를 사용하여 update-a-txt 브랜치를 master에 머지한 모습</small>\n</center>\n<p>위 그림에서 볼 수 있듯이 일반적인 머지와는 다르게 <code class=\"language-text\">update-a-txt</code> 브랜치의 가지가 <code class=\"language-text\">master</code>로 들어가는 형태가 아니라 <code class=\"language-text\">master</code> 브랜치에 <code class=\"language-text\">update a txt(#1)</code>이라는 새로운 커밋이 하나 추가된 것을 볼 수 있다. 이때 <code class=\"language-text\">master</code>에 추가된 커밋은 <code class=\"language-text\">update-a-txt</code> 브랜치의 모든 커밋, 즉 변경 사항을 하나로 합친 커밋이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 430px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a251ea6162807052f063138f39401ae1/05ed2/squash-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLElEQVR42oXRWU8aURTA8fkEfWmTPhg2FRhkYBiWGWBwhHFANhUJVq1FawS1dam1TROXaDXRpBi7PPSxS+IH/fdCE5vWhz78Mveee86ZmXOl1vIm8+0tnqy8pLW8RWWuTb21ytLzHRF/wYKI99fVuRXKjWc0FtZpLHaoNtsi1h7k91WbKwNSIKKjGFNoZoVoukwo6RDQbMZSJWJmlbhZIzFeJ56r3gkbJUKpoqipirMamojJoq4fk7JZi+b0U5xChdnZJjOC41SIxRLEtBRavE9HUzOokTRa9Pczohgk1axgDsQjmQFJnq4T/HDA8Jt9ops3GPtfkLtnjK5eEOleEVq/RF47J3y4h3H1GuX9DtHzXfTLAzzHGwwddXAdd3GfbAxIQ5MNHrzd5NH2Nv5Oj+TeDZ61U/zdHvqrT+j7n4nt9NDOjpn8eIF+dYjZOyF/fYr3bJfHR1s8fNe5I/ljBYK+JGpYZ26qTMnKU8xZzDpFnNwEedPCzuZwsja55Dhpo4jZn2XCJi9mO5Gr4XWr+DyxAUmJGujhBPmxMD/KCj8XC3xvmdy2MnxdsLm2Atw2DW6XLL7Nm1QmK+K22+TsGTL5Ol45Jeh3xBfmkUMGY2Kg06UapUIZx3JIqQZKKEEkFEcd0IiKF4+EdIZFvk8U93mDqb9II+EU7qCBXxG3ZJZRxS8pSZvhcAZXoH+m/xG43+BeQ7+sioWOJ5DENaLhGo3jFrxi7xMJ//pfw1/tcl+Ve3QHcQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"squash 3\" title=\"\" src=\"/static/a251ea6162807052f063138f39401ae1/05ed2/squash-3.png\" srcset=\"/static/a251ea6162807052f063138f39401ae1/69538/squash-3.png 160w,\n/static/a251ea6162807052f063138f39401ae1/72799/squash-3.png 320w,\n/static/a251ea6162807052f063138f39401ae1/05ed2/squash-3.png 430w\" sizes=\"(max-width: 430px) 100vw, 430px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이후 쓸모 없어진 <code class=\"language-text\">update-a-txt</code> 브랜치를 삭제하면 <code class=\"language-text\">master</code>에는 Squash된 커밋이 남지만 <code class=\"language-text\">update-a-txt</code> 브랜치에서 커밋되었던 자세한 내용을 볼 수는 없다. 즉, Squash and merge을 사용하여 브랜치를 머지하게 되면 머지된 사실 자체는 알 수 있으나 어떤 상황에서 어떤 코드를 변경 했는지까지는 알 수가 없다.</p>\n<h3 id=\"rebase-and-merge\" style=\"position:relative;\">Rebase and merge<a href=\"#rebase-and-merge\" aria-label=\"rebase and merge permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/0f98f/rebase-icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAd6EtFH/xAAWEAADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCKv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABgQAQADAQAAAAAAAAAAAAAAAAEAETFR/9oACAEBAAE/IbpCZXkodn//2gAMAwEAAgADAAAAEPvP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QAn//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBWf//EABkQAQEBAAMAAAAAAAAAAAAAAAERACExgf/aAAgBAQABPxBEnsZ5kEzymWUV3//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"rebase icon\" title=\"\" src=\"/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/c08c5/rebase-icon.jpg\" srcset=\"/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/0913d/rebase-icon.jpg 160w,\n/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/cb69c/rebase-icon.jpg 320w,\n/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/c08c5/rebase-icon.jpg 640w,\n/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/6a068/rebase-icon.jpg 960w,\n/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/eea4a/rebase-icon.jpg 1280w,\n/static/b74da5cdd2b03fb7e99ba4dc56cde7d3/0f98f/rebase-icon.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>Rebase and merge 전략은 Git의 리베이스(Rebase) 기능을 사용하여 브랜치를 머지하는 것이다. 이때 리베이스는 말 그대로 브랜치 히스토리들의 베이스를 변경하는 기능이다. 베이스를 변경한다는 의미를 좀 더 쉽게 말하자면 <code class=\"language-text\">a</code> 브랜치의 변경 사항이 마치 <code class=\"language-text\">b</code> 브랜치에서 변경된 것처럼 바꿀 수 있다는 것이다.</p>\n<p>리베이스는 머지된 브랜치의 커밋을 모두 살려놓기 때문에 누가 언제, 어떤 부분을 수정했다는 정보는 전부 알 수 있지만 해당 브랜치가 어느 시점에 머지되었는지는 알 수 없다. 그래서 리베이스를 사용하는 경우 다른 방법보다 더 태깅에 신경써줘야한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 415px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f75c8bb1051a60bfbcd10b6a8c523ad5/73926/rebase-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsklEQVR42pXSS28TVxjG8fkCbQViESBjJ47tsR17PPfxXJKJxxlfcjNxsEMIIYgUWLEBYdHUUhetVLFLQ1pVahcVaqClVb/iv8dOMOyqLn56NLf3HM15JCuISdZ6WPEtVu4NaR0OcTa/pLh6SLX9AE2oNu+j+QmGH2MvN3HCVVTTp2IIZnCRl6Sb+gYzGYs55zbqwRnR0QnZzkvUuyfUH5+x9ORnvIenJO0B68kGg5192usD5KxJSpCzBqm8yZxiT0iLakCpYLClFnjXyvBmx+W8Z3G+bfB+x+RVTeZ1lOHvPZ+3/Rrv1os8CG2C1oB6cot6awc7aJPKXQyVKtUQq6BSFNludQmW2zSSLroZUSrXKJbsiUXVE3xxz0UpueQrPrmyN8lsqfZxh+VqgFbQUMw6y2I1tZbgNbosiBdviFXlgsus4jCbty6Ij2QhpViCSHEvPR5WcCbEDgNMRUWpRjTX+tSWOoT1TZRyQDon/m3e/l+kih6iqwZ5f5WlrQFuZxvFi7leFisaAXP6f0tr/pSU6u9y7eQZs7+MCH9/RfW3b1EF9833zPw05IvXz7hy9nzq89PnfPbDxxy78uNwSpKjTWY6G2S2eqh7R+RFLbK9fYr9+2R6e+QGB6S6u8hi92OF232q+3dZ3B1QvrMr3OFmuzMlqVaEplSITIvvHiWMHq4x3G/wzVFHZMLTbZ/RYZOvha/uxTRXOiSNHlG4TmOli+c2mU9rU5JZ87BMnW69zD/Hec5HPn8ca7wfGfz6wuH0yRx/jXT+HJm8PbaJ4xgv3sYO22iiEbOi2B9OeHLKWaNBpuig6DFh+wArEtXxNrmeC7kqm1ybd7masgVrkrI4+XGJUyLTojLz40GXHZz0cEHRxQNHDLXJL7rkSo4oqiCuM5cWPjFfsCdDPvh02Hjgvx6Dv4/ADILiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"rebase 1\" title=\"\" src=\"/static/f75c8bb1051a60bfbcd10b6a8c523ad5/73926/rebase-1.png\" srcset=\"/static/f75c8bb1051a60bfbcd10b6a8c523ad5/69538/rebase-1.png 160w,\n/static/f75c8bb1051a60bfbcd10b6a8c523ad5/72799/rebase-1.png 320w,\n/static/f75c8bb1051a60bfbcd10b6a8c523ad5/73926/rebase-1.png 415w\" sizes=\"(max-width: 415px) 100vw, 415px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>위 그래프는 <code class=\"language-text\">rebase-test-1</code> 브랜치에서 총 4번의 커밋을 진행하고 이제 <code class=\"language-text\">master</code> 브랜치로 머지해야하는 상황이다. 이때 리베이스를 사용하여 브랜치를 머지하게 되면 <code class=\"language-text\">rebase-test-1</code> 브랜치에서 발생한 모든 변경 사항이 마치 <code class=\"language-text\">master</code>에서 직접 커밋한 것 처럼 변경할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 407px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4a365819cf6273cd74a80f29464c202e/0ff56/rebase-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADqElEQVR42o2Ua28TVxCG/RMqAaUhCfH97vVevVdvnNixYycGJ47jAKFQEA1pVYkKKiC90kJVCVWlRW3p/RNS/+XT2S2JoqrQfng0e47s98ycec8kytUaZaOD4Q/Q/DVhnZLVo2L3UdwBZnMdSzAPCeQ3Xp+KtULN7mLIOtpT3VVKRptEraYw3t5lbTRlODzPZGvCWGjYDopmopg+dUExvDjqdhijvUA/RrROlKoqRVEuKg6Z9fvo13/AvPatxO+pDW8RLvfxWwPC9jpO2CNXaZCv2i8lUayZzCh95jMqhc4NGuO7WJu3cbfvUQh2ML0uqr2C5fepN9os5K1XIoI6c0qXZE7HCzrYzqKUu4jVaDKfqjKX0WNm0xrzWZ1kwXolImgwW++LoIa3PCLobOK3R8IGqZJDumQfkSk7pIqN/xacU1dlEWW4QrjYw/HapHN1ybDGQlaVDIW0ymyqTjJvkC7Kn0uNf+XvDKtrJOcV0v07KJe/pjp9yFxrj3zvHRa8bXSxlCqWcbtbJJWQ1zMmyZSUn1QFjQWJKYkRiZLWYGZzl5nxkGC6z87Nj5juH7BxcY9LV28ynexw5eIGNy6MeO+tKdP+Mp2wQXZ8ntSFbZLTMekLE2a3NzgzGZGouE2K+zu88dW73Jma/CI83Q348eoSTy/5fLdtcXtQ4snU5snlFj9dXebLHYfg8R3UXx9hPPsc6+cvOPPNB7z2+BaJnPjQqbsUCiqKlFTrTah1x1RWNjlRCzilNDldb0oMYqK9kzWfebnHswXziGR0r4IIapiKRz6v4TQH+M0+brBKEA6kMQaZnEk6b5I5juy/tMuRoFt34gzt1pBwZYS3NKRqtFg4dvL/JRZs1D0KkqElWTXb57El08hvke8OT47Whx487sV/+jK2TVIVY4vfvNY67f5YSl+No7+0zoK8oFSUqfgv+o6IXsxZKTtiLqPF8Zig+EnryT3p1N0hZrhB2ezJ6FpDD87JOBvK91BGVV8YoNir8cG+XIsh77zV3Yzf+KFoIlvWCMOAclnh02sWfz7o8NuHPf44aPH8wYBHNz2evW/w+8Eyzz/rcHAtJOxOaK+OcUU4Es9VPRkM5oumlHV5aj6FUp29DYWHey6fXPf5+IrO/csGb4807k4L3Lukyp7Bm0OLugxW3V2RWbkkI8uLh0ckGJEo1TTSek8aYGO0tvB7u2jNTSrOOU6lHU5nPU6mfU6mXE4IM1lXutkQB0gzik48QDIV74i/AM7XePNYTE0XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"rebase 2\" title=\"\" src=\"/static/4a365819cf6273cd74a80f29464c202e/0ff56/rebase-2.png\" srcset=\"/static/4a365819cf6273cd74a80f29464c202e/69538/rebase-2.png 160w,\n/static/4a365819cf6273cd74a80f29464c202e/72799/rebase-2.png 320w,\n/static/4a365819cf6273cd74a80f29464c202e/0ff56/rebase-2.png 407w\" sizes=\"(max-width: 407px) 100vw, 407px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>쨘, 리베이스를 진행하고 난 이후의 상황이다. <code class=\"language-text\">rebase-test-1</code> 브랜치의 모든 커밋들이 <code class=\"language-text\">master</code> 브랜치로 그대로 옮겨진 것을 볼 수 있다. 이제 쓸모 없어진 <code class=\"language-text\">rebase-test-1</code> 브랜치를 삭제하게 되면 처음부터 <code class=\"language-text\">master</code>에서 개발을 진행한 것과 같은 깔끔한 히스토리 그래프를 얻을 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 394px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/75abb84c0dc9391820c14ac78025c1bd/cc097/rebase-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVR42pWTW28bVRSF5w8AVdWXYDse32I7vszFM56rZ2xP7cSxHcf3JgVUWsRLW8QDpAkCCSGVpuoTEtAKCSEkxN/8OJkYlCoSgodPa23NaJ199uyRFEVhdfwRo+ma0fiQxWLFcn1MELSp1VUUtYGi6KiaQU13BO5GHRTDQ7eCt5DKNZ28sU+50iA9PKf64GfU+y9JHHxF7cFP6B//gPbwR6rr54S9KdHeEa3uiN5gjun1yJVNdqrWP0jFusWWOiadUyh0P8FeneHNPqcQfUpt8AT14DHa6Cm70SOc9iF2OMRtj/G7ExQzIplvIO+YpDeIQJNk/S7pvIbjRTStEEPg+hGpdJlkTImUXOH9jCJQY7ZkhVReJ1M0ka8hApsklH0RqOKKU4PeHD86IuzPyZRtgXWlJaGl5g3km4GXHe6RLmhiJgNa0QQnHJHbtW68/F+IO0xW+shyDfcysDWi3TmkrgTIWXGl3P9DKqpNtjpTtv0QdbpEmy2xTz7AWKxJtTpsB2KWG67763WsrW6MtGNY3Hpxxru/nlH9/TnOn68o/vYddeG1Py64/UY8e33Ke3/z5pR3Xj8TCI39Fbd+OY+RiopFIpyRcny0xYc07z2kMl6jzO5Tm56gzE+oTI8pjVeUDgXjJfpkgTVfY4obmbMV9vIe214nRtqpGRhVh4xYiUeewbfDgLODkC97Dt8I/6Tr8TQweNZzOe+7fNZ1aPt7hN0jbHcfxx/QaN5FzjVipELVwFMdckWNx1aRVxOPF9MO349dXh6FfNG3ObULXIw9LiY+Xw9bhEGf9kDMOhhiisBUQYSVzBipKDrM1aN4bbRwgru3QvVHVJ19bss6d7IN7uSbsY/rjE5CfM3LJU9kNZI57e21Ke9WSW+K/K4t/keHQsWJfbbcJFu6xLzSTf1vy/0X2/3V41nCQgQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"rebase 3\" title=\"\" src=\"/static/75abb84c0dc9391820c14ac78025c1bd/cc097/rebase-3.png\" srcset=\"/static/75abb84c0dc9391820c14ac78025c1bd/69538/rebase-3.png 160w,\n/static/75abb84c0dc9391820c14ac78025c1bd/72799/rebase-3.png 320w,\n/static/75abb84c0dc9391820c14ac78025c1bd/cc097/rebase-3.png 394w\" sizes=\"(max-width: 394px) 100vw, 394px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>위 그림에서 볼 수 있듯이 리베이스를 사용하여 브랜치를 머지하게되면 머지 커밋이 생성되지 않기 때문에 어느 시점에 어떤 브랜치가 머지된 것인지 알 수가 없다. 그래서 위에서 말했듯이 필자는 <code class=\"language-text\">tag</code> 기능을 사용하여 해당 브랜치가 머지된 시점에 태그를 달아주는 것을 추천한다. <small>(시멘틱 버저닝을 합시다)</small></p>\n<p>그리고 리베이스의 치명적인 단점 중 하나는 바로 머지 컨플릭트(Merge Conflict)가 발생했을 경우다. 이건 머지할 브랜치의 히스토리 자체를 그대로 복사해서 대상 브랜치의 히스토리에 박아버리는 방법이기 때문에 충돌이 발생하게 되면 Merge commit이나 Squash and merge처럼 충돌이 한번 발생하는 것이 아니라 각각의 커밋에 하나씩 충돌이 발생한다.</p>\n<p>이게 머지할 브랜치의 커밋이 몇개 안되는 상황에서는 할만할지 몰라도 커밋이 몇 백개씩 되는 큰 기능의 브랜치를 리베이스로 머지했다가 충돌이 나면 그냥 죽었다 생각하고 커피를 타오도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 커밋 히스토리를 잘 남기는 것은 미래의 나 자신을 위한 것일수도 있지만, 그보다는 내가 작성하는 코드를 언젠가 고쳐야할 누군가를 위해 신경써야 하는 것이 더 크기는 하다.</p>\n<p>쭉 읽어보면 알겠지만 이 3가지 머지 전략은 각각 장단점이 명확하기 때문에 머지 전략 간의 우위는 없다. 그냥 상황에 따라서, 혹은 팀의 전략에 따라서 알맞은 머지 전략을 선택하면 된다는 것이다. 혹자는 Squash and merge나 Rebase와 같은 기능이 필요없고 그냥 일반적인 머지만으로도 충분히 버전 관리가 가능하다고 말하기도 한다.</p>\n<p>그래도 이 3가지 머지 전략이 어떤 원리로 브랜치를 병합하는지 제대로 파악하고 히스토리가 어떻게 기록되는지 알고 있다면 복잡한 협업을 통해 개발이 진행되는 상황에서도 가독성 높은 히스토리 그래프를 만들어 낼 수 있고, 깔끔한 히스토리가 가져다주는 장점들은 분명히 있기 때문에, 아직 일반적인 머지만을 사용하여 히스토리를 관리하고 있었다면 한번 여러가지 전략을 사용해보는 것을 추천한다.</p>\n<p>이상으로 커밋 히스토리를 이쁘게 단장하자 포스팅을 마친다.</p>","fields":{"slug":"20190830-commit-history-merge-strategy","path":"/2019/08/30/commit-history-merge-strategy/","lang":"ko"},"frontmatter":{"title":"커밋 히스토리를 이쁘게 단장하자","subTitle":"Merge, Squash, Rebase 각각 언제 쓰면 좋을까","date":"Aug 30, 2019","categories":["프로그래밍","튜토리얼"],"tags":["Git","Git 기초","Commit","커밋","Merge","Merge and squash","Rebase","VCS","Version Control System","Github","Bitbucket","Pull Request"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/0a02b37a5a8be4d9a803999dc5586f67/3a812/thumbnail.jpg","srcSet":"/static/0a02b37a5a8be4d9a803999dc5586f67/3a812/thumbnail.jpg 320w,\n/static/0a02b37a5a8be4d9a803999dc5586f67/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/0a02b37a5a8be4d9a803999dc5586f67/fc5c5/thumbnail.webp 320w,\n/static/0a02b37a5a8be4d9a803999dc5586f67/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/0a02b37a5a8be4d9a803999dc5586f67/2d839/thumbnail.jpg","srcSet":"/static/0a02b37a5a8be4d9a803999dc5586f67/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/0a02b37a5a8be4d9a803999dc5586f67/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"e3624062-42a7-55d1-9b63-092fe3cba25c","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9A%A9%EC%96%B4%EC%99%80-%EA%B0%9C%EB%85%90-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\">용어와 개념 알아보기</a></p>\n<ul>\n<li><a href=\"#merge-conflict\">Merge Conflict</a></li>\n<li><a href=\"#%EC%97%AC%EB%9F%AC-%EA%B0%9C%EC%9D%98-branch%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">여러 개의 Branch를 사용하는 이유</a></li>\n<li><a href=\"#%EC%A0%84%EB%9E%B5%EC%A0%81%EC%9D%B8-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EA%B4%80%EB%A6%AC-git-flow\">전략적인 브랜치 관리, Git flow</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%91%90-%EA%B0%9C%EC%9D%98-%EB%B8%8C%EB%9E%9C%EC%B9%98%EB%A5%BC-%ED%95%A9%EC%B3%90%EB%B3%B4%EC%9E%90\">두 개의 브랜치를 합쳐보자</a></p>\n<ul>\n<li><a href=\"#merge\">Merge</a></li>\n<li><a href=\"#merge-squash\">Merge squash</a></li>\n<li><a href=\"#rebase\">Rebase</a></li>\n<li><a href=\"#cherry-pick\">Cherry Pick</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9E%91%EC%97%85%ED%95%98%EB%8D%98-%EC%82%AC%ED%95%AD%EC%9D%84-%EC%9E%84%EC%8B%9C%EB%A1%9C-%EC%A0%80%EC%9E%A5%ED%95%B4%EB%B3%B4%EC%9E%90\">작업하던 사항을 임시로 저장해보자</a></p>\n<ul>\n<li><a href=\"#stash\">Stash</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4%EB%AF%B8-%EC%BB%A4%EB%B0%8B%ED%95%9C-%EB%82%B4%EC%9A%A9-%EB%90%98%EB%8F%8C%EB%A6%AC%EA%B8%B0\">이미 커밋한 내용 되돌리기</a></p>\n<ul>\n<li><a href=\"#reset\">Reset</a></li>\n<li><a href=\"#revert\">Revert</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅인 Git 뉴비를 위한 기초 사용법 - 시작하기에서 설명했던 기본적인 명령어보다 좀 더 나아가서 몇 가지 개념과 명령어를 더 공부해보려고 한다. 저번 포스팅에서는 리모트 서버에서 소스를 클론하고 수정한 후 다시 리모트 서버에 업데이트하는 과정에 대해 집중해서 설명했다면 이번 포스팅에서는 Git의 메인 주제인 버전 관리에 대해 더 다뤄볼 예정이다.","html":"<p>이번 포스팅에서는 저번 포스팅인 <a href=\"/2019/07/25/git-tutorial\">Git 뉴비를 위한 기초 사용법 - 시작하기</a>에서 설명했던 기본적인 명령어보다 좀 더 나아가서 몇 가지 개념과 명령어를 더 공부해보려고 한다.</p>\n<p>저번 포스팅에서는 리모트 서버에서 소스를 클론하고 수정한 후 다시 리모트 서버에 업데이트하는 과정에 대해 집중해서 설명했다면 이번 포스팅에서는 Git의 메인 주제인 버전 관리에 대해 더 다뤄볼 예정이다.</p>\n<!-- more -->\n<p>그럼 저번 포스팅과 마찬가지로 간단한 용어와 개념에 대한 설명한 후, 그 개념들을 사용하기 위한 명령어를 설명하도록 하겠다.</p>\n<h2 id=\"용어와-개념-알아보기\" style=\"position:relative;\">용어와 개념 알아보기<a href=\"#%EC%9A%A9%EC%96%B4%EC%99%80-%EA%B0%9C%EB%85%90-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"용어와 개념 알아보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Git은 버전을 효율적으로 관리하기 위해 몇 가지 개념을 제시하고 있다. 현재 나의 버전 상태를 의미하는 HEAD, 작업 공간인 브랜치(Branch), 브랜치를 합치는 머지(Merge)와 리베이스(Rebase)등이 그렇다.</p>\n<p>그리고 이런 기능들을 사용하다보면 가끔 Git의 에러와 마주하게 되는데, 필자같은 경우는 처음 개발자로 일을 시작했을 때 코딩하다가 발생하는 에러보다 Git에서 발생하는 에러가 더 무서웠던 기억이 있다.</p>\n<p>솔직히 코딩하다가 나는 에러는 고치는 과정이 쉽든 어렵든간에 그냥 필자가 고치면 해결되지만, Git에서 나는 에러는 고친답시고 이것 저것 건드리다가 잘못 건드리면 왠지 소스가 가루가 되어 날아갈 것 같아서 무서웠다.</p>\n<p>하지만 Git을 사용한 지 6년쯤 지난 지금 다시 그때를 생각해보면 Git에 대해서 잘 몰랐기 때문에 더 무서웠던 것 같다. 내가 어떤 기능을 사용했을 때 소스가 어떻게 되는 지 정확히 알고 있지 않은 상태였기 때문에 그런 걱정도 들었던 것이다. 혹시 이 글을 읽는 독자 분들 중에서도 필자와 같은 경험이나 생각을 하신 분들이 있을 것이기 때문에 필자가 알고 있는 Git의 개념들을 최대한 알기 쉽게 풀어보려고 한다.</p>\n<h3 id=\"merge-conflict\" style=\"position:relative;\">Merge Conflict<a href=\"#merge-conflict\" aria-label=\"merge conflict permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>필자 생각에 Git을 사용하다가 가장 많이 마주치는 에러는 아무래도 머지 컨플릭트(Merge Conflict)인 것 같다. 한국어로 직역하면 병합 충돌이지만, 다들 “머지 컨플릭트 났다” 또는 그냥 “컨플릭트 났다”라고 한다.</p>\n<p>머지 컨플릭트는 에러라고 하기에는 조금 애매하긴 하지만 어쨌든 정상은 아닌 상황이기 때문에 처음 마주하면 굉장히 당황스럽고 뭐가 뭔지 헷갈린다. 컨플릭트는 말 그대로 소스의 충돌이 발생한 상황이기 때문에 주니어든 시니어든 가리지 않고 평등하게 발생하고, 또한 평등하게 당황하게 된다.</p>\n<p>왜냐면 컨플릭트는 논리적인 에러가 아니라 내 작업물과 다른 사람의 작업물이 충돌한 상황이기 때문에 스스로 혼자 해결하기 힘든 경우가 많기 때문이다. 그럼 컨플릭트, 즉 충돌이 정확히 어떤 상황을 말하는지 알기 위해 실제 협업 상황에서 발생할 수 있는 예시를 함께 살펴보자.</p>\n<blockquote>\n<p>철수와 영희는 사장님으로부터 지각한 사람의 명단을 만들어서 관리해 달라는 부탁을 받았다. 그래서 철수와 영희는 다음과 같은 텍스트 파일을 만들어서 지각자를 관리하기 시작했다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">7월 25일 지각자 명단\n\n나연\n채영\n사나\n쯔위</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>자, 이제 철수와 영희는 사장님으로부터 지각자를 관리할 수 있는 권력을 부여받았고, 매일 이 파일에 지각자를 입력해야한다. 하지만 철수와 영희는 별로 사이가 안 좋기 때문에 이 둘은 서로 커뮤니케이션을 하지 않고 각자 맘대로 파일을 수정하는 방식으로 지각자 입력 작업을 진행하게 된다.</p>\n<p>그러던 중 철수와 영희는 사무실에 심어놓은 자신들의 정보원으로부터 7월 25일의 세번째 지각자인 “사나”가 사실 지각이 아니였다는 정보를 입수했다. 근데 문제는 이 정보원들이 가져온 정보가 서로 달랐던 것이다.</p>\n<p><strong>철수의 정보원:</strong> 야 7월 25일에 지각한 사람 있잖아, 사나가 아니고 미나래!<br />\n<strong>영희의 정보원:</strong> 영희야, 7월 25일에 사나가 지각한게 아니고 지효가 지각한거라는데?</p>\n<p>…</p>\n<p>이 둘은 자신의 정보원을 100% 신뢰하기 때문에 바로 각자 지각자 명단 파일을 수정하기 시작했다.</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>시간</th>\n<th>철수</th>\n<th>영희</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><code class=\"language-text\">지각자.txt</code>의 <code class=\"language-text\">사나</code>를 <code class=\"language-text\">미나</code>로 변경</td>\n<td><code class=\"language-text\">지각자.txt</code>의 <code class=\"language-text\">사나</code>를 <code class=\"language-text\">지효</code>로 변경</td>\n</tr>\n<tr>\n<td>2</td>\n<td>리모트 저장소에 변경 사항 커밋 후 푸쉬</td>\n<td>계속 작업 중</td>\n</tr>\n<tr>\n<td>3</td>\n<td>철수 퇴근 >_&#x3C;</td>\n<td>작업을 마치고 리모트 저장소에 푸쉬 시도</td>\n</tr>\n<tr>\n<td>4</td>\n<td></td>\n<td>리모트 저장소의 상태가 갱신되었으니 Pull부터 하라는 에러 발생. 엥?</td>\n</tr>\n<tr>\n<td>5</td>\n<td></td>\n<td>리모트 저장소의 변경 사항을 로컬로 Pull함</td>\n</tr>\n<tr>\n<td>6</td>\n<td></td>\n<td>철수가 수정한 부분과 영희가 수정한 부분이 충돌!</td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">From https://github.com/evan-moon/conflict-test\n * branch            test       -> FETCH_HEAD\nAuto-merging 지각자.txt\nCONFLICT (content): Merge conflict in 지각자.txt\nAutomatic merge failed; fix conflicts and then commit the result.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 다른 사람과 내가 같은 부분을 수정하게 되면, Git은 어떤 것이 맞는 소스인지 알 방법이 없다. 이런 상황에서 Git은 어떤 부분이 충돌났는지 표시하여 사용자에게 알려주기만 하고 나머지는 사용자가 알아서 수정하라고 맡겨버리는데, 이런 상황이 바로 머지 컨플릭트이다.</p>\n<p>철수와 영희 처럼 같은 브랜치에서 작업한다는 것은 소스의 변경 사항을 계속 히스토리를 공유한다는 것이다. 즉, 주기적으로 리모트 저장소로부터 상대방이 작업한 것을 Pull로 가져와서 내 로컬 브랜치에 병합해야한다는 것인데, 이 과정에서 충돌이 발생할 가능성이 높다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">7월 25일 지각자 명단\n\n나연\n채영\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\n지효\n=======\n미나\n>>>>>>> 35058b46325bb61112efd52f4019f907c561328d\n쯔위</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 <code class=\"language-text\">&lt;&lt;&lt; HEAD</code>와 <code class=\"language-text\">===</code>사이에 들어있는 상단 부분이 현재 브랜치에서 내가 수정한 내용이다. 영희는 <code class=\"language-text\">사나</code>를 <code class=\"language-text\">지효</code>로 수정했기 때문에 해당 부분에 <code class=\"language-text\">지효</code>라는 이름이 들어가 있다.</p>\n<p>그리고 <code class=\"language-text\">===</code>부터 <code class=\"language-text\">>>> 커밋 해쉬</code>사이의 내용은 어떤 커밋에서 수정된 내용과 충돌이 발생했는지 알려준다. 이 예시에서는 철수가 <code class=\"language-text\">사나</code>를 <code class=\"language-text\">미나</code>로 수정한 부분이 될 것이다.</p>\n<p>Git은 그냥 버전 관리만 해주는 친구이기 때문에 이런 상황에서 “사나는 사실 지각자가 아니였기 때문에 다른 사람으로 변경해야했다”와 같은 비즈니스 히스토리는 모른다. 그렇기 때문에 Git은 둘 중에 어떤 것이 맞는 소스인지도 당연히 모를 수 밖에 없다. 그래서 사용자에게 선택을 맡기는 것이다. 이 상황에서 영희는 다음 세가지 선택지를 가질 수 있다.</p>\n<blockquote>\n<ol>\n<li>철수의 변경 사항을 무시<br /></li>\n<li>자신의 변경 사항을 무시<br /></li>\n<li>두 변경 사항 모두 반영</li>\n</ol>\n</blockquote>\n<p>보통 이런 상황에서는 철수를 불러서 <code class=\"language-text\">사나</code> 대신 <code class=\"language-text\">미나</code>를 추가한 이유가 무엇인지 물어본 다음 결정해야하지만 영희는 철수와 사이가 좋지 않으니 그냥 철수의 커밋을 날려버릴 수도 있겠다.</p>\n<h3 id=\"여러-개의-branch를-사용하는-이유\" style=\"position:relative;\">여러 개의 Branch를 사용하는 이유<a href=\"#%EC%97%AC%EB%9F%AC-%EA%B0%9C%EC%9D%98-branch%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"여러 개의 branch를 사용하는 이유 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>브랜치(Branch)는 <a href=\"/2019/07/25/git-tutorial\">저번 포스팅</a>에서 한번 간단하게 설명했다. 이미 저번 포스팅에서 기초적인 브랜치의 개념에 대해서 한번 언급하고 넘어갔기 때문에 이번에는 “왜 여러 개의 브랜치를 사용해야 하는가?”에 대한 이야기를 해보려고 한다.</p>\n<p>기본적으로 Git은 혼자 만의 작업이 아닌 여러 명이 함께 작업하는 협업 상황을 상정하고 만들어졌다. 아무리 Git이 리모트 레파지토리와 로컬 레파지토리로 소스를 분산해서 관리하는 분산 버전 관리 시스템이지만 여러 사람이 한번에 같은 어플리케이션의 코드를 수정하고 있는 상황에서는 방금 위에서 설명한 머지 컨플릭트가 자주 발생하게된다. 그래서 보통 사용자들은 브랜치로 주제에 맞는 작업 공간을 따로 나누어서 히스토리를 관리하는 것이다.</p>\n<p>이렇게 브랜치를 나누어도 결국 언젠가 소스를 병합해야 하기 때문에 컨플릭트가 발생할 확률은 있지만 적어도 작업 중간중간에 계속 해서 컨플릭트를 수정해야하는 일은 많이 줄일 수 있다.</p>\n<p>그래서 개발자들은 “어떻게 해야 효율적으로 여러 개의 브랜치를 관리할 수 있을까?”라는 고민을 하게 되는데, 이때 나온 것이 바로 브랜치 전략이다. 브랜치 전략 중 대표적인 것은 Git flow가 있는데, 이건 그냥 유명한 전략 중 하나일 뿐이기 때문에 어떤 브랜치 전략을 가져갈 것인지는 그 조직이 결정하면 된다.</p>\n<p>그럼 브랜치 전략이 어떤 것인지 알아보기 위해 대표적인 브랜치 전략인 Git flow를 한번 간략하게 살펴보도록 하자.</p>\n<h3 id=\"전략적인-브랜치-관리-git-flow\" style=\"position:relative;\">전략적인 브랜치 관리, Git flow<a href=\"#%EC%A0%84%EB%9E%B5%EC%A0%81%EC%9D%B8-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EA%B4%80%EB%A6%AC-git-flow\" aria-label=\"전략적인 브랜치 관리 git flow permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Git flow는 기본적으로 <code class=\"language-text\">master</code>와 <code class=\"language-text\">develop</code> 브랜치를 가지고 시작하게 된다. 이때 <code class=\"language-text\">master</code>는 항상 운영되고 있는 소스의 상태를 가지고 있어야하며, 절대 <code class=\"language-text\">master</code> 브랜치에는 바로 커밋을 할 수 없다. 그리고 <code class=\"language-text\">develop</code> 브랜치는 팀이 현재 개발을 진행하고 있는 브랜치이다. 그리고 <code class=\"language-text\">develop</code> 브랜치에서 각자 개발을 맡고 있는 기능 별로 <code class=\"language-text\">feature</code> 브랜치를 생성해서 실제 개발을 진행하게 된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/36200b7d3489370e101d9715d3b4da42/d3deb/git-flow1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACFUlEQVR42oWUW2/bMAyF8///04BhwLCH7mndBVixFp1jx5f4Eju2LEvW2aGpNEPXdiq+kGaNI4qkvIOsL7eA8ZsLOwP5HmgqoC6Vtr4+iz21wJF+VyviHwtg6LHbRO7ugXRlkP4aKLoAzivGKXPECpe419hCvOBVMGS/RYnCNNwMTAB5tBfOkZGcSEOYHHri8LQ0w4efCOBunbxM4dkAEzE8/hKxJvpWrYvWRry/CtY375j5qLu13K6VWvH8HdNoScNU6qP6l5jUUWxdaY0liYvgmNzhW/UdgRn6fsUQJgwLcRPmdWGp7MYUkZhd3eYb+i6s1yMH+T2kuEk/w9b8Z++QmxxZnyE/52hMi2qsUI4lqdBMDVrG6rFGMRQozyUGOzyrYZbg8fSIdc+deAKwJBhiA6Zox9gAiVu8uqLgXgWLdetecAHBEEuW6I+RKcae/f0r2FMwWbdxCS1faUhHejIEjQl10DGa38yQR+4oWAUdHVleR/OJy7OLfnhFcIvnKT4mn2APbMrgkI0HFCz2YdCm1GyENCXtUxS0xpm3a9j9+IqH2/tt8qUeC0fCBb9ZzyvlVr+NxiUe8J+mmA/v4c2iEbkJ8gH4m77VgZYhPub6QfDuZcE5yVjkSnflTwjy7sqbxYx4+a1YK8/MeOazUbv6l/PcJb+MqsRlmWAhN49JNY1y4seg5wy2bFgpX7FGr/lLgn8Al0LhVInUpw0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"git flow1\" title=\"\" src=\"/static/36200b7d3489370e101d9715d3b4da42/6af66/git-flow1.png\" srcset=\"/static/36200b7d3489370e101d9715d3b4da42/69538/git-flow1.png 160w,\n/static/36200b7d3489370e101d9715d3b4da42/72799/git-flow1.png 320w,\n/static/36200b7d3489370e101d9715d3b4da42/6af66/git-flow1.png 640w,\n/static/36200b7d3489370e101d9715d3b4da42/d9199/git-flow1.png 960w,\n/static/36200b7d3489370e101d9715d3b4da42/21b4d/git-flow1.png 1280w,\n/static/36200b7d3489370e101d9715d3b4da42/d3deb/git-flow1.png 1758w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>모바일에서는 이 그래프의 내용이 잘 안보일 수 있으니 브랜치 이름에 색을 입혀서 설명하도록 하겠다.</p>\n<p>이 그래프를 보면 <strong><font color=\"blue\">master</font></strong> 브랜치에 프로젝트의 시작을 의미하는 커밋이 찍힌 후 <strong><font color=\"red\">develop</font></strong> 브랜치가 생성되었고, <strong><font color=\"red\">develop</font></strong> 브랜치에서부터 기능 개발을 담당하는 브랜치들이 분기하고 있는 모습을 볼 수 있다.</p>\n<p>에반은 <strong><font color=\"green\">feature/add-typescript</font></strong> 브랜치를 생성한 후 어플리케이션에 타입스크립트를 붙히는 작업을 하고, 다니엘은 <strong><font color=\"magenta\">feature/social-login</font></strong> 브랜치를 생성한 후 소셜 로그인 연동 작업을 하고 있다. 그 후 개발이 끝나는 대로 <strong><font color=\"red\">develop</font></strong> 브랜치에 해당 브랜치들을 차례로 머지하고 있는 모습을 볼 수 있다.</p>\n<p>다니엘이 에반보다 <strong><font color=\"red\">develop</font></strong> 브랜치에 머지한 시점이 늦기 때문에 만약 에반과 다니엘이 같은 부분을 변경했다면 이때 컨플릭트가 발생하게 된다. 하지만 적어도 에반과 다니엘이 각자 기능을 개발하고 있을때는 컨플릭트가 발생하지 않기 때문에 좀 더 기능 개발에 집중할 수 있게 되는 것이다.</p>\n<p>이렇게 개발을 쭉쭉 진행하다가 배포를 해야할 시점이 오면 <strong><font color=\"blue\">master</font></strong> 브랜치로부터 <code class=\"language-text\">release</code>브랜치를 생성한다. 필자의 직장같은 경우는 <code class=\"language-text\">release/release-1.0.0</code>과 같이 배포 버전을 브랜치 이름에 표기하는 네이밍 컨벤션을 따르고 있다. 이 <code class=\"language-text\">release</code> 브랜치는 온전히 배포 만을 위한 브랜치이기 때문에 해당 버전의 배포가 끝나면 버려진다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fcb2177c59a4abcc0f9eabce70541126/24def/git-flow2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 83.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACX0lEQVR42n2U607cMBCF9/0fpD/6LlURohRVhRYW2JBs7hfnZp9+tgN01bKRjmYyjs/cs9vf1dLayS2j5Kyck9pO+nIhffrsVHGcHaWijPB6ja1upLxQOPf2I/YG2y4/ztKcy01YTSINR1nI3dhg63FmcDYgxw1TsAW71xd/DizBCMISHomXlsv774RwTaRcGDM+xuUMphxZR3jbG7ytirCzJ4IwxevVpVzjPyZXw+W2JSc+KtEr8mrQ6zLqbR3fA9B9RB7zK+EzJA8HOWqgitQmlJ7DFkdmibrHAMwm32xLJFqAL34kJNU2k4NXt0OopwhQOR8QQND9GUcym+5Rb9Lq5NmVjxT/+VbOR5xtERpkR0o9Z6aVG5B9jd5FfcA2Rl09Htf1nbAiwuz3V/U+/IzuQugM3eu7ADcQ1oCDnkxede/wzdafEjbJpDr9qevDHWnOgfA41nrqDnoZMuWmRB6Vjjn2UsVYqeQ8xZaZQqMfnb9Trg9GY/6gl5xOPU2B0NIPO6yyxqJbrehrH2ENsOgb3NaMU8Jir7SgZvuYciy+e29EvzWn2ZpzyvG/CCHMadtDjDBcrl2U/dbNdutstTn5kDDxhPdKCsYliYTr7Bh80llIeaHgq2MK7Ab3z6icELbJqDL5oZvbX2z5LDtlKueOotMEGlLPLY2oQwNStqj3e33m2VWHTsXFpYYctxO5mBRQy87PXxfGwo1DlMFGDezHIe6Km3tqd8XfggJ1ezYlzl/Y1a4Jwx1mzQ+w32NvO0f4+O3ALlbxf6i4kgX3cvgq7jZwl8gsj7Z5OZux/gDdKC3oLuGzeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"git flow2\" title=\"\" src=\"/static/fcb2177c59a4abcc0f9eabce70541126/6af66/git-flow2.png\" srcset=\"/static/fcb2177c59a4abcc0f9eabce70541126/69538/git-flow2.png 160w,\n/static/fcb2177c59a4abcc0f9eabce70541126/72799/git-flow2.png 320w,\n/static/fcb2177c59a4abcc0f9eabce70541126/6af66/git-flow2.png 640w,\n/static/fcb2177c59a4abcc0f9eabce70541126/d9199/git-flow2.png 960w,\n/static/fcb2177c59a4abcc0f9eabce70541126/21b4d/git-flow2.png 1280w,\n/static/fcb2177c59a4abcc0f9eabce70541126/24def/git-flow2.png 1812w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>개발이 종료되고 <code class=\"language-text\">1.0.0</code> 버전을 배포하기 위해 <strong><font color=\"blue\">master</font></strong> 브랜치로부터 <strong><font color=\"orange\">release/release-1.0.0</font></strong> 브랜치를 하나 생성했다.</p>\n<p>그 후 다음 버전에 배포될 기능들을 가지고 있는 <strong><font color=\"red\">develop</font></strong> 브랜치를 <strong><font color=\"orange\">release/release-1.0.0</font></strong> 브랜치에 머지하고 스테이징 서버에 배포하는 등 최종 테스트를 한 다음, 조직원 모두가 해당 버전의 배포에 동의한다면 <strong><font color=\"blue\">master</font></strong> 브랜치에 해당 브랜치를 머지하고 버전명으로 태그를 단다.</p>\n<p>이때 이런 궁금증이 생기는 분이 있을 것이다.</p>\n<blockquote>\n<p>그럼 핫픽스는 어떻게 하나요? develop 브랜치에서 브랜치를 분기하면 현재 버전의 기능 개발이 끝날 때까지 기다려야하는데…</p>\n</blockquote>\n<p>이런 경우 <code class=\"language-text\">develop</code> 브랜치에서 <code class=\"language-text\">hotfix</code> 브랜치를 분기하여 <code class=\"language-text\">master</code>로 머지 후 긴급 배포를 하게되면 <code class=\"language-text\">develop</code> 브랜치에 들어있는 아직 배포되지 말아야할 기능들까지 배포되기 때문에, 핫픽스는 예외적으로 <code class=\"language-text\">master</code>에서 분기해서 다시 <code class=\"language-text\">master</code>로 머지할 수 있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6ce98c7e9ed5003464a381a69b640a7e/52ab5/git-flow3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 101.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC30lEQVR42n1V23LTMBTM//8QD7wz8MRQoGHapmmTJnEcy7ZkW5Z80bLHctoUCJk5cy6SVqujtbLYrGuEJgW6imaA0GMYgMYCnz4Dt78A2wKlBuoa0JxS1bFmGNcNPZdqjluuWaTECmMfwTrOzB644gXoGfcKGOk9fVcw56rezDbHXTkTIQsI4IlxxUJOZJUTkGCG5huMlSJ7g9AKJdKgD20z+WgSxzrGGfB48Ajf78iZLEMABp7FZgTlpIZWV9Eklo3ryzq90bE+nAE3Fv1qxSYxY50UCEjahgVNxpU0T4BkYRm9KaKfWV3+Fve3LfTTnv0gViIlAjYZRp4m1B2C5UAjt9RzL8bMpY5a8sD+C4kLwGTrENSOk3j0NRl4gvtqwoXmTJ4KTdzn1SSvZj/+wXD5NYV9uuFENl/ZabuWO3/4CLwQu+RpdRVNYmmtppXV7HnysnxtIRarXwrJ3RLHQ4HDMkHr7XSMx8eW/XYE97wDB9vQrJiPMa2p22ms799oLtKdw6iOCGxLdp9itV5NA4VWyHJFVoYsNAVtKOCKoq4nL1aUsT4MwwXg1sKvl+TMU+8tTvlpGgiFijctkhA7y6Oec5HNWQEXt73I9j2Omx/IOej3DqlKpwFPsXoKt3MtHL1jLt47i8639LE2dD7q9wyoCGgOazycNugT/wp4pBYPTQLlcmQtzSnkrkDpNQxVkNsCiuYH//6Ws11HHW+h2I9uRcAiAgYToizE5PLrWfgil7/1/B6wJWCmS3TPPHIeAcdmjMJ1s0lsZ+tpl2r+N0OD7sG9MTyLur5gKOz0nF9jOPXwyB4en9Ht/estS++kZ9ob1HzWpHeKueG7eY1dZHjokS2XKBIDTyGnp8jQ8bly7nyrjj7edscc43gdMHnSaG++UVoNdocdPyMdj1ye4usiL4vorTExLvkCcYOrgD+/7LDfbqYvoOW7HqgpISDfbdVEk78D+ZYL1lqP//5+A7ivEsXg5u07AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"git flow3\" title=\"\" src=\"/static/6ce98c7e9ed5003464a381a69b640a7e/6af66/git-flow3.png\" srcset=\"/static/6ce98c7e9ed5003464a381a69b640a7e/69538/git-flow3.png 160w,\n/static/6ce98c7e9ed5003464a381a69b640a7e/72799/git-flow3.png 320w,\n/static/6ce98c7e9ed5003464a381a69b640a7e/6af66/git-flow3.png 640w,\n/static/6ce98c7e9ed5003464a381a69b640a7e/d9199/git-flow3.png 960w,\n/static/6ce98c7e9ed5003464a381a69b640a7e/21b4d/git-flow3.png 1280w,\n/static/6ce98c7e9ed5003464a381a69b640a7e/52ab5/git-flow3.png 1420w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>그래프가 조금 복잡해졌지만 검정색 라인인 <strong>hotfix/fix-main-page</strong>에만 집중해보자. <strong><font color=\"blue\">master</font></strong> 브랜치로부터 갈라져나와서 한 개의 커밋이 찍히고 다시 <strong><font color=\"blue\">master</font></strong> 브랜치로 머지되는 것을 볼 수 있다. 이때는 정식 릴리즈가 아닌 핫픽스 릴리즈이므로 <a href=\"https://semver.org/lang/ko/\" target=\"_blank\" rel=\"nofollow\">Sementic Version</a> 룰에 따라 <code class=\"language-text\">0.0.1</code> 버전의 태그를 달아주었다.</p>\n<p><strong>hotfix/fix-main-page</strong> 브랜치가 머지되고 배포가 되었다는 것은 현재 운영 환경에서 돌아가고 있는 소스가 변경되었다는 것이므로 <strong><font color=\"red\">develop</font></strong> 브랜치에도 해당 변경 사항을 반영해줘야한다.</p>\n<p>그렇기 때문에 핫픽스 담당자는 배포를 하고 나면 <code class=\"language-text\">develop</code> 브랜치를 직접 최신화하는 것이 좋다. 그리고 동료들에게 “지금 핫픽스 배포가 끝났으니 각자 작업하시는 브랜치에서 develop 브랜치를 Pull하여 최신화 해주세요~“라고 알려주면 더더욱 좋을 것이다.</p>\n<p>물론 이런 복잡한 브랜치 전략 없이도 그냥 잘 돌아가는 조직도 있다. 하지만 같은 소스를 만지는 개발자가 많아지면 많아질수록 어느 정도의 룰조차 없다면 원활한 협업이 진행되기는 힘들 수도 있기 때문에 대부분의 규모있는 조직에서는 각자의 상황에 맞는 브랜치 전략을 세워서 버전 관리를 진행하고 있다.</p>\n<p>브랜치를 왜 하나로만 운영하지 않는지 이해가 되었다면, 이제 이 브랜치와 버전 히스토리들을 가지고 놀 수 있는 몇 가지 유용한 기능들을 더 살펴보도록 하자.</p>\n<h2 id=\"두-개의-브랜치를-합쳐보자\" style=\"position:relative;\">두 개의 브랜치를 합쳐보자<a href=\"#%EB%91%90-%EA%B0%9C%EC%9D%98-%EB%B8%8C%EB%9E%9C%EC%B9%98%EB%A5%BC-%ED%95%A9%EC%B3%90%EB%B3%B4%EC%9E%90\" aria-label=\"두 개의 브랜치를 합쳐보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>각자의 브랜치에서 작업을 계속 진행하다보면 언젠가 두 브랜치를 합쳐야 하는 날이 다가온다. 이때 두 개의 브랜치를 합치는 행위를 브랜치 병합(Branch Merge)이라고 한다.</p>\n<p>Git은 Merge, Merge and Squash, Rebase 각각 특색있는 3개의 브랜치 병합 기능을 제공한다. 결국 이 3개의 명령어 모두 두 개의 브랜치를 합친다는 행위는 같지만, 합치는 방법도 다르고 버전 히스토리도 다르게 남기 때문에 적재적소에 이 기능들을 잘 이용한다면 팀원들에게 이쁨받는 깃쟁이가 될 수 있을 것이다.</p>\n<h3 id=\"merge\" style=\"position:relative;\">Merge<a href=\"#merge\" aria-label=\"merge permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d89813d37e675e64e3f97f8b98c8e28/63ea1/merge_icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd6AsD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAEEH/2gAIAQEABj8CKv/EABkQAQACAwAAAAAAAAAAAAAAAAEAUREhcf/aAAgBAQABPyFWmbqDmJ//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIUFRYYHw/9oACAEBAAE/EGFUDhXH2NjyhEiyLmf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge icon\" title=\"\" src=\"/static/3d89813d37e675e64e3f97f8b98c8e28/c08c5/merge_icon.jpg\" srcset=\"/static/3d89813d37e675e64e3f97f8b98c8e28/0913d/merge_icon.jpg 160w,\n/static/3d89813d37e675e64e3f97f8b98c8e28/cb69c/merge_icon.jpg 320w,\n/static/3d89813d37e675e64e3f97f8b98c8e28/c08c5/merge_icon.jpg 640w,\n/static/3d89813d37e675e64e3f97f8b98c8e28/63ea1/merge_icon.jpg 696w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>머지(Merge)는 제일 기본적인 브랜치 병합 기능으로, 합치려고 하는 대상 브랜치의 변경 사항을 타겟 브랜치에 모두 반영하면서 머지 커밋(Merge commit)을 남긴다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout master\n$ <span class=\"token function\">git</span> merge feature</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>일반적인 머지는 이미 많은 분들이 알고 있을테니 깊게 설명하지 않고 빠르게 넘어가겠다.</p>\n<h3 id=\"merge-squash\" style=\"position:relative;\">Merge squash<a href=\"#merge-squash\" aria-label=\"merge squash permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/00597/merge_squash_icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd6AsD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAEAAwEAAAAAAAAAAAAAAAABABFRYf/aAAgBAQABPyFvGW4w6VP/2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQACAwAAAAAAAAAAAAAAAREAkSExQf/aAAgBAQABPxBVxK+Jm3nZvGo0V3n/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"merge squash icon\" title=\"\" src=\"/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/c08c5/merge_squash_icon.jpg\" srcset=\"/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/0913d/merge_squash_icon.jpg 160w,\n/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/cb69c/merge_squash_icon.jpg 320w,\n/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/c08c5/merge_squash_icon.jpg 640w,\n/static/bc6a1dfaa1d43203ee77b5f4f1b442e1/00597/merge_squash_icon.jpg 678w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이번에는 두 개의 브랜치를 병합할 때 사용하는 머지 명령어의 <code class=\"language-text\">--squash</code> 옵션을 한번 알아보자. <code class=\"language-text\">--squash</code> 옵션은 해당 브랜치의 커밋 전체를 통합한 커밋을 타겟 브랜치에 머지하는 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout master\n$ <span class=\"token function\">git</span> merge <span class=\"token parameter variable\">--squash</span> feature</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>일반 머지는 머지가 되는 대상 브랜치의 모든 커밋이 남아있는 상태에서 타겟 브랜치로 합쳐지지만 머지 스쿼시는 대상 브랜치의 모든 커밋을 모아서 하나의 커밋으로 합치고 타겟 브랜치에 머지하는 방식이다.</p>\n<p>사실 이 기능의 정확한 이름은 Merge “and” Squash이다. 즉, 스쿼시도 머지와 같이 독립된 하나의 개념이라는 것이다. 스쿼시는 커밋을 여러 개 합친다는 개념이기 때문에 하단에 후술할 <code class=\"language-text\">rebase</code> 명령어와 함께 사용하여 현재 브랜치의 커밋을 합칠 때도 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> rebase <span class=\"token parameter variable\">-i</span> HEAD~~</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>위 명령어는 <code class=\"language-text\">HEAD</code>부터 <code class=\"language-text\">HEAD</code>의 <code class=\"language-text\">~~(전전)</code> 커밋까지의 히스토리를 변경하겠다는 의미이다. 이 명령어를 입력하면 <code class=\"language-text\">vim</code>이 실행되고 아래와 같은 내용이 표시된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">pick 9a54fd4 commit의 설명 추가\npick 0d4a808 pull의 설명을 추가\n\n<span class=\"token comment\"># Rebase 326fc9f..0d4a808 onto d286baa</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Commands:</span>\n<span class=\"token comment\">#  p, pick = use commit</span>\n<span class=\"token comment\">#  r, reword = use commit, but edit the commit message</span>\n<span class=\"token comment\">#  e, edit = use commit, but stop for amending</span>\n<span class=\"token comment\">#  s, squash = use commit, but meld into previous commit</span>\n<span class=\"token comment\">#  f, fixup = like \"squash\", but discard this commit's log message</span>\n<span class=\"token comment\">#  x, exec = run command (the rest of the line) using shell</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># If you remove a line here THAT COMMIT WILL BE LOST.</span>\n<span class=\"token comment\"># However, if you remove everything, the rebase will be aborted.</span>\n<span class=\"token comment\">#</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 텍스트에 표시된 커밋들의 맨 앞에 있는 <code class=\"language-text\">pick</code> 문자를 <code class=\"language-text\">s</code>또는 <code class=\"language-text\">squash</code>로 변경하면 두 개의 커밋이 합쳐진다.</p>\n<h3 id=\"rebase\" style=\"position:relative;\">Rebase<a href=\"#rebase\" aria-label=\"rebase permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/40de34e1abf0e6be14897f662e2dfb2f/15ec7/rebase_icon.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAADAQEAAAAAAAAAAAAAAAAAEWEBMf/aAAgBAQABPyHsFdHD/9oADAMBAAIAAwAAABDz7//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBUZGh/9oACAEBAAE/EC97A+z7L3BZFY57n//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"rebase icon\" title=\"\" src=\"/static/40de34e1abf0e6be14897f662e2dfb2f/c08c5/rebase_icon.jpg\" srcset=\"/static/40de34e1abf0e6be14897f662e2dfb2f/0913d/rebase_icon.jpg 160w,\n/static/40de34e1abf0e6be14897f662e2dfb2f/cb69c/rebase_icon.jpg 320w,\n/static/40de34e1abf0e6be14897f662e2dfb2f/c08c5/rebase_icon.jpg 640w,\n/static/40de34e1abf0e6be14897f662e2dfb2f/15ec7/rebase_icon.jpg 690w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>리베이스(Rebase)도 머지(Merge)와 마찬가지로 브랜치를 다른 브랜치로 합칠 수 있는 기능이다. 단 머지와 차이가 있다면 바로 합치는 방식이다. 머지는 말 그대로 두 개의 브랜치를 하나로 합치는 기능이기 때문에 A 브랜치의 변경 사항 전부를 B 브랜치에 푸쉬하는 것과 동일하다. 그렇기 때문에 머지를 사용하여 브랜치를 합치게 되면 반드시 머지 커밋(Merge commit)이 남게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout feature\n$ <span class=\"token function\">git</span> merge master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <img src=\"/ffb4536f7728ae28594958aaca9659e3/merge.svg\">\n  <small>[출처] https://dzone.com/articles/merging-vs-rebasing</small>\n</center>\n<p>그렇기 때문에 머지는 어느 시점에 어떤 브랜치가 머지 되었는 지 커밋을 통해 알기 쉽다는 장점이 있다. 그러나 단점은 불필요한 커밋이 생성된다는 것이다. 이 단점은 작업 중인 브랜치가 별로 많지 않을 때는 나타나지 않지만 브랜치가 많아지면 나중엔 커밋 로그가 머지 커밋으로 뒤덮혀있는 광경을 볼 수도 있게 된다.</p>\n<p>반면 리베이스는 단순히 합치는 것이 아니라 말 그대로 브랜치의 베이스를 변경하는 것이다. 방금 전 예시의 <code class=\"language-text\">feature</code> 브랜치를 <code class=\"language-text\">master</code>로 리베이스하게 되면 마치 <code class=\"language-text\">feature</code> 브랜치의 변경 사항들이 <code class=\"language-text\">master</code>의 변경 사항이었던 것처럼 히스토리가 기록된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout feature\n$ <span class=\"token function\">git</span> rebase master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <img src=\"/6480d07dcea3d4a3947bd5bb43c05f49/rebase.svg\">\n  <small>[출처] https://dzone.com/articles/merging-vs-rebasing</small>\n</center>\n<p>리베이스의 장점은 바로 깔끔한 커밋 히스토리를 만들어 준다는 것이다. 머지 커밋이 남지 않고 애초에 <code class=\"language-text\">master</code>에서 수정한 것 마냥 히스토리가 남기 때문에 깔끔하게 일자로 쭉 떨어지는 이쁜 히스토리를 볼 수 있다. 하지만 리베이스의 단점은 바로 이 커밋 끼워넣기 때문에 발생하는 문제이다.</p>\n<center>\n  <img src=\"/34e0fc3447edc79347d93a96fec5ecd9/rebase-problem.svg\">\n  <small>[출처] https://dzone.com/articles/merging-vs-rebasing</small>\n</center>\n<p>필자가 만약 <code class=\"language-text\">feature</code> 브랜치를 <code class=\"language-text\">master</code>로 리베이스했다고 가정해보자.</p>\n<p>이때 필자가 <code class=\"language-text\">feature</code> 브랜치를 생성한 이후에 <code class=\"language-text\">master</code>에 반영된 커밋들은 모두 맨 끝으로 이동하고 중간에 <code class=\"language-text\">feature</code> 브랜치의 커밋들을 끼워넣게 된다. 즉, 필자가 보고 있는 <code class=\"language-text\">master</code>의 상태는 <code class=\"language-text\">feature</code>의 변경 사항들이 반영되어 있는 히스토리를 가지고 있지만 다른 사람의 <code class=\"language-text\">master</code>는 아직 예전 <code class=\"language-text\">master</code>의 히스토리와 함께 일하고 있다는 것이다.</p>\n<p>그럼 두 개의 <code class=\"language-text\">master</code>를 강제로 병합해줘야하는데 병합 자체는 푸쉬할때 <code class=\"language-text\">--force</code> 옵션을 주면 되지만 문제는 이게 굉장히 혼란스러운 상황이라는 것이다. 쉽게 말해서 커밋 히스토리가 꼬이게 되고 사무실의 여기저기서 “어? 이거 왜 이래? 왜 푸시 안돼?”라는 소리가 들려오기 딱 좋은 상황이다.</p>\n<p>그래서 <code class=\"language-text\">master</code>로의 병합은 머지 스쿼시를 사용하고 <code class=\"language-text\">develop</code>으로의 병합 때 리베이스를 사용하거나 하는 경우도 있다. 머지는 머지 커밋을 발생시키며 히스토리가 미래로 나아가기 때문에 이런 문제가 발생할 확률이 적지만, 리베이스는 과거를 변경하는 것이기 때문에 문제가 생기기 쉬운 것이다.</p>\n<p>뭐 여러모로 둘 다 장단점이 있으니 잘 골라서 사용하도록 하자.</p>\n<h3 id=\"cherry-pick\" style=\"position:relative;\">Cherry Pick<a href=\"#cherry-pick\" aria-label=\"cherry pick permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>체리픽(Cherry Pick)은 다른 브랜치에서 어떤 하나의 커밋만 내 브랜치로 가져오는 기능이다. 체리픽이 하는 일을 보면 대상 브랜치의 커밋 하나를 가져와서 현재 브랜치에 병합하는 행위라고 느껴지지만 히스토리를 보면 병합되는 그림이 아니라 그냥 해당 커밋을 그대로 복사해와서 내 브랜치에 커밋되는 형태로 기록된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout master\n$ <span class=\"token function\">git</span> cherry-pick 35058b4 <span class=\"token comment\"># 가져올 커밋 해쉬</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>물론 체리픽을 사용할 때도 현재 브랜치의 소스와 충돌이 날 가능성은 있기 때문에 가져오기 전에 충돌을 수정할 수도 있다는 마음의 준비는 필요하다. 체리픽은 잘 쓰면 은근히 꿀 기능인데, 바로 이런 상황 때문이다.</p>\n<blockquote>\n<ol>\n<li>A 브랜치에서 철수가 기능 개발 중</li>\n<li>B 브랜치에서 영희가 기능 개발 중</li>\n<li>디자이너가 영희에게 리뷰 별점 아이콘과 디자인을 변경해달라고 요청</li>\n<li>영희가 B 브랜치에서 디자이너의 요구 사항을 반영</li>\n<li>근데 B 브랜치보다 A 브랜치가 먼저 배포되야 함</li>\n<li>디자이너가 철수에게 A 브랜치에 왜 리뷰 별점 디자인 반영안됐냐고 물어봄</li>\n</ol>\n</blockquote>\n<p>제일 좋은 상황은 철수가 디자이너의 요구 사항을 반영하는 것이겠지만, 막 정신없이 일을 하다보면 그렇게 술술 풀리는 경우만 있는 게 아니기 때문에 이런 문제가 발생하긴 한다.</p>\n<p>이때 철수는 영희가 작업하고 있는 B 브랜치에서 리뷰 별점 아이콘이 수정된 커밋을 A 브랜치로 체리픽함으로써 이 상황을 쉽게 해결할 수 있게 된다. 이렇게 사람 애매해지게 만드는 상황은 생각보다 자주 발생하기 때문에 체리픽에 익숙해지는 것을 추천한다.</p>\n<p>사실 이 상황은 필자가 얼마 전에 겪은 상황인데 철수가 필자이고 영희가 동료 프론트엔드 개발자였다. 그래서 동료 개발자분과 B 브랜치의 커밋 로그를 봤는데, 리뷰 별점 아이콘만 수정된 커밋이 아니라 다른 변경 사항도 함께 묻어있는 커밋 밖에 없어서 디자이너와 딜을 할 수 밖에 없었고, “그럼 B 브랜치가 배포될 때 한꺼번에 같이 반영해주세요~“라는 결론으로 무사히 넘어갈 수 있었다. <small>(디자이너님 감사감사…)</small></p>\n<h2 id=\"작업하던-사항을-임시로-저장해보자\" style=\"position:relative;\">작업하던 사항을 임시로 저장해보자<a href=\"#%EC%9E%91%EC%97%85%ED%95%98%EB%8D%98-%EC%82%AC%ED%95%AD%EC%9D%84-%EC%9E%84%EC%8B%9C%EB%A1%9C-%EC%A0%80%EC%9E%A5%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"작업하던 사항을 임시로 저장해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"stash\" style=\"position:relative;\">Stash<a href=\"#stash\" aria-label=\"stash permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>스태쉬(Stash)는 현재 작업 중인 변경 사항들을 잠시 스택에 저장할 수 있는 명령어이다. 이 명령어는 아직 마무리되지 않은 작업이 있는데 다른 브랜치로 체크아웃 해야하는 경우에 유용하게 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> stash <span class=\"token comment\"># 현재 변경 사항들을 스택에 저장</span>\n$ <span class=\"token function\">git</span> stash list <span class=\"token comment\"># 스태쉬 목록을 확인</span>\n$ <span class=\"token function\">git</span> stash apply <span class=\"token comment\"># 가장 최근의 스태쉬를 다시 불러온다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>또는 직접 스태쉬 이름을 지정할 수도 있다. 스태쉬의 이름을 지정하지 않으면 스택에 들어간 순서(First In Last out)대로만 스태쉬를 가져올 수 있으므로 왠만하면 이름을 지정하는 것을 추천한다. 필자는 주로 스태쉬 이름을 브랜치 이름과 동일하게 지정하는 편이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> stash branch-name <span class=\"token comment\"># 스태쉬 이름을 branch-name으로 지정하고 스택에 저장</span>\n$ <span class=\"token function\">git</span> stash apply branch-name <span class=\"token comment\"># branch-name 이름을 가진 스태쉬를 불러온다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>실제로 회사에서 개발을 하다보면 갑자기 긴급한 버그 픽스 건이 들어온다거나 아니면 PO들이 이슈의 우선 순위를 다시 정리하면서 기존에 작업을 하고 있던 브랜치에서 다른 브랜치로 건너가야하는 경우는 꽤나 빈번하게 발생한다. <small>(특히 버그 픽스…)</small> 이때 다른 브랜치로 넘어가기위해 작업하던 것을 그대로 커밋하게 되면 해당 브랜치에서 함께 개발하고 있는 다른 팀원들에게 피해가 갈 수 있으니 반드시 변경 사항을 스태쉬하도록 하자.</p>\n<h2 id=\"이미-커밋한-내용-되돌리기\" style=\"position:relative;\">이미 커밋한 내용 되돌리기<a href=\"#%EC%9D%B4%EB%AF%B8-%EC%BB%A4%EB%B0%8B%ED%95%9C-%EB%82%B4%EC%9A%A9-%EB%90%98%EB%8F%8C%EB%A6%AC%EA%B8%B0\" aria-label=\"이미 커밋한 내용 되돌리기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>개발을 진행하다보면 가끔 커밋을 다시 되돌려야 하는 경우도 생긴다. 보통 실수로 인해서 이런 상황이 발생하는 것을 많이 봤는데, 배포되지 말아야 할 기능이 <code class=\"language-text\">release</code> 브랜치에 껴서 들어간 경우를 제일 많이 본 것같다. 이런 상황에서 그 기능의 코드를 일일히 찾아 손으로 지우는 것은 너무 위험하기 때문에 Git을 사용하여 커밋을 되돌리게 된다. 이때 사용하는 기능이 바로 Reset과 Revert이다.</p>\n<h3 id=\"reset\" style=\"position:relative;\">Reset<a href=\"#reset\" aria-label=\"reset permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>리셋(Reset)은 지정한 커밋 당시로 돌아가는 것이다. 아예 시간을 되돌린다고 생각하면 된다. 즉, 리셋을 사용하게되면 지정한 커밋 이후의 히스토리는 모두 사라지게 된다. 예를 들어 이런 히스토리가 있다고 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">* 19061e7 - 맛없는 식당을 찾은 죄로 여자친구한테 이별 통보를 받았다.\n<span class=\"token operator\">|</span>\n* e50aff9 - 여자친구가 맛이 없다고 한다.\n<span class=\"token operator\">|</span>\n* 2d57c29 - 알리오 올리오를 주문했다.\n<span class=\"token operator\">|</span>\n* c04f8f6 - 찾아본 식당에 방문했다.\n<span class=\"token operator\">|</span>\n* 7d9d953 - 여자친구와 함께 갈 좋은 식당을 찾았다<span class=\"token operator\">!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자는 여친과 함께 방문할 좋은 식당을 찾아서 기대감을 안고 알리오 올리오를 주문했지만 너무 느끼하고 맛이 없어서 결과적으로 여친한테 차이고 말았다.</p>\n<p>그래서 필자는 너무 슬픈 나머지 기억을 지우고 싶어서 알리오 올리오를 주문하기 전으로 돌아가려고 한다. 이때 사용할 수 있는 명령어가 <code class=\"language-text\">reset</code>이다. 돌아가고 싶은 커밋을 지정하면 해당 커밋 이후의 히스토리는 모두 삭제하고 과거로 돌아갈 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> reset <span class=\"token parameter variable\">--hard</span> c04f8f6\n\n<span class=\"token comment\"># 식당을 방문했을 때로 돌아갔다!</span>\n* c04f8f6 - 찾아본 식당에 방문했다.\n<span class=\"token operator\">|</span>\n* 7d9d953 - 여자친구와 함께 갈 좋은 식당을 찾았다<span class=\"token operator\">!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우리는 <code class=\"language-text\">reset</code> 명령어를 사용할 때 3개의 옵션을 사용할 수 있는데, 바로 <code class=\"language-text\">hard</code>, <code class=\"language-text\">soft</code>, <code class=\"language-text\">mixed</code>이다. 이 옵션들은 히스토리를 삭제한다는 것은 전부 동일하지만 삭제된 내용을 처리하는 방식이 조금씩 다르다.</p>\n<hr>\n<ul>\n<li><strong>hard</strong>: 지정한 커밋 이후의 히스토리가 삭제되고 <strong>삭제된 내용들은 그대로 사라진다.</strong></li>\n<li><strong>soft</strong>: 지정한 커밋 이후의 히스토리가 삭제되고 <strong>삭제된 내용들은 스테이지로 이동한다.</strong> <small>(add한 상태로 변경)</small></li>\n<li><strong>mixed</strong>: 지정한 커밋 이후의 히스토리가 삭제되고 <strong>삭제된 내용들은 스테이지에 올라가지 않은 상태가 된다.</strong> <small>(다시 add 해줘야 함)</small></li>\n</ul>\n<hr>\n<p>필자는 방금 위에서 <code class=\"language-text\">hard</code> 옵션을 사용했기 때문에 식당을 방문했던 커밋 이후의 잊고 싶었던 기억을 모두 깔끔하게 삭제할 수 있었다. 만약 옵션을 지정하지 않고 <code class=\"language-text\">reset</code> 명령어를 사용하면 <code class=\"language-text\">mixed</code> 옵션으로 작동한다. 그리고 만약 이미 되돌리고자 하는 히스토리가 리모트 저장소에 푸쉬까지 된 상태라면 리셋 후 히스토리를 푸쉬할 때 <code class=\"language-text\">--force</code> 옵션을 사용해야한다.</p>\n<h3 id=\"revert\" style=\"position:relative;\">Revert<a href=\"#revert\" aria-label=\"revert permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>리벗(revert) 또한 리셋처럼 히스토리를 다시 되돌리고 싶을 때 사용하는 명령어이다. 리셋이 지정한 커밋 이후의 모든 히스토리를 없애버렸다면 리벗은 특정 커밋의 변경 사항을 되돌리는 기능이다. 이때 해당 커밋을 되돌린다고 해서 히스토리에서 그 커밋을 삭제하는 것이 아니라, 되돌리고자 하는 커밋의 내용을 반전시키는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> revert 35058b4 <span class=\"token comment\"># 특정 커밋을 되돌린다</span>\n$ <span class=\"token function\">git</span> revert 35058b4<span class=\"token punctuation\">..</span>c04f8f6 <span class=\"token comment\"># 커밋의 범위를 지정하여 되돌린다</span>\n$ <span class=\"token function\">git</span> revert HEAD <span class=\"token comment\"># 현재 헤드가 위치한 커밋을 되돌린다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>만약 <code class=\"language-text\">35058b4</code> 커밋에서 <code class=\"language-text\">A.js</code>의 2번 라인에 <code class=\"language-text\">a</code>라는 글자가 추가되었다고 하면 <code class=\"language-text\">git revert 35058b4</code>를 사용했을때 <code class=\"language-text\">A.js</code>의 2번 라인에서 <code class=\"language-text\">a</code>를 다시 삭제하는 커밋을 추가하는 것이다. 즉, 추가된 사항은 제거하고 제거된 사항은 다시 추가한다. 그렇기 때문에 리벗은 리셋과 다르게 히스토리를 삭제하지 않고 하나의 커밋이 추가되는 형태로 히스토리가 남는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">* 35058b4 - Revert 맛없는 식당을 찾은 죄로 여자친구한테 이별 통보를 받았다. <span class=\"token comment\"># 여친한테 차인 히스토리만 리벗하자</span>\n<span class=\"token operator\">|</span>\n* 19061e7 - 맛없는 식당을 찾은 죄로 여자친구한테 이별 통보를 받았다.\n<span class=\"token operator\">|</span>\n* e50aff9 - 여자친구가 맛이 없다고 한다.\n<span class=\"token operator\">|</span>\n* 2d57c29 - 알리오 올리오를 주문했다.\n<span class=\"token operator\">|</span>\n* c04f8f6 - 찾아본 식당에 방문했다.\n<span class=\"token operator\">|</span>\n* 7d9d953 - 여자친구와 함께 갈 좋은 식당을 찾았다<span class=\"token operator\">!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 예시에서 필자는 여친한테 차인 커밋을 다시 리벗했지만 히스토리 상에는 필자의 흑역사가 고스란히 남아있다.</p>\n<p>보통 필자는 리벗을 자주 사용하지는 않지만 가끔 테스트용으로 넣었던 <code class=\"language-text\">console.log</code>가 껴서 들어가거나 할 때 해당 커밋을 리벗 해본 적은 있다. 리셋과 리벗 둘 다 변경 사항을 되돌리는 기능이지만, 되돌리는 방법은 완전 다르니 적재적소에 잘 사용해보도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>지금 Git에 대한 포스팅을 두 편 연속으로 작성했는데도 아직 Git에 대해서 전부 설명하지 못했다. 그 만큼 Git은 정말 다양한 기능들로 사용자가 효과적으로 버전 관리를 할 수 있도록 도와주는 도구라고 할 수 있다. 위에서 한번 언급했듯이 어플리케이션의 버전을 관리한다는 특성 때문에 Git이 어떻게 작동하는 지, 내가 이 기능을 사용하면 버전이 어떻게 되는 지 알지 못한다면 사실 두려울 수 밖에 없다.</p>\n<p>“내가 손가락 하나 잘못 놀려서 다른 사람들이 작성한 코드가 날아가면 어떡하지…?”라는 생각은 필자도 해봤고 지금 Git을 겁나 잘쓰시는 많은 개발자 분들도 한번씩은 다 해본 생각일 것이다. <small>(사실 맘 먹고 리셋하고 강제로 푸쉬하지않는 이상 그럴 일이 별로 없다)</small></p>\n<p>하지만 Git에서 말하는 개념이나 기능의 이름들이 생소해서 그렇지 알고보면 Git의 기능들이 작동하는 방법 자체는 그렇게 복잡하지 않다. 그리고 이 복잡성은 제대로 관리되지 않았던 버전 히스토리 그래프도 한 몫 한다고 생각한다. 솔직히 이리저리 꼬여있는 그래프를 보면 “오 이거 해볼만 한데?”라는 생각은 별로 안드는 것 같다.</p>\n<p>포스팅을 작성하면서 최대한 쉽게 써보려고 했는데 독자분들이 이해가 잘 가셨는 지 모르겠다. 사실 Git은 필자 또래의 개발자 분들보다 나이가 조금 있으신 선배들이 더 어려워하시는 것 같다.</p>\n<p>지금까지 SVN을 주로 사용해서 버전을 관리하다가 갑자기 처음보는 개념들이 우수수 떨어지는 Git이 대세라고 하니 공부하기도 쉽지 않을 것 같다고 하시는 선배들의 이야기를 몇 번 들어본 적 있다.</p>\n<p>사실 모든 프로그래밍이 그렇듯, Git도 글로 읽는 것보다는 직접 몇번 해본 다음에 히스토리 그래프가 어떻게 변했는 지도 보고 소스가 어떻게 변했는 지 보는 게 제일 이해가 잘 된다. <a href=\"https://github.com/\" target=\"_blank\" rel=\"nofollow\">Github</a>처럼 무료 저장소를 제공해주는 서비스도 많으니, 연습용 레파지토리를 하나 만든 다음 그 안에서 간단한 코드나 텍스트 파일을 변경해보면서 직접 연습해보시는 걸 추천한다.</p>\n<p>이상으로 Git 뉴비를 위한 기초 사용법 - 버전 관리 포스팅을 마친다.</p>","fields":{"slug":"20190728-git-tutorial-advanced","path":"/2019/07/28/git-tutorial-advanced/","lang":"ko"},"frontmatter":{"title":"Git 뉴비를 위한 기초 사용법 - 버전 관리","subTitle":"브랜치, 머지, 리베이스 – Git 버전 관리 필수 개념 정리","date":"Jul 28, 2019","categories":["프로그래밍","튜토리얼"],"tags":["튜토리얼","Git","Git 기초","Tutorial","Versioning","협업","버전관리","VCS","Version Control System"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/99213a89a950fbd4dc194cf9b6cfc530/d803c/thumbnail.png","srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/d803c/thumbnail.png 320w,\n/static/99213a89a950fbd4dc194cf9b6cfc530/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/fc5c5/thumbnail.webp 320w,\n/static/99213a89a950fbd4dc194cf9b6cfc530/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/99213a89a950fbd4dc194cf9b6cfc530/01fb2/thumbnail.png","srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"eaac9e03-ea99-57fc-8137-e41c6193f9e4","tableOfContents":"<ul>\n<li>\n<p><a href=\"#git%EC%9D%80-%EB%88%84%EA%B0%80-%EC%99%9C-%EB%A7%8C%EB%93%A4%EC%97%88%EB%82%98%EC%9A%94\">Git은 누가, 왜 만들었나요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B8%B0%EC%B4%88%EC%A0%81%EC%9D%B8-%EA%B0%9C%EB%85%90-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\">기초적인 개념 알아보기</a></p>\n<ul>\n<li><a href=\"#remote--origin\">Remote / Origin</a></li>\n<li><a href=\"#repository\">Repository</a></li>\n<li><a href=\"#branch\">Branch</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%84%EC%88%98-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%93%A4%EC%9D%84-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\">필수 명령어들을 알아보자</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A6%AC%EB%AA%A8%ED%8A%B8-%EC%84%9C%EB%B2%84%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\">리모트 서버와 연동하기</a></p>\n<ul>\n<li><a href=\"#clone\">clone</a></li>\n<li><a href=\"#pull\">pull</a></li>\n<li><a href=\"#fetch\">fetch</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD%EC%9D%84-%EB%A6%AC%EB%AA%A8%ED%8A%B8-%EC%84%9C%EB%B2%84%EC%97%90-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%ED%95%98%EA%B8%B0\">변경 사항을 리모트 서버에 업데이트하기</a></p>\n<ul>\n<li><a href=\"#add\">add</a></li>\n<li><a href=\"#commit\">commit</a></li>\n<li><a href=\"#push\">push</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 너도 쓰고 나도 쓰고 우리 모두 쓰고 있는 Git의 기초에 대해서 포스팅 하려고한다. 필자는 Git을 대학교 때 처음 접했는데 처음에는 “왠 이상한 클라우드에 소스코드를 올려놓는다” 정도로만 이해하고 사용했던 기억이 난다. 하지만 Git의 기능은 단순히 코드 공유에서 끝나지 않는 버전 관리 도구이므로 Git을 잘 쓰면 실무에서 펼쳐지는 다이나믹한 상황에 유연하게 대처할수도 있다.","html":"<p>이번 포스팅에서는 너도 쓰고 나도 쓰고 우리 모두 쓰고 있는 Git의 기초에 대해서 포스팅 하려고한다. 필자는 Git을 대학교 때 처음 접했는데 처음에는 “왠 이상한 클라우드에 소스코드를 올려놓는다” 정도로만 이해하고 사용했던 기억이 난다. 하지만 Git의 기능은 단순히 코드 공유에서 끝나지 않는 버전 관리 도구이므로 Git을 잘 쓰면 실무에서 펼쳐지는 다이나믹한 상황에 유연하게 대처할수도 있다.</p>\n<!-- more -->\n<p>하지만 Git의 모든 기능을 이 포스팅에서 전부 다루기에는 지면이 부족하니, 이번에는 Git을 사용하기 위한 기본적인 명령어인 <code class=\"language-text\">add</code>, <code class=\"language-text\">commit</code>, <code class=\"language-text\">push</code>, <code class=\"language-text\">pull</code>, <code class=\"language-text\">fetch</code>에 대한 설명만 진행하도록 하겠다.</p>\n<h2 id=\"git은-누가-왜-만들었나요\" style=\"position:relative;\">Git은 누가, 왜 만들었나요?<a href=\"#git%EC%9D%80-%EB%88%84%EA%B0%80-%EC%99%9C-%EB%A7%8C%EB%93%A4%EC%97%88%EB%82%98%EC%9A%94\" aria-label=\"git은 누가 왜 만들었나요 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Git은 2005년 리누스 토르발즈가 자기가 쓰려고 만든 분산 버전 관리 시스템이다. 일단 이 리누스 토르발즈라는 핀란드 형부터가 개발자라면 대부분 알고 있을 정도로 유명하다.</p>\n<p>아실 만한 분들은 다 아시겠지만 이 형은 오픈소스 커널인 리눅스(Linux)를 만든 사람이다. 리눅스 커널로 만든 유명한 운영체제는 데비안 계열의 Ubuntu, 레드햇 계열의 CentOS 등이 있다. 이 운영체제들은 서버에서도 많이 사용되고, 터미널의 기본 기능도 튼실해서 개발 친화적이기 때문에 개발자라면 대부분 알고 있는 운영체제이다. 참고로 안드로이드 OS도 리눅스 커널을 기반으로 만든 운영체제다.</p>\n<p>뭐 어쨌든 이 형은 이 쪽 업계에서는 상당히 유명한데, 뭐 프로그래밍을 잘하거나 리눅스 커널 만든 걸로도 유명하지만 이런 걸로 더 유명하다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 471px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5b8885b286b244deea3c3312a549a221/91c37/linus.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHlUjFQ/8QAHBAAAQMFAAAAAAAAAAAAAAAAAQIDEQAQEiIy/9oACAEBAAEFAm+1mbaQrEsmK//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAECBwAAAAAAAAAAAAAAAAEAEQIQEiIxUZH/2gAIAQEABj8CmHhPU9ODtWhl/8QAHRAAAgEEAwAAAAAAAAAAAAAAAREAITFBURBxsf/aAAgBAQABPyGgOj5KAlapxlI53hOCsQ1MBWJc/9oADAMBAAIAAwAAABDP7//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EIf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhcRBRMUFh/9oACAEBAAE/EEIUr37Q6Ao5AB64soKqwwWqihZrZ5++N4iB0t2e5//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"linus\" title=\"\" src=\"/static/5b8885b286b244deea3c3312a549a221/91c37/linus.jpg\" srcset=\"/static/5b8885b286b244deea3c3312a549a221/0913d/linus.jpg 160w,\n/static/5b8885b286b244deea3c3312a549a221/cb69c/linus.jpg 320w,\n/static/5b8885b286b244deea3c3312a549a221/91c37/linus.jpg 471w\" sizes=\"(max-width: 471px) 100vw, 471px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>세계 그래픽 카드 점유율 1위 기업한테 엿을 먹이는 패기</small>\n</center>\n<p>이게 대략 2012년 쯤인데, 어떤 포럼 연설에서 실제로 이렇게 엔비디아 엿먹으라고 했다. 당시에 엔비디아 옵티머스 칩을 사용하는 컴퓨터에서 리눅스로 만든 OS가 제대로 안굴러가는 이슈가 있었는데, 엔비디아가 지적재산권을 이유로 오픈소스 드라이버를 공개를 안했었기 때문에 리눅스의 설치가 힘들었던 것이다. 당시의 대화는 대략 이랬다.</p>\n<blockquote>\n<p><strong>[청중]</strong><br />\n아 님… 엔비디아 옵티머스 칩 쓰는 노트북에 리눅스 까는게 너무 힘들어요ㅜㅜ 좋은 방법 없을까요?</p>\n<p><strong>[리누스]</strong><br />\n…<br />\n난 우리가 하드웨어 제조업체들과 겪었던 최악의 문제 중 하나가 엔비디아라는 것을 이렇게 공개적으로 지적할 수 있어서 기쁘네요! 이건 조금 슬픈 일인데, 엔비디아는 안드로이드 시장에 많은 칩을 팔고 있지만 이 회사는 우리가 경험한 회사 중 진짜 최악입니다.</p>\n<p>그러니까 엔비디아… <strong>엿이나 먹어라</strong></p>\n</blockquote>\n<p>리누스는 이런 형이다. 참고로 리눅스 커널이 오픈소스라고 함부로 커밋했다가는 이 형한테 욕먹고 현타가 올 수도 있으니 마음 단단히 먹자. 이 형이 바로 이 업계의 <strong>고든 램지</strong>다.</p>\n<p>근데 왜 이 형이 Git을 만들게 되었냐?</p>\n<p>리누스는 리눅스 커널을 만들 당시에 <a href=\"https://www.bitkeeper.org/\" target=\"_blank\" rel=\"nofollow\">BitKeeper</a>라는 분산 버전 관리 시스템을 사용했는데, 이 Bitkeeper라는 서비스는 원래 유료였지만 리눅스 커뮤니티에는 무료로 제공해주고 있었다. 근데 이 커뮤니티의 개발자 한명이 BitKeeper의 통신 프로토콜을 리버스 엔지니어링해서 해킹하는 사건이 발생했고, Bitkeeper는 무료로 리눅스 커뮤니티에 서비스를 제공하던 것을 철회한 것이다.</p>\n<p>근데 이걸 쓰지 말라고 막은 게 아니라 그냥 무료에서 유료로 돌린 거다. 근데 이 형이 돈내기는 싫었는지 그냥 자기가 분산 버전 관리 시스템을 2주 만에 뚝딱! 만들었는데 그게 바로 Git이다. <small>(2달 아니고 2주 맞다…)</small></p>\n<p>리누스가 Git을 처음 커밋했던 내용은 Github의 <a href=\"https://github.com/git/git/commit/e83c5163316f89bfbde7d9ab23ca2e25604af290\" target=\"_blank\" rel=\"nofollow\">Git 미러 저장소</a>에서 확인해볼 수 있는데 여기서도 리누스 형의 성격이 드러난다.</p>\n<blockquote>\n<p>GIT - the stupid content tracker</p>\n<p>“git” can mean anything, depending on your mood.</p>\n<p>- random three-letter combination that is pronounceable, and not<br />\nactually used by any common UNIX command. The fact that it is a mispronounciation of “get” may or may not be relevant.<br />\n- stupid. contemptible and despicable. simple. Take your pick from the<br />\ndictionary of slang.<br />\n- “global information tracker”: you’re in a good mood, and it actually<br />\nworks for you. Angels sing, and a light suddenly fills the room.<br />\n- “goddamn idiotic truckload of sh*t”: when it breaks</p>\n<p><strong>Linus Torvalds</strong> <em><a href=\"https://github.com/git/git/commit/e83c5163316f89bfbde7d9ab23ca2e25604af290\" target=\"_blank\" rel=\"nofollow\">git/git/README.md</a></em></p>\n</blockquote>\n<p>음, 이게 리누스가 한 첫번째 커밋의 <code class=\"language-text\">README.md</code> 파일의 일부를 가져온 것인데, Git은 그냥 아무 의미 없는 세글자 알파벳이라고 한다. 그냥 유닉스 명령어 중에 <code class=\"language-text\">git</code>이라는 명령어가 없어서 정했다고 한다. 기분이 좋으면 “global information tracker”라고 하고 기분이 구리면 “goddamn idiotic truckload of sh*t”이라고 하랜다. <small>(진짜 이 세상 쿨함이 아니다.)</small></p>\n<p>정리하자면 Git은 핀란드의 어떤 천재 형이 쓰던 버전 관리 도구가 갑자기 유료가 되서 2주만에 만들어낸 시스템이고, 지금은 전 세계적으로 널리 사용되고 있는 분산 버전 관리 시스템이다.</p>\n<h2 id=\"기초적인-개념-알아보기\" style=\"position:relative;\">기초적인 개념 알아보기<a href=\"#%EA%B8%B0%EC%B4%88%EC%A0%81%EC%9D%B8-%EA%B0%9C%EB%85%90-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"기초적인 개념 알아보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Git은 분산 버전 관리 시스템이기 때문에 리모트 서버에 있는 소스를 수정하려면 로컬 환경으로 소스를 클론(Clone)하는 과정이 필요하다. 말 그대로 모든 소스를 복사하여 사용자의 컴퓨터로 받아오는 것이다.</p>\n<p>이후 Git은 로컬 환경의 파일을 추적하고 있다가 사용자가 소스를 수정하면 그 변경 사항을 감지한다. 그 후 사용자는 자신이 리모트 서버에 변경 사항을 반영하고 싶은 파일이나 소스 코드의 라인을 고른 뒤 리모트 서버에 업로드한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e855c0870c0d6a21a168870d4ebbc553/c0388/source-tree.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVR42oWSW2sTURSF8xcqLYitaWqapEkmt2ZmMjNpJ5O5pJlkkqba4hV8EXwQqddSqGBraW2LCBZ8UZEiPhSLfemDIHj5Z58nI1qESh8W+7DZfGetfU5kfOkmg4/vcnZ7iYHdh5x59ehYuw8YeLFC6tlXUqtHJJ5+Qd76ibL1ndiTQybWvyFt/CC+dkTuzQbZt2tE5IrGuWoXy7SJFSqMFoxQMaGRvEG+rPP+Vo+D+zfYX7we1k/3rnFwZ4Hb8z3c3lUsfxarfQmzNU+kUpIZUgL8mkEmUyA6rhBLyIwlZUbiCsV8nr2VLIc70xxsT/F5R2dvVePdcpr9TZWPz6t8WFe4ctGj5i4I4KTCkBrQsKpkpCLRpEospYQaTSrE0yqW6+P5XexGG6cZYHlt6p6PPm2TKchIxQpJSSMhGcfAmROBMvGMhmYGTNmzTDk9jHoXvRag1TpURS9drDEcL4eXR8X8qcCEpGN6PazGHEq1SSKrCzcG46L2LxubOJ7v63SH6Qr1mYshsFrvhNC+w0nNI5oo/wMLgaoADv53h78jq9MtETEQcTvC7Ry6FYi4XdFrh477s3+cRoxymWHNp2WLV5ZKJzt0Otiu2KHZxLJa4twNZQm4ZrbJyXWGL5TC+YjjaOQaHmVZfJWU/Bc2JnQ+pZJNlXjZLLLZmGTbzfF6zmDZlVl0KjQdH7t1GcNqY7q9UL8AVTReOSvTiSgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"source tree\" title=\"\" src=\"/static/e855c0870c0d6a21a168870d4ebbc553/c0388/source-tree.png\" srcset=\"/static/e855c0870c0d6a21a168870d4ebbc553/69538/source-tree.png 160w,\n/static/e855c0870c0d6a21a168870d4ebbc553/72799/source-tree.png 320w,\n/static/e855c0870c0d6a21a168870d4ebbc553/c0388/source-tree.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>맨 위의 `origin/master`는 리모트 서버의 버전, 맨 밑의 `master`는 필자 컴퓨터의 버전을 의미한다.</small>\n</center>\n<p>자 일단 Git에 대한 기본적인 개념은 이게 끝이다. 리모트 서버에 있는 파일을 내 컴퓨터로 복붙한 다음 수정해서 다시 리모트 서버로 업데이트한다는 것. 이때 사용자가 자신이 변경한 로컬의 소스를 서버의 소스에 업로드하는, 즉 서버로 밀어올리는 행위를 Push라고 부르고 사용자가 서버의 소스를 자신의 클라이언트로 가져오는 행위를 Pull 또는 Fetch라고 하는 것이다. 쉽지 않은가?</p>\n<p>하지만 처음 Git을 접하면 평소에 접해보지 못했던 <code class=\"language-text\">remote</code>, <code class=\"language-text\">origin</code>, <code class=\"language-text\">repository</code>와 같은 용어들이 튀어 나오기 때문에 당황할 수 있다. 그럼 이 용어들이 무엇을 뜻하는지부터 간단하게 알아보자.</p>\n<h3 id=\"remote--origin\" style=\"position:relative;\">Remote / Origin<a href=\"#remote--origin\" aria-label=\"remote  origin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우선 Remote는 말 그대로 리모트 서버 자체를 의미한다. 이 리모트 서버라는 개념이 잘 이해가 안되시는 분은 우리가 자주 사용하는 구글 드라이브나 N드라이브와 같은 클라우드 스토리지를 사용하는 것을 떠올리시면 된다. 전 세계 어딘가에 있는 서버에 우리의 소스를 저장하는 것이다.</p>\n<p>이때 이 서버를 제공해주는 대표적인 업체가 <a href=\"https://github.com/\" target=\"_blank\" rel=\"nofollow\">Github</a>, <a href=\"https://bitbucket.org/product/\" target=\"_blank\" rel=\"nofollow\">Bitbucket</a>, <a href=\"https://about.gitlab.com/\" target=\"_blank\" rel=\"nofollow\">GitLab</a>과 같은 회사들이다. 이 회사들이 Git을 만든 게 아니라 Git이라는 시스템에 필요한 리모트 서버와 Git을 좀 더 편리하게 사용할 수 있는 기능들을 제공하는 것이다.</p>\n<p>Git을 사용할 때는 내가 어떤 리모트 서버에 변경 사항을 업로드 할 것인지 정해야하는데, 반드시 하나의 리모트 서버만 사용할 수 있는 것이 아니기 때문에 내가 사용하는 리모트 서버의 이름을 정해줘야한다. 이때 주로 사용하는 관례적인 이름이 바로 <code class=\"language-text\">Origin</code>이다.</p>\n<p>보통은 한 개의 리모트 서버만 운용하는 경우가 대다수이기 때문에 많은 사람들이 Remote와 Origin을 혼용해서 부르곤 한다.</p>\n<h3 id=\"repository\" style=\"position:relative;\">Repository<a href=\"#repository\" aria-label=\"repository permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>레파지토리(Repository, Repo)는 저장소라는 뜻으로, 리모트 서버 내에서 구분되는 프로젝트 단위라고 생각하면 된다. 우리가 구글 드라이브를 사용할 때도 하나의 디렉토리에 모든 파일을 다 때려넣지않고 몇 개의 디렉토리를 만들고 용도에 따라 파일을 나눠서 구분하는 것과 동일하다.</p>\n<p>일반적으로 한 개의 레파지토리는 하나의 프로젝트를 의미하지만 경우에 따라서 레파지토리 하나에 여러 개의 프로젝트를 구성하기도 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">https://github.com/user/repository.git\nhttps://user@bitbucket.org/group-name/repository.git</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>레파지토리를 클론받을 때는 해당 레파지토리를 가리키는 URL이 필요한데, 레파지토리의 이름은 URL의 맨 마지막에 <code class=\"language-text\">.git</code> 확장자를 가지는 방식으로 표현된다.</p>\n<h3 id=\"branch\" style=\"position:relative;\">Branch<a href=\"#branch\" aria-label=\"branch permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>브랜치(Branch)는 일종의 독립된 작업을 진행하기 위한 작업 공간의 개념이다. 맨 처음 Git을 초기화했을 때 기본적으로 <code class=\"language-text\">master</code>라는 이름의 브랜치가 하나 생성된다. 그 후 개발하는 기능 또는 버그 픽스에 따라서 브랜치를 새로 생성하고 거기서 작업한 후에 나중에 다시 <code class=\"language-text\">master</code>로 합치는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3337736752b17e897031f2d2142cd163/5cae2/branches.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.24999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABsElEQVR42p2SyW7TUBSG81RseQweA9aINRILdpVYQDdskJodsGFIBVIidaAKOC12VDWT3Ti+8ZCkjuM4tj9sx45sVMYjXd+je/z/5z9DjcSiKE4vOscD9h602H94yt79JucnQ8rxv7Fa+onjLcA0FkjNMZ2Wnt2WWFCOR1HE2vcJ1n7ih78mLFsKNqxrwhKgIOzrJvWvY16dqVyOrW2SuKq+lv5cAHx/xeBK5fULiZnt7gBFXLdmHCo67y80NHNWSVZSuH0Igg1CCAI/oNeeJGVtCn0V4HLuYAv9VrKMsNXVGCfZhGEwTQhdz+NkZOAtXRRtSrun43tLblyXaBMgDSbZ2059nrIgrzXlET1Nx7ZMHMfhWjf4dDHEnArO+2O+XGo4Sey7LDN3bJSRSPrn/GbKcZjS/zSZcFduHEeZZ9k2wcqna6pIkx7hOqDR72DfzBnaBk1VqQ6lcvISyicIN6wXLi+lzzxvN5hNLR616sijKxrdNk9O396+Nn+0KGte7ufb4a2YC+vfCcuK0yVPTRYqB90j6soRH/vSfyjMLcx7u//tkDtvHnP33VPufXjGD8kYl1PaXlxHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"branches\" title=\"\" src=\"/static/3337736752b17e897031f2d2142cd163/6af66/branches.png\" srcset=\"/static/3337736752b17e897031f2d2142cd163/69538/branches.png 160w,\n/static/3337736752b17e897031f2d2142cd163/72799/branches.png 320w,\n/static/3337736752b17e897031f2d2142cd163/6af66/branches.png 640w,\n/static/3337736752b17e897031f2d2142cd163/d9199/branches.png 960w,\n/static/3337736752b17e897031f2d2142cd163/21b4d/branches.png 1280w,\n/static/3337736752b17e897031f2d2142cd163/5cae2/branches.png 2332w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>master 브랜치에서 다른 브랜치를 분리한 모습<small>\n</small></small></center>\n<p>이 브랜치 개념은 Git에 익숙하지 않은 분들에게 잠깐 설명하고 넘어가기에는 직관적으로 이해가 잘 안될 수 있는 개념이기 때문에 추후 다른 포스팅에서 다시 설명하겠다. 일단 지금은 이 3가지 정도만 기억해두자.</p>\n<blockquote>\n<ol>\n<li>Git을 초기화하면 기본적으로 <code class=\"language-text\">master</code> 브랜치가 생긴다. 이 친구가 메인 브랜치 역할을 한다.</li>\n<li>브랜치는 어떤 브랜치에서 분리시키는 것이고, 분리된 브랜치는 분리될 당시의 부모 브랜치 상태를 그대로 가지고 있다.</li>\n<li>개발자는 각각의 브랜치에서 개발을 진행한 뒤 나중에 다시 <code class=\"language-text\">master</code> 브랜치로 변경 사항을 합친다.</li>\n</ol>\n</blockquote>\n<h2 id=\"필수-명령어들을-알아보자\" style=\"position:relative;\">필수 명령어들을 알아보자<a href=\"#%ED%95%84%EC%88%98-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%93%A4%EC%9D%84-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" aria-label=\"필수 명령어들을 알아보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>만약 여러분이 혼자서만 프로젝트의 버전 관리를 한다면 단순히 리모트 서버의 레파지토리에서 소스를 받아와서 변경한 후 다시 리모트 서버로 업로드하는 과정만으로도 프로젝트를 진행하는데는 사실 아무 문제가 없다.</p>\n<p>하지만 Git은 애초에 혼자서 개발하는 상황보다는 여럿이서 함께 소스를 수정하며 개발하는 협업 상황을 상정하고 만들었기 때문에 협업에서 발생할 수 있는 여러가지 곤란한 상황들을 타파하기 위한 많은 기능을 가지고 있다.</p>\n<p>Git은 기본적으로 CLI(Command Line Tools)을 통해 사용하고 <code class=\"language-text\">commit</code>, <code class=\"language-text\">fetch</code>, <code class=\"language-text\">branch</code>와 같은 여러가지 명령어를 사용하여 이 기능들을 사용할 수 있게 해준다.</p>\n<p>그럼 이번에는 Git을 사용하여 버전을 관리하기 위해 기본적으로 알아야 하는 몇 가지 명령어를 한번 살펴보자.</p>\n<h2 id=\"리모트-서버와-연동하기\" style=\"position:relative;\">리모트 서버와 연동하기<a href=\"#%EB%A6%AC%EB%AA%A8%ED%8A%B8-%EC%84%9C%EB%B2%84%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\" aria-label=\"리모트 서버와 연동하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"clone\" style=\"position:relative;\">clone<a href=\"#clone\" aria-label=\"clone permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">clone</code>은 말 그대로 리모트 서버의 레파지토리에서 클라이언트로 파일을 복붙하는 행위를 말한다. 이때 클론을 수행하기 위해서는 어떤 레파지토리에서 파일을 가져올 것인지에 대한 정보가 필요한데, 이 정보는 위에서 설명했듯이 URL로 표현한다. HTTPS 프로토콜이나 SSH 프로토콜을 사용하여 소스를 클론할 수 있는데, 보통 HTTPS를 많이 사용한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 461px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3623cc98a57b0f252f1a6ea7e513bf3f/f816d/clone.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 49.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVR42mWSy27TQBSG/ZK8ADvEgg10hcSKB2EHEhWLchFC3bBD0IpWqhq7ae2ksePYju+emy9/z5kkEqgjfZoz/4x/n3NmnGmaUDcN8qJEWVYoCCk1yqpGQRrrQiq75v26a3HineL91Qk+XH3Gx+uvOJ59w7vLY/j5Es5IhsF9iGtvDnd+h5l3i2xb2pg1JisqzP0AM/cWi3WIl6dv8fTLK+IIz7+/xosfb/Dk0zP8DH7BaTQgekCOPE/QxqBpW2itIYSwlGWJtu0wjiMmou97e67vDSqhkFQStTBWd0oJFGLa0Q1UcomLi0vM7yjDmQs/WMD1bgjPtuAwuFU8inbAfW6Q07daGzg9ZXZA9wO6rkMYrbFJUmTZFmEYIUlTWieINxus49juc7xaRYiiEHVVWXOlNBz8MzhlpaiENMM2z7Hd5tYgIfMkyZCSzj+J442N0yyzl+gvVzTXu5I58wPG9BYpJARlKqWg3rWWpmEa1HWDhmCNq1FK0iUWFAv61jw25L8MtgWTxexn27J93/hlsG6GHeO06ylX95+hJkNMA25ihb9LAXetcLYQ+O13dJs9nRnZFUGm8ScQOCfOiKgwJI+PDYdhoEcsbRmaUBSbfczPh8viWVErWJOio/IrVNUOLvkBz6H0fufh3YoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"clone\" title=\"\" src=\"/static/3623cc98a57b0f252f1a6ea7e513bf3f/f816d/clone.png\" srcset=\"/static/3623cc98a57b0f252f1a6ea7e513bf3f/69538/clone.png 160w,\n/static/3623cc98a57b0f252f1a6ea7e513bf3f/72799/clone.png 320w,\n/static/3623cc98a57b0f252f1a6ea7e513bf3f/f816d/clone.png 461w\" sizes=\"(max-width: 461px) 100vw, 461px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>보통 Github과 같은 리모트 서버 제공업체들은 레파지토리를 쉽게 클론할 수 있도록 눈에 잘 띄는 버튼을 만들어 놓고 해당 레파지토리의 URL을 제공하는 경우가 많다. 사용자는 단지 저 URL을 복사한 다음 Git의 <code class=\"language-text\">clone</code> 명령어를 사용해서 레파지토리를 클론하기만 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> ~/dev/evan <span class=\"token comment\"># 원하는 작업 디렉토리로 이동</span>\n$ <span class=\"token function\">git</span> clone https://github.com/evan-moon/test-repo.git</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>원하는 작업 디렉토리로 이동한 뒤 <code class=\"language-text\">clone</code> 명령어를 사용하여 레파지토리를 클론하게되면 현재 위치에 레파지토리 이름과 동일한 디렉토리가 생성되고 그 내부에 리모트 서버의 소스가 전부 복사된다. 위 예제의 경우 <code class=\"language-text\">~/dev/evan</code> 디렉토리 내부에 <code class=\"language-text\">test-repo</code> 디렉토리가 생성되고 해당 레파지토리의 소스가 복사될 것이다.</p>\n<p>이제 이 복사된 소스를 맘대로 수정하거나 파괴해도 리모트 서버에 업로드만 하지 않는다면, 같은 리모트 서버를 보고 있는 다른 사람이 영향을 받을 일은 절대 없기 때문에 안심하고 맘대로 만지작거려도 된다.</p>\n<h3 id=\"pull\" style=\"position:relative;\">pull<a href=\"#pull\" aria-label=\"pull permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">pull</code> 명령어는 리모트 서버의 최신 소스를 가져와서 로컬 소스에 병합(Merge)해주는 명령어이다. 만약 우리가 처음 소스를 클론한 후에 다른 사람이 리모트 서버를 상태를 갱신했더라도 리모트 서버가 우리에게 그 변경된 사항을 알려주지는 않기 때문에 우리가 직접 서버에 문의를 날려야 하는 것이다.</p>\n<p>또한 <code class=\"language-text\">pull</code>은 단순히 리모트 서버에서 로컬로 소스를 가져온다의 개념보다는 “가져와서 합친다”의 개념이기 때문에 브랜치끼리도 <code class=\"language-text\">pull</code>을 통해 소스를 합칠 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> pull <span class=\"token comment\"># 현재 내 로컬 브랜치와 같은 이름을 가진 리모트 서버 브랜치가 타겟</span>\n$ <span class=\"token function\">git</span> pull origin master <span class=\"token comment\"># origin 리모트 서버의 master 브랜치가 타겟</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>오픈소스에 관심이 많은 분이라면 Pull Request라는 단어를 들어보았을 것이다. 이 Pull Request는 “내가 작업한 브랜치를 가져가서 합쳐줘~“라는 의미이다.</p>\n<p>필자는 처음에 이게 왜 Merge Request가 아니라 Pull Request인지 이해가 잘 안갔었는데, 나중에 와서 생각해보니 최종적으로 두 브랜치의 소스를 합치는 행위를 하는 주체가 요청을 한 사람이 아니고 요청을 받은 사람이기 때문에 요청을 받은 사람이 브랜치를 가져가서 합친다는 관점에서 보면 적절한 네이밍인 것 같다는 생각을 했었다.</p>\n<h3 id=\"fetch\" style=\"position:relative;\">fetch<a href=\"#fetch\" aria-label=\"fetch permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">fetch</code>는 리모트 서버의 최신 이력을 내 클라이언트로 가져오되 병합은 하지 않는 명령어이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> fetch</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">fetch</code> 명령어를 사용하면 다른 사람들이 리모트 서버에 새로 업데이트한 모든 내역을 받아올 수 있다. 이제 그 내역을 보고 내 로컬에 있는 버전이 리모트 서버에 있는 버전보다 이전 버전이라면 <code class=\"language-text\">pull</code> 명령어를 사용하여 내 컴퓨터의 소스 코드를 갱신하면 된다.</p>\n<p>그럼 이 명령어가 <code class=\"language-text\">pull</code>의 하위 호환이 아닌가? 라는 생각이 들 수도 있는데, <code class=\"language-text\">pull</code>과 <code class=\"language-text\">fetch</code>는 조금 용도가 다르긴 하다. <code class=\"language-text\">pull</code> 같은 경우는 일단 묻지도 따지지도 않고 바로 리모트 서버의 최신 소스를 가져와서 내 로컬 소스에 합쳐버리기 때문에 조금 위험하긴 하다. 뭐 예를 들면 지금 리모트 서버의 최신 소스가 버그가 있는 상태일 수도 있지 않은가?</p>\n<p>그래서 필자같은 경우 보통 로컬 소스와 리모트 소스의 변경 사항을 미리 비교해보고 싶을 때 <code class=\"language-text\">fetch</code>를 사용한다. 그리고 <code class=\"language-text\">fetch</code>를 잘 이용하면 이런 얌생이도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token function\">git</span> fetch <span class=\"token parameter variable\">--all</span> -p<span class=\"token punctuation\">;</span> <span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-vv</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\": gone]\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{ print $1 }'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token parameter variable\">-n</span> <span class=\"token number\">1</span> <span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-d</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>이 쉘스크립트는 필자가 예전에 만들어 놨던 친구이다. <code class=\"language-text\">fetch</code>를 통해 리모트 서버의 최신 내용을 받아온 뒤, <code class=\"language-text\">branch</code> 명령어를 사용하여 리모트 서버에서는 삭제되었지만 로컬에는 남아있는 브랜치를 찾아서 싹 다 지워주는 스크립트이다. 참고로 로컬에는 있지만 리모트에서 삭제된 브랜치는 브랜치 이름 뒤에 <code class=\"language-text\">: gone</code>이라는 문구가 붙어있기 때문에 구분이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-vv</span>\n* master fa0cec5 <span class=\"token punctuation\">[</span>origin/master<span class=\"token punctuation\">]</span> 마스터 브랜치에욤\n  <span class=\"token builtin class-name\">test</span>   1f3578f <span class=\"token punctuation\">[</span>origin/test: gone<span class=\"token punctuation\">]</span> 리모트에선 죽은 브랜치\n  test2  fa0cec5 로컬에서 만들어지고 리모트에 업데이트는 안된 브랜치</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">fetch</code> 명령어와 <code class=\"language-text\">branch</code> 명령어의 특성을 잘 이용하면 이런 꿀 스크립트를 만들 수도 있다.</p>\n<h2 id=\"변경-사항을-리모트-서버에-업데이트하기\" style=\"position:relative;\">변경 사항을 리모트 서버에 업데이트하기<a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD%EC%9D%84-%EB%A6%AC%EB%AA%A8%ED%8A%B8-%EC%84%9C%EB%B2%84%EC%97%90-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"변경 사항을 리모트 서버에 업데이트하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자, 지금까지는 리모트 서버의 내용을 로컬과 연동하는 명령어를 살펴봤다면 이제는 내 로컬에서 변경한 소스를 리모트 서버로 업로드하는 명령어들을 살펴볼 차례이다. 필자는 이 과정을 설명할 때 보통 택배로 예를 주로 드는 편이기 때문에 이 포스팅에서도 택배를 포장하고 배송하는 과정에 빗대어서 설명을 진행하겠다.</p>\n<h3 id=\"add\" style=\"position:relative;\">add<a href=\"#add\" aria-label=\"add permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/67e9fbfe9c838c78850347beaaa2bf25/0f98f/add.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB3l2YS2AUf//EABkQAAIDAQAAAAAAAAAAAAAAAAECAxASIf/aAAgBAQABBQJuLHLtqCqK/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFxEAAwEAAAAAAAAAAAAAAAAAARARIf/aAAgBAgEBPwE24v/EABgQAAIDAAAAAAAAAAAAAAAAAAEQABEh/9oACAEBAAY/AjKeBf/EABkQAQEAAwEAAAAAAAAAAAAAAAERABAxUf/aAAgBAQABPyFUeGIEHK6Skcdojr//2gAMAwEAAgADAAAAEDAP/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxAStj//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QDCsn/8QAGhABAQEAAwEAAAAAAAAAAAAAAREhABBBgf/aAAgBAQABPxBQdUT4caAahc0nQIFEiPvMXtKHX//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"add\" title=\"\" src=\"/static/67e9fbfe9c838c78850347beaaa2bf25/c08c5/add.jpg\" srcset=\"/static/67e9fbfe9c838c78850347beaaa2bf25/0913d/add.jpg 160w,\n/static/67e9fbfe9c838c78850347beaaa2bf25/cb69c/add.jpg 320w,\n/static/67e9fbfe9c838c78850347beaaa2bf25/c08c5/add.jpg 640w,\n/static/67e9fbfe9c838c78850347beaaa2bf25/6a068/add.jpg 960w,\n/static/67e9fbfe9c838c78850347beaaa2bf25/eea4a/add.jpg 1280w,\n/static/67e9fbfe9c838c78850347beaaa2bf25/0f98f/add.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<small>원하는 변경사항만 골라 담는 add 명령어</small>\n</center>\n<p>자, 평화로운 중고나라에서 중고 거래를 했다고 생각해보자. 물론 집에 있는 모든 물건을 보내는 혜자같은 분도 계시겠지만 일반인이라면 그러지 않기 때문에 우리는 상대방한테 물건을 보내기 전에 어떤 물건을 보낼 것인지 부터 정해야한다. 이때 <code class=\"language-text\">add</code> 명령어가 어떤 물건들을 포장할 것인지 고르는 과정을 담당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># 현재 디렉토리의 모든 변경사항을 스테이지에 올린다</span>\n$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> ./src/components <span class=\"token comment\"># components 디렉토리의 모든 변경사항을 스테이지에 올린다</span>\n$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> ./src/components/Test.vue <span class=\"token comment\"># 특정 파일의 변경사항만 스테이지에 올린다</span>\n$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-p</span> <span class=\"token comment\"># 변경된 사항을 하나하나 살펴보면서 스테이지에 올린다</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 선택된 변경 사항들은 스테이지(Stage)라고 불리는 임시 공간으로 이동하게 된다. 이때 <code class=\"language-text\">git add &lt;경로></code> 명령어는 해당 경로 안에 있는 변경 사항을 전부 스테이지에 올리게 되는데, 이게 영 불안하다 싶은 사람은 <code class=\"language-text\">-p</code> 옵션을 줌으로써 변경 사항을 하나하나 확인하면서 스테이지에 올릴 수도 있다.</p>\n<p>이렇게 스테이지에 담긴 변경 사항들은 <code class=\"language-text\">git status</code> 명령어를 사용하여 확인해볼 수 있고, <code class=\"language-text\">status</code> 명령어에 추가적으로 <code class=\"language-text\">-v</code> 옵션을 사용하면 어떤 파일의 어떤 부분이 변경되었는지도 함께 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> ./soruce\n$ <span class=\"token function\">git</span> status\n\nOn branch master\nYour branch is up to <span class=\"token function\">date</span> with <span class=\"token string\">'origin/master'</span><span class=\"token builtin class-name\">.</span>\n\nChanges to be committed:\n  <span class=\"token punctuation\">(</span>use <span class=\"token string\">\"git reset HEAD &lt;file>...\"</span> to unstage<span class=\"token punctuation\">)</span>\n\n\tmodified:   source/_drafts/git-tutorial.md</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"commit\" style=\"position:relative;\">commit<a href=\"#commit\" aria-label=\"commit permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fd06caf7ac6bf4a5b01786357ca96bc8/0f98f/commit.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABA//aAAwDAQACEAMQAAAB3FnIm2Aof//EABgQAAIDAAAAAAAAAAAAAAAAAAECAxAR/9oACAEBAAEFAnOLHKWasFf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAXEQADAQAAAAAAAAAAAAAAAAABAhEQ/9oACAECAQE/ASptuf/EABgQAAIDAAAAAAAAAAAAAAAAAAEQABEx/9oACAEBAAY/AiZTxf/EABsQAQACAgMAAAAAAAAAAAAAAAEAEBEhQVGB/9oACAEBAAE/IVM4JmbqkybgToHlf//aAAwDAQACAAMAAAAQzA//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QEDEn/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARUf/aAAgBAgEBPxBpFDI//8QAGRABAQADAQAAAAAAAAAAAAAAAREAEDFR/9oACAEBAAE/EOz1jC85ToEAI9HLZr0Br//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"commit\" title=\"\" src=\"/static/fd06caf7ac6bf4a5b01786357ca96bc8/c08c5/commit.jpg\" srcset=\"/static/fd06caf7ac6bf4a5b01786357ca96bc8/0913d/commit.jpg 160w,\n/static/fd06caf7ac6bf4a5b01786357ca96bc8/cb69c/commit.jpg 320w,\n/static/fd06caf7ac6bf4a5b01786357ca96bc8/c08c5/commit.jpg 640w,\n/static/fd06caf7ac6bf4a5b01786357ca96bc8/6a068/commit.jpg 960w,\n/static/fd06caf7ac6bf4a5b01786357ca96bc8/eea4a/commit.jpg 1280w,\n/static/fd06caf7ac6bf4a5b01786357ca96bc8/0f98f/commit.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>변경 사항들을 포장하는 commit 명령어</small>\n</center>\n<p><code class=\"language-text\">add</code>를 사용하여 원하는 변경사항을 스테이지에 올렸다면 이제 스테이지에 있는 변경 사항들을 포장할 차례이다. 이때 이 포장하는 행위를 <code class=\"language-text\">commit</code>이라고 한다. 커밋은 Git에서 상당히 중요한 부분을 차지하는 행위인데, 바로 Git이 하나의 커밋을 하나의 버전으로 정의하기 때문이다. 그렇기 때문에 특정 버전으로 어플리케이션을 변경이라는 기준도 당연히 바로 이 커밋이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> log <span class=\"token parameter variable\">--graph</span>\n\n* commit 20f1ea9 <span class=\"token punctuation\">(</span>HEAD -<span class=\"token operator\">></span> master, origin/master, origin/HEAD<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span> Author: Evan Moon <span class=\"token operator\">&lt;</span>bboydart91@gmail.com<span class=\"token operator\">></span>\n<span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>     회원가입 기능 개발 끝<span class=\"token operator\">!</span>\n<span class=\"token operator\">|</span>\n* commit ca693fd\n<span class=\"token operator\">|</span> Author: Evan Moon <span class=\"token operator\">&lt;</span>bboydart91@gmail.com<span class=\"token operator\">></span>\n<span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>     회원가입 비밀번호 입력 폼 추가\n<span class=\"token operator\">|</span>\n* commit f9b6e2d\n<span class=\"token operator\">|</span> Author: Evan Moon <span class=\"token operator\">&lt;</span>bboydart91@gmail.com<span class=\"token operator\">></span>\n<span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>     회원가입 이메일 입력 폼 추가\n<span class=\"token operator\">|</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 그래프 상에서 필자의 어플리케이션의 현재 상태는 어떤 커밋일까?</p>\n<p>그래프 상에서 <code class=\"language-text\">HEAD</code>가 <code class=\"language-text\">20f1ea9 회원가입 기능 개발 끝!</code> 커밋에 위치해 있으므로 현재 필자의 어플리케이션은 회원가입 기능까지 개발이 완료된 상태라는 것을 알 수 있다.</p>\n<p>그리고 그래프를 자세히 보면 각각의 커밋들은 <code class=\"language-text\">20f1ea9</code>과 같은 고유한 해쉬 값을 가지고 있는데, 이 해쉬 값을 사용하여 어떠한 커밋으로든 자유자재로 이동할 수 있다. 예를 들면 <code class=\"language-text\">회원가입 비밀번호 입력 폼 추가</code> 커밋의 해쉬 값을 사용하여 <code class=\"language-text\">git checkout ca693fd</code> 명령어로 회원가입 비밀번호 입력 폼이 추가된 시점으로 이동할 수 있다는 것이다. 즉, 시간여행이 가능하다!</p>\n<p>이러한 커밋의 기능을 제대로 활용하기 위해서 커밋은 반드시 실행 가능한 단위로 해야한다. 더 쉽게 말하자면 특정 커밋으로 버전을 변경했을 때 어플리케이션이 제대로 실행되지 않고 에러가 발생하면 안된다는 것이다.</p>\n<p>그리고 위의 예제에서 볼 수 있듯이 커밋에는 메세지를 담을 수 있다. 이 메세지는 이 커밋으로 인한 변경 사항이 무엇인지 직접적으로 표현해주는 유일한 수단이므로 좋은 커밋 메세지를 작성하기 위한 고민은 필수다. 다행히도 이미 많은 개발자 분들이 좋은 커밋 메세지를 어떻게 작성해야 하는지에 대해 포스팅을 해주셨기 때문에 구글에서 한번 검색해보면 수두룩하게 나온다.</p>\n<p>참고로 커밋 메세지는 꼭 영어여야 할 필요는 없다. 조직에 따라서 커밋 메세지를 영어로만 작성하도록 강제하는 룰이 있을 수는 있지만, 사실 커밋 메세지는 결국 커뮤니케이션 수단이므로 언제 누가 보더라도 알아보기 쉽게만 작성하면 장땡이다. 그러니까 영어가 익숙하지 않은데도 불구하고 굳이 영어를 고집할 필요는 없다. 오히려 같이 협업하는 팀원들이 영어에 익숙하지 않다면 그 또한 불필요한 커뮤니케이션 비용이 될 수 있다.</p>\n<p>또한 커밋은 아직 리모트 서버에 파일을 전송하는 것이 아니라 사용자의 클라이언트 내에서 수행되는 과정이므로 인터넷에 연결이 되어 있지 않아도 변경 사항을 커밋하는 것은 아무런 지장이 없다.<small>(비행기에서 코딩할 때도 커밋까지는 가능하다!)</small></p>\n<p>사실 필자는 Git 뉴비일 때 이 커밋이라는 단어가 조금 헷갈렸었는데, 많은 개발자 분들이 <code class=\"language-text\">commit</code>과 <code class=\"language-text\">push</code>를 같은 의미로 사용하기 때문이었다. 하지만 이 두 명령어는 엄연히 다른 역할을 하기 때문에 되도록이면 구분해서 사용하도록 하자.</p>\n<h3 id=\"push\" style=\"position:relative;\">push<a href=\"#push\" aria-label=\"push permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8fb4fd3977a800aa1b5e49daad8abee0/0f98f/push.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB71Ggkhf/xAAYEAEBAAMAAAAAAAAAAAAAAAABAwIgIf/aAAgBAQABBQJ4To5On//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQIg/9oACAEBAAY/AhTVZ//EABkQAQEAAwEAAAAAAAAAAAAAAAERACAhQf/aAAgBAQABPyFqoVPMqhXRmv8A/9oADAMBAAIAAwAAABA0D//EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QI21f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAICFRgf/aAAgBAQABPxBZ+MbTEVC0RHRX/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"push\" title=\"\" src=\"/static/8fb4fd3977a800aa1b5e49daad8abee0/c08c5/push.jpg\" srcset=\"/static/8fb4fd3977a800aa1b5e49daad8abee0/0913d/push.jpg 160w,\n/static/8fb4fd3977a800aa1b5e49daad8abee0/cb69c/push.jpg 320w,\n/static/8fb4fd3977a800aa1b5e49daad8abee0/c08c5/push.jpg 640w,\n/static/8fb4fd3977a800aa1b5e49daad8abee0/6a068/push.jpg 960w,\n/static/8fb4fd3977a800aa1b5e49daad8abee0/eea4a/push.jpg 1280w,\n/static/8fb4fd3977a800aa1b5e49daad8abee0/0f98f/push.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>변경 사항들을 리모트 서버로 배송하는 push 명령어</small>\n</center>\n<p>커밋을 통해 포장된 변경 사항들은 <code class=\"language-text\">push</code> 명령어를 사용하여 리모트 서버로 업로드 된다. 이때는 커밋된 변경 사항들을 실제 리모트 서버에 전송하는 것이기 때문에 반드시 네트워크에 연결이 되어있어야 한다. 반대로 말하면 커밋까지는 굳이 네트워크에 연결되어있지 않아도 되는 것이기 때문에, 인터넷이 제한된 비행기 내부와 같은 환경에서는 커밋까지만 진행하고 목적지에 도착한 후 리모트 서버에 푸쉬하는 등의 행위도 가능하다.</p>\n<p>그리고 푸쉬할 때 반드시 A 로컬 브랜치는 A 리모트 브랜치에만 푸쉬해야 한다는 룰 따윈 없기 때문에 커밋들을 리모트 서버로 푸쉬할 때는 Git에게 “어떤 리모트 서버의 어떤 브랜치로 푸쉬할 것인지”도 함께 알려줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> push origin master <span class=\"token comment\"># origin 리모트 서버의 master 브랜치로 푸쉬해줘!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>근데 이게 브랜치 이름이 <code class=\"language-text\">master</code> 정도면 그래도 브랜치 이름을 매번 입력해줄만 하지만 <code class=\"language-text\">feature/SD-0000-request-api-refactoring</code> 정도 되면 브랜치 이름을 매번 입력한다는 것이 귀찮을 수도 있다.</p>\n<p>그래서 Git은 브랜치를 자동으로 추적할 수 있는 기능 또한 제공해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> push --set-upstream origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">--set-upstream</code> 옵션을 사용하고 처음 한번만 브랜치 이름을 입력해주면 그 이후로는 <code class=\"language-text\">git push</code> 명령어만 입력해도 자동으로 처음 입력했던 브랜치로 변경 사항을 푸쉬할 수 있다.</p>\n<p>이렇게 해서 리모트 서버의 레파지토리에서 소스를 내 컴퓨터에 받아온 뒤 파일을 변경하고, 그 변경 사항을 리모트 서버에 다시 업데이트하는 <code class=\"language-text\">clone</code>, <code class=\"language-text\">add</code>, <code class=\"language-text\">commit</code>, <code class=\"language-text\">push</code>의 모든 과정을 한번 살펴보았다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 블로그 포스팅 한개로 Git에 대한 것들을 모두 설명한다는 것은 힘들기 때문에 다음 포스팅에서는 <code class=\"language-text\">branch</code>, <code class=\"language-text\">checkout</code>, <code class=\"language-text\">merge</code>, <code class=\"language-text\">revert</code>와 같이 버전을 실제로 관리하기 위해 사용하는 명령어와 그 개념에 대한 내용을 포스팅하려고 한다.</p>\n<p>Git은 현업에서 굉장히 많이 사용되고 있지만 정작 대학이나 학원같은 교육 기관에서는 약간 쩌리 취급 받는 것 같기도 하다. 뭐 사실 대학에서는 좀 더 원론적인 공학을 배우는 거지 코딩을 알려주는 곳은 아니기도 하고, 학원 같은 경우는 버전 관리 시스템을 가르칠 시간에 코딩을 알려주는 게 더 취업에 유리하니 그럴 수도 있을 것 같다. <small>(요즘에는 대학에 강사 분들이 오셔서 Git에 대해 강의하는 경우도 있다고 한다.)</small></p>\n<p>어쨌든 Git을 잘쓰면 다른 개발자가 개발한 모듈 중에 하나만 내 브랜치로 가져와야 한다거나, 커밋이 꼬여서 소스가 지워졌다거나하는 등 프로젝트를 진행할 때 발생하는 슬픈 상황들을 잘 헤결할 수도 있기 때문에 팀원들에게 이쁨받는 개발자가 될 수 있다.</p>\n<p>이상으로 Git 뉴비를 위한 기초 사용법 - 시작하기 포스팅을 마친다.</p>","fields":{"slug":"20190725-git-tutorial","path":"/2019/07/25/git-tutorial/","lang":"ko"},"frontmatter":{"title":"Git 뉴비를 위한 기초 사용법 - 시작하기","subTitle":"Git이 어려운 당신을 위한, 가장 쉬운 첫걸음","date":"Jul 25, 2019","categories":["프로그래밍","튜토리얼"],"tags":["튜토리얼","Git","Git 기초","Tutorial","Versioning","협업","버전관리","VCS","Version Control System"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/99213a89a950fbd4dc194cf9b6cfc530/d803c/thumbnail.png","srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/d803c/thumbnail.png 320w,\n/static/99213a89a950fbd4dc194cf9b6cfc530/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/fc5c5/thumbnail.webp 320w,\n/static/99213a89a950fbd4dc194cf9b6cfc530/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/99213a89a950fbd4dc194cf9b6cfc530/01fb2/thumbnail.png","srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/99213a89a950fbd4dc194cf9b6cfc530/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"be7c0ae7-da2d-5b2b-bb0a-9661bfe81244","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9B%90%EB%9E%98-%ED%95%84%EC%9E%90%EC%9D%98-%EA%B3%84%ED%9A%8D\">원래 필자의 계획</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A0%9C-1-%EA%B4%80%EB%AC%B8-manifestjson\">제 1 관문, Manifest.json</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A0%9C-2-%EA%B4%80%EB%AC%B8-service-worker\">제 2 관문, Service Worker</a></p>\n<ul>\n<li><a href=\"#%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\">개발환경 세팅</a></li>\n<li><a href=\"#service-worker-%EC%9E%91%EC%84%B1\">Service Worker 작성</a></li>\n<li><a href=\"#service-worker-%EC%84%A4%EC%B9%98\">Service Worker 설치</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%9C-3-%EA%B4%80%EB%AC%B8-pushmanager\">제 3 관문, PushManager</a></p>\n<ul>\n<li><a href=\"#%EC%9E%AC%EC%95%99%EC%9D%98-%EC%8B%9C%EC%9E%91\">재앙의 시작</a></li>\n<li><a href=\"#%EB%B9%A0%EB%A5%B8-%EC%86%90%EC%A0%88\">빠른 손절</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%9C-4-%EA%B4%80%EB%AC%B8-notification-api\">제 4 관문, Notification API</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EC%A1%B4-%EA%B8%B0%EB%8A%A5%EC%97%90-notification-%EB%81%BC%EC%9B%8C%EB%84%A3%EA%B8%B0\">기존 기능에 Notification 끼워넣기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 필자가 회사에서 2019년 7월 5일 금요일 하루 동안 기존 어플리케이션에 PWA(Progressive Web Application) 기능을 붙힌 삽질기를 기록하려고 한다. PWA는 지원하지 않는 브라우저에 대한 예외처리만 꼼꼼하게 해주면 UX, 성능, SEO 등에서 무조건 플러스 요인이기 때문에 예전부터 계속 해보고 싶었다.","html":"<p>이번 포스팅에서는 필자가 회사에서 2019년 7월 5일 금요일 하루 동안 기존 어플리케이션에 PWA(Progressive Web Application) 기능을 붙힌 삽질기를 기록하려고 한다. PWA는 지원하지 않는 브라우저에 대한 예외처리만 꼼꼼하게 해주면 UX, 성능, SEO 등에서 무조건 플러스 요인이기 때문에 예전부터 계속 해보고 싶었다.</p>\n<!-- more -->\n<p>하지만 시간이 없어서 계속 미루고 있었는데 마침 어제 간만에 필자에게 여유 시간이 주어졌다.</p>\n<p>필자가 지금 작업하고 있는 프로젝트가 회사의 비즈니스 모델과 밀접한 관련이 있는 프로젝트이고, 또 워낙 이 기능에 관련된 사내 이해관계자들이 많아서 PO가 테스트를 좀 더 꼼꼼히 하고 싶다고 했기 때문이다.</p>\n<p>그래서 금요일 하루, 정확히 말하면 오전에는 버그 터진거 하나 핫픽스하고 점심먹고나서 자료 조사도 한 시간 정도 해본 다음에 15시 30분 쯤부터 시작해서 22시 55분까지 달렸다. 원래 필자는 근무시간에 열심히 하고 다른 시간은 나에게 투자하자는 주의라 야근은 왠만하면 안하는데, 필자에게 주어진 시간이 하루 밖에 없어서 그 안에 무조건 끝내야 했던 것도 있지만 사실 제일 큰 이유는…</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/acb04/tyson.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAeacpxrNRZehUA//xAAbEAEAAgIDAAAAAAAAAAAAAAABABECAxIiMf/aAAgBAQABBQKsV601MVI7Fj7yYNRbn//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABoQAAICAwAAAAAAAAAAAAAAAAAhARECICL/2gAIAQEABj8CmrOsZEi4Qtf/xAAaEAEAAwADAAAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/IaQV5DR5XUbeiKGKFUpjhHcvPIisiK1n/9oADAMBAAIAAwAAABBb4H7/xAAYEQACAwAAAAAAAAAAAAAAAAABEBEhQf/aAAgBAwEBPxDFJpf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8QI3//xAAcEAEBAAMBAAMAAAAAAAAAAAABEQAhMUFRgaH/2gAIAQEAAT8QF9Ka/HtyzwkXSGU40cW/eVRrsWn7hltvCVzeGPY5pUJ44TWsoGOJ7lz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tyson\" title=\"\" src=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/c08c5/tyson.jpg\" srcset=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/0913d/tyson.jpg 160w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/cb69c/tyson.jpg 320w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/c08c5/tyson.jpg 640w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/acb04/tyson.jpg 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<blockquote>\n<p>네, 쉽게 보고 덤볐다가 쳐맞았습니다.</p>\n</blockquote>\n<p>필자는 사실 PWA를 구현해본 경험이 없다. 구글에서 제공해주는 데모는 몇번 돌려본 적이 있지만 나머지는 그냥 다른 굇수분들의 블로그를 보고 “오…나도 해보고 싶군” 정도로만 생각했었다.</p>\n<p>근데 다른 사람들이 구현한 걸 보면 뭐 코드가 복잡한 것도 아니고 서비스 워커(Service Worker)도 작동 원리가 그렇게 생소한 느낌은 아니기에 사실 얕보고 있었다.</p>\n<h2 id=\"원래-필자의-계획\" style=\"position:relative;\">원래 필자의 계획<a href=\"#%EC%9B%90%EB%9E%98-%ED%95%84%EC%9E%90%EC%9D%98-%EA%B3%84%ED%9A%8D\" aria-label=\"원래 필자의 계획 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>원래 필자도 PWA에게 쳐맞기 전까진 그럴싸한 계획이 있었다. 물론 필자는 자세히 공부를 하고 덤비는 타입이 아니라 그냥 대충 알아본 다음에 나머지는 직접 맞아가면서 배우는 타입이라 더 그랬던 것도 있다.</p>\n<p>어쨌든 어제 점심을 먹고 와서 필자가 사무실에 앉아서 가만히 생각을 해본 결과, “PWA나 해볼까…? Manifest 넣고 서비스 워커 붙히면 뭐 나머지는 문서보고 해도 대충 될 거 같은데…?”로 결론이 나왔다.</p>\n<p>그래도 PWA의 모든 기능을 다 구현하는 것은 퇴근 시간인 19시까지는 힘들 것 같아서 작업에 대한 스코프를 잡았다.</p>\n<blockquote>\n<ol>\n<li>기능을 전부 구현하는 건 힘들 것 같으니 일단 기반을 잡아놓는다고 생각하자.</li>\n<li>서비스 워커 설치.</li>\n<li>Manifest.json 추가. 이건 남들 다하는 거니까 우리도 기본적으로 해야함.</li>\n<li>Pusher SDK와 PushManager를 사용해서 브라우저가 꺼져있더라도 사용자에게 푸시 메세지를 보여주자.</li>\n<li>시간 되면 모바일에서 홈스크린에 어플리케이션을 추가하는 것까진 해보고 싶다.(우선순위 낮음)</li>\n<li>오프라인 캐싱은 다음 시간에… (나름 스코프 조절)</li>\n</ol>\n</blockquote>\n<p>자 이제 계획이 잡혔으니 PO와 테스터에게 “프로젝트 테스트 하시는 동안 저는 저만의 놀이터에서 놀다 오겠습니다”라고 협의를 한 뒤 마스터에서 브랜치를 하나 땄다.</p>\n<p>브랜치 이름도 필자의 의지가 돋보이는 <code class=\"language-text\">feature/service-worker-web-push</code>로 딱 지어놓고 15시 30분 쯤 부터 작업을 시작했다. 그래도 이정도면 한 4-5시간 안에 충분히 가능하겠다 싶었는데…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdSrPFJYcHjMCMH/xAAeEAACAQMFAAAAAAAAAAAAAAAAASECAwQREiIxMv/aAAgBAQABBQKuFumC9xTZrbqMnyPv/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQMYFR/9oACAEBAAY/Aio0fC0bP//EABwQAAMAAgMBAAAAAAAAAAAAAAABESExQYGxcf/aAAgBAQABPyGcD5GlRp8KuEtEIi3kLVRdxZln4aBx2eR//9oADAMBAAIAAwAAABDPF/8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFBcfBhsf/aAAgBAQABPxC5UcBbjFtEpF1DLKYWS+hztSkeXeyy4egbTgYni+R383NXT8n/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"babo\" title=\"\" src=\"/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg\" srcset=\"/static/d1377bc7e60fb06312324f3859994069/0913d/babo.jpg 160w,\n/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg 300w\" sizes=\"(max-width: 300px) 100vw, 300px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>코딩하는 내내 필자의 정신상태</small>\n</center>\n<p>결과적으로 저 중에서 달성한 제대로 달성한 목표는 1, 2, 3번 뿐이다. 4번 목표인 푸시 메시지의 경우, Background 메세징은 삽질만 하다가 시간이 너무 많이 가서 실패하고 Notification API를 사용하여 Foreground에서만 노출되도록 구현했다.</p>\n<p>처음에는 숨고 모바일 앱에서 이미 사용하고 있는 FCM(Firebase Cloud Messaging)을 사용하려고 했는데 그러면 웹 클라리언트의 푸시 채널이 이원화되기 때문에 일단 테스트도 해볼 겸 FCM없이 서비스 워커의 <code class=\"language-text\">PushManager</code>만 사용해서 구현하려고 했다.</p>\n<p>이제 필자가 이것들을 작업하면서 어떤 문제에 봉착했고, 어떻게 해결했는지 한번 설명해보겠다.</p>\n<h2 id=\"제-1-관문-manifestjson\" style=\"position:relative;\">제 1 관문, Manifest.json<a href=\"#%EC%A0%9C-1-%EA%B4%80%EB%AC%B8-manifestjson\" aria-label=\"제 1 관문 manifestjson permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>제일 처음 한 일은 <code class=\"language-text\">manifest.json</code>을 생성하는 것이다. 이건 그냥 말 그대로 생성하면 된다. 또한 <code class=\"language-text\">manifest.json</code>은 어차피 정적인 파일이기도 하고 업데이트도 잦지 않은 파일이기 때문에 굳이 Express에서 응답하지 않아도 된다. 그래서 프로젝트 내부의 <code class=\"language-text\">static</code> 디렉토리에 <code class=\"language-text\">manifest.json</code>을 생성하고 nginx가 바로 응답해주는 방식으로 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// static/manifest.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"숨고\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"short_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"숨고\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/1x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"48x48\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/2x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"64x64\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/3x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"128x128\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/3x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"144x144\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"start_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/?pwa=true\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"display\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fullscreen\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#FFFFFF\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"theme_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#00C7AE\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">manifest.json</code>에 대한 자세한 내용은 Google Web Developer 문서의 <a href=\"https://developers.google.com/web/fundamentals/web-app-manifest/\" target=\"_blank\" rel=\"nofollow\">The Web App Manifest</a>를 참고해서 작성했다.</p>\n<p>그리고 저 아이콘은 지금 숨고 앱에서 사용하고 있는 아이콘들이다. 굳이 모바일 앱과 다른 아이콘을 사용할 이유도 없고, 디자이너 분들도 바빠서 멘탈나간 상황이기 때문에 필자의 기술적인 욕심 때문에 아이콘을 만들어 달라고 하기엔 너무 미안했다.</p>\n<p>또한 앱과 웹이 같은 아이콘을 사용해야 브랜딩 측면에서도 좋을 거라 생각해서 모바일 앱 레파지토리를 클론받아서 몰래 훔쳐왔다. 그리고 저 이미지들은 굳이 프로젝트 내에 저장할 필요가 없으므로 회사에서 사용하는 S3 버킷에 업로드하고 CloudFront로 딜리버리했다.</p>\n<p>위에서 설명했듯이 필자는 <code class=\"language-text\">manifest.json</code>에 대한 요청을 Express가 처리하는 것이 아니라 서버 엔진인 nginx가 처리하는 방식을 선택했는데, 이렇게 nginx가 서버 어플리케이션까지 요청을 토스해주지 않고 그냥 알아서 서빙하도록 하고 싶다면 간단한 설정을 추가하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token directive\"><span class=\"token keyword\">location</span> ~ ^/static</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">root</span> /your/project/location</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  ...\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 식으로 설정하면 바로 프로젝트 내의 <code class=\"language-text\">static</code> 디렉토리에 접근할 수 있다. 위 설정은 “static이라는 경로로 시작하는 요청이 들어오면 <code class=\"language-text\">/your/project/location</code>에서 니가 알아서 찾아줘”라는 의미이다. 하지만 로컬에서 개발 서버를 사용할 때에는 nginx를 사용하지 않고 NodeJS를 사용하여 바로 개발용 서버를 띄우므로 로컬 환경에서는 Express가 직접 파일을 서빙할 수 있도록 해줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/static'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>이제 브라우저에게 “나의 Manifest 파일이 여기 있으니 가져가시오”라고 알려줄 수 있는 <code class=\"language-text\">link</code> 태그를 하나 넣어주면 끝이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// constants/meta.constant.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rel</span><span class=\"token operator\">:</span> <span class=\"token string\">'manifest'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">href</span><span class=\"token operator\">:</span> <span class=\"token string\">'/static/manifest.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>manifest<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/manifest.json<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-vue-meta</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자는 vue-meta 라이브러리를 사용하고 있기 때문에 이렇게 <code class=\"language-text\">Object</code> 타입 객체를 리턴하는 방식을 사용하면 렌더링 때 <code class=\"language-text\">&lt;head></code> 내부에 알아서 넣어준다. 그 후 브라우저가 <code class=\"language-text\">manifest.json</code>을 제대로 가져가는지는 크롬 개발자 도구의 Application > Manifest 탭에서 확인할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 505px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3ElEQVR42p2UT0vjUBTFCw64czHjwmqnNv9e0uSlTaJNUiwt1sERFUZwKMN8Nr+B4pQR3MxiFi6EWc3eD3O852kLgqDJ4vLeS+B37zn3vtfwfR9ZlmEwGMDzPLiuuwyeq0aDwCRJDJQfut0uwjBEFOlaUAN0HMeEUgpaa/R6PfQlSW0gN0EQmErjWJs1TTO4kqQWkJUxCF3s1XOiWsA8zzGZTDAej42H/LEAe56qDqRX9DCKIuOflqaUkqQoCtOgKl4ugVx1HCMWqEr62JFqh+XQfKsMpDRKZYd1GCFME+yORjKbOUJJUAlIGGWlaWqABBcy5NPpAfJiaM61JPMQizx6yCSdzjZsy6o8i8s5XMgmlBVzsGOB1xob27ZNl7nvs8sCLfdG2C1KeErVu8v0zzwK/MEb0mrBlVBODclsSPw8HoFU5MjYbJyfwfr5HXYinla4gi8kK7l6O+Lf5uEhBv/ucfLwH+tfpwg6Fjx6TflvWPCiKWxEJnPXnuxjen2D/u9faA5LhBtN+O1t+J/bZn0X0DyuEr6Ek6T4OJvh048Ztr6dYuvkCM3TI9kfo3X85ala9x1AvjCpjI4lklfml1i5uULj9hKrf66x9neOxt0cH+YXcHr6qXGvyH8E5xc3GuSQDZIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"has manifest\" title=\"\" src=\"/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png\" srcset=\"/static/6752d69a5efe962003e820272d2ac7f7/69538/has-manifest.png 160w,\n/static/6752d69a5efe962003e820272d2ac7f7/72799/has-manifest.png 320w,\n/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png 505w\" sizes=\"(max-width: 505px) 100vw, 505px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>자, 여기까지 하는데 거의 10분 정도 걸렸던 것 같다. 아직까지는 필자의 계획대로 순탄히 흘러가고 있었다. 하지만 문제는 이제부터 생기기 시작한다…</p>\n<h2 id=\"제-2-관문-service-worker\" style=\"position:relative;\">제 2 관문, Service Worker<a href=\"#%EC%A0%9C-2-%EA%B4%80%EB%AC%B8-service-worker\" aria-label=\"제 2 관문 service worker permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>기분 좋게 커피 한잔 때리고 와서 이제 서비스 워커를 적용하는 작업을 시작했다. 서비스 워커는 브라우저에 설치하고 나면 백그라운드에서 실행되는 프로세스로, 웹 어플리케이션의 메인 로직과는 전혀 별개로 작동한다.</p>\n<p>서비스 워커와 웹앱의 메인 로직은 서로 메세지를 주고 받는 방식으로 작동한다. <code class=\"language-text\">postMessage</code>로 보내면 <code class=\"language-text\">onMessage</code>로 받는 방식인데, WebView나 Chrome Extension과 같은 방식이기 때문에 이미 우리에겐 익숙한 방식이다.</p>\n<p>단, 아직까지 모든 브라우저에서 지원되는 것이 아니기 때문에 반드시 <code class=\"language-text\">navigator</code> 전역 객체 내부에 <code class=\"language-text\">serviceWorker</code> 객체가 존재하는 지 확인한 후 초기화를 진행해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* ... */</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>뭐 이 정도 쯤이야 필자같은 프론트엔드 개발자들에게는 굉장히 익숙한 상황이기 때문에 그냥 웃고 넘길 수 있지만 이것보다 더 귀찮은 게 있었다. 바로 서비스 워커의 개발환경 세팅이다.</p>\n<h3 id=\"개발환경-세팅\" style=\"position:relative;\">개발환경 세팅<a href=\"#%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\" aria-label=\"개발환경 세팅 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>서비스 워커는 일반적인 웹 어플리케이션보다 많은 기능에 접근할 수 있기 때문에 보안이 굉장히 중요하다. 그래서 서비스 워커는 제한적인 환경에서만 작동할 수 있도록 만들어졌는데 그 조건은 딱 두가지이다.</p>\n<hr>\n<ol>\n<li>웹 어플리케이션의 호스트가 localhost이거나</li>\n<li>HTTPS 프로토콜을 사용하고 있을 것</li>\n</ol>\n<hr>\n<p>불행히도 필자는 이 두가지 모두 다 해당이 안된다. 필자의 회사는 로컬에서 <code class=\"language-text\">http://local.soomgo.com</code>이라는 오리진을 사용하고 있기 때문에 서비스 워커 객체가 활성화 되지 않는다.</p>\n<p>그럼 해결 방법은 2가지로 줄어든다. 내가 localhost로 접속하거나 로컬에 HTTPS를 붙히거나.</p>\n<p>사실 필자는 이걸 놓쳐서 “아 서비스 워커 어디갔어? 왜 안돼? 죽을래?”로 컴퓨터랑 실랑이하느라 한 30분 날려먹었다. 공식 문서에 버젓이 한국어로 적혀있는 내용이므로 항상 공식 문서를 꼼꼼히 읽자…</p>\n<h4 id=\"개발-서버를-https로-띄우자\" style=\"position:relative;\">개발 서버를 HTTPS로 띄우자!<a href=\"#%EA%B0%9C%EB%B0%9C-%EC%84%9C%EB%B2%84%EB%A5%BC-https%EB%A1%9C-%EB%9D%84%EC%9A%B0%EC%9E%90\" aria-label=\"개발 서버를 https로 띄우자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>필자가 localhost 개발 환경에 접속하면 백엔드 쪽에서 CORS를 허용할 때 내려주는 Access-Control-Allow-Origin 헤더까지 변경해야하는 상황이라, 그냥 개발 환경에 HTTPS를 붙히기로 했다.</p>\n<p>Express는 내장 객체로 HTTPS 객체를 지원해주고 있기 때문에 간단하게 셋업할 수 있다. 먼저 HTTPS를 사용하기 위해서는 SSH 키쌍이 필요하므로 <code class=\"language-text\">openssl</code>을 사용하여 키를 만들어 주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ openssl genrsa <span class=\"token number\">1024</span> <span class=\"token operator\">></span> private.pem <span class=\"token comment\"># 비공개키 생성</span>\n<span class=\"token punctuation\">..</span>.\n$ openssl req <span class=\"token parameter variable\">-x509</span> <span class=\"token parameter variable\">-new</span> <span class=\"token parameter variable\">-key</span> private.pem <span class=\"token operator\">></span> public.pem <span class=\"token comment\"># 공개키 생성</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>그 다음 이 키를 프로젝트의 적당한 곳에 저장한 다음 그냥 사용하면 되는데 여기서 주의 사항이 있다.</p>\n<blockquote>\n<p>> 생성한 ssh키는 로컬 개발환경에서만 사용되어야합니다.<br />\n> 이 디렉토리 내의 *.pem 파일은 gitignore에 추가되어있습니다.</p>\n<p><strong>/keys/README.md</strong></p>\n</blockquote>\n<p><strong>절대 리모트 저장소에 SSH 키를 업로드하지 말자.</strong> 보안 터진다. 물론 이 키로 뭔가 실질적인 인증을 하는 것이 아니라 로컬 개발 서버에서만 사용하기 때문에 뭔가 중요한 걸 털릴 염려는 없지만 그래도 습관이 중요하다. SSH 키는 폭탄 다루듯이 다루자.</p>\n<p>대신 필자는 다른 개발자들이 쉽게 HTTPS 환경을 세팅할 수 있도록 프로젝트 내에 키를 저장하는 디렉토리 내부에 <code class=\"language-text\">README.md</code>를 작성해놓고 이 키가 어떤 용도로 사용될 것인지 주의 사항은 무엇인지 상세하게 적어놓았다.</p>\n<p>그리고 개발할 때는 HTTPS가 아니라 HTTP로 서버를 띄울 일도 생길 수 있으므로 개발 서버를 띄울 때 옵션을 사용하여 프로토콜을 선택할 수 있도록 해주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=local node server\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"serve:https\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=local node server --https\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// server.js</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// node의 옵션들은 배열 형태로 process.argv에 담겨있다.</span>\n<span class=\"token keyword\">const</span> useHttps <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span> <span class=\"token operator\">=></span> val <span class=\"token operator\">===</span> <span class=\"token string\">'--https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLocal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> localApp <span class=\"token operator\">=</span> app<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>useHttps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    localApp <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 아까 생성한 키는 여기서 사용한다!</span>\n      <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./keys/private.pem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">cert</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./keys/public.pem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  localApp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> host<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>isHttps <span class=\"token operator\">?</span> <span class=\"token string\">'https://'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'http://'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>host<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>port<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">로 가즈아!!!!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 식으로 작성해놓으면 개발 서버를 올릴 때 원하는 프로토콜을 자유자재로 변경할 수 있기 때문에, 혹시 내가 개발 서버를 HTTPS로 바꿔놔서 다른 개발자 컴퓨터에서 개발 서버가 안 올라가도 일단 시간을 벌어놓고 버그를 수정할 수 있다.</p>\n<p>원래 진짜 고수는 맞기 전에 맞을 곳을 예상해서 미리 힘을 주고 있는 법이다. <small>(많이 맞아본 1인)</small></p>\n<p>개발 서버를 HTTPS로 띄우면 이제 <code class=\"language-text\">navigator</code> 객체 내부에 이쁘게 들어가있는 <code class=\"language-text\">serviceWorker</code> 객체를 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token operator\">></span> navigator<span class=\"token punctuation\">.</span>serviceWorker\n<span class=\"token operator\">&lt;</span> ServiceWorkerContainer <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">ready</span><span class=\"token operator\">:</span> Promise<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">controller</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">oncontrollerchange</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">onmessage</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"https를-쓰지-않고-문제-회피하기\" style=\"position:relative;\">HTTPS를 쓰지 않고 문제 회피하기<a href=\"#https%EB%A5%BC-%EC%93%B0%EC%A7%80-%EC%95%8A%EA%B3%A0-%EB%AC%B8%EC%A0%9C-%ED%9A%8C%ED%94%BC%ED%95%98%EA%B8%B0\" aria-label=\"https를 쓰지 않고 문제 회피하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>사실 필자도 처음에는 로컬에 HTTPS 붙히기가 귀찮아서 리서치하다가 찾은 얌생이인데, 로컬 서버에서도 HTTPS를 사용하지 않고도 서비스 워커를 사용할 수 있는 방법이 있다.</p>\n<p>Chrome Flag의 <a href=\"chrome://flags/#unsafely-treat-insecure-origin-as-secure\" target=\"_blank\" rel=\"nofollow\">unsafely-treat-insecure-origin-as-secure</a> 설정을 활성화하고 텍스트 필드에 원하는 호스트를 입력해놓으면 해당 호스트는 안전하다고 판단하여 서비스 워커를 사용할 수 있게 해준다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b815361813e64140e4a33b94ccc0a44f/0f586/secure-hack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFUlEQVR42m2Qy07CQBhGeQti0AjhYlLamRZmesESWgoFpCXGxKVLEx7AvQs3hqWJLHwDVz7icVoSNro4Od+/+W+N8n7G8bjm4yM3rPk8rjgcFiitcMQI4Y4RclxbugrX06YeYTvuH6yhoKG0piwW7MoluyKn2GYUxZJ0viBJKzLm2ZI4nuEHEdEkRusAx5EMbXFqJjyT5amhGIUE+QNyukHEq9rS2AuzGumn5yx0gjRU+cZWPO7feX795unli/3bD1FS0uiKiIttTvMupbk2FBnN5JbWdY9Wu0+r0699WdEZnGh3ueoJvMkGf5KhwhR/usKRioYlfFw9R6pqelpv4BoLw8AJ6dvBvwzMIpZt/mbZ5lTn7F9yj6eT/mq1sAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"secure hack\" title=\"\" src=\"/static/b815361813e64140e4a33b94ccc0a44f/6af66/secure-hack.png\" srcset=\"/static/b815361813e64140e4a33b94ccc0a44f/69538/secure-hack.png 160w,\n/static/b815361813e64140e4a33b94ccc0a44f/72799/secure-hack.png 320w,\n/static/b815361813e64140e4a33b94ccc0a44f/6af66/secure-hack.png 640w,\n/static/b815361813e64140e4a33b94ccc0a44f/d9199/secure-hack.png 960w,\n/static/b815361813e64140e4a33b94ccc0a44f/21b4d/secure-hack.png 1280w,\n/static/b815361813e64140e4a33b94ccc0a44f/0f586/secure-hack.png 1498w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이렇게 등록한 뒤 하단의 <code class=\"language-text\">Relaunch Now</code> 버튼을 클릭하면 크롬이 재시작되면서 설정이 변경된다. 하지만 이 방법은 스스로 보안 취약점을 만들어 내는 것이기 찜찜해서 결국 사용하지는 않았다.</p>\n<h3 id=\"service-worker-작성\" style=\"position:relative;\">Service Worker 작성<a href=\"#service-worker-%EC%9E%91%EC%84%B1\" aria-label=\"service worker 작성 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>이제 개발환경 세팅이 다 끝났다면 이제부터는 딱히 귀찮은 건 없다. 그냥 문서보면서 쭉쭉 작성하면 된다. 일단 서비스 워커의 기능을 구현하기 전에 잘 작동하는 지 부터 확인해야 하므로 아무 내용이 없는 서비스 워커부터 만들었다.</p>\n<p>근데 이것도 <code class=\"language-text\">manifest.json</code>처럼 그냥 웹 어플리케이션과 완전 분리된 <code class=\"language-text\">static/service-worker.js</code>로 따로 작성하면 만들 때는 편하긴 한데, 나중에 서비스 워커에서 웹 어플리케이션에서 사용하고 있는 모듈이나 데이터에 접근하고 싶을 때 굉장히 애매해질 것 같아서 그냥 Webpack을 사용해서 같이 빌드하기로 결정했다.</p>\n<h4 id=\"일단-service-workerjs-파일을-만들자\" style=\"position:relative;\">일단 service-worker.js 파일을 만들자!<a href=\"#%EC%9D%BC%EB%8B%A8-service-workerjs-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"일단 service workerjs 파일을 만들자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Webpack으로 빌드한다고 해도 이 친구가 무에서 유를 창조하는 친구는 아니기 때문에 당연히 소스 파일은 있어야 한다. 일단 서비스 워커가 작동하는 것을 보는 것이 목적이므로 심플하게 작성해주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/service-worker.js</span>\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'저 쪽 테이블에서 보내신 겁니다 -> '</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"service-worker-webpack-plugin-사용하기\" style=\"position:relative;\">Service Worker Webpack Plugin 사용하기<a href=\"#service-worker-webpack-plugin-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"service worker webpack plugin 사용하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">ServiceWorkerWebpackPlugin</code>은 구글에 “Service Worker Webpack”을 검색하면 가장 상단에 나오는 플러그인이다. <a href=\"https://github.com/oliviertassinari/serviceworker-webpack-plugin\" target=\"_blank\" rel=\"nofollow\">깃허브 레파지토리</a>에 가서 다들 구경 한번 해보자.</p>\n<p>README를 읽어보니 사용법이 초간단 그 자체다. 그냥 Webpack 설정에 넣어주면 끝이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// build/webpack.client.config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>baseConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServiceWorkerWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../src/service-worker.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>서비스 워커 파일 경로를 찍어주고 <code class=\"language-text\">ServiceWorkerWebpackPlugin</code> 객체를 생성할 때 초기 인자로 넘겨주면 Webpack 설정의 <code class=\"language-text\">output</code>에 정의된 경로에 <code class=\"language-text\">sw.js</code> 파일을 생성해준다. 물론 이 파일 이름은 변경할 수 있으니 모두 각자의 취향대로 애정을 듬뿍 담은 이쁜 이름을 지어주자. 필자는 귀찮으니까 그냥 <code class=\"language-text\">sw.js</code>로 가기로 했다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 309px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.750000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVR42oWQy07DMBBF/TlUie24NIkfsWOlkESlXYNYI7Ys+AQ+/DKeVuqilbo4mpE1PnNtoZXH0nkYE1C3CbKNkNsBsktca+kfU3vIJjDCkPC769H5Ec37EebjCL3OMJ8nrmX4obByUD5DDRmi3Xn8fkVYP6CydOhG1Dpch1UhXPu7CR3kc2SE6wP+fiJcpie+LWgOM6oytLFnniyqwsZxLWnuJZR94jBiazySD2gt/VveQ1NsnSeoifo9sbyioUVqnLgvf3sjvQilvQhfEgldhKKLejpLWLiS7LAwepnRnFa+dCMsT95FXvYP50rEEU2GbqEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw\" title=\"\" src=\"/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png\" srcset=\"/static/d8c4a05ba385d071d692080e75d2241d/69538/sw.png 160w,\n/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png 309w\" sizes=\"(max-width: 309px) 100vw, 309px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이쁘게 태어난 sw.js</small>\n</center>\n<p>근데 이 방법의 단점이 있는데, 일반적인 서비스 워커보다 파일의 크기가 커진다는 것이다. 아무래도 Webpack으로 빌드하다보니 서비스 워커의 외부에 있는 모듈이나 라이브러리를 끌어오기 때문이다.</p>\n<p>뭐 이건 애초에 필자가 조금 편하게 쓰려고 선택한 상황이니 어쩔 수 없긴하다. 어쨌든 이런 단점이 있으니, 서비스 워커의 크기를 줄이고자 하시는 독자분들은 직접 작성하시는 게 더 좋을 수도 있다.</p>\n<p>이제 서비스 워커의 본체를 만들었으니 이걸 웹 어플리케이션이 초기화될 때 브라우저에 “나 서비스 워커 가지고 있어!”라고 알려주는 일만 남았다.</p>\n<h3 id=\"service-worker-설치\" style=\"position:relative;\">Service Worker 설치<a href=\"#service-worker-%EC%84%A4%EC%B9%98\" aria-label=\"service worker 설치 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>서비스 워커를 설치하는 방법은 간단하다. 이 브라우저에 <code class=\"language-text\">serviceWorker</code> 객체가 지원되는 지 확인한 후 설치하면 된다.</p>\n<p>일반적인 서비스 워커의 설치 방법은 구글의 <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/?hl=ko\" target=\"_blank\" rel=\"nofollow\">서비스 워커:소개</a> 문서를 보고 따라하면 된다.  필자는 <code class=\"language-text\">ServiceWorkerWebpackPlugin</code>을 사용했기 때문에 해당 플러그인의 문서를 참조하여 작성했다.</p>\n<p>어차피 어떤 방법을 사용하든 설치 자체는 그렇게 어렵지 않다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// settings/service-worker.setting.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isSupported <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isSupported<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'서비스 워커가 지원되는 브라우저 입니다.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> runtime <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serviceworker-webpack-plugin/lib/runtime'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  runtime<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'서비스 워커 설치 성공 ->'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>e <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'서비스 워커 설치 실패 ㅜㅜ -> '</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">isSupported</code> 변수에 <code class=\"language-text\">process.browser</code> 값을 검사하는 이유는, 숨고의 어플리케이션은 Next.js나 Nuxt.js처럼 유니버셜 SSR 환경에서 실행되기 때문이다.</p>\n<p>유니버셜 SSR이 뭔지 궁금하신 분은 이전에 작성한 포스팅인 <a href=\"/2018/09/25/universal-ssr\">Universal Server Side Rendering이란?</a>을 한번 읽어보자.</p>\n<p>해당 모듈은 물론 클라이언트 사이드에서만 호출되지만 그래도 혹시 모르니 왠만하면 현재 실행 컨텍스트가 클라이언트인지 서버인지는 체크해주는 것이 좋다. 서버 사이드 렌더링 사이클 때 브라우저 API인 <code class=\"language-text\">navigator</code>에 접근하려고 하면 당연히 에러가 발생한다.</p>\n<p>서비스 워커의 설치가 성공했다면 <a href=\"chrome://inspect/#service-workers\" target=\"_blank\" rel=\"nofollow\">chrome://inspect/#service-workers</a> 또는 <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>에 여러분의 서비스 워커가 노출될 것이다. 서비스 워커를 적용하는 방법은 사실 굉장히 심플한 편이다.</p>\n<p>근데 사실 필자가 가장 시간을 많이 잡아먹은 부분이 바로 이 서비스 워커였는데, 그 이유는 서비스 워커 공식 문서에 적혀있다.</p>\n<blockquote>\n<p><strong>설치 실패 알림 기능 부족</strong></p>\n<p>서비스 워커가 등록되더라도 <a href=\"chrome://inspect/#service-workers\" target=\"_blank\" rel=\"nofollow\">chrome://inspect/#service-workers</a> 또는 <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>에 표시되지 않는 경우 오류가 발생했거나 <code class=\"language-text\">event.waitUntil()</code>에 거부된 프로미스를 전달했기 때문에 설치하지 못했을 수 있습니다.</p>\n<p>이 문제를 해결하려면 <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>로 이동하여 ‘Open DevTools window and pause JavaScript execution on service worker startup for debugging’을 선택하고 설치 이벤트의 시작 위치에 디버거 문을 추가합니다. 이 옵션을 <a href=\"https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints?hl=ko\" target=\"_blank\" rel=\"nofollow\">확인할 수 없는 예외 시 일시 중지</a>와 함께 사용하면 문제를 찾을 수 있습니다.</p>\n<p><strong>Matt Gaunt</strong> <em>contributor to WebFundamentals</em></p>\n</blockquote>\n<p>아니 이게 디버깅이 진짜 힘들다. 서비스 워커의 설치가 실패했으면 어디서 에러가 났는지, 왜 났는지 보여줘야 하는데 <code class=\"language-text\">Uncaught DomException</code> 하나만 딸랑 보여주고 끝낸다.</p>\n<p>그래서 뭐가 잘못되었는지 하나하나 코드 라인에 <code class=\"language-text\">debugger</code> 찍고 추리해가면서 수정해야하는데 이게 진짜 힘들다. 근데 이걸 또 공식 문서에 디버깅 힘들다고 버젓이 적어놔서 괜히 더 힘든 거 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFVklEQVR42i2UW1CU5x3Gv/f9vt1lgbAgsMuyCLscdlGWwy4LLEcBcSEuEBUVMBBMPFAVNRqPoxFzUoxTT9EiMbUaiHaSeiCotUkm6UzbybTptE7bTA9pvelMbtppe5Gr3vz6r+3Ff77v5v19z/v9n+cxdIoX7fSj00MoVzUqqw6V3YJyJ7Dy+8jy9+AtSZAflPfyMczQIYzyE6jwKYyqc6jIJXT0Mrr2Cjr+PQyVHkRnVGJkxbDlxnHkdWJ4n8HKS7C4IERlwMdSn5uKAjc1xT4qK9vIr9lOfmSCRTWHBDSNis9ha54jreM9DJ0ZxcxuwhBF9uwYmTklmL4B7I5FpJiavOwsij0eCnNyCRcVUOP3koj6idUlcda/ha3xHVLbv09Gxw18KwWoctvRnh60dzXKuwbLFcSe6sZm2jC1nXSnU4Bu/Lm5lHk9REsD9NRXsyxcREnTLtJX3MHTPcfyHfe5vPAXUejtRxcMoorG0IGtmIWj2Jx52LSJ3XSgDBNPVibVpX5yMzJorQoysaaNxoYERUt7iW+8zdR7X/KTP/yLS/N/FIUCUAJSpbvRwX2YFW9gebqwGQapKWmERVG0rIhnWmNkP5VOQ7yFgzvGCcWG+daxOT5+9DU3f/w1yRfvkdl6UYClO1Ghg+glk+jwFKrmMvaKVzAMG7HyAKP9XSxPJDl3fB9b+xp5d2o/81ffYvb+Fzz41d8ZmfyUvK4rOOrOYK+dEqCAVOUUuvoCKjqDWX8do+4Wfat3cn5nko+mD/PJjQv89tZpHt86zu9n9zJ7bY4907+juP86joYLOKKnhSEiQvsFWHUWHZlBx66hGm6iW97HWLZA7fpZLh8e5+G53Xx+5SUe357kr/OTzJ1/k/KBm6TEp7HFzmCLnEBXHJVbvogu3iJLqb0qPrqBav4Ae8ddXD33yEl+SO7K2zQOTtPcMczmoVXMHnmO60e24V1+Eav+O9ijp9CiSoUOoEu3o/xjqIK1orDpfWztd3iqe4Hs5D3cyXkat37C0ZlfEl6+k4H+AX50fhcTyxoYro+TVbUNIyyqlh5Gl8kiA5vRhUNoSZVyd2GkJxbI6b2Pu/dDqkYfcmDmEZ8//jeTlx7Q3T3AByfHuXpwkJMTQ7x0+BjNnYN4JSVGYBxdNIL2rUHliY9z2tCLYhKQ3nuUDz9k+9lf89Fv/inzDzaeekR85SH5d3v56gev8OqmJHfeeJ6FM7t5cHEfvX2b5eBaLG8vpgTDXBRHZ1ZjZpRjjLz+c+Z/8Td++qdvOPj2lwTX3cWIXmVs08t8MTPO3RMv8O2JNewfW8uKFeuINA8JqA9DvKolsjorIqAKKZdidNpijJ999Q2nbv6ZqpEf4mx9F3vTFVTsEq66E4wPb2Dr6qdJJAYINW9kSeMwodo+nPntqMxatCssoDIBFUpj5aMdbozW7Z+RJuE2G6/J9qSGImfE4K9hBA9hL53AVbgMf00/JZF+AhUd1LQN4w52Y6SWYaaJKqdPQB5Mew6mlYFhNc9KY3wXM3pBbHASteRl2d4e2d4WHIH1LGnaQHXnJlE3QmXTEA1dz1MQ7sVI8WE6PVj2bCybC9NMRUv2DVV7EV11WmxwDCVZ1sXbnhSEkbeKjMDTRNpHCTaNUBp/lpbujRw4cpZgTY8cdGGzu7Asp8AcMvYnY+iK19HSwrpkxxNz6oL14qmkFG4rJdVJ+ga3sGrDXjpX76Gl5znePDdLXb34zdACTJVrCsyyY2mpO2XJh/5rTv8m9OIhlIB0bqcUbhwlLZ7pi9Kzch3HXz3PkaOn2fXCKE0Nbdgc6f9TJDBLnpaAzP/PfwDrN8WrTqXoQAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"conan\" title=\"\" src=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png\" srcset=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/69538/conan.png 160w,\n/static/e57b6ba2e83f7ede90d76af1007b9b33/72799/conan.png 320w,\n/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png 436w\" sizes=\"(max-width: 436px) 100vw, 436px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>도와줘요 명탐정... 범인말고 내 버그도 찾아줘...</small>\n</center>\n<h2 id=\"제-3-관문-pushmanager\" style=\"position:relative;\">제 3 관문, PushManager<a href=\"#%EC%A0%9C-3-%EA%B4%80%EB%AC%B8-pushmanager\" aria-label=\"제 3 관문 pushmanager permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이제 서비스 워커도 설치했으니 서비스 워커의 <code class=\"language-text\">PushManager</code>만 연동해주면 모든 것이 끝난다! 라고 생각했지만 이 놈도 복병이었다.</p>\n<p><code class=\"language-text\">PushManager</code> 또한 아직 표준이 아니라서 모든 브라우저에서 지원되는 기능이 아니기 때문에 서비스 워커 설치 시 <code class=\"language-text\">PushManager</code>의 존재 여부도 함께 검사해주어야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// settings/service-worker.setting.js</span>\n<span class=\"token keyword\">const</span> isSupported <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'PushManager'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>조건의 가독성이 조금 떨어진 것이 마음에 안들지만 일단은 구동 테스트를 하는 것이므로 그냥 넘어갔다. 딱 여기까지 하고나서 다음 스텝을 봤더니…</p>\n<h3 id=\"재앙의-시작\" style=\"position:relative;\">재앙의 시작<a href=\"#%EC%9E%AC%EC%95%99%EC%9D%98-%EC%8B%9C%EC%9E%91\" aria-label=\"재앙의 시작 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<blockquote>\n<p><strong>애플리케이션 서버 키 가져오기</strong></p>\n<p>이 코드랩으로 작업하려면 애플리케이션 서버 키를 몇 개 생성할 필요가 있는데, 도우미 사이트인 <a href=\"https://web-push-codelab.glitch.me/%EC%97%90%EC%84%9C\" target=\"_blank\" rel=\"nofollow\">https://web-push-codelab.glitch.me/에서</a> 생성할 수 있습니다.</p>\n<p>여기서 공개 키 쌍과 비공개 키 쌍을 생성할 수 있습니다.</p>\n<p>다음과 같이 <code class=\"language-text\">scripts/main.js</code>로 공개 키를 복사하여 <code class=\"language-text\">&lt;Your Public Key></code> 값을 바꾸세요.</p>\n<p><code class=\"language-text\">const applicationServerPublicKey = '&lt;Your Public Key>';</code></p>\n<p>참고: 절대로 비공개 키를 웹 앱에 두면 안 됩니다!</p>\n<p><strong>Matt Gaunt</strong> <em><a href=\"https://developers.google.com/web/fundamentals/codelabs/push-notifications/?hl=ko\" target=\"_blank\" rel=\"nofollow\">웹 앱에 푸시 알림 추가</a></em></p>\n</blockquote>\n<p>응…? SSH 키가 필요하다고…? 예상 못하긴 했지만 HTTPS 환경에서 서버와 클라이언트 통신 채널이 하나 더 생기는 것이므로 SSH 키가 필요한 건 맞는 것 같아서 빠르게 인정했다.</p>\n<p>Google의 공식 문서에서 PushManager로 푸시 채널을 구독하는 예제를 살펴봤더니 확실히 SSH 키가 필요하긴 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">subscribeUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> applicationServerKey <span class=\"token operator\">=</span> <span class=\"token function\">urlB64ToUint8Array</span><span class=\"token punctuation\">(</span>applicationServerPublicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  swRegistration<span class=\"token punctuation\">.</span>pushManager<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">userVisibleOnly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">applicationServerKey</span><span class=\"token operator\">:</span> applicationServerKey\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>음 예상은 못했지만 이 정도는 괜찮다. 어차피 <a href=\"https://pusher.com/\" target=\"_blank\" rel=\"nofollow\">Pusher</a>라는 푸시 솔루션을 이미 사용하고 있고 이것도 결국 같은 원리로 작동하기 때문에 내부적으로는 SSH 키쌍을 사용한 인증을 사용했을 것이다.</p>\n<h3 id=\"빠른-손절\" style=\"position:relative;\">빠른 손절<a href=\"#%EB%B9%A0%EB%A5%B8-%EC%86%90%EC%A0%88\" aria-label=\"빠른 손절 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그렇게 Pusher에서 사용되는 SSH 키가 어디 있는지 찾기를 어언 20분… 결국 못 찾았다.</p>\n<p>Pusher 내부적으로 서버에서 사용하는 <code class=\"language-text\">secret</code> 값과 클라이언트에서 사용하는 <code class=\"language-text\">key</code>를 사용하여 인증을 하는데, 이건 SSH 키쌍이 아니라 그냥 임의의 문자열이었다.</p>\n<p>어차피 SSH 키를 만든다고 해도 웹 푸시에 대한 컨트롤은 백엔드가 가지고 있으므로 필자 혼자 이것저것 건드리면서 테스트 해보기에는 조금 무리가 있다. 게다가 퇴근 시간은 이미 한참 지났기 때문에 백엔드 분들은 퇴근하셨다. <small>(사실 금요일 저녁에 이런 거 하고 있는 사람이 이상한거다.)</small></p>\n<p>이때 이미 필자의 멘탈은 조금 나가있었기 때문에 월요일에 출근해서 모바일 앱에서는 어떻게 Pusher와 FCM을 연동해서 사용하고 있는 지 물어본 후 진행해야겠다고 결론을 내리고 방향을 바꿨다.</p>\n<p>커밋 로그를 보니 이때 시간이 대략 21시 40분 쯤… 아니 그래도 퇴근은 해야하니까… 집에는 가야지…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACCElEQVR42nVTSWtyQRB8f9pbQMSLePAm3gRRL+4xl0RBBXEX92hc4hLEPUo0hmjUCtUwId+HGWjmvZmemq6qHu3r6wvX4nQ6oV6vY7Vayf/Hx4esHY/Hn3h8fESj0UAqlUK320W73YZ2uVzwOzgI8Pn5KQnn81nWOBNE5ai15+dnlEol5HI59Hq9fwHV4c1mg2KxiJeXF/mfzWaIRCLw+/2Ix+N4enrC6+ur7HFmdZVKBdFo9Drg+/s7Wq0WRqMRttstbm9vYbFYoNfrcXNzA51OB6/XK7nT6RTNZhN3d3dwu93QCPJ/EJyUh8OhUDGbzQgEAjAajQiHw6hWq0JfVZjP52G1WmGz2aApPX5ryHE4HITKYrFAMBiEw+GQAy6XS6qnQRzz+RzpdFoksdvt0CaTiVCjTvzu9/sYDAbY7/fodDpygEGD6OhyuRTHyYSXZrNZ2bu/v0csFoNG8QuFgriVTCZF9Ewm8wOoAHw+n2jFfO7tdjuhTbq1Wu2nhTRlBmfVg8qc8Xgsjr69vYl2iURCQGkSGamOoLvUmsw0BfZXP7JqAj48PMDpdIp+7Lv1ei3G0WVeRtPYVto1MIYSna+FIBx8NTRJMeBFrI5UDQYDTCbT34AqWCUroJ7lclncJE1qTt34Olgxe5R5V/uQoSpkRXSQutE8GkAt2ch0nxeGQiF4PB5Z/wYETq25vc6tLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"giveup\" title=\"\" src=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png\" srcset=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/69538/giveup.png 160w,\n/static/4bb0a72bb04f73e4997f67a28c30bbba/72799/giveup.png 320w,\n/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png 439w\" sizes=\"(max-width: 439px) 100vw, 439px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>역시 아니다 싶으면 빠른 손절이 답이다...</small>\n</center>\n<h2 id=\"제-4-관문-notification-api\" style=\"position:relative;\">제 4 관문, Notification API<a href=\"#%EC%A0%9C-4-%EA%B4%80%EB%AC%B8-notification-api\" aria-label=\"제 4 관문 notification api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>그래서 바꾼 방향은 “Background 푸시 메세지는 포기하고 Foreground 푸시 메세지라도 제대로 받게 하자”였다.</p>\n<p>이렇게 되면 필자가 처음 생각했던 “브라우저가 꺼져있더라도 푸시 메세지를 보여주고 싶다”는 달성하지 못하지만 브라우저가 켜져있고 soomgo.com에 접속되어 있다면 창을 내려놓든 다른 일을 하고 있든 사용자에게 푸시 메세지는 보여줄 수 있으므로 어느 정도 목적 달성은 된다.</p>\n<p>방향을 바꾸고 나니까 기존의 웹 어플리케이션에 구현되어있던 푸시 로직에 노티피케이션을 보여주는 코드만 추가하면 끝나는 간단한 일이 되었다. 어차피 Pusher를 사용하여 인증, 이벤트 구독 등의 로직은 예전에 채팅 기능 개발할 때 다 만들어 놨기 때문이다.</p>\n<h3 id=\"기존-기능에-notification-끼워넣기\" style=\"position:relative;\">기존 기능에 Notification 끼워넣기<a href=\"#%EA%B8%B0%EC%A1%B4-%EA%B8%B0%EB%8A%A5%EC%97%90-notification-%EB%81%BC%EC%9B%8C%EB%84%A3%EA%B8%B0\" aria-label=\"기존 기능에 notification 끼워넣기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>예전에 채팅 기능을 개발할 때 Pusher SDK를 한번 래핑한 헬퍼 클래스도 만들어 놨었기 때문에 나름 구조도 탄탄하다. 이제 여기에 메소드만 몇개 추가하고 웹 푸시 이벤트가 발생했을 때 알림만 보여주면 된다.</p>\n<p>우선 이 브라우저가 <code class=\"language-text\">Notification</code> API를 지원하는 지 확인하는 메소드가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/helpers/Pusher.js</span>\n<span class=\"token function\">isSupportNotification</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> window <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'Notification'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그 다음 사용자에게 알림에 대한 허가를 받는 메소드를 작성한다. <code class=\"language-text\">Notification</code>은 내부에 <code class=\"language-text\">permission</code> 속성을 가지고 있고 이 속성은 <code class=\"language-text\">granted</code>, <code class=\"language-text\">denied</code>, <code class=\"language-text\">default</code>로 나누어 진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/helpers/Pusher.js</span>\n<span class=\"token function\">getNotificationPermission</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSupportNotification</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'not_supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">'denied'</span> <span class=\"token operator\">||</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">granted</code>는 사용자가 이미 알림을 허용한 상태, <code class=\"language-text\">denied</code>는 거부한 상태, <code class=\"language-text\">default</code>는 아직 알림에 대한 퍼미션을 줄지말지 사용자가 결정을 하지 않은 상태이다.</p>\n<p>따라서 우리는 퍼미션이 <code class=\"language-text\">default</code> 상태일 때 <code class=\"language-text\">Notification.requestPermission</code> 메소드를 사용하여 사용자에게 알림 노출에 대한 허가를 받아야 한다.</p>\n<p>이제 실제로 알림창을 띄워줄 메소드를 작성해보자. <code class=\"language-text\">Notification</code> API 자체가 워낙 심플하다보니 그닥 어렵지 않다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">createForegroundNotification</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> body<span class=\"token punctuation\">,</span> icon<span class=\"token punctuation\">,</span> link <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> notification <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> icon <span class=\"token operator\">||</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>AssetsCloudFrontHost<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/app_icons/1x.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onshow</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> notification<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">,</span> <span class=\"token string\">'_blank'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">new</code> 키워드를 사용하여 <code class=\"language-text\">Notification</code> 객체를 생성하면 그 즉시 OSX는 화면 우측 상단에, Windows는 우측 하단에 알림 메세지가 노출된다. 그 다음 생성한 <code class=\"language-text\">Notification</code> 객체의 <code class=\"language-text\">onshow</code>, <code class=\"language-text\">onclick</code> 등의 이벤트 리스너에 핸들러를 등록해주면 된다.</p>\n<p>메소드 명은 Background 메세징을 실현하지 못한 필자의 슬픔을 담아 <code class=\"language-text\">createForegroundNotification</code>으로 결정했다. 굳이 Foreground를 강조한 이유는 언젠가 <code class=\"language-text\">createBackgroundNotification</code> 메소드를 만들겠다는 필자의 야망을 담았다.</p>\n<p>이제 필요한 모든 것을 만들었으니 Pusher SDK에서 Web Socket을 통해 푸시를 보낼 때마다 알림이 작동하도록 연결만 해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token function\">subscribeNotification</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSupportNotification</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNotificationPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> channel <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPrivateUserChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">channel</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myUserId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> targetChatRoute <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>provider <span class=\"token operator\">?</span> <span class=\"token string\">'chats'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'pro/chats'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createForegroundNotification</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">님이 메세지를 보냈어요.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>profile_image<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetChatRoute<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>response<span class=\"token punctuation\">.</span>chat<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Pusher SDK는 푸시 채널에 이벤트 핸들러를 바인딩할 수 있는 기능을 제공해준다. <code class=\"language-text\">message</code> 이벤트는 사용자가 채팅 메세지를 받았을 때 호출되는 이벤트이다. 단 자기 자신이 보낸 메세지에도 여과없이 이벤트가 호출되므로 <code class=\"language-text\">response.sender.id === this.myUserId</code> 조건을 통해 자신이 보낸 메세지에는 알림을 보여주지 않도록 처리하였다.</p>\n<p>그 다음은 이제 사용자가 작은 알림 메세지만 보고도 어떤 상황이 벌어지는 것인지 쉽게 알 수 있도록 “OOO님이 메세지를 보냈어요”라는 형식의 제목과 메세지의 내용, 상대방의 프로필 사진을 사용하여 <code class=\"language-text\">Notification</code> 객체를 생성하면 끝이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 499px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/32c54805c2f49dd0192728224f674405/119c7/push.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.12499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42o1R3WuSURh//6cgGOh01YVm+qrDm2mWi6gb16K6qGW4BVpBFwVtXQZhSdNXC+bqIvDGa8UPChkEsiFuil/z8/34dc5598Y0lj3w45zznOfj93sezmAwQINer4dOp4OR3C8sLKj++XmG+VMwGo0TUPPVP46320Fhdzjg8VyFz+eDjbfBcPESLDzP/DZyOhxO8DbyJrEWiwVms5nBZDLh8hUrzFYrXC4XuHPn50AxpzMgFH6G1E4Kd+77EVy9jrXAAzwKbuDh4wCC6xsIhcIIh8Ok6Q243W5CwIMlQuJ9LIrk1y94+eo1uDebm6DY2nqLSCQCYTuGa6u3cfPeEu6u3EJg/SnWngTg969g2bcMr9cLnrfDubgIp5OwJgrefYpC+LaD0Ivn4IrFIigKhQKy2SxyuRx2d1OIfPiIWDyBRDJJzjhiyc+IJgTEY3EkiS9OfIlEAoIgQCDndjyGdDoNDrNMUdgh12rA/gFq7Sb2qwfMNx6PIcvyH1Dj6EUhSadBfZIkqRBFSCSwWSoB5TL2jmoo/dqDSP7q9To6nQ7a7Ta63S5GoxG46UJaJ+WEmXaXacyUf1KIWoM77vVYIGWjBQ+HQ9ax3++j1Wqxt6pbnhjDtDImuU8LkgedhxZUJtLy+TxbUCaTQaVS+Yv1Wca1JBFNcYy+IrPO/5P0z4LfW4co9No4Gg9PVMlMJh00RbPZnNmEjktTyA3IFkeKhAFhShPpJ5WqgUoXScxZi6BGG1erVbXgMRl8/ucPHDYabAmUIQ1okLe28VlG2Q0GA1bwN33ZqDFqNl5aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"push\" title=\"\" src=\"/static/32c54805c2f49dd0192728224f674405/119c7/push.png\" srcset=\"/static/32c54805c2f49dd0192728224f674405/69538/push.png 160w,\n/static/32c54805c2f49dd0192728224f674405/72799/push.png 320w,\n/static/32c54805c2f49dd0192728224f674405/119c7/push.png 499w\" sizes=\"(max-width: 499px) 100vw, 499px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>필자의 멘탈 상태를 여과없이 보여주는 메세지...잉잉...</small>\n</center>\n<p>어쨌든 이렇게 해서 브라우저에 soomgo.com이 열려있다면 사용자들은 다른 일을 하다가 계속 페이지를 확인하거나 핸드폰을 확인할 필요없이 데스크탑 내에서 새로운 채팅 메세지를 바로 확인할 수 있게 되었다.</p>\n<p>아직도 Background 상태에서 푸시 메세지를 바로 보여주지 못했다는 게 아쉽긴 하다. 하지만 이 정도만 해도 사용자들 입장에서는 꽤나 편할 것이라고 생각한다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 처음 목표했던 걸 다 이루진 못해서 찝찝했지만 너무 피곤했기 때문에 다음을 기약하기로 했다. 이제 월요일에 출근해서 PO한테 이걸 보여주고 혹시 뭐 추가하고 싶은 거 없는지 물어보고 몇가지 테스트를 좀 해본 후 배포할 예정이다.</p>\n<p>서비스 워커에 <code class=\"language-text\">fetch</code> 이벤트 핸들러를 추가하면 Add to Homescreen 기능도 사용할 수 있지만 사실 숨고의 프론트엔드 챕터 공식 입장은 사용자들이 모바일 웹보다는 모바일 앱을 많이 사용했으면 하는 것이기 때문에 이건 할까말까 고민 중이다. <small><del>(인앱 브라우저 크로스브라우징 하기 싫…)</del></small></p>\n<p>일단 처음 스코프를 너무 크게 잡은 것 같기도 하다. 하나하나 좀 자세히 알아보고 작업을 했으면 좋았을 것 같은데 월요일부터는 바로 또 하던 프로젝트 작업을 다시 해야해서 마음이 급했던 것도 있다. 그리고 회사에 프론트엔드 개발자가 부족하기 때문에 이런 기술적인 기능을 붙히는 건 우선 순위가 낮은 편이라서 “지금 아니면 앞으로 언제 할 수 있을 지 모른다”라는 마음도 컸던 것 같다.</p>\n<p>막간을 이용해, 필자와 함께 일해주실 <a href=\"https://www.wanted.co.kr/wd/14044\" target=\"_blank\" rel=\"nofollow\">프론트엔드 개발자 분을 모신다는 JD</a>를 뿌리면서 포스팅을 마무리 하겠다.</p>\n<p>PWA 외에도 다른 하고 싶은 건 많은데 프론트엔드 개발자가 모자라서 못하고 있기 때문에 경력 여하와 상관없이 그냥 재밌는 거 좋아하시는 분이면 된다.<small>(하고 싶은 개발 다 하실 수 있도록 이 한몸 불살라 보필하겠습니다.)</small></p>\n<p>이상으로 PWA 하루 만에 도입하기 포스팅을 마친다.</p>","fields":{"slug":"20190706-pwa-with-notification","path":"/2019/07/06/pwa-with-notification/","lang":"ko"},"frontmatter":{"title":"PWA 하루만에 도입하기","subTitle":"서비스 워커, 웹 푸시, 캐싱까지 직접 구현한 PWA 도입기","date":"Jul 06, 2019","categories":["프로그래밍","웹","튜토리얼"],"tags":["JavaScript","자바스크립트","Web Push","Web Socket","socket.io","Notification API","Vue","PWA","Progressive Web Application"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/ca7838e0f08103b712d883b16d280e71/d803c/thumbnail.png","srcSet":"/static/ca7838e0f08103b712d883b16d280e71/d803c/thumbnail.png 320w,\n/static/ca7838e0f08103b712d883b16d280e71/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ca7838e0f08103b712d883b16d280e71/fc5c5/thumbnail.webp 320w,\n/static/ca7838e0f08103b712d883b16d280e71/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ca7838e0f08103b712d883b16d280e71/01fb2/thumbnail.png","srcSet":"/static/ca7838e0f08103b712d883b16d280e71/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/ca7838e0f08103b712d883b16d280e71/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"8c3b6d10-8340-5f90-af3d-1b06e755935f","tableOfContents":"<ul>\n<li>\n<p><a href=\"#jira-software%EB%9E%80\">Jira Software란?</a></p>\n</li>\n<li>\n<p><a href=\"#jira-%EC%9D%B4%EC%8A%88-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95-%ED%95%98%EA%B8%B0\">Jira 이슈 커스터마이징 하기</a></p>\n<ul>\n<li><a href=\"#jira-%EC%84%B8%ED%8C%85-%EB%A9%94%EB%89%B4-%EC%B0%BE%EA%B8%B0\">Jira 세팅 메뉴 찾기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#issues-%EB%A9%94%EB%89%B4\">Issues 메뉴</a></p>\n<ul>\n<li><a href=\"#issue-types\">Issue Types</a></li>\n<li><a href=\"#workflows\">Workflows</a></li>\n<li><a href=\"#screens\">Screens</a></li>\n<li><a href=\"#fields\">Fields</a></li>\n<li><a href=\"#issue-features\">Issue Features</a></li>\n</ul>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 Atlassian의 대표 제품 중 하나인 Jira에 대해서 포스팅 하려고 한다. 요즘 많은 IT회사들에서 애자일 개발 방법론을 사용하여 소프트웨어 개발을 진행하고 있다. Jira는 애자일 방법론에서 사용하는 다양한 방법들을 좀 더 쉽고 편하게 사용할 수 있게 도와준다.","html":"<p>이번 포스팅에서는 Atlassian의 대표 제품 중 하나인 Jira에 대해서 포스팅 하려고 한다. 요즘 많은 IT회사들에서 애자일 개발 방법론을 사용하여 소프트웨어 개발을 진행하고 있다. Jira는 애자일 방법론에서 사용하는 다양한 방법들을 좀 더 쉽고 편하게 사용할 수 있게 도와준다.</p>\n<!-- more -->\n<p>사실 애자일 프로세스는 일종의 방법론일 뿐 어떤 원칙이 아니기 때문에 팀마다 그 구성이나 개발 과정이 조금씩 달라지게 될 수 밖에 없고, 또 회고를 통해 이런 저런 방법들을 계속 시도해보기 때문에 어떠한 규칙으로 똑부러지게 정해지는 게 아니다. Jira는 이렇게 매번 달라지는 규칙들에 대응하기 위해서 다양하게 프로젝트를 커스터마이징할 수 있는 기능을 제공한다.</p>\n<p>그러나 기능이 너무 많고 용어가 복잡해서 처음 접하는 사람은 이걸 도대체 어떻게 써야할지 감이 안오는 것도 사실이다. 아마 많은 분들이 그냥 기본적으로 제공해주는 칸반이나 스프린트 기능 정도만 사용하고 있지 않을까 싶다.</p>\n<p>그래서 오늘은 Jira를 사용할 때 제일 기본적인 단위를 이루는 Issue를 커스터마이징하는 방법을 설명해볼까 한다.</p>\n<h2 id=\"jira-software란\" style=\"position:relative;\">Jira Software란?<a href=\"#jira-software%EB%9E%80\" aria-label=\"jira software란 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Jira는 호주의 Atlassian이라는 기업에서 제공하는 애자일 소프트웨어 개발 방법론을 지원하는 일종의 프로젝트 관리 솔루션이다. 간단하게는 칸반보드부터 깊게는 애자일 프로세스에 필요한 스프린트 단위의 관리 기법이나 스프린트를 분석할 수 있는 다양한 보고서까지도 제공해주고 있다.</p>\n<p>이런 점이 바로 Trello나 Asana와 같은 다른 프로젝트 관리 툴과 차별화되는 점인 것 같다. <small>(참고로 Trello도 Atlassian이 먹은 지 좀 됐다)</small></p>\n<p>또한 Atlassian에서 제공하는 다른 서비스들인 Bitbucket, Confluence, Source Tree 등과 서로 연동이 잘되어있는 부분도 좋은 것 같다. 예를 들면 어떤 브랜치에서 기능을 개발하다가 해당 브랜치로 Pull Request를 생성하면 Jira에 연결된 이슈가 자동으로 Code Review 상태로 변경되게도 할 수 있고 커밋 메세지에 <code class=\"language-text\">LU-0000 first commit</code> 처럼 Jira 이슈 번호를 넣어준다면 Jira 이슈 내에 해당 커밋과 브랜치가 자동으로 추적되기도 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 131.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByklEQVR42qWTPUsdQRSG9xfYxkrTXUijWMQqdiKkC5JGUqggCREsgjaSgMZCyxSCBAKCYJEmTYiFEAj5BcFPbhJUELzszuzszO7s95wzmd2rpAnc2ZthmS3OPHPe98w5jtbIGO+4LMlVXqACjdp2OXkBT7baD1eOp9bajzd+jS2fDs7/2D5wTUxBj3ucosRXu9fP3l0svb9a3Lmc3mw/Wj3f/+5bwd2fEdtE7x2MSrkHh1d7H71Pn/Ov35Ivh9lZG0wE0QJOUz4xGQzeZ8MtOtwiA/fkm7dVRKnesAYof/4ujk6Kk9Py7Lw8OoZOR9tmBvBccnPjUspuGbQ174Dvk5FxrzVKHoz5I+N0qCVfr9vKRhHGCy/l7IKcex7NvxBPZ9IPuzUMFp61LlDnqLNqt1JsTpW1rgpmPCSMm48yARY4AMZxWnsGEGHEhWQBz/OyYZMgRjIOeGjGI81yG80mM9SdW8GEMp8FHmWRTHrCMk4CLrgIjUGnexli48a+LZhPmUd8wD4GA9EYFqHsM7MpOPQnu6p2FJtSx0naD8y4IDSwead/yE6SLM2K//AMoJQye2PZhPpuPdKkO9KNMpuCNc35Fy5LhXerEfwHYRvX4/RCr9wAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira 브랜치 추적\" title=\"\" src=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png\" srcset=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/69538/jira-branch.png 160w,\n/static/55b2f630f3f5627e2c7f65f96e3a36b4/72799/jira-branch.png 320w,\n/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이슈에서 추적되고 있는 브랜치와 커밋의 모습</small>\n</center>\n<p>저런 공유 기능으로 인해서 제일 좋은 점은 사실 PO(Product Owner)들의 업무가 많이 편해진다는 것이다. Jira의 스프린트 대시보드는 일종의 상황판이다. 누가 어떤 업무를 어느 정도 진행했는지 브랜치와 커밋을 통해 상세히 알아볼 수도 있고 또 전체 스프린트의 이슈의 몇 퍼센트가 Done 상태인지, 팀이 얼마나 더 빡쎄게 달려야 이 스프린트를 마칠 수 있는지와 같은 정보를 실시간으로 보여준다.</p>\n<p>뭐 사실 이러지 저러니 해도 Jira는 툴일 뿐, 애자일에는 “일을 효율적으로 하고 싶다”라는 팀의 의지가 가장 중요하긴 하지만 그래도 Jira가 굉장히 세심한 기능들을 제공해준다는 건 사실이다.</p>\n<h2 id=\"jira-이슈-커스터마이징-하기\" style=\"position:relative;\">Jira 이슈 커스터마이징 하기<a href=\"#jira-%EC%9D%B4%EC%8A%88-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95-%ED%95%98%EA%B8%B0\" aria-label=\"jira 이슈 커스터마이징 하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>이 문서에 작성되는 사항들은 프로젝트의 Administrator 권한이 있는 사용자만 수행할 수 있습니다.</p>\n</blockquote>\n<h3 id=\"jira-세팅-메뉴-찾기\" style=\"position:relative;\">Jira 세팅 메뉴 찾기<a href=\"#jira-%EC%84%B8%ED%8C%85-%EB%A9%94%EB%89%B4-%EC%B0%BE%EA%B8%B0\" aria-label=\"jira 세팅 메뉴 찾기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Jira 메인 화면에 접속하였을 때 Jira 프로젝트 설정에 대해 수정 권한이 있는 사용자라면 왼쪽 메뉴 리스트의 제일 하단에 <code class=\"language-text\">Jira settings</code>라는 메뉴가 보일 것이다. 이 메뉴에 접속하면 시스템, 프로젝트, 이슈 등 Jira에 대한 모든 설정을 수정할 수 있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 442px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSUlEQVR42m2Ua0hTYRjHj07dzEs5ykgruxgkUVSEkaA783bcnCwNKzOJpMKI6ms3KDW6aB/MIoIgdPNsmjc0XVkQ1qdMIsjCyowiMoqy2TRLt/173vfMUtwLf5733TnPb8/tPUKoZEVQai3CDVZSHdhZk2kha/FZ5awmRRplqOjdpEO3MT7+G5OTk3C73dPsBIRF+S2Qjj1EcEYdgjJlsHPM9lbE7mjFit3t3E79FpZdD0FnwZHqHrA1+us3vg2P4KdrDM6RUYyOjUNYTA6G4wxoRQgBVxJk3X4HEvZ2YP2BO1hT3ImNJXf5fm5OAweeuNHLgR+HvqKr+wn6+gdxv7sX/QMfIGiybJhjqKeU6qCWbAjU1UCltyCAJNA+QFeLQNqr0qwIpXcF0YKkgw54PF4O9Srm3xKizLd4RMGZNqj115CQfw3z0y9hcXYV4nKqsdRUDW1qBYI2l0OTdBbChlKkHO3kzhNuL4bHPHD+8ioa90KIoLrE5DdTujZoCBifexXzUisRY6zCEtNlLDdfgTatEqrEsn/A5MMdHOgiwJsvbrz+PEH6g1dDfyCEE3DJzlaEUFPCjHbEFbRAa27Asl2tVE9qhMEGVTp1mtINNSgpJx+9C48v1x/On3j2vB8Dgx/wsv+tAtRS2qzLcwx2RG9rRqSpAQtymxDLOmtsQFCGTCWRCWgnoJUDvQT0eDxwUy2Z2JmJpxy9rYkDWdE3HexCdF4T7/bywjbEF7Vh7T4HVhW1+4CWGcCpSL86JzA0TCmzUQmmCNSSzBsTU0COpkbMy2vhitzajHAzRW1u8nV5doRsPXrpQlXHFwhsVFh9GDgs04qcw21YnWfBpkI7kosbEW+uhVa8joiMGmj8RTgt3UnqugKk6AKkeqToy5BtPIek9PMQpQtIM1SQLmJL6jlIupOYm2UlYN0MoNeXMrslzhHXf2AgA4plSCxxICKXrt2eTq71JfcQVeBAYko5Fko3CSjTHE6P0MOB795/Qs/TFzOBG/UXkaE7BZ1YClE8A1GnSC+epj8rRXiWPKuGU8AHj/tw6Wa7AuSiqxci2enrIvuVmj3zU0O3WwFele8g70jFNCA5abijza/YM39zODU2350uvHk/hL/YUzbRBT1qkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jira1\" title=\"\" src=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png\" srcset=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/69538/jira1.png 160w,\n/static/4946e82a095e3c5c767dc4fe3cf160b9/72799/jira1.png 320w,\n/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png 442w\" sizes=\"(max-width: 442px) 100vw, 442px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><code class=\"language-text\">Jira settings</code> 메뉴를 클릭하여 세팅 메뉴가 노출되면 <code class=\"language-text\">System</code>, <code class=\"language-text\">Products</code>, <code class=\"language-text\">Projects</code>, <code class=\"language-text\">Issues</code>, <code class=\"language-text\">Apps</code> 총 5개의 메뉴가 보인다. 이 포스팅에서는 이 설정들 중에서 <code class=\"language-text\">Issues</code>에 대한 설정만을 다룰 것이다.</p>\n<h2 id=\"issues-메뉴\" style=\"position:relative;\">Issues 메뉴<a href=\"#issues-%EB%A9%94%EB%89%B4\" aria-label=\"issues 메뉴 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/2e237/menu.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3ElEQVR42q3SSQ6CQBAFUDYiUXBE47zyKqKCihPoxtvRgKJivOC3uzQmLqFdVNK9efk1KKPjA9VFjOryjJ53R2d/oyrbEVQrRHGarZThMSWwvroQZK4TdD0JsMkBbcYwPj1hbq4YHFKU5hEKE5YZI7DhJijNQtSWMQwngjZlvAIUrXyl6HZMiIANJ86d7JuQHhZDhc+x4V54++F/QHOT0JYFqFpMHmy6Yrt3Qg2eNi9KoPpJKM5G4xuWafubUCzHWJyl5veTsLXlM/RveP+lwQDt3RV9P4XOT0em5RcQDNgToqVsagAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira 이슈 메뉴들\" title=\"\" src=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/6af66/menu.png\" srcset=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/69538/menu.png 160w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/72799/menu.png 320w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/6af66/menu.png 640w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/2e237/menu.png 790w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Jira settings 내의 Issues 메뉴를 클릭해보면 이슈에 관련된 수많은 메뉴들이 노출된다. 하나하나 알아보자.</p>\n<h3 id=\"issue-types\" style=\"position:relative;\">Issue Types<a href=\"#issue-types\" aria-label=\"issue types permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<hr>\n<h4 id=\"issue-types-1\" style=\"position:relative;\">Issue Types<a href=\"#issue-types-1\" aria-label=\"issue types 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/94c2af86fde11b597a2a92c29a3c5595/612f7/issue-types.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 13.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAs0lEQVR42h2Na0+DMBhG+f//TJfMMMY2NGYK9AbthiOxXYs5Nv1wct5b3qfS84oxM9+94Po1IKRmEIox0zvJInvUdWSYVqTMMzlib3esuxWb2TLNDucW5N1QHT4sdXvhrWl53de8ZHZ1Q3PqOJzOdN07x+OF9vxZdvuuLYFSG9Q0M0qTwzUqP/vxDyplV5QyiHwgswct0MtEShvxGYtTSoWQ+xgTPgSCz4Rnwef6N3q2v41/jnne7iZi1GMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira 이슈 타입\" title=\"\" src=\"/static/94c2af86fde11b597a2a92c29a3c5595/6af66/issue-types.png\" srcset=\"/static/94c2af86fde11b597a2a92c29a3c5595/69538/issue-types.png 160w,\n/static/94c2af86fde11b597a2a92c29a3c5595/72799/issue-types.png 320w,\n/static/94c2af86fde11b597a2a92c29a3c5595/6af66/issue-types.png 640w,\n/static/94c2af86fde11b597a2a92c29a3c5595/612f7/issue-types.png 773w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이슈 타입은 <code class=\"language-text\">Story</code>, <code class=\"language-text\">Bug</code>, <code class=\"language-text\">Task</code>와 같이 Jira 내에서 사용할 수 있는 이슈의 타입을 의미한다. 이런 이슈 타입들은 크게 <code class=\"language-text\">Standard</code> 타입과 <code class=\"language-text\">Sub-Task</code> 타입으로 나누어진다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">이슈 타입</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><strong>Standard</strong></td>\n<td>부모 이슈로써 자식 이슈를 가질 수 있는 이슈</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>Sub-Task</strong></td>\n<td>부모 이슈의 자식 이슈로만 존재할 수 있는 이슈. 단독으로는 존재 불가능</td>\n</tr>\n</tbody>\n</table>\n<p>현재 직장의 애자일 팀에서는 <code class=\"language-text\">Bug</code>, <code class=\"language-text\">Epic</code>, <code class=\"language-text\">Research</code>, <code class=\"language-text\">Story</code>, <code class=\"language-text\">Sustain</code>, <code class=\"language-text\">Task</code>, <code class=\"language-text\">Sub-task</code>로 총 7개의 이슈 타입을 사용 중이다. 각 이슈 타입의 의미에 대해서는 이슈 타입 밑에 적혀져 있는 설명을 읽어보자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/083cd514af9e20714b7ed1f6324fe2c1/bff4e/jira2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVR42nWSi26DMAxF+f8/3DRp09qttJDmBYnz4tYOWjVNzJIFxOHkXjuDU3dMSiNVoDQg5QLvF7Rtw2wClEtwoYI/D7O1DWbJnAUhNQx+VrDGIBEhp4RSCtZ15c0bRp1wmjMmm5+AvyFLPjZoARIDnV1htGFVHs45xEioDBXg5xTx8kV4vxJsaKB8QOTIdWNnDYWfHTizSkrEsNgz59yByheMpvDpu2Uc85DKhsh2BTxYdcM4XrgXrRfFskDlX+md5Vyo4b+Qg1auy96YBejv0FqDpIesLPNQ5F0UnibC6zfhPKcOjQeWZSWw3YX7SKx00OrKludeFJW11l2h9PAW8XYhtp156vtEj0Km638UautgrO1WJQQYQnhO+eOWcFYJkyt8Neqhwt+WH4L5ca4xipvJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira 이슈 타입 리스트\" title=\"\" src=\"/static/083cd514af9e20714b7ed1f6324fe2c1/6af66/jira2.png\" srcset=\"/static/083cd514af9e20714b7ed1f6324fe2c1/69538/jira2.png 160w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/72799/jira2.png 320w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/6af66/jira2.png 640w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/d9199/jira2.png 960w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/21b4d/jira2.png 1280w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/bff4e/jira2.png 2660w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>슬프게도 영어로 되어있지만 그냥저냥 읽을 수 있는 수준이다. 다른 사람들도 이렇게 영어로 설명을 읽어야하는 고통을 경험하게 만들고 싶지 않다면 우리가 희생해서 전부 한글로 번역해두면 된다. 이슈 타입들은 맨 마지막 컬럼인 <code class=\"language-text\">Actions</code> 컬럼의 메뉴를 통해 수정 및 삭제할 수 있다.</p>\n<hr>\n<ul>\n<li>Edit: 이슈 타입의 이름, 설명, 아이콘 등을 수정.</li>\n<li>Translate: 이슈 타입 이름과 설명의 번역 내용을 설정.</li>\n<li>Delete: 되도록이면 쓰지말자. 쳐다도 보지 말자.</li>\n</ul>\n<hr>\n<h4 id=\"issue-type-schemes\" style=\"position:relative;\">Issue Type Schemes<a href=\"#issue-type-schemes\" aria-label=\"issue type schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이슈 타입 스키마는 이슈 타입들을 묶어놓은 일종의 그룹이다. 각 프로젝트에 이슈 타입을 적용할 때 이슈 타입을 각각 할당하는 것이 아닌 이슈 타입 스키마를 할당하게 된다. 또한 이슈 타입 스키마 설정 페이지의 Projects 컬럼에는 해당 스키마가 어떤 프로젝트에서 사용되고 있는지 명시되어 있으므로 수정 및 삭제 시 반드시 이 부분을 확인하고 진행하도록하자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f485337e6a8a3f09e61456c591849c48/26781/jira3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+klEQVR42p1R7W7DIAzM+z9kpUxRphTaQAkBzMfNJlo6Vd2fWjohfPhsfEMiQs4ZtVagASlltNY6JGIizh1vSiknJ5Aa4alUlHrkhnH8wjRNWJYFu9+hFg3iJr8RY4T3viOEgL8hPfdY4EIB5WOAQR5JUWCgZKjxgtt9xacxvLbU+spfTJ8LSrHsRiA7uWnTJ372aH0/uTS0NwJMdV5OWcEwzzOstTDrCh8ilN1gjTkLUq4wvmCLFe1FUe4+VTz2g4/EpiilYFhA4NiU79V18VOQKgIXvYtuCnNiyimote4OOufYGMLVbHjY54TEE8p3/xMUERENfFJp+AFArnUBrrbOrgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira 이슈 타입 스키마 리스트\" title=\"\" src=\"/static/f485337e6a8a3f09e61456c591849c48/6af66/jira3.png\" srcset=\"/static/f485337e6a8a3f09e61456c591849c48/69538/jira3.png 160w,\n/static/f485337e6a8a3f09e61456c591849c48/72799/jira3.png 320w,\n/static/f485337e6a8a3f09e61456c591849c48/6af66/jira3.png 640w,\n/static/f485337e6a8a3f09e61456c591849c48/d9199/jira3.png 960w,\n/static/f485337e6a8a3f09e61456c591849c48/21b4d/jira3.png 1280w,\n/static/f485337e6a8a3f09e61456c591849c48/26781/jira3.png 2664w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이슈 타입 스키마도 이슈 타입과 마찬가지로 맨 마지막 컬럼인 <code class=\"language-text\">Actions</code> 컬럼의 메뉴를 통해 이슈 타입 스키마를 수정, 삭제, 할당, 복사할 수 있다.</p>\n<hr>\n<ul>\n<li>Edit - 이슈 타입 스키마의 이름, 설명, 기본 이슈 타입, 사용할 이슈 타입의 종류를 설정.</li>\n<li>Associate - 이슈 타입 스키마를 프로젝트에 할당.</li>\n<li>Copy - 이슈 타입 스키마를 복사.</li>\n<li>Delete - 이슈 타입 스키마를 삭제.</li>\n</ul>\n<hr>\n<h4 id=\"sub-tasks\" style=\"position:relative;\">Sub-tasks<a href=\"#sub-tasks\" aria-label=\"sub tasks permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>서브 태스크들의 이슈 타입을 관리한다. 아무것도 설정하지 않았다면 기본적으로 제공해주는 <code class=\"language-text\">Sub-task</code>라는 이름의 이슈 타입만 사용하게 되어있다.</p>\n<h3 id=\"workflows\" style=\"position:relative;\">Workflows<a href=\"#workflows\" aria-label=\"workflows permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>워크 플로우는 지라 프로젝트 내 이슈들의 작업 흐름을 의미한다. <code class=\"language-text\">To Do</code>, <code class=\"language-text\">In Progress</code>, <code class=\"language-text\">Done</code> 등이 여기에 해당한다.</p>\n<hr>\n<h4 id=\"workflows-1\" style=\"position:relative;\">Workflows<a href=\"#workflows-1\" aria-label=\"workflows 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a348840b3719021e8e3475e9d94505a9/a30c9/jira4.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVR42oVRi26DMAzM/38lhU3TBC0k5O2Em82rq6qxkywj7JztOzVbD+cjBMuCFyz8o9a65itI/ehR3nsMwx3TpJEz7cWt0fqM70fAYDJsLChlqx1R9z7jCdoRMi1Qxhi0bYvb7Yau65h4Oie7UPB5z+iGtOavMSOX5ddmW9auoteEmHdCIWuaZo1xHJ+EkfDBZG2fVlKJRO+EkytPQiKCcxZaawh5Sul8QKUyaYXhTWcOGypr+q6nDPGponBNiSmTsf+IfW3KJur2qebZ4vEYIeZYayEDDseICkJMPLm+OHny7NkGvpJNk7KSU0W7tmvR9z3MPPOp5Tl4uV5MMO4aimEqxrgaIe7mnFmjcm6SqL6Y8BcC6xdyXU/+ARdFwZJW9IkSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflows\" title=\"\" src=\"/static/a348840b3719021e8e3475e9d94505a9/6af66/jira4.png\" srcset=\"/static/a348840b3719021e8e3475e9d94505a9/69538/jira4.png 160w,\n/static/a348840b3719021e8e3475e9d94505a9/72799/jira4.png 320w,\n/static/a348840b3719021e8e3475e9d94505a9/6af66/jira4.png 640w,\n/static/a348840b3719021e8e3475e9d94505a9/d9199/jira4.png 960w,\n/static/a348840b3719021e8e3475e9d94505a9/21b4d/jira4.png 1280w,\n/static/a348840b3719021e8e3475e9d94505a9/a30c9/jira4.png 2614w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>워크 플로우를 자세히 보려면 <code class=\"language-text\">Actions</code> 컬럼의 <code class=\"language-text\">View</code> 버튼을 클릭하면 된다. 워크 플로우는 다이어그램과 텍스트 2가지 방식으로 볼 수 있는데 텍스트 방식은 작업의 흐름을 읽기가 불편하니 다이어그램 방식으로 보는 것을 추천한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/90703cf619057cf05e820e1a1c7778bd/53639/jira5.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVR42q2Ty0vDQBDG+1creJWeFD16t3iqWh8gVkR6UUtB1FJQK7SWtCVJS9K8H7ubz80moQ8aKpiBgQ07+fh+M7MlpEEpg++H+G+UskNICGzbLU6wqBCCjEVwvQCm5XB0CkIobCd2GyGK8pMxtl6Q8P5Jowk+vgdw3AAWF+v2pI1uYtFCkXMFn79sVBpT1Joaqk8aHJ9B0w2O7SEjoLwthEaiPRsFz5s6dk6G2L+UUa6OYTgMijqFbli5P/4JebEgO/YVH9uVIcqnY2wdS7h9nSEbZK5gjOMFfLFDhoAkhVRMMII6C0Ub6m+GIHn/SXY1vg8ZTevmZkqr7tatxyrFYu1ah5pNcVRXeKpodMwlJJYOY56Jo/t+B4etG1x1X2IQDIYKv6OpoEVwcC1j70LGQ9tc6mHeIO56bew+1nD22RLfI3kiHkXhT+8Xv5VDAKkxw+IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflow diagram\" title=\"\" src=\"/static/90703cf619057cf05e820e1a1c7778bd/6af66/jira5.png\" srcset=\"/static/90703cf619057cf05e820e1a1c7778bd/69538/jira5.png 160w,\n/static/90703cf619057cf05e820e1a1c7778bd/72799/jira5.png 320w,\n/static/90703cf619057cf05e820e1a1c7778bd/6af66/jira5.png 640w,\n/static/90703cf619057cf05e820e1a1c7778bd/d9199/jira5.png 960w,\n/static/90703cf619057cf05e820e1a1c7778bd/21b4d/jira5.png 1280w,\n/static/90703cf619057cf05e820e1a1c7778bd/53639/jira5.png 1358w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>워크 플로우는 <code class=\"language-text\">Status</code>와 <code class=\"language-text\">Transition</code>으로 구분된다. <code class=\"language-text\">To Do</code>, <code class=\"language-text\">Done</code>과 같은 사각형이 <code class=\"language-text\">Status</code>를 의미하고 그 사각형들을 이어주는 화살표는 <code class=\"language-text\">Transition</code>이다. 워크 플로우를 수정하려면 우측 상단의 <code class=\"language-text\">Edit</code> 버튼을 누르면 된다. 그러면 다이어그램 UI를 사용하여 워크 플로우 수정 화면이 노출된다.</p>\n<p>PowerPoint나 Google Draw.io와 유사한 UX를 제공해주기 때문에 처음이라도 무리없이 수정할 수 있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 109.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVR42q1Vy27TQBT1B3UBCxCIPwEJCSQ2qBJSpUplhWCNBAIJ2FDBogsEiKy6YMM7pS2itElK0tS1nXdTx4/EcWzH9uGOY6c2RVZKMtLVjGfkc++cc67NIWX4vh/EaQaHGY9UQFXtQqGYCaDruhCkBnihFqxnUmFH0aHpxv9XyPhn4YU6aF0Dtu1Mf+VIWE3vjQEnFTsB2O8P0O310TNMGLQ+PFLhOMPgzPO8iYI7FsFDhxQdUEWWZVNldjBHiWRFg6J1EyETx+yd+B4XGVfTdfAHAl3NA2Gjb/uwhz4cErgp92DZkyk9Bmy329jY3AyyVpoa8uUmdopV/CxI2OVbkOoKLEJnCSN+v67voNGSQ0r8gOcTHGa3eAI4xHZ+D+8/biCz+hm/ciXkKEGzY8L3RpWW9iUs3HmMT9mtMWBClHjfypqJSttEQzYoRuuObp64HhPs717/hw8JGMe2GYTC+FP5MJz1bn86YzMemMLMh/yBCLFSQ7FUhiBWYA6s4CziKv4O819qhY5jgy8XIYkC+P09VCWBPDmYvMIo68oXBReXfuPyAwHXn9Zx9ZGIa0+quPGsjisPBVxYKuLlh6OwMoRqV/BjuwQ77KgA0A0B763UwF36hrmbOczN53B2oYBziwWcX9zFmVv54Oz2czFg2RmO7PPi1Sru3l+GSgKOASPl+ZaFzLqKzHcVbyleZxW8YbFGz2sK3tFeuWklPhbMFXFeU7+HPt0r8pkfI/4UKpMgrH/DYP1rO15i7XrpP7I/3JyeuErfne4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflow diagram editing\" title=\"\" src=\"/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png\" srcset=\"/static/6f4d8fb99d8595800cd1210f425d514f/69538/jira6.png 160w,\n/static/6f4d8fb99d8595800cd1210f425d514f/72799/jira6.png 320w,\n/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png 548w\" sizes=\"(max-width: 548px) 100vw, 548px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Status를 클릭하면 Status의 정보를 수정할 수 있는 창이 노출되는데, 이 창 내부에서 <code class=\"language-text\">Allow all statuses to transition to this one</code>에 체크를 하면 이슈가 어떤 Status를 가지고 있는지와 관계없이 자유롭게 현재 Status로 변경할 수 있도록 설정된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d54d49db136163f93da3d06d5db0ac4/889a4/jira7.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVR42qVUaXOCMBT0//+yfnF6aXVA5RCCHIIgypVkm0SxFRkr9s0sDMzLZt85gjDOOShlAlSBMTYYkkNiJB9N01x+SJMOLfkQKEJ5WBrxI0xmS7xNdITbHYaaFCW5zoQcUZzhQxC+TxdwSHBSelZ9D72EUm7XfjsPUkiVQoqxBcydEvrCgO36cLwAK4tgZbrQDQem7cH1QvWtLdeY6xaSXXa5/DpkThHmgBsdoC8tfM5WMGyiDkbbFNskRZrlyPIDdukesSCKRJ6LsuonbEM+FiX8MFbqyCZSitg5dN7B3aK0hEPy1nW9ImSMqsY21xsRqoe1G6hL9kcKwy+xSWoEaQMvEYhr7At6X6FEXTeqCEvjVAQm8poXDFP7CI2UMINKvedOocjRCf3PtvlnY0MUIsTLeIpXMSlfmqkKJE2mgjF+g25ztztg1A52ts9Vy9iOB2tNRArqy1w/Mi1XhOAMQUaheY3CzK1Akqa3mg+FzAR7WXP4SSWqWCHY1UgP9DnCny6X64dd4an11Tb0TeIf2DR9+AYG8IFFk2xsfQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Allow all statuses to transition to this one\" title=\"\" src=\"/static/6d54d49db136163f93da3d06d5db0ac4/6af66/jira7.png\" srcset=\"/static/6d54d49db136163f93da3d06d5db0ac4/69538/jira7.png 160w,\n/static/6d54d49db136163f93da3d06d5db0ac4/72799/jira7.png 320w,\n/static/6d54d49db136163f93da3d06d5db0ac4/6af66/jira7.png 640w,\n/static/6d54d49db136163f93da3d06d5db0ac4/889a4/jira7.png 658w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><code class=\"language-text\">Transition</code>을 클릭하면 Transition 설정 창이 노출된다. 이 창에서는 Transition의 <code class=\"language-text\">이름</code>, <code class=\"language-text\">속성</code>, <code class=\"language-text\">트리거</code>, <code class=\"language-text\">조건</code>, <code class=\"language-text\">유효성 검사</code> 등을 설정할 수 있다. 특히 트리거와 조건은 굉장히 유용하게 사용할 수 있다.</p>\n<hr>\n<ul>\n<li>트리거 - 임의의 이벤트가 발생하면 자동으로 해당 Transition을 실행한다. (e.g. Pull Request가 생성되면 자동으로 이슈를 Code Review 상태로 변경)</li>\n<li>조건 - 이 Transition이 실행되기 위한 조건들을 설정한다. (e.g. 이슈를 Done으로 바꾸려면 이슈에 할당된 모든 Reporter가 동의해야한다)</li>\n</ul>\n<hr>\n<p>이후 모든 수정을 마쳤다면 상단의 <code class=\"language-text\">Publish Draft</code>를 클릭하여 설정을 배포하면 된다. 이때 이전 워크플로우를 백업할 것이냐고 물어보는 창이 노출되는데 백업을 할지말지는 그냥 본인 판단하에 알아서 하면된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/56c289065a19ebda8681f8bb1601d1ce/6aca1/save.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABoyx68geFf//EABsQAAICAwEAAAAAAAAAAAAAAAECAAMREyEi/9oACAEBAAEFAtPkUqYUqERjnojoGb//xAAWEQEBAQAAAAAAAAAAAAAAAAAAIkH/2gAIAQMBAT8BxL//xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/AZtr/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERITH/2gAIAQEABj8C2nCM0tGz/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPyFDbCXtOjMiPB+scDVzqrHk9qT/2gAMAwEAAgADAAAAEAvv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAwEBPxAhBgnq7//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEUH/2gAIAQIBAT8QSdbeb//EABwQAQEAAgIDAAAAAAAAAAAAAAERAEExUSGBsf/aAAgBAQABPxAS+4fmsZYxqkru45QDS3BiOC955bn0ie94pSXZOM//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"save\" title=\"\" src=\"/static/56c289065a19ebda8681f8bb1601d1ce/c08c5/save.jpg\" srcset=\"/static/56c289065a19ebda8681f8bb1601d1ce/0913d/save.jpg 160w,\n/static/56c289065a19ebda8681f8bb1601d1ce/cb69c/save.jpg 320w,\n/static/56c289065a19ebda8681f8bb1601d1ce/c08c5/save.jpg 640w,\n/static/56c289065a19ebda8681f8bb1601d1ce/6aca1/save.jpg 650w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>편집한 이슈는 내 마음 속에 저장!</small>\n</center>\n<p>그리고 한번 <code class=\"language-text\">Edit</code> 버튼을 눌러 워크플로우 수정 화면으로 들어가면 아무 것도 수정하지 않았더라도 Jira는 현재 상태를 자동 저장한다. 그러니까 아무것도 수정하지 않았더라도 상단의 <code class=\"language-text\">Discard Draft</code> 버튼을 클릭하여 수정 상태를 종료해주도록 하자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/21b4d/jira8.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAw0lEQVR42oWOUW+DMAyE+f9/bZqmSmthHVsYgoJonBAIoXFiZ+m0p/Vhp5Plh/N3LlJiihtRDCEgYvjR70J8Q/aRYyRE8phDFIl9uDulVDCFHV53Z5XSUl4BQMo8QCswW+jAT0u0ehta6Ftlpnl1cdSYzZyKDMgwojvpP/3NFHpen17Kw7H+aLq2H8tzc6yEBF2eTp+NGOw02muv9sl4fjw2i30+VG91W56/qvemFp3Kr7ldCHEZLotfl9s6OzQuPDZ/A85yHlYJPn49AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira discard draft\" title=\"\" src=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/6af66/jira8.png\" srcset=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/69538/jira8.png 160w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/72799/jira8.png 320w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/6af66/jira8.png 640w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/d9199/jira8.png 960w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/21b4d/jira8.png 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h4 id=\"workflow-schemes\" style=\"position:relative;\">Workflow schemes<a href=\"#workflow-schemes\" aria-label=\"workflow schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Jira는 프로젝트의 이슈 타입마다 다른 워크 플로우를 사용할 수 있게끔 해준다. 워크 플로우 스키마는 이슈 타입마다 워크 플로우를 할당하는 그룹이다.</p>\n<hr>\n<ul>\n<li>Bug: <code class=\"language-text\">To Do → In Progress → Resolved</code></li>\n<li>Story: <code class=\"language-text\">To Do → In Progress → Test → Review → Deployed</code></li>\n<li>Research: <code class=\"language-text\">To Do → In Progress → Done</code></li>\n</ul>\n<hr>\n<p>이런 식으로 이슈 타입마다 다른 워크 플로우를 적용할 수 있다.</p>\n<h3 id=\"screens\" style=\"position:relative;\">Screens<a href=\"#screens\" aria-label=\"screens permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>스크린은 스크럼 보드에서 이슈를 클릭했을 때 나오는 이슈의 자세한 정보를 보여주는 화면을 의미한다. 이 메뉴는 다른 메뉴들에 비해 직관적이므로 설명보다는 예시 스크린샷을 주로 보여주겠다.</p>\n<hr>\n<h4 id=\"screens-1\" style=\"position:relative;\">Screens<a href=\"#screens-1\" aria-label=\"screens 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>스크린 메뉴에서는 해당 스크린에 들어갈 탭과 필드들을 설정할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e3096f52b849f0dde2d8cbff31eced48/136a2/jira9.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 151.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAABYlAAAWJQFJUiTwAAACb0lEQVR42q1UaW/TQBTs//9JfAIhPlAhFUFJ2ly+cvi+1rcTDzsvTUSoKG1cS5O3steTefPGezMMAxarNaZzEw9zC0VZg9f+MOBwOIDP33Ld8GdpbfBzusSvRwNldSR8I88lYRhlsB0Ps4UDy3YxX1owTAcPMxNZXpwVU+3hhMMJhwsIoelt8en+Fh/uvuDz/Q98nWzw8buFbxMTbdv+pWF46mD4t0JVF7CjLdzch58l2AQFLF8hUbVYUJQVclXKWuk1fSaoPoozxEmOKMlkLYSlfuj5McIwQxCmcL1Q11iqF8TwwwRbN5QXXD+SvaymvcNs5cB0XKysLQwNIXS22r+ljSvn8Lzltuv1YFJR4GtFcZoLIt1KGCWCPFdSA62W7SeZkla5j+8muuZFeSSs6kYkUyXjY9hbTHSEZgsLC8vF/SrC1IzxaCeYGKHsZcS4Z65bZr29m0i9OU2s0dOs6lbI66aVARBN26HqBhTNEarZ6/sNVFEJquq4nwOi8jMhkec5XNfVwwkFjMwu6WAFLSLV/xGa/3jIQPJqmkZIlVL6nyvs93ukRYdYtVBVp/ft5d5LEMKuaxEEgcD3fSEbNWUyk6QsS1FIpZffBV4dqSeFnXi2Xq/Fw5MFIxT26PtOo79QdzUhyXzfw263w2azQZZlLx4Ar/aQKIoCdV2PU0gPoygSHzlprke23IuyOI6RpqlguPLIPhMyzCQ8KR1FyJZJSLLnJ/SVCjkQKnyX2FAhh2HbtrQ7mpCxYatUSfJ3Ueh5HhzHgWEYo1SePaR3xLsM5eihL4fDmFBfeMhg8xtmvTaDFy3z6+DBMCbUJPwNjYcqGt12xA4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jira9\" title=\"\" src=\"/static/e3096f52b849f0dde2d8cbff31eced48/6af66/jira9.png\" srcset=\"/static/e3096f52b849f0dde2d8cbff31eced48/69538/jira9.png 160w,\n/static/e3096f52b849f0dde2d8cbff31eced48/72799/jira9.png 320w,\n/static/e3096f52b849f0dde2d8cbff31eced48/6af66/jira9.png 640w,\n/static/e3096f52b849f0dde2d8cbff31eced48/136a2/jira9.png 884w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<h4 id=\"screen-schemes\" style=\"position:relative;\">Screen Schemes<a href=\"#screen-schemes\" aria-label=\"screen schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이슈를 <code class=\"language-text\">생성할 때</code>, <code class=\"language-text\">수정할 때</code>, <code class=\"language-text\">열람할 때</code> 각각 다른 스크린을 할당할 수 있다. 기본적으로 <code class=\"language-text\">Default</code>로 설정되어있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/a13c9/jira10.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVR42pWSTW8SURSG+Xf+Ejca48LEaFjYkLgyMaFJ0QLFtqkRh7YpOLT4wUc/YKGxLly50YTaGQpTGGYGKMydebxMIcHP4knenHvOnPvck7wTerS8w8bOIbnXVXbf1VDf1sjPatqb+aa+qcr5o5+ULRyymMgQ2q8dI4SgY1q0TRvL7gWynR5dy5E9C8vp0+5YODKbXZv+4IJp+L4f5DFjNb1LqFw9xukPOdGanDYMtLNz9LM2p7ohey0pg0azjaa3aBod6t8bEm7/GfgifwmUJT1HvtyzGV4MghpfXOZAHn+L3zZUi+95XNAIv/xKZPsb4c06dzd17m3p3Je6o2g8LWq4Ygz18Tz/38BMrshC9DmRJYWHMYXbkSfceBDj5kKMW/J8PRxlcTU7/4Z7xSp5Ncf62gbptEIymSIRT/AslWIluUIyEedgvzI/sFL7xHDkoklDmoZJ69yc5G5ggiHdNbtO4LwQ3tXA0tHHoOG6IrgwlufJLOUKEQyOXJeRfNTz/RnQRPz620yAvu9zVUz9ODGGXIt8Ifehgz0Q6B03WOK/gdMRsydYKrT4XO8H9UjMbLi8nmXrVZlMrjSXlGyJbbVMpXKAulcJeuP7SrZINK7wA5sQXxcBXMg+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Screen schemes\" title=\"\" src=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/6af66/jira10.png\" srcset=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/69538/jira10.png 160w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/72799/jira10.png 320w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/6af66/jira10.png 640w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/d9199/jira10.png 960w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/a13c9/jira10.png 1178w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이슈 생성은 보통 실무자들이 플래닝할 때 생성하는 경우가 많으므로 빠르게 생성하기 위해 최소한의 필드만 입력하도록 하고 이후 PO들이 다시 이슈의 내용을 검토하며 자세히 작성하는 경우에 사용하면 좋다.</p>\n<h4 id=\"issue-type-screen-schemes\" style=\"position:relative;\">Issue Type Screen Schemes<a href=\"#issue-type-screen-schemes\" aria-label=\"issue type screen schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이슈 타입마다 다른 스크린 스키마를 할당할 수 있다. 기본 값으로 <code class=\"language-text\">Default 이슈</code>와 <code class=\"language-text\">Bug 이슈</code>로 구분되어있다. <code class=\"language-text\">Bug</code> 같은 경우는 이슈 특성 상 에스티메이션을 할 수 없는 경우도 많고 뭔가를 개발하는 것이 아닌 고치는 것이기 때문에 이슈에 필요한 정보가 일반 이슈들과는 많이 다르기 때문에 나누어져 있는 것 같다.</p>\n<blockquote>\n<p>참고로 스크린이 아니라 <strong>스크린 스키마</strong>를 할당하는 것이다.</p>\n</blockquote>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5e79ac71d05deb907fceea9d6576399c/f02b9/jira11.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVR42oWRCZKEIAxFuf8xZ2wX0FYWcWH5nYCz9lQPVa9+EpIYorB+h3Mexnq41cMWeyV7K361SdeAxWcsa4JxG7RxJde6tdaQcq5w1LDtJaEwqAm3TqJjW07ohwlvzVBirVzw3s9olUbTKTQt14zohpF8WXxG7PuBfjTo5xPdnex5v/RAiBExpksrKaUSq3zdh1DvxXkGCnAw4yTCN/46OXOjUMj5OUdINf6qQElkUvoJx/wWcJOOnm6hlh2ad+tC0UhDCCUl/RQHrTWMMfDe49XhybVPWPcMQ2p8hN2q8sBivt/Llz/2w7w6R8iQOmA0AcpUHcnfjlon/mvwvEMg0vM/iewD6VrnAwD/b/kXTk0aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Issue Type Screen Schemes\" title=\"\" src=\"/static/5e79ac71d05deb907fceea9d6576399c/6af66/jira11.png\" srcset=\"/static/5e79ac71d05deb907fceea9d6576399c/69538/jira11.png 160w,\n/static/5e79ac71d05deb907fceea9d6576399c/72799/jira11.png 320w,\n/static/5e79ac71d05deb907fceea9d6576399c/6af66/jira11.png 640w,\n/static/5e79ac71d05deb907fceea9d6576399c/d9199/jira11.png 960w,\n/static/5e79ac71d05deb907fceea9d6576399c/21b4d/jira11.png 1280w,\n/static/5e79ac71d05deb907fceea9d6576399c/f02b9/jira11.png 1554w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"fields\" style=\"position:relative;\">Fields<a href=\"#fields\" aria-label=\"fields permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>스크린에 들어가는 항목들을 수정할 수 있는 항목이다. <code class=\"language-text\">Custom Fields</code> 메뉴에서 항목을 추가하고 위에서 설명한 <code class=\"language-text\">Screens</code>에서 불러와서 사용하면 된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/90f13ac4e9f2b21060002914ea47404a/b4098/custom-fields.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1ElEQVR42p1T7Y6kIBD0/Z9v/15mb9aMn4gIKgLaV4XrZjbZXDLrpIQBrO6qbgpjrHyUtaS0y2+fLQRZvZd58VI4N8ujaqXtlDzqXtL+GvGB32SdaCRmJivFtgVMnDi3yIjFfX890xBizjLEKAUJIuTGmPLoEYBgoJTSy+SZMIDsQkyfQLRfEW7bJgvMPI4jyyVIdCFn/oll9dl8FnCeVxnhmUUNJlh2ricpzGjkfr9L0zTStihO08owaNF6zBjHE8YYqes6n60w8uztdpOyLOXR9PL3oXBmlMKDues66ftelOrzqLX+InrGMAxfewxQVRXwkKod5O0PO0WDEDK6tsOfDpLWLJn+XUjXCDkz5Glkb60VthvJLVqG+4uPkI0q07vLL87/3x5oYATlOWKaJrTc9L0oy7LgppRSAxre8INneL8KC0fQHmZGMpLTHko/GxzAq+AGC2Pgy4RNi4iUxDmjW1Tykk07ruz4zIvNZy/CnKFHFqyYQpUNfGRDM8hPN4akszs9CzHgGysBvn2TTBlKKdFdKw6Zkow49iNrePaV6zMs4hJJjXZnAuhRu/BCHJAMb0b02wQyB3kMEEP8sSj0Ww0q310G4nzQCmRR3ptVZp/kH9c1kkK0VMOaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Custom fields\" title=\"\" src=\"/static/90f13ac4e9f2b21060002914ea47404a/6af66/custom-fields.png\" srcset=\"/static/90f13ac4e9f2b21060002914ea47404a/69538/custom-fields.png 160w,\n/static/90f13ac4e9f2b21060002914ea47404a/72799/custom-fields.png 320w,\n/static/90f13ac4e9f2b21060002914ea47404a/6af66/custom-fields.png 640w,\n/static/90f13ac4e9f2b21060002914ea47404a/b4098/custom-fields.png 816w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>상단의 <code class=\"language-text\">Add custom field</code>를 누르면 다양한 폼을 선택할 수 있다. 폼 종류는 <code class=\"language-text\">Standard</code>와 <code class=\"language-text\">Advanced</code>가 있는 데, 필자는 <code class=\"language-text\">Standard</code> 밖에 사용을 안해봤다. 사실 <code class=\"language-text\">Standard</code> 폼만 사용하더라도 왠만한 정보는 전부 표현할 수 있다.</p>\n<h3 id=\"issue-features\" style=\"position:relative;\">Issue Features<a href=\"#issue-features\" aria-label=\"issue features permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<hr>\n<h4 id=\"time-tracking\" style=\"position:relative;\">Time Tracking<a href=\"#time-tracking\" aria-label=\"time tracking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>타임 트래킹은 이슈를 진행할때 남기는 워크 로그를 통해 해당 이슈를 수행하는 데 얼마나 걸렸는지를 추적해주는 기능이다. 근데 워크 로그를 매번 남기는 게 생각보다 번거로운 작업인지라 팀 내에 정착이 잘 안됐다. <small>(다들 코멘트를 애용하심…)</small></p>\n<h4 id=\"issue-linking\" style=\"position:relative;\">Issue Linking<a href=\"#issue-linking\" aria-label=\"issue linking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>이슈 링킹에서는 이슈들의 관계를 정의하는 필드에 들어갈 내용을 수정할 수 있다. 하나의 관계에는 자동태와 수동태로 두가지 상세 관계를 설정할 수 있다. 기본적으로 Jira는 6가지의 상태를 제공해준다.</p>\n<hr>\n<ul>\n<li>Blocks(병목) - <code class=\"language-text\">blocks</code> / <code class=\"language-text\">is blocked by</code></li>\n<li>Cloners(복제) - <code class=\"language-text\">clones</code> / <code class=\"language-text\">is cloned by</code></li>\n<li>Duplicate(중복) - <code class=\"language-text\">duplicates</code> / <code class=\"language-text\">is duplicated by</code></li>\n<li>Issue split(분리) - <code class=\"language-text\">split to</code> / <code class=\"language-text\">split from</code></li>\n<li>Problem/Incident(문제, 원인, 사건 등) - <code class=\"language-text\">causes</code> / <code class=\"language-text\">is caused by</code></li>\n<li>Relates(관계됨) - <code class=\"language-text\">relates to</code></li>\n</ul>\n<hr>\n<p>만약 A 이슈와 B 이슈가 있을 때 A 이슈가 반드시 먼저 끝나야 B 이슈를 작업할 수 있는 상황이 있을 수 있다. 예를 들면 A가 DB 스키마 변경 작업이고 B가 REST API를 개발하는 작업과 같은 상황이다. 모델이 어떻게 변경될지 모르니까 섣불리 API를 개발할 수 없지 않은가?</p>\n<p>이런 경우 <code class=\"language-text\">A blocks B</code> 또는 <code class=\"language-text\">B is blocked by A</code>로 표현할 수 있다. 만약 A 이슈에 B 이슈로 통하는 <code class=\"language-text\">blocks</code> 링크를 건다면 B 이슈에 자동으로 <code class=\"language-text\">is blocked by</code>가 추가된다.</p>\n<p><strong>A blocks B</strong>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBElEQVR42q2S2XLCMAxF/f//1udSCgMkOHtiZ3USLxc5NEy3hwLVzBmNJc+1JItt3k/YHc4L+xPHdh8SAd6IthvgzTn82dghiBElBUKeIiBKUaPrFeqmwzxr3GuMxwUq0SDLBc5RjkFNDwndBB31c+Vrwj0qGKUFPIoq+w9jQjaQNC9Zt+gH9byg++jVe2vd84KcfjhOy+VjVuEb38/r459m7EOeiT5y1hqsrORSmbX2rkpWoR8VHsWE1s+QqGgH81IiK2iFeAZBc/XnhDrwu5pkFcqK7lBeyBZqnLGNFF52DV7DfnmAjdrAEJrK1eT9Dq7oJX7N/RYzxmKcDIbRQJH3I7kAzRdfm9EslwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"blocks\" title=\"\" src=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png\" srcset=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/69538/blocks.png 160w,\n/static/6adb2523b53c3730e2b2e6d9adbc2fe4/72799/blocks.png 320w,\n/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png 548w\" sizes=\"(max-width: 548px) 100vw, 548px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p><strong>B is blocked by A</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTklEQVR42q1T127DMAzU//9bH/rUFEHbOMtT1rBleci+knKaPnQgSCvgQE2Sx6PE/pgjOWbYvh6w2SY4Z1W0T4S8rPGyO0Wc0hJv+zSe8Xqz3eGUlXHOPvjc9wPEw+MzskKikIqclWhah1pZFJXCME7xkrEtNKHWNs6NdRRMQdG6dR2c8xiGEfM8Q1S1xhQClmVBuNh5XnDvEAmly9FWemeUUsM23Q/X10AU84ovDmfaXS7glDm7zz1cz27OkCmneRXr8x9DFEQ1OaTYEdKcxCH6bEsSicVh9Vg07/vbHDLFQFRDmDGSqqws23EKUaxhWNe3CiVKosxZfbTJvYMDek99qLRBRjXUpv1z/Vg8cbQTpHHUKg6GIJWBMg2qmqxufnUwUVmMsZBSUq0rSHojTB/QUZePBNd56nwfbU8i+L6/tNL34I/AYjm3JsQ/5h2Npqfp+SHSdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"is blocked by\" title=\"\" src=\"/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png\" srcset=\"/static/ac3602b8a48fe865370cb89700eed5b8/69538/is-blocked-by.png 160w,\n/static/ac3602b8a48fe865370cb89700eed5b8/72799/is-blocked-by.png 320w,\n/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png 535w\" sizes=\"(max-width: 535px) 100vw, 535px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이슈 링킹 기능은 해당 이슈 담당자로 하여금 이 이슈가 어디서 파생된 이슈인지 혹은 어떤 작업이 선행되어야 하는지 명시적으로 알려줄 수 있는 기능이므로 잘 사용하면 커뮤니케이션 비용을 상당히 아낄 수 있다.</p>\n<p>이상으로 JIRA 프로젝트 이슈 커스터마이징하기 포스팅을 마친다.</p>","fields":{"slug":"20190616-jira-customizing-issue","path":"/2019/06/16/jira-customizing-issue/","lang":"ko"},"frontmatter":{"title":"JIRA 프로젝트 이슈 커스터마이징하기","subTitle":"애자일 팀을 위한 Jira 이슈 관리 최적화 방법","date":"Jun 16, 2019","categories":["소프트스킬","튜토리얼"],"tags":["Jira","지라","애자일","Agile","협업","Atlassian","스토리 포인트","Story Point","Estimation","에스티메이션","Jira 이슈"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/1646c2abb370108d4e92353ae1304230/d803c/jira-logo.png","srcSet":"/static/1646c2abb370108d4e92353ae1304230/d803c/jira-logo.png 320w,\n/static/1646c2abb370108d4e92353ae1304230/2a1fd/jira-logo.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/1646c2abb370108d4e92353ae1304230/fc5c5/jira-logo.webp 320w,\n/static/1646c2abb370108d4e92353ae1304230/e9225/jira-logo.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/1646c2abb370108d4e92353ae1304230/01fb2/jira-logo.png","srcSet":"/static/1646c2abb370108d4e92353ae1304230/01fb2/jira-logo.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/1646c2abb370108d4e92353ae1304230/b384d/jira-logo.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"f69a2e74-d6a6-5489-bb38-a3026e949bf9","tableOfContents":"<ul>\n<li>\n<p><a href=\"#vue-server-side-rendering%EC%9D%98-%EA%B5%AC%EC%A1%B0\">Vue Server Side Rendering의 구조</a></p>\n</li>\n<li>\n<p><a href=\"#server-side-rendering\">Server Side Rendering</a></p>\n<ul>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EA%B0%80-%EC%84%9C%EB%B2%84%EC%97%90-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%9A%94%EC%B2%AD\">클라이언트가 서버에 리소스 요청</a></li>\n<li><a href=\"#nginx%EA%B0%80-express%EA%B0%80-%EB%9D%84%EC%9B%8C%EC%A0%B8%EC%9E%88%EB%8A%94-%ED%8F%AC%ED%8A%B8%EB%A1%9C-%EC%9A%94%EC%B2%AD%EC%9D%84-%EC%84%9C%EB%B9%99\">nginx가 Express가 띄워져있는 포트로 요청을 서빙</a></li>\n<li><a href=\"#express-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%8B%9C%EC%9E%91\">Express 라우팅 시작</a></li>\n<li><a href=\"#code-classlanguage-textserver-entryjscode-%EC%8B%A4%ED%96%89\"><code class=\"language-text\">server-entry.js</code> 실행</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-code-classlanguage-textvue-routercode-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A7%84%ED%96%89\">서버의 <code class=\"language-text\">vue-router</code> 라우팅 진행</a></li>\n<li><a href=\"#vue-server-renderer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-html-%EB%A0%8C%EB%8D%94%EB%A7%81\">vue-server-renderer를 사용하여 HTML 렌더링</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EA%B0%80-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EB%A1%9C-%EC%9D%91%EB%8B%B5\">서버가 클라이언트로 응답</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#client-rendering\">Client Rendering</a></p>\n<ul>\n<li><a href=\"#code-classlanguage-textclient-entryjscode-%EC%8B%A4%ED%96%89\"><code class=\"language-text\">client-entry.js</code> 실행</a></li>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%B4%88%EA%B8%B0%ED%99%94-%ED%95%A8%EC%88%98-%EC%8B%A4%ED%96%89\">클라이언트 어플리케이션 초기화 함수 실행</a></li>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EC%9D%98-code-classlanguage-textvue-routercode-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A7%84%ED%96%89\">클라이언트의 <code class=\"language-text\">vue-router</code> 라우팅 진행</a></li>\n<li><a href=\"#appmount---%EB%A0%8C%EB%8D%94-%EC%A2%85%EB%A3%8C-vue-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4-%EC%8B%9C%EC%9E%91\">app.$mount -> 렌더 종료. Vue 라이프사이클 시작</a></li>\n</ul>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 Universal Server Side Rendering에 이어서 VueJS의 공식 라이브러리인 와 Express를 사용하여 SSR(Server Side Rendering) 어플리케이션을 개발한 과정과 운영 환경에서 생겼던 문제, 그리고 그 문제를 어떻게 해결했는지 적어보려고 한다.","html":"<p>이번 포스팅에서는 <a href=\"/2018/09/25/universal-ssr\">Universal Server Side Rendering</a>에 이어서 VueJS의 공식 라이브러리인 <code class=\"language-text\">vue-server-renderer</code>와 Express를 사용하여 SSR(Server Side Rendering) 어플리케이션을 개발한 과정과 운영 환경에서 생겼던 문제, 그리고 그 문제를 어떻게 해결했는지 적어보려고 한다.</p>\n<!-- more -->\n<p>필자는 Frontend 개발자로 일하면서 Backend 프레임워크를 건드릴 일이 사실 거의 없었다. 그러나 필자의 현 직장에 SSR 서버를 필자가 도입하자고 주장하였고, 따라서 오너쉽도 필자에게 있었기 때문에 클라이언트 환경과 전혀 다른 서버의 작동방식과 여러 문제점에 대해서 상세하게 알고 있어야 할 필요가 있었다.</p>\n<p>보통 Frontend 개발자는 클라이언트에서 작동하는 어플리케이션을 개발하기 때문에 서버에서 작동하는 어플리케이션에서 발생할 수 있는 <small>(조금만 생각해보면 당연한)</small>문제에 대해서 의외로 쉽게 놓치고 지나갈 수 있다고 생각한다.</p>\n<p>그래서 두번 다시 이런 실수를 반복하지 않도록 문서로 정리를 하고 회고하려고 한다.</p>\n<p>먼저 Vue SSR의 렌더링 과정을 전체적으로 살펴본 후, 서버단 렌더링과 클라이언트단 렌더링을 나눠서 다시 살펴본다.</p>\n<blockquote>\n<p>이 포스팅에 예제로 나와있는 코드는 현 직장의 비즈니스 로직 때문에 생략된 부분이 있기 때문에 코드를 복사붙혀넣기해도 작동하지않을 수 있습니다.</p>\n</blockquote>\n<h2 id=\"vue-server-side-rendering의-구조\" style=\"position:relative;\">Vue Server Side Rendering의 구조<a href=\"#vue-server-side-rendering%EC%9D%98-%EA%B5%AC%EC%A1%B0\" aria-label=\"vue server side rendering의 구조 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>필자는 Nuxt.js를 사용하지 않고 보일러플레이트를 사용해서 약간 개선해서 구현했다. 처음에는 ‘그냥 Nuxt쓸걸…’이라고 후회하기도 했지만 그래도 덕분에 Universal SSR의 실행 과정을 더 깊게 알아볼 수 있는 좋은 기회였다고 생각한다.<small><del>(라고 삽질을 포장해본다)</del></small></p>\n<p>해당 포스팅에서는 필자가 작성했던 SSR 어플리케이션의 초기화 과정에 대해서 함수단위까지 자세하게 기재하려고 한다. 먼저 어플리케이션의 렌더링 과정은 다음과 같다. 이후 각 과정에 대한 자세한 설명을 후술하도록 하겠다.</p>\n<hr>\n<ol>\n<li>클라이언트가 서버에 리소스 요청</li>\n<li>nginx가 Express가 띄워져있는 포트로 요청을 서빙</li>\n<li>Express 라우팅 시작</li>\n<li><code class=\"language-text\">server-entry.js</code> 실행</li>\n<li>서버의 <code class=\"language-text\">vue-router</code> 라우팅 진행</li>\n<li>vue-server-renderer를 사용하여 HTML 렌더링</li>\n<li>서버가 클라이언트로 응답</li>\n<li><code class=\"language-text\">client-entry.js</code> 실행</li>\n<li>클라이언트 어플리케이션 초기화 함수 실행</li>\n<li>클라이언트의 <code class=\"language-text\">vue-router</code> 라우팅 진행</li>\n<li><code class=\"language-text\">app.$mount</code></li>\n</ol>\n<hr>\n<p>1번 요청과 7번 응답을 제외한 <code class=\"language-text\">2-6</code>번 까지는 서버에서 일어나는 과정이고 <code class=\"language-text\">8-10</code>번 까지는 클라이언트에서 일어나는 과정이다. 특이한 점은 서버와 클라이언트의 엔트리 포인트가 다르다는 것이다.</p>\n<p>그리고 후술하겠지만 이 엔트리 포인트들은 몇가지 같은 함수를 공유하며 사용한다. <code class=\"language-text\">router.onReady</code>나 <code class=\"language-text\">createApp</code> 같은 함수들이 그렇다. 애초에 Universal SSR은 기본적으로 첫 요청만 서버 사이드 렌더링하고 이후는 SPA처럼 작동하게 하자. 그리고 코드는 서버랑 클라이언트에서 재사용가능하게 하자는 개념이다. 그래서 편한 면도 있지만 실행 타이밍이나 환경이 같은 함수라도 완전 달라질 수 있기 때문에 별도의 예외처리를 해줘야 하는 등 헷갈리는 부분도 많았다.</p>\n<p>그리고 이 두개의 엔트리포인트가 서버와 클라이언트에서 실행될 때 서로 다른 초기화과정을 거치는데, 서버에서 초기화를 하고 클라이언트에서 싹 다 처음부터 다시 초기화를 진행하게 되면 비효율적이므로 몇가지 방법을 사용하여 최대한 효율적으로 렌더를 수행한다.</p>\n<p>먼저 서버 사이드 렌더링부터 살펴보자.</p>\n<h2 id=\"server-side-rendering\" style=\"position:relative;\">Server Side Rendering<a href=\"#server-side-rendering\" aria-label=\"server side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"클라이언트가-서버에-리소스-요청\" style=\"position:relative;\">클라이언트가 서버에 리소스 요청<a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EA%B0%80-%EC%84%9C%EB%B2%84%EC%97%90-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%9A%94%EC%B2%AD\" aria-label=\"클라이언트가 서버에 리소스 요청 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>클라이언트에서 서버로 요청을 보낸다.</p>\n<h3 id=\"nginx가-express가-띄워져있는-포트로-요청을-서빙\" style=\"position:relative;\">nginx가 Express가 띄워져있는 포트로 요청을 서빙<a href=\"#nginx%EA%B0%80-express%EA%B0%80-%EB%9D%84%EC%9B%8C%EC%A0%B8%EC%9E%88%EB%8A%94-%ED%8F%AC%ED%8A%B8%EB%A1%9C-%EC%9A%94%EC%B2%AD%EC%9D%84-%EC%84%9C%EB%B9%99\" aria-label=\"nginx가 express가 띄워져있는 포트로 요청을 서빙 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>보통 nodeJS를 사용하여 서버를 개발할 때 <code class=\"language-text\">node server.js</code>와 같은 명령어로 바로 서버를 띄우는 경우는 드물고 보통 Nginx나 Apache와 같은 서버 엔진을 같이 사용한다.\n그 이유는 다음과 같다.</p>\n<hr>\n<ol>\n<li>서버 엔진 소프트웨어의 특성 상 nodeJS보다 더 빠른 Static file serving이 가능하다. 그리고 그런 요청을 nodeJS까지 보내지 않고 엔진단에서 처리되므로 백엔드의 부하가 분산된다.</li>\n<li>Node.js의 창시자인 Ryan Dahl이 “You just may be hacked when some yet-unknown buffer overflow is discovered. Not that that couldn’t happen behind nginx, but somehow having a proxy in front makes me happy” 라는 말을 한 적이 있음. 즉, 아직 발견되지 않은 취약점에 의한 공격을 어느 정도 방지할 수 있다는 뜻이다.</li>\n</ol>\n<hr>\n<p>그래서 대략 다음과 같은 nginx config를 작성하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token directive\"><span class=\"token keyword\">listen</span> <span class=\"token number\">80</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">server_name</span> example.com</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-Real-IP <span class=\"token variable\">$remote_addr</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-Forwarded-For <span class=\"token variable\">$proxy_add_x_forwarded_for</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$http_host</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-NginX-Proxy true</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_pass</span> http://127.0.0.1:3000/</span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_redirect</span> <span class=\"token boolean\">off</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token directive\"><span class=\"token keyword\">gzip</span> <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_comp_level</span> <span class=\"token number\">2</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_proxied</span> any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_min_length</span>  <span class=\"token number\">1000</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_disable</span>     <span class=\"token string\">\"MSIE [1-6]\\.\"</span>\n  gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>요청이 80 포트로 들어오면 <code class=\"language-text\">node server.js</code>로 실행된 nodeJS 서버가 대기하고 있는 3000 포트로 포워딩 해준다.</p>\n<p>그리고 사실 nodeJS 서버를 실행시킬 때 <code class=\"language-text\">pm2</code>나 <code class=\"language-text\">forever</code>와 같은 프로세스 관리자를 사용해서 실행시키는 편이 좋은데, 이 내용은 다음 포스팅에 <strong>언젠가</strong> 작성하겠다. 참고로 필자는 <code class=\"language-text\">pm2</code>를 사용 중이다.</p>\n<h3 id=\"express-라우팅-시작\" style=\"position:relative;\">Express 라우팅 시작<a href=\"#express-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%8B%9C%EC%9E%91\" aria-label=\"express 라우팅 시작 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>이렇게 들어온 요청은 nodeJS서버인 <code class=\"language-text\">server.js</code>에서 처리하게 된다. <code class=\"language-text\">server.js</code>에는 Vue 코드는 없고 nodeJS로 작성된 Express 프레임워크의 코드가 작성되어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">bundle<span class=\"token punctuation\">,</span> template</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vue-server-renderer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createBundleRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   template<span class=\"token punctuation\">,</span>\n   <span class=\"token literal-property property\">runInNewContext</span><span class=\"token operator\">:</span> <span class=\"token string\">'once'</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bundle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/vue-ssr-bundle.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token function\">createRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> template<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'views'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'./src/express/views'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'view engine'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ejs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/ping'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">health check from ELB</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'healthCheck'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bundle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/vue-ssr-bundle.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token function\">createRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> template<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>renderer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;pre>렌더링 중 입니다 뿜뿜&lt;/pre>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">cookie</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>cookies <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">errorLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ERR] context url is not exist!!'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 렌더 스트림 진행</span>\n  <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> renderer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStream</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자는 Express를 사용했기 때문에 당연히 Express의 라우터를 사용했다. 그러나 실질적인 라우팅은 Vue가 진행하기 때문에 Express에서는 <code class=\"language-text\">app.get('*')</code>과 같이 와일드카드를 사용하여 모든 요청에 대한 콜백 함수를 실행하도록 한다.</p>\n<p>중간에 보면 <code class=\"language-text\">app.get('/ping')</code>이라는 코드도 있는데 저건 AWS의 Elastic Beanstalk의 Health Check 때문에 별도로 작성한 라우터이다. ELB에서는 현재 환경이 제대로 작동하고 있는지를 체크하려고 그 환경에 속한 인스턴스들의 특정 URL로 주기적으로 ping을 날린다. 이 URL은 ELB의 설정에서 바꿔줄 수 있고, 필자는 <code class=\"language-text\">/ping</code>이라는 URL로 설정했다.</p>\n<p>굳이 이 라우터를 따로 나눈 이유는 <code class=\"language-text\">vue-ssr-renderer</code>의 render 함수가 많이 실행될 수록 메모리에 올라가는 HTML 템플릿이 많아질 것이고 그렇게 됨으로써 결국 렌더 과정에 병목이 발생하기 때문에 <code class=\"language-text\">vue-ssr-renderer</code>를 실행시키지 않고 Express만으로 간단한 페이지를 응답으로 보내주게 해놓은 것이다.</p>\n<p>Express 라우팅과 밑에서 설명할 <code class=\"language-text\">vue-router</code>의 라우팅이랑 헷갈릴 수 있는데, 방금 설명한 대로 실질적인 라우팅은 Vue에서 진행하게 되지만 요청을 Express에서 먼저 받아 처리한 후에 Vue로 넘겨주는 순서이기 때문에 Express에서도 라우팅을 해줘야한다. 라우팅 후 마지막 줄의 <code class=\"language-text\">renderToStream</code> 메소드가 실행되고나면 Vue에서 진행되는 라우팅과 렌더링을 시작하게 된다.</p>\n<p>이제 <code class=\"language-text\">app.get('*')</code> 라우터 내부를 자세하게 설명한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>renderer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;pre>렌더링 중 입니다 뿜뿜&lt;/pre>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">cookie</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>cookies <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">errorLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ERR] context url is not exist!!'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> renderer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStream</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  stream<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* @desc\n     * vue-meta 플러그인을 사용하면 컴포넌트에 선언되어있는 metaInfo 메소드에서 반환한 값을 받아올 수 있다.\n     * https://github.com/declandewet/vue-meta 참고할 것\n     */</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      title<span class=\"token punctuation\">,</span> link<span class=\"token punctuation\">,</span> style<span class=\"token punctuation\">,</span> script<span class=\"token punctuation\">,</span> noscript<span class=\"token punctuation\">,</span> meta<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    context<span class=\"token punctuation\">.</span>head <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>link<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>script<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>noscript<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">렌더 중 에러 발생</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 에러 페이지를 보여주는 등의 에러 핸들링 로직이 위치한다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">렌더링 종료</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 라우팅에서 가장 중요한 부분은 <code class=\"language-text\">renderToStream</code> 메소드의 역할이다.</p>\n<p><code class=\"language-text\">vue-ssr-renderer</code>는 <code class=\"language-text\">renderToString</code>과 <code class=\"language-text\">renderToStream</code>이라는 2가지 렌더 함수를 가지고 있다.</p>\n<p><code class=\"language-text\">renderToString</code>은 모든 렌더가 끝나면 렌더된 HTML을 string의 형태로 반환하고 그 이후 클라이언트로 HTML을 한번에 반환한다. 때문에 렌더 속도가 오래 걸리게 되면 유저는 빈 화면을 보고 있을 수 밖에 없다. 또한 데이터를 한번에 내려주기 때문에 HTML 렌더를 진행할 때 내용을 전부 다 메모리에 올려야한다는 단점이 있다. HTML의 크기가 작으면 문제가 되지 않겠지만 파일의 크기가 커질 수록 매 렌더링 시 메모리 공간을 많이 잡아먹는다.</p>\n<p><code class=\"language-text\">renderToStream</code>은 한 이벤트가 끝날때마다 nodeJS의 <code class=\"language-text\">ReadableStream</code> 객체를 반환한다. <a href=\"https://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"nofollow\">stream</a>은 데이터를 일정한 chunk단위로 불러오고 <code class=\"language-text\">on</code> 메소드를 사용한 이벤트 콜백 호출로 stream을 관리할 수 있는 nodeJS의 기능이다. data이벤트는 각 chunk가 <code class=\"language-text\">readable</code>상태가 될때마다 호출되며 모든 데이터를 불러왔다면 <code class=\"language-text\">end</code>이벤트가 호출된다. 이 <a href=\"https://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"nofollow\">stream</a>에 관한 내용은 추후 다른 포스트에서 <strong>언젠가</strong> 설명하도록 하겠다.</p>\n<h3 id=\"code-classlanguage-textserver-entryjscode-실행\" style=\"position:relative;\"><code class=\"language-text\">server-entry.js</code> 실행<a href=\"#code-classlanguage-textserver-entryjscode-%EC%8B%A4%ED%96%89\" aria-label=\"code classlanguage textserver entryjscode 실행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">renderToStream</code>함수가 실행되면 <code class=\"language-text\">vue-server-renderer</code>는 서버 쪽 엔트리 파일인 <code class=\"language-text\">server-entry.js</code>파일을 찾게된다. 이 파일에서는 <code class=\"language-text\">app.js</code>에 있는 팩토리 함수를 사용하여 app 객체를 생성하고 몇가지 초기화 과정을 거친 뒤 라우팅을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 팩토리 함수 import</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 해당 프로미스에서 resolve되면 router.push가 호출된 후에도 stream이 계속 진행되고</span>\n    <span class=\"token comment\">// 해당 프로미스에서 reject되면 stream의 error이벤트가 호출된다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 파일의 코드를 설명하기 위해서는 상단에 import된 <code class=\"language-text\">createApp</code> 함수에서 반환된 <code class=\"language-text\">app</code>, <code class=\"language-text\">store</code>, <code class=\"language-text\">router</code>가 뭔지 알고 있는 게 좋으므로, 자세히 살펴보기 전에 맨 위에서 import된 <code class=\"language-text\">createApp</code> 팩토리 함수를 먼저 살펴보자.</p>\n<p><code class=\"language-text\">createApp</code> 함수는 <code class=\"language-text\">Vue</code> 인스턴스, <code class=\"language-text\">VueRouter</code> 인스턴스, Vuex의 <code class=\"language-text\">Store</code> 인스턴스를 반환하는 팩토리 함수이다. 이후 이 팩토리 함수는 <code class=\"language-text\">client-entry</code>에도 재사용되어 초기화를 진행하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Store <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./router'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> router<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token parameter\">h</span> <span class=\"token operator\">=></span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>일반적으로 클라이언트에서 Vue를 초기화하는 코드와 비슷하지만 다른 부분이 하나 있는데, <code class=\"language-text\">Store</code>와 <code class=\"language-text\">Router</code> 인스턴스를 팩토리 함수를 사용해서 생성한다는 점이다. 보통 SPA 어플리케이션에서는</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">'#app'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> App <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;App/>'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">router</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">store</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 식으로 <code class=\"language-text\">Vue</code> 인스턴스를 생성한다. 하지만 이 로직을 그대로 서버에서 사용하기엔 문제가 하나 있다.</p>\n<p>문제는 <code class=\"language-text\">export default</code>로 Call by Reference 평가전략을 사용하는 자료형을 반환하게 될 때 발생한다. <code class=\"language-text\">new Vue()</code>에서 호출하는 <code class=\"language-text\">Vue</code>는 인스턴스를 반환하는 클래스같이 작동하기 때문에 해당 코드는 최종적으로 <code class=\"language-text\">Vue</code> 인스턴스가 올라간 메모리 주소를 반환하게 되는데, 이 로직은 클라이언트에서는 딱히 문제가 없지만 서버에서는 문제가 발생할 수 있다.</p>\n<p>클라이언트와 다르게 서버는 한번 올라가면 오랜 시간동안 계속 돌아가는 프로그램이라는 것이다. 현재 서버에 접속해있는 유저들이 <code class=\"language-text\">Store</code>의 상태를 공유하면 안되기 때문에 서버는 각 요청에 대해서 새로운 <code class=\"language-text\">Store</code>와 <code class=\"language-text\">Vue</code> 인스턴스를 생성해야한다.</p>\n<p>하지만 위의 코드에서 <code class=\"language-text\">export</code>하는 것은 결과적으로 <code class=\"language-text\">Vue</code> 인스턴스의 메모리 포인터이고 위 모듈이 <code class=\"language-text\">import</code> 될때 이 모듈은 처음 한번만 <code class=\"language-text\">Vue</code> 인스턴스를 생성하고 이후는 참조해야하는 메모리 포인터, 즉 <strong>같은 인스턴스</strong>를 반환하게 된다.</p>\n<p>그렇기 때문에 서버 사이드 렌더링 때는 상태가 오염되는 것을 피하기 위해, 인스턴스의 메모리 포인터가 아닌 팩토리 함수를 노출시키고 매번 새로운 인스턴스를 생성해 반환하는 방법으로 작성하여야 한다.</p>\n<p>필자는 이 사실을 놓쳐서 유저들이 <code class=\"language-text\">Store</code> 내부의 세션을 공유하게 되서 내 계정으로 로그인했지만 다른 사람 계정으로 로그인되버리는 버그를 생성한 적이 있다. 지금 생각해도 아찔한 순간이다.</p>\n<blockquote>\n<p>A Node.js server is a long-running process. When our code is required into the process, it will be evaluated once and stays in memory.\n…\nSo, instead of directly creating an app instance, we should expose a factory function that can be repeatedly executed to create fresh app instances for each request.</p>\n<p><strong>Vue SSR Guide</strong> <em>Avoid Stateful Singletons</em></p>\n</blockquote>\n<p>심지어 이렇게 <a href=\"https://ssr.vuejs.org/guide/structure.html#avoid-stateful-singletons\" target=\"_blank\" rel=\"nofollow\">공식 문서</a>에도 버젓히 적혀있는 걸 놓쳐서 엄청난 버그를 내고 말았다. 공식 문서를 반드시 읽읍시다! 두번 세번 읽읍시다!</p>\n<p>자, 이제 <code class=\"language-text\">createApp</code>를 살펴보았으니 다시 <code class=\"language-text\">server-entry.js</code>로 돌아와서 해당 파일에 대한 설명을 계속 이어가겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 팩토리 함수 import</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">TOKEN_KEY</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/constants'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">SET_TOKEN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DESTROY_TOKEN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> APIAuth <span class=\"token keyword\">from</span> <span class=\"token string\">'src/api/auth'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 새로운 앱 생성</span>\n    <span class=\"token keyword\">const</span> cookies <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> authToken <span class=\"token operator\">=</span> cookies<span class=\"token punctuation\">[</span><span class=\"token constant\">TOKEN_KEY</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 요청을 보낸 클라이언트의 쿠키에 있는 토큰</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">next</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>authToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> APIAuth<span class=\"token punctuation\">.</span><span class=\"token function\">isValidToken</span><span class=\"token punctuation\">(</span>authToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// valid하면 200, invalid하면 400</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SET_TOKEN</span><span class=\"token punctuation\">,</span> authToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// throw하면 렌더 실패로 간주된다. 하지만 토큰이 invalid하다고 렌더 자체를 실패시키면 안된다.</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DESTROY_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 라우팅 로직이 위치</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 파일의 메인 로직은 크게 2가지로 나누어 진다.</p>\n<hr>\n<ol>\n<li>요청을 보낸 클라이언트의 쿠키에 토큰이 저장되어있을 경우 <code class=\"language-text\">store.dispatch(SET_TOKEN, authToken)</code>로 Store에 인증상태를 저장</li>\n<li><code class=\"language-text\">router.onReady</code>로 선언된 서버 측 라우팅 로직 및 예외처리</li>\n</ol>\n<hr>\n<p>먼저 1번부터 살펴보자. 왜 굳이 인증된 토큰을 Store에 담아야 할까? 먼저 이 서버는 렌더링만을 수행하는 렌더서버이기 때문에 세션의 유효성 검사는 외부에 있는 API서버와 통신을 해서 수행해야한다.</p>\n<p>인증상태는 서버에서도 필요할 수 있고 클라이언트에서도 필요할 수도 있는데, 그럼 서버에서 한번 통신해서 토큰을 검사하고 클라이언트에서도 또 통신을 해서 토큰을 검사해야한다. 하지만 이런 방식은 비효율적이기 때문에 보통 이런 유니버셜 SSR을 지원하는 프레임워크에서는 서버의 상태를 클라이언트로 반환해주는 방법으로 <code class=\"language-text\">window</code> 객체에 서버의 상태를 직렬화해서 렌더 시 <code class=\"language-text\">&lt;script></code> 태그 안에 선언해주는 방식을 사용한다.</p>\n<p><code class=\"language-text\">vue-server-renderer</code>에서는 클라이언트에 반환할 서버의 상태를 Vue의 <a href=\"https://haruair.github.io/flux/\" target=\"_blank\" rel=\"nofollow\">Flux 아키텍처</a> 라이브러리인 <a href=\"https://vuex.vuejs.org/kr/\" target=\"_blank\" rel=\"nofollow\">Vuex</a>를 사용하여 선언한다.</p>\n<p>그렇게 서버의 상태는 렌더 시 <code class=\"language-text\">JSON.stringify</code>를 사용하여 직렬화되어 <code class=\"language-text\">window.__INITIAL_STATE__</code>라는 프로퍼티에 담기게 되고, 이후 클라이언트 초기화 시 해당 프로퍼티에 접근해 <code class=\"language-text\">JSON.parse</code>를 사용하여 Object 타입으로 형변환 후 Vuex Store의 <code class=\"language-text\">replaceState</code> 메소드를 사용해 Store를 업데이트하게 된다.</p>\n<center>\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/37523/initial_state.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIElEQVR42p2Sy26DMBBF8yVdYBuS8jABTACpQFQUIAQ23fT/f+TUYVFVeVRVF0cjeaTjO2NvYt8n0xH5fk8ShRyShLei4Nx11EVOFgmWk6ZvAppiZ6vPqfaJdhJPOGxv2Ggds7cSk+drzYwhzQxllfM+fpLmbzjOC1IJPE/hWjzPxXUlQt6zcd1r8wfKxdt6lGnBWH5QmoamrWmbllc7jeMIpJBI+ZiNEIJbpJKYKKeLOruOlMs8sywLQRBYofNUtgrvDu3tylVWaBiTiT4ZKdKSYRwYhgGt9a/Sp8I0yjjFPY1uOR6PTNNEVVUopf6XMNeHVWhiw/lyZr7MhGH4nW5dzZ+E8iqUpGFGHbVkvqFuaoZ+wNgfsPZtyusDPkr7BYT48n0a47z1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"initial state\" title=\"\" src=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/6af66/initial_state.png\" srcset=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/69538/initial_state.png 160w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/72799/initial_state.png 320w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/6af66/initial_state.png 640w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/37523/initial_state.png 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <small>브라우저 콘솔에서 이렇게 확인해볼 수 있다</small>\n</center>\n<h3 id=\"서버의-code-classlanguage-textvue-routercode-라우팅-진행\" style=\"position:relative;\">서버의 <code class=\"language-text\">vue-router</code> 라우팅 진행<a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-code-classlanguage-textvue-routercode-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A7%84%ED%96%89\" aria-label=\"서버의 code classlanguage textvue routercode 라우팅 진행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>다음 2번이었던 라우팅 로직을 살펴보자. Universal SSR 어플리케이션은 맨 처음 사용자가 페이지를 열었을 때는 서버 쪽에서 라우팅을 진행하고 그 이후 사용자가 페이지를 이동할때는 클라이언트에서 라우팅을 진행하게된다.</p>\n<p>즉 <code class=\"language-text\">server-entry.js</code> 내부의 라우팅 로직은 맨 처음 사용자가 어플리케이션을 초기 실행시킬 때 딱 한번 실행되는 로직이라는 의미이다. 필자는 서버에서는 이 라우터에 연결된 컴포넌트가 있는지에 대한 검사만 진행하고 클라이언트에 라우터 인증 관련 로직을 작성했기 때문에 서버 쪽 엔트리의 라우팅 로직은 간단하게 작성했다.</p>\n<p>이 파일에서 사용된 <code class=\"language-text\">router</code> 객체는 <code class=\"language-text\">createApp</code> 팩토리 함수에서 생성되어 반환된 <code class=\"language-text\">vue-router</code> 라이브러리 내 <code class=\"language-text\">VueRouter</code> 클래스의 인스턴스이다. 필자는 이 클래스의 <code class=\"language-text\">getMatchedComponents</code> 메소드를 사용해서 현재 라우트가 유효한 라우트인지만 검사하기로 했다.</p>\n<p><code class=\"language-text\">VueRouter</code>의 멤버 변수와 메소드의 의미는 <code class=\"language-text\">vue-router</code>의 <a href=\"https://router.vuejs.org/kr/api/#router-link\" target=\"_blank\" rel=\"nofollow\">공식 문서</a>에도 나와 있지만 가끔씩 라이브러리는 업데이트가 되었으나 공식 문서는 업데이트가 늦는 경우도 있으므로 필자는 직접 <code class=\"language-text\">vue-router</code>의 코드를 살펴봤다.</p>\n<p><code class=\"language-text\">node_modules/vue-router/types/router.d.ts</code> 파일을 살펴보면 <code class=\"language-text\">VueRouter</code> 클래스의 멤버 변수와 메소드를 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">VueRouter</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span>options<span class=\"token operator\">?</span><span class=\"token operator\">:</span> RouterOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  app<span class=\"token operator\">:</span> Vue<span class=\"token punctuation\">;</span>\n  mode<span class=\"token operator\">:</span> RouterMode<span class=\"token punctuation\">;</span>\n  currentRoute<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span> <span class=\"token punctuation\">(</span>guard<span class=\"token operator\">:</span> NavigationGuard<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">beforeResolve</span> <span class=\"token punctuation\">(</span>guard<span class=\"token operator\">:</span> NavigationGuard<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">afterEach</span> <span class=\"token punctuation\">(</span><span class=\"token function-variable function\">hook</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">,</span> from<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">push</span> <span class=\"token punctuation\">(</span>location<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> onComplete<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> onAbort<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">replace</span> <span class=\"token punctuation\">(</span>location<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> onComplete<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> onAbort<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">go</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">back</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">forward</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">getMatchedComponents</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">?</span><span class=\"token operator\">:</span> RawLocation <span class=\"token operator\">|</span> Route<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Component<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onReady</span> <span class=\"token punctuation\">(</span>cb<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> errorCb<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onError</span> <span class=\"token punctuation\">(</span>cb<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">addRoutes</span> <span class=\"token punctuation\">(</span>routes<span class=\"token operator\">:</span> RouteConfig<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">resolve</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> current<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Route<span class=\"token punctuation\">,</span> append<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    location<span class=\"token operator\">:</span> Location<span class=\"token punctuation\">;</span>\n    route<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n    href<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// backwards compat</span>\n    normalizedTo<span class=\"token operator\">:</span> Location<span class=\"token punctuation\">;</span>\n    resolved<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> install<span class=\"token operator\">:</span> PluginFunction<span class=\"token operator\">&lt;</span><span class=\"token builtin\">never</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">getMatchedComponent</code> 메소드는 <code class=\"language-text\">RawLocation</code> 타입이나 <code class=\"language-text\">Route</code> 타입을 인자로 받아서 <code class=\"language-text\">Component</code> 리스트를 반환해주는 메소드라는 것을 확인할 수 있다. 그럼 이제 <code class=\"language-text\">node_modules/vue-router/dist/vue-router.common.js</code> 파일에서 <code class=\"language-text\">getMatchedComponent</code>이 어떻게 구현되어있는지 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token class-name\">VueRouter</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getMatchedComponents</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getMatchedComponents</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">to</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> route <span class=\"token operator\">=</span> to\n    <span class=\"token operator\">?</span> to<span class=\"token punctuation\">.</span>matched\n      <span class=\"token operator\">?</span> to\n      <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>route\n    <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>route<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> route<span class=\"token punctuation\">.</span>matched<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> m<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">VueRouter</code> 클래스의 <code class=\"language-text\">getMatchedComponent</code>라는 메소드는 <code class=\"language-text\">to</code> 인자를 받으면 해당 라우트와 매치된 컴포넌트를 반환하고, 인자가 주어지지 않는다면 현재 라우트에 매치된 컴포넌트를 반환하도록 되어있다. <code class=\"language-text\">VueRouter</code> 클래스의 타입 선언부에서 확인한 대로 <code class=\"language-text\">to</code>인자에는 <code class=\"language-text\">optional</code>을 의미하는 <code class=\"language-text\">?</code>가 붙어있었기 때문에 필요한 경우가 아니면 굳이 인자를 넘겨줄 필요는 없을 것 같다. 이제 <code class=\"language-text\">router.onReady</code> 이벤트 훅 내부를 한번 작성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * @desc 현재 라우터에 연결되어 있는 컴포넌트가 없다면 reject함으로써\n  * nodeJS stream의 error이벤트가 호출되고 별도로 작성해놓은 errorHandler가 404페이지가 렌더 될 것이다.\n  */</span>\n  <span class=\"token keyword\">const</span> matchedComponents <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>matchedComponents<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">.</span>fullPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not found</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>얼추 된 것 같다. 하지만 필자의 어플리케이션은 <code class=\"language-text\">asyncData</code>라는 프로퍼티를 사용하여 라우팅을 진행하기 전에 비동기로직을 기다릴 수 있도록 작성이 되어있다. Vue의 SSR 라이브러리인 <code class=\"language-text\">Nuxt</code>에서도 비슷한 방식을 사용했던 것 같은데 이 부분은 잘 기억이 나지않는다.</p>\n<p>어쨌든 현재 라우트에 매치된 컴포넌트리스트 중 <code class=\"language-text\">asyncData</code>를 가지고 있는 컴포넌트가 있다면 <code class=\"language-text\">Promise</code>를 사용해서 기다리도록 만들어주면 되는 간단한 로직이기 때문에 <code class=\"language-text\">Promise.all</code>을 사용하여 다음과 같이 작성하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * @desc 현재 라우터에 연결되어 있는 컴포넌트가 없다면 404페이지를 렌더한다.\n  */</span>\n  <span class=\"token keyword\">const</span> matchedComponents <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>matchedComponents<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">.</span>fullPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not found</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// start: 추가된 부분</span>\n  Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>matchedComponents<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Component<span class=\"token punctuation\">.</span>asyncData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Component<span class=\"token punctuation\">.</span><span class=\"token function\">asyncData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** @desc\n     * context에 state를 넘겨주고 렌더러에`template` 옵션을 사용하면 context.state를 직렬화하여 `window .__ INITIAL_STATE__`로 HTML에 주입해준다.\n     */</span>\n    context<span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// end: 추가된 부분</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그리고 모든 라우팅이 완료되었을 때 <code class=\"language-text\">context.state = store.state</code>처럼 <code class=\"language-text\">context.state</code>에 <code class=\"language-text\">store</code> 상태를 담아주면 <code class=\"language-text\">vue-server-renderer</code>가 알아서 <code class=\"language-text\">window.__INITIAL_STATE__</code>에 상태를 주입해준다.</p>\n<h3 id=\"vue-server-renderer를-사용하여-html-렌더링\" style=\"position:relative;\">vue-server-renderer를 사용하여 HTML 렌더링<a href=\"#vue-server-renderer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-html-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\"vue server renderer를 사용하여 html 렌더링 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">stream\n<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">errorHandler</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">,</span> bugsnag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">render stream end ==============================</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> s<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">'================================================'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">server-entry.js</code>에서 <code class=\"language-text\">Promise.resolve</code>가 호출되어 초기화가 끝나면 아까 선언해놓았던 <code class=\"language-text\">server.js</code>의 stream의 <code class=\"language-text\">end</code> 이벤트가 실행되고나서 체이닝되어있는 <code class=\"language-text\">pipe</code> 메소드가 실행된다.</p>\n<h3 id=\"서버가-클라이언트로-응답\" style=\"position:relative;\">서버가 클라이언트로 응답<a href=\"#%EC%84%9C%EB%B2%84%EA%B0%80-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EB%A1%9C-%EC%9D%91%EB%8B%B5\" aria-label=\"서버가 클라이언트로 응답 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>위 과정을 거친 후 렌더가 끝난 HTML을 클라이언트로 전송한다.</p>\n<h2 id=\"client-rendering\" style=\"position:relative;\">Client Rendering<a href=\"#client-rendering\" aria-label=\"client rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"code-classlanguage-textclient-entryjscode-실행\" style=\"position:relative;\"><code class=\"language-text\">client-entry.js</code> 실행<a href=\"#code-classlanguage-textclient-entryjscode-%EC%8B%A4%ED%96%89\" aria-label=\"code classlanguage textclient entryjscode 실행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>클라이언트에서 서버 렌더링이 완료된 HTML과 entry.js를 받아온 후 클라이언트 렌더링이 시작된다. 이때 웹팩이 컴파일할때 클라이언트단 엔트리 포인트로 잡는 파일은 <code class=\"language-text\">client-entry.js</code>이다. 먼저 <code class=\"language-text\">client-entry.js</code> 파일의 <code class=\"language-text\">init</code> 함수를 살펴보자.</p>\n<h3 id=\"클라이언트-어플리케이션-초기화-함수-실행\" style=\"position:relative;\">클라이언트 어플리케이션 초기화 함수 실행<a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%B4%88%EA%B8%B0%ED%99%94-%ED%95%A8%EC%88%98-%EC%8B%A4%ED%96%89\" aria-label=\"클라이언트 어플리케이션 초기화 함수 실행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">LOGIN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/** @desc 서버의 스토어의 클라이언트 스토어의 동기화 */</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>__INITIAL_STATE__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    store<span class=\"token punctuation\">.</span><span class=\"token function\">replaceState</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>__INITIAL_STATE__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/** @desc 토큰 존재 여부 확인 후 로그인 처리  */</span>\n  <span class=\"token keyword\">const</span> hasToken <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>authToken<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LOGIN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 쿠키 내 토큰을 삭제하는 등의 별도 예외처리</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>현 직장의 코드다 보니까 전체를 적지는 못했지만 <code class=\"language-text\">init</code> 함수가 수행하는 로직은 서버의 스토어 상태를 클라이언트에 반영과 사용자 인증 처리이다. 서버의 스토어 상태를 받아오는 원리는 <a href=\"/2018/09/25/vue-ssr/#code-classlanguage-textserver-entryjscode-%EC%8B%A4%ED%96%89\">server-entry.js 실행</a>에서 설명했으니, 이번에는 “왜 로그인처리를 서버에서 하지않고 클라이언트에서 하는가”에 대해서 설명해보려고 한다.</p>\n<p>그 이유는 이 서버가 별도의 인증 로직을 가지고 있지 않은 렌더 서버이기 때문에 유저 정보를 가져오거나 인증 여부를 확인하거나 하는 작업은 모두 외부의 API 서버에 의존하고 있기 때문이다. 처음에 이 사실을 간과하고 서버 렌더링 시 API 통신을 한 후 유저데이터를 클라이언트로 내려주는 방법을 택했는데, 다음과 같은 문제가 발생했다.</p>\n<hr>\n<ol>\n<li>HTML 템플릿 렌더시간에 API 통신시간이 포함되었다. <small>(렌더가 끝나면 서버렌더링의 라이프사이클도 같이 끝나기 때문에 렌더 중간에 <code class=\"language-text\">await</code> 키워드를 사용하여 API 통신을 동기처리할 수 밖에 없다. 심지어 인증된 유저 정보 GET API가 꽤 느린 편)</small></li>\n<li><code class=\"language-text\">vue-ssr-renderer</code>의 <code class=\"language-text\">render</code> 메소드의 수행시간이 늘어났다.</li>\n<li><code class=\"language-text\">render</code> 메소드의 수행시간이 늘어나면서 한 번에 메모리에 올라가는 템플릿이 많아졌다.</li>\n<li>메모리가 꽉 차서 더 이상 렌더링을 수행하지 못한다.</li>\n<li>서버가 응답을 하지 못한다.</li>\n<li>Fail</li>\n</ol>\n<hr>\n<p>그래서 이 렌더 서버를 구축할 때 가장 집중했던 부분은 <code class=\"language-text\">render</code> 메소드의 수행시간 단축이었고, 그 결과 유저 데이터를 받아오는 로직을 클라이언트로 내리게 되었다. 나중에 생각해보니 현재 인증된 사용자의 데이터가 필요한 뷰는 SEO가 필요없는 부분이라서 굳이 서버에서 할 필요가 없었다. 이제 마지막으로 클라이언트의 라우팅을 살펴보자.</p>\n<h3 id=\"클라이언트의-code-classlanguage-textvue-routercode-라우팅-진행\" style=\"position:relative;\">클라이언트의 <code class=\"language-text\">vue-router</code> 라우팅 진행<a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EC%9D%98-code-classlanguage-textvue-routercode-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A7%84%ED%96%89\" aria-label=\"클라이언트의 code classlanguage textvue routercode 라우팅 진행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">client-entry.js</code>에는 클라이언트 사이드의 전역 라우터도 같이 선언이 되어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">LOGIN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  router<span class=\"token punctuation\">.</span><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">to<span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> matched <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> prevMatched <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> diffed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> activated <span class=\"token operator\">=</span> matched<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> diffed <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>diffed <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>prevMatched<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>activated<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>activated<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>asyncData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">asyncData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> store<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> to <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* LOADING INDICATOR */</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">$mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 라우터 부분은 <code class=\"language-text\">sever-entry.js</code>에 있던 라우팅 로직 부분과 별로 다르지 않다. 그러나 한 가지 차이점이 있다면 <code class=\"language-text\">client-entry.js</code>의 라우팅에서는 현재 라우터의 컴포넌트와 이전 라우터의 컴포넌트를 비교하는 로직이 있다는 것이다.</p>\n<p>첫 요청 시 라우팅이 단 한번 일어나는 서버 렌더링과 다르게 클라이언트의 라우팅은 사용자의 액션에 따라서 여러 번 일어나게된다. 클라이언트 렌더링은 라우터가 변경되었을 때 컴포넌트가 변경된 부분만 새로 렌더하고 나머지는 그대로 유지하기 때문에 다음 라우터에는 현재 라우터에 있던 컴포넌트를 그대로 사용하고 있을 수 있다.</p>\n<p>중요한 점은 클라이언트에서도 <code class=\"language-text\">asyncData</code>를 서버와 마찬가지로 라우팅이 완료되기 전에 데이터를 <code class=\"language-text\">fetch</code> 해오는 용도로 사용되고 있다는 점이다.</p>\n<p>즉, 현재 라우터에 존재하는 컴포넌트가 다음 라우터에도 존재한다면 굳이 그 컴포넌트의 <code class=\"language-text\">asyncData</code>에서 중복되는 로직을 수행할 필요가 없기 때문에 라우터가 변경될 때 컴포넌트를 비교하는 로직을 수행한 후, 달라진 컴포넌트의 <code class=\"language-text\">asyncData</code>만 수행하도록 로직을 작성해야한다.</p>\n<h3 id=\"appmount---렌더-종료-vue-라이프사이클-시작\" style=\"position:relative;\">app.$mount -> 렌더 종료. Vue 라이프사이클 시작<a href=\"#appmount---%EB%A0%8C%EB%8D%94-%EC%A2%85%EB%A3%8C-vue-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4-%EC%8B%9C%EC%9E%91\" aria-label=\"appmount   렌더 종료 vue 라이프사이클 시작 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>그 후 마지막에 app을 <code class=\"language-text\">#app</code> DOM에 직접 마운트하면 클라이언트 사이드의 Vue 라이프사이클이 시작된다. 마지막으로 해당 프로젝트 보일러 플레이트의 <a href=\"https://github.com/evan-moon/vue-ssr-starter\" target=\"_blank\" rel=\"nofollow\">Github 링크</a>를 첨부한다.</p>\n<p>이상으로 Vue SSR 포스팅을 마친다.</p>","fields":{"slug":"20180925-vue-ssr","path":"/2018/09/25/vue-ssr/","lang":"ko"},"frontmatter":{"title":"Vue Server Side Rendering","subTitle":"Vue SSR의 렌더링 과정과 실전 구축, 운영 경험","date":"Sep 25, 2018","categories":["프로그래밍","자바스크립트","튜토리얼"],"tags":["Vue","NodeJS","Express","Server Side Rendering","SSR","서버사이드 렌더링","Universal Server Side Rendering","Universal","NuxtJS","NextJS","SEO"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/d637d6583a105b27784921c410c1eb2d/3a812/vue.jpg","srcSet":"/static/d637d6583a105b27784921c410c1eb2d/3a812/vue.jpg 320w,\n/static/d637d6583a105b27784921c410c1eb2d/4b287/vue.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/d637d6583a105b27784921c410c1eb2d/fc5c5/vue.webp 320w,\n/static/d637d6583a105b27784921c410c1eb2d/e9225/vue.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/d637d6583a105b27784921c410c1eb2d/2d839/vue.jpg","srcSet":"/static/d637d6583a105b27784921c410c1eb2d/2d839/vue.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/d637d6583a105b27784921c410c1eb2d/b384d/vue.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"1d86eea6-4784-5e03-b4bb-22e53a5b02db","tableOfContents":"<ul>\n<li><a href=\"#server-side-rendering%EC%9D%84-%EC%88%98%ED%96%89%ED%95%98%EB%8A%94-multi-page-application\">Server Side Rendering을 수행하는 Multi Page Application</a></li>\n<li><a href=\"#client-side-rendering%EC%9D%84-%EC%88%98%ED%96%89%ED%95%98%EB%8A%94-single-page-application\">Client Side Rendering을 수행하는 Single Page Application</a></li>\n<li><a href=\"#ssr-vs-spa\">SSR vs SPA</a></li>\n<li><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%9C%EB%85%90%EC%9D%98-server-side-rendering%EC%9D%98-%EB%93%B1%EC%9E%A5\">새로운 개념의 Server Side Rendering의 등장</a></li>\n</ul>","excerpt":"이번 포스팅에서는 최근 모던 웹 어플리케이션에서 많이 사용하고 있는 Universal SSR에 대해서 설명하고자 한다. SSR(erver Side Rendering)과 SPA(Single Page Application)의 방식을 간단하게 알아보고 이 두 렌더 방식을 조합한 Universal SSR의 방식을 설명한다.","html":"<p>이번 포스팅에서는 최근 모던 웹 어플리케이션에서 많이 사용하고 있는 Universal SSR에 대해서 설명하고자 한다. SSR(erver Side Rendering)과 SPA(Single Page Application)의 방식을 간단하게 알아보고 이 두 렌더 방식을 조합한 Universal SSR의 방식을 설명한다.</p>\n<!-- more -->\n<h2 id=\"server-side-rendering을-수행하는-multi-page-application\" style=\"position:relative;\">Server Side Rendering을 수행하는 Multi Page Application<a href=\"#server-side-rendering%EC%9D%84-%EC%88%98%ED%96%89%ED%95%98%EB%8A%94-multi-page-application\" aria-label=\"server side rendering을 수행하는 multi page application permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>SSR 방식은 원래 전통적인 웹 어플리케이션에서 사용하던 방식이다. 최근에는 SPA(Single Page Application)과 대조하여 MPA(Multi Page Application)이라고도 불린다. SSR 어플리케이션은 라우팅이 수행된 후 새로운 페이지가 서버에 요청되면 싶으면 그때마다 HTML를 렌더한 후 클라이언트에서 전체 페이지를 다시 내려받는다.</p>\n<p>대략적인 실행 순서는 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9052926c04e0b91148f091f6238be6c8/86a1e/ssr.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+klEQVR42p2S2a6DMAxE+f8fRMAz+w5iX3x1IhlRWnRpLVmZOM54Yscqy1IcxxHP86Sua9n3XZ7atm1SVZXYti2u6xpszfMsTdNI3/cCPts0TSaOD8Ng1q7rZF1Xc05x7hBr29ZgiwMAvizLC0Z9HMcSRZEkSWJwGIaGGHXksLIHYwchB1Q8+52N43goV/VvhHcEV3IKozzPcymKwqw8Wdv1L+GdnfPp6WOFn4zfQD/TNJUsy8xAGODPhNdeo04n/zUhA0EZU0cdGMWPe0hl/Uq47nmixsAvPSTA6LW56kyUKQZBYNz3/eMPkqv+RngmuPpZOfhTjt6F8A/UQK7TVvFzNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ssr\" title=\"\" src=\"/static/9052926c04e0b91148f091f6238be6c8/6af66/ssr.png\" srcset=\"/static/9052926c04e0b91148f091f6238be6c8/69538/ssr.png 160w,\n/static/9052926c04e0b91148f091f6238be6c8/72799/ssr.png 320w,\n/static/9052926c04e0b91148f091f6238be6c8/6af66/ssr.png 640w,\n/static/9052926c04e0b91148f091f6238be6c8/d9199/ssr.png 960w,\n/static/9052926c04e0b91148f091f6238be6c8/21b4d/ssr.png 1280w,\n/static/9052926c04e0b91148f091f6238be6c8/86a1e/ssr.png 1296w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<hr>\n<ol>\n<li>클라이언트가 서버에 <code class=\"language-text\">example.com/products/12</code> URL로 요청을 보낸다.</li>\n<li>서버에서는 해당 URL과 연결되어있는 메소드가 실행되고 알맞는 HTML Template파일을 찾는다.</li>\n<li>Database에서 12번 상품의 데이터를 가져온다.</li>\n<li>가져온 데이터와 HTML Template을 사용해 최종 HTML을 렌더한다.</li>\n<li>클라이언트로 HTML을 내려준다.</li>\n<li>최종적으로 사용자가 뷰를 본다.</li>\n</ol>\n<hr>\n<p>사용자가 렌더된 페이지를 본 이후에도 Ajax를 사용하여 데이터를 추가로 더 받아올 수도 있겠지만 일단 사용자가 완성된 페이지를 보는 시점은 6번 과정이 끝난 이후기 때문에 Ajax와 같은 예외는 생략했다.</p>\n<p>또한 2번 과정에서 어째서 이 방식의 어플리케이션이 MPA라고 불리는 지 알 수 있는데, 각 페이지에 매칭된 HTML Template이 따로 존재하기 때문이다.\n다음과 같은 방식의 장단점은 다음과 같다.</p>\n<h4 id=\"장점\" style=\"position:relative;\">장점<a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>서버에서 완성된 HTML을 내려주기 때문에 SEO(Search Engine Optimization)에 최적화되어 있다.</li>\n<li>매 페이지에서 필요한 리소스만 로딩하기 때문에 초기 로딩속도를 최적화할 수 있다.</li>\n</ul>\n<h4 id=\"단점\" style=\"position:relative;\">단점<a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>매 페이지 로딩 시마다 새로운 리소스를 요청해야하므로 전체적인 트래픽이 증가한다.</li>\n<li>페이지 이동 시 마다 새로고침이 되며 전체 페이지를 다시 렌더하므로 로딩 시간이 길어진다.</li>\n</ul>\n<h2 id=\"client-side-rendering을-수행하는-single-page-application\" style=\"position:relative;\">Client Side Rendering을 수행하는 Single Page Application<a href=\"#client-side-rendering%EC%9D%84-%EC%88%98%ED%96%89%ED%95%98%EB%8A%94-single-page-application\" aria-label=\"client side rendering을 수행하는 single page application permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>최근 들어 많은 수의 Frontend 개발자가 Client Side Rendering을 수행하는 A.K.A SPA(Single Page Application)를 개발한다. 즉, 서버에서 실제로 다운로드 받는 페이지는 단 1개이고 그 이후 JavaScript를 통해 동적인 렌더링을 실시하는 어플리케이션을 의미한다.</p>\n<p>대략적인 실행 순서는 다음과 같다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f7c73717983bb1dd64d902e6c3334943/01a87/csr.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRElEQVR42p2T246DMAxE+f/vQzzwwBMUKJSKS7kV6upEcpQCu0s30ogoccZje/Cu16v4vi9RFEnTNPLtqutawjCUIAgkz3Px+r6XsiylbVuZ5/kjeFkWeT6fBu5+XVcbM02TEXK73QQuTw81GFLAnkRpmkqSJCY7+ziOjSrueUeiYRhkHEeTwBK+Xq9D8IBgBeqOYrQ6Q4hUsrhlaZmUgzp6DVS9C84QZQnJfBSIGu4gBdpnErnQ8i0h6rRsSIAqhASFRVEYhSQ4pfDxeFh0XWcCzy6EfPQQhff7XaqqMl8soBn/Rbidsp5dLhfJssx+1TYkdHtI7K5kDtSDW+gDN0bJdHCHPjxTGotBoZghMSyMTtt2ttnaQQ2rE+ahOmA75Q+FvxECjM/k1fx/+pAHNFr9xrS/Wbsp61+xnfRPPTw6RymEb4ZY5cKFHVMWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"csr\" title=\"\" src=\"/static/f7c73717983bb1dd64d902e6c3334943/6af66/csr.png\" srcset=\"/static/f7c73717983bb1dd64d902e6c3334943/69538/csr.png 160w,\n/static/f7c73717983bb1dd64d902e6c3334943/72799/csr.png 320w,\n/static/f7c73717983bb1dd64d902e6c3334943/6af66/csr.png 640w,\n/static/f7c73717983bb1dd64d902e6c3334943/d9199/csr.png 960w,\n/static/f7c73717983bb1dd64d902e6c3334943/21b4d/csr.png 1280w,\n/static/f7c73717983bb1dd64d902e6c3334943/01a87/csr.png 1288w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<hr>\n<ol>\n<li>클라이언트가 서버에 <code class=\"language-text\">example.com/products/12</code> URL로 요청을 보낸다.</li>\n<li>서버에서는 뭐가 됐던 요청 URL이 <code class=\"language-text\">exmplate.com</code>으로 시작하면 <code class=\"language-text\">index.html</code>을 찾아서 내려준다.</li>\n<li>그리고 추가로 JavaScript Bundle을 같이 내려준다. 예를 들면 Webpack같은 모듈러로 빌드하면 나오는 <code class=\"language-text\">bundle.js</code>같은 파일이 되겠다.</li>\n<li><code class=\"language-text\">bundle.js</code>을 실행한 클라이언트가 <code class=\"language-text\">api.example.com/products/12</code> API를 사용하여 12번 상품의 데이터를 서버에 요청한다.</li>\n<li>서버는 Database에서 12번 상품의 데이터를 가져온 후 클라이언트에 데이터를 내려준다.</li>\n<li>클라이언트는 받아온 데이터를 사용하여 뷰가 렌더한다.</li>\n<li>최종적으로 사용자가 뷰를 본다.</li>\n</ol>\n<hr>\n<p>아까에 비해서 뭔가 복잡해졌다. 이 방식이 SPA인 이유는 2번 과정에 있다. 보통 Nginx나 Apache같은 서버 엔진의 설정에 해당 url을 선언하고 조건에 일치하는 url로 요청이 들어왔을 경우 <code class=\"language-text\">index.html</code>파일을 찾아서 보내준다. 어떤 url이든 조건에 일치하게 되면 <code class=\"language-text\">index.html</code> 하나만 보내주기 때문에 Single Page라고 하는 것이다.</p>\n<p>그리고 클라이언트는 현재 12번 상품의 데이터를 가지고 있지 않기 때문에 추가적으로 API 호출을 하여 12번 상품의 데이터를 받아와야 한다.</p>\n<p>그럼 SPA의 장단점도 한번 살펴보자.</p>\n<h4 id=\"장점-1\" style=\"position:relative;\">장점<a href=\"#%EC%9E%A5%EC%A0%90-1\" aria-label=\"장점 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>초기 로딩 시 서버로부터 모든 정적 리소스를 내려받은 후에는 페이지 이동 시 필요한 데이터만 내려받으므로 로딩 속도가 빠르고 전체적인 트래픽을 감소시킬 수 있다.</li>\n<li>페이지 이동 시 새로고침이 되지 않으므로 사용자 경험(UX)가 향상된다.</li>\n</ul>\n<h4 id=\"단점-1\" style=\"position:relative;\">단점<a href=\"#%EB%8B%A8%EC%A0%90-1\" aria-label=\"단점 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>초기 로딩 시 현재 페이지에서 사용하지않는 모든 정적 리소스를 받으므로 초기 로딩속도가 느리다.</li>\n<li>SEO에 취약하다.</li>\n</ul>\n<h2 id=\"ssr-vs-spa\" style=\"position:relative;\">SSR vs SPA<a href=\"#ssr-vs-spa\" aria-label=\"ssr vs spa permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>각 방식의 대략적인 실행 흐름과 장단점을 살펴보았는데, SSR과 SPA 두 방식 모두 로딩 속도라는 장단점을 가지고 있다. 뭐가 다른 걸까?</p>\n<p>SSR의 장점은 초기 로딩속도이다. SPA는 첫 로딩 시 전체 어플리케이션에서 사용하는 모든 정적 리소스를 내려받기 때문에 초기 로딩속도는 느리지만 그 이후에는 추가적으로 리소스를 다운로드 받을 필요가 없기 때문에 이후 구동 속도가 빠른 것이다.</p>\n<p>반면 SSR은 현재 페이지에서 필요한 리소스만 로딩하면 되기 때문에 초기 로딩속도는 SPA에 비해서 빠를 수 있다. 그러나 받아온 정적 리소스를 어딘가에 저장하고 있는 게 아니기 때문에 페이지를 이동할때마다 저번 페이지에서 받아왔던 리소스라고 하더라도 처음부터 다시 받아와야한다.</p>\n<p>그래서 어플리케이션 초기화 후 페이지 이동 시 로딩 시간은 SSR이 더 느릴 수 있다.</p>\n<p>하지만 SPA방식의 어마무시한 단점은 바로 SEO다. SEO는 Search Engine Optimization의 약자로 직역 그대로 검색엔진 최적화를 의미한다.</p>\n<p>검색 엔진은 기본적으로 크롤링을 해서 페이지를 수집하는 방식으로 이루어져있는데, 문제는 크롤링을 하는 봇들이 JavaScript를 실행할 수 있는 능력이 없다는 것이다.</p>\n<p>최근 구글 크롤러 같은 경우는 JavaScript 실행능력이 있다고 하지만 개인적으로 아직까지 그렇게까지 신뢰가 가는 정도는 아니라고 본다. 게다가 Facebook과 같은 SNS에 페이지 공유를 했을때에는 Open Graph 태그를 크롤러가 읽어야지 공유된 사이트의 정보가 올바르게 표시되는데, JavaScript가 실행되지 않은 페이지를 크롤러가 읽었을 때는 그냥 빈 페이지밖에 없으니 정보를 제대로 표시해주지 못하는 문제도 있었다.</p>\n<p>필자도 이 문제를 해결하기 위해 <code class=\"language-text\">#!</code>(해쉬뱅)이라던가 <code class=\"language-text\">_esacped_fragment_</code>이러단가 <code class=\"language-text\">Pre rendering</code> 같은 방법들을 사용해봤었지만 검색엔진사에서 권장하는대로 어플리케이션을 작성해도 SSR방식에 비해 데이터를 제대로 못긁어가는 건 어쩔 수 없었다.</p>\n<h2 id=\"새로운-개념의-server-side-rendering의-등장\" style=\"position:relative;\">새로운 개념의 Server Side Rendering의 등장<a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%9C%EB%85%90%EC%9D%98-server-side-rendering%EC%9D%98-%EB%93%B1%EC%9E%A5\" aria-label=\"새로운 개념의 server side rendering의 등장 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>SSR을 택하자니 SPA의 장점이 아깝고, SPA를 택하자니 SSR의 장점이 아깝다. 그럼 어떻게 해야할까? 그래서 나온 방식이 최근에 많이 사용하고 있는 두 방식을 적당히 짬뽕한 방식이다.\n사용자의 첫 요청시에만 SSR을 수행하고, 그 이후는 SPA처럼 동적인 렌더링을 수행하는 것이다. 이 방식은 아래와 같은 장점을 가진다.</p>\n<h4 id=\"장점-2\" style=\"position:relative;\">장점<a href=\"#%EC%9E%A5%EC%A0%90-2\" aria-label=\"장점 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<hr>\n<ol>\n<li>첫 요청을 SSR로 완성된 HTML을 내려줌으로써 SEO와 초기 렌더링 속도문제를 해결</li>\n<li>이후 클라이언트에서 렌더링을 수행함으로써 SPA의 장점인 페이지 이동 시 빠른 렌더 속도도 그대로 가져감</li>\n<li>Frontend 프레임워크 3대장인 Angular, React, Vue 모두 이러한 SSR 방식을 공식으로 지원하기 때문에 Client와 Server를 같은 Context로 묶을 수 있음. 즉, 내가 만든 컴포넌트는 클라이언트에서 렌더를 수행하든 서버에서 렌더를 수행하든 동일하게 실행된다.</li>\n</ol>\n<hr>\n<p>하지만 모든 기술에는 Trade-off가 있는 법…단점은 뭐가 있을까?</p>\n<h4 id=\"단점-2\" style=\"position:relative;\">단점<a href=\"#%EB%8B%A8%EC%A0%90-2\" aria-label=\"단점 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<hr>\n<ol>\n<li>코드가 복잡하다. 어플리케이션 구동 순서를 확실하게 파악하고 있지 않다면 진짜 헷갈린다.</li>\n<li>서버에서 렌더링을 수행하므로 단순 리소스 서빙보다는 아무래도 CPU를 많이 사용하게 되고, 부하가 걸릴 수 있다.</li>\n<li>서버에 익숙하지 않은 Frontend 개발자의 경우 클라이언트처럼 개발을 진행하게 되면 의도하지 않은 버그가 생길 수 있다.</li>\n</ol>\n<hr>\n<p>특히 2번과 3번 같은 경우 필자가 간과했던 부분인데, 클라이언트에서는 아무 문제 없었을 부분이 서버에서는 치명적인 실수가 되어 버그로 돌아오는 경험을 했다.</p>\n<p><a href=\"/2018/09/25/vue-ssr\">다음 포스팅</a>에서는 필자가 회사에 Vue-ssr을 도입했던 경험과 어떤 실수를 했는지에 대해서 적어보고 회고하려고 한다.</p>\n<p>이상으로 Universal Server Side Rendering이란? 포스팅을 마친다.</p>","fields":{"slug":"20180925-universal-ssr","path":"/2018/09/25/universal-ssr/","lang":"ko"},"frontmatter":{"title":"Universal Server Side Rendering이란?","subTitle":"SEO 최적화와 성능을 모두 잡는 렌더링 기법","date":"Sep 25, 2018","categories":["프로그래밍","웹","튜토리얼"],"tags":["SPA","Single Page Application","SSR","Server Side Rendering","서버사이드 렌더링","Universal Server Side Rendering","NextJS","NuxtJS","SEO"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/101302650c27400e337e88ad4e0633a6/d803c/thumbnail.png","srcSet":"/static/101302650c27400e337e88ad4e0633a6/d803c/thumbnail.png 320w,\n/static/101302650c27400e337e88ad4e0633a6/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/101302650c27400e337e88ad4e0633a6/fc5c5/thumbnail.webp 320w,\n/static/101302650c27400e337e88ad4e0633a6/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/101302650c27400e337e88ad4e0633a6/01fb2/thumbnail.png","srcSet":"/static/101302650c27400e337e88ad4e0633a6/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/101302650c27400e337e88ad4e0633a6/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"386bf9f9-3691-5002-818f-bc32442320c6","tableOfContents":"<ul>\n<li>\n<p><a href=\"#express-checkout%EC%9D%B4%EB%9E%80\">Express Checkout이란?</a></p>\n<ul>\n<li><a href=\"#paypal-standard\">Paypal Standard</a></li>\n<li><a href=\"#express-checkout\">Express Checkout</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#express-checkout%EC%9D%98-%ED%9D%90%EB%A6%84\">Express Checkout의 흐름</a></p>\n</li>\n<li>\n<p><a href=\"#client%EB%A7%8C%EC%9C%BC%EB%A1%9C-%EC%A7%84%ED%96%89%ED%95%98%EA%B8%B0\">Client만으로 진행하기</a></p>\n</li>\n<li>\n<p><a href=\"#client%EC%99%80-server%EC%9D%98-%ED%86%B5%EC%8B%A0%EC%9C%BC%EB%A1%9C-%EC%A7%84%ED%96%89%ED%95%98%EA%B8%B0\">Client와 Server의 통신으로 진행하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%ED%96%89%EA%B2%B0%EA%B3%BC\">실행결과</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 Paypal의 RESTful API인 Express Checkout을 사용하는 방법에 대해서 포스팅 하려고 한다. 진행하기에 앞서 먼저, 페이팔 샌드박스 홈페이지에 접속해서 sandbox용 계정을 만들어야 한다.","html":"<p>이번 포스팅에서는 Paypal의 RESTful API인 Express Checkout을 사용하는 방법에 대해서 포스팅 하려고 한다. 진행하기에 앞서 먼저, <a href=\"https://www.sandbox.paypal.com/\" target=\"_blank\" rel=\"nofollow\">페이팔 샌드박스 홈페이지</a>에 접속해서 sandbox용 계정을 만들어야 한다.</p>\n<!-- more -->\n<p>이 계정으로 테스트를 진행하고 실제 운영 계정은 <a href=\"https://www.paypal.com/kr/home\" target=\"_blank\" rel=\"nofollow\">페이팔 홈페이지</a>에서 회원가입하면 된다.</p>\n<h2 id=\"express-checkout이란\" style=\"position:relative;\">Express Checkout이란?<a href=\"#express-checkout%EC%9D%B4%EB%9E%80\" aria-label=\"express checkout이란 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Paypal에서 제공해주는 결제 플로우 방식 중 하나이며, 유저가 “페이팔로 구매하기” 버튼을 클릭했을 때 페이팔 로그인 Modal window가 렌더되고, 이를 통해 결제를 진행하는 플로우이다.\n모든 국가를 지원하며, 브라우저 지원은 다음과 같다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Internet Explorer</th>\n<th align=\"center\">Chrome</th>\n<th align=\"center\">Mozila Firefox</th>\n<th align=\"center\">Safari</th>\n<th align=\"center\">Opera</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">v9~</td>\n<td align=\"center\">v27~</td>\n<td align=\"center\">v30~</td>\n<td align=\"center\">v5.1~</td>\n<td align=\"center\">v23~</td>\n</tr>\n</tbody>\n</table>\n<p>Paypal에서는 총 3가지의 결제플로우를 제공하고 있으며, 한국에서는 이 중 All countries로 제공되는 다음 2가지 방식 중 선택이 가능하다.</p>\n<h3 id=\"paypal-standard\" style=\"position:relative;\">Paypal Standard<a href=\"#paypal-standard\" aria-label=\"paypal standard permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Paypal에서 제공해주는 HTML코드를 기반으로 생성된 버튼을 웹 클라이언트 소스에 직접 삽입하는 방식이다.\nPaypal사이트에서 직접 상품 이름, 상품 ID, 가격 등을 입력하면 그에 맞는 버튼의 코드를 자동으로 생성해준다. 이후 그 코드를 클라이언트 소스에 삽입하면 된다.</p>\n<h3 id=\"express-checkout\" style=\"position:relative;\">Express Checkout<a href=\"#express-checkout\" aria-label=\"express checkout permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Paypal의 JavaScript SDK인 checkout.js를 사용하여 버튼을 동적으로 렌더하는 방식이다.\n상품 데이터를 본인 서비스의 서버로 전달한 후 Server to Server방식으로 Paypal서버에서 인증을 받는 방식으로 진행된다. 필자는 이 방법을 선택하였다.</p>\n<h2 id=\"express-checkout의-흐름\" style=\"position:relative;\">Express Checkout의 흐름<a href=\"#express-checkout%EC%9D%98-%ED%9D%90%EB%A6%84\" aria-label=\"express checkout의 흐름 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>이 섹션은 Paypal Developer 페이지의 <a href=\"https://developer.paypal.com/docs/orders-integration-guide/?mark=express%20checkout#\" target=\"_blank\" rel=\"nofollow\">Express Checkout</a>항목을 참고하여 작성하였다.</p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/89c08c41f83f1354f7b221c51a4d2dcc/01dae/flow.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 19.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVR42lWNTU+DQBiE+f8/xysn9aAXJWlso5QIhV0KpYHly93l6xEajfFJ5jAzed9xwuDIKfCRUqCqipcg4f49wU/OtKpkH0kejim7T0FTK4QQhGFIkiSUZcklz0mzC7FI177GefZj7nYR8pzdgii/8nZKycuaRlXIa8XrR0iUFXRdx+FwwHVdPM+jUuo2sk9bRKEwusdp9UDRGewwskwjstY8yYZGW1j91j3GFWmjWeYJbQxFUdC2LdM0Ya2l73uM0YzjhDPPM+OwHv+wLAtfWv/5VduTLf9lGIZ/3lrDvI5tfAP9sC7SOWTQKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"express-checkout-flow\" title=\"\" src=\"/static/89c08c41f83f1354f7b221c51a4d2dcc/6af66/flow.png\" srcset=\"/static/89c08c41f83f1354f7b221c51a4d2dcc/69538/flow.png 160w,\n/static/89c08c41f83f1354f7b221c51a4d2dcc/72799/flow.png 320w,\n/static/89c08c41f83f1354f7b221c51a4d2dcc/6af66/flow.png 640w,\n/static/89c08c41f83f1354f7b221c51a4d2dcc/01dae/flow.png 721w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Express Checkout의 전체 플로우</small>\n</center>\n<p>쉽게 생각하면 Facebook이나 Instagram계정으로 로그인하는 플로우와 UX가 비슷하다고 보면 된다.</p>\n<p>유저가 구매버튼을 클릭하면 데스크탑에서는 팝업, 모바일에서는 새 탭의 형태로 페이팔 로그인 창이 열리고, 유저는 그 창에서 인증과 결제를 순차적으로 진행하게 된다.</p>\n<p>이후 모든 플로우가 끝나면 유저는 결제 진행 결과에 따라 페이팔에 <code class=\"language-text\">redirect_url</code>파라미터로 보내졌던 URL로 이동을 하게되며 최종적으로 성공, 실패, 취소에 따른 페이지와 결제 정보 결과를 보게 된다.\nPaypal서버와 통신하는 방법으로는 <code class=\"language-text\">RESTful API</code>와 <code class=\"language-text\">NVP/SOAP API</code>로 2가지 방법이 있으나 본 문서에서는 <code class=\"language-text\">RESTful API</code>만 기술하겠다.</p>\n<p>Paypal Express Checkout의 플로우는 다음과 같다.</p>\n<hr>\n<ol>\n<li>유저가 구매버튼을 클릭</li>\n</ol>\n<ul>\n<li>Express Checkout의 client SDK인 <code class=\"language-text\">checkout.js</code>를 통해 로그인 모달창이 열리거나 API서버가 Paypal API를 호출하여 <code class=\"language-text\">payment</code>이벤트를 초기화한다.</li>\n<li><code class=\"language-text\">payment</code> 이벤트 초기화 후, Express Checkout 플로우가 모달창 내부에서 시작된다.</li>\n</ul>\n<ol start=\"2\">\n<li>유저가 페이팔 로그인을 진행</li>\n<li>유저가 결제 정보를 확인 후 <code class=\"language-text\">Contunue</code> 버튼을 클릭</li>\n<li>유저가 <code class=\"language-text\">Continue</code> 버튼을 클릭하면 다시 서비스의 리다이렉트페이지로 이동하며 최종 결제 정보가 표시된다.</li>\n</ol>\n<p>결제 정보를 생성할 때 보냈던 상품 정보 파라미터는 이 단계에서 노출시키는 것이 좋다.\n5. 최종적으로 <code class=\"language-text\">execute</code> API가 호출되고 결제가 마무리된다. 그리고 사용자는 서비스 상의 결제완료 페이지로 리다이렉트된다.</p>\n<hr>\n<h2 id=\"client만으로-진행하기\" style=\"position:relative;\">Client만으로 진행하기<a href=\"#client%EB%A7%8C%EC%9C%BC%EB%A1%9C-%EC%A7%84%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"client만으로 진행하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>Paypal 공식문서에서는 Express Checkout과의 버전 호환성을 최대한 보장하기 위해 CDN을 이용한 동적로딩을 추천하고 있다. 직접 <code class=\"language-text\">checkout.js</code>파일을 다운받아 클라이언트 소스에 넣는 것은 추천하지 않는다.</p>\n</blockquote>\n<blockquote>\n<p>이 문서에서의 <code class=\"language-text\">checkout.js</code>의 버전은 <code class=\"language-text\">4.0</code>으로 진행한다.</p>\n</blockquote>\n<p>지금 작성하는 플로우는 필자 서비스의 API서버를 통하지 않고 <code class=\"language-text\">checkout.js</code>를 이용하여 바로 페이팔 서버로부터 인증과 결제까지 한번에 마치는 방법이다.</p>\n<p>클라이언트에서는 데이터를 정의하고 <code class=\"language-text\">checkout.js</code>를 사용하여 Paypal결제 버튼을 렌더한다. 이 버튼을 클릭하면 <code class=\"language-text\">checkout.js</code>의 내장 메소드를 호출하여 자동으로 인증과 결제토큰생성, 결제 완료까지 한큐에 진행하게 된다.</p>\n<p>먼저, <code class=\"language-text\">checkout.js</code> SDK의 동적로딩을 위해 <code class=\"language-text\">index.html</code>파일에 <code class=\"language-text\">script</code>태그를 열고 다음 스크립트를 작성하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> _DOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  _DOM<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.paypalobjects.com/api/checkout.js'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  element<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>_DOM<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이후 Paypal버튼을 DOM을 작성해주고 <code class=\"language-text\">checkout.js</code>를 사용해 버튼을 렌더한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pay-test-btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Test to payment<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">paypal<span class=\"token punctuation\">.</span>Button<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">env</span><span class=\"token operator\">:</span> <span class=\"token string\">'sandbox'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 테스트용은 'sandbox'를, 운영은 'production'을 입력</span>\n  <span class=\"token literal-property property\">client</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">sandbox</span><span class=\"token operator\">:</span> <span class=\"token string\">'paypal-sandbox-key'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// paypal에서 발급 받은 client_key를 입력</span>\n    <span class=\"token literal-property property\">production</span><span class=\"token operator\">:</span> <span class=\"token string\">'paypal-production-key'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">payment</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> env <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> paypal<span class=\"token punctuation\">.</span>rest<span class=\"token punctuation\">.</span>payment<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">transactions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token string\">'10.00'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">commit</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// false일 시 모달의 마지막 버튼의 문구가 Continue로 변하고 바로 결제가 진행되는 것이 아니라 리다이렉트 페이지로 이동한다.</span>\n  <span class=\"token comment\">// true일 시 Pay Now로 변하고 바로 결제가 진행된다</span>\n  <span class=\"token function-variable function\">onAuthorize</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> actions</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> actions<span class=\"token punctuation\">.</span>payment<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 결제 성공 시 콜백파라미터인 res에 데이터가 담겨온다</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#pay-test-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그러면 아래와 같이  아까 작성한 <code class=\"language-text\">#pay-test-btn</code> DOM엘리먼트에 자동으로 Paypal버튼이 렌더된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 234px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5f4924c16a7d079417dcd1d09fe3ad50/a63a1/paypal-button.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHaVppYBf/EABoQAQEAAgMAAAAAAAAAAAAAAAECAAMQERL/2gAIAQEAAQUCXoKHhPROuZc//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEQETH/2gAIAQEABj8COzGalP/EABkQAQACAwAAAAAAAAAAAAAAAAEAEBEhMf/aAAgBAQABPyEMjyL4NqNeDNMTX//aAAwDAQACAAMAAAAQ1A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAAMBAAAAAAAAAAAAAAABEQAQMSH/2gAIAQEAAT8QZPB1w6ZXAdFHfJLMBsES3X//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"paypal-button\" title=\"\" src=\"/static/5f4924c16a7d079417dcd1d09fe3ad50/a63a1/paypal-button.jpg\" srcset=\"/static/5f4924c16a7d079417dcd1d09fe3ad50/0913d/paypal-button.jpg 160w,\n/static/5f4924c16a7d079417dcd1d09fe3ad50/a63a1/paypal-button.jpg 234w\" sizes=\"(max-width: 234px) 100vw, 234px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>버튼 모양이 조금 이상해졌지만 신경쓰지 말자...</small>\n</center>\n<p>정상적으로 버튼이 렌더되었다면 이제 테스트 결제를 진행해보자. 저 버튼을 클릭하면 아래와 같은 창이 하나 뜰 것이다. 이 창은 사용자의 이용환경이 데스크탑이냐, 모바일이냐에 따라 팝업창, iframe또는 새 탭으로 열릴 수 있다.</p>\n<p>이 창을 Paypal에서는 Light window라고 부르지만 이 포스팅에서는 편의상 그냥 “로그인 모달”이라고 하겠다. 이 후 사용자는 로그인 모달의 안내에 따라 결제를 진행하게 되고, 최종 결제가 완료되면 <code class=\"language-text\">onAuthorize</code>메소드에 있는 Promise Callback함수의 <code class=\"language-text\">res</code> 파라미터로 결과값을 전달받게 된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 252px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6ec0fda48bf17da3be915e442d513bee/112e4/light-window.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFNcDkmMF//xAAaEAACAgMAAAAAAAAAAAAAAAACAxAUAAES/9oACAEBAAEFAlL73WGAMgyw2P/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAAGAwAAAAAAAAAAAAAAAAABAhARMiIxkv/aAAgBAQAGPwLcC6uWxOBc2//EABkQAQEBAAMAAAAAAAAAAAAAAAERABAh8f/aAAgBAQABPyEmFQXou9jkjlKieAXf/9oADAMBAAIAAwAAABDPz//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAEDAQE/EKf/xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QEX//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhUTFB0fH/2gAIAQEAAT8QH9ZDvnRLUDIwNTTUVnSlKyT5R5FVXuf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"light-window\" title=\"\" src=\"/static/6ec0fda48bf17da3be915e442d513bee/112e4/light-window.jpg\" srcset=\"/static/6ec0fda48bf17da3be915e442d513bee/0913d/light-window.jpg 160w,\n/static/6ec0fda48bf17da3be915e442d513bee/112e4/light-window.jpg 252w\" sizes=\"(max-width: 252px) 100vw, 252px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<h2 id=\"client와-server의-통신으로-진행하기\" style=\"position:relative;\">Client와 Server의 통신으로 진행하기<a href=\"#client%EC%99%80-server%EC%9D%98-%ED%86%B5%EC%8B%A0%EC%9C%BC%EB%A1%9C-%EC%A7%84%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"client와 server의 통신으로 진행하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이 플로우는 Paypal에서 발급해주는 <code class=\"language-text\">client_key</code>와 <code class=\"language-text\">secret</code>을 이용하여 페이팔 인증부터 차례대로 진행하는 방법이다.</p>\n<p>이 방법의 장점으로는 본인의 서비스의 UX플로우를 최대한 지키며 결제를 진행시킬 수 있고, 첫번째 방법보다 플로우가 유연하며 버튼 디자인또한 css로 커스터마이징이 자유롭다.</p>\n<p>그런 이유로 Paypal에서도 이 방법을 권장하고 있다. 결제플로우는 크게 3가지 단계로 나눠진다.</p>\n<hr>\n<ol>\n<li><code class=\"language-text\">client_key</code>와 <code class=\"language-text\">secret</code>을 사용하여 페이팔 서버로부터 액세스토큰을 받는 인증 과정</li>\n<li>결제를 <code class=\"language-text\">create</code>하는 과정</li>\n<li>결제를 <code class=\"language-text\">execute</code>하는 과정</li>\n</ol>\n<hr>\n<p>먼저 클라이언트는 버튼을 렌더하고 본 서비스의 API를 통해 <code class=\"language-text\">create</code>요청을 보내야한다. 이때 전 플로우와의 차이점은 딱히 <code class=\"language-text\">checkout.js</code>를 사용하지않아도 딱히 상관이 없다는 점이다. 먼저 버튼을 렌더한다. 참고로 필자는 <code class=\"language-text\">AngularJS</code>와 <code class=\"language-text\">md-material</code>을 사용하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">layout-align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>column<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>md-button</span> <span class=\"token attr-name\">md-color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{background: 'blue-grey'}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ng-click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>vm.postData()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      TEST\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>md-button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이후 Paypal 결제를 다른 페이지에서 사용하게 될때 중복로직을 작성해야하므로 따로 팩토리를 정의했다. 따로 팩토리를 정의하지 않고 컨트롤러 내부에 구현해도 상관은 없다. 이 팩토리에서는 필자의 API서버와 통신을 한 후 <code class=\"language-text\">Promise</code>를 사용하여 다시 컨트롤러로 값을 전달한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n  angular\n    <span class=\"token punctuation\">.</span><span class=\"token function\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">'services'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">factory</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PaypalService'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'$rootScope'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Restangular'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'SNS_KEYS'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$q'</span><span class=\"token punctuation\">,</span>\n      PaypalService\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">PaypalService</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">$rootScope<span class=\"token punctuation\">,</span> Restangular<span class=\"token punctuation\">,</span> <span class=\"token constant\">SNS_KEYS</span><span class=\"token punctuation\">,</span> $q</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//페이팔에서 발급해준 키를 전역으로 사용하기 위해 app.constants에 미리 담아놓았다.</span>\n      <span class=\"token keyword\">var</span> clientKey <span class=\"token operator\">=</span> <span class=\"token constant\">SNS_KEYS</span><span class=\"token punctuation\">.</span>paypal<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">/**\n        * @public\n        * @name create\n        * @description create paypal payment request\n        * @param { Object } data\n        * @return { Promise }\n        */</span>\n      <span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> defer <span class=\"token operator\">=</span> $q<span class=\"token punctuation\">.</span><span class=\"token function\">defer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        data<span class=\"token punctuation\">.</span>clientKey <span class=\"token operator\">=</span> clientKey<span class=\"token punctuation\">;</span>\n        data<span class=\"token punctuation\">.</span>redirect_urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">return_url</span><span class=\"token operator\">:</span> location<span class=\"token punctuation\">.</span>origin <span class=\"token operator\">+</span> <span class=\"token string\">'/paypal/result'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 결제가 완료되었을 때 리다이렉트될 페이지</span>\n          <span class=\"token literal-property property\">cancel_url</span><span class=\"token operator\">:</span> location<span class=\"token punctuation\">.</span>origin <span class=\"token operator\">+</span> <span class=\"token string\">'/paypal/result'</span> <span class=\"token comment\">// 결제가 취소되었을 때 리다이렉트 될 페이지, return_url과 같아도 상관없다</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// API서버의 API endpoint</span>\n        Restangular<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token string\">'paypal/payments/create'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">customPOST</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> defer<span class=\"token punctuation\">.</span>promise<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">/**\n        * @name execute\n        * @description execute paypal payment\n        * @param { Object } data\n        * @return { Promise}\n        */</span>\n      <span class=\"token keyword\">function</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> defer <span class=\"token operator\">=</span> $q<span class=\"token punctuation\">.</span><span class=\"token function\">defer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// API서버의 API endpoint</span>\n        Restangular<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/paypal/payments/execute'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">customPOST</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> defer<span class=\"token punctuation\">.</span>promise<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">/**\n        * @name getPaymentInfo\n        * @description getting created paypal payment information\n        * @param { Object } data\n        * @return { Promise }\n        */</span>\n      <span class=\"token keyword\">function</span> <span class=\"token function\">getPaymentInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> defer <span class=\"token operator\">=</span> $q<span class=\"token punctuation\">.</span><span class=\"token function\">defer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// API서버의 API endpoint</span>\n        Restangular<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/paypal/payments/detail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">customGET</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          defer<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">create</span><span class=\"token operator\">:</span> create<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">execute</span><span class=\"token operator\">:</span> execute<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">getPaymentInfo</span><span class=\"token operator\">:</span> getPaymentInfo\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이후 버튼을 렌더한 html파일에 물려있는 Controller에서 위에서 정의한 Paypal 서비스를 호출한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n  angular\n    <span class=\"token punctuation\">.</span><span class=\"token function\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">controller</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PaypalCreateController'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'$rootScope'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$scope'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PaypalService'</span><span class=\"token punctuation\">,</span>\n      PaypalCreateController\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">PaypalCreateController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> vm <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">//테스트를 위한 더미데이터를 정의한다. 실서비스에는 이 데이터들이 폼에 바인딩 될 것이다.</span>\n      vm<span class=\"token punctuation\">.</span>paymentData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">transactions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token string\">'1.00'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'This is the description'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">item_list</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n              <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'This is test product'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">price</span><span class=\"token operator\">:</span> <span class=\"token string\">'1.00'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">sku</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n      vm<span class=\"token punctuation\">.</span>postData <span class=\"token operator\">=</span> postData<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">function</span> <span class=\"token function\">postData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> angular<span class=\"token punctuation\">.</span><span class=\"token function\">copy</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>paymentData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Deep Copy를 하는 이유는 데이터를 전송하기전에 변조해야할 경우가 생길 수 있기 때문이며</span>\n        <span class=\"token comment\">// Object타입은 기본적으로 Call by reference이기때문에 여기서 변조를 해버리면 원본 데이터도 함께 변조되기 때문이다.</span>\n        PaypalService<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// Paypal에서는 총 3개의 url을 리턴해주는데</span>\n          <span class=\"token comment\">// links[0] = 방금 생성된 결제정보의 자세한 값을 받을 수 있는 GET메소드 요청 URL</span>\n          <span class=\"token comment\">// links[1] = 생성된 결제페이지의 리다이렉트 URL</span>\n          <span class=\"token comment\">// links[2] = 결제 실행 URL</span>\n          <span class=\"token comment\">// 순으로 나열된다.</span>\n          window<span class=\"token punctuation\">.</span>location <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span>links<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 API서버는 클라이언트에서 보내준 값들을 가지고 Paypal서버와 통신하여 인증을 진행하는 로직을 가지고 있어야한다. 필자의 API서버는 <code class=\"language-text\">Laravel 5.x</code>로 되어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Controllers</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Log</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Request</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Requests</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Controllers<span class=\"token punctuation\">\\</span>Controller</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GuzzleHttp<span class=\"token punctuation\">\\</span>Client</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">PaypalPaymentController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Controller</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$client</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$paymentUrl</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$accessToken</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">client</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Client</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// 페이팔에서 발급받은 access token값을 env에서 가져온다</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">accessToken</span> <span class=\"token operator\">=</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'PAYPAL_ACCESS_TOKEN_SANDBOX'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// 지금은 테스트 중이라 sandbox url로 요청을 날리고있다. 본 서비스는 sandbox를 제거하고 api.paypal.com으로 날리면 된다.</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">paymentUrl</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"https://api.sandbox.paypal.com/v1/payments/payment\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">detail</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Request</span> <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">client</span><span class=\"token operator\">-></span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">paymentUrl</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'paymentId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string single-quoted-string\">'headers'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string double-quoted-string\">\"Content-Type\"</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"application/json\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"Authorization\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">accessToken</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$decodeResult</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">response</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$decodeResult</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">payment</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Request</span> <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">client</span><span class=\"token operator\">-></span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">paymentUrl</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string single-quoted-string\">'headers'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string double-quoted-string\">\"Content-Type\"</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"application.json\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"Authorization\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">accessToken</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'json'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span> <span class=\"token comment\">// Paypal서버에 날릴 요청의 Body, 페이팔 공식사이트에 적혀있는 파라미터와 동일해야한다.</span>\n                <span class=\"token string double-quoted-string\">\"intent\"</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"sale\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"redirect_urls\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token property\">redirect_urls</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"payer\"</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string double-quoted-string\">\"payment_method\"</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"paypal\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 한국은 paypal메소드밖에 지원이 안된다</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"transactions\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token property\">transactions</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// client에서 보내준 결제 정보</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$decodeResult</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">response</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$decodeResult</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Request</span> <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">client</span><span class=\"token operator\">-></span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">paymentUrl</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token property\">paymentId</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/execute'</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string single-quoted-string\">'headers'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string double-quoted-string\">\"Content-Type\"</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"application/json\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string double-quoted-string\">\"Authorization\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">accessToken</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'json'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string double-quoted-string\">\"payer_id\"</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token property\">PayerID</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">getContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$decodeResult</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">response</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$decodeResult</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 클라이언트에서 테스트 버튼을 클릭하면 미리 필자가 정의한 API인 <code class=\"language-text\">/paypal/payment/create</code>를 통해 필자의 API 서버로 결제 데이터가 전송되고, API서버는 다시 그 데이터를 가지고 Paypal 서버와 통신 후 클라이언트로 결과를 반환해 줄 것이다. 그 후 클라이언트는 리턴된 데이터의 <code class=\"language-text\">link[1]</code>에 담긴 리다이렉트페이지를 그냥 열기만 하면 결제가 시작된다!</p>\n<p>왜 <code class=\"language-text\">link[1]</code>인지는 아래에서 다시 설명하겠다.</p>\n<p>이후 사용자는 Paypal 로그인 상태에 따라 로그인페이지 또는 결제 확인 페이지로 이동하게되며, Paypal의 결제 확인 창에서 Continue 버튼을 누르면 아까 우리가 <code class=\"language-text\">create</code> API를 통해 보내놓았던 <code class=\"language-text\">redirect_url</code>페이지로 랜딩된다.</p>\n<p>이때 Paypal은 사용자가 최종 결제 확인을 했고, 이제 결제를 시작해도 된다는 데이터를 <code class=\"language-text\">redirect_url</code>뒤에 쿼리스트링의 형태로 붙혀서 보내준다.</p>\n<p>이제 클라이언트와 서버의 기본적인 로직이 모두 준비되었다! 전체적인 플로우를 다시 설명하면 다음과 같다.</p>\n<hr>\n<ol>\n<li>클라이언트에서 API서버로 결제 생성 요청을 보낸다.</li>\n<li>API서버는 받은 데이터를 가지고 다시 Paypal서버로 결제 생성 요청을 보내고 이후 클라이언트로 값을 반환해준다.</li>\n<li>클라이언트는 반환받은 데이터에 있는 <code class=\"language-text\">redirect_url</code>로 사용자를 리다이렉트 시킨다.</li>\n<li>이후 사용자는 이동한 Paypal페이지에서 로그인 및 간략한 결제정보 확인을 마치고 <code class=\"language-text\">Continue</code> 버튼을 클릭한다.</li>\n<li><code class=\"language-text\">Continue</code> 버튼이 클릭되면 Paypal은 결제 생성 요청에 담겨있던 <code class=\"language-text\">redirect_url</code>로 사용자를 리다이렉트 시킨다.</li>\n<li>이후 사용자는 리다이렉트된 페이지에서 최종 결제전 상세 결제 정보를 확인한다.</li>\n<li>사용자가 “최종결제”버튼을 클릭하면 클라이언트는 결제 실행 요청을 API서버로 보낸다.</li>\n<li>API서버는 다시 Paypal서버로 이 요청을 전달하고, 클라이언트로 값을 반환해준다.</li>\n<li>결제의 실행결과에 따라 사용자는 해당 페이지로 다시 리다이렉트된다.</li>\n</ol>\n<hr>\n<p>뭔가 굉장히 복잡해 보이지만 잘 보면 API 서버는 거의 그냥 통신 셔틀이라고 보면 된다.</p>\n<p>그러면 그냥 “Paypal서버와 다이렉트로 통신하면 안될까?” 라고 생각할 수 있지만 이는 보안과 직결되는 문제이다. Paypal 서버와 통신을 하기 위해서는 <code class=\"language-text\">client_key</code>와 <code class=\"language-text\">secret</code>이 필요한데, API 서버를 중개하지 않고 Paypal 서버와 바로 통신을 하려면 클라이언트가 이 2개의 값을 다 가지고 있어야 한다는 뜻이 된다.</p>\n<p>하지만 알다시피 웹 상에서 클라이언트 소스는 공개되기가 쉽고 난독화를 한다고 해도 Object의 <code class=\"language-text\">key</code>같은 <code class=\"language-text\">String</code>변수는 난독화되지 않기 때문에 악의를 가진 사용자가 손쉽게 <code class=\"language-text\">client_key</code>와 <code class=\"language-text\">secret</code>을 탈취할 수 있다. 그래서 상대적으로 안전한 서버에 <code class=\"language-text\">secret</code>을 저장하고 클라이언트에는 <code class=\"language-text\">client_key</code>만 저장하는 식으로 2개의 값을 한번에 볼 수 없도록 나눠 놓는다.</p>\n<h2 id=\"실행결과\" style=\"position:relative;\">실행결과<a href=\"#%EC%8B%A4%ED%96%89%EA%B2%B0%EA%B3%BC\" aria-label=\"실행결과 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>먼저, API서버를 통해 create 요청을 진행한 결과, 필자는 다음과 같은 response를 받을 수 있었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ee391623f4d89ab9517f34c1a64c178c/5bb8b/result1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVR42lWQ6U7DMBCE8zKotEmatInvM0ebFIQqJBAS7/8ew9oRVPz4tJ61tZ7ZgtsF7Unj3Dt0zIEJn+mYRc8fOpG0NBGKECpAyIDmZFDWCnWjUVYShVg+8HJfEccAJi2U9YQDV3Q2Dpq0tluVpOMU4YcI6wNsCCiPEk87ht2eY3/gKHh4zQ/OTNMvEsd2o/6tzaNWjUB1FKSJ09Zn0tBHlhIY7EuBQq2f2eHX94rxMoCTS6lddsuVyzq5TQjqC+op43OSnm994zy9SwPJobq8Y327YrlNdBFgfMxI7bN2YaB4cashYl5mzNeZoo+0ppF6yYTH80EQKfJ0zwPjtO2jPSu0nf6LnknxKHKZ4/5fSSKtIQ1LA38AHnLHaTWOUI4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result1\" title=\"\" src=\"/static/ee391623f4d89ab9517f34c1a64c178c/6af66/result1.png\" srcset=\"/static/ee391623f4d89ab9517f34c1a64c178c/69538/result1.png 160w,\n/static/ee391623f4d89ab9517f34c1a64c178c/72799/result1.png 320w,\n/static/ee391623f4d89ab9517f34c1a64c178c/6af66/result1.png 640w,\n/static/ee391623f4d89ab9517f34c1a64c178c/5bb8b/result1.png 749w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>links라는 배열을 하나 받았는데, 각 인덱스의 의미는 이렇다.</p>\n<hr>\n<p><code class=\"language-text\">0</code> - 결제의 상세 정보를 GET메소드로 확인해볼 수 있는 API의 URI</p>\n<p><code class=\"language-text\">1</code> - Paypal의 결제페이지로 리다이렉트 시키는 URL</p>\n<p><code class=\"language-text\">2</code> - 결제를 실행시킬 수 있는 URL</p>\n<hr>\n<p>아까 위에서 설명한 <code class=\"language-text\">links[1]</code>의 의미를 이제 알 수 있을 것이다. 그리고 보내진 url의 host를 보면 전부 <code class=\"language-text\">sandbox.*</code>로 시작하는데 이는 현재 sandbox 계정을 사용하여 테스트를 진행하고 있다는 뜻이다. 실제 운영 API에는 저 sandbox 부분이 빠져있다.</p>\n<p>그리고 이제 <code class=\"language-text\">links[1]</code>의 url로 리다이렉트를 시키면 당연히(…) 저 값들은 먼지가 되어 사라지게 된다. 쿠키에 담든 어떻게 사용은 할 수 있겠지만 어차피 또 보내주니까 미련없이 버리자.</p>\n<p>필자도 리다이렉트를 안시키고 팝업으로 저 페이지를 열어보았는데 <code class=\"language-text\">401 Unauthrized</code>를 뱉으며 결제정보가 장렬히 산화하는 모습을 볼 수 있었다…</p>\n<p>하지만 어차피 Paypal에 <code class=\"language-text\">create</code> 요청을 날린 시점에서 Paypal 서버에는 필자가 처음 보낸 <code class=\"language-text\">redirect_url</code>값이 저장되어있기 때문에 사용자가 Paypal 페이지에서 결제확인을 완료하게 되면 다시 주도권은 필자 서비스로 돌아오게 된다.</p>\n<p>자 이제 리다이렉트를 시켜보자.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 455px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f5ec8d06a213e8a6b2fe1fb84ff6d13d/7cd9c/redirect1.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvTNpoX//EABoQAAICAwAAAAAAAAAAAAAAAAARAQIQEiH/2gAIAQEAAQUCLNGvYhY//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAABABESExMv/aAAgBAQAGPwIwupN2v//EABsQAAIDAAMAAAAAAAAAAAAAAAABESFBMWFx/9oACAEBAAE/IVpopPsXFjZtXOUQIbeiT//aAAwDAQACAAMAAAAQL8//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAwEBPxCn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQEAAgMBAAAAAAAAAAAAAREAIVExQaFh/9oACAEBAAE/ECDHfOgzuAWZqGL+ZcDKwwfM3nHbN+G4et//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"redirect1\" title=\"\" src=\"/static/f5ec8d06a213e8a6b2fe1fb84ff6d13d/7cd9c/redirect1.jpg\" srcset=\"/static/f5ec8d06a213e8a6b2fe1fb84ff6d13d/0913d/redirect1.jpg 160w,\n/static/f5ec8d06a213e8a6b2fe1fb84ff6d13d/cb69c/redirect1.jpg 320w,\n/static/f5ec8d06a213e8a6b2fe1fb84ff6d13d/7cd9c/redirect1.jpg 455w\" sizes=\"(max-width: 455px) 100vw, 455px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>그러면 이런 화면이 하나 뜬다. 만약 Paypal에 로그인이 안되어있다면 먼저 로그인페이지로 이동 후 로그인이 완료되면 이 페이지로 이동하게 될 것이다.</p>\n<p>이 페이지에서 유저는 자신이 결제할 금액을 확인할 수 있으며 오른쪽 상단에 있는 카트모양 아이콘을 누르면 조금 더 상세한 정보가 나오긴 한다. 근데 알아보기 힘들 정도로 간략하게 적혀있어서 딱히 의미는 없을 것 같았다.</p>\n<p>그리고 필자가 요청을 날린 통화 단위는  유로화로 등록이 되어있던 상품이었지만 Paypal에서는 자동으로 사용자의 국가의 환율로 자동 환산을 해준다. 이제 사용자가 모든 항목을 확인하고 <code class=\"language-text\">Continue</code> 버튼을 누르면 필자가 처음 <code class=\"language-text\">create</code>시 보냈던 <code class=\"language-text\">redirect_url</code>로 이동이 시작된다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 448px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b34365fda4b25226be0676994e510290/33b38/redirect2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqklEQVR42q2SywrCMBBF+///pOKuUv0AKdq6KNjaPBsSbRbXJOBCUBOjiwMhMxxyJ1PM84wYk1JQjnd1a22oc85RUMaQAkvsSxbSfwkJpRgJCfjzT0IvkFLCaB2QUoDkCr1MCIH9ocF6U2FVVqiPbbj79NK40EmW5Q6Lcou6OeULH9LJRb4ajZsxIX5sjkWs4etP4S4Ccwv5iqy16boO575HPwxPXMYxS3gHfvlCUe7xvscAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"redirect2\" title=\"\" src=\"/static/b34365fda4b25226be0676994e510290/33b38/redirect2.png\" srcset=\"/static/b34365fda4b25226be0676994e510290/69538/redirect2.png 160w,\n/static/b34365fda4b25226be0676994e510290/72799/redirect2.png 320w,\n/static/b34365fda4b25226be0676994e510290/33b38/redirect2.png 448w\" sizes=\"(max-width: 448px) 100vw, 448px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>이 페이지는 필자가 테스트를 위해 임시로 만들어 놓은 페이지이고 실제 운영서버였다면 이 페이지는 최종결제 전 마지막으로 정보를 확인할 수 있는 페이지가 될 것이다.\n이때 주목해야할 것은 이 페이지의 URL이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b7ad2e818105d647d8e8498a1af1e86b/9f82e/url.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 2.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAASklEQVR42mN4/vz5fxB++fIlGIPY796+/X/95q3/Nd1T/tf1Tf1f1wvCUyB0HwQ39E37X9bW93/fkeP/v3/98n/d9t3/O6bN/Q8AULA+Y3mH7csAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"url\" title=\"\" src=\"/static/b7ad2e818105d647d8e8498a1af1e86b/6af66/url.png\" srcset=\"/static/b7ad2e818105d647d8e8498a1af1e86b/69538/url.png 160w,\n/static/b7ad2e818105d647d8e8498a1af1e86b/72799/url.png 320w,\n/static/b7ad2e818105d647d8e8498a1af1e86b/6af66/url.png 640w,\n/static/b7ad2e818105d647d8e8498a1af1e86b/9f82e/url.png 820w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>쿼리스트링으로 페이팔이 보내준 <code class=\"language-text\">paymentId</code>와 <code class=\"language-text\">token</code>, <code class=\"language-text\">PayerID</code>가 들어있다. 그럼 이제 저 값들을 사용해서 다음 플로우를 진행하면 된다.</p>\n<p>이 페이지의 Controller는 저 값들을 사용하여 디테일한 결제정보를 받아오는 로직과 결제를 실행하는 로직을 가진 메소드로 이루어져있다. 혹시 아까 위에서 정의한 Paypal서비스의 로직이 기억나지 않는다면 위에서 다시 보고 오자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n  angular\n  <span class=\"token punctuation\">.</span><span class=\"token function\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app.pages.product'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">controller</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PaypalRedirectController'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'$rootScope'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Restangular'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PaypalService'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$location'</span><span class=\"token punctuation\">,</span>\n    PaypalRedirectController\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/** @ngInject */</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">PaypalRedirectController</span><span class=\"token punctuation\">(</span>\n      <span class=\"token parameter\">$rootScope<span class=\"token punctuation\">,</span> Restangular<span class=\"token punctuation\">,</span> PaypalService<span class=\"token punctuation\">,</span> $location</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> vm <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> queryString <span class=\"token operator\">=</span> $location<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 페이팔에서 보내준 쿼리스트링을 가져온다</span>\n\n    vm<span class=\"token punctuation\">.</span>init <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">getPaymentInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * @public\n     * @method executePaypal\n     */</span>\n    vm<span class=\"token punctuation\">.</span>executePaypal <span class=\"token operator\">=</span> executePaypal<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">executePaypal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 실제 결제 실행 메소드</span>\n      PaypalService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>queryString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'EXECUTE RESULT -> '</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * @private\n     * @method getPaymentInfo\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getPaymentInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 결제 정보 받아오는 메소드</span>\n      PaypalService<span class=\"token punctuation\">.</span><span class=\"token function\">getPaymentInfo</span><span class=\"token punctuation\">(</span>queryString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET PAYMENT INFO -> '</span><span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자는 해당 페이지에 있는 버튼에 <code class=\"language-text\">excutePaypal</code>메소드를 클릭 이벤트로 걸어놓았다.\n이제 유저가 저 버튼을 클릭하면 최종 결제가 실행되고 결과를 <code class=\"language-text\">response</code>로 받아볼 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 381px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0a41c8ee9d6bbef09c3fee2378861cec/ac471/result.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 198.12500000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAoABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB8+dyyAdIoQ0Vocwf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECEDH/2gAIAQEAAQUCXHkldFzJHklLP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EABcQAAMBAAAAAAAAAAAAAAAAAAAwMVH/2gAIAQEABj8C0jv/xAAfEAACAgEEAwAAAAAAAAAAAAAAAREhQRAxcZFRYYH/2gAIAQEAAT8halBpwT5PptGay70eKIfJXkk6Eh4J9C7syOOyD//aAAwDAQACAAMAAAAQczmzgD//xAAVEQEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAwEBPxAr/8QAFxEAAwEAAAAAAAAAAAAAAAAAARAxIP/aAAgBAgEBPxA3Bq//xAAfEAEAAgICAgMAAAAAAAAAAAABABEhMUGRUWFxgaH/2gAIAQEAAT8QqYKrqVk9waSnkdx5FaYg1PIqYtt5+4W0eY7cj4NSoVEYN3FWih5S5bw6iUBfERKg6xb8lvfU/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result\" title=\"\" src=\"/static/0a41c8ee9d6bbef09c3fee2378861cec/ac471/result.jpg\" srcset=\"/static/0a41c8ee9d6bbef09c3fee2378861cec/0913d/result.jpg 160w,\n/static/0a41c8ee9d6bbef09c3fee2378861cec/cb69c/result.jpg 320w,\n/static/0a41c8ee9d6bbef09c3fee2378861cec/ac471/result.jpg 381w\" sizes=\"(max-width: 381px) 100vw, 381px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>정상적으로 결제가 진행되고 Paypal 서버가 보내준 결과이다. <code class=\"language-text\">payer.status</code>가 <code class=\"language-text\">approved</code>라면 정상적으로 결제가 승인된 것이다. 이제 실제로 결제가 승인되었고 돈이 제대로 들어왔는지 확인해볼 차례이다.</p>\n<p>페이팔의 <a href=\"https://www.sandbox.paypal.com/\" target=\"_blank\" rel=\"nofollow\">샌드박스 페이지</a>에 접속해서 구매자 계정으로 확인해보면 구매내역에 정상적으로 12유로가 출금 되었다고 나와있는 것을 볼 수 있다. 판매자 계정에도 정상적으로 12유로가 들어왔다고 적혀있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 607px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/96ceab0902c02bc5b934f2ff0b0154d5/ef9e5/customer.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVR42o3OTW8SURSH8flCzlBe09agqWnVFu2LKahtYtRSbSkWxW7cunHp3sSVG6VAtUCBDgMYFyaamLhuU4jWBBppOiAzBeHxQt0YXXiSX87Jvbn/e6TBRzk8L95x9omGM6jiCqmiZ3EEstiX0lj9KawLKQZuCTeTKPOvkWcjKHNvsFyLo/jiyN44A7MxTs1EkS480/B/rOJNfGI4lOT8mspIKMPIahrHYlIECgtJEbYpJLD4IlgnniOLMNf1KDbfOoo3insuijITQXI/fo/n5WfOPf2Aa6XIcLDAUEBj8K6KdTGHfbmA7U4em18TW+Zwiu5eymO9sc1pf54hcWafz3LmtobtahrJ4llFvhhAHl/BcknME0HsUw9wXVnDOR3uc00/xDkVxnH5Ps5JcTcZxjp+D3lsGXn0hDIawDIWQEpsbZHKZvp682YqRWY7Sy6voQr5YpH1jQ1exWIU3hbFWQ61oJHJqSTSaZKZ37InpHa7zdGRTrNp0KtuF1qd/ohpmvTu/6e64mGPpOt1yuUy1YMDmobRD+h0OtSNFjtfvlEq7bFXKvF1f7/ve632h9rhIZVqlZ3dXfR6A8k0W1Qq1b82MVs/0X8Y6LpOvdHAENv2Pmwa5j/1wgzzmF+1GNs2Kr/V5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"customer\" title=\"\" src=\"/static/96ceab0902c02bc5b934f2ff0b0154d5/ef9e5/customer.png\" srcset=\"/static/96ceab0902c02bc5b934f2ff0b0154d5/69538/customer.png 160w,\n/static/96ceab0902c02bc5b934f2ff0b0154d5/72799/customer.png 320w,\n/static/96ceab0902c02bc5b934f2ff0b0154d5/ef9e5/customer.png 607w\" sizes=\"(max-width: 607px) 100vw, 607px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>샌드박스의 구매 테스트 계정. 12유로가 출금 되었다.</small>\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/24e9af9f9c7012c52f8780e1280f8c5c/0a47e/provider.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACTElEQVR42l1Ta2/TQBD0//9FCEEpjSiUqmkFaQlOHZ/fbyf22Y6fGeZO6YdiabR7q9vx7OOMRtZwLROR5+BhY+Fm/Rc3D1tc37/g25OJz3fPWPG8Wm9xdf+M9cseTdejbk4asn0PI4wTmLsdItov3x9xdfuIj6s1ru9+4+rHL9oNPqwe8On2CV9/bnBzv4EpAuwIZbd7/x2MXpY4RhZk5qHNHPSFg2U8QX3LMuNMKDvPM8bpzZ/Q9yOGYcL/n3E69QiCEGEUIY5TeJ4Px3V5jiGbFrVstD3WDbJSskwVa5EfJMqqxTQv72CM04S8PKI4VDopzUvEac7kA8YFGtOZoJ3Pl/PFn5YzTuN8wYKeFRh1XcN2PbhU5gYJexPDtCM4QYo/OxfbV58/O6K5NL3p3tBTYYO9m0D4GfMiROmBhCxpszWZLGDuPXhRCjeMaRP49IMk18iZXNQtClrtEyXPyk8PNZKyRiU7GF0/4FV4iApJtDg0vYYcFo286pggkR1bJikrNUletZrECnKIpMJrUCLMjjAG9rDgpYB9S1Ufm06r86JMK1DqLMfXaoXP4WUlLC+FaQm2KsCRqiq2QuUkWQFjImHXtnCEQMxJj8OAKAzhOAJFkSOKQqRpQhTYCx8lyxMkrCr2VUrMzJd8HMK2kaUpDBWoakkCB3GScLcGhGqNSNp2HRLGfN9HEFKhG6IoWR4Hp/ZyUrs5jlCDFRSUZRkJGaw4GBWI+VrUBUUmhK0vqksu99IPE+5noBVaTsLdDbSqvme/qdS2FWGKf8URhCdIghH3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"provider\" title=\"\" src=\"/static/24e9af9f9c7012c52f8780e1280f8c5c/0a47e/provider.png\" srcset=\"/static/24e9af9f9c7012c52f8780e1280f8c5c/69538/provider.png 160w,\n/static/24e9af9f9c7012c52f8780e1280f8c5c/72799/provider.png 320w,\n/static/24e9af9f9c7012c52f8780e1280f8c5c/0a47e/provider.png 600w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>샌드박스의 판매 테스트 계정. 최상단에 필자 이름과 함께 12유로가 들어와있다.</small>\n</center>\n<p>하지만 아직 완전한 처리가 이루어지지 않은 상태라 Payment status는 <code class=\"language-text\">Unclaimed</code>로 되어있다. 아직은 저게 현금화 된게 아니라 그냥 Paypal서버에 들어가있는 데이터 쪼가리일 뿐이다.\n이제 Accept버튼을 눌러 판매자의 계좌로 입금을 진행하면 상태가 <code class=\"language-text\">Completed</code>로 전환되며 계좌에 <code class=\"language-text\">12EUR</code>가 <code class=\"language-text\">USD</code>로 환전되며 입금된다.</p>\n<p>이상으로 Express Checkout에 대한 포스팅을 마친다.</p>","fields":{"slug":"20170514-paypal-express-checkout","path":"/2017/05/14/paypal-express-checkout/","lang":"ko"},"frontmatter":{"title":"페이팔의 Express Checkout Restful API 사용하기","subTitle":"페이팔 결제 연동, 어떻게 구현할 수 있을까?","date":"May 14, 2017","categories":["프로그래밍","튜토리얼"],"tags":["JavaScript","자바스크립트","Paypal","페이팔","앵귤러","Angular","AngularJS","Laravel","라라벨","PHP","튜토리얼","결제연동"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/617e08b28c22d787f8450e2ec114cc93/3a812/thumbnail.jpg","srcSet":"/static/617e08b28c22d787f8450e2ec114cc93/3a812/thumbnail.jpg 320w,\n/static/617e08b28c22d787f8450e2ec114cc93/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/617e08b28c22d787f8450e2ec114cc93/fc5c5/thumbnail.webp 320w,\n/static/617e08b28c22d787f8450e2ec114cc93/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/617e08b28c22d787f8450e2ec114cc93/2d839/thumbnail.jpg","srcSet":"/static/617e08b28c22d787f8450e2ec114cc93/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/617e08b28c22d787f8450e2ec114cc93/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}]}},"pageContext":{"category":"튜토리얼","lang":"ko"}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}