{"componentChunkName":"component---src-templates-tag-page-template-index-tsx","path":"/tags/google-tag-manager/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"e996c5f5-682f-57a3-a8d1-25b54174929f","tableOfContents":"<ul>\n<li>\n<p><a href=\"#prerequisites-for-using-gtm-freely\">Prerequisites for Using GTM Freely</a></p>\n</li>\n<li>\n<p><a href=\"#how-gtm-works\">How GTM Works</a></p>\n</li>\n<li>\n<p><a href=\"#tags\">Tags</a></p>\n</li>\n<li>\n<p><a href=\"#triggers\">Triggers</a></p>\n<ul>\n<li><a href=\"#pageview\">Pageview</a></li>\n<li><a href=\"#click\">Click</a></li>\n<li><a href=\"#user-engagement\">User Engagement</a></li>\n<li><a href=\"#other\">Other</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#variables\">Variables</a></p>\n<ul>\n<li><a href=\"#navigation\">Navigation</a></li>\n<li><a href=\"#page-variables\">Page Variables</a></li>\n<li><a href=\"#page-elements\">Page Elements</a></li>\n<li><a href=\"#utilities\">Utilities</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"Google Tag Manager, commonly known as GTM, is an event tracking solution Google launched in 2012 for managing various tags — web analytics, ad performance measurement, affiliate marketing tracking — through an internet interface. At my previous job, I used event tracking solutions like Google Analytics and Segment. While these tools worked fine for collecting user behavior data, their disadvantage was clear: whenever a PM or marketer wanted to track additional behavior data, they had to ask developers to add code.","html":"<p>Google Tag Manager, commonly known as GTM, is an event tracking solution Google launched in 2012 for managing various tags — web analytics, ad performance measurement, affiliate marketing tracking — through an internet interface.</p>\n<p>At my previous job, I used event tracking solutions like Google Analytics and Segment. While these tools worked fine for collecting user behavior data, their disadvantage was clear: whenever a PM or marketer wanted to track additional behavior data, they had to ask developers to add code.</p>\n<!-- more -->\n<p>But with GTM, the amount of code developers need to write for defining and sending events drops significantly. PMs and marketers can use GTM’s management interface to directly define events and even determine when to send them. Plus, since event logging code unrelated to business logic doesn’t get mixed into your application code, it’s a win for developers too — a tool that benefits everyone.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 479px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 106.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHu53ELhQNQf//EABoQAAICAwAAAAAAAAAAAAAAAAABAhESMUH/2gAIAQEAAQUCY7vE6xDRHZ//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAABECD/2gAIAQEABj8Csr//xAAcEAACAwEAAwAAAAAAAAAAAAABEQAhMUEQUaH/2gAIAQEAAT8htX2WqrdjHqhBMsRrfqMrjOqXZoK8f//aAAwDAQACAAMAAAAQ888A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHxABAAICAgIDAAAAAAAAAAAAAQARITFRYRCBQbHw/9oACAEBAAE/EL0zBTB/cQKwBcrZK0/G79TZfshAdbG9ShEjCsL9xI1p7lEpIbEiu8l578f/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"good\" title=\"\" src=\"/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg\" srcset=\"/static/0f613bfdd99c52ba9b1855cd933ded24/0913d/good.jpg 160w,\n/static/0f613bfdd99c52ba9b1855cd933ded24/cb69c/good.jpg 320w,\n/static/0f613bfdd99c52ba9b1855cd933ded24/1194c/good.jpg 479w\" sizes=\"(max-width: 479px) 100vw, 479px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Honestly, not having to add event logs is already a huge win for developers</small>\n</center>\n<p>However, even when using GTM to define events, this work isn’t entirely unrelated to programming. Sure, GTM’s basic features make it fairly easy to define and send simple events, but if you want to create events that handle slightly more complex situations, you’ll need some understanding of programming concepts like variables and triggers. <small>(Some posts claim you don’t really “use GTM” until you understand the Data Layer)</small></p>\n<p>So this post isn’t just for developers — it focuses on helping non-dev roles like PMs and marketers who collaborate with developers understand the minimum programming knowledge needed to use GTM effectively. If you’re a developer looking to introduce GTM to your organization, reading this with an eye toward how to explain these concepts more clearly to non-developers might be worthwhile.</p>\n<h2 id=\"prerequisites-for-using-gtm-freely\" style=\"position:relative;\">Prerequisites for Using GTM Freely<a href=\"#prerequisites-for-using-gtm-freely\" aria-label=\"prerequisites for using gtm freely permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>You should have at least some understanding of what HTML, CSS, and JavaScript do in a web client environment. Sure, you can use GTM without this knowledge, but you’ll face some constraints when trying to send events with precise timing and specific values.</p>\n<p>For example, imagine a user clicking a specific button. First, you need to know that the user clicked that “specific button.” GTM provides a feature using CSS selectors to distinguish this specific button — but without knowledge of CSS selectors, you’d only be able to attach click events to “all buttons.”</p>\n<p>Or consider that nowadays many sites use SPA (Single Page Application) approaches that render by swapping page content with JavaScript. Without understanding browser History, using only the “page view” trigger might fail to properly detect page changes.</p>\n<p>That’s why, if you lack this knowledge while reading this post, you might struggle to grasp what I’m explaining. If that’s your situation, I recommend checking out <a href=\"https://opentutorials.org/course/3083\" target=\"_blank\" rel=\"nofollow\">Web courses on OpenTutorials</a> before continuing.</p>\n<h2 id=\"how-gtm-works\" style=\"position:relative;\">How GTM Works<a href=\"#how-gtm-works\" aria-label=\"how gtm works permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>GTM lets you use “tags” to define event types, “triggers” to define when to send events, and “variables” to define the data included in events.</p>\n<p>Of course, developers already know concepts like triggers and variables, but for non-developers, these concepts might not feel intuitive. So while explaining each trigger and variable type, I’ll also gradually explain what they actually mean.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 476px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 173.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAENUlEQVR42p1WWW8jRRD2L0bilYd9AgmthEBCsITshl12EzAhCwHEio0ENus4h8F2HMf3OT4m9viY2zPj46Oq7UmcsIedlr7prp7ur6urq6s6oGo6GIZpQTdMAdOyhazpBvz/qyLAEwdDFflCEXWpgWqtRu0CSqUyukrvxkKrIOBr0mrL6HQVQSI1mmi22mIh///yJO7z4ctXhBZtbzabYQZgOp2KNpfJZEqYXMl+EWOXwGO4jEbOfMsjx4Wh64hGozg5OUEkEkE8HkcsFkMoFEIikUA4HBYyo0Dm8Im5SJKEfr+PMREPVW2uIa+iqio0TYOiKKI2TVP0GYaBTqeDbreLwWAgZF87Lo7jiPkjZ6Eh26nX62NINYPtxSsNBkNRc59Ofdyv0YThYrwPHtfrD4S9hQ1NyxLsrueJ2rJtUTuuL48E7NE1uN+HL/NOedGA47riMGRZhkekXLjmLfvyKoUVWhB6wga5XE4Ylwvbq1gsClsuH8BKhKwuTRFacudtt1gFgtBdEArHJDvydTPJftwWMK3r9ruw7Nj80XRyEXFvDdFeFzq5EruTILxojZFrj9EYAhVlhoumhwz3yRNkqZ/bbwPPL8geBpq1IGyMcZyz8P5XWXz5WxOlywlexlU8PpBxmDGRljyc1VykGpM3IlGfoNZ1yDPIhil5hsPWFO89a+OLsIqsDkRJ/r0wxVEbSNLBJ7pUS9M3IlGfotUbzQmlYgvyqyjG5ymodFcboUN0Dk/QOz6FHDlGKxRB8zQBqWNDUlyCcwN1gjwYXR+Ku/MA1jefIf75fcg7mxj/8Rzd4Bba25sw93fgHOzD++QDWPk0TG8M09CF09/GNeGPjyEXcvho4wkiyTRc8ql8u4Ozch2XOhmaZOvXIMxUHLo3pXutvz3A2sGHMPMZuBT/LDp6jS65RT9sWtWg4KA5Huy9JzDTidUIR0RoFLNQNPMqt3DtRxrVo9D009M1CH94BJ00fLr7M2L/xilQTkV++SeeRDKZQqOvwtnfhnG+zpZLeZwXKqjXG+IKsoYc3zigsob2Ohr6hLOlC86xjXMEn542nq1H6OxuQc2lcfB3FMmzc3COKVfryOQKUCgLGpSD1iJ0yeeUdAoPd3bxZzgCbzJDrdFCoVwVod0g1e29Z3O3Ga+y5effwtn4GLMXQUz2tmBvP4AX3MRk9xHc7zZgf/81nE/vwagUoZML6bdy9P8TPUVlTaqhnkpiWC3DbEpQinm0M2mSKzAbdeidSxpsrf5y6NOp3vvwPn558VJE30Q6g6NYAjK9IkyyqcYB9B2a3QiwjLZMuZfSou/YDG1FktcS+ilRuI1Im/MUeqfHEl+z9EUWNXp9MVE2V8Rf4Vc4OqVw1mwLZ9fW2TK/CEqVGuTLjkj0cofSaKlKz7smuc5wLS0Dr3tkcvvOW14W/G1p/lvmDofyH/xpSptwbuc+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"aside\" title=\"\" src=\"/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png\" srcset=\"/static/1caeb1dc2b0b430585266bed369411cf/69538/aside.png 160w,\n/static/1caeb1dc2b0b430585266bed369411cf/72799/aside.png 320w,\n/static/1caeb1dc2b0b430585266bed369411cf/f2205/aside.png 476w\" sizes=\"(max-width: 476px) 100vw, 476px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Understanding these 3 keywords is understanding GTM itself</small>\n</center>\n<p>Before diving into tags, triggers, and variables, we need to understand what it’s like without GTM.</p>\n<p>Without tools like GTM, people who need data — PMs, data analysts, marketers — would define events, and developers would add event-sending logic to the application’s source code.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">login</span> <span class=\"token punctuation\">(</span>loginData<span class=\"token operator\">:</span> LoginData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Login communication and data parsing</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      body<span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>loginData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Send Google Analytics login success event</span>\n    <span class=\"token function\">gtag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'event'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Exception handling for login failure</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Even if you can’t read code, that’s fine. The only important part in this code is the single line <code class=\"language-text\">gtag('event', 'login', { userId: user.id });</code>. I used this code to tell Google Analytics that a login event occurred and what the logged-in user’s ID is.</p>\n<p>Sure, having developers write code to directly send events doesn’t cause problems, but developers struggle with managing event code unrelated to business logic, <small><strike>(it’s annoying)</strike></small> while roles that actually need the data — PMs, marketers, data analysts — can do nothing but wait for developers to add the code.</p>\n<p>That’s why GTM uses concepts like tags, triggers, and variables to let non-developers easily define events using GTM’s management interface.</p>\n<p>When using code to send events, you don’t need to explicitly separate tags, variables, and triggers — the program flow determines everything. But GTM assumes events are managed separately from program flow, so it clearly distinguishes these concepts.</p>\n<h2 id=\"tags\" style=\"position:relative;\">Tags<a href=\"#tags\" aria-label=\"tags permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Tags are JavaScript code that sends information to third parties like Google… though actually, tags are similar to what we generally call events.</p>\n<p>Fundamentally, GTM isn’t an event tracking solution — it’s an event tracking “management” solution. GTM doesn’t directly receive and store events on a server. GTM acts as a broker that borrows and relays events from other solutions like Google Analytics connected to GTM.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5a276e9a2639ac3770142c6bd477e389/11a8f/tags.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkklEQVR42q2V226EMAxE+f+PbKvlFi4BAiEBEpjabveh7UOBNpIV7SqaHDtjk1hrsa4r/mslzi9Ytw2BYlkWEY8xYvv8zfslQdgUYcqRZiVeX16QZRmUUiiKAlVVoe/7a4JH9NiDJ5oV8zzDOSdkvIcQ5NBxHL8Gn933nQRtgWAV8rJC+ngIXV3XaJpGhM8uYwy89yS4TYjLBK17SZGFOE2ttexn6Dj4cqZMMBfYnUI/sGgrNw3DIGJ8Ix8+s6ZpEtHEUN1GF6HKgh6ilJS7rjtdu++RGDdi9hHjaISOH+ZZu1uCwzTAzAFtU1MNa6Hj+t02tiFj2yWio/q1JHTVLj8IVdXCkpgiq5RlKYZmwiuW+ULol4Cwbpjdh6mfhGzSW4RV3cB2Gorql1PbceuxbZjwluBIL+yIkj3IXuI/eTjcJnzTB7Ql25he+vnP4+vwBzYXkBc0cdJUUmYv3iakNsbmd9jZirE5OHV+nDuiCWKLuA0oaNrkeSbDge3Dg4LFL6dM0xVHXInKSvvxJ+FJeCfld8wZIlE6pC3bAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tags\" title=\"\" src=\"/static/5a276e9a2639ac3770142c6bd477e389/6af66/tags.png\" srcset=\"/static/5a276e9a2639ac3770142c6bd477e389/69538/tags.png 160w,\n/static/5a276e9a2639ac3770142c6bd477e389/72799/tags.png 320w,\n/static/5a276e9a2639ac3770142c6bd477e389/6af66/tags.png 640w,\n/static/5a276e9a2639ac3770142c6bd477e389/d9199/tags.png 960w,\n/static/5a276e9a2639ac3770142c6bd477e389/11a8f/tags.png 1272w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Supports various external solutions, but Google products are naturally recommended...</small>\n</center>\n<p>The concept that determines “what to include” in these other solutions’ events is the “tag.” In other words, a GTM tag could become a Google Analytics event, a Criteo tag, or a Hotjar tracking event.</p>\n<h2 id=\"triggers\" style=\"position:relative;\">Triggers<a href=\"#triggers\" aria-label=\"triggers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>“Trigger” literally translates to “trigger” or “firing mechanism.” Just like the name suggests, a trigger acts as the firing pin that determines when to fire the bullet called a tag.</p>\n<p>The moment you pull the trigger could be when a user clicks a signup button, when a product sales page opens, or even when a user scrolls down and sees a newly added banner.</p>\n<p>Actually, people who work with data professionally understand when to send specific events better than developers like me, so I won’t explain deeply.</p>\n<p>GTM supports quite a variety of trigger types. Naturally, the more precisely you understand what these triggers mean, the more diverse and detailed timing you can achieve for sending events, so let’s go through them.</p>\n<h3 id=\"pageview\" style=\"position:relative;\">Pageview<a href=\"#pageview\" aria-label=\"pageview permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"page-view\" style=\"position:relative;\">Page View<a href=\"#page-view\" aria-label=\"page view permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The Page View trigger fires right when the web browser starts loading the page. For developers: resources haven’t fully loaded yet, so users can’t see the page content, but the connection to the page’s server has been established and resource loading has begun.</p>\n<h4 id=\"dom-ready\" style=\"position:relative;\">DOM Ready<a href=\"#dom-ready\" aria-label=\"dom ready permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This trigger fires when the browser completes rendering the page’s DOM. So if a tag needs to interact with the DOM, this trigger is better.</p>\n<h4 id=\"window-loaded\" style=\"position:relative;\">Window Loaded<a href=\"#window-loaded\" aria-label=\"window loaded permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This trigger fires when all resources needed for the page have fully loaded. Users are likely seeing the page’s proper UI.</p>\n<h3 id=\"click\" style=\"position:relative;\">Click<a href=\"#click\" aria-label=\"click permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"just-links\" style=\"position:relative;\">Just Links<a href=\"#just-links\" aria-label=\"just links permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>As the name says, this trigger fires only when links are clicked. It offers a “tag waiting” option — when users click a link, it sends the tag before navigating them to the next page.</p>\n<p>The reason is that if the page navigates before sending the tag, the tag-sending action itself risks being voided. On the flip side, users might experience a slight delay waiting for the tag to send before page navigation, which isn’t great for UX.</p>\n<h4 id=\"all-elements\" style=\"position:relative;\">All Elements<a href=\"#all-elements\" aria-label=\"all elements permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This trigger fires when any element is clicked, which naturally includes links.</p>\n<h3 id=\"user-engagement\" style=\"position:relative;\">User Engagement<a href=\"#user-engagement\" aria-label=\"user engagement permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"scroll-depth\" style=\"position:relative;\">Scroll Depth<a href=\"#scroll-depth\" aria-label=\"scroll depth permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This trigger fires when users scroll past a certain percentage of the total page. Vertical scroll depth uses downward scrolling as the baseline, horizontal scroll depth uses rightward scrolling. Depth can be specified as a percentage or pixels.</p>\n<h4 id=\"form-submission\" style=\"position:relative;\">Form Submission<a href=\"#form-submission\" aria-label=\"form submission permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This trigger fires when a <code class=\"language-text\">Submit</code> event occurs on a <code class=\"language-text\">Form</code> element on the page.</p>\n<p>Note that this trigger has caveats: Form elements might not be used, or even if they are, developers sometimes cancel the Submit event because Form element Submit events force browser refresh.</p>\n<p>If you want to use this trigger, I recommend asking developers first how data is being submitted to the server on that page.</p>\n<h4 id=\"element-visibility\" style=\"position:relative;\">Element Visibility<a href=\"#element-visibility\" aria-label=\"element visibility permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Element visibility fires when an element appears on screen. “Appears on screen” could mean the element entered the viewport through scrolling, or it could mean a conditionally visible element (like a toggle) became visible.</p>\n<p>Beyond visibility criteria for each element, GTM provides “trigger firing timing” functionality to specify whether to fire the trigger every time the element appears or only the first time.</p>\n<h3 id=\"other\" style=\"position:relative;\">Other<a href=\"#other\" aria-label=\"other permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"history-change\" style=\"position:relative;\">History Change<a href=\"#history-change\" aria-label=\"history change permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Triggers based on history change events fire when the URL hash changes or when the site uses the HTML5 History API’s <code class=\"language-text\">pushState</code> method. For example, this trigger is useful for executing tags that track virtual pageviews in SPA applications.</p>\n<p>In other words, whether the page actually navigates or not, if browser history is touched, this trigger fires.</p>\n<h4 id=\"custom-event\" style=\"position:relative;\">Custom Event<a href=\"#custom-event\" aria-label=\"custom event permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>As I’ll explain below, GTM monitors a JavaScript global variable called <code class=\"language-text\">dataLayer</code> and fires triggers or assigns variable values by detecting data entering this variable.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6fa81/custom-event.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbElEQVR42q2Q0Q2AMAhE2X8+V/DTtAGVCm3PSpzASvISuI+Dg3JO0FLQekdrbQozAx1aYvijaq0gWxfwuFJkRx9XzuDuIN9TNO51iJji8aDMguM8Y8MvkZkZD6o6/csw3FICi7yxPcSvXJfhBqafKg6L/TB6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"custom event\" title=\"\" src=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6af66/custom-event.png\" srcset=\"/static/e9dcf03d0c3ed0ecd92309ac88aa0409/69538/custom-event.png 160w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/72799/custom-event.png 320w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6af66/custom-event.png 640w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/d9199/custom-event.png 960w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/21b4d/custom-event.png 1280w,\n/static/e9dcf03d0c3ed0ecd92309ac88aa0409/6fa81/custom-event.png 1856w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>As shown above, if you define a custom event named <code class=\"language-text\">my-custom-event</code> in GTM’s management interface, GTM watches the <code class=\"language-text\">dataLayer</code> array for the value <code class=\"language-text\">event: my-custom-event</code> and fires the trigger when it arrives.</p>\n<p>In other words, when you want to fire triggers for complex or special situations that GTM doesn’t provide by default, you can freely fire triggers from code.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Fire trigger</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> <span class=\"token string\">'my-custom-event'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sure, using the <code class=\"language-text\">dataLayer</code> array to fire triggers or assign variable values still requires developers to add code. But compared to other event solutions, the code is minimal and the trigger-firing method is simple, making it easy to manage.<small><strike>(Except for having to use global variables…)</strike></small></p>\n<h2 id=\"variables\" style=\"position:relative;\">Variables<a href=\"#variables\" aria-label=\"variables permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A variable is literally a number or value that can change. Variables consist of a name (Key) and value (Value), and GTM constantly monitors these variables. Variables can be used to control when triggers fire, or to store values that need to be used repeatedly within GTM.</p>\n<p>For example, the former might be “send an event only if the user who clicked this button has ID 1!” The latter might mean storing ID values provided by Google Analytics or Google AdWords.</p>\n<h3 id=\"navigation\" style=\"position:relative;\">Navigation<a href=\"#navigation\" aria-label=\"navigation permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"http-referrer\" style=\"position:relative;\">HTTP Referrer<a href=\"#http-referrer\" aria-label=\"http referrer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Returns the HTTP referrer. It’s easiest to think of referrer as “previous page address.” Referrer can be an extremely important value for marketers driving user inflow through various ad channels, as it’s the clearest indicator of which ad channel brought users to our service. Note that this uses the value from <code class=\"language-text\">document.referrer</code>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/23e1038d472a6a78bfea69a484bb3302/f3015/component.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAv0lEQVR42qWSSw7DIAxEuf8tu8yn0EAABzBTcNtIXSYgDRghPc3YqBgjvPeotYpGl8o5o5Qilx90RKo7XNcVzjnsuxcwtwe+COrGci7NYXMXI6FyAXM5rff0V8RcRWreEh6zh40V7gAsVZjQavr082pXlYsZL0fwR/2KYUNBaOctYM9PrY9EEVz+Y9+acgfaNhBjDJ5PjRDCOfHbwG2z0FpjmiaZeEppzKFzuwCXZZHvMxS5b0TU/uAOa63UI8A3ojJmrfTRar0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"component\" title=\"\" src=\"/static/23e1038d472a6a78bfea69a484bb3302/6af66/component.png\" srcset=\"/static/23e1038d472a6a78bfea69a484bb3302/69538/component.png 160w,\n/static/23e1038d472a6a78bfea69a484bb3302/72799/component.png 320w,\n/static/23e1038d472a6a78bfea69a484bb3302/6af66/component.png 640w,\n/static/23e1038d472a6a78bfea69a484bb3302/d9199/component.png 960w,\n/static/23e1038d472a6a78bfea69a484bb3302/21b4d/component.png 1280w,\n/static/23e1038d472a6a78bfea69a484bb3302/f3015/component.png 1804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>GTM’s component type menu lets you select detailed options like whether to fetch the full URL or just the path.</p>\n<p>For non-developers, a quick explanation: URLs are composed of several components as shown below. These components each carry different information, and collectively they’re called a URL or URI.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e25190005d12938c253cc72ca06777b1/5bd27/uri-structure.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVR42h2MX0+CcAAA+f6PPbae6qG1XGuKytLE0JW62nKaGvkPDIQE4YdoU9CLtd12u5eTzu47XFSGeJsDJCdadQM590qzOmUfgxMbKN0cxbcbpmKIOzBoXSt08xqd2xpiPMbvFdHVK8LhI1LP8Jk4EftsRsba22HO1qzcmGMKv8cYOzRZ+FM2qWAf7fCNJYHhElgrku2GJLLYOmMSYSP1TcHsZ4tpBlhGgGOJzAJ7EWKZ4b8d8Z1N5wT2D2KxIlr6rOcOke0RZB27LgdvwilNkM4rIy61GaXyEK2sUyuOqCs6VXnAk/KF+tCnNpBR9QJdrYFeavOptBnIz/TzDT4KLyyaKv77Hek24A//mh4jJrvfIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"uri structure\" title=\"\" src=\"/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png\" srcset=\"/static/e25190005d12938c253cc72ca06777b1/69538/uri-structure.png 160w,\n/static/e25190005d12938c253cc72ca06777b1/72799/uri-structure.png 320w,\n/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png 640w,\n/static/e25190005d12938c253cc72ca06777b1/d9199/uri-structure.png 960w,\n/static/e25190005d12938c253cc72ca06777b1/21b4d/uri-structure.png 1280w,\n/static/e25190005d12938c253cc72ca06777b1/5bd27/uri-structure.png 1432w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>If you don’t need the full URL and only need specific information within it, I recommend filtering data using the component type menu.</p>\n<h4 id=\"url\" style=\"position:relative;\">URL<a href=\"#url\" aria-label=\"url permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Returns the current page’s URL. Like referrer, you can filter to get desired values using the component type menu.</p>\n<h3 id=\"page-variables\" style=\"position:relative;\">Page Variables<a href=\"#page-variables\" aria-label=\"page variables permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"1st-party-cookie\" style=\"position:relative;\">1st-Party Cookie<a href=\"#1st-party-cookie\" aria-label=\"1st party cookie permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Returns the value of a cookie whose name matches from the domain the user is on. Cookies are small text files stored in browsers.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ThVbdUg.; APISID=Twvmlsi3NXZBQQKv/AfV5gB9toKeSC3cui; SAPISID=qcBt_OBeNnbuq1sG/AuZto1M1fXt3YRBoD; __Secure-APISID=Twvmlsi3NXZBQQKv/AfV5gB9toKeSC3cui; __Secure-3PAPISID=qcBt_OBeNnbuq1sG/AuZto1M1fXt3YRBoD; PREF=al=ko&amp;f6=400&amp;f4=4000000; wide=1; SIDCC=AJi4QfFq_T4Wv10c3rnS-qZdLNrXY_FS-TQVBAdC6uD4uTmYU0xW3lCfJd4DcJqMecClwMXWbQ</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Cookies are strings formatted as <code class=\"language-text\">key=value;key2=value2;</code>. Since browsers manage them as text files, values aren’t deleted even when users close browsers. That’s why cookies are frequently used to manage state that must persist regardless of browser closure, like “Don’t show this for 3 days.”</p>\n<p>Also, since cookies are stored in browsers themselves, each site’s cookies have domain values to prevent mixing. If a cookie has domain <code class=\"language-text\">evan.com</code>, sites like <code class=\"language-text\">dev.evan.com</code> and <code class=\"language-text\">www.evan.com</code> are recognized as the same site and share the cookie. But if the cookie’s domain is <code class=\"language-text\">dev.evan.com</code> with a subdomain, <code class=\"language-text\">www.evan.com</code> is recognized as a different site and can’t use it.</p>\n<h4 id=\"data-layer-variable\" style=\"position:relative;\">Data Layer Variable<a href=\"#data-layer-variable\" aria-label=\"data layer variable permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This variable can be assigned values dynamically using the <code class=\"language-text\">dataLayer</code> I mentioned when explaining custom event triggers. GTM treats this variable specially, so developers must manually declare it as a global variable in code and initialize it.</p>\n<p>Then in code, use the <code class=\"language-text\">push</code> method to input data into this array. Based on the input key, GTM finds the value and uses it as a data layer variable. Words alone make it hard to understand, so let’s see an example.</p>\n<p>First, create a data layer variable in GTM’s management interface and set the data layer variable name to <code class=\"language-text\">userId</code>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4b9a39df107b45ec8fe2d85bc7294370/ec5f6/dataLayer.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.874999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAYUlEQVR42qXOUQ7AIAgDUO9/WOOMExG0E5bsAKNJP+CjeenuHVetWGth740V6BRBYmaMMXzQGomqIs05kXNGaw31SE35NyL6ConIlTYeFpqslOJHRPcNEo2jY3/YYKQiggc5etulAGQowgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dataLayer\" title=\"\" src=\"/static/4b9a39df107b45ec8fe2d85bc7294370/6af66/dataLayer.png\" srcset=\"/static/4b9a39df107b45ec8fe2d85bc7294370/69538/dataLayer.png 160w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/72799/dataLayer.png 320w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/6af66/dataLayer.png 640w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/d9199/dataLayer.png 960w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/21b4d/dataLayer.png 1280w,\n/static/4b9a39df107b45ec8fe2d85bc7294370/ec5f6/dataLayer.png 1852w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>In other words, this variable just created in GTM’s management interface means “use the variable when data with the <code class=\"language-text\">userId</code> key enters the <code class=\"language-text\">dataLayer</code> array declared in code.” To assign a value to this variable, put an object with a key matching the variable name into the <code class=\"language-text\">dataLayer</code> array in code, like <code class=\"language-text\">{ userId: 1 }</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">userId</span><span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now you can include this assigned variable in events, or detect when this variable gets assigned to fire triggers.</p>\n<h4 id=\"custom-javascript\" style=\"position:relative;\">Custom JavaScript<a href=\"#custom-javascript\" aria-label=\"custom javascript permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The variable’s value is set to the result of a JavaScript function. The JavaScript function used here must be an anonymous function that returns a value.</p>\n<p>This variable directly uses the function execution result, so you can use programming features like conditionals and loops as-is — which is its advantage.</p>\n<p>For example, if you want to report the time a user clicked an element as an ISO format string like <code class=\"language-text\">2020-04-11T07:56</code>, you’d write custom JavaScript like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Since this JavaScript code ultimately gets inserted into and executed in your application, if your application has global variables, you can access them.</p>\n<h4 id=\"javascript-variable\" style=\"position:relative;\">JavaScript Variable<a href=\"#javascript-variable\" aria-label=\"javascript variable permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Simply takes a JavaScript global variable declared in the application and uses it as a GTM variable.</p>\n<p>Even if you don’t understand global variables, that’s fine. There’s a simple way to discover global variables. First, visit your application, open browser developer tools, type <code class=\"language-text\">window</code> in the console, and hit enter — you’ll see data like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/127c25629e099e5b136d9b4782552e8e/26162/window.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 29.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/UlEQVR42nWQWXaDMAxF2UnL4EmyMVBISAjsf1evz4S/tB/3SEeyZetW27ogpYA8KFL0kGBIh561lDyiOKhY5D6wpux5mO4L1tRw9pNqzwee44F+XKAxQTQixggRhbcO3jlY4r1HCALnPCzrxlh0XfdB9ep3bHnDNI643W5Y5gfGYUaQAOEluYYVRIRD/flgCOH/gcdwYJomrOsd9+WFqBPq+hstDzSkbVs0pL1omuaMfw9MO9bhCU2JHjO9jVwzcC1LJxbemDO3jK7kJRYN1r3rF0WBYa96pg17fmDiOj9kVq7FC6dLxsxDZT1lHvmD0lPV03Fx+s6LCj39/gIJcLI5AV/ZDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"window\" title=\"\" src=\"/static/127c25629e099e5b136d9b4782552e8e/6af66/window.png\" srcset=\"/static/127c25629e099e5b136d9b4782552e8e/69538/window.png 160w,\n/static/127c25629e099e5b136d9b4782552e8e/72799/window.png 320w,\n/static/127c25629e099e5b136d9b4782552e8e/6af66/window.png 640w,\n/static/127c25629e099e5b136d9b4782552e8e/d9199/window.png 960w,\n/static/127c25629e099e5b136d9b4782552e8e/21b4d/window.png 1280w,\n/static/127c25629e099e5b136d9b4782552e8e/26162/window.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Ta-da. The naked Window object exposed</small>\n  <br>\n</center>\n<p>JavaScript global variables are designed to always live in the global <code class=\"language-text\">window</code> object. In other words, the values that appear when you print <code class=\"language-text\">window</code> object contents in the console are the global variables you can use in GTM.</p>\n<h3 id=\"page-elements\" style=\"position:relative;\">Page Elements<a href=\"#page-elements\" aria-label=\"page elements permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"element-visibility-1\" style=\"position:relative;\">Element Visibility<a href=\"#element-visibility-1\" aria-label=\"element visibility 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Gets whether an element is visible on screen. In other words, whether the element is currently displayed or not.</p>\n<p>You can select elements using ID or CSS selector, but if you use CSS selectors, multiple elements might be selected simultaneously — in which case only the first element is retrieved.</p>\n<p>Even if you’re not a developer, you can easily discover which DOM element you want. In Google Chrome, position your mouse over the element you want to know about, right-click to see tools, click the “Inspect” menu, and developer tools will open with your inspected element automatically selected.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5b4a36eed598fb2bf2724948f040109e/91e7e/inspect_result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBUlEQVR42q1QX0+DMBzkW/uJ9hmML/qibwpjWbaMTCID+RNXoKUtKx2cbTFmifNtv+Ry/V3Ty109mJG9hD5rTNNkNgv84Wkaf+7xq4/jrF3q3kn2aDOC5kBQfjLkBUeRd6hKjizrUBjOzd62PQiRSFOGJKEoKw7GOIQQoJQ6dobNkWHzdEC1zBFvaqzWLYKgxm7HEIYNoojh9e2IoujxHnfwA4JgSbDfd8ZQQMrZkDHmknq0tamY8damtsL5AuOooLXlAUr10MPJnS2srtSMYRhcQvsF3tbUvfc/8LxOIbgA/wf2wTVt1rkzdZUftzXuFiEWLwluMV5UUDyscvjx120MceP5BtIXayksc3klAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"inspect result\" title=\"\" src=\"/static/5b4a36eed598fb2bf2724948f040109e/6af66/inspect_result.png\" srcset=\"/static/5b4a36eed598fb2bf2724948f040109e/69538/inspect_result.png 160w,\n/static/5b4a36eed598fb2bf2724948f040109e/72799/inspect_result.png 320w,\n/static/5b4a36eed598fb2bf2724948f040109e/6af66/inspect_result.png 640w,\n/static/5b4a36eed598fb2bf2724948f040109e/91e7e/inspect_result.png 692w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>The <code class=\"language-text\">button.btn.gtm-text-input__variable-btn</code> shown as a tooltip over the element is the CSS selector. But as I mentioned, CSS selectors aren’t unique IDs. The same selector can select multiple elements, so using IDs is better. Elements with IDs will have CSS selectors starting with <code class=\"language-text\">#</code>, like <code class=\"language-text\">#foo</code>.</p>\n<p>Output type can be true/false or percentage. When selecting true/false, you can set a minimum percentage that determines how much of the element must be visible to count as “visible.”</p>\n<p>Note that this minimum percentage value isn’t transparency — it’s how much of the element is on screen. In other words, if half is cut off, it’s 50%.</p>\n<h4 id=\"dom-element\" style=\"position:relative;\">DOM Element<a href=\"#dom-element\" aria-label=\"dom element permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The value is set to the text of a DOM element or the value of a specified DOM element attribute. If an optional attribute name is set, the value specified in the attribute is returned in the variable’s value. Otherwise, the text within the DOM element becomes the variable’s value.</p>\n<p>A DOM element is basically the structure you write using HTML. Here’s a simple example:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hi!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If I specified a DOM element variable as the <code class=\"language-text\">#foo</code> element in GTM’s management interface, the variable’s value would be the text the <code class=\"language-text\">span</code> element holds: <code class=\"language-text\">Hi!</code> But if I specified the DOM element variable as <code class=\"language-text\">#button</code> and entered <code class=\"language-text\">data-type</code> in the attribute name field, the variable’s value would be <code class=\"language-text\">submit</code>.</p>\n<h4 id=\"auto-event-variable\" style=\"position:relative;\">Auto-Event Variable<a href=\"#auto-event-variable\" aria-label=\"auto event variable permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Auto-event variables automatically collect element-related information when events occur through triggers related to HTML elements, like clicks or element visibility.</p>\n<p>Imagine you want to know exactly which image a user clicked when they clicked an <code class=\"language-text\">img</code> element.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/test.png<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Test image<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>We can use a click trigger to know the user clicked that image, but unless we put the image itself in a variable, we have no way of knowing which image the user clicked. That’s where we can use the <code class=\"language-text\">alt</code> attribute.</p>\n<p>The <code class=\"language-text\">alt</code> attribute is alternate text displayed if the image doesn’t load. Also, for people who can’t see images (like visually impaired users), computers can convert this text to speech and read it aloud. That’s why web standards recommend always using the <code class=\"language-text\">alt</code> attribute with <code class=\"language-text\">img</code> elements.</p>\n<p>In other words, since the <code class=\"language-text\">alt</code> attribute should contain text that well describes “what this image is,” we can indirectly know which image the user saw and clicked through that attribute’s text.</p>\n<p>Auto-event variables are designed to automatically collect element information when HTML element-related triggers fire, making them extremely useful in these situations.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/763f96936678d21802d69b89f80c4767/fcbaf/alt.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeUlEQVR42qWRQQ6EMAhFe/8zeoGJOystIPQrMZoZdzIkbCB5PKAwC1g2uDvMHGPgryxzdUwfBdOCdSVc8RYUMmaGIrpB1AJxWI6jeWXSkHtHI/opBjhOkIkiIiBqD6vTMgVk5vsZ58oAtYYYlAL2zqi1QlW/HpI33AGLpitrhdVudgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt\" title=\"\" src=\"/static/763f96936678d21802d69b89f80c4767/6af66/alt.png\" srcset=\"/static/763f96936678d21802d69b89f80c4767/69538/alt.png 160w,\n/static/763f96936678d21802d69b89f80c4767/72799/alt.png 320w,\n/static/763f96936678d21802d69b89f80c4767/6af66/alt.png 640w,\n/static/763f96936678d21802d69b89f80c4767/fcbaf/alt.png 895w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Automatically fetch the value held by the `alt` element attribute!</small>\n  <br>\n</center>\n<p>This variable can be applied in various scenarios beyond this — fetching a form’s ID when a <code class=\"language-text\">form</code> element is submitted, getting link text or target URL when a link is clicked. If you have some knowledge of how HTML is written, like semantic markup, this variable has extremely high utility.</p>\n<h3 id=\"utilities\" style=\"position:relative;\">Utilities<a href=\"#utilities\" aria-label=\"utilities permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"custom-event-1\" style=\"position:relative;\">Custom Event<a href=\"#custom-event-1\" aria-label=\"custom event 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The custom event variable relates to the <a href=\"#other\">custom event trigger</a> I explained in the trigger section. As explained, custom event triggers fire when an object with the <code class=\"language-text\">event</code> key enters the <code class=\"language-text\">dataLayer</code> array. The custom event variable is automatically assigned to that event’s name.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Fire trigger</span>\ndataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> <span class=\"token string\">'my-custom-event'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Custom Event Variable: my-custom-event</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"constant\" style=\"position:relative;\">Constant<a href=\"#constant\" aria-label=\"constant permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Unlike variables (which imply changeability), constants are unchanging values. When using external solutions like Google Analytics or Criteo, each account issues authentication keys — these keys are often registered as GTM constants for convenient management.</p>\n<h4 id=\"random-number\" style=\"position:relative;\">Random Number<a href=\"#random-number\" aria-label=\"random number permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Literally a utility variable that assigns a random number between 0 and 2,147,483,647 to the variable each time.</p>\n<h4 id=\"lookup-table\" style=\"position:relative;\">Lookup Table<a href=\"#lookup-table\" aria-label=\"lookup table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>A lookup table outputs specific values if a specified input variable matches conditions entered in the lookup table. In other words, if the input variable contains a string in the table’s input column, it returns the value in the output column — think of it as a table containing conditionals.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/e0577/table.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVR42q1RyxKCMAzs/3+lVy2DSqC06WNtipXHQQXdmWU6JNkkG2UdYxgZMUakhB+YChWNESfNYGtKoGKvoPcBIUQoZoaz9tVh5pEJAWWzWNu2z5UnMXkLj6AICt8hLb34JOicQ6X3frW2TCmWSMNhMMWjrTUhhFzL81Gk4HYndF33nHSdbIzJ/12JbxsKpV5yqo+qoQgaA1L0+AeUzoLnSwOtdZmoXq2u9w2WeUo+fT/kS19B1OfgdF0iKg32TvgAU1sXz1yrLDQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"table\" title=\"\" src=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/6af66/table.png\" srcset=\"/static/86358c0c1ff1ff56f5f6686edab51b8f/69538/table.png 160w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/72799/table.png 320w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/6af66/table.png 640w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/d9199/table.png 960w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/21b4d/table.png 1280w,\n/static/86358c0c1ff1ff56f5f6686edab51b8f/e0577/table.png 1796w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>The “referrer” value I selected as the input variable contains which page the user was on before entering my blog. Using the lookup table, I’ve set it so if the referrer contains the string <code class=\"language-text\">evan-moon.github.io</code>, it puts <code class=\"language-text\">EVAN_BLOG</code> in this variable, otherwise it uses <code class=\"language-text\">EXTERNAL_PAGE</code> as the default value.</p>\n<p>You could add another row with <code class=\"language-text\">google.com</code> in the input and <code class=\"language-text\">GOOGLE</code> in the output.</p>\n<h4 id=\"regex-table\" style=\"position:relative;\">Regex Table<a href=\"#regex-table\" aria-label=\"regex table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>A regex table is identical to a lookup table — it returns specific output values when the input variable matches conditions in the regex table’s input column. But regex tables let you use regular expressions, which are great tools for string manipulation, providing much more powerful functionality than lookup tables that can only check for substring inclusion.</p>\n<p>Usage is identical to lookup tables, but the regex table’s input column takes regular expressions instead of simple strings.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/248c54e49684bee5a093700cb1f23e95/fa60d/regex.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVR42q2R6wqDMAyF+/6PuZ8DW2e16S09azI6UBioLHBUYnOSfDWUCnzIyDmDuaE13JLUioynhsdUkWjTxIirhqVUlUkpIWxbT7aD7k1qiCKcc+DK37GrfjPuhBF2MUad6leMqU8ZhhDg/QIiwrqu+h4GtVbIBltHMs9zZ1R2DUSSGzV6KQLSLgEUO8tuHjvTcZi56vQ5F/0nxUfWkpMzo5F5vsQwapd/hHErw7q5r+R0RdHncvg0t52hPISdtU45TZNFSrlz9Wp+1fANN7YW/GyjVL8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"regex\" title=\"\" src=\"/static/248c54e49684bee5a093700cb1f23e95/6af66/regex.png\" srcset=\"/static/248c54e49684bee5a093700cb1f23e95/69538/regex.png 160w,\n/static/248c54e49684bee5a093700cb1f23e95/72799/regex.png 320w,\n/static/248c54e49684bee5a093700cb1f23e95/6af66/regex.png 640w,\n/static/248c54e49684bee5a093700cb1f23e95/d9199/regex.png 960w,\n/static/248c54e49684bee5a093700cb1f23e95/21b4d/regex.png 1280w,\n/static/248c54e49684bee5a093700cb1f23e95/fa60d/regex.png 1792w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>This variable I just created takes referrer as the input variable, and if the referrer matches the regex <code class=\"language-text\">^(http(s)?:\\/\\/)(.+\\.github\\.io)</code>, it returns the value <code class=\"language-text\">Came from OOO</code>.</p>\n<p>In other words, if the referrer is my blog <code class=\"language-text\">https://evan-moon.github.io</code>, it returns <code class=\"language-text\">Came from evan-moon.github.io</code>. Like this, compared to lookup tables that can only check substring inclusion, regex tables can use regular expressions for more precise string checking plus capturing functionality, making the application range much broader.</p>\n<p>If you want to debug how your created regex table works, you can directly use regular expressions to replace strings in the browser console.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^(http(s)?:\\/\\/)(.+\\.github\\.io)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'https://evan-moon.github.io'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">,</span> <span class=\"token string\">'Came from $3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Came from evan-moon.github.io'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Of course, regular expressions as a language are hard to read and have diverse functionality, making the learning curve steeper than other programming languages. For non-developers, it might feel like a big barrier. But regex tables have much higher flexibility and enable more diverse applications than lookup tables, so I recommend anyone interested in string manipulation study regular expressions. <small>(Actually, regex-hyung has a bad reputation even among developers)</small></p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>GTM is a solution that helps non-developers with direct event log needs define events and send timing directly, without developers managing event logs in business code.</p>\n<p>But ironically, utilizing GTM 100% requires some programming knowledge. I wrote this post hoping non-developers could gain the minimum knowledge needed to leverage GTM.</p>\n<p>Of course, it’s disappointing that I only briefly mentioned the programming knowledge needed for GTM with short explanations. But if I explained JavaScript global variables, CSS selectors, HTML History, etc. in detail in this post, it would no longer be a post — it would be a book. Please understand.</p>\n<p>If you’re a developer who proposed introducing GTM to your team, you have at least a minimal responsibility to help non-developer teammates adapt to GTM. It would be good to think about how to explain each variable’s and trigger’s characteristics and uses so non-developer teammates can understand them well.</p>\n<p>That’s all for this deep dive into GTM, Google Tag Manager.</p>","fields":{"slug":"20200419-what-is-gtm-google-tag-manager-en","path":"/2020/04/19/what-is-gtm-google-tag-manager/en/","lang":"en"},"frontmatter":{"title":"Deep Dive into GTM: Google Tag Manager","subTitle":"Can you manage events without developers? The world of Google Tag Manager","date":"Apr 19, 2020","categories":["Soft Skills","Tutorial"],"tags":["GTM","Google Tag Manager","Google Analytics","GA Marketing","Data Analysis","Developer Communication","MarTech","Marketing Technology"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/561462d8d0ace59b85f8ccc66260a39b/d803c/thumbnail.png","srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/d803c/thumbnail.png 320w,\n/static/561462d8d0ace59b85f8ccc66260a39b/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/fc5c5/thumbnail.webp 320w,\n/static/561462d8d0ace59b85f8ccc66260a39b/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/561462d8d0ace59b85f8ccc66260a39b/01fb2/thumbnail.png","srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/561462d8d0ace59b85f8ccc66260a39b/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}]}},"pageContext":{"tag":"Google Tag Manager","lang":"en"}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}