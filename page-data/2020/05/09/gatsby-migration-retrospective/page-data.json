{"componentChunkName":"component---src-templates-post-tsx","path":"/2020/05/09/gatsby-migration-retrospective/","result":{"data":{"markdownRemark":{"id":"7afa1d87-43ac-5843-b4e7-b59a827a50d2","excerpt":"필자는 지난 황금 연휴 동안 기존에 를 사용하여 만들었던 블로그를 로 마이그레이션했다. 이번 포스팅에서는 1주일 조금 넘게 마이그레이션을 진행하면서 새롭게 학습했던 것들에 대한 공유와 더불어 의외로 예상하지 못했던 이슈들에 대한 공유를 진행해볼까 한다.","html":"<p>필자는 지난 황금 연휴 동안 기존에 <code class=\"language-text\">Hexo</code>를 사용하여 만들었던 블로그를 <code class=\"language-text\">Gatsby</code>로 마이그레이션했다. 이번 포스팅에서는 1주일 조금 넘게 마이그레이션을 진행하면서 새롭게 학습했던 것들에 대한 공유와 더불어 의외로 예상하지 못했던 이슈들에 대한 공유를 진행해볼까 한다.</p>\n<!-- more -->\n<h2 id=\"야크-쉐이빙의-시작\" style=\"position:relative;\">야크 쉐이빙의 시작<a href=\"#%EC%95%BC%ED%81%AC-%EC%89%90%EC%9D%B4%EB%B9%99%EC%9D%98-%EC%8B%9C%EC%9E%91\" aria-label=\"야크 쉐이빙의 시작 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>사실 처음부터 Hexo를 버릴 생각은 아니었다. 물론 <code class=\"language-text\">ejs</code> 엔진 기반의 Hexo보다 리액트 기반의 Gatsby가 편한 건 사실이지만, 마이그레이션에 리소스를 쏟는 동안 포스팅을 작성하지 못할 뿐더러 굳이 그 정도 리소스를 소비할 만큼의 불편함도 딱히 느끼지 못하고 있었기 때문이다.</p>\n<p>게다가 블로그라는 매체는 글 자체가 주요 컨텐츠이기 때문에 여러가지 다양한 기능을 굳이 블로그에 붙힐 필요도 없다고 생각했다. 만약 필요한 기능이 있더라도 대부분 다른 사람들이 플러그인으로 먼저 구현해놓았기 때문에 필자는 그냥 그걸 가져다가 쓰기만 하면서 포스팅을 집필하는 것 자체에만 집중하고 싶었다.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIEBQMG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAQACA//aAAwDAQACEAMQAAAB53M29zbCBPPzNW2C/8QAHRAAAgEEAwAAAAAAAAAAAAAAAQMAAgQiMRESE//aAAgBAQABBQLsxzR6LnJlm2mkMbiNQHIa/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPwFmRH//xAAfEAACAAUFAAAAAAAAAAAAAAABAgAQERJBAyEiMVH/2gAIAQEABj8CK6ZtVcxya8eyZWzFCRv1SYl//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFhUXGR/9oACAEBAAE/IaZcRkABJgpSPZ6oiAKu13AtaoCuxYS6dGfJKKA+TXP/2gAMAwEAAgADAAAAED/I/P/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABoRAAICAwAAAAAAAAAAAAAAAAABECERMYH/2gAIAQIBAT8QpWOiRqNEf//EACAQAQACAgIBBQAAAAAAAAAAAAEAESFBMVFhcYGhsfD/2gAIAQEAAT8Qs6HCtX9qOmv0IAbHT3BQTB8Q0rxS4VV9xb3bBeGU9pYniOcLtQ/cekVTISfFn//Z&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"why\" title=\"why\" src=\"/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg\" srcset=\"/static/541b7115291302457477eabd84aa37bc/0913d/why.jpg 160w,\n/static/541b7115291302457477eabd84aa37bc/cb69c/why.jpg 320w,\n/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg 640w,\n/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  </div>\n  <small>Gatsby&#xAC00; &#xD3B8;&#xD55C;&#xAC74; &#xC54C;&#xACA0;&#xB294;&#xB370;...&#xAD73;&#xC774; &#xB9C8;&#xC774;&#xADF8;&#xB808;&#xC774;&#xC158;&#xAE4C;&#xC9C0; &#xD574;&#xC57C;&#xD558;&#xB098;...?</small>\n  <br>\n  <br>\n</center>\n<p>그러나 문제는 의외의 곳에서 발생했다. 사실 필자는 지금까지 작성한 포스팅을 영어로 번역해서 다시 작성하려는 계획을 가지고 있었는데, 원래 연휴가 시작하기 전에 블로그에 <code class=\"language-text\">i18n</code> 세팅을 해놓은 뒤 연휴 동안 여유있게 한 두개의 포스팅을 먼저 번역하려고 했었다.</p>\n<p>물론 Hexo는 자체적으로도 <code class=\"language-text\">i18n</code> 설정을 제공하고 있고, 필자가 사용하고 있던 테마인 <a href=\"https://github.com/ppoffice/hexo-theme-icarus\" target=\"_blank\" rel=\"nofollow\">Icarus</a> 테마에서도 <code class=\"language-text\">i18n</code> 기능을 제공해주는 것으로 알고 있었기 때문에 몇 가지 설정만으로 간단하게 이 기능을 구현할 수 있을 것이라 생각했다.</p>\n<p>그리고 Hexo에서 제공하는 <a href=\"https://hexo.io/ko/docs/internationalization.html\" target=\"_blank\" rel=\"nofollow\">i18n 설정 가이드 문서</a>에도 설정 파일에 언어 종류를 추가함으로써 여러 개의 언어를 사용할 수 있는 환경을 구축할 수 있다고 이야기하고 있기 때문에 그리 큰 작업이 아닐 것이라고 예상했었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># _config.yml</span>\n\n<span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ko\n  <span class=\"token punctuation\">-</span> en <span class=\"token comment\"># 새로운 언어 추가!</span>\n\n<span class=\"token comment\"># ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 Hexo의 가이드 문서대로라면 <code class=\"language-text\">i18n</code> 설정을 추가하는 것은 몇 분이면 끝날 수도 있는 굉장히 간단한 일이었지만…</p>\n<center>\n  <br>\n  .<br>\n  .<br>\n  .<br>\n  .<br>\n  <br>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">ERROR Render HTML failed: index.html\nTypeError: /Users/evan/dev/evan-blog/themes/icarus/layout/layout.ejs:2\n    1| <span class=\"token doctype\">&lt;!DOCTYPE html></span>\n >> 2| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">&lt;%-</span> <span class=\"token attr-name\">has_config('language')</span> <span class=\"token attr-name\">?</span> <span class=\"token attr-name\">'</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span> + get_config('language').substring(0, 2) + '<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">'</span> <span class=\"token attr-name\">:</span> <span class=\"token attr-name\">''</span> <span class=\"token attr-name\">%</span><span class=\"token punctuation\">></span></span>>\n    3| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    4|     &lt;%- partial('common/head') %>\n    5| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 378px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 91.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAEVUlEQVQ4ywFKBLX7AKXH2M7ExtHIydLIy9HJy9bOzcm/vllhSIuKerGmmK6lk8K1qYa5xW+ql3i0vme50ZSri6OObKV1eK55hgC3ub3NxMXPxsfSyMnSx8jRyc3Kwr16dj6PgUaBb0JzZTeKd0SgrISPwr6Njod6qK+Ospqpm1OHq6iDoboAz8PDzcTFz8XG0cfGz8TN4NLCtZ1kTkAjFA8NAAAAAAEAAQABIBUJeG9BxpRWj5+hZ7LGo6R5eLe8Y7nKAMzDxM7Exc/Dw87Eyd3Pv5yGTBEMBgAAABEPFUlGTGRiZ1JQViAgKQAAAFhLKJOjjGGtwGi0uGisvWCtvwDMwsPPw8XLxMjYzsyumGERDAkCAgxiX2TQzdj7+v/+/v7////v6/KDgYcAAAVhWDSUt7Z4rcqSuM2Wts0AzMLDzcPE2L226tWIOjEaAAAAc3B3/vv/+/f+8vD78e/88e/89PP8////ioiUAwAAtaRr0sC5u6iyyre7AMvHx8ehouqgZcWxSwIABDAtMeXh6+3p8+vm7+jk6uvn7+fk6uXi6ero8vLv+TAuPldNG/PCeMGShsinmwDJxcbClpjqs0tvXykAAAB7eH349P7a1uDGxM3w7Pfo4u/q5fDg2+W/vMb38/2Xk6AYFArNokbPl4HOrKQAxby/z8S7r5NLGBEKAAAApJ+l9/L74t7k29fd8+7o/Ot6/fKm6ubp2tXX7OnyzMfPGBcfg2owupR5sI+KAMO4udXIymRbXQAAAAEAAqCdovPl8e3d7+/gnN7KTpeGKpyNN+bTYOvfwe3X7s7Gzh0cI0QxKbSPfLeXigDBtbfOxMZJREkAAAIAAAFvbHLt2OPdx9Tf07rGsFKFbyeSfDDYyYPd1djn0+Cvpa0CAQg9MzHBooq9nokAvrOzwri5Pjk+AgAFBgQJHRsgtrCz4NbW2dDW2tLO4dW449fD3NXZ3tjb0s3QREBGAAACLCYmtpqDvqGKALyysr6xsC4pKwAAAAgGCwEABB0cIYV8gbqwr87Cw9LIzNTLzsrBwJ+Zmz05PwUDCAgHDBEOEK6TfsOljQCljGeci2RLQ0EiHycTERcMCQ8FAQUAAAETEBQrKCs0MDI3MzYiHiMDAgUAAAEFAwgUERc5NT2sk4LDo4oAYl9BTVE+aWFlSUlRYSInaVdcYiIniywuP0RJZWNmbGxubWxum5ucd3d5Y2JleXd6OTM6W1VhpI6DwKGHACswKTU2M2NYX0hLVJETFqJzdVVFSJs3OGxxdZqVmKqqqpWTlcTExJKRk62trqempzcxOFdRXYp5dcGihQAxOB1GRzVZUVk5NDttICR4SU1BMDZnPUFERk1uam+PjpFOS1CJiYtvbXF/fYBhYGNDPkdEQEtyZ2y8n4QAU1QyXlZWUElSPjg/Oj1EQkFLVVBaUE1YZGBpkI+Xnpyknp2lb211QD5FLiwzQj5HVVBaV1RdWVNdoIl5m8Ev/JbkBaAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"chit\" title=\"chit\" src=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" srcset=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/69538/chit.png 160w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/72799/chit.png 320w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png 378w\" sizes=\"(max-width: 378px) 100vw, 378px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <small>&#xC774;&#xAC74; &#xB610; &#xBB50;&#xC784;...?</small>\n</center>\n<p>마치 <code class=\"language-text\">_config.yml</code> 파일에 코드 한 줄 추가하면 해피엔딩일 것처럼 설명해놓았던 Hexo의 문서와 다르게 역시 현실은 녹록치 않았다.</p>\n<p>사실 이 에러가 발생하는 이유 자체는 간단명료하다. Hexo의 Config 파서는 한 프로퍼티에 여러 개의 값이 설정되는 경우 이 값들을 배열로 파싱해서 반환하는데, Icarus 테마는 <code class=\"language-text\">language</code> 프로퍼티가 반드시 String 타입으로 들어올 것이라고 가정하고 <code class=\"language-text\">substring</code> 메소드를 사용하고 있기 때문에 이런 에러가 발생하는 것이다.</p>\n<p>이 상황 속에서 필자가 선택할 수 있는 옵션은 대략 4가지 정도였다.</p>\n<hr>\n<ol>\n<li>Icarus 테마를 직접 고친다.</li>\n<li>i18n을 잘 지원하는 다른 Hexo 테마를 사용한다.</li>\n<li>직접 Hexo 테마를 만든다.</li>\n<li>그냥 Hexo를 버리고 자유로운 Gatsby로 갈아탄다.</li>\n</ol>\n<hr>\n<p>Hexo의 테마는 npm이나 yarn과 같은 패키지 관리자를 통해 설치하는 것이 아니라 직접 테마를 다운로드 받아 소스에 포함시키는 방식으로 적용되므로 1번 옵션과 같이 사용자가 직접 테마를 수정하는 일도 가능하다. 그리고 이전에도 비슷한 문제가 발생했을 때 몇 번 테마를 직접 수정했던 적도 있어서 이번에도 조금 수정해주면 해결될 것이라고 생각했다.</p>\n<p>그러나 <code class=\"language-text\">language</code> 프로퍼티가 배열로 변경되면서 발생하는 사이드 이펙트는 <code class=\"language-text\">layout.ejs</code> 파일 내에서만 발생하는 것이 아니라서 꽤 많은 부분을 손 대야 할 것 같았다.</p>\n<p>그렇다고 2번 옵션을 선택하자니 그것도 뭔가 찜찜하다. 이 상황의 근본적인 문제는 단지 Icarus 테마가 Multiple Language를 지원하지 않는다는 것이 아니라, 필자의 블로그가 다른 사람이 만든 테마의 제한적인 기능에 너무 의존하고 있다는 것이기 때문이다. 결국 해당 기능을 지원하는 다른 테마로 변경한다고 해도 비슷한 상황이 반복될 가능성이 높다.</p>\n<p>자, 그럼 직접 Hexo 테마를 만든다는 3번 옵션은 어떨까? 테마를 만든 김에 오픈소스로 배포도 하면 좋지 않을까?</p>\n<p>하지만 Hexo의 테마를 만드려면 ejs와 jQuery와 같은 올드한 기술을 적극 사용해야한다. 게다가 어차피 테마를 만드는 것이나 마이그레이션을 하는 것이나 필요한 리소스는 크게 다르지 않다. 오히려 ejs로 UI를 그리는 것보다 필자에게 익숙한 리액트 기반으로 되어있는 Gatsby를 사용하는 것이 더 이득이다.</p>\n<p>결국 이러한 이유들로 Hexo에서 Gatsby로 환승을 하기로 마음을 먹게 되었다.</p>\n<p>사실 Hexo에서 Gatsby로 건너가는 마이그레이션 자체는 크게 어렵지 않다. Gatsby의 공식 블로그에서도 <a href=\"https://www.gatsbyjs.org/blog/2017-10-01-migrating-my-blog-from-hexo-to-gatsby/\" target=\"_blank\" rel=\"nofollow\">Migrating My Blog From Hexo To Gatsby</a>라는 문서를 제공하고 있는데다가 그 과정이 그렇게 어려운 것도 아니기 때문이다.</p>\n<p>그러나 필자의 블로그는 이미 운영 중인 서비스나 마찬가지이기 때문에, 단지 정적 페이지 생성기를 변경하는 것이 아니라 기존에 있는 기능을 전부 다시 구현해야하는 작업이 추가로 필요하다.</p>\n<p>만약 Hexo의 플러그인을 사용하여 편하게 사용하고 있던 기능이 Gatsby에서는 지원되지 않는다면 일일히 다 만들어줘야 하며, 테마를 사용하면서 신경쓰고 있지 않았던 CSS를 사용한 스타일도 반응형 디자인까지 전부 고려해서 직접 작성해야하는 일은 그렇게 가벼운 작업이 아니다.</p>\n<p>그리고 이 마이그레이션 작업을 진행하는 동안 블로그 포스팅을 작성하거나 다른 토이프로젝트를 진행하는 일을 병행하기는 어렵기 때문에, 최대한 빠른 시간 안에 집중해서 호다닥 끝내야한다고 생각했다.</p>\n<p>마침 4월 30일 석가탄신일부터 장장 6일 간에 걸친 황금 연휴가 시작되었고, 이 정도의 황금 연휴는 올해 안에 다시 오지 않기 때문에 이런 대작업을 진행하기에는 올해 마지막 기회라고 봐도 좋았다. 여기까지 생각이 닿은 필자는 바로 브랜치를 따고 Hexo에서 Gatsby로 환승하는 작업을 시작했다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBAv/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAZ15zKyYX//EABgQAAMBAQAAAAAAAAAAAAAAAAABAgMR/9oACAEBAAEFAo0oW/R7E8HCHw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGRAAAwADAAAAAAAAAAAAAAAAAAExEDKB/9oACAEBAAY/AqXmIiGqP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFxMVHh/9oACAEBAAE/ISPLUTJp2oo+yqTbwtzqC8P/2gAMAwEAAgADAAAAEFg//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxDFQ//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/ELW//8QAHRABAAIBBQEAAAAAAAAAAAAAAQARMSFBYYGhkf/aAAgBAQABPxBsiXryhQ4imR9IlKTvEgXb4ibqWjXiIt4T/9k=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"yak\" title=\"yak\" src=\"/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg\" srcset=\"/static/0081bd73b6f38b83ddb98effd99285d2/0913d/yak.jpg 160w,\n/static/0081bd73b6f38b83ddb98effd99285d2/cb69c/yak.jpg 320w,\n/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg 640w,\n/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <small>&#xADF8;&#xB807;&#xAC8C; &#xC57C;&#xD06C; &#xC250;&#xC774;&#xBE59;&#xC774; &#xC2DC;&#xC791;&#xB410;&#xB2E4;...</small>\n</center>\n<h2 id=\"gatsby에-대한-간단한-설명\" style=\"position:relative;\">Gatsby에 대한 간단한 설명<a href=\"#gatsby%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%84%A4%EB%AA%85\" aria-label=\"gatsby에 대한 간단한 설명 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVQoz2OoCZ3KAAI5jp2M66btZQKx9648yZTv0s0IYtdFTGco8epngAEmJiY4jcxGAbG6NYxIXLhsbdBMkDgjIwMjEyOIhGJkA1hYWFANy7JrBxumwuDHPbFg2cRlPdvPz6hcM6vcf5IQqkoGRgbsgAlF7sDaM2DrJhevmL5x0rH/rQnz/i+q3/m/xKd/FUicmYnFBugqf7ipjIwCUKY5EPPjspB9ZvXau8u6tv/PtG37MaFg6b9ppWueczCIqQOVlTAxMkUB1eQDcQYQdwJxPBA3AXE5EIcDsSfIbrBJ////B5s8qWj5hpvHnv4Hevn3hkmH/y/p2HYQpIiFlTkB6KosULwBcSuQHQmkM4F0I5DOBeI2II6Ge7/MbyLYwETjBnmgKw/Mb9r4A0ifjNWr1gKJ68lasgIpDqh32aEaWYFsZmDkAClGfSDmhMpDZLMdOuD+l2fwFoGxPXSimBhIBe3J88B0kUcvI9D7cPEy3wlgwwR4hIDByIiRDuGuQY/9Eu9+MEZiM8IScrFXH1wOGcDSHhsbG5jNzAyJDxhNVQAAbh9uipzlO5IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"gatsby\" title=\"gatsby\" src=\"/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png\" srcset=\"/static/2bab627a79337d768c8221c571d2c81a/69538/gatsby.png 160w,\n/static/2bab627a79337d768c8221c571d2c81a/72799/gatsby.png 320w,\n/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png 640w,\n/static/2bab627a79337d768c8221c571d2c81a/d9199/gatsby.png 960w,\n/static/2bab627a79337d768c8221c571d2c81a/21b4d/gatsby.png 1280w,\n/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p><strong>Gatsby</strong> is a free and open source framework based on React that helps developers build blazing fast websites and apps</p>\n<p><em><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow\">Gatsby Offical Site</a></em></p>\n</blockquote>\n<p>Gatsby는 리액트 기반의 정적 사이트 생성기이다.</p>\n<p>개인적으로 Gatsby의 최대 장점은 아마 리액트 기반이라는 것이 아닐까라는 생각을 하는데, 리액트는 이미 전 세계의 프론트엔드 개발자들에게 사랑받는 UI 라이브러리이기 때문에, Ruby를 사용하는 <a href=\"http://jekyllrb-ko.github.io/\" target=\"_blank\" rel=\"nofollow\">Jekyll</a>이나 ejs를 학습해야하는 <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"nofollow\">Hexo</a>에 비해 학습 비용이 상대적으로 낮기 때문이다.</p>\n<p>그리고 다른 개발자 분들이 만들어 놓은 프로젝트 스타터를 사용하면 직접 보일러플레이트를 작성할 필요가 없기 때문에 빠르게 프로젝트를 세팅할 수도 있다. 필자는 <code class=\"language-text\">gatsby-starter-blog</code>라는 스타터를 사용해서 프로젝트를 세팅했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby new evan-blog https://github.com/gatsbyjs/gatsby-starter-blog</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>필자가 사용한 스타터 외에도 국내외의 개발자 분들이 블로그용 스타터를 만들어서 깃허브에 올려놓은 경우가 많으므로 한번 쭉 흝어보고 마음에 드는 스타터를 사용하도록 하자.</p>\n<p>또 한 가지 특이한 점이 있다면 리액트 컴포넌트 내에서 데이터를 Fetch 해오기 위한 수단으로 <a href=\"https://graphql.org/\" target=\"_blank\" rel=\"nofollow\">GraphQL</a>을 채택했다는 점인데, 아무래도 REST API에 익숙한 개발자들이 많기 때문에 처음에는 조금 어색할 수 있지만, 개념 자체가 그렇게 어려운 편은 아니기 때문에 막상 몇 번 쓰다보면 금방 적응할 수 있는 것 같다.</p>\n<h3 id=\"graphql\" style=\"position:relative;\">GraphQL<a href=\"#graphql\" aria-label=\"graphql permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">GraphQL(Graph Query Language)</code>은 이름 그대로 새로운 개념의 질의 언어이다. 우리가 평소에 자주 사용하는 <code class=\"language-text\">SQL(Structured Query Language)</code>와 같이 어떤 시스템으로부터 데이터를 가져오기 위해 질의를 날리는 수단으로 이용된다는 것이다.</p>\n<p>SQL이 데이터베이스 시스템에 저장되어 있는 데이터를 가져오기 위해 데이터베이스에게 질의를 날리기 위한 용도로 사용된다면, GraphQL은 클라이언트가 서버에게 데이터를 보내달라고 질의하는 목적으로 사용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> frontmatters<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> thumbnail <span class=\"token keyword\">FROM</span> post <span class=\"token keyword\">WHERE</span> post_id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  post<span class=\"token punctuation\">(</span><span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    frontmatters\n    title\n    thumbnail\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>기존의 REST API를 사용할 때의 클라이언트는 단지 서버가 제공해주는 엔드포인트로 요청을 보내고 미리 정해진 구조의 응답을 받아서 데이터를 사용했지만, GraphQL을 사용하는 클라이언트는 능동적으로 자신이 필요한 데이터를 선택하여 서버에게 질의할 수 있다는 장점을 가진다.</p>\n<p>그러나 클라이언트가 원하는 스키마의 쿼리를 맘대로 날릴 수 있다는 장점은 반대로 사용자에게 제어권을 넘겨준다는 클라이언트 프로그램의 특성을 생각하면 보안 측면에서의 단점도 될 수 있고, 백엔드 개발자에 비해 상대적으로 쿼리에 미숙한 클라이언트 개발자가 복잡도가 슬로우 쿼리를 발생시킬 수도 있다.</p>\n<p>그렇기 때문에 GraphQL의 백엔드 시스템은 반드시 이러한 상황에 대한 조치를 적절하게 취해줘야하고, GraphQL의 이러한 단점들은 REST API에 비해 안정성이 떨어진다고 판단될 수 있기 때문에 아직 대규모 프로젝트에서 사용되는 사례는 드문 것 같다. <small>(실제로 이런 방식에 대한 개발자들의 호불호도 꽤나 갈린다)</small></p>\n<p>그러나 Gatsby는 정적 사이트 생성기이기 때문에 GraphQL을 사용하여 쿼리를 날리는 상황 자체가 런타임이 아닌 컴파일타임만으로 제한되어 있고, 슬로우 쿼리가 발생된다해도 사용자에게 실제로 피해가 가는 것이 아닌 빌드가 조금 더 느려진다 뿐이므로 이러한 단점들이 상대적으로 상쇄되는 환경이라고 볼 수 있다.</p>\n<h3 id=\"graphql을-직접-사용해보자\" style=\"position:relative;\">GraphQL을 직접 사용해보자<a href=\"#graphql%EC%9D%84-%EC%A7%81%EC%A0%91-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"graphql을 직접 사용해보자 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Gatsby는 로컬 환경에서 자유롭게 쿼리를 날려볼 수 있는 페이지를 별도로 제공해주고 있다. 이 페이지가 Swagger같이 일종의 API 문서 역할을 하는 것이다. <code class=\"language-text\">gatsby develop</code> 명령어를 이용하여 로컬 서버를 실행하고 <code class=\"language-text\">localhost:8000/__graphql</code>로 접속하면 Gatsby가 제공하는 쿼리 테스트 페이지를 만나볼 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1UlEQVQ4y42UiXKjMBBE+f/PdDZZgzl0gyREb484EqfWu6Gqy5RkHm+kEc26LFh8gA8Bclnn8HZ7Q9d2ePQ9hn5ALxlGtPcW4zBAaY1pmv6a5r2dMKgdJlfOGUZbAjWWmFFSQcwb5lzq+Md9RK8s/Dwzy/NvmNHYiTcuIZeCbQNijEiEKh/hbEQhaCN443zgQ6PxuN0nqF7DTwRrzzh4jgeCG80BpWe4JWFdC2Y+JBH6Vs4UFAHSwDr+nw87gVlfrbw/IoZ+jlBuuUpOKdXs13aNb3yBADUhHw8NXe0cnPq0q8CcV/zqLQLLOtdwXdcLIvkKtC5gMu4wDJedAGvJZSvoOk4aWrHkFLmea34JFMPf/aeh2F3hyxo+AjUEBJuw0WwHvjCcd8ORIDvaHSKGHKvhfbNysdvJIdHuLFnyP0OjDqDdza6SY8pshfmpD18CvxtKydUs7Lt9bsqtM3DzvrPpB4b3gYYCO+xqOCfzjQsL7pPnupWfGdJmEMPBwEvLyE5LzpJbqpuQ/lmy5GxsMWwJM2yd4L809dFCzfvDoONZls05geW4/36dhnKWLZu79uK5Mcd6VqBy8emkaH5NjDHXMZQEfo0cj50YPgiysmbLcu3umT8qV4+XpUQMEwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"query test page\" title=\"query test page\" src=\"/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png\" srcset=\"/static/42203ec8bbd0d883d511c96198e0d7c9/69538/query-test-page.png 160w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/72799/query-test-page.png 320w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png 640w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/d9199/query-test-page.png 960w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/21b4d/query-test-page.png 1280w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png 2684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>필자 역시 GraphQL을 사용해본 경험이 별로 없었기 때문에 처음에는 감을 잘 못 잡고 있었는데 이 페이지에서 30분 정도 이것저것 만져보다 보니까 대충 어떤 식으로 쿼리를 날려야하는지 감을 잡을 수 있었다.</p>\n<p>필자가 선택한 스타터인 <code class=\"language-text\">gatsby-starter-blog</code>는 기본적으로 마크다운을 사용한 블로그 작성에 필요한 Gatsby 플러그인들을 포함하고 있기 때문에 마크다운 파일을 파싱하는 <code class=\"language-text\">markdownRemark</code>나 이미지 리소스를 파싱하는 <code class=\"language-text\">imageSharp</code>와 같은 쿼리 타입들이 추가되어있지만, 만약 이 친구들이 보이지 않는다면 <code class=\"language-text\">gatsby-transformer-remark</code>와 같은 플러그인을 직접 설치해서 추가해줘야한다.</p>\n<p>이렇게 <code class=\"language-text\">__graphql</code> 페이지에서 이것저것 만져보면서 대충 Gatsby의 GraphQL 인터페이스에 대한 감을 잡았다면, 리액트 컴포넌트 내에서 <code class=\"language-text\">useStaticQuery</code> 훅을 사용하여 쿼리를 직접 날리면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query MyQuery {\n    markdownRemark(frontmatter: {title: {eq: \"테스트 포스트\"}}) {\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  markdownRemark<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    frontmatter<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      title<span class=\"token operator\">:</span> <span class=\"token string\">\"테스트 포스트\"</span><span class=\"token punctuation\">,</span>\n      date<span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-09T12:57:08.000Z\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>방금 필자가 보인 예시의 <code class=\"language-text\">useStaticQuery</code> 훅은 이름 그대로 정적인 쿼리만을 제공하기 때문에 위 쿼리는 단지 <code class=\"language-text\">frontmatter.title</code>이 정확히 <code class=\"language-text\">테스트 포스트</code>인 데이터를 가져올 뿐이다. 만약 억지로 <code class=\"language-text\">graphql</code> 함수의 인자로 변수가 포함된 템플릿 스트링을 넘기려고 한다면 다음과 같은 에러를 만나게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Error: It appears like Gatsby is misconfigured.\nGatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away.\nUnfortunately, something went wrong and the query was left in the compiled code.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><em>Gatsby에서 사용하는 <code class=\"language-text\">graphql</code> 호출은 오직 컴파일 타임에만 평가됨.<br></em>\n<em>님이 쿼리를 잘못써서 쿼리가 평가가 안됐음.</em></p>\n</blockquote>\n<p>즉, 사용자가 쿼리로 사용하는 템플릿 스트링에 변수를 포함시킨다고 해도 이 변수는 “런타임” 때 평가되기 때문에 Gatsby가 코드를 컴파일할 때는 이 변수에 어떤 값이 들어올 지 알 수가 없다는 것이다.</p>\n<p>하지만 블로그 포스팅 페이지를 만드려면 반드시 <code class=\"language-text\">/posts/2</code> 같이 URL을 통해 동적인 파라미터를 받고, 이 파라미터를 사용하여 “2번 포스트를 가져와!”와 같은 쿼리를 날릴 수 있어야한다. 이럴 때 사용하는 것이 바로 <code class=\"language-text\">pageQuery</code>이다.</p>\n<h3 id=\"동적-파라미터를-받는-페이지-만들기\" style=\"position:relative;\">동적 파라미터를 받는 페이지 만들기<a href=\"#%EB%8F%99%EC%A0%81-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"동적 파라미터를 받는 페이지 만들기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>블로그의 가장 기본적인 기능은 동일한 UI 템플릿에 다른 내용이 표현되어야 한다는 것이다.</p>\n<p>일반적으로 이러한 기능을 구현해야하는 경우, 런타임 때 클라이언트가 서버의 HTTP API를 사용하여 데이터를 받아온 후 렌더하거나, SEO가 중요한 페이지일 경우 SSR(Server Side Rendering) 서버가 데이터를 받아온 뒤 렌더된 페이지를 클라이언트에게 응답으로 보내주는 방식으로 구현한다.</p>\n<p>하지만 Gatsby는 정적 사이트 생성기이기 때문에 어플리케이션이 작동하고 있는 런타임에 데이터를 동적으로 받아와서 가공하는 방식이 아니라, 컴파일 타임에 GraphQL을 사용하여 데이터를 받아온 뒤 실제 페이지 파일을 생성해야한다.</p>\n<p>이게 어떤 말인지 잘 이해가 가지 않는다면 <code class=\"language-text\">public</code> 디렉토리 내부의 파일을 한번 살펴보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> evan-blog/public/page-data <span class=\"token operator\">&amp;&amp;</span> ll\n\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2017</span>\ndrwxr-xr-x   <span class=\"token number\">5</span> evan  <span class=\"token number\">1525943656</span>   160B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2018</span>\ndrwxr-xr-x  <span class=\"token number\">10</span> evan  <span class=\"token number\">1525943656</span>   320B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2019</span>\ndrwxr-xr-x   <span class=\"token number\">7</span> evan  <span class=\"token number\">1525943656</span>   224B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2020</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>.html\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 about\ndrwxr-xr-x  <span class=\"token number\">19</span> evan  <span class=\"token number\">1525943656</span>   608B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 categories\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 dev-404-page\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 index\ndrwxr-xr-x   <span class=\"token number\">6</span> evan  <span class=\"token number\">1525943656</span>   192B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 page</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자의 블로그 포스트 경로는 <code class=\"language-text\">/2020/05/09/blog-title/</code>과 같은 포맷을 가지고 있기 때문에 Gatsby는 필자의 블로그를 컴파일할 때 실제로 <code class=\"language-text\">public/page-data</code> 디렉토리 내부에 <code class=\"language-text\">2020</code>, <code class=\"language-text\">05</code>, <code class=\"language-text\">09</code>, <code class=\"language-text\">blog-title</code>이라는 디렉토리를 생성하고 그 안에 <code class=\"language-text\">page-data.json</code>이라는 파일을 생성하며, 이 안에는 렌더할 HTML을 문자열로 가지고 있다.</p>\n<p>즉, 런타임에 동적으로 데이터를 받아와서 페이지의 내용을 렌더하는 것이 아니라, 컴파일을 할 때 하나의 포스팅 당 하나의 페이지 파일을 실제로 생성해야한다는 것이다. 이 차이점을 잘 파악한다면 정적 사이트 생성기를 조금 더 편하게 다룰 수 있다.</p>\n<h4 id=\"createpages-api\" style=\"position:relative;\">createPages API<a href=\"#createpages-api\" aria-label=\"createpages api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Gatsby는 컴파일 타임 때 사용자가 입맛에 맞는 페이지를 생성할 수 있도록 <code class=\"language-text\">createPages</code>라는 API를 제공한다. 이 API는 <code class=\"language-text\">gatsby-node.js</code> 파일에서 모듈로 export하는 방식으로 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>첫 번째 인자인 <code class=\"language-text\">graphql</code>은 리액트 컴포넌트 내부에서 GraphQL을 사용할 때 호출하는 함수와 동일한 녀석이고, 두 번째 인자인 <code class=\"language-text\">actions</code>는 우리가 <a href=\"https://haruair.github.io/flux/docs/overview.html\" target=\"_blank\" rel=\"nofollow\">Flux 아키텍처</a>에서 이야기하는 그 액션과 동일한 녀석이다.</p>\n<p>Gatsby는 내부적으로 <a href=\"https://redux.js.org/\" target=\"_blank\" rel=\"nofollow\">리덕스(Redux)</a>를 사용하여 상태 관리를 하고 있고,  Gatsby의 모든 API는 인자로 이러한 액션 목록을 받고 있기 때문에 우리는 자유롭게 이 액션들을 사용하여 Gatsby에게 명령을 내릴 수 있다. 그 중 <code class=\"language-text\">createPage</code>라는 액션이 바로 페이지를 생성하라는 명령을 내릴 수 있는 액션이다.</p>\n<p>자, 그럼 대략 이런 플로우를 생각해볼 수 있겠다.</p>\n<blockquote>\n<ol>\n<li>GraphQL로 작성된 포스팅을 싹 다 가져온다</li>\n<li>포스팅 데이터를 순회하면서 <code class=\"language-text\">createPage</code> 액션을 디스패치해서 페이지를 하나씩 생성한다.</li>\n<li>Profit!</li>\n</ol>\n</blockquote>\n<p>글로만 봐도 이미 심플해보이지만, 막상 해보면 실제로는 별로 고민할 필요도 없을 정도로 더 심플하다. 그럼 포스팅 페이지를 한번 생성해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/Post.tsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 1. 모든 포스팅 데이터를 긁어온다</span>\n  <span class=\"token keyword\">const</span> allPostsQuery <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    allMarkdownRemark {\n        edges {\n          fields {\n            path\n          }\n          node {\n            id\n          }\n        }\n      }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 2. 포스팅 데이터를 순회하며 페이지 파일을 생성한다.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> edges<span class=\"token operator\">:</span> posts <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> allPostsQuery<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">;</span>\n  posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n      component<span class=\"token operator\">:</span> template<span class=\"token punctuation\">,</span>\n      context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        postId<span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">createPages</code> API를 사용하여 페이지 파일 생성 로직을 작성해주게 되면 나머지 귀찮은 작업은 Gatsby가 알아서 해주기 때문에 굉장히 편리하다.</p>\n<p>하지만 <code class=\"language-text\">createPage</code> 함수는 단지 페이지 파일을 생성할 뿐이고, <code class=\"language-text\">Page.tsx</code> 컴포넌트에게 포스팅 데이터를 넘겨주는 것은 아니다. 대신 우리는 <code class=\"language-text\">createPage</code> 함수의 <code class=\"language-text\">context</code> 옵션을 사용하여 원하는 데이터를 템플릿 컴포넌트에게 넘겨줄 수 있고, 템플릿 컴포넌트 내에서 이 컨텍스트 데이터를 이용하여 다시 포스팅 데이터를 가져오는 과정이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// Post.tsx</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery($postId: String!) {\n    markdownRemark(id: {eq: $postId}) {\n      fields {\n        path\n      }\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  pageContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    postId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> frontmatter <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>markdownRemark<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우리가 <code class=\"language-text\">createPage</code>의 <code class=\"language-text\">context</code> 옵션을 통해 컴포넌트로 넘긴 변수는 컴포넌트 파일 내부의 <code class=\"language-text\">pageQuery</code> 모듈에게 주입된다.</p>\n<p>필자가 작성한 쿼리를 보면 <code class=\"language-text\">query PostQuery($postId: String!) {}</code>과 같이 쿼리의 인자로 <code class=\"language-text\">postId</code>라는 변수를 받은 후에 <code class=\"language-text\">markdownRemark</code> 쿼리 타입에 사용하고 있는 모습을 볼 수 있다. 이런 과정을 통해 우리는 동적인 값을 사용하여 데이터를 가져올 수 있는 페이지를 생성할 수 있는 것이다.</p>\n<p>이 외에도 <code class=\"language-text\">createRedirect</code>, <code class=\"language-text\">createNode</code> 등 다양한 액션들을 지원하고 있고, 이런 API와 액션들을 조합하여 재미있는 기능을 만들 수도 있지만, 블로그 같은 어플리케이션에 필요한 페이지네이션이나 카테고리, 태그 페이지와 같은 간단한 기능은 대부분 <code class=\"language-text\">createPage</code> 액션만으로도 충분히 구현 가능하다.</p>\n<h2 id=\"의외로-귀찮았던-부분\" style=\"position:relative;\">의외로 귀찮았던 부분<a href=\"#%EC%9D%98%EC%99%B8%EB%A1%9C-%EA%B7%80%EC%B0%AE%EC%95%98%EB%8D%98-%EB%B6%80%EB%B6%84\" aria-label=\"의외로 귀찮았던 부분 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이렇게 Gatsby에 대한 기본적인 학습을 하고난 후 기존에 Hexo로 구현되어있던 기능들과 Icarus 테마에서 제공하던 스타일을 전부 직접 구현해야하는 작업을 하게 되었는데, 이 마이그레이션 작업을 하는 동안 대부분의 시간을 여기에 쏟았다고 해도 과언이 아닐 정도로 지루한 작업의 연속이었다.</p>\n<p>물론 모든 기능을 다 구현하면 시간이 너무 오래 걸릴 수도 있으니 기존 기능들 중에서 사람들이 자주 사용하거나, SEO에 영향을 줄 것 같은 기능을 우선 구현하는 것을 목표로 잡기는 했지만 그래도 코드의 양이 많은 것은 변하지 않는 사실이라 인내심을 가지고 하루에 조금씩이라도 꾸준히 작업하는 것을 목표로 했다.</p>\n<h3 id=\"기존-링크와의-연결을-신경써줘야한다\" style=\"position:relative;\">기존 링크와의 연결을 신경써줘야한다<a href=\"#%EA%B8%B0%EC%A1%B4-%EB%A7%81%ED%81%AC%EC%99%80%EC%9D%98-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%8B%A0%EA%B2%BD%EC%8D%A8%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"기존 링크와의 연결을 신경써줘야한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>어떤 웹 서비스를 마이그레이션할 때 주의해야 할 것 중 하나는 바로 기존 페이지로 연결되는 링크가 죽으면 안된다는 것이다. 예를 들어 마이그레이션 전의 <code class=\"language-text\">/posts/1</code>이라는 URL이 1번 포스팅을 볼 수 있는 페이지로 연결되는 링크였다면, 이 규칙은 반드시 마이그레이션 후에도 동일해야한다.</p>\n<p>만약 이 규칙이 깨지게 되는 경우, 해당 링크로 접속하는 사용자는 <code class=\"language-text\">404</code> 상태를 보게 될 것이기 때문이다. 필자의 블로그 포스팅의 경우 이미 다양한 채널들을 통해 공유가 되었고, 또 다른 블로그에 참조 포스팅으로 링킹되어있는 경우도 많기 때문에, 필자는 이 부분에 대해서 신경을 쓸 수 밖에 없었다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAD/9oADAMBAAIQAxAAAAGkr5ZzJzRP/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAEgMRIf/aAAgBAQABBQLQgCxsiqSxpYxut//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAAREv/aAAgBAgEBPwGMv//EABoQAAICAwAAAAAAAAAAAAAAAAARARAhMXH/2gAIAQEABj8CNvoiM3//xAAbEAEAAgIDAAAAAAAAAAAAAAABACERMUFhsf/aAAgBAQABPyF7B8mAWhSsLj5TXcaitz//2gAMAwEAAgADAAAAEKAf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAwEBPxCMU//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAgEBPxASbAv/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFBYZH/2gAIAQEAAT8QrIZEG2ow2DTt2fZf1kPBHRBVcwVzDg9xRSnVn//Z&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"whoami\" title=\"whoami\" src=\"/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg\" srcset=\"/static/b8cf4a7419783c7dc8a53d556099190c/0913d/whoami.jpg 160w,\n/static/b8cf4a7419783c7dc8a53d556099190c/cb69c/whoami.jpg 320w,\n/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg 640w,\n/static/b8cf4a7419783c7dc8a53d556099190c/6a068/whoami.jpg 960w,\n/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <small>&#xAE30;&#xC874; &#xB9C1;&#xD06C;&#xB97C; &#xC81C;&#xB300;&#xB85C; &#xCC98;&#xB9AC;&#xD574;&#xC8FC;&#xC9C0; &#xC54A;&#xB294;&#xB2E4;&#xBA74; &#xC720;&#xC800;&#xB294; 404 &#xD398;&#xC774;&#xC9C0;&#xB97C; &#xBCF4;&#xAC8C; &#xB41C;&#xB2E4;.</small>\n</center>\n<p>또한 SEO 측면에서도 기존 포스팅 링크에서 <code class=\"language-text\">404</code>가 떨어진다면 검색엔진 봇은 해당 페이지가 삭제된 것으로 인식하기 때문에 검색 결과에서 해당 포스팅을 내리게 될 것이다. 혹여나 불가피하게 기존의 링크를 다른 링크로 변경해야하는 상황이라고 한다면 반드시 명시적으로 <code class=\"language-text\">301</code> 상태코드를 응답으로 반환하여 <code class=\"language-text\">/posts/1</code>이라는 링크가 어떤 링크로 변경되었는지를 검색엔진 봇에게 알려야한다.</p>\n<p>필자가 기존에 사용하던 Hexo는 <code class=\"language-text\">yyyymmdd-{postTitle}</code> 형식의 제목을 가진 포스트를 자동으로 <code class=\"language-text\">/yyyy/mm/dd/{postTitle}/</code> 형식의 URL로 매핑해주는 기능을 가지고 있었지만, Gatsby에는 딱히 이런 기능이 없다.</p>\n<p>물론 <code class=\"language-text\">gatsby-starter-blog</code> 스타터는 기본적으로 각 포스트 마크다운 파일의 경로를 가져와서 그대로 URL로 사용하는 코드를 보일러플레이트로 제공하지만, 이 방식은 기존 Hexo 블로그의 URL 생성 방식과 다른 방식이기 때문에 포스트들이 이전과 동일한 URL을 가질 수 있도록 별도의 작업이 필요했다.</p>\n<p>이를 위해 페이지 파일을 컴파일할 때 각 포스트의 파일 경로를 토대로 정규식을 사용하여 URL을 만들어 낸 후 포스트 노드 필드에 <code class=\"language-text\">path</code>라는 키로 삽입하는 방식을 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> filePath<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n      <span class=\"token regex\">/(?&lt;=\\/)(\\d{4})(\\d{2})(\\d{2})(-)(?=.+)/</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'$1/$2/$3/'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">slug</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token operator\">:</span> filePath<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">path</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token operator\">:</span> path<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 <code class=\"language-text\">createNodeField</code> 액션을 통해 생성한 노드의 필드는 <code class=\"language-text\">fields</code>라는 프로퍼티에 삽입되며, 쿼리를 사용할 때 요런 느낌으로 접근할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery {\n    markdownRemark {\n      fields {\n        path\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 기존 블로그와 동일한 링크를 가지도록 매핑하는 일은 크게 어렵거나 복잡한 일은 아니었지만, 단 한 개의 링크라도 망가지지 않도록 신경써서 작업해야하는 일이었고, 제대로 매핑되었는지 일일히 테스트도 해야했기 때문에 귀찮음 1순위였던 작업이었다.</p>\n<h3 id=\"내가-직접-다-만들어야한다\" style=\"position:relative;\">내가 직접 다 만들어야한다<a href=\"#%EB%82%B4%EA%B0%80-%EC%A7%81%EC%A0%91-%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"내가 직접 다 만들어야한다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>기존에 Hexo를 사용할 때는 테마에서 제공해주는 기능을 가져다 사용하거나, 플러그인을 적극적으로 활용했었기 때문에 필자가 직접 개발을 해야하는 경우가 거의 없었다. 그러나 애초에 이 마이그레이션을 진행하게 된 계기가 테마나 플러그인에 너무 의존했기 때문이었으니, 이왕 Gatsby를 사용할 거라면 되도록 기능을 직접 구현하는 방향을 선택했다.</p>\n<p>예를 들면 관련 포스팅 섹션 같은 경우에는 기존에 <a href=\"https://github.com/tea3/hexo-related-popular-posts\" target=\"_blank\" rel=\"nofollow\">hexo-related-popular-posts</a> 플러그인을 사용하여 렌더하고 있었지만, Gatsby 진영에는 딱히 쓸만한 녀석이 없는 것 같아서 요런 느낌으로 직접 구현했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> intersection <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash/intersection'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useAllPosts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/hooks/useAllPosts'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RelatedPosts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> tags<span class=\"token punctuation\">,</span> currentPost <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useAllPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> relatedPosts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> posts\n      <span class=\"token comment\">// 현재 포스트는 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">!==</span> currentPost<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 현재 포스트의 태그와 다른 포스트의 태그 중 겹치는 부분을 찾는다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        post<span class=\"token punctuation\">,</span>\n        tags<span class=\"token operator\">:</span> <span class=\"token function\">intersection</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 겹치는 태그가 없는 포스트는 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> tags <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 겹치는 태그가 많은 순으로 내림차순 정렬한다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 가장 겹치는 부분이 많은 최대 5개 포스트만 걸러낸다</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">MAX_COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentPost<span class=\"token punctuation\">,</span> posts<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사실 관련 포스팅이라고 해봤자 단순히 현재 포스팅과 똑같은 태그를 가장 많이 가지고 있는 포스팅들을 솎아내는 것이기 때문에 별로 복잡할 것도 없었다.</p>\n<p>물론 일일히 이런 걸 다 구현해야한다는 것이 번거롭기는 하지만, 반대로 생각하면 필자가 원하는 기능을 구현할 수 있는 자유도도 높아졌다는 이야기므로 이 정도 번거로움은 감수하는 것이 맞는 듯 하다.</p>\n<h3 id=\"cli에-포스팅-생성-기능이-없다\" style=\"position:relative;\">CLI에 포스팅 생성 기능이 없다<a href=\"#cli%EC%97%90-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%83%9D%EC%84%B1-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%97%86%EB%8B%A4\" aria-label=\"cli에 포스팅 생성 기능이 없다 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>애초에 Gatsby는 마크다운 블로그 전용이 아니라 범용적인 정적 사이트 생성기이기 때문에 CLI를 통한 포스팅 생성 기능 같은 것은 제공해주지 않는다.</p>\n<p>그렇다고 매번 디렉토리 생성하고 디렉토리 이름 바꿔주고 포스팅 파일 만들고 하는 작업을 손으로 할 수는 없으니 아주 간단한 스크립트를 하나 작성해서 사용하기로 했다. 포스팅 파일을 생성할 때마다 일일히 문자열로 기본 템플릿을 만들어 줄 수도 있지만, 조금 더 간단하게 처리할 수 있는 방법은 바로 예제 파일을 사용하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token comment\">&lt;!-- example.md --></span>\n\n<span class=\"token hr punctuation\">---</span>\n\ntitle: $title\ndate: $date\ntags:\ncategories:\nthumbnail:\n\n<span class=\"token hr punctuation\">---</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 예제 파일을 하나 만들어 놓고 새로운 포스팅 파일을 생성할 때 이 예제 파일을 불러와서 <code class=\"language-text\">$title</code>과 <code class=\"language-text\">$date</code>만 적당한 문자열로 변경해주면 간단하게 새로운 포스팅 파일을 생성할 수 있다.</p>\n<p>이후 <code class=\"language-text\">readline</code> API를 사용하여 런타임 중에 시스템 입력을 통해 포스팅의 제목을 입력받고, 포스팅 생성 시간을 이 마크다운 파일에 기록해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> new-post\n\n<span class=\"token function\">yarn</span> run v1.22.0\n$ node ./scripts/newPost.js\n포스팅의 제목을 입력해주세요. 이 제목이 포스팅의 URL이 되기 때문에 공백없는 영어로 작성해야합니다.\n <span class=\"token operator\">=</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론 카테고리나 태그도 포스팅 생성 시에 입력받게 만들 수도 있지만, 필자는 포스팅을 작성하는 중에 카테고리나 태그를 바꾸는 일이 워낙 빈번한지라 딱히 효용성이 없다고 느껴져서 딱히 관련 기능을 추가하지는 않았다. <small><strike>(사실 귀찮은 게 더 크다…)</strike></small></p>\n<p>필자 뿐만 아니라 다른 분들도 직접 스크립트를 작성해서 이런 작업을 수행하고 있지만, 필자의 심플한 스크립트와 다르게 다른 분들이 만든 스크립트는 번쩍번쩍 화려하고 기능도 좋은 것들이 많으니 한번 찾아보도록 하자.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>처음 블로그 마이그레이션 작업을 시작할 때는 한 달 정도 걸릴 것이라고 생각했는데, 황금 연휴의 힘인지 의외로 작업이 빨리 끝났다.</p>\n<p>물론 이전에 비해서 디자인도 약간 투박한 느낌이고 버그도 존재하는 구멍이 숭숭 뚫려있는 어플리케이션으로 퇴보하기는 했지만, 그래도 처음 목표였던 “맘대로 기능을 붙힐 수 있는 어플리케이션”으로 진화했기에 일단은 만족스럽다.</p>\n<p>그리고 이번 마이그레이션을 진행하면서 원래 붙어있던 구글 애드센스도 그냥 없애버렸다. 광고로 들어오는 수입이 워낙 작고 귀여운 수준이기도 하지만, 그것보다는 광고로 인해 필자의 블로그를 찾아주시는 독자 분들에게 피로감을 줄 수도 있다는 판단이 들었기 때문이다. <small><strike>(돈은 주식과 부동산으로…읍읍)</strike></small></p>\n<p>어쨌든 시작은 <code class=\"language-text\">i18n</code> 기능을 블로그에 붙히는 것이었는데 갑자기 마이그레이션을 하게 되버려서 뭔가 야크 쉐이빙 냄새가 조금 나기는 하지만 결과적으로 Hexo를 버림으로써 이런저런 기능적인 제약에서 벗어나게 되었으니, 앞으로는 포스팅 집필을 하면서도 심심할 때마다 조금씩 블로그에 재미있는 기능도 붙혀볼 예정이다.</p>\n<p>이상으로 Hexo에서 Gatsby로 블로그 마이그레이션 야크쉐이빙 후기 포스팅을 마친다.</p>","tableOfContents":"<ul>\n<li><a href=\"#%EC%95%BC%ED%81%AC-%EC%89%90%EC%9D%B4%EB%B9%99%EC%9D%98-%EC%8B%9C%EC%9E%91\">야크 쉐이빙의 시작</a></li>\n<li>\n<p><a href=\"#gatsby%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%84%A4%EB%AA%85\">Gatsby에 대한 간단한 설명</a></p>\n<ul>\n<li><a href=\"#graphql\">GraphQL</a></li>\n<li><a href=\"#graphql%EC%9D%84-%EC%A7%81%EC%A0%91-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\">GraphQL을 직접 사용해보자</a></li>\n<li><a href=\"#%EB%8F%99%EC%A0%81-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A7%8C%EB%93%A4%EA%B8%B0\">동적 파라미터를 받는 페이지 만들기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%98%EC%99%B8%EB%A1%9C-%EA%B7%80%EC%B0%AE%EC%95%98%EB%8D%98-%EB%B6%80%EB%B6%84\">의외로 귀찮았던 부분</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%A7%81%ED%81%AC%EC%99%80%EC%9D%98-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%8B%A0%EA%B2%BD%EC%8D%A8%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4\">기존 링크와의 연결을 신경써줘야한다</a></li>\n<li><a href=\"#%EB%82%B4%EA%B0%80-%EC%A7%81%EC%A0%91-%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4\">내가 직접 다 만들어야한다</a></li>\n<li><a href=\"#cli%EC%97%90-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%83%9D%EC%84%B1-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%97%86%EB%8B%A4\">CLI에 포스팅 생성 기능이 없다</a></li>\n</ul>\n</li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","fields":{"lang":"ko"},"frontmatter":{"title":"Hexo에서 Gatsby로 블로그 마이그레이션 야크쉐이빙 후기","date":"2020-05-09","categories":["Programming","Tools"],"tags":["Gatsby","Hexo","마이그레이션","개발자","회고록"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABJklEQVQoz2P4TwFgQOP/+ff/3z8s6v79+/f37z80KYTmf2AEZ8M1EbYZouT777+Lzr85/fQrin4weHj99cVDDz69/YZsIANc3btvv6NX35VoO6c58dKSi2+BIr+///h+/wGQcenwwwlZW7uSN07O3/7m+WeIL6Ca/4J1n3v61Wza1WknXyatuZ28/cXfo4euGBpdFBf/dPT4+rmXu5I2pBrNaI1Ze2zLTZCWPzDNEGc8+vDTfs51k2lXtCdeajv66v+712/Xb3gxYcK/D+/2rLy2fsrJCdlbpxXvfHDtFUjL339Ifgbrv/vuR8bGB3POvIb7CsL49O77nmWX1k48cW7vfXxRhRw5///+BSFYVP35/RdfPIPU/4O4CM0gqBPQIpqBkhQGAE5XZfX8HFa8AAAAAElFTkSuQmCC","aspectRatio":1.7699115044247788,"src":"/static/8e1cc1a52ffd263af7247d9f38008f4c/ee604/thumbnail.png","srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/69585/thumbnail.png 200w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/497c6/thumbnail.png 400w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/ee604/thumbnail.png 800w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/f3583/thumbnail.png 1200w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/5707d/thumbnail.png 1600w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/eeb1b/thumbnail.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"path":"/2020/05/09/gatsby-migration-retrospective/en/","lang":"en"}}}]}},"pageContext":{"slug":"/20200509-gatsby-migration-retrospective/","previous":{"fields":{"slug":"/20200419-what-is-gtm-google-tag-manager/","path":"/2020/04/19/what-is-gtm-google-tag-manager/","lang":"ko","postGroup":"20200419-what-is-gtm-google-tag-manager"},"frontmatter":{"title":"GTM, Google Tag Manager 뜯어보기"}},"next":{"fields":{"slug":"/20200521-about-cors/","path":"/2020/05/21/about-cors/","lang":"ko","postGroup":"20200521-about-cors"},"frontmatter":{"title":"CORS는 왜 이렇게 우리를 힘들게 하는걸까?"}},"lang":"ko","postGroup":"20200509-gatsby-migration-retrospective"}}}