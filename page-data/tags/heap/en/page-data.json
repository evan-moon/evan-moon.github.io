{"componentChunkName":"component---src-templates-tag-page-template-index-tsx","path":"/tags/heap/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"c6bec1b2-f1bb-5b96-844f-156ec242c204","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-a-heap\">What Is a Heap?</a></p>\n</li>\n<li>\n<p><a href=\"#complete-binary-tree\">Complete Binary Tree</a></p>\n<ul>\n<li><a href=\"#why-arrays-are-more-efficient\">Why Arrays Are More Efficient</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#difference-between-complete-binary-trees-and-heaps\">Difference Between Complete Binary Trees and Heaps</a></p>\n</li>\n<li>\n<p><a href=\"#lets-implement-a-heap\">Let’s Implement a Heap</a></p>\n<ul>\n<li><a href=\"#inserting-new-values-bubble-up\">Inserting New Values: Bubble Up!</a></li>\n<li><a href=\"#extracting-values-from-the-root-trickle-down\">Extracting Values from the Root: Trickle Down!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to explain and implement the heap — one of the most representative data structures. As I’ve mentioned in previous posts, I’m currently unemployed. Now that my month of healing in Prague is over, it’s time to start going to interviews. As everyone knows, there’s a very high chance of getting questions about basic algorithms or data structures in interviews. But since I’ve been neglecting my fundamentals study for about a year, I need to study again.","html":"<p>In this post, I want to explain and implement the heap — one of the most representative data structures.</p>\n<p>As I’ve mentioned in previous posts, I’m currently unemployed. Now that my month of healing in Prague is over, it’s time to start going to interviews. As everyone knows, there’s a very high chance of getting questions about basic algorithms or data structures in interviews. But since I’ve been neglecting my fundamentals study for about a year, I need to study again.</p>\n<!-- more -->\n<p>So I’m planning to review data structures first, starting with the heap — the one I remember least well.</p>\n<h2 id=\"what-is-a-heap\" style=\"position:relative;\">What Is a Heap?<a href=\"#what-is-a-heap\" aria-label=\"what is a heap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A heap is fundamentally a data structure based on a complete binary tree, where a size relationship exists between parent and child nodes. Because of this, the root node of a heap is either the largest or smallest value among all data in the heap.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/26d27d27a40c51726b85a6765778022c/29114/heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVR42o1Sy0oDMRTt5/gH7gU/wB9w4UrQn9CFvyCC24obV1KhC0GhilAUoVCkUGydSWbUeSeZRx43TmZaQaelvYuThNxz77knaelGAECJnudhZLn4Iwh8vSRayy60zG+e8HF7lBBmKq5LBqWUWU87eOdkFCZ5JUc1KyzuLIRwMA6jhGYSI5tSulK2KQwi5n4P2RPG0pl8KTF26GcPMus3rUEGWUKGroLbjczrV1IlaDOA5CS432RvR/M0+Ec2Z5bmrjXM3Y6D3qWE2vrKeZ/YXd/uhxFdJBsKRmMbYc55eYpj4jpTyLFWlARjx/2qPSs3sT/Ron48mJHTwb7/cihkbXZRIhmfJY9bbHAQPmyLglRZSoGOnvfY6+6fzvn0nKP2XL+ZU5FhgS6Ed1egy/mQBsV3l7vXqz7JGvEDXwN3AjESS6YAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"heap\" title=\"\" src=\"/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png\" srcset=\"/static/26d27d27a40c51726b85a6765778022c/69538/heap.png 160w,\n/static/26d27d27a40c51726b85a6765778022c/72799/heap.png 320w,\n/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png 640w,\n/static/26d27d27a40c51726b85a6765778022c/d9199/heap.png 960w,\n/static/26d27d27a40c51726b85a6765778022c/21b4d/heap.png 1280w,\n/static/26d27d27a40c51726b85a6765778022c/29114/heap.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    A Max Heap where the maximum value is at the root<br>\n    It looks exactly like a complete binary tree\n  </small>\n</center>\n<p>This means when you want to access the largest or smallest value in the heap, you can access it in one shot without any comparison operations, and the time complexity of this access operation is naturally <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>. Because of this characteristic, heaps are useful in areas where you need to quickly find the largest or smallest value among multiple pieces of data.</p>\n<p>Actually, if you simply want to access the maximum or minimum value in some data with <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity, you could just sort a linked list or array and use that. Once you sort it once, you can just pluck values from the head whenever you need them.</p>\n<p>However, when adding new data to this sorted data collection, you have to search through the entire collection to find the new maximum and minimum values and re-sort.</p>\n<p>While linear data structures like arrays and linked lists require <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity for this process, a binary tree sorted so that parents are larger or smaller than children only needs to compare with the newly added node’s parent nodes to maintain the sorted state, requiring only <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>In other words, the more data you want to sort, the more advantageous it becomes.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVR42pWSzUoDMRDH+zi+gldBfBVBH8KjB19AUG+Klx48eFNQ1F5aCrJYkVq02Oxmt7vb/c7HJBOztLUHbdWBBDLML/+Zf9IwywOZQqlXFDSWgagM+FfsZR9Z8R8YrZpWwiRPB1Frq0qosfqo/6oMAK5HszDQVUw8v0gSA7/AWC9IZXRPRu9lWdU5CcC56wc5udVJf1ryE2ynNIaRZny9xsL2bG7UKJViSXy3Xvb2UNoEfIfr+8qK048ep5ceeVMKp8bZbex52eAicjuTSWZH+tKewyjKIh0RV0ppT2maU2+I3DW6yONX6o+NNlqAH4xpSIosMBoXcOVsR91dUFOzhd3zwWHW2iidncnDJoi8zkuBXDQfT5rOsa6Y1Z/BfHgkyem8/9pYnfcEOYPwRpDzhUna9En3edS2Rq74JMvDNjx/tk8Qa3f4BKGthQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compares\" title=\"\" src=\"/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png\" srcset=\"/static/47f8478a4454f5e1e36018547cc390aa/69538/compares.png 160w,\n/static/47f8478a4454f5e1e36018547cc390aa/72799/compares.png 320w,\n/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png 640w,\n/static/47f8478a4454f5e1e36018547cc390aa/d9199/compares.png 960w,\n/static/47f8478a4454f5e1e36018547cc390aa/21b4d/compares.png 1280w,\n/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>You only need to compare this part to re-sort, not the entire data</small>\n</center>\n<p>Since heaps are based on complete binary trees, the implementation method is also similar to complete binary trees. So before implementing a heap, I want to talk about the characteristics of complete binary trees first.</p>\n<h2 id=\"complete-binary-tree\" style=\"position:relative;\">Complete Binary Tree<a href=\"#complete-binary-tree\" aria-label=\"complete binary tree permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, let’s look at the characteristics of complete binary trees, which form the basis of heaps. A binary tree is a tree where any single node can have at most 2 child nodes.</p>\n<p>This means the maximum number of nodes that can be at each level is fixed, and you can assign unique indices to nodes.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR42n1Qu07DMBTNH8IHMDPxB+wwIXVi4BdAzLAjoS7AwkMoIokD5GHydFPXrxwSJ61aoFiyr2zfc8/DwT+rbbWtM3KB/O4AZdVASgmt1VpPu4FxtoyyZw+MogRZQtCUAXw/QJqmYIzZLYSAMWYD5mxTN+cchBALXC6leoIIWZZbpXX3V5Wl7dFcAEL9GNhZ7LXN3RPQp1MMho21Za2N9or4EdX9PlpVw2iNRY+5PoOc7P1WWDEO6l0hC286lfrPMGjsofTPEUfhMh2Ytwfo28v1gQacfSIMic1FdvZCEkA08aDStjAkkYcsLyyC0i/Q7g4zW9E5aIdQTeOinO5C8mJFIdg7qukOWv4x5PpyiPp1MvIvbKmfj8Dd4/FN4Rtc0Rneo/vvfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"not allow new node\" title=\"\" src=\"/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png\" srcset=\"/static/e856823cf8415cb0c25f814a983547b7/69538/not_allow_new_node.png 160w,\n/static/e856823cf8415cb0c25f814a983547b7/72799/not_allow_new_node.png 320w,\n/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png 640w,\n/static/e856823cf8415cb0c25f814a983547b7/d9199/not_allow_new_node.png 960w,\n/static/e856823cf8415cb0c25f814a983547b7/21b4d/not_allow_new_node.png 1280w,\n/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png 1807w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A parent node must have 2 or fewer child nodes.</small>\n</center>\n<p>A complete binary tree is a binary tree where nodes are created by filling from the left side of the tree sequentially. In a complete binary tree, you cannot create nodes at the next level until the current level is completely filled. In other words, all levels except the last must be completely filled with nodes.</p>\n<p>Trees are usually implemented using linear data structures like linked lists or arrays, and depending on the characteristics of linked lists and arrays, there are different pros and cons to consider. <small>(The differences between linked lists and arrays aren’t the topic of this post, so I won’t explain them separately.)</small></p>\n<p>Generally, trees are implemented using linked lists, but for complete binary trees, implementing with arrays is more efficient.</p>\n<h3 id=\"why-arrays-are-more-efficient\" style=\"position:relative;\">Why Arrays Are More Efficient<a href=\"#why-arrays-are-more-efficient\" aria-label=\"why arrays are more efficient permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Actually, the reason linked lists are generally used to implement trees is that implementing trees with arrays is too inconvenient due to the fixed memory allocation nature of arrays.</p>\n<p>However, with complete binary trees, these inconveniences disappear, so you can fully take advantage of arrays’ benefits.</p>\n<h4 id=\"easy-access-to-any-node\" style=\"position:relative;\">Easy access to any node<a href=\"#easy-access-to-any-node\" aria-label=\"easy access to any node permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This takes full advantage of arrays’ biggest benefit: if you know the index, you can access that element directly. Since binary trees have a fixed maximum number of nodes at each level, you can find a specific node’s index with a simple formula and access it with <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>First, if you want to access parent or child nodes based on a specific node, you can calculate indices as follows:</p>\n<blockquote>\n<p>When the root node has index 0 and the current node has index <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>:</p>\n<ul>\n<li>Parent node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">(i-1) / 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span></span></li>\n<li>Left child node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>Right child node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2i+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span></span></li>\n</ul>\n</blockquote>\n<p>There’s also the method above for finding parent and children indices based on a specific node’s index, but the real advantage of array-based complete binary trees is that you can directly access a node at any level and position through a simple formula.</p>\n<p>This is possible because you can easily calculate <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span>, the maximum number of nodes up to a specific level, using the properties of complete binary trees.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>c</mi><mo>=</mo><msup><mn>2</mn><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">c = 2^{level} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9824em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getAllNodeCountByLevel</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">**</span> level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">7</span> <span class=\"token comment\">// Maximum number of nodes in a complete binary tree with 3 levels</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Using this formula, you can easily find the index of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node at the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>th level.</p>\n<p>For example, if you want to find index <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node at level <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> of a complete binary tree, you get the total number of nodes <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span> up to level <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> (one level above where you want to access), then add which <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node you want to access within that level.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>i</mi><mo>=</mo><mi>c</mi><mo>+</mo><mi>m</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i = c + m - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getNodeIndex</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span>level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getNodeIndex</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">5</span> <span class=\"token comment\">// Index of the 3rd node at level 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>We subtract 1 at the end because we want the index, not the ordinal position. Don’t forget that array indices start from <code class=\"language-text\">0</code>.</p>\n<p>As such, complete binary trees implemented with arrays make it easy to access desired nodes through simple calculations, but with linked list implementations, you can’t access nodes directly and must traverse the tree.</p>\n<h4 id=\"no-need-to-shift-array-elements-back\" style=\"position:relative;\">No need to shift array elements back<a href=\"#no-need-to-shift-array-elements-back\" aria-label=\"no need to shift array elements back permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Since arrays allocate contiguous memory space, inserting an element in the middle requires shifting elements back one position to secure new memory space — a sad situation. But linked lists can easily insert new elements in the middle just by changing <code class=\"language-text\">prev</code> and <code class=\"language-text\">next</code> values.</p>\n<p>However, binary trees have the constraint that each node can have at most 2 children, so a tree of height <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span> has a fixed maximum of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>h</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{h} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9324em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> nodes. Once you allocate this much space in memory, you never need to shift array elements to insert new nodes in the middle.</p>\n<h4 id=\"the-tree-doesnt-become-skewed\" style=\"position:relative;\">The tree doesn’t become skewed<a href=\"#the-tree-doesnt-become-skewed\" aria-label=\"the tree doesnt become skewed permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Generally, when an array-implemented tree becomes skewed, serious memory waste occurs. This is easier to understand with a diagram.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvGiGav//EABcQAAMBAAAAAAAAAAAAAAAAAAEQESD/2gAIAQEAAQUCOIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAACAwADAAAAAAAAAAAAAAABEQAQUTFhof/aAAgBAQABPyEl3Gjr8pBk7AA4Ff/aAAwDAQACAAMAAAAQlw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAGxABAAIDAQEAAAAAAAAAAAAAAREhABAxUfD/2gAIAQEAAT8Qh0S8MFQ38H5GgiF9OPqQvdf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"balanced\" title=\"\" src=\"/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg\" srcset=\"/static/594a877d7281f11d27e067794310ed3f/0913d/balanced.jpg 160w,\n/static/594a877d7281f11d27e067794310ed3f/cb69c/balanced.jpg 320w,\n/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg 640w,\n/static/594a877d7281f11d27e067794310ed3f/6a068/balanced.jpg 960w,\n/static/594a877d7281f11d27e067794310ed3f/eea4a/balanced.jpg 1280w,\n/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>The diagram above shows an ideally balanced binary tree. If we implement this tree as an array, values would be stored in memory like this:</p>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>E</td>\n<td>F</td>\n</tr>\n</tbody>\n</table>\n<p>It’s packed into memory with no empty spaces in between. Since node indices are assigned sequentially from the left of the tree, if you create child nodes from the left, you can avoid creating empty spaces in memory.</p>\n<p>Of course, if you create the right child first while skipping the left, empty spaces will appear. But the bigger problem is when the tree becomes a skewed tree, heavily leaning to one side.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvyqDVf//EABUQAQEAAAAAAAAAAAAAAAAAABBC/9oACAEBAAEFAmj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPwGn/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITEQcYH/2gAIAQEAAT8hWi2UuXyF1ncNuuf/2gAMAwEAAgADAAAAEFQP/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQMBAT8Qh//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EBj/xAAbEAADAAIDAAAAAAAAAAAAAAABESEAQRAxof/aAAgBAQABPxAbiY5EEFprIIirrKfoF7z/AP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unbalanced\" title=\"\" src=\"/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg\" srcset=\"/static/9b55af495204108a9d6c5989a4f0ee15/0913d/unbalanced.jpg 160w,\n/static/9b55af495204108a9d6c5989a4f0ee15/cb69c/unbalanced.jpg 320w,\n/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg 640w,\n/static/9b55af495204108a9d6c5989a4f0ee15/6a068/unbalanced.jpg 960w,\n/static/9b55af495204108a9d6c5989a4f0ee15/eea4a/unbalanced.jpg 1280w,\n/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>H</td>\n</tr>\n</tbody>\n</table>\n<p>As shown above, a heavily skewed tree creates empty spaces in memory because nodes are created at the next level while skipping intermediate indices. That’s why we say memory space is wasted. Of course, if it’s skewed to the right, the skipped indices are even larger, so the memory waste is even worse.</p>\n<p>However, complete binary trees have constraints: nodes must be filled from the left sequentially, and you can’t fill nodes at the next level until all nodes in the current level are filled. So there’s no possibility of the tree becoming skewed, meaning no empty spaces in memory.</p>\n<p>For these reasons, complete binary trees are often implemented taking advantage of arrays’ direct element access, and heaps, which are based on complete binary trees, are also mainly implemented with arrays for the same reasons.</p>\n<h2 id=\"difference-between-complete-binary-trees-and-heaps\" style=\"position:relative;\">Difference Between Complete Binary Trees and Heaps<a href=\"#difference-between-complete-binary-trees-and-heaps\" aria-label=\"difference between complete binary trees and heaps permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since heaps are based on complete binary trees, the basic node insertion and deletion algorithms are the same as regular complete binary trees. Node insertion is only possible at the end of the array, and after deleting a node, remaining nodes must be pulled forward to fill the empty space.</p>\n<p>However, heaps have the condition that a size relationship must exist between parent and child nodes, so “functionality to re-sort nodes after insertion and deletion” is additionally required.</p>\n<p>Also, since heaps are data structures designed to easily find maximum or minimum values within the tree, there’s rarely a need to directly access nodes in the middle of the tree. You just pluck and use the root node at <code class=\"language-text\">Array[0]</code>. Extracting the root node means deleting it, so the heap must be re-sorted accordingly.</p>\n<p>Heaps are divided into max heaps and min heaps. In a max heap, the parent’s value must always be larger than the children’s. In a min heap, conversely, the parent’s value must be smaller than the children’s. That is, “the root of a max heap is the largest value in the heap” and “the root of a min heap is the smallest value in the heap.”</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAC4jAAAuIwF4pT92AAABYUlEQVR42nVS2ZKDIBDM/3/hvmw2ajwCiNyHEdxWEjebqowU1bTdM8PoabRSelPWTTCmODeCSk7EuIORSADJ1FTWIYbxJL1e98g5D33fXq91VRFCLj+Xru0A2uZKKQVu6gZgU+JZV+E1zOY4lxTLsuQ9UkovIJXjIYbxaS4snDmtHyLlD+a0syq6M23Ts4u3qNhAFT/E/yqHZdazd3NAirf6OJrZ2zno6Nw9lty72W0DA/tN23tagDtBa357NdfjMAgGAMHXUCHRw6y8icuMaiiLHRfjQaOICHYbVc4yWFSbgoZz46NV0aJN5e1JBVOzXgenve0nCl1DB1z7TFpIbfQV67d29lcDvrQzKtiaDdj/7ky9ZF4RJ1hQmOc+2VyKo53O8tHrmxMy2vwysMdPAlZGBwXafpszsiAvGh6Dxg4mLndmxIlbhe6xbHAmOPQJgCMSF74A8Cb4otHeVVPfCvILGpu2RzRW2cIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"min max heap\" title=\"\" src=\"/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png\" srcset=\"/static/7ef8339acc6f0333106978ece7c8b376/69538/min-max-heap.png 160w,\n/static/7ef8339acc6f0333106978ece7c8b376/72799/min-max-heap.png 320w,\n/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png 640w,\n/static/7ef8339acc6f0333106978ece7c8b376/d9199/min-max-heap.png 960w,\n/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png 1000w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>So implementing a heap means implementing a complete binary tree and adding sorting functionality appropriate for max heaps and min heaps.</p>\n<h2 id=\"lets-implement-a-heap\" style=\"position:relative;\">Let’s Implement a Heap<a href=\"#lets-implement-a-heap\" aria-label=\"lets implement a heap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since the only difference between max heaps and min heaps is the sorting condition, I’ll only implement a max heap. As I mentioned above, for complete binary trees it’s more efficient to use arrays than linked lists, so I’ll implement using an array.</p>\n<p>First, let’s create a small and cute <code class=\"language-text\">MaxHeap</code> class.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxHeap</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If I wanted to implement with a linked list, I’d declare a separate <code class=\"language-text\">Node</code> class, but since I’m using an array, it’s extremely simple. Now let’s create a method for inserting values into the heap.</p>\n<h3 id=\"inserting-new-values-bubble-up\" style=\"position:relative;\">Inserting New Values: Bubble Up!<a href=\"#inserting-new-values-bubble-up\" aria-label=\"inserting new values bubble up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When inserting a new value into a heap, we always fill from the left of the tree according to complete binary tree rules. In other words, we just shove values one by one into the tail of the array using the <code class=\"language-text\">push</code> method. If this doesn’t make sense, go back and re-read the complete binary tree explanation above.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Max heaps have the constraint that parents must always have larger values than children, so if the node we inserted has a larger value than its parent node, we need to swap their positions.</p>\n<p>And we repeat this process until the inserted node reaches the root or has a smaller value than its parent — whichever condition is satisfied first.</p>\n<p>The way the newly added value swaps with parent nodes and gradually rises up the tree resembles bubbles rising, which is why it’s called “Bubble Up.”</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42qWSy0rDQBSG+zi+gluh7yLoI/gIgmulW8VFXYlLoUgUQbTUQhWk1NJMpiGZ1GRmkrnljJmmFUpFK57Fv/g537lxGvYf0fjehrISQzpieAig/gJXJJQV/fF6RLxmweJlOdios9YaBTjLZqCZjzBj9NfOrjDoVBEP+e+c57VrjAkCzEIPxOQrbQ0GU0mBLpLrrSJ+cAZoa+fLS5rcbPPnAyssyALWYOfwXEwnAzG9wmhkzDwHnMYkoaNLMr6fJZmVyiq9CoPkLPVRoJS7bZrSKR6DCGzJKBniMKoAkDqM4pDgPA1X4Ly/S572tanvKiulw+Psbof392a3Ta2om4xmVpt2t9XundSLL2Axbil0upzf7VnSgURnOu5IdL44kjGWF2/o8SXq/fgkm33YJyCFeIuZ4cs3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bubbleup\" title=\"\" src=\"/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png\" srcset=\"/static/ba74af93911b1287276f76834eaa6b01/69538/bubbleup.png 160w,\n/static/ba74af93911b1287276f76834eaa6b01/72799/bubbleup.png 320w,\n/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png 640w,\n/static/ba74af93911b1287276f76834eaa6b01/d9199/bubbleup.png 960w,\n/static/ba74af93911b1287276f76834eaa6b01/21b4d/bubbleup.png 1280w,\n/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>It swaps with the parent and gradually climbs up the tree</small>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bubbleUp</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> currentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentIndex <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parentNode <span class=\"token operator\">>=</span> currentNode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parentNode<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> currentNode<span class=\"token punctuation\">;</span>\n  index <span class=\"token operator\">=</span> parentIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">bubbleUp</code> method compares the value of the node at the given index with its parent node’s value, and if the node has a larger value than the parent, it swaps their positions. Due to tree characteristics, this operation can be solved with divide and conquer, so I implemented it with recursive calls.</p>\n<p>If we test at this point, we can see that the largest value in the heap is positioned at the head of the array — the root of the tree.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span> <span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n  <img src=\"/9e2a2f66409a09f23bc1717c7002b9fd/max-heap.gif\" width=\"100%\">\n  <br>\n  <small>When a value larger than the parent is added, it swaps positions with the parent</small>\n  <br>\n  <br>\n</center>\n<h3 id=\"extracting-values-from-the-root-trickle-down\" style=\"position:relative;\">Extracting Values from the Root: Trickle Down!<a href=\"#extracting-values-from-the-root-trickle-down\" aria-label=\"extracting values from the root trickle down permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now that we’ve implemented value insertion and bubble up, let’s create a method to extract values from the root. This is the delete operation. When we extract the root node, its position becomes empty, so we need to re-sort the heap and fill the root node again.</p>\n<p>Instead of promoting the existing root node’s children to the root, we take the node at the very end of the tree and insert it as the root node. This is to reduce the number of operations by preventing empty spaces in the modified heap.</p>\n<p>If we directly pulled up the children right below the root to use as the new root, the space where that node was would naturally become empty, and then we’d need comparison operations to determine which node to pull up from the next level.</p>\n<p>And since heaps must always maintain the form of a complete binary tree, if the tree becomes skewed during this process, we’d have the hassle of rebalancing the tree.</p>\n<p>So we use the last node as the new root node and swap positions while comparing with children. The way the new root node gradually moves down the tree resembles a water drop falling, which is why it’s called “Trickle Down.” <small>(For a computer term, it’s somehow poetic…)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">extract</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> max <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> max<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">trickleDown</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> leftChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> largest <span class=\"token operator\">=</span> index<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>leftChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>leftChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> leftChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rightChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>rightChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> rightChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>largest <span class=\"token operator\">!==</span> index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span>largest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trickle down can also be solved through divide and conquer via recursive calls, just like bubble up.</p>\n<p>The <code class=\"language-text\">trickleDown</code> method compares the parent node’s value with the left and right child nodes’ values, and if a child has a larger value than the parent, it swaps their positions.</p>\n<p>Simply put, the one with the largest value among the three nodes takes the parent position. If the parent loses this power struggle, think of it as being demoted to where its child used to be.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABmbOqp0WG417IykP/xAAeEAACAQQDAQAAAAAAAAAAAAAAAQIDERITISIxM//aAAgBAQABBQJLlpIujNFO7c49tbtFYmuTKf1Je//EABcRAQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BYuP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAgMBAAAAAAAAAAAAAAAAARAhAhExYf/aAAgBAQAGPwJI9LK6jtF5G09ocOf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBBcYGh/9oACAEBAAE/IbDdstdW1ElrTGsVgzENQ6ZmRS+osx0R0qutMVXVeWfMzs4v/9oADAMBAAIAAwAAABAA5/P/xAAZEQACAwEAAAAAAAAAAAAAAAAAEQEQMVH/2gAIAQMBAT8QiHouhsr/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQFB/9oACAECAQE/EF1Oo//EAB8QAQACAgICAwAAAAAAAAAAAAEAESExQVEQYXGBsf/aAAgBAQABPxA2yAWOtYgIOlXFG371BJrbqCQU6pp4SLULRVVtsI+Z+G7R1Eb7KnJ8kwQDRDS9zEj0IfOD8Sf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Arthas King\" title=\"\" src=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" srcset=\"/static/8cb9ae698e4cb007189258112e07a9b6/0913d/Arthas_King.jpg 160w,\n/static/8cb9ae698e4cb007189258112e07a9b6/cb69c/Arthas_King.jpg 320w,\n/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The succession process somehow reminds me of this guy</small>\n</center>\n<p>If the parent and child positions are swapped during this process, the swapped parent node’s index is passed as an argument to <code class=\"language-text\">trickleDown</code> again to repeat this process.</p>\n<p>Now let’s do a simple test like we did with bubble up. The values going into the heap are the same as we used for bubble up earlier.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MAX_VALUE = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HEAP = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">32</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">23</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <img src=\"/95d84ea96d74c0b03c6309156fa60dad/min-heap.gif\" width=\"100%\">\n  <br>\n  <small>Note that we take a node from the very end of the tree to use as the root node</small>\n  <br>\n  <br>\n</center>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A heap itself is simply a complete binary tree where data is loosely sorted, but because the root always contains the maximum or minimum value among all data in the heap, it can be used in various applications.</p>\n<p>One representative use is a sorting method for linear data structures called heap sort. Currently, V8’s <code class=\"language-text\">Array.prototype.sort</code> method uses quick sort, but in the early days, it briefly used heap sort — a sorting algorithm that uses heaps.</p>\n<p>Anyway, it feels good to revisit these basic data structures I had forgotten about.</p>\n<p>Since heaps are used in so many places, it doesn’t hurt to know them, and I remember being asked about them quite often in interviews too. Now that I’ve become an unemployed developer with no connection to any company’s business logic, I should take this opportunity to study the fundamental theory I’ve been neglecting in more detail.</p>\n<p>That wraps up this post on heaps — the data structure that helps you find minimum and maximum values fast.</p>","fields":{"slug":"20191012-introduction-data-structure-heap-en","path":"/2019/10/12/introduction-data-structure-heap/en/","lang":"en"},"frontmatter":{"title":"Heaps: Finding Min and Max Values Fast","subTitle":"The magic of O(log n) — fast min/max lookups using heaps","date":"Oct 12, 2019","categories":["Programming","Algorithm"],"tags":["Heap","Data Structure","JavaScript","Tree Traversal","Tree Sorting","Algorithm"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png 320w,\n/static/bbb54a15b5551610fa2986be824555fd/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/fc5c5/thumbnail.webp 320w,\n/static/bbb54a15b5551610fa2986be824555fd/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/01fb2/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}]}},"pageContext":{"tag":"Heap","lang":"en"}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}