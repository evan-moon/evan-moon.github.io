{"componentChunkName":"component---src-templates-post-tsx","path":"/2017/05/03/calculate-orbit-2/","result":{"data":{"markdownRemark":{"id":"bfcf2840-7232-5d16-87ea-bbb4b6dbbeb8","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 실제 궤도의 모양과 크기, 위치, 방향을 정의하고 JavaScript코드로 작성을 해보려고 한다. 실제 어플리케이션을 작성할 때는 TypeScript를 사용하였으나, 편의상 JavsScript ES6로 포스팅을 진행한다.","html":"<p>이번 포스팅에서는 <a href=\"/2017/05/03/calculate-orbit-1\">저번 포스팅</a>에 이어 실제 궤도의 모양과 크기, 위치, 방향을 정의하고 JavaScript코드로 작성을 해보려고 한다. 실제 어플리케이션을 작성할 때는 TypeScript를 사용하였으나, 편의상 JavsScript ES6로 포스팅을 진행한다.</p>\n<!-- more -->\n<p>궤도를 구하는 방법은 <a href=\"/2017/05/03/calculate-orbit-1\">저번 포스팅</a>의 용어 정리에서 언급했던 케플러 6요소를 이용하면 된다.</p>\n<h2 id=\"데이터-정의\" style=\"position:relative;\">데이터 정의<a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EC%9D%98\" aria-label=\"데이터 정의 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>지구의 궤도 데이터는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">AU</span> <span class=\"token operator\">=</span> <span class=\"token number\">149597870</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">EARTH_ORBIT</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  base<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    a<span class=\"token operator\">:</span> <span class=\"token number\">1.00000261</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">,</span>\n    e<span class=\"token operator\">:</span> <span class=\"token number\">0.01671123</span><span class=\"token punctuation\">,</span>\n    i<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.00001531</span><span class=\"token punctuation\">,</span>\n    o<span class=\"token operator\">:</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n    l<span class=\"token operator\">:</span> <span class=\"token number\">100.46457166</span><span class=\"token punctuation\">,</span>\n    lp<span class=\"token operator\">:</span> <span class=\"token number\">102.93768193</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  cy<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    a<span class=\"token operator\">:</span> <span class=\"token number\">0.00000562</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">,</span>\n    e<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.00004392</span><span class=\"token punctuation\">,</span>\n    i<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.01294668</span><span class=\"token punctuation\">,</span>\n    o<span class=\"token operator\">:</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n    l<span class=\"token operator\">:</span> <span class=\"token number\">35999.37244981</span><span class=\"token punctuation\">,</span>\n    lp<span class=\"token operator\">:</span> <span class=\"token number\">0.32327364</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">base</code>프로퍼티에 들어있는 값은 궤도의 기본 요소들을 의미하며 이 값들은 천문학에서의 역기점인 <code class=\"language-text\">J2000</code>때 측정된 값을 의미한다.\n<code class=\"language-text\">J2000</code>은 2000년 1월 1일 정오를 의미한다.\n그리고 <code class=\"language-text\">cy</code>프로퍼티에 있는 값들은 1세기당 궤도 요소들의 변화량을 의미한다.</p>\n<p><code class=\"language-text\">a</code>는 장반경, <code class=\"language-text\">e</code>는 이심률, <code class=\"language-text\">i</code>는 기울기, <code class=\"language-text\">o</code>는 승교점 적경, <code class=\"language-text\">l</code>은 평균 경도, <code class=\"language-text\">lp</code>는 근일점 경도를 의미한다.\n이 중 장반경의 경우 AU값으로 선언되어있기 때문에 <code class=\"language-text\">1AU</code>를 <code class=\"language-text\">km</code>로 환산한 값인 <code class=\"language-text\">149597870</code>를 곱해줘야 한다. 이때 <code class=\"language-text\">1AU</code>는 태양과 지구 사이의 거리를 의미한다.</p>\n<p>하지만 이 데이터에는 케플러 6요소 중 <code class=\"language-text\">근일점 편각</code>과 <code class=\"language-text\">근일점 통과시각</code>이 없다.\n그렇기 때문에 필자는 근일점 경도와 승교점 적경을 사용하여 근일점 편각을 구하려고 한다.\n그리고 근일점 통과 시각의 경우 <code class=\"language-text\">평균근점이각</code>을 구할 때 필요한데, 근일점 통과 시각을 사용하여 구하는 것보다 근일점 경도와 평균 경도를 사용하는 방법이 훨씬 공식이 간단하기 때문에\n오히려 편해진 상황이다.</p>\n<h2 id=\"시간-설정과-궤도-요소-계산\" style=\"position:relative;\">시간 설정과 궤도 요소 계산<a href=\"#%EC%8B%9C%EA%B0%84-%EC%84%A4%EC%A0%95%EA%B3%BC-%EA%B6%A4%EB%8F%84-%EC%9A%94%EC%86%8C-%EA%B3%84%EC%82%B0\" aria-label=\"시간 설정과 궤도 요소 계산 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>위에서 잠깐 말했듯이 천문학에서는 우리가 평소 사용하는 그레고리력이 아닌 율리우스력을 사용한다.</p>\n<p>율리우스력이란 원래 <code class=\"language-text\">BC 4713년 1월 1일 월요일 정오</code>를 기점으로 계산한 날짜 수 이다. 하지만 기원전 4713년부터 서기 2017년까지의 날짜를 세면 자릿수가 너무 커지기 때문에\n1976년 IAU(국제천문연맹)에서 결정한 <code class=\"language-text\">J2000</code>을 사용하는 것이다.</p>\n<p>이제 날짜 요소들을 선언해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DAY</span> <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">YEAR</span> <span class=\"token operator\">=</span> <span class=\"token number\">365.25</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CENTURY</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> <span class=\"token constant\">YEAR</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">J2000</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2000-01-01T12:00:00-00:00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> epochTime <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">-</span> <span class=\"token constant\">J2000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Date객체끼리 연산하면 값이 ms로 나오기 때문에 1000으로 나눠서 초 단위로 나오게끔 환산해준다</span>\n<span class=\"token keyword\">let</span> tDays <span class=\"token operator\">=</span> epochTime <span class=\"token operator\">/</span> <span class=\"token constant\">DAY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 일수로 환산</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=</span> tDAys <span class=\"token operator\">/</span> <span class=\"token constant\">CENTURY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 몇 세기나 지났는지 환산</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 글을 작성하고 있는 지금은 2017년 5월 3일 22시 27분이다. 계산 결과 <code class=\"language-text\">J2000</code>으로부터 약 <code class=\"language-text\">6332.06028991</code>일이 지났으며 <code class=\"language-text\">0.17336236</code>세기가 지났다는 것을 알 수 있었다.\n그럼 이제 아까 선언한 데이터 중 지구의 한 세기당 변화량에 방금 구한 <code class=\"language-text\">0.17336236</code>을 곱한 후 궤도의 기본 요소 값에 더해주면 <code class=\"language-text\">J2000</code>이후 오늘 이 시점의 궤도 요소 값이 나올 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> keys <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> computed <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> time<span class=\"token operator\">:</span> epochTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ncomputed <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">carry<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> variation <span class=\"token operator\">=</span> <span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>cy <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  carry<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant\">EARTH</span><span class=\"token punctuation\">.</span>base<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>variation <span class=\"token operator\">*</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> carry<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\n  a: 149598406.2031184\n  e: 0.016703615925039474\n  i: -0.0022597770311920135\n  l: 6341.400827688619\n  lp: 102.9937254119609\n  o: 0.0\n*/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 현재 시점 기준의 궤도 요소 값을 구했으면 부궤도 요소를 구할 차례이다.\n가장 먼저 케플러 6요소 중 하나지만 우리의 데이터에는 없는 <code class=\"language-text\">근일점 편각</code>을 구해보도록 하자. 근일점 편각 <code class=\"language-text\">w</code>는 근일점 경도에서 승교점 적경을 뺀 값이다.\n하지만 지구의 승교점 적경 <code class=\"language-text\">o</code>는 <code class=\"language-text\">0.0</code>이므로 근일점 경도와 근일점 편각이 일치하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">computed<span class=\"token punctuation\">.</span>w <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>lp <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>o<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// w = 102.9937254119609 - 0.0 = 102.9937254119609</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>다음은 <code class=\"language-text\">평균근점이각(mean anomaly)</code>를 구해야한다. 평균근점이각은 어떤 물체가 공전 속도와 공전 주기를 유지한 채 정확한 원 궤도로 옮겨간다고 가정했을 때 물체와 궤도 근점간의 각거리를 의미한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 260px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 99.375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADUUlEQVQ4y21UaVPiQBTM//8j+2W1di1RlBtBkEUQ5UY5CwNyBBIg5JjpfTMJ2eiaqmEmE6anX79+T0Ho4ZwHc7C2HfD5Grw1Ai91wNQF7dngpgnuOv+dVUI7AZD8KGY6wEcqeKIGZBpAug7+oUEclWNB67cpeAhU+Y6dnM0juEOAjgv+pwt+1wKyBLrY/Aup1geP1cDbkwA0xDAEZlmfw5mtwAU7AjTH71jpGrS3AZwUMb+ny+K1gKnCv4QqQ2kOSbOxp5UPale6WF/eY1R+xNnFDzRu4mDpFxxSVaDy5mlLJBSEKYrfPYmda3p6FSjM6RIuc9EuFWnvBd1CAflYVLIdJHJIXJ5jvZjLs+xgQrFsjv2BYUdDBilETzwDuRa4SESqgVm+jIurnxhEU+gmMxgSUDOdRb6QRqfbwGq18B1hQ5mPNAzaK/TrHzBWO2BCWS12KBE9MEoGym/oZ/JIZqIoJm9Ri0TQrpTxOuxIZkfDwGY+h7XSAE2HctjpBE3cjnsSyvKyyxgNLmfxmLYJrA0sS08oX16glUxikM7j4TaKq+tzZCK/KWkv4JVXKLpuwBGHLUrAkcBcV9olUPVowW70YSefULy5Ri+ZRSeTRTURh5l/xjpRwuQ2Rz5tUjJHUPb7PSyKHYH7BSCtObEczcDzTamjmioiEvuF6k1MVkw6e4to5AyLR7KOkEhYh+yl2ARkkA4yS7ruMVtvwR/anvfI0CKjWG6gLlQ0Eym45L/lcwP54h2MA+lO0bHeRJaptI2+3YLJ6jD9sJlkIcuNBq8PAj+ahTrMWEVeGBhOVJRfCBLQJKDdbuexJHBpcNEUylQF2brnTV9Vq9TCPl6VF7ntsVfvdB5+/SunctsSkCOSQe9ss/UqhpgyYSNZ0943p9CEflmUPmWCOZVpuB8EgIwsstlswE7vaw3sXfWAhY0EIA1nMoPxOgYC1p/bnRLuMC5leKNpcGiW771XOM91uMMx3C6tuz25bxxNshqT5wQR5q9xag5hUPFRhL8/HLw9wUxcIDT1wxN6n/7/tUEr3/XCU6J0stGOfGpS5oUUrs9ERDGff2BGJfdOsozHYwg/f+qH37V/2bbIp+bBAxd+FfOEAGazOVRVxXQ6xXA4DLz8FwE77dDHlcsFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mean anomaly\" title=\"mean anomaly\" src=\"/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png\" srcset=\"/static/51cda683e15b56138af5597de73d956e/69538/mean-anomaly.png 160w,\n/static/51cda683e15b56138af5597de73d956e/86c28/mean-anomaly.png 260w\" sizes=\"(max-width: 260px) 100vw, 260px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<p>위 그림에서 실제 물체의 궤도는 회색 궤도이나, 저 궤도를 원이라고 가정한 빨간 궤도에서의 각거리를 구하는 것이다.</p>\n<p>저 두 궤도의 공전 주기는 같기 때문에 같은 지역을 같은 시간 동안 지나간다. 근데 그림을 보면 원 궤도는 각 호들의 넓이가 일정하지만 타원 궤도인 회색 궤도는 일정하지 않다.\n타원 궤도를 도는 물체는 초점과의 거리에 따라 <code class=\"language-text\">각속도</code>가 변하기 때문이다. 그래서 좀 더 구하기 쉬운 <code class=\"language-text\">평균근점이각</code>을 먼저 구한 후 타원 궤도에 이를 적용하게 된다.</p>\n<p><small>참조링크: <a href=\"https://ko.wikipedia.org/wiki/%ED%8F%89%EA%B7%A0_%EA%B7%BC%EC%A0%90_%EC%9D%B4%EA%B0%81\" target=\"_blank\" rel=\"nofollow\">평균근점이각 위키</a></small><br>\n<small>참조링크: <a href=\"https://ko.wikipedia.org/wiki/%EC%BC%80%ED%94%8C%EB%9F%AC%EC%9D%98_%ED%96%89%EC%84%B1%EC%9A%B4%EB%8F%99%EB%B2%95%EC%B9%99\" target=\"_blank\" rel=\"nofollow\">케플러 행성운동법칙 위키 - 제 2법칙: 면적속도 일정의 법칙</a></small></p>\n<p><code class=\"language-text\">평균근점이각</code>을 구하는 공식은 여러 개가 있으나 필자는 <code class=\"language-text\">근일점 경도</code>와 <code class=\"language-text\">평균 경도</code>값을 가지고 있기 때문에 여러 개의 공식 중 가장 쉬워보이는 녀석을 골라서 사용할 수 있다.</p>\n<p>이때 평균근점이각 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span></span></span></span>은 평균 경도 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span>과 근일점 경도 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span></span></span></span>의 차로 나타내어 질 수 있다.</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo>=</mo><mi>l</mi><mo>−</mo><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">M = l-\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span> <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>l <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>lp\n<span class=\"token comment\">/* M = 6341.42938740066 - 102.99372566842652 =  6238.435661732234 */</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이제 지금까지 구한 궤도들의 단위를 바꿔줘야 한다. 우리가 가지고 있는 지구 궤도 데이터의 수치들은 모두 <code class=\"language-text\">digree</code>단위인데, 이후 계산의 편의를 위해 모두 <code class=\"language-text\">radian</code>으로 바꾸어 주겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DEG_TO_RAD</span> <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 149598406204.91275</span>\ncomputed<span class=\"token punctuation\">.</span>i <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -0.000039441031811489665</span>\ncomputed<span class=\"token punctuation\">.</span>o <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.0</span>\ncomputed<span class=\"token punctuation\">.</span>w <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1.7975796293754245</span>\ncomputed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span> <span class=\"token operator\">*=</span> <span class=\"token constant\">DEG_TO_RAD</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 108.8812424710587</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 <code class=\"language-text\">평균근점이각</code>을 구했으니 <code class=\"language-text\">편심이각(Eccentric anomaly)</code>를 구해야 한다. 편심이각은 그림으로 보는 게 더 직관적으로 이해하기가 쉽다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 598px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADt0lEQVQ4y2Nwzb3G4JZ3jQEZuOVdZ3fLvc7hmgfEudfZkeUMfaczSGr4gdn6XhMx9CIMyb3GCTRADGiAJBCLAQ0UA/MhYhJAS8Rdc69ywdTbJuxlSF/0H8wGqkE1zDXvmjDQQHGQiwJS9zCjWxaUsp0ZaBi7e/4tMcf0k1LcgkrCIHE9z36QXqivoC7VbfnPEBs5l4mBSOAUu1nMyGdKiFv+bSEkB8F8ialhmj47b78Fh8wMHVaxmVqsokC29BQDDn6I7H8Gs5o/8nYz/ssEl9wXcM25LAUSDUjZAzYM4vX/JgyrBBn5puqzqba6c1vVBfKaAWmFWRqsIrPVWUXaXTjlaoKFzLqdGczyfDNs6p1TtTPMHJ2AOnl82v/zumeelgAZ6p57BeGqmhBe+dxsIaXQXgkOXF4NrCgRDitN8Z9sx6DdaqhTX6rMowYSN636I+ydeYIf4uWrEMXRreISCbWiiiA20HUMk43YGabqszOUu8YwgsQ8s88KuObeMoqr1FUJn8ogaFt/y6rKs15qoRKDylQdEX7zyl8SVU4hYLUMidWiYDq5UkQyqUpUBsIWZYTE3EUw7Zp7U9Y975RcZg2D5H9gOIbkt9g7VB6WB8ktUmRQKvDOU9Jp/s8DNiipSoQhuUqEEWqoPNBQIxDbr3AOWN4x7TCra+4NFbDaSnFFm4z/DN4F21TDi9MNDIv/c4LE+wwUdCJjlynAw8enYCWDV8FWiAWVEuqJlfJ8MDmvksfq7oWPucG+qZRRjCl3YnbOeSsXW2Eh7Ze/WBUS9wzMZa7x1gzH/zMBvXUZIwJSKhnALvJv/89hFb3B2jbxsACIn1bFAA4Sx5zvUjUtDJxBxd3KHrnPNFTjD0nUO/gZl7jGcUMSZu41XmD2EnHLOy/ikPleMLhijWRApoe1VcwmGzn9WAOH1OMWHgXnxcOLw4zcsveJueTcM/bL75cOKW3S0fecbqTuM9MkI3yC+1IxBriB/K6grJd7XdQ154y4d/V/QWlNR1s911L10t3/uX0r30j4Vr4Si2zaJx7c+F3Yu+KrRGDFPsnk9kZVYTlnQ2n7BqXywEqdaWrMgiDDcCU9UNoShtJ8UCwEFeNS1WKQU9EEBwE4t/RZGKpX23nxwlzIACnGrjNYRK4Bx7iInA4zG6cADyunEBc7txg3B68kBzMLmxwrB6c4A4Mqq1OQsLyZsxCQrcQOjBTGUrdE+4CUXWwM5IL8DnF44TBbnUmowCtXmWzD5NXYGPStOeH8OhtXRhgbAE30HRNn1vU8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"eccentric anomaly\" title=\"eccentric anomaly\" src=\"/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png\" srcset=\"/static/33f77c9a2fce957c60f7cfb7522b088a/69538/eccentric-anomaly.png 160w,\n/static/33f77c9a2fce957c60f7cfb7522b088a/72799/eccentric-anomaly.png 320w,\n/static/33f77c9a2fce957c60f7cfb7522b088a/0c69d/eccentric-anomaly.png 598w\" sizes=\"(max-width: 598px) 100vw, 598px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<p>이 그림에서 물체의 위치를 <code class=\"language-text\">P</code>로 그에 따른 편심이각은 <code class=\"language-text\">E</code>로 나타내어지고 있다.\n타원의 중심은 <code class=\"language-text\">C</code>이고 타원의 초점은 <code class=\"language-text\">F</code>이다.\n이때 편심이각 <code class=\"language-text\">E</code>는 타원의 중심에 꼭지점 하나를 찍고 궤도 장반경과 같은 길이의 빗변 <code class=\"language-text\">a</code>를 그은 후, 장반경 <code class=\"language-text\">e</code>와 수직하면서도 <code class=\"language-text\">P</code>에 닿도록\n선분을 그어 만들어진 직각삼각형에서 관찰되는 각이다.</p>\n<p><code class=\"language-text\">평균근점이각</code>과 마찬가지로 <code class=\"language-text\">편심이각</code>도 여러 개의 정의로 나타내어질 수 있는데, 필자는 이미 <code class=\"language-text\">평균근점이각</code>을 구했기 때문에 <code class=\"language-text\">평균근점이각</code>으로부터 유도되는 공식을 사용한다.</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mrow><mi>M</mi><mo>+</mo><mi>e</mi><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>M</mi></mrow></mrow><mrow><mn>1</mn><mo>−</mo><mi>e</mi><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>M</mi></mrow></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">E = \\frac{M+e{sinM}}{1-e{cosM}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>여기서 <code class=\"language-text\">e</code>는 이심률, <code class=\"language-text\">M</code>은 평균근점이각을 의미한다. 그러나 한가지 슬픈 사실은 여기서 나오는 E값이 근사값이라는 것이다. 그렇기 때문에 보통 이 공식은 <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method\" target=\"_blank\" rel=\"nofollow\">Newton-Raphson method</a>를 사용하여 진행된다.</p>\n<p><code class=\"language-text\">Newton-Raphson method</code>메소드는 계속적인 급수 형태로 계산되어지며, 계산을 반복할 수록 더 정확한 근사치를 뱉어준다고 보면 된다.</p>\n<p>값의 오차는 이심률이 높을 수록 더 커지게 되는데, 데이터 상 지구의 이심률은 <code class=\"language-text\">0.0167703</code>정도니까 오차율이 그렇게 크진 않을 것이라고 예상된다.\n그럼 코드를 작성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getEccentricity</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> x0<span class=\"token punctuation\">,</span> maxCount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> x2 <span class=\"token operator\">=</span> x0<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> maxCount<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x <span class=\"token operator\">=</span> x2<span class=\"token punctuation\">;</span>\n    x2 <span class=\"token operator\">=</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">kepler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> <span class=\"token constant\">M</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">M</span> <span class=\"token operator\">+</span> e <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> e <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ncomputed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span> <span class=\"token operator\">=</span> <span class=\"token function\">getEccentricity</span><span class=\"token punctuation\">(</span><span class=\"token function\">kepler</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span><span class=\"token constant\">M</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* E =108.8962365500302 */</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"행성의-위치-도출하기\" style=\"position:relative;\">행성의 위치 도출하기<a href=\"#%ED%96%89%EC%84%B1%EC%9D%98-%EC%9C%84%EC%B9%98-%EB%8F%84%EC%B6%9C%ED%95%98%EA%B8%B0\" aria-label=\"행성의 위치 도출하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자, 지금까지는 이 파트를 위한 지루한 과정이었다. 필요한 값들을 모두 구했으니 이제 행성의 위치를 도출할 수 있게 되었다. 이 값들이 있다면 근일점 쪽을 X축으로 하는 황도좌표평면에 대한 직각 좌표 값을 계산할 수 있다.</p>\n<p>그리고 이 좌표값의 유클리드거리 <code class=\"language-text\">r</code>과 진근점이각 <code class=\"language-text\">v</code>를 구할 수 있다. <code class=\"language-text\">진근점이각</code>은 항성과 궤도의 근일점 기준으로 어느 각도에 행성이 위치하고 있는지를 나타내는 각이다.\n즉, 행성은 항성으로부터 <code class=\"language-text\">r</code>만큼의 거리만큼 떨어져 있고 궤도의 근일점으로부터 <code class=\"language-text\">v</code>만큼 돌아간 위치에 존재하고 있다는 것이다.\n거리랑 각을 알면 3D Scene내에서의 로컬좌표를 정의할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">RAD_TO_DEG</span> <span class=\"token operator\">=</span> <span class=\"token number\">180</span> <span class=\"token operator\">/</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>pos <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>x<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> computed<span class=\"token punctuation\">.</span>a <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>e <span class=\"token operator\">*</span> computed<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span><span class=\"token constant\">E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>v <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">atan2</span><span class=\"token punctuation\">(</span>computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncomputed<span class=\"token punctuation\">.</span>r <span class=\"token operator\">/=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token constant\">AU</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncomputed<span class=\"token punctuation\">.</span>v <span class=\"token operator\">*=</span> <span class=\"token constant\">RAD_TO_DEG</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n  r = 1.0081888306835929 AU\n  v = 120.17208256525967 도\n*/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 포스팅 작성 당시 지구는 태양으로부터 <code class=\"language-text\">1.0081...</code>AU 떨어진 위치에 지구 궤도의 근일점으로부터 약 <code class=\"language-text\">120</code>도 돌아간 곳에 위치하고 있다는 결과를 얻을 수 있다. 사실 제일 마지막 <code class=\"language-text\">pos</code>를 구하는 공식과 <code class=\"language-text\">진근점이각</code>을 구하는 공식은 아직 이해가 잘 안된다. 하지만 중요한 것은 이런 공식을 사용해서 내가 원하는 뭔가를 만들어 볼 수 있다는 것이 아닐까 생각한다.</p>\n<p>이 공식들을 사용하여 필자가 만든 시뮬레이터는 <a href=\"https://solar-system-ts.herokuapp.com/\" target=\"_blank\" rel=\"nofollow\">여기</a>에서 확인해볼 수 있고, 전체 소스는 <a href=\"https://github.com/evan-moon/solarsystemts\" target=\"_blank\" rel=\"nofollow\">Solarsystem 프로젝트 깃허브 레파지토리</a>에서 확인해볼 수 있다.</p>\n<p>이상으로 행성 위치 게산하기 포스팅을 마친다.</p>","tableOfContents":"<ul>\n<li><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EC%9D%98\">데이터 정의</a></li>\n<li><a href=\"#%EC%8B%9C%EA%B0%84-%EC%84%A4%EC%A0%95%EA%B3%BC-%EA%B6%A4%EB%8F%84-%EC%9A%94%EC%86%8C-%EA%B3%84%EC%82%B0\">시간 설정과 궤도 요소 계산</a></li>\n<li><a href=\"#%ED%96%89%EC%84%B1%EC%9D%98-%EC%9C%84%EC%B9%98-%EB%8F%84%EC%B6%9C%ED%95%98%EA%B8%B0\">행성의 위치 도출하기</a></li>\n</ul>","fields":{"lang":"ko"},"frontmatter":{"title":"[JavaScript로 천체 구현하기] 행성의 움직임을 구현해보자","date":"2017-05-03","categories":["Programming","Graphics"],"tags":["궤도 구현하기","케플러 궤도 방정식","케플러 6요소","JavaScript"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHk1O1Ir//EABYQAAMAAAAAAAAAAAAAAAAAAAARIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEAAwEAAAAAAAAAAAAAAAABABARQf/aAAgBAQABPyEjk7vKHGLX/9oADAMBAAIAAwAAABBrz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/EKf/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEQITFRYf/aAAgBAQABPxAWwrmiBCcneKpofE0xUx//2Q==","aspectRatio":1.3333333333333333,"src":"/static/746a090a9954b09cea8d75079269697d/14b42/thumbnail.jpg","srcSet":"/static/746a090a9954b09cea8d75079269697d/f836f/thumbnail.jpg 200w,\n/static/746a090a9954b09cea8d75079269697d/2244e/thumbnail.jpg 400w,\n/static/746a090a9954b09cea8d75079269697d/14b42/thumbnail.jpg 800w,\n/static/746a090a9954b09cea8d75079269697d/47498/thumbnail.jpg 1200w,\n/static/746a090a9954b09cea8d75079269697d/0e329/thumbnail.jpg 1600w,\n/static/746a090a9954b09cea8d75079269697d/50587/thumbnail.jpg 2400w","sizes":"(max-width: 800px) 100vw, 800px"}}}}},"allMarkdownRemark":{"edges":[]}},"pageContext":{"slug":"/20170503-calculate-orbit-2/","previous":{"fields":{"slug":"/20170503-calculate-orbit-1/","path":"/2017/05/03/calculate-orbit-1/","lang":"ko","postGroup":"20170503-calculate-orbit-1"},"frontmatter":{"title":"[JavaScript로 천체 구현하기] 케플러 6요소 알아보기"}},"next":{"fields":{"slug":"/20170506-gravity-via-js-1/","path":"/2017/05/06/gravity-via-js-1/","lang":"ko","postGroup":"20170506-gravity-via-js-1"},"frontmatter":{"title":"[JavaScript로 중력 구현하기] 1. 중력이란 무엇일까?"}},"lang":"ko","postGroup":"20170503-calculate-orbit-2"}}}