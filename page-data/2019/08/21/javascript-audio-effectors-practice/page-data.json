{"componentChunkName":"component---src-templates-post-page-template-index-tsx","path":"/2019/08/21/javascript-audio-effectors-practice/","result":{"data":{"markdownRemark":{"id":"56876858-4dc2-5375-a626-823564681f17","tableOfContents":"<ul>\n<li>\n<p><a href=\"#compressor\">Compressor</a></p>\n<ul>\n<li><a href=\"#compressror-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Compressror 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reverb\">Reverb</a></p>\n<ul>\n<li><a href=\"#convolution-reverb\">Convolution Reverb</a></li>\n<li><a href=\"#convolution-reverb-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Convolution Reverb 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#delay\">Delay</a></p>\n<ul>\n<li><a href=\"#delay-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Delay 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#filter\">Filter</a></p>\n<ul>\n<li><a href=\"#filter-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">Filter 구현해보기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#eq\">EQ</a></p>\n<ul>\n<li><a href=\"#%EA%B7%B8%EB%9E%98%ED%94%BD-eq-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\">그래픽 EQ 구현하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","excerpt":"이번 포스팅에서는 저번 포스팅에 이어 HTML5 Audio API를 사용하여 실제로 오디오 이펙터를 만드는 과정에 대해서 포스팅 하려고 한다. 저번 포스팅에서 이미 이야기 했듯이 Audio API는 여러 개의 노드를 연결하여 오디오의 흐름을 만들어 내는 것을 기본 개념으로 가지고 있고, 이펙터를 만들기 위해 필요한 몇 개의 추상화된 노드들을 기본적으로 제공해주기 때문에 그렇게 어려울 건 없다.","html":"<p>이번 포스팅에서는 <a href=\"/2019/08/19/javascript-audio-effectors-gain/\">저번 포스팅</a>에 이어 HTML5 Audio API를 사용하여 실제로 오디오 이펙터를 만드는 과정에 대해서 포스팅 하려고 한다.</p>\n<p>저번 포스팅에서 이미 이야기 했듯이 Audio API는 여러 개의 노드를 연결하여 오디오의 흐름을 만들어 내는 것을 기본 개념으로 가지고 있고, 이펙터를 만들기 위해 필요한 몇 개의 추상화된 노드들을 기본적으로 제공해주기 때문에 그렇게 어려울 건 없다.</p>\n<!-- more -->\n<p>우리는 단지 우리가 만드려고 하는 이펙터들이 각각 어떤 역할을 하며, 어떤 원리를 가지고 있고, 어떤 용도로 사용되는지만 알고 있으면 된다. 오디오에 사용하는 이펙터는 그 종류가 굉장히 많기 때문에 모든 이펙터를 만들어 볼 수는 없고, 필자가 생각했을 때 가장 대표적으로 많이 사용되는 기본적인 이펙터 5개 정도를 구현해볼 생각이다.</p>\n<p>기본적으로 오디오를 로드하여 소스 노드(Source Node)를 생성하는 과정은 이미 저번 포스팅에서 설명했기 때문에 따로 설명하지 않겠다. 이번 포스팅에서는 바로 이펙터를 구현하는 내용부터 설명한다. 모든 이펙터는 먼저 해당 이펙터가 하는 일과 원리에 대해서 간략하게 설명하고 이후 묻지도 따지지도 않고 바로 구현 들어가도록 하겠다.</p>\n<p>자, 그럼 하나하나 뜯어보도록 하자.</p>\n<h2 id=\"compressor\" style=\"position:relative;\">Compressor<a href=\"#compressor\" aria-label=\"compressor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9ElEQVR42iVSW0/TABjto4kPxhgjKHc3YGzCkLq262Bu3dbZbm032t3asg46WbuVbXTjMrmIQowiGkVkQwENIAkJCBp98tEfZtXk5OTLSb6ck5wD/Pz1O5mrZStr+sqrlY3t+u5Bfe/wPxr7R41/XN872tk/mlt9U1x8sf62UVl6ltFqrxuHwLvd4yvm4U5HeNAXc9NiIj3Jj6tiVhNlLZVRkxklNa4mpZwwoTrwlNXNEXF5CBttGfAKag34cHDaMejrx+JunJYfTiratCRPRrhkUswU9RmtXClVZrVy1RBBb9Tq5cmUCuGpNrsvV3kK7BycNXWDvSiNU6Mb62t7ezuf9j9+2Nk+PPz8/fv5t4uzi/PT4y8H689XQQ9l8/K0kEdI8aYFkctLQOPzSQsY7BthXVhQ17WVJ8sbr9bfb29t17febr4xjq2tTUOp6CW7i7zjTcmFqisktkKUrD8GGp+OW9HRPjfnQN1ZWcyr2SlNqepFfVqbntbm5/RqpThTLWcn0jbYb/Mm6MS4IxBvG2ZlfRmo7x/fginbfa4XxKyQAZ8N8Rlshfx3nIF+J27AjgYNWNCQ4WGCaQvKtLsiE0bsv89Q2OqOmuDwg4QayZS6oEgglotkyj0uluQLjFTq98SNqH3DozY3hxBjQ/54q5MZLy0C73ePmh2kZYTpAHElX1yo1dqHCKVQWlx4ZELoYrk6PzsP+mKJdK4XoSwoPVWaQYlEMxTOFBcAYwBNdqwXDXeBuP0+A2LR2xAx6IlCfs6oAMHjUCAG+lijbTNMmiDC4WWsKNlsx6TC3F/nARcx5GE67vohPO4kUp1g0GAPLXXDIZQU3LTUg4QsCGmGCDNEDod4myt03QxJ+Rng5eZHLEgNOAOXWgYxgiWj/OX2ex6CpTnxign2kjGKFW5YXBYYv2aGr3cjQnqiB8SAq2Y2rQInX3/4aSEiKlRykuFzUVGleSUq5rnMlLEHVipwkmYojKBQKSUi5iNCjh3LYxS/tPb6DwF8FVn0mZKkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compressor\" title=\"\" src=\"/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png\" srcset=\"/static/a32ed4690c9c17197a82088952b74f1e/69538/compressor.png 160w,\n/static/a32ed4690c9c17197a82088952b74f1e/72799/compressor.png 320w,\n/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png 640w,\n/static/a32ed4690c9c17197a82088952b74f1e/d9199/compressor.png 960w,\n/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png 1020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>컴프레서(Compressor)는 소리가 일정 크기 이상으로 커질 경우에 이를 꾹꾹 눌러서 다시 작은 소리로 만드는 일종의 압축기 역할을 하는 이펙터이다. 이렇게 소리의 크기를 조절하는 이펙터를 다이나믹 이펙터(Dynamic Effector)라고 한다.</p>\n<p>기본적으로 오디오 소스를 사용할 때 기본적으로 컴프레서를 걸어놓고 믹싱을 시작하는 경우가 많은데, 이는 오디오 신호가 일정 크기 이상으로 갑자기 커졌을 때 발생하는 클리핑(Clipping) 현상을 방어하기 위해서이기도 하다. 그럼 여기서 한가지 의문이 들 수 있는데,</p>\n<blockquote>\n<p>아니 단순히 클리핑을 막는 거면 그냥 Gain을 줄이면 해결되는 거 아니야?</p>\n</blockquote>\n<p>맞다. 사실 게인을 줄여도 어느 정도 클리핑을 방어할 수는 있다. 하지만 일반적으로 음악이란 셈여림이 존재하기 때문에 무작정 게인을 낮추면 작은 소리는 아예 입력되지도 않는 슬픈 상황이 발생하게 된다.</p>\n<p>예를 들어 여러분이 노래방에 갔을 때를 생각해보자. 일반적으로 발라드를 부른다면 노래의 도입부에서는 잔잔한 느낌으로 조용히 부르다가 후렴에서는 고음을 내기위해 성대를 통과하는 공기의 압력이 올라가며 음량이 커진다.</p>\n<p>이때 무작정 게인을 낮춰서 녹음하는 방향으로 접근한다면 필연적으로 가장 큰 소리인 후렴의 빵빵 지르는 소리의 크기에 게인을 맞출 수 밖에 없고, 그러면 도입부의 잔잔한 부분은 거의 입력되지 않을 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAByXSl0ows/8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABESESMTP/2gAIAQEAAQUCiiDFPTyi5lv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRIf/aAAgBAgEBPwFy0s//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQECQRD/2gAIAQEABj8CeEaxCKc//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIVExQZHB/9oACAEBAAE/IbOo1cewacGoFEZILtjU91/IlaqrP//aAAwDAQACAAMAAAAQyC//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QAyf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQIBAT8QszL/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMVFh/9oACAEBAAE/EB/qBR1cZ8PIvmjiSJ5ihS2q6vsxBwCr4zkTAq1d/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"buzz\" title=\"\" src=\"/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg\" srcset=\"/static/e94b2e7a65da940d05a7df7a850aac9d/0913d/buzz.jpg 160w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/cb69c/buzz.jpg 320w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg 640w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>창법에 따라 조금씩 다르지만 이 음량 차이는 생각보다 크다.</small>\n</center>\n<p>이때 컴프레서로 입력 게인을 적당한 수준으로 높혀주고 너무 큰 소리는 압축하여 노래 도입부의 작은 소리와 후렴부의 큰 소리의 격차를 좁혀 전체적인 소리의 크기를 맞추기 위해서 사용하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVR42l1Q25LDIAjN///ePna6bdIYN3c1mosILCbdfahzRoHDAaQAJEEi/gOdeLvIbL2vytd2HCgukg7pZuHbQUQqdmTBhhSAViAxVsB8p+yuxKqqx2fdKL0zr0Qm8RhpBAbiwjlrjTl2ofJZnB36Psbjcvc1TGUpxnC7wevFtSK5tWalGKCw1oUQtNZt207T5JyLMfZ9z0SiCd47Y3JRY9w0iYAi7NZBCBIsHo9Ho1T5LJumSUn+mzVz1x0nPTY6HnkKSGkYBjGkujGzZGbxNd7V53yzsTo3P/O0/f2eEC/KL75rW7s40QGy7K/wkFf1gQWwrtRUKqW7jdhHzHFZYcR+x68ZBPNBhTT6AJ7NF+9/2nY7F/mm6D3af+YvnCrO+RaF5TIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"audio compression\" title=\"\" src=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png\" srcset=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/69538/audio-compression.png 160w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/72799/audio-compression.png 320w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png 640w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/d9199/audio-compression.png 960w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/21b4d/audio-compression.png 1280w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png 1519w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Threshold를 넘어선 세기의 신호를 압축해서 Threshold 밑으로 들어가도록 만든다</small>\n</center>\n<p>또한 필자가 컴프레서 소리를 압축한다고 했는데, 소리를 압축한다는 것이 뭔지 잘 이해가 안갈 수 있다. 대표적인 예로 우리가 일반적인 음원에서 듣고 있는 “퍽!”, “탁!” 하는 깔끔한 드럼소리가 바로 압축된 소리이다. <small>(보통 이렇게 팍팍치는 소리를 Damping이라고 한다.)</small></p>\n<p>일반적으로 드럼을 녹음하면 드럼 특유의 통이 울리는 잔향이 남는데, 이 소리를 컴프레서로 압축하면 우리가 일반적으로 듣는 깔끔한 드럼소리로 만들 수 있다.</p>\n<p>그 외에도 베이스에 컴프레서를 사용하여 단단한 느낌을 부여하거나 멀리 있는 소리를 가까이로 끌어오거나 그 반대 역할도 할 수 있는 등, 컴프레서만 잘 사용해도 소리에 굉장히 많은 느낌을 부여할 수 있다. 그래서 필자에게 사운드 엔지니어닝을 알려주셨던 선생님도 컴프레서의 중요성을 굉장히 강조하셨던 기억이 난다.</p>\n<p>컴프레서는 몇가지 값들을 사용하여 신호를 언제부터 압축할 것인지, 어느 정도의 속도로 압축할 것인지와 같은 세팅을 할 수 있도록 설계되었다. HTML5 Audio API에서 제공하는 <code class=\"language-text\">DynamicsCompressorNode</code>도 이 값들을 동일하게 제공하고 있으므로 우리는 이 값들이 어떤 의미를 가지고 있는지 알아야 올바른 방법으로 이 노드를 사용할 수 있다.</p>\n<h4 id=\"threshold\" style=\"position:relative;\">Threshold<a href=\"#threshold\" aria-label=\"threshold permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Threshold는 소리를 어느 크기부터 압축할 것인지를 정하는 임계점을 의미한다. 단위는 DB(데시벨)을 사용한다.</p>\n<h4 id=\"ratio\" style=\"position:relative;\">Ratio<a href=\"#ratio\" aria-label=\"ratio permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Ratio는 Threshold를 넘은 소리가 어느 정도의 비율로 줄어들 것인지를 정하는 값이다. 이 값은 <code class=\"language-text\">입력:출력</code>의 비를 의미하기 때문에 일반적으로는 <code class=\"language-text\">2:1</code>, <code class=\"language-text\">5:1</code>와 같은 비율로 이야기한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 292px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA51AAAOdQG5Y1EyAAAB0ElEQVR42pWT20/CMBjF+f+fNT56JWHGxOALMQa5BE3gSUPETKeBMW7bWMsu7MamZyuOuuCFL1nSNv3tnJ5+LXzsVjHKti3fDzAp7ISGYTgej02Ter6/GwxyMBjYts0MJLBpWf8hV6tVjkzgvf2DmarxS1tJWZYdx8ltK5wcn5YE4ReYafJkEIRYTOCr8hWhNI6in84JzcwtpXQ6nRqGYaf/KtRqdUoXcRzlLiTTXC6XGFuWhZyBBUGwWCyWrpvA5cuyQQjvGQ6jKILmcDh0Xdf3/dlsNplMIIuVfn+gaepa+ejwyCCUh2ESsKqq8/kcu5/SEkWx2+3K8pAQouuq43oJfHd3n9qOM7eAO51OvV5vNBrtdluSJCizwLKK0oySJoECDzebzVKpBAxR4ZA4oWmaEMQ2XdcpIZqq6sY8DyMh+IThnAir+KvYdAPz2SIktvXPtlvDfN/CJK/DV6a5gTVNG41Gbnp1LLC87PfZ6stXAvd6PeTpeR4w2EYqGDhcBTAWJg/4RRRbrdbmVeFDG2AHeogxCIyN2RS9cXN9XalUqtVbQRDOzy+KZ0VcwPb3DDJnW3p9fe49K4oivb0ryujh4RGxrmE+kqw9c4tb0/4EM4F9Se9NBhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ratio\" title=\"\" src=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" srcset=\"/static/4928391f2babd8b6166e59f0d6730a60/69538/ratio.png 160w,\n/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png 292w\" sizes=\"(max-width: 292px) 100vw, 292px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>하지만 HTML5 Audio API의 속성에서는 단위가 조금 다르다. 공식 문서에는 “출력 값의 1db를 변경하기 위해 필요한 db값”이라고 적혀있는데 그냥 이 속성에 <code class=\"language-text\">12</code>를 할당하면 압축 비율이 <code class=\"language-text\">12:1</code>라고 생각하면 된다.</p>\n<p>보통 컴프레서를 적당히 걸었다고 하면 <code class=\"language-text\">4:1</code> 정도의 비율을 말하기 때문에 해당 속성의 기본 값인 <code class=\"language-text\">12:1</code>은 상당히 하드한 압축 비율이라고 할 수 있다.</p>\n<h4 id=\"attack\" style=\"position:relative;\">Attack<a href=\"#attack\" aria-label=\"attack permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Attack은 소리를 어느 정도의 빠르기로 압축할 것인지를 정하는 값이다. Threshold를 넘은 값을 얼마나 빠르게 때려서 눌러 담을 지를 정하면 된다고 생각하자.</p>\n<p>많은 분들이 여기서 정해주는 어택 타임이 “Attack이 시작되는 시간”으로 잘못 알고 있는 데, 사실 신호의 크기가 Threshold를 넘으면 Attack 자체는 바로 시작된다. 우리가 정해주는 어택 타임은 정해진 “Ratio로 정해준 비율까지 도달하는 데 걸리는 시간”이다.</p>\n<p>단위는 보통 밀리초(Milliseconds)를 사용하지만 Audio API에서는 초(Seconds)를 사용한다.</p>\n<h4 id=\"release\" style=\"position:relative;\">Release<a href=\"#release\" aria-label=\"release permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Attack이 소리를 누르는 빠르기였다면 Release는 압축한 소리를 어느 정도의 빠르기로 다시 풀어줄 것인가를 정하는 값이다. 이때 풀어주는 값은 소리의 원래 크기가 아니라 표준 음량인 10db에 도달하는 시간을 목표로 한다.</p>\n<p>Release도 Attack과 마찬가지로 단위는 보통 밀리초를 사용하지만 Audio API에서는 초를 사용한다.</p>\n<h4 id=\"knee\" style=\"position:relative;\">Knee<a href=\"#knee\" aria-label=\"knee permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Knee는 사실 대부분의 하드웨어 컴프레서에는 없는 기능이지만 소프트웨어 컴프레서에서는 꽤 자주 볼 수 있는 기능이다. 이 값은 컴프레서가 얼마나 자연스럽게 적용될 것인지를 결정한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAA7ElEQVR42mWR2w6DIBBE+f9/1KiJd4zxUlFQ2yPbEhvnQWFmZ9gF5Zw7z/N9A9txHJdlYb3v+3EcT9UYw1r1fW+tFVaqt22DYcE21IlK0LquxoMaVVWVmIPGdhgGrTVM0zRBpUf4l4f2uMx5nrdtS1gcx0mSpGlaliU2DHVdo3ZdRwtRFMHD0CwMlstMn6Ry5uGBjTp4MXMy8xMxzzMMWyJQOUzhcR7vf8iQ8HimaXpeKscoAtDcDwTzhZQ4FszG5YkkgJQnUPzsDUxCqzQmZlS5fAET0TAFX7P0UBRF7pFl2f1tBGRJASpjBv4DXHMHixSVCw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hard soft compression\" title=\"\" src=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png\" srcset=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/69538/hard-soft-compression.png 160w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/72799/hard-soft-compression.png 320w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png 640w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png 654w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>위 그림의 그래프의 꺾이는 정도가 컴프레서가 얼마나 서서히 적용되는지를 보여주고 있다. 이때 빠르게 팍! 적용하는 컴프레션을 Hard하다고 하고 천천히 적용하는 컴프레션을 Soft하다고 한다.</p>\n<h3 id=\"compressror-구현해보기\" style=\"position:relative;\">Compressror 구현해보기<a href=\"#compressror-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"compressror 구현해보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사실 위에서 이야기 했듯이 HTML5 Audio API는 자체적으로 <code class=\"language-text\">DynamicsCompressorNode</code>를 제공하기 때문에 우리가 소리를 압축하는 알고리즘을 직접 구현할 필요가 없다. 단지 노드를 생성한 후 연결해주기만 하면 될 뿐이다.</p>\n<p>이번에는 사용자가 업로드한 오디오 파일에서 오디오 버퍼를 추출하여 소스 노드를 생성하는 것이 아니라 <code class=\"language-text\">&lt;audio></code> 태그에서 추출하여 소스 노드를 생성하는 방식으로 진행하도록 하겠다. <small>(이렇게 하면 코드가 훨씬 간단해진다)</small> 지금 생성한 소스노드는 앞으로 다른 이펙터를 구현할 때도 계속 사용할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>AudioContext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> audioDOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-audio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sourceNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createMediaElementSource</span><span class=\"token punctuation\">(</span>audioDOM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> threshold <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> attack <span class=\"token operator\">=</span> <span class=\"token number\">0.003</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> release <span class=\"token operator\">=</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ratio <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> knee <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> compressorNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicsCompressor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>threshold<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>threshold<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>attack<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>attack<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>release<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>ratio<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>ratio<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>knee<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>knee<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> inputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>compressorNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>필자는 소스 > 게인 > 컴프레서 > 게인의 순서로 오디오 소스의 흐름을 생성했는데, 사실 이건 개인의 취향이다. 하지만 일반적으로 대부분의 컴프레서는 인풋 게인과 아웃풋 게인을 모두 가지고 있으므로 필자도 이와 동일하게 구현했다.</p>\n<p>이후 소스노드를 재생해보면 압축된 소리를 들을 수 있긴 한데, 사실 사운드 엔지니어가 아닌 일반인이 소리의 미세한 압축의 정도를 느끼기는 힘드므로 위의 값들을 조금 극단적으로 바꿔보는 것을 추천한다.</p>\n<h2 id=\"reverb\" style=\"position:relative;\">Reverb<a href=\"#reverb\" aria-label=\"reverb permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABgNoc2Cyf/8QAHBAAAQQDAQAAAAAAAAAAAAAAAgABAxESITEy/9oACAEBAAEFAnjoY/ZdN3wDStf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAARECBB/9oACAEBAAY/AljKf//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUWGB/9oACAEBAAE/ITe9ryZx1KHMfCKQuVFayKuf/9oADAMBAAIAAwAAABCrz//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAwEBPxBUf//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxBwf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExUXFhgZH/2gAIAQEAAT8QW++xj9uVzEbtvEvD3EXuMJVpG0jSX4xGWaXon//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb\" title=\"\" src=\"/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg\" srcset=\"/static/168b553805699d40f75aa40227c69521/0913d/reverb.jpg 160w,\n/static/168b553805699d40f75aa40227c69521/cb69c/reverb.jpg 320w,\n/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg 640w,\n/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg 643w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>리버브(Reverb)는 소리에 울림을 통해 공간감을 부여하는 공간계 이펙터이다. 소리에 울림을 통해 공간감을 부여한다는 게 어떤 의미일까?</p>\n<p>사실 우리는 소리를 듣고 현재 있는 공간이 넓은지 좁은지, 이 공간이 거친 벽면으로 이루어져 있는지, 아니면 유리같은 맨들맨들한 공간으로 이루어져 있는지를 대략적으로 파악할 수 있다. 그 차이가 워낙 미세해서 훈련되지 않은 사람이라면 알아채기 힘들 뿐이다.</p>\n<p>어떻게 이런 일이 가능할까? 바로 소리의 반사에 의한 잔향 때문이다. 먼저, 소리를 듣고 공간의 크기를 감지하는 원리는 간단하다. 필자가 어떤 방 안에서 소리를 “왁!”하고 지른 뒤 얼마 후에 첫번째 반사음이 들리는지를 감지하면 된다.</p>\n<p>하지만 이 첫번째 반사음은 밀리초 단위의 굉장히 빠른 속도로 다시 필자에게 돌아오기 때문에 1초, 2초 이렇게 세는 것이 아니라 그냥 느껴야하는 것이다. 이때 이 반사음을 초기 반사음(Early Reflection)이라고 한다.</p>\n<p>하지만 여기서 끝이 아니다. 소리가 한번 반사되어 여러분의 귀로 전달된 뒤에도 반사는 계속 될 것이다. 이때 이 잔향들은 공간의 사방팔방으로 부딪히고 반사되어 여러분의 귀로 다시 돌아올 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAABwUlEQVR42l2RWW/TQBSF80/5JTyUB5SqvIDECxSJCipBW+jqSlWhJK5jgSjQdImdOIuz2HGc2p7FM7Znxh6ciE0cnbd7vivdeypMsNJC5kIWoshFIX5ZikIWeZFnPMtYxssYz1KWMc7+ZCpBFGCCBQKp7zEEFluWg5IBENxcX6ulNP1wb79eq6t11R7aUkqe8wU8Gg8xAjwhnGe54IXMly4iEFmd7slpXdlVdl5uP37y/O274zdbh4bZ/geejDCMshhSwRKRYUZKJyKllDqO22joTx+tvVdOjmqfVe3rp5o282d/YddzCYIJAYjROQmn8dwjQSySMAx73Z7RalVXqz8MY2j3e5blz2fF4jW/b8Y0TmmcxABxMsF+HzgTNLujIKExpQhhbBomAABiFEHABOe5YOV5+RKOE5IlJCUQcmqEg4Z7pbs3Gy3l2Ljtu8k0oCQV8n8VcllEBcaIIBDDIEhRc9apjb6dj5sPvjy793pj5UWvutl5+Kpzf91c3bTWj+x9zf144Z1fzZvdkKS0UvYRRQGEUYiBG3nDO2ccTL87t7rVvmz7F4anXboH2mjrw2DnbLCn2oo+3j41d8+MCKGfxXPjjIB+Rd8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reflection\" title=\"\" src=\"/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png\" srcset=\"/static/3457634accb0a45c9bd6199020317de9/69538/reflection.png 160w,\n/static/3457634accb0a45c9bd6199020317de9/72799/reflection.png 320w,\n/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png 640w,\n/static/3457634accb0a45c9bd6199020317de9/d9199/reflection.png 960w,\n/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>초록색 선이 초기 반사음, 사방팔방 부딪히는 파란색 선이 바로 잔향이다</small>\n</center>\n<p>이때 이 잔향이 얼마나 오래 들리는가, 얼마나 선명하게 들리는가와 같은 특성이 방의 재질을 결정한다. 이야기만 들으면 이렇게 소리를 듣고 공간을 판별한다는 것이 불가능한 것 같지만 여러분이 이미 평소에 듣고 음악에는 모두 이 원리를 적용한 공간적 설계가 함께 담겨있다.</p>\n<p>이렇게 리버브는 말 그대로 잔향을 만들어내기만 하면 되기 때문에 하드웨어 리버브 중에서는 스프링이나 철판 등의 재료를 장비 내부에 넣어놓고 오디오를 재생하여 재료가 떨리며 발생한 잔향을 증폭하는 방식을 사용하는 것도 있다. 즉, 뜯어보면 장비 내부에 스프링이나 철판 하나 딸랑 들어있다는 것이다. <small>(이런 단순한 구조로 좋은 소리를 뽑는다는 게 더 무섭…)</small></p>\n<p>그러나 리버브를 소프트웨어로 구현할 때는 이야기가 조금 다르다. 컴퓨터는 스프링이나 철판의 떨림과 같은 자연적인 아날로그 신호를 생성할 수 없으므로 직접 계산을 통해 구현해야한다. 이때 소프트웨어 리버브는 크게 두 가지 종류로 나누어지는데 바로 Convolution Reverb와 Algorithm Reverb이다.</p>\n<p>하지만 이 포스팅에서 두 리버브를 모두 구현하기에는 글이 너무 길어질 것 같으므로 아쉬운대로 컨볼루션 리버브에 초점을 맞춰 진행하겠다. <small>(알고리즘 리버브만 해도 포스팅 하나 분량이다.)</small></p>\n<h3 id=\"convolution-reverb\" style=\"position:relative;\">Convolution Reverb<a href=\"#convolution-reverb\" aria-label=\"convolution reverb permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>컨볼루션 리버브(Convolution Reverb)는 실제 공간의 잔향을 녹음한 후에 잔향 오디오 소스와 원본 오디오 소스를 실제 공간의 울림을 원본 오디오 소스에 합성하는 방법이다.</p>\n<p>이때 실제 공간의 잔향을 녹음하는 대표적인 방법을 간단하게 설명하자면, 녹음하고자 하는 공간에 순수한 사인파(Sine Wave)의 소리를 낮은 주파수부터 높은 주파수까지 쭈우우욱 이어서 틀고 그때 발생하는 잔향을 녹음하는 것이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAa01zxrFI74LLA//xAAZEAEBAAMBAAAAAAAAAAAAAAABAAIQISL/2gAIAQEAAQUCnWXWYCDyA3//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAZEAABBQAAAAAAAAAAAAAAAAAAARAgIYH/2gAIAQEABj8CljWh/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERQRAhMVFh/9oACAEBAAE/IX1qil28HIcixKBGGYJahs//2gAMAwEAAgADAAAAELwvPP/EABURAQEAAAAAAAAAAAAAAAAAAAEg/9oACAEDAQE/ECP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMWFB/9oACAEBAAE/EA3fpLnCDS59gENtqLQhtsAPZm2lLnkO2loT5U1kCXU//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ir recording\" title=\"\" src=\"/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg\" srcset=\"/static/139d22412a234cb2ac3a54c80f1ef282/0913d/ir-recording.jpg 160w,\n/static/139d22412a234cb2ac3a54c80f1ef282/cb69c/ir-recording.jpg 320w,\n/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg 640w,\n/static/139d22412a234cb2ac3a54c80f1ef282/6a068/ir-recording.jpg 960w,\n/static/139d22412a234cb2ac3a54c80f1ef282/eea4a/ir-recording.jpg 1280w,\n/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg 2561w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>공간의 IR을 녹음하는 모습 - 출처: http://www.alanjshan.com/impulse-response-capture/</small>\n</center>\n<p>이때 이 잔향 신호를 Impulse Response(IR)이라고 부르기 때문에 컨볼루션 리버브는 IR 리버브라는 이름으로도 불린다. 이렇게 녹음한 IR은 원본 소스에 컨볼루션(Convolution), 또는 합성곱이라고 불리우는 연산을 통해 합쳐지게 된다.</p>\n<p>이 컨볼루션이라는 개념을 수학적으로 접근하기 시작하면 머리도 아프고 또 포스팅이 길어지니까 간단하게 정의해보자면, 그냥 서로 다른 정보들을 섞는 것이라고 표현할 수 있다.</p>\n<p>이 포스팅을 읽는 분들은 아마 개발자 분들이 많을 테니 우리에게 좀 더 친숙한 머신러닝을 사용하여 컨볼루션을 설명하자면 학습 알고리즘 중 하나인 <a href=\"https://en.wikipedia.org/wiki/Convolutional_neural_network\" target=\"_blank\" rel=\"nofollow\">CNN(Convolution Neural Network)</a>을 예로 들어볼 수 있겠다.</p>\n<p>CNN에서도 첫번째 레이어의 이미지를 두번째 레이어로 보낼 때 행렬로 구현한 커널<small>(또는 필터)</small>와 이미지를 섞어서 피처맵을 생성한 후 다음 레이어로 보내게된다. 이때 첫번째 레이어의 이미지와 커널의 정보가 섞인 것이라고 생각할 수 있다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVR42mN4/Pjx8+cvHj1+8uD+/Z8/f/7////7929Pnz598/r182fPHj58/OXrN6Dgv79/37179/btu8+fPn358uXTp89AQYZbt249evTkzt37ly5d+vnrF1Do16+ft2/fOnr06JEjRy9euvLt+4//IPDvzp07J06cvHrlyvUbNy5cvPz37z+Gvdt37t68+eCO7avmL1g0cwZI1b9/P3/8ePz4ycNHj758/fr371+g4O07d4KDg8PCQkNCgHSIn6/f/fv3GTbO6VvYVpgX5VcY5jy9o/7f//+PHj18//793z9/gOSvX79ev3nz6tWrM2fO8PDwcHJwcnFyiouK8nJzX716lcHDSKsh2ac81rMjw/fY5iU/f/4CevjDhw9///4B6gFqfvPmDdC3586d4+Hm4eXllZSQUFJU5OPlO3/+PIOVkpi7gXJuoG1Dovv+NXN//Pz54sWLt2/fAh0P1Pb792+gTqApFy9cEBYW5uXhFRQUlJOV4eHiAhrHUJ/ol+iib6vA56cnvnV+5w+wzcDwBGoD2g8k34PBqVOnGGCAhYWFjYUFpPn0vq0nd29cOWfS8hn9V0/shQTYfyQACTCgiXV1dU1NTS3NzS0tLRP6+1++fAkAiH1QfGGJI9IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"convolution\" title=\"\" src=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" srcset=\"/static/380a88c34eac31f9a0af42f7f4de4002/69538/convolution.png 160w,\n/static/380a88c34eac31f9a0af42f7f4de4002/72799/convolution.png 320w,\n/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>원본 이미지와 커널을 섞어서 새로운 정보인 피처맵을 만들어낸다</small>\n</center>\n<p>오디오에서의 컨볼루션 리버브도 이와 마찬가지다. 이 경우에는 섞어야하는 정보가 원본 소스와 IR이 된 것 뿐이다.</p>\n<p>컨볼루션은 원본 소스와 IR이라는 두 오디오 소스의 주파수 스펙트럼을 곱하는 과정이기 때문에 이를 통해 두 소스 간에 겹치는 주파수는 강조되고 겹치지 않는 주파수는 감쇠된다. 이렇게 원본 소스와 IR 간 겹치는 주파수가 강조되면 원본 소스는 IR의 음질의 특성을 띄게 되는데, 이게 바로 컨볼루션 리버브의 원리이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAFxGAABcRgEUlENBAAACIElEQVR42m1Ta2OjIBDM//9x109tEpPGmPSiBBVUQB4CN0guvfa6vkbYWWaXZRNj9N7jHVbLv3nkCZZleU5lT4wAbPBhjBlj5nmWUmptp2kSQjpnx3EEdM5xxvgw3+m43+/qur5er33fJ7LWGk5rVMT2jAXciI7FjAlZEBaQjJPq8uvlZbfbEUKEEIlsrc1o1RUB2zaBxYX6FtbRoFRY3IInJ4JwkJnIUAW1iYxHCcn0JCOmgo93GrVJgRoSVXL+NOj9lI14i3MTGbuy15RpOtiuZxcyfBDT3vvqzq93TRvWMEI0Y7NSab0NSsU5x/rWGG2sc54PfdPdftfX90NR7PdVeS72u/djsXt7O5/P2+3+dCqHYXjknGU/jWnONU9ph8V6G3+yh+xnztkWv0xmwu2Dx5tKimLgMov5gZy24S8ZHtIKaaXzbrKjcEI5NS+z9poZBmC8ccFBjsw5QzYSQOapcmrsBq6wD0rdu/7jRi5VtT1si1NxuVxO1el4Pr4Wr4fyMInpUbB/93ngkbHUMkr5rjPjyAc+KCnhM6sZJcWvmMRjn58FW8lBytB16Db0c6zrR4YIvjb1fzl/JUdAuTYJvCkFSKNNE581DWvXPVZGDBwM1Bz6+163rcUEAKU4IZZz23WWEEWpaVvTNBIOjGmRc0ajKqVQ89Qn1oTgQc6gLMu6vq29jbNl4QLO2ooWlET+tvtZfD60KJL61tNf7Q/9w9fqrhB2GAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"signal convolution\" title=\"\" src=\"/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png\" srcset=\"/static/c055ddb7e8755ffb1cfef849a60b862f/69538/signal-convolution.png 160w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/72799/signal-convolution.png 320w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png 640w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>원본 신호와 녹음한 IR 신호를 컨볼루션 연산한 모습</small>\n</center>\n<p>사실 HTML5 Audio API는 컨볼루션 연산을 대신 수행해주는 <code class=\"language-text\">ConvolverNode</code>를 제공하기 때문에 컨볼루션이 무엇인지 몰라도 컨볼루션 리버브를 만드는 데는 아무 문제가 없다.</p>\n<p>그러나 적어도 이 이펙터가 2개의 신호 정보를 곱해서 새로운 신호를 만들어내는 원리를 가지고 있다는 것을 알아야 필자가 왜 이런 코드를 작성하는지도 알 수 있기 때문에 대략적인 설명을 하는 것이다.</p>\n<p>어쨌든 컨볼루션 리버브의 대략적인 원리를 파악했다면 이제 바로 만들어보도록 하자.</p>\n<h3 id=\"convolution-reverb-구현해보기\" style=\"position:relative;\">Convolution Reverb 구현해보기<a href=\"#convolution-reverb-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"convolution reverb 구현해보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>먼저 HTML5 Audio API는 <code class=\"language-text\">ReverbNode</code> 같은 건 제공하지 않는다. 하지만 위에서 설명했듯이 컨볼루션 연산을 지원하는 <code class=\"language-text\">ConvolverNode</code>를 제공해주고 있기 때문에 우리는 잔향 소스인 IR(Impulse Response)만 직접 만들어주면 된다.</p>\n<p>그리고 일반적으로 리버브는 <code class=\"language-text\">wet</code>과 <code class=\"language-text\">dry</code>라는 수치로 원본 소스와 잔향 소스를 비율에 맞게 섞을 수 있도록 제작되므로 필자도 동일하게 코드를 작성하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> decay <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>리버브의 사용할 3개의 변수를 먼저 설명하자면, <code class=\"language-text\">mix</code>는 wet/dry의 비율을 의미하고, <code class=\"language-text\">time</code>은 잔향의 길이, <code class=\"language-text\">decay</code>는 잔향이 감소하는 빠르기를 의미한다. 그럼 이제 이 값들을 사용하여 직접 IR을 생성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">generateImpulseResponse</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sampleRate <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> sampleRate <span class=\"token operator\">*</span> time<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> impulse <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> sampleRate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> leftImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    leftImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> deacy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rightImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> deacy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> impulse<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>뭔가 복잡해보이지만 뜯어보면 별 거 없다. <code class=\"language-text\">sampleRate</code>는 우리가 생성하고자 하는 <code class=\"language-text\">IR</code>의 샘플레이트, 즉 음질을 의미하고 <code class=\"language-text\">length</code>는 <code class=\"language-text\">sampleRate * time</code>, 즉 <code class=\"language-text\">time</code>초 만큼의 잔향을 표현하기 위한 버퍼의 길이를 의미한다.</p>\n<p>그리고 그냥 버퍼 노드를 하나 생성한 다음 <code class=\"language-text\">-1 ~ 1</code>의 무작위 값을 생성한 후 <code class=\"language-text\">1 - i / length</code>에 <code class=\"language-text\">decay</code>를 제곱한 후 방금 생성한 난수에 곱해준다. 이러면 <code class=\"language-text\">i</code>값이 커질수록 값이 작아질 것이고, <code class=\"language-text\">deacy</code> 값이 커질수록 더 빠르게 작아질 것이다. 이는 잔향의 감쇠를 표현 해준 것이다. 이후 이 샘플을 방금 만든 버퍼 노드에 쭈르륵 담아주면 끝이다.</p>\n<p>이렇게 생성된 IR 버퍼를 파형으로 표현해보면 대략 다음과 같은 모양을 가질 것이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAABAgAD/9oADAMBAAIQAxAAAAHVfnbp52DMWgJB3//EABoQAAICAwAAAAAAAAAAAAAAAAEDEBECEiD/2gAIAQEAAQUCxlRZY2gChz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAQUAAAAAAAAAAAAAAAABEQAQMDFBof/aAAgBAQAGPwKpQYe5jtj/xAAdEAACAgEFAAAAAAAAAAAAAAAAAREhURAxcbHw/9oACAEBAAE/IWUV0e2GQ9ZmRFwHJEJKi8D1Z//aAAwDAQACAAMAAAAQAx+w/8QAFxEBAQEBAAAAAAAAAAAAAAAAARARYf/aAAgBAwEBPxBRm8n/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREh/9oACAECAQE/ENgo/8QAIBABAAICAgEFAAAAAAAAAAAAAQARITFBURBhcYGRsf/aAAgBAQABPxBBVvgG4C8p7iCqvPxMg4bUGeGWh6mWn5FYsNdxiWhu9svq+5a8lQ0eN5//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decay\" title=\"\" src=\"/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg\" srcset=\"/static/2e23d03eabacbb33bc757852ef9e0434/0913d/decay.jpg 160w,\n/static/2e23d03eabacbb33bc757852ef9e0434/cb69c/decay.jpg 320w,\n/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg 640w,\n/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg 768w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>쨘, 이렇게 간단하게 IR을 생성해보았다. 이제 <code class=\"language-text\">ConvolverNode</code>를 사용하여 원본 소스와 이 IR을 합성해주는 것만 남았다. 리버브 이펙터의 오디오 흐름을 만들기 위해서 필요한 노드들을 먼저 생성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> reverbNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createConvolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위에서도 설명했듯이 일반적인 리버브 이펙터는 wet/dry라는 수치를 사용하여 원본 소스와 리버브가 적용된 소스를 섞어서 출력하는 기능을 제공한다. 이때 dry한 소스는 리버브 이펙터를 거치지 않고 바로 <code class=\"language-text\">outputNode</code>로 연결되서 출력되어야 하며, wet한 소스는 우리가 만든 <code class=\"language-text\">reverbNode</code>를 한번 거치고 <code class=\"language-text\">outputNode</code>로 출력되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Dry 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// IR을 생성하여 Convolver의 오디오 버퍼에 입력해준다.</span>\nreverbNode<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> <span class=\"token function\">generateImpulseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Wet 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>reverbNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nreverbNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwebGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>vaule <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 컨볼루션 리버브를 간단하게 구현해보았다. 사실 컨볼루션 리버브의 퀄리티에 가장 큰 영향을 끼치는 것은 IR의 퀄리티인데, 우리는 대충 만든 샘플 오디오로 IR을 만들었으므로 이 리버브의 퀄리티는 좋을 수가 없다. 그러나 소스 노드를 재생해서 들어보면 신기하게도 소리에 공간감이 부여된 것을 들어볼 수 있다.</p>\n<p>만약 기회가 된다면 다음에는 알고리즘 리버브의 구현체도 한번 포스팅 해보도록 하겠다. 알고리즘 리버브는 실제 공간의 잔향을 녹음하여 사용하는 컨볼루션 리버브와는 다르게 100% 알고리즘으로만 구현된 리버브이다. 그렇기 때문에 약간 인위적인 느낌이 나기는 하지만 컨볼루션 리버브와는 또 색다른 느낌을 부여할 수 있으므로 사운드 엔지니어들은 이 두가지 리버브의 특성을 파악하고 적재적소에 사용한다.</p>\n<p>그렇기 때문에 개발자들에게는 오히려 컨볼루션 리버브보다 알고리즘 리버브 쪽이 더 이해가 잘될 수 있으나, <code class=\"language-text\">ConvolverNode</code> 하나와 대충 만든 IR만 있으면 나머지는 알아서 다 연산해주는 컨볼루션 리버브와는 다르게 알고리즘 리버브는 진짜 밑바닥부터 만들어야한다. 그래서 아쉽지만 알고리즘 리버브는 다음에 포스팅 하도록 하겠다.</p>\n<p>만약 알고리즘 리버브의 구현체가 궁금하신 분은 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer/blob/master/src/lib/effects/AlgorithmReverb.js\" target=\"_blank\" rel=\"nofollow\">필자의 깃허브 레파지토리</a>에서 확인해볼 수 있다.</p>\n<h2 id=\"delay\" style=\"position:relative;\">Delay<a href=\"#delay\" aria-label=\"delay permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHPUhaAP//EABcQAAMBAAAAAAAAAAAAAAAAAAECERD/2gAIAQEAAQUCLYZf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQAQETFBUaH/2gAIAQEABj8CEnivOm//xAAZEAEBAQADAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hSAWVcs4h9Y6zrf/aAAwDAQACAAMAAAAQdC//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QQ22//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxCMU//EABkQAAIDAQAAAAAAAAAAAAAAAAEhABFRMf/aAAgBAQABPxBUKIoScjwgC2cEcAZd5P/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay\" title=\"\" src=\"/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg\" srcset=\"/static/6c84397372fb970c1df011b86b5edfef/0913d/delay.jpg 160w,\n/static/6c84397372fb970c1df011b86b5edfef/cb69c/delay.jpg 320w,\n/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg 640w,\n/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg 749w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>딜레이(Delay)는 리버브와 같은 공간계 이펙터이고 소리를 반복해서 들려준다는 점이 같기 때문에 비슷하다고 생각할 수 있지만 그 원리와 용도는 많이 다르다.</p>\n<p>먼저, 딜레이는 단순히 소리를 반복하는 효과이지만 리버브는 공간 내에서의 복잡한 반사음을 흉내내는 것이므로 딜레이만 사용하면 리버브와 같은 자연스러운 공간감을 표현하기가 힘들다.</p>\n<p>방금 만들어봤던 리버브 이펙터는 사실적인 공간 표현이 목적이기 때문에 컨볼루션이나 복잡한 알고리즘을 사용하지만 딜레이는 그냥 원본 소스를 잠깐 지연시켰다가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>초 후에 다시 틀어주면서 조금씩 소리를 작게 해주면 끝이다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42p1SPW8aQRDlH7uMlCJKE6VwOnf5AenduCIgwUl2QUMTO0LojiMgA/e9s7v3/TxzYAFx7EheaW53b3fevvdmemmawliL1XKJ2f09qqrCO0Yjn7Zt/V5RFEiVAsoSTZJ2p5o0wjD6ZyYnIcsyJEnSzXVdnwOWDJQRgamh5QsyrGmgVLNf5wWSTB2pNA2GwyEGgwFGoxGWrOwloDA8A2yhDhgFO6DsOUNRled5Z88LhvIzjCIY9pK2W+RlgTg22O00cquZncaO98ZoVqIRM1trZX8MrXUjjwRB4PcEWV4jxYlbwsODi8UiwCawnKwRxOwnz0prpBy0B+jiFFA8jeN4D3g6RMJBxvuqbLllxOi6ruB5Lpv8B6vVCuv1mn1UkLZKuPqyfm4p8VFyTuIIKBdJE3JVwv21ZEkJt0zcAYkV8qCErA95/+vDkkHY6LTCj+8Zgq79Wj7Eq33oOA4mkwmm0ynG47Gsn1/ithFAZliZCt8+Z/jyFbi9FUmvG7bZbDCfz+G6LmazGRdxcQQUhkorlFTi8lOKDx+Bi4sWV1fA3R1YOt4EP5XMlvg9rihxuSnchjQepNT/aanft3RzY+j62pDjGHp8LIgL092TiKLo78g8z6t83//9BM+R5WNJLGHCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb vs delay\" title=\"\" src=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png\" srcset=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/69538/reverb_vs_delay.png 160w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/72799/reverb_vs_delay.png 320w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png 640w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png 660w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Echo(Delay)와 Reverb의 차이</small>\n</center>\n<p>딜레이는 이렇게 간단한 원리를 가지고 있기 때문에 만드는 것 역시 그렇게 어렵지 않다.</p>\n<h3 id=\"delay-구현해보기\" style=\"position:relative;\">Delay 구현해보기<a href=\"#delay-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"delay 구현해보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>HTML5의 Audio API는 인풋으로 받은 신호를 지연시켜서 다시 출력하는 <code class=\"language-text\">DelayNode</code>를 제공해주기 때문에 우리는 이 노드를 사용하여 간단하게 딜레이 이펙터를 구현할 수 있다.</p>\n<p>그러나 단순히 <code class=\"language-text\">DelayNode</code>만 사용한다면 단 한번의 지연만 발생시킬 수 있기 때문에 우리는 한가지 얌생이를 사용하여 딜레이를 구현할 것이다. 먼저 딜레이에 필요한 변수들을 선언해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedback <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>리버브와 마찬가지로 대부분의 딜레이 이펙터도 wet/dry 값을 사용하여 원본 소스와 딜레이된 소스를 섞어서 출력해주는 기능을 가지고 있기 때문에 필자도 동일하게 구현해줄 것이다. 그리고 <code class=\"language-text\">feedback</code> 변수는 원본 소스가 한번 딜레이될 때 감소시킬 음량이고 <code class=\"language-text\">time</code> 변수는 메아리들의 간격을 의미한다. 딜레이에 사용할 변수들을 모두 선언했다면 이제 노드들을 만들 차레이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedbackNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> delayNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">webGainNode</code>와 <code class=\"language-text\">dryGainNode</code>는 리버브와 동일하기 때문에 그냥 넘어가고, 새로운 노드인 <code class=\"language-text\">feedbackNode</code>와 <code class=\"language-text\">delayNode</code>에 집중해보자. 사실상 딜레이 이펙터는 이 두개의 노드가 핵심이다. 먼저, 딜레이 이펙터가 하는 일에 대해서 다시 한번 살펴보자.</p>\n<blockquote>\n<p>입력 -> 지연 -> 감소된 신호 출력 -> 입력 -> 지연 -> 감소된 신호 출력…</p>\n</blockquote>\n<p>딜레이 이펙터가 하는 일은 이게 전부다. 신호를 조금씩 지연시키고 감소된 신호를 다시 출력하는 일을 반복한다. 그래서 필자는 <code class=\"language-text\">delayNode</code>와 <code class=\"language-text\">feedbackNode</code>를 서로 연결해주는 방법으로 이 이펙터를 구현하려고 한다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVR42mP4jxv8AgM8ChjwyH3+/Onjxw///v3DqXnHuXUZ00MqF6dXL8kEMjafWg0U3bTqZFrI9MrMJVVZS4GMzatPgQRPrsyaEVa1OAOoMnNGKFAjQ9f6KokEBvtqFccaNfF4hpYVpUB1tfkLxRkSbVWr7NSqRRni6wsXAwUblxbJpjA41mo41qjLJDF0ratiuPn0yorDc9cdX7z22MIVh+fceHIZqO78mTtLZx9cufDwygWHgQwgFygIlAIqgKsEasTi579///78+RNZBMgFCmLxMzA8/vz9A0d//4EUXXtwae2xJRtPLAeitUeXXHt4CWTov7/IKoEa0W3+8/c3kOxYXamVy+tap+1Wr6uVy9e2qhws9YdAVEFUbDy5LHGyT9H8+OJ58UDGhhNLwd75Q2w8f/76+dXrl2/fvfny5TPJiQQYQr9//wECrEEF0QwAoJQty6GnAz4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay nodes\" title=\"\" src=\"/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png\" srcset=\"/static/4d190f766bb560920bc66390824efb6c/69538/delay-nodes.png 160w,\n/static/4d190f766bb560920bc66390824efb6c/72799/delay-nodes.png 320w,\n/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png 640w,\n/static/4d190f766bb560920bc66390824efb6c/d9199/delay-nodes.png 960w,\n/static/4d190f766bb560920bc66390824efb6c/21b4d/delay-nodes.png 1280w,\n/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>이렇게 간단한 연결만으로 딜레이를 구현할 수 있다</small>\n</center>\n<p>이렇게 노드들을 연결하게되면 <code class=\"language-text\">DelayNode</code>를 통해 입력된 오디오 신호가 지연된 후 <code class=\"language-text\">FeedbackNode</code>와 <code class=\"language-text\">OutputNode</code>로 출력되고, <code class=\"language-text\">FeedbackNode</code>를 통해서 게인이 감소된 소리는 다시 <code class=\"language-text\">DelayNode</code>로 입력되어 지연된 후 <code class=\"language-text\">OutputNode</code>로 출력될 것이다. 그럼 위 그림대로 한번 노드들을 연결해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Dry 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Delay 루프 생성</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>feedbackNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfeedbackNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Wet 소스 노드 연결</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>vaule <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 소스 노드를 재생해보면 딜레이 이펙터를 통해 메아리가 치는 듯한 효과가 적용된 소리를 들어볼 수 있다.</p>\n<h2 id=\"filter\" style=\"position:relative;\">Filter<a href=\"#filter\" aria-label=\"filter permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42n2S62/SUBjG+4+ZuCkQNtrSy+k5vcM2NtyAkTHuhbbQFlqg5TLXdTpxLsY4Y2L84N/n4YOJiYnJkydPzsnvfd9zIWzHm8yXlr/2o5t5/LR6eH77+D358mvz8UcQP9mLu844rHVsqJfSQErKlZakvSBZuViioEwMJks3jDujWa0zcqPEixI3TGbxk7veWvO4562aZlBpmvLJOSqeiuoRg1QSqhma3z+kibYZ9N3I9NdeFLvR3SLeDidh35mbwXo4XTWtacOYdO2ZUqq8yjGvKS6dB4yo5QVIMjRh+ZvJ6l2UPG4/f4s/PX/4+jPePrrR7XTz3t/cm/6q74SGs9BOq3sH1P5hHpegocwIgGJIomG44/mtu7wzJsuBF5rBJozvMeytkuDmoefMO/Zs4EYYfpndwdgpQSme1+XjMlFtm23b74xn10P3eui1rKnpR71xYHiLcXgznEbdUWC4oX5WTeGZaR53ZqSC4YW4LoETBRVS2F0DhXQa6Tmg5qUiLe7yZd+uNHt49031auD4jf7oqmc1jBHucWU4RJaBKQrkWMAKgBMALwAkAiDwvMADCGiGZjiG4dhyvdV3ZuV6+6zWOrtsWcG6Ow6ILIsgAgUNaZqoqUjXUEEXsevqLhR0qahLsgQqjY7lL2stA+ui0cUHrHdtQhBhUYeKglRVxL7Tn/D3CgXEAw5lWQjUI1Qo0Wj31ISiyZIiyar8HyFJAvqJcnpBS3qahST+J0hNMwKRyQspit87yO8fMv8qRfIZIHI6IqHMasc5qGAYYxkWvqK43+hILPd7Ms/OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter\" title=\"\" src=\"/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png\" srcset=\"/static/39acf359c2bf68c771d7db4d300523e5/69538/filter.png 160w,\n/static/39acf359c2bf68c771d7db4d300523e5/72799/filter.png 320w,\n/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png 640w,\n/static/39acf359c2bf68c771d7db4d300523e5/d9199/filter.png 960w,\n/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png 1007w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>필터(Filter)는 무언가를 걸러내는 도구 혹은 개념을 의미한다. 우리는 이미 필터라는 개념을 평소에 많이 사용하고 있기 때문에 그렇게 이해하기 어려운 개념은 아닐 것이다. 그리고 오디오 이펙터에서의 필터는 바로 주파수를 걸러내는 역할을 한다.</p>\n<p>쉽게 말하면 필터는 오디오의 음역대 중 특정한 음역대만 콕 집어내어 없애버릴 수 있는 이펙터인 것이다. 그래서 필터는 주로 소리에 섞여있는 노이즈를 걸러내거나 너무 낮거나 너무 높아서 쓸데없는 울림을 생성하는 주파수를 걸러내는데 많이 사용된다.</p>\n<p>이러한 필터의 특성을 잘 사용하면 상당히 재미있는 짓을 많이 할 수 있는데 대표적인 예를 두개 정도 들자면, 바로 전화기에서 나오는 목소리를 만들거나 클럽에서 나는 음악 소리와 같은 소리를 만드는 경우가 있다.</p>\n<p>먼저, 전화기에서 나오는 목소리는 전체 주파수 중에서 특정한 대역의 주파수만 통과시키는 <code class=\"language-text\">Bandpass</code> 필터를 사용하여 만들어 낼 수 있다. 전화기가 전송할 수 있는 주파수 대역에 한계가 있다는 것을 이용하여 인간의 목소리 대역인 100 ~ 250hz의 주파수를 제외한 나머지 주파수를 모두 잘라내는 것이다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/JrbkbKt1iEM?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>위 영상의 5:00 경 \"Hey, kitty~\" 하는 부분이 필터가 적용된 목소리이다.</small>\n  <br />\n  <br />\n</center>\n<p>그러므로 사람의 목소리 소스에 필터를 사용하여 100 ~ 250hz 대역을 제외하고 나머지 주파수를 모두 날려버리게되면 우리가 일반적으로 전화를 할때 들리는 목소리로 만들어낼 수 있는 것이다.</p>\n<p>클럽에서 나는 음악 소리도 비슷한 원리로 만들어내는 것이다. 클럽의 특성 상 보통 지하에 위치하고 좁은 입구를 가지고 있는 경우가 많다. 그런 상황에서 클럽에서 노래를 틀게되면 소리가 밖으로 빠져나올 수 있는 통로가 거의 없기 때문에 우리가 지상에서 클럽에서 틀고 있는 노래를 들어보면 굉장히 묵직한 “붐~ 붐~“하는 소리가 들리게 된다.</p>\n<p>클럽 음악의 특성 상 강한 드럼과 베이스로 인해 저음이 부각되는 경우가 많고, 고음보다는 저음의 물체 투과율이 높기 때문에 클럽 외부에서는 상대적으로 고음에 비해 많이 투과된 저음을 위주로 듣게 되는 것이다. 이러한 파동의 특성은 소리에 한정되는 것은 아니고 빛과 같은 다른 파동또한 고주파의 에너지 손실률이 저주파보다 높다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/qmhwHUHc1Hc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>6:27초부터 낮은 주파수만 통과시키는 Lowpass 필터를 사용한 소리로 변하는 부분이 나온다</small>\n  <br />\n  <br />\n</center>\n<p>이렇듯 사운드 엔지니어들은 특정 상황의 소리가 어떻게 들리는지 분석하고 필터를 포함한 여러가지 이펙터들을 사용하여 그 상황의 현장감을 부여하기도 한다.</p>\n<p>다행히도 HTML5 Audio API는 이런 필터를 만들 수 있는 <code class=\"language-text\">BiquadFilterNode</code>를 제공해주고 있기 때문에 우리가 직접 오디오 버퍼를 까서 주파수를 분석해야하는 슬픈 상황은 피할 수 있다. 우리는 이 노드가 제공하는 값들이 어떤 것을 의미하는지만 알고 있으면 된다.</p>\n<p>그럼 <code class=\"language-text\">BiquadFilterNode</code>가 제공하는 속성들이 무엇을 의미하는지 하나하나 살펴보도록 하자.</p>\n<h4 id=\"frequency\" style=\"position:relative;\">Frequency<a href=\"#frequency\" aria-label=\"frequency permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Frequency는 어떤 대역의 주파수를 걸러낼 것인지를 정하는 값이다. 단위는 hz(헤르츠)를 사용하며, 10hz부터 오디오의 샘플레이트의 절반까지의 값을 할당할 수 있다. 만약 오디오 소스의 샘플레이트가 44,100hz라면 22,050까지를 할당할 수 있다는 의미이다.</p>\n<h4 id=\"q\" style=\"position:relative;\">Q<a href=\"#q\" aria-label=\"q permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>신호를 걸러낸다는 것은 기본적으로 칼처럼 딱 자를 수 있는 것이 아니다. 소리 자체는 아날로그 신호이기 때문에 네모 반듯하게 잘라낼 수 없고 어느 정도 바운더리를 가지고 걸러낼 수밖에 없는데, 이때 Q는 특정 주파수를 걸러낼 때 얼마나 예민하게 걸러낼 수 있는 지를 의미한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjklEQVR42o1TXW/CMAzk//87HpDgAY0KRKHtSqt8OU7i7ppAB2ibdqLIdXK+szGrKSOlFDMQMPN6vd7tdtvtFt/7/X6z2Vyv10kkMKeMwlrhEZG+7621RGSUatuuadp2ftouo2maYRjarq+vTVUdzufzNxlwzpV67H3XdpIrTg9IhtFKjwMsoOgLGZqFbCyNn58hs5/Jc2siMd9ZLt/Jxpg72ZEdevfKXlyU4JuMIcEGWirv2jGNvfFRnoCjJXjucRVCOJ1OKJavTJpY9AByTO+2f1AGua7rmSwpzuQg+uZDciH9i1xV1TiOUAbBc4iqx5mikCRNf9tGKoSIHxnvllMMnNQADYhbH+8r9JB+Vy7HHkCJMAm75Aw6mJNRMHb0/qvtkoWydn5ePDISg3grMU6oATs+WGJCOzGiRxSgxXYhD7ebMzqSZU8x32Jn2JrgLJLeGnyM1tgxssaq8V0ZY2AOSqkccA4IysZapTXmgjzmCnEiX/yvln/VfQcfAXb4cPi4XOrj8Ygmy9Fs+wlfnjxs6L3IYCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter q\" title=\"\" src=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" srcset=\"/static/bd13c5d375c2729ffbcba3539fc82f14/69538/filter-q.png 160w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/72799/filter-q.png 320w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png 560w\" sizes=\"(max-width: 560px) 100vw, 560px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Q에는 0.0001 ~ 1000 사이의 값을 할당할 수 있으며, Q의 값이 높을 수록 잡아낸 주파수를 더 예민하게 걸러낼 수 있다. 그러나 오디오 신호를 필터링 할 때 Q가 너무 높다면 자연스럽게 들리지 않고 인위적으로 들릴 수 있기 때문에 적당한 값을 찾는 것이 중요하다.</p>\n<h4 id=\"type\" style=\"position:relative;\">Type<a href=\"#type\" aria-label=\"type permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">BiquadFilterNode</code>로는 여러가지 타입의 필터를 만들어 낼 수 있는데, 크게는 주파수를 아예 걸러내버리는 타입과, 특정 주파수를 증폭시키거나 감소시킬 수 있는 타입으로 나눠진다.</p>\n<h5 id=\"주파수를-걸러내는-타입\" style=\"position:relative;\">주파수를 걸러내는 타입<a href=\"#%EC%A3%BC%ED%8C%8C%EC%88%98%EB%A5%BC-%EA%B1%B8%EB%9F%AC%EB%82%B4%EB%8A%94-%ED%83%80%EC%9E%85\" aria-label=\"주파수를 걸러내는 타입 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<ul>\n<li><code class=\"language-text\">lowpass(highcut)</code>: 지정한 주파수보다 높은 주파수를 모두 걸러낸다.</li>\n<li><code class=\"language-text\">highpass(lowcut)</code>: 지정한 주파수보다 낮은 주파수를 모두 걸러낸다.</li>\n<li><code class=\"language-text\">bandpass</code>: 지정한 주파수를 제외한 모든 주파수를 걸러낸다.</li>\n<li><code class=\"language-text\">notch</code>: 지정한 주파수를 걸러낸다.</li>\n</ul>\n<h5 id=\"주파수를-증폭감소하는-타입\" style=\"position:relative;\">주파수를 증폭/감소하는 타입<a href=\"#%EC%A3%BC%ED%8C%8C%EC%88%98%EB%A5%BC-%EC%A6%9D%ED%8F%AD%EA%B0%90%EC%86%8C%ED%95%98%EB%8A%94-%ED%83%80%EC%9E%85\" aria-label=\"주파수를 증폭감소하는 타입 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<ul>\n<li><code class=\"language-text\">lowshelf</code>: 지정한 주파수보다 낮은 주파수를 증폭/감소 시킨다.</li>\n<li><code class=\"language-text\">highshelf</code>: 지정한 주파수보다 높은 주파수를 증폭/감소 시킨다.</li>\n<li><code class=\"language-text\">peaking</code>: 지정한 주파수를 증폭/감소 시킨다.</li>\n</ul>\n<p>이 중 주파수를 증폭/감소시키는 타입은 밑에서 후술할 EQ(Equalizer)에서도 사용할 수 있다. 이번에는 단순히 주파수를 걸러내는 필터를 만들 예정이므로 필자는 주파수를 걸러내는 타입만을 사용하여 필터를 구현할 것이다.</p>\n<p>필자는 특정 주파수보다 높은 주파수를 모두 걸러내는 Lowpass 필터와 특정 주파수보다 낮은 주파수를 모두 걸러내는 Highpass 필터를 구현할 것이다. 그럼 한번 간단하게 필터를 구현해보도록 하자.</p>\n<h3 id=\"filter-구현해보기\" style=\"position:relative;\">Filter 구현해보기<a href=\"#filter-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"filter 구현해보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>우선 AudioContext 객체의 <code class=\"language-text\">createBiquadFilter</code> 메소드를 사용하여 <code class=\"language-text\">BiquadFilterNode</code>를 생성한다. 필자가 가지고 있는 오디오 샘플은 44,100hz의 샘플레이트를 가지고 있으므로 Lowpass 필터의 주파수는 1,000hz로 Highpass 필터의 주파수는 20,000hz로 설정하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> lowpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowpass'</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> highpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highpass'</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Q값을 따로 설정해주지 않았는데, 그래도 사실 상관없다. <code class=\"language-text\">BiquadFilterNode</code>의 Q는 기본 값으로 350을 가지고 있고 이 값은 너무 과하지도 부족하지도 않은 적당한 값이기 때문에 그냥 기본 값을 사용할 것이다.<small>(조금 귀찮기도 하다.)</small></p>\n<p>이제 생성한 필터 노드들을 오디오 소스와 연결해주면 1,000hz보다 낮고 20,000hz보다 높은 주파수가 제거된 오디오 샘플을 들어볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>lowpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>highpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>여기까지 읽으신 분들은 슬슬 느끼기 시작했겠지만 사실 HTML5 Audio API가 워낙 잘 만들어져있어서 개발자가 만져야할 부분이 거의 없다. 필자는 <code class=\"language-text\">BiquadFilterNode</code>의 존재를 알기 전에는 “와 이거 필터는 어떻게 만들지…?”라고 고민했었는데 사실 제일 고민할 필요가 없는 놈이었다. <small>(그래서 약간 허무하기도 했다.)</small></p>\n<h2 id=\"eq\" style=\"position:relative;\">EQ<a href=\"#eq\" aria-label=\"eq permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACmUlEQVR42j2RS28TVxiG5xdwB9meGXvseC5nbrbHM2PHcUKJg517CARBAiQBJBBBgqAoMgSQCpuy6YIFrVSpXVa0UretuuAnsOT3PJyZIBav3ve7nO92FOF6RK0WjWYT27ZxHBvLMtF1DU1Tczbrdcm6tI99xyyhlnIul/U8r2oYKK4bEIRNwnYfL4ikDnGEoKRqqJouWaeYab2c64yLqkpJy3wVtHJFDuKQDVarmyj6RIDhxNTdNEdVpFhBSk1y3Z9kwutiiATDS6g6CfVwGje8iAgk94bU/C6m08GwIkpVD8VsXsJN5yUWEMl8DiceYbeH1JuDnOO5TXrL9xGdRazWZWZ+2KY3s4WQb7zOUs5ONJCDJShWMsTtryH6V/Cn12nMbBDP3mBaFli+94qd17+x/8u/HP7+iQfv/mS0PWawvMfU3Dbe1CqBfOf1VnFls3rYRzlae8CLq3v8eH2fJ2uP2BjeYriww+LNZyzcPmT17hGjrYMcK7sv2bz/jqcP/+DN6/94Pv6H8eFfjA/+ZriyRy0r+HHrBR/vvOJg/TFpfx0/6za5gi3XsOJ57CSDXCldzG2RLLE02ufR7gfeHv3P+58+8+vPX1jbGKPZbZT3156wOb+N3pql1hpgRXPyTnOY0TGs9uUc2S0tiey+cW+DQBauNWeJpq7RvbiFK5sWJpoooRFyVqJiBlTtBiX5W067nQfL8tdVK6YoYvSkR6HWwoguobodJpxpbH9AodpAqCmFSkjJjlHKokvBjOWKI8qiw4miyfmqw8mSzSlNcEqVWpPacDlZtDhd8aXtcEbzOVcOZdzmQsnL807rAsVvd/FaCVF3hqDVwXZDiQaO15Ac0JCxdjpJM0q/+zJ2PJnnHWvbD7/ZIV8B/qNr5c4oeIoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"parametric eq\" title=\"\" src=\"/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png\" srcset=\"/static/b972a654c602720bb3a9d335899a0d25/69538/parametric-eq.png 160w,\n/static/b972a654c602720bb3a9d335899a0d25/72799/parametric-eq.png 320w,\n/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png 640w,\n/static/b972a654c602720bb3a9d335899a0d25/d9199/parametric-eq.png 960w,\n/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Equalizer(EQ, 이퀄라이저)는 이름에서도 알 수 있듯이 일종의 주파수 평탄화 작업(Frequancy Equalizing)을 하는 목적으로 사용하는 이펙터이다.</p>\n<p>EQ는 컴프레서와 함께 오디오 믹싱의 기본으로 깔고 들어가는 이펙터인데, 원본 소스에서 쓸데없는 소리를 없애고 다른 소리들과의 조화를 이루도록 하는 용도로 주로 사용한다. EQ는 결국 주파수를 컨트롤하는 이펙터이므로 필터를 사용하여 구현하는데, 이미 우리는 필터를 한번 만들어봤기 때문에 EQ 정도는 뚝딱 만들 수 있다.</p>\n<p>EQ는 크게 파라메트릭 이퀄라이저(Parametric EQ)와 그래픽 이퀄라이저(Graphic EQ) 두 가지 종류로 나누어지는데, 필자는 이 중 그래픽 이퀄라이저를 구현할 예정이다. 참고로 상단의 그림은 파라메트릭 EQ인데, 그냥 이미지가 더 멋있어서 넣었다. 참고로 그래픽 EQ는 이렇게 생겼다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAclaJliP/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEDAgQRExQh/9oACAEBAAEFAud5cDFbs2+uYVZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQMTJBkaH/2gAIAQEABj8Csmi/CTJKt//EABwQAAICAgMAAAAAAAAAAAAAAAABESFRgTGR8f/aAAgBAQABPyHAtjCdh1cXopBOh4Apq5Z//9oADAMBAAIAAwAAABAYz//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAgEBPxBY/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFhsf/aAAgBAQABPxDoHs88NxX40NWnd6o/dakCgQhMggdStGdoYZWb/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graphic eq\" title=\"\" src=\"/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg\" srcset=\"/static/810256ab252fd73a1c3030c32279669f/0913d/graphic-eq.jpg 160w,\n/static/810256ab252fd73a1c3030c32279669f/cb69c/graphic-eq.jpg 320w,\n/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg 640w,\n/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg 836w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>짙은 아날로그의 향수가 풍겨오는 그래픽 EQ의 비주얼</small>\n</center>\n<p>두 개의 EQ 모두 장단점이 존재하는데, 일단 그래픽 EQ의 장점은 파라메트릭 EQ에 비해 조절할 수 있는 주파수 대역의 수가 많고 직관적인 인터페이스를 가지고 있다는 것이다. 여러분은 이 단락의 맨 위에 첨부된 파라메트릭 EQ 이미지를 보고 “엥? 파라메트릭도 나름 직관적인데?”라고 하실 수 있는데, 원래 하드웨어 파라메트릭 EQ는 이렇게 생겼다.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFgEBAQEAAAAAAAAAAAAAAAAABAAC/9oADAMBAAIQAxAAAAHExB6DV//EABgQAQADAQAAAAAAAAAAAAAAAAIAEiEi/9oACAEBAAEFAkeqwnP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAATH/2gAIAQEABj8CrKys/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERUcHw/9oACAEBAAE/IUyts7sl1n//2gAMAwEAAgADAAAAEHwv/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBF//8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQIBAT8Qp//EABoQAAICAwAAAAAAAAAAAAAAAAABETEhQWH/2gAIAQEAAT8QexUtXY1UBmG79H//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hardware parametric eq\" title=\"\" src=\"/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg\" srcset=\"/static/351a26bf4458838f2afdbc6e4cb82da6/0913d/hardware-parametric-eq.jpg 160w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/cb69c/hardware-parametric-eq.jpg 320w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg 640w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg 740w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>까만 것은 노브요. 하얀 것은 숫자로다.</small>\n  <br>\n</center>\n<p>그래서 그래픽 EQ는 보통 빠른 대응이 필요한 공연장같은 곳에서 많이 사용되고 있으며, 짬이 많이 쌓인 시니어 사운드 엔지니어들은 공연장에서 하울링<small>(노래방에서 삐- 하며 가끔 나는 날카로운 소리)</small>이 발생하면 바로 해당 주파수를 캐치해서 그래픽 EQ로 죽여버리는 무서운 스킬을 가지고 있다.</p>\n<p>그래픽 EQ의 단점은 조절할 수 있는 주파수 대역이 정해져 있다는 것과 주파수의 세밀한 조정이 힘들다는 것이다. 반면 파라메트릭 EQ는 그래픽 EQ와 다르게 조절할 수 있는 주파수 대역까지 모두 정해줄 수 있다.</p>\n<p>그러나 한번에 조절할 수 있는 주파수의 개수는 그래픽 EQ에 비해 크게 부족하다. 일반적인 파라메트릭 EQ가 3-5개의 주파수 대역을 조절할 수 있는 반면에 그래픽 EQ는 한번에 조절 가능한 주파수가 40개가 넘어가는 굇수도 존재한다.</p>\n<p>필자 생각에 하드웨어 파라메트릭 EQ의 최대 단점은 바로 직관적이지 않은 인터페이스를 가지고 있다는 것인데, 이 단점은 소프트웨어로 구현하면 UI로 커버할 수 있는 영역이기도 하고 대부분의 녹음실에서는 즉각적인 대응보다는 계속 소리를 들어보면서 이퀄라이징을 할 수 있는 상황이 대부분이기 때문에 많은 소프트웨어 EQ가 주파수 대역 조절에 자유도가 높은 파라메트릭 EQ로 구현된다.</p>\n<p>하지만 필자가 만드는 데모처럼 간단히 구현해보는 상황에서는 저 위에 하드웨어 파라메트릭 EQ와 비슷한 UI로 구현될 것이 뻔하므로 필자는 상대적으로 UI 만들기가 쉬운 그래픽 EQ를 선택했다.<small>(이 말이 잘 이해가 안된다면 EQ 챕터의 가장 위에 첨부한 파라메트릭 EQ를 한번 보고 오자)</small></p>\n<p>위에서 한번 이야기했듯이 EQ는 필터를 사용하여 구현하므로 그렇게 복잡하지 않다. 그럼 이제 한번 간단하게 뚝딱 만들어보도록 하자.</p>\n<h3 id=\"그래픽-eq-구현하기\" style=\"position:relative;\">그래픽 EQ 구현하기<a href=\"#%EA%B7%B8%EB%9E%98%ED%94%BD-eq-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"그래픽 eq 구현하기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>위에서 그래픽 EQ 이미지를 봤다면 알겠지만 이 친구는 조절할 수 있는 주파수 대역의 개수가 정해져 있는 장비이다. 그렇기 때문에 필자도 조절할 수 있는 주파수가 들어있는 배열을 하나 선언하고 이 배열을 이터레이션하면서 필터들을 생성할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> frequencies <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">63</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">125</span><span class=\"token punctuation\">,</span> <span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">315</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1600</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 주의해야할 점이 있다. EQ는 여러 개의 필터를 사용하기 때문에 각 필터를 서로 체이닝해서 연결해주어야한다. 이때 필터의 게인이 1보다 조금이라도 높다면 한번 필터를 통과할 때마다 소리가 조금씩 증폭되어 여러분의 귀에 들어올 때 쯤이면 엄청 큰 소리가 되어 여러분의 고막을 영원히 이별시킬 수도 있다.</p>\n<blockquote>\n<p>🚨 <strong>그렇기 때문에 반드시 필터들의 게인을 0 이하로 설정해주어야 한다.</strong></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> filters <span class=\"token operator\">=</span> frequencies<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">frequency<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> array</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> filterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>frequency<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> array<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'peaking'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> filterNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfilters<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  prev<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>currentNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> currentNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfilters<span class=\"token punctuation\">[</span>filters<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">map</code> 메소드 내부의 <code class=\"language-text\">if</code> 문을 보면 해당 첫번째 필터와 마지막 필터의 타입만 다르게 주고 있는 것을 볼 수 있는데, 이는 Shelf 타입의 필터를 사용하여 첫번째 필터의 주파수보다 낮은 주파수와 마지막 필터의 주파수보다 높은 주파수까지 모두 커버하기 위해서이다. <small>(필터 타입이 잘 기억나지 않는다면 Filter 부분을 다시 보고 오자)</small></p>\n<p>그 후 생성된 필터를 <code class=\"language-text\">reduce</code> 메소드를 통해 모두 체이닝해주고 <code class=\"language-text\">outputNode</code>와도 연결해주었다. 여기까지 작성한 후 <code class=\"language-text\">sourceNode</code>를 재생시켜보면 아무 변화도 없는 것을 알 수 있다.</p>\n<p>당연히 모든 필터의 게인이 <code class=\"language-text\">0</code>이기 때문에 아무런 변화가 없는 것이다. 이때 저 필터들의 값을 <code class=\"language-text\">-1 ~ 1</code>사이의 랜덤한 난수로 할당하면 소리가 조금씩 변하는 것을 들어볼 수도 있다. 필자는 개인적으로 <code class=\"language-text\">input[type=\"range\"]</code> 엘리먼트와 연동하여 필터들의 게인을 조절할 수 있도록 만들고 직접 이것저것 만져보는 것을 추천한다.</p>\n<p>또한 가장 낮은 주파수와 높은 주파수의 필터를 Shelf 타입으로 설정했기 때문에 이 필터들의 게인을 낮추면 Lowpass 필터나 Highpass 필터와 같은 효과도 낼 수 있다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\">마치며<a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>자, 여기까지 대표적으로 많이 사용하는 이펙터들인 컴프레서, 리버브, 딜레이, 필터, EQ를 만들어보았다. 사실 이 5개 외에도 재밌는 여러가지 이펙터가 있지만 분량조절 대실패로 인해 여기까지만 노는 것으로 하겠다.</p>\n<p>필터를 만들 때 한번 이야기 했듯이 HTML5 Audio API는 굉장히 높은 수준의 추상화된 노드를 제공해주기 때문에 사실 개발자가 직접 구현할 것들이 별로 없다. 이는 다르게 말하면 세밀한 수준의 구현이 힘들다는 뜻이기도 하지만 필자가 무슨 오디오 이펙터 회사를 차릴 것도 아니기 때문에 단순 재미로 만들어보기에는 충분한 것 같다.</p>\n<p>이렇게 여러가지 이펙터를 구현해보며 필자도 예전에 사운드 엔지니어로 일할 때의 추억이 새록새록 떠오르기도 했고 또 이펙터에 대해서 새롭게 알게된 내용도 있어서 굉장히 재밌게 작업을 했다. 필자는 포스팅에 작성한 이펙터 외에도 여러가지 이펙터를 계속 구현해볼 예정이므로 관심있는 분들은 <a href=\"https://github.com/evan-moon/simple-waveform-visualizer\" target=\"_blank\" rel=\"nofollow\">필자의 깃허브</a>에서 한번 쓱 둘러보고 PR을 날려도 된다. <small>(좋은 건 나누면 배가 되는 법이다.)</small></p>\n<p>이상으로 JavaScript로 오디오 이펙터를 만들어보자 - 나만의 소리 만들기 포스팅을 마친다.</p>","fields":{"slug":"20190821-javascript-audio-effectors-practice","path":"/2019/08/21/javascript-audio-effectors-practice/","lang":"ko"},"frontmatter":{"title":"[JavaScript 오디오 이펙터 만들기] 오디오 이펙터로 나만의 소리 만들기","subTitle":"Logic Pro, Pro Tools처럼? 웹에서 오디오 이펙트 구현하기","date":"Aug 21, 2019","categories":["프로그래밍","오디오"],"tags":["JavaScript","자바스크립트","Audio","오디오 이펙터","JavaScript Audio API","Logic Pro X","로직프로","Protools","프로툴즈","Cubase","큐베이스","Audio Plugin","Compressor","Delay","Reverb","EQ"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg 320w,\n/static/026a9fe9c894f201ec1e45217221447c/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/fc5c5/thumbnail.webp 320w,\n/static/026a9fe9c894f201ec1e45217221447c/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/2d839/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}},"allMarkdownRemark":{"edges":[{"node":{"id":"32139abc-0c9c-5c23-9579-00629bcca354","tableOfContents":"<ul>\n<li>\n<p><a href=\"#compressor\">Compressor</a></p>\n<ul>\n<li><a href=\"#implementing-compressor\">Implementing Compressor</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reverb\">Reverb</a></p>\n<ul>\n<li><a href=\"#convolution-reverb\">Convolution Reverb</a></li>\n<li><a href=\"#implementing-convolution-reverb\">Implementing Convolution Reverb</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#delay\">Delay</a></p>\n<ul>\n<li><a href=\"#implementing-delay\">Implementing Delay</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#filter\">Filter</a></p>\n<ul>\n<li><a href=\"#implementing-filter\">Implementing Filter</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#eq\">EQ</a></p>\n<ul>\n<li><a href=\"#implementing-graphic-eq\">Implementing Graphic EQ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, following the previous post, I’ll write about actually making audio effectors using the HTML5 Audio API. As already mentioned in the previous post, the Audio API has the basic concept of creating audio flow by connecting multiple nodes, and provides some abstracted nodes needed for making effectors by default, so it’s not that difficult.","html":"<p>In this post, following <a href=\"/2019/08/19/javascript-audio-effectors-gain/\">the previous post</a>, I’ll write about actually making audio effectors using the HTML5 Audio API.</p>\n<p>As already mentioned in the previous post, the Audio API has the basic concept of creating audio flow by connecting multiple nodes, and provides some abstracted nodes needed for making effectors by default, so it’s not that difficult.</p>\n<!-- more -->\n<p>We just need to know what role each effector we want to make plays, what principles it has, and what purposes it’s used for. Since there are extremely many types of effectors used in audio, we can’t make all effectors - I’m thinking of implementing about 5 basic, most commonly used effectors.</p>\n<p>The process of loading audio and creating a source node was already explained in the previous post, so I won’t explain it separately. This post starts explaining directly from implementing effectors. For all effectors, I’ll first briefly explain what that effector does and its principles, then dive straight into implementation without further ado.</p>\n<p>So let’s tear into them one by one.</p>\n<h2 id=\"compressor\" style=\"position:relative;\">Compressor<a href=\"#compressor\" aria-label=\"compressor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9ElEQVR42iVSW0/TABjto4kPxhgjKHc3YGzCkLq262Bu3dbZbm032t3asg46WbuVbXTjMrmIQowiGkVkQwENIAkJCBp98tEfZtXk5OTLSb6ck5wD/Pz1O5mrZStr+sqrlY3t+u5Bfe/wPxr7R41/XN872tk/mlt9U1x8sf62UVl6ltFqrxuHwLvd4yvm4U5HeNAXc9NiIj3Jj6tiVhNlLZVRkxklNa4mpZwwoTrwlNXNEXF5CBttGfAKag34cHDaMejrx+JunJYfTiratCRPRrhkUswU9RmtXClVZrVy1RBBb9Tq5cmUCuGpNrsvV3kK7BycNXWDvSiNU6Mb62t7ezuf9j9+2Nk+PPz8/fv5t4uzi/PT4y8H689XQQ9l8/K0kEdI8aYFkctLQOPzSQsY7BthXVhQ17WVJ8sbr9bfb29t17febr4xjq2tTUOp6CW7i7zjTcmFqisktkKUrD8GGp+OW9HRPjfnQN1ZWcyr2SlNqepFfVqbntbm5/RqpThTLWcn0jbYb/Mm6MS4IxBvG2ZlfRmo7x/fginbfa4XxKyQAZ8N8Rlshfx3nIF+J27AjgYNWNCQ4WGCaQvKtLsiE0bsv89Q2OqOmuDwg4QayZS6oEgglotkyj0uluQLjFTq98SNqH3DozY3hxBjQ/54q5MZLy0C73ePmh2kZYTpAHElX1yo1dqHCKVQWlx4ZELoYrk6PzsP+mKJdK4XoSwoPVWaQYlEMxTOFBcAYwBNdqwXDXeBuP0+A2LR2xAx6IlCfs6oAMHjUCAG+lijbTNMmiDC4WWsKNlsx6TC3F/nARcx5GE67vohPO4kUp1g0GAPLXXDIZQU3LTUg4QsCGmGCDNEDod4myt03QxJ+Rng5eZHLEgNOAOXWgYxgiWj/OX2ex6CpTnxign2kjGKFW5YXBYYv2aGr3cjQnqiB8SAq2Y2rQInX3/4aSEiKlRykuFzUVGleSUq5rnMlLEHVipwkmYojKBQKSUi5iNCjh3LYxS/tPb6DwF8FVn0mZKkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compressor\" title=\"\" src=\"/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png\" srcset=\"/static/a32ed4690c9c17197a82088952b74f1e/69538/compressor.png 160w,\n/static/a32ed4690c9c17197a82088952b74f1e/72799/compressor.png 320w,\n/static/a32ed4690c9c17197a82088952b74f1e/6af66/compressor.png 640w,\n/static/a32ed4690c9c17197a82088952b74f1e/d9199/compressor.png 960w,\n/static/a32ed4690c9c17197a82088952b74f1e/b12f7/compressor.png 1020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>A compressor is an effector that acts like a compressor, pressing down sound when it gets above a certain size to make it small again. Effectors that adjust sound size like this are called dynamic effectors.</p>\n<p>When using audio sources, many start mixing with a compressor applied by default to defend against clipping that occurs when audio signals suddenly get above a certain size. But one question might arise here:</p>\n<blockquote>\n<p>Wait, if you’re just preventing clipping, can’t you just reduce the gain?</p>\n</blockquote>\n<p>Right. Actually, reducing gain can defend against clipping to some degree. But since music generally has dynamics, recklessly lowering gain creates the sad situation where quiet sounds don’t get inputted at all.</p>\n<p>For example, imagine when you went to karaoke. Generally when singing ballads, you sing quietly with a calm feeling in the intro, then in the chorus the air pressure passing through vocal cords increases to hit high notes, making volume louder.</p>\n<p>If you approach by recklessly lowering gain to record, you inevitably must match gain to the loudest sound - the belting in the chorus - and then the calm intro parts will barely get inputted.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAByXSl0ows/8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABESESMTP/2gAIAQEAAQUCiiDFPTyi5lv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRIf/aAAgBAgEBPwFy0s//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQECQRD/2gAIAQEABj8CeEaxCKc//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIVExQZHB/9oACAEBAAE/IbOo1cewacGoFEZILtjU91/IlaqrP//aAAwDAQACAAMAAAAQyC//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QAyf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQIBAT8QszL/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMVFh/9oACAEBAAE/EB/qBR1cZ8PIvmjiSJ5ihS2q6vsxBwCr4zkTAq1d/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"buzz\" title=\"\" src=\"/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg\" srcset=\"/static/e94b2e7a65da940d05a7df7a850aac9d/0913d/buzz.jpg 160w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/cb69c/buzz.jpg 320w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/c08c5/buzz.jpg 640w,\n/static/e94b2e7a65da940d05a7df7a850aac9d/80e3c/buzz.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Varies slightly by singing technique, but this volume difference is bigger than you think</small>\n</center>\n<p>Here’s when you use a compressor to raise input gain to an appropriate level and compress sounds that are too loud, narrowing the gap between the intro’s quiet sounds and chorus’s loud sounds to match overall sound size.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVR42l1Q25LDIAjN///ePna6bdIYN3c1mosILCbdfahzRoHDAaQAJEEi/gOdeLvIbL2vytd2HCgukg7pZuHbQUQqdmTBhhSAViAxVsB8p+yuxKqqx2fdKL0zr0Qm8RhpBAbiwjlrjTl2ofJZnB36Psbjcvc1TGUpxnC7wevFtSK5tWalGKCw1oUQtNZt207T5JyLMfZ9z0SiCd47Y3JRY9w0iYAi7NZBCBIsHo9Ho1T5LJumSUn+mzVz1x0nPTY6HnkKSGkYBjGkujGzZGbxNd7V53yzsTo3P/O0/f2eEC/KL75rW7s40QGy7K/wkFf1gQWwrtRUKqW7jdhHzHFZYcR+x68ZBPNBhTT6AJ7NF+9/2nY7F/mm6D3af+YvnCrO+RaF5TIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"audio compression\" title=\"\" src=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png\" srcset=\"/static/d9f4ff329a6c4d949f007ffc87a38afd/69538/audio-compression.png 160w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/72799/audio-compression.png 320w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/6af66/audio-compression.png 640w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/d9199/audio-compression.png 960w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/21b4d/audio-compression.png 1280w,\n/static/d9f4ff329a6c4d949f007ffc87a38afd/fb4e7/audio-compression.png 1519w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Compress signals exceeding the threshold to make them fall below it</small>\n</center>\n<p>Also, I said compressors compress sound, but what compressing sound means might not be clear. A representative example is the clean “thud!”, “smack!” drum sounds we hear in typical music sources - that’s compressed sound. <small>(These punchy sounds are usually called damping.)</small></p>\n<p>Generally when recording drums, the characteristic reverb of the drum body resonating remains, but compressing this sound with a compressor can create the clean drum sound we typically hear.</p>\n<p>Beyond that, using compressors on bass can give a solid feeling, pull distant sounds closer or vice versa - just using compressors well can give sound tremendously many feelings. That’s why the teacher who taught me sound engineering emphasized the compressor’s importance a lot.</p>\n<p>Compressors are designed to let you set things like when to start compressing signals and at what speed to compress using several values. The <code class=\"language-text\">DynamicsCompressorNode</code> provided by HTML5 Audio API provides these same values, so we need to know what these values mean to use this node properly.</p>\n<h4 id=\"threshold\" style=\"position:relative;\">Threshold<a href=\"#threshold\" aria-label=\"threshold permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Threshold means the threshold that determines from what size to compress sound. Uses dB (decibel) as the unit.</p>\n<h4 id=\"ratio\" style=\"position:relative;\">Ratio<a href=\"#ratio\" aria-label=\"ratio permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Ratio is the value determining what proportion sound exceeding the threshold will decrease by. Since this value means the <code class=\"language-text\">input:output</code> ratio, it’s generally talked about as ratios like <code class=\"language-text\">2:1</code>, <code class=\"language-text\">5:1</code>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 292px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA51AAAOdQG5Y1EyAAAB0ElEQVR42pWT20/CMBjF+f+fNT56JWHGxOALMQa5BE3gSUPETKeBMW7bWMsu7MamZyuOuuCFL1nSNv3tnJ5+LXzsVjHKti3fDzAp7ISGYTgej02Ter6/GwxyMBjYts0MJLBpWf8hV6tVjkzgvf2DmarxS1tJWZYdx8ltK5wcn5YE4ReYafJkEIRYTOCr8hWhNI6in84JzcwtpXQ6nRqGYaf/KtRqdUoXcRzlLiTTXC6XGFuWhZyBBUGwWCyWrpvA5cuyQQjvGQ6jKILmcDh0Xdf3/dlsNplMIIuVfn+gaepa+ejwyCCUh2ESsKqq8/kcu5/SEkWx2+3K8pAQouuq43oJfHd3n9qOM7eAO51OvV5vNBrtdluSJCizwLKK0oySJoECDzebzVKpBAxR4ZA4oWmaEMQ2XdcpIZqq6sY8DyMh+IThnAir+KvYdAPz2SIktvXPtlvDfN/CJK/DV6a5gTVNG41Gbnp1LLC87PfZ6stXAvd6PeTpeR4w2EYqGDhcBTAWJg/4RRRbrdbmVeFDG2AHeogxCIyN2RS9cXN9XalUqtVbQRDOzy+KZ0VcwPb3DDJnW3p9fe49K4oivb0ryujh4RGxrmE+kqw9c4tb0/4EM4F9Se9NBhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ratio\" title=\"\" src=\"/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png\" srcset=\"/static/4928391f2babd8b6166e59f0d6730a60/69538/ratio.png 160w,\n/static/4928391f2babd8b6166e59f0d6730a60/2e9f9/ratio.png 292w\" sizes=\"(max-width: 292px) 100vw, 292px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>But the HTML5 Audio API property has slightly different units. The official docs say “dB value needed to change 1dB of output value” - just think assigning <code class=\"language-text\">12</code> to this property means compression ratio is <code class=\"language-text\">12:1</code>.</p>\n<p>Usually saying you applied compression moderately means about <code class=\"language-text\">4:1</code> ratio, so the default value of <code class=\"language-text\">12:1</code> for this property can be called quite hard compression.</p>\n<h4 id=\"attack\" style=\"position:relative;\">Attack<a href=\"#attack\" aria-label=\"attack permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Attack is the value determining how fast to compress sound. Think of it as determining how fast to hit and press down values exceeding the threshold.</p>\n<p>Many people mistakenly think the attack time set here is “when attack starts,” but actually attack itself starts immediately when signal size exceeds threshold. The attack time we set is “time taken to reach the ratio set by Ratio.”</p>\n<p>The unit usually uses milliseconds, but Audio API uses seconds.</p>\n<h4 id=\"release\" style=\"position:relative;\">Release<a href=\"#release\" aria-label=\"release permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>While attack was the speed of pressing sound, release is the value determining how fast to release compressed sound. The release value aims for time to reach the standard volume of 10dB, not the sound’s original size.</p>\n<p>Like attack, release usually uses milliseconds as the unit but Audio API uses seconds.</p>\n<h4 id=\"knee\" style=\"position:relative;\">Knee<a href=\"#knee\" aria-label=\"knee permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Knee is actually a feature absent in most hardware compressors but quite often seen in software compressors. This value determines how naturally the compressor will be applied.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAA7ElEQVR42mWR2w6DIBBE+f9/1KiJd4zxUlFQ2yPbEhvnQWFmZ9gF5Zw7z/N9A9txHJdlYb3v+3EcT9UYw1r1fW+tFVaqt22DYcE21IlK0LquxoMaVVWVmIPGdhgGrTVM0zRBpUf4l4f2uMx5nrdtS1gcx0mSpGlaliU2DHVdo3ZdRwtRFMHD0CwMlstMn6Ry5uGBjTp4MXMy8xMxzzMMWyJQOUzhcR7vf8iQ8HimaXpeKscoAtDcDwTzhZQ4FszG5YkkgJQnUPzsDUxCqzQmZlS5fAET0TAFX7P0UBRF7pFl2f1tBGRJASpjBv4DXHMHixSVCw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hard soft compression\" title=\"\" src=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png\" srcset=\"/static/aaa2aa40a71cd57ae933e06492b31b1f/69538/hard-soft-compression.png 160w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/72799/hard-soft-compression.png 320w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/6af66/hard-soft-compression.png 640w,\n/static/aaa2aa40a71cd57ae933e06492b31b1f/68e9c/hard-soft-compression.png 654w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>The bend degree in the graph above shows how gradually the compressor is applied. Compression applied quickly with a snap is called hard, while compression applied slowly is called soft.</p>\n<h3 id=\"implementing-compressor\" style=\"position:relative;\">Implementing Compressor<a href=\"#implementing-compressor\" aria-label=\"implementing compressor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Actually as mentioned above, since HTML5 Audio API inherently provides <code class=\"language-text\">DynamicsCompressorNode</code>, we don’t need to directly implement the sound compression algorithm. We just need to create the node and connect it.</p>\n<p>This time, instead of extracting audio buffers from user-uploaded audio files to create source nodes, I’ll proceed by extracting from <code class=\"language-text\">&lt;audio></code> tags to create source nodes. <small>(This makes code much simpler)</small> The source node created now will keep being used when implementing other effectors too.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> audioContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>AudioContext <span class=\"token operator\">||</span> webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> audioDOM <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-audio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sourceNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createMediaElementSource</span><span class=\"token punctuation\">(</span>audioDOM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> threshold <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> attack <span class=\"token operator\">=</span> <span class=\"token number\">0.003</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> release <span class=\"token operator\">=</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ratio <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> knee <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> compressorNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicsCompressor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>threshold<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>threshold<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>attack<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>attack<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>release<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>ratio<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>ratio<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span>knee<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>knee<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> inputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>compressorNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncompressorNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I created audio source flow in the order source > gain > compressor > gain - this is actually personal preference. But since most compressors generally have both input gain and output gain, I implemented the same way.</p>\n<p>Playing the source node after this lets you hear compressed sound, but since non-sound-engineers struggle to feel subtle degrees of compression, I recommend changing the above values a bit extremely.</p>\n<h2 id=\"reverb\" style=\"position:relative;\">Reverb<a href=\"#reverb\" aria-label=\"reverb permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABgNoc2Cyf/8QAHBAAAQQDAQAAAAAAAAAAAAAAAgABAxESITEy/9oACAEBAAEFAnjoY/ZdN3wDStf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAARECBB/9oACAEBAAY/AljKf//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUWGB/9oACAEBAAE/ITe9ryZx1KHMfCKQuVFayKuf/9oADAMBAAIAAwAAABCrz//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAwEBPxBUf//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxBwf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExUXFhgZH/2gAIAQEAAT8QW++xj9uVzEbtvEvD3EXuMJVpG0jSX4xGWaXon//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb\" title=\"\" src=\"/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg\" srcset=\"/static/168b553805699d40f75aa40227c69521/0913d/reverb.jpg 160w,\n/static/168b553805699d40f75aa40227c69521/cb69c/reverb.jpg 320w,\n/static/168b553805699d40f75aa40227c69521/c08c5/reverb.jpg 640w,\n/static/168b553805699d40f75aa40227c69521/e3f06/reverb.jpg 643w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Reverb is a spatial effector that gives sound a sense of space through resonance. What does giving a sense of space through resonance mean?</p>\n<p>Actually, we can roughly determine by hearing sound whether the current space is wide or narrow, whether this space is made of rough walls or smooth space like glass. The difference is so subtle that untrained people struggle to notice.</p>\n<p>How is this possible? Because of reverb from sound reflection. First, the principle of detecting space size by hearing sound is simple. After I shout “wah!” in a room, detect how long until the first reflected sound is heard.</p>\n<p>But since this first reflected sound returns to me at extremely fast millisecond speeds, it’s not about counting 1 second, 2 seconds - you just feel it. This reflected sound is called early reflection.</p>\n<p>But it doesn’t end there. Even after sound reflects once and reaches your ears, reflection will continue. These reverberations will bounce all around the space and reflect back to your ears.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7zAAAO8wEcU5k6AAABwUlEQVR42l2RWW/TQBSF80/5JTyUB5SqvIDECxSJCipBW+jqSlWhJK5jgSjQdImdOIuz2HGc2p7FM7Znxh6ciE0cnbd7vivdeypMsNJC5kIWoshFIX5ZikIWeZFnPMtYxssYz1KWMc7+ZCpBFGCCBQKp7zEEFluWg5IBENxcX6ulNP1wb79eq6t11R7aUkqe8wU8Gg8xAjwhnGe54IXMly4iEFmd7slpXdlVdl5uP37y/O274zdbh4bZ/geejDCMshhSwRKRYUZKJyKllDqO22joTx+tvVdOjmqfVe3rp5o282d/YddzCYIJAYjROQmn8dwjQSySMAx73Z7RalVXqz8MY2j3e5blz2fF4jW/b8Y0TmmcxABxMsF+HzgTNLujIKExpQhhbBomAABiFEHABOe5YOV5+RKOE5IlJCUQcmqEg4Z7pbs3Gy3l2Ljtu8k0oCQV8n8VcllEBcaIIBDDIEhRc9apjb6dj5sPvjy793pj5UWvutl5+Kpzf91c3bTWj+x9zf144Z1fzZvdkKS0UvYRRQGEUYiBG3nDO2ccTL87t7rVvmz7F4anXboH2mjrw2DnbLCn2oo+3j41d8+MCKGfxXPjjIB+Rd8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reflection\" title=\"\" src=\"/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png\" srcset=\"/static/3457634accb0a45c9bd6199020317de9/69538/reflection.png 160w,\n/static/3457634accb0a45c9bd6199020317de9/72799/reflection.png 320w,\n/static/3457634accb0a45c9bd6199020317de9/6af66/reflection.png 640w,\n/static/3457634accb0a45c9bd6199020317de9/d9199/reflection.png 960w,\n/static/3457634accb0a45c9bd6199020317de9/2bef9/reflection.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Green lines are early reflections, blue lines bouncing everywhere are reverb</small>\n</center>\n<p>Characteristics like how long this reverb is heard, how clearly it’s heard determine the room’s material. Just hearing the explanation makes detecting space by hearing sound seem impossible, but the music you normally hear already contains spatial design applying this principle.</p>\n<p>Since reverb literally just needs to create reverb, some hardware reverbs use a method of putting materials like springs or metal plates inside equipment, playing audio to amplify reverb generated as materials vibrate. In other words, opening it up reveals just a spring or metal plate inside. <small>(Creating good sound with such simple structure is scarier…)</small></p>\n<p>However, implementing reverb in software is slightly different. Computers can’t generate natural analog signals like spring or metal plate vibrations, so they must implement through direct calculation. Software reverb divides into two main types: Convolution Reverb and Algorithm Reverb.</p>\n<p>But since implementing both reverbs in this post would make it too long, I’ll reluctantly focus on convolution reverb. <small>(Algorithm reverb alone is one post’s worth)</small></p>\n<h3 id=\"convolution-reverb\" style=\"position:relative;\">Convolution Reverb<a href=\"#convolution-reverb\" aria-label=\"convolution reverb permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Convolution reverb is a method of recording actual space reverb then synthesizing the reverb audio source and original audio source to add actual space resonance to the original audio source.</p>\n<p>Briefly explaining a representative method of recording actual space reverb: play pure sine wave sounds continuously from low frequency to high frequency in the space you want to record, then record the resulting reverb.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAa01zxrFI74LLA//xAAZEAEBAAMBAAAAAAAAAAAAAAABAAIQISL/2gAIAQEAAQUCnWXWYCDyA3//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAZEAABBQAAAAAAAAAAAAAAAAAAARAgIYH/2gAIAQEABj8CljWh/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERQRAhMVFh/9oACAEBAAE/IX1qil28HIcixKBGGYJahs//2gAMAwEAAgADAAAAELwvPP/EABURAQEAAAAAAAAAAAAAAAAAAAEg/9oACAEDAQE/ECP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMWFB/9oACAEBAAE/EA3fpLnCDS59gENtqLQhtsAPZm2lLnkO2loT5U1kCXU//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ir recording\" title=\"\" src=\"/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg\" srcset=\"/static/139d22412a234cb2ac3a54c80f1ef282/0913d/ir-recording.jpg 160w,\n/static/139d22412a234cb2ac3a54c80f1ef282/cb69c/ir-recording.jpg 320w,\n/static/139d22412a234cb2ac3a54c80f1ef282/c08c5/ir-recording.jpg 640w,\n/static/139d22412a234cb2ac3a54c80f1ef282/6a068/ir-recording.jpg 960w,\n/static/139d22412a234cb2ac3a54c80f1ef282/eea4a/ir-recording.jpg 1280w,\n/static/139d22412a234cb2ac3a54c80f1ef282/46590/ir-recording.jpg 2561w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Recording space IR - Source: http://www.alanjshan.com/impulse-response-capture/</small>\n</center>\n<p>Since this reverb signal is called Impulse Response (IR), convolution reverb is also called IR reverb. The recorded IR gets merged to the original source through an operation called convolution.</p>\n<p>If we start approaching this convolution concept mathematically, it gets headache-inducing and lengthens the post, so defining simply: just mixing different information together.</p>\n<p>Since many readers of this post are probably developers, using machine learning more familiar to us to explain convolution, we could use <a href=\"https://en.wikipedia.org/wiki/Convolutional_neural_network\" target=\"_blank\" rel=\"nofollow\">CNN (Convolutional Neural Network)</a> as an example learning algorithm.</p>\n<p>In CNN too, when sending first layer images to the second layer, it mixes matrix-implemented kernels <small>(or filters)</small> and images to generate feature maps then sends to the next layer. Here you can think the first layer image and kernel information mixed.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVR42mN4/Pjx8+cvHj1+8uD+/Z8/f/7////7929Pnz598/r182fPHj58/OXrN6Dgv79/37179/btu8+fPn358uXTp89AQYZbt249evTkzt37ly5d+vnrF1Do16+ft2/fOnr06JEjRy9euvLt+4//IPDvzp07J06cvHrlyvUbNy5cvPz37z+Gvdt37t68+eCO7avmL1g0cwZI1b9/P3/8ePz4ycNHj758/fr371+g4O07d4KDg8PCQkNCgHSIn6/f/fv3GTbO6VvYVpgX5VcY5jy9o/7f//+PHj18//793z9/gOSvX79ev3nz6tWrM2fO8PDwcHJwcnFyiouK8nJzX716lcHDSKsh2ac81rMjw/fY5iU/f/4CevjDhw9///4B6gFqfvPmDdC3586d4+Hm4eXllZSQUFJU5OPlO3/+PIOVkpi7gXJuoG1Dovv+NXN//Pz54sWLt2/fAh0P1Pb792+gTqApFy9cEBYW5uXhFRQUlJOV4eHiAhrHUJ/ol+iib6vA56cnvnV+5w+wzcDwBGoD2g8k34PBqVOnGGCAhYWFjYUFpPn0vq0nd29cOWfS8hn9V0/shQTYfyQACTCgiXV1dU1NTS3NzS0tLRP6+1++fAkAiH1QfGGJI9IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"convolution\" title=\"\" src=\"/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png\" srcset=\"/static/380a88c34eac31f9a0af42f7f4de4002/69538/convolution.png 160w,\n/static/380a88c34eac31f9a0af42f7f4de4002/72799/convolution.png 320w,\n/static/380a88c34eac31f9a0af42f7f4de4002/0b533/convolution.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Mix original image and kernel to create new information - the feature map</small>\n</center>\n<p>Audio convolution reverb is the same. In this case, the information to mix just becomes the original source and IR.</p>\n<p>Since convolution is a process multiplying the frequency spectrums of two audio sources - original source and IR - frequencies overlapping between the two sources get emphasized while non-overlapping frequencies decay. When overlapping frequencies between original source and IR get emphasized like this, the original source takes on the IR’s sound quality characteristics - that’s exactly convolution reverb’s principle.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAFxGAABcRgEUlENBAAACIElEQVR42m1Ta2OjIBDM//9x109tEpPGmPSiBBVUQB4CN0guvfa6vkbYWWaXZRNj9N7jHVbLv3nkCZZleU5lT4wAbPBhjBlj5nmWUmptp2kSQjpnx3EEdM5xxvgw3+m43+/qur5er33fJ7LWGk5rVMT2jAXciI7FjAlZEBaQjJPq8uvlZbfbEUKEEIlsrc1o1RUB2zaBxYX6FtbRoFRY3IInJ4JwkJnIUAW1iYxHCcn0JCOmgo93GrVJgRoSVXL+NOj9lI14i3MTGbuy15RpOtiuZxcyfBDT3vvqzq93TRvWMEI0Y7NSab0NSsU5x/rWGG2sc54PfdPdftfX90NR7PdVeS72u/djsXt7O5/P2+3+dCqHYXjknGU/jWnONU9ph8V6G3+yh+xnztkWv0xmwu2Dx5tKimLgMov5gZy24S8ZHtIKaaXzbrKjcEI5NS+z9poZBmC8ccFBjsw5QzYSQOapcmrsBq6wD0rdu/7jRi5VtT1si1NxuVxO1el4Pr4Wr4fyMInpUbB/93ngkbHUMkr5rjPjyAc+KCnhM6sZJcWvmMRjn58FW8lBytB16Db0c6zrR4YIvjb1fzl/JUdAuTYJvCkFSKNNE581DWvXPVZGDBwM1Bz6+163rcUEAKU4IZZz23WWEEWpaVvTNBIOjGmRc0ajKqVQ89Qn1oTgQc6gLMu6vq29jbNl4QLO2ooWlET+tvtZfD60KJL61tNf7Q/9w9fqrhB2GAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"signal convolution\" title=\"\" src=\"/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png\" srcset=\"/static/c055ddb7e8755ffb1cfef849a60b862f/69538/signal-convolution.png 160w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/72799/signal-convolution.png 320w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/6af66/signal-convolution.png 640w,\n/static/c055ddb7e8755ffb1cfef849a60b862f/5a190/signal-convolution.png 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Original signal and recorded IR signal after convolution operation</small>\n</center>\n<p>Actually since HTML5 Audio API provides <code class=\"language-text\">ConvolverNode</code> that performs convolution operations instead, you can make convolution reverb without knowing what convolution is.</p>\n<p>However, you need to at least know this effector has the principle of multiplying two signal information to create new signals to understand why I write such code, so I’m giving rough explanation.</p>\n<p>Anyway, having grasped convolution reverb’s rough principles, let’s make it now.</p>\n<h3 id=\"implementing-convolution-reverb\" style=\"position:relative;\">Implementing Convolution Reverb<a href=\"#implementing-convolution-reverb\" aria-label=\"implementing convolution reverb permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>First, HTML5 Audio API doesn’t provide something like <code class=\"language-text\">ReverbNode</code>. But as explained above, since it provides <code class=\"language-text\">ConvolverNode</code> supporting convolution operations, we just need to directly create the reverb source IR (Impulse Response).</p>\n<p>And since reverb is generally made to let you mix original source and reverb source according to ratio using <code class=\"language-text\">wet</code> and <code class=\"language-text\">dry</code> values, I’ll write code the same way.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> decay <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Explaining the 3 variables to use for reverb: <code class=\"language-text\">mix</code> means wet/dry ratio, <code class=\"language-text\">time</code> means reverb length, <code class=\"language-text\">decay</code> means reverb decrease speed. Now let’s directly generate IR using these values.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">generateImpulseResponse</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sampleRate <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span>sampleRate<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> sampleRate <span class=\"token operator\">*</span> time<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> impulse <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> sampleRate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> leftImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightImpulse <span class=\"token operator\">=</span> impulse<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    leftImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> decay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rightImpulse<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> i <span class=\"token operator\">/</span> length<span class=\"token punctuation\">,</span> decay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> impulse<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looks complicated but tearing it apart reveals nothing much. <code class=\"language-text\">sampleRate</code> means the sample rate, i.e. sound quality, of the <code class=\"language-text\">IR</code> we want to generate, and <code class=\"language-text\">length</code> means <code class=\"language-text\">sampleRate * time</code>, i.e. buffer length for expressing reverb of <code class=\"language-text\">time</code> seconds.</p>\n<p>Then just create one buffer node, generate random values from <code class=\"language-text\">-1 ~ 1</code>, raise <code class=\"language-text\">1 - i / length</code> to the <code class=\"language-text\">decay</code> power and multiply by the just-generated random number. This makes values smaller as <code class=\"language-text\">i</code> increases, and smaller faster as <code class=\"language-text\">decay</code> increases. This expresses reverb decay. After that, pour these samples into the just-made buffer node and you’re done.</p>\n<p>Expressing the IR buffer generated like this as a waveform would have roughly the following shape:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAABAgAD/9oADAMBAAIQAxAAAAHVfnbp52DMWgJB3//EABoQAAICAwAAAAAAAAAAAAAAAAEDEBECEiD/2gAIAQEAAQUCxlRZY2gChz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAQUAAAAAAAAAAAAAAAABEQAQMDFBof/aAAgBAQAGPwKpQYe5jtj/xAAdEAACAgEFAAAAAAAAAAAAAAAAAREhURAxcbHw/9oACAEBAAE/IWUV0e2GQ9ZmRFwHJEJKi8D1Z//aAAwDAQACAAMAAAAQAx+w/8QAFxEBAQEBAAAAAAAAAAAAAAAAARARYf/aAAgBAwEBPxBRm8n/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREh/9oACAECAQE/ENgo/8QAIBABAAICAgEFAAAAAAAAAAAAAQARITFBURBhcYGRsf/aAAgBAQABPxBBVvgG4C8p7iCqvPxMg4bUGeGWh6mWn5FYsNdxiWhu9svq+5a8lQ0eN5//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decay\" title=\"\" src=\"/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg\" srcset=\"/static/2e23d03eabacbb33bc757852ef9e0434/0913d/decay.jpg 160w,\n/static/2e23d03eabacbb33bc757852ef9e0434/cb69c/decay.jpg 320w,\n/static/2e23d03eabacbb33bc757852ef9e0434/c08c5/decay.jpg 640w,\n/static/2e23d03eabacbb33bc757852ef9e0434/212bf/decay.jpg 768w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Ta-da, we simply generated IR like this. Now all that’s left is using <code class=\"language-text\">ConvolverNode</code> to synthesize the original source and this IR. Let’s first create the nodes needed to make the reverb effector’s audio flow.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> reverbNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createConvolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As explained above, typical reverb effectors provide the function of mixing and outputting original source and reverb-applied source using wet/dry values. Here the dry source must connect directly to <code class=\"language-text\">outputNode</code> for output without going through the reverb effector, while the wet source must go through our made <code class=\"language-text\">reverbNode</code> once and output to <code class=\"language-text\">outputNode</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Connect dry source node</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Generate IR and input to Convolver's audio buffer</span>\nreverbNode<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> <span class=\"token function\">generateImpulseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Connect wet source node</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>reverbNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nreverbNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>We simply implemented convolution reverb like this. Actually what most affects convolution reverb quality is IR quality - since we made IR with roughly made sample audio, this reverb’s quality can’t be good. But playing and listening to the source node, you can amazingly hear that sound gained a sense of space.</p>\n<p>If there’s a chance, I’ll post algorithm reverb implementation next time. Algorithm reverb is reverb implemented 100% with algorithm only, unlike convolution reverb which records and uses actual space reverb. So it feels slightly artificial but can give a feeling different from convolution reverb, so sound engineers understand these two reverbs’ characteristics and use them appropriately.</p>\n<p>So for developers, algorithm reverb might actually be more understandable than convolution reverb, but unlike convolution reverb where you just need one <code class=\"language-text\">ConvolverNode</code> and a roughly made IR and the rest calculates automatically, algorithm reverb must truly be made from the ground up. So unfortunately I’ll post algorithm reverb next time.</p>\n<p>If you’re curious about algorithm reverb implementation, you can check <a href=\"https://github.com/evan-moon/simple-waveform-visualizer/blob/master/src/lib/effects/AlgorithmReverb.js\" target=\"_blank\" rel=\"nofollow\">my GitHub repository</a>.</p>\n<h2 id=\"delay\" style=\"position:relative;\">Delay<a href=\"#delay\" aria-label=\"delay permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHPUhaAP//EABcQAAMBAAAAAAAAAAAAAAAAAAECERD/2gAIAQEAAQUCLYZf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQAQETFBUaH/2gAIAQEABj8CEnivOm//xAAZEAEBAQADAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hSAWVcs4h9Y6zrf/aAAwDAQACAAMAAAAQdC//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QQ22//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxCMU//EABkQAAIDAQAAAAAAAAAAAAAAAAEhABFRMf/aAAgBAQABPxBUKIoScjwgC2cEcAZd5P/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay\" title=\"\" src=\"/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg\" srcset=\"/static/6c84397372fb970c1df011b86b5edfef/0913d/delay.jpg 160w,\n/static/6c84397372fb970c1df011b86b5edfef/cb69c/delay.jpg 320w,\n/static/6c84397372fb970c1df011b86b5edfef/c08c5/delay.jpg 640w,\n/static/6c84397372fb970c1df011b86b5edfef/29177/delay.jpg 749w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Delay is the same spatial effector as reverb and can be thought similar since it repeats sound, but its principles and uses differ greatly.</p>\n<p>First, delay is simply an effect repeating sound, but reverb mimics complex reflected sounds within space, so using delay alone makes expressing natural spatial feeling like reverb difficult.</p>\n<p>The reverb effector we just made aims for realistic space expression so uses convolution or complex algorithms, but delay just needs to briefly delay the original source then play it again after <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> seconds while gradually making sound quieter.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42p1SPW8aQRDlH7uMlCJKE6VwOnf5AenduCIgwUl2QUMTO0LojiMgA/e9s7v3/TxzYAFx7EheaW53b3fevvdmemmawliL1XKJ2f09qqrCO0Yjn7Zt/V5RFEiVAsoSTZJ2p5o0wjD6ZyYnIcsyJEnSzXVdnwOWDJQRgamh5QsyrGmgVLNf5wWSTB2pNA2GwyEGgwFGoxGWrOwloDA8A2yhDhgFO6DsOUNRled5Z88LhvIzjCIY9pK2W+RlgTg22O00cquZncaO98ZoVqIRM1trZX8MrXUjjwRB4PcEWV4jxYlbwsODi8UiwCawnKwRxOwnz0prpBy0B+jiFFA8jeN4D3g6RMJBxvuqbLllxOi6ruB5Lpv8B6vVCuv1mn1UkLZKuPqyfm4p8VFyTuIIKBdJE3JVwv21ZEkJt0zcAYkV8qCErA95/+vDkkHY6LTCj+8Zgq79Wj7Eq33oOA4mkwmm0ynG47Gsn1/ithFAZliZCt8+Z/jyFbi9FUmvG7bZbDCfz+G6LmazGRdxcQQUhkorlFTi8lOKDx+Bi4sWV1fA3R1YOt4EP5XMlvg9rihxuSnchjQepNT/aanft3RzY+j62pDjGHp8LIgL092TiKLo78g8z6t83//9BM+R5WNJLGHCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reverb vs delay\" title=\"\" src=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png\" srcset=\"/static/ecca82a37017f0e66ca8ff5f4c42f25d/69538/reverb_vs_delay.png 160w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/72799/reverb_vs_delay.png 320w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/6af66/reverb_vs_delay.png 640w,\n/static/ecca82a37017f0e66ca8ff5f4c42f25d/1f083/reverb_vs_delay.png 660w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Difference between echo (delay) and reverb</small>\n</center>\n<p>Since delay has such simple principles, making it isn’t that difficult either.</p>\n<h3 id=\"implementing-delay\" style=\"position:relative;\">Implementing Delay<a href=\"#implementing-delay\" aria-label=\"implementing delay permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>HTML5’s Audio API provides <code class=\"language-text\">DelayNode</code> that delays and re-outputs input signals, so we can simply implement delay effectors using this node.</p>\n<p>However, simply using <code class=\"language-text\">DelayNode</code> alone can only cause one delay, so we’ll implement delay using one trick. Let’s first declare variables needed for delay.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedback <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Like reverb, most delay effectors also have the function of mixing and outputting original source and delayed source using wet/dry values, so I’ll implement the same way. And the <code class=\"language-text\">feedback</code> variable is the volume to decrease when the original source delays once, and the <code class=\"language-text\">time</code> variable means the echo interval. Having declared all variables to use for delay, now it’s time to make nodes.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> wetGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dryGainNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> feedbackNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> delayNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">wetGainNode</code> and <code class=\"language-text\">dryGainNode</code> are the same as reverb so let’s pass over them, and focus on the new nodes <code class=\"language-text\">feedbackNode</code> and <code class=\"language-text\">delayNode</code>. These two nodes are essentially the delay effector’s core. First, let’s look once more at what the delay effector does.</p>\n<blockquote>\n<p>Input -> Delay -> Decreased signal output -> Input -> Delay -> Decreased signal output…</p>\n</blockquote>\n<p>This is all the delay effector does. It repeatedly gradually delays signals and outputs decreased signals again. So I’ll implement this effector by connecting <code class=\"language-text\">delayNode</code> and <code class=\"language-text\">feedbackNode</code> to each other.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVR42mP4jxv8AgM8ChjwyH3+/Onjxw///v3DqXnHuXUZ00MqF6dXL8kEMjafWg0U3bTqZFrI9MrMJVVZS4GMzatPgQRPrsyaEVa1OAOoMnNGKFAjQ9f6KokEBvtqFccaNfF4hpYVpUB1tfkLxRkSbVWr7NSqRRni6wsXAwUblxbJpjA41mo41qjLJDF0ratiuPn0yorDc9cdX7z22MIVh+fceHIZqO78mTtLZx9cufDwygWHgQwgFygIlAIqgKsEasTi579///78+RNZBMgFCmLxMzA8/vz9A0d//4EUXXtwae2xJRtPLAeitUeXXHt4CWTov7/IKoEa0W3+8/c3kOxYXamVy+tap+1Wr6uVy9e2qhws9YdAVEFUbDy5LHGyT9H8+OJ58UDGhhNLwd75Q2w8f/76+dXrl2/fvfny5TPJiQQYQr9//wECrEEF0QwAoJQty6GnAz4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"delay nodes\" title=\"\" src=\"/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png\" srcset=\"/static/4d190f766bb560920bc66390824efb6c/69538/delay-nodes.png 160w,\n/static/4d190f766bb560920bc66390824efb6c/72799/delay-nodes.png 320w,\n/static/4d190f766bb560920bc66390824efb6c/6af66/delay-nodes.png 640w,\n/static/4d190f766bb560920bc66390824efb6c/d9199/delay-nodes.png 960w,\n/static/4d190f766bb560920bc66390824efb6c/21b4d/delay-nodes.png 1280w,\n/static/4d190f766bb560920bc66390824efb6c/29114/delay-nodes.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Such simple connection can implement delay</small>\n</center>\n<p>Connecting nodes like this makes audio signals inputted through <code class=\"language-text\">DelayNode</code> delay then output to <code class=\"language-text\">FeedbackNode</code> and <code class=\"language-text\">OutputNode</code>, and gain-decreased sound through <code class=\"language-text\">FeedbackNode</code> inputs to <code class=\"language-text\">DelayNode</code> again, delays, then outputs to <code class=\"language-text\">OutputNode</code>. Let’s connect nodes according to the diagram above.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Connect dry source node</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>dryGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndryGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> mix<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create delay loop</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>feedbackNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfeedbackNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Connect wet source node</span>\ninputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>delayNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndelayNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>wetGainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwetGainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> mix<span class=\"token punctuation\">;</span>\n\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Playing the source node now lets you hear sound with echo-like effects applied through the delay effector.</p>\n<h2 id=\"filter\" style=\"position:relative;\">Filter<a href=\"#filter\" aria-label=\"filter permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42n2S62/SUBjG+4+ZuCkQNtrSy+k5vcM2NtyAkTHuhbbQFlqg5TLXdTpxLsY4Y2L84N/n4YOJiYnJkydPzsnvfd9zIWzHm8yXlr/2o5t5/LR6eH77+D358mvz8UcQP9mLu844rHVsqJfSQErKlZakvSBZuViioEwMJks3jDujWa0zcqPEixI3TGbxk7veWvO4562aZlBpmvLJOSqeiuoRg1QSqhma3z+kibYZ9N3I9NdeFLvR3SLeDidh35mbwXo4XTWtacOYdO2ZUqq8yjGvKS6dB4yo5QVIMjRh+ZvJ6l2UPG4/f4s/PX/4+jPePrrR7XTz3t/cm/6q74SGs9BOq3sH1P5hHpegocwIgGJIomG44/mtu7wzJsuBF5rBJozvMeytkuDmoefMO/Zs4EYYfpndwdgpQSme1+XjMlFtm23b74xn10P3eui1rKnpR71xYHiLcXgznEbdUWC4oX5WTeGZaR53ZqSC4YW4LoETBRVS2F0DhXQa6Tmg5qUiLe7yZd+uNHt49031auD4jf7oqmc1jBHucWU4RJaBKQrkWMAKgBMALwAkAiDwvMADCGiGZjiG4dhyvdV3ZuV6+6zWOrtsWcG6Ow6ILIsgAgUNaZqoqUjXUEEXsevqLhR0qahLsgQqjY7lL2stA+ui0cUHrHdtQhBhUYeKglRVxL7Tn/D3CgXEAw5lWQjUI1Qo0Wj31ISiyZIiyar8HyFJAvqJcnpBS3qahST+J0hNMwKRyQspit87yO8fMv8qRfIZIHI6IqHMasc5qGAYYxkWvqK43+hILPd7Ms/OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter\" title=\"\" src=\"/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png\" srcset=\"/static/39acf359c2bf68c771d7db4d300523e5/69538/filter.png 160w,\n/static/39acf359c2bf68c771d7db4d300523e5/72799/filter.png 320w,\n/static/39acf359c2bf68c771d7db4d300523e5/6af66/filter.png 640w,\n/static/39acf359c2bf68c771d7db4d300523e5/d9199/filter.png 960w,\n/static/39acf359c2bf68c771d7db4d300523e5/54bf4/filter.png 1007w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Filter means a tool or concept for filtering something out. Since we already use the filter concept a lot normally, it’s not that hard to understand. And filters in audio effectors play the role of filtering out frequencies.</p>\n<p>Simply put, filters are effectors that can pick out only specific frequency ranges from audio frequency ranges and eliminate them. So filters are mainly used to filter out noise mixed in sound or filter out frequencies that are too low or too high creating useless resonance.</p>\n<p>Using these filter characteristics well lets you do quite interesting things - two representative examples are creating voices coming from telephones or sounds like music from clubs.</p>\n<p>First, voices coming from telephones can be created using a <code class=\"language-text\">Bandpass</code> filter that passes only specific band frequencies from all frequencies. Utilizing that telephones have limits in frequency bands they can transmit, cut out all frequencies except the 100 ~ 250Hz frequency band which is human voice range.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/JrbkbKt1iEM?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>Around 5:00 in the above video, the \"Hey, kitty~\" part is the filtered voice</small>\n  <br />\n  <br />\n</center>\n<p>So using filters on human voice sources to cut out all frequencies except 100 ~ 250Hz band can create the voice we typically hear when talking on the phone.</p>\n<p>Music sounds from clubs are created with similar principles. Due to club characteristics, they’re usually located underground with narrow entrances. In such situations, when playing songs at clubs, since there’s almost no passage for sound to escape outside, when we hear songs playing at clubs from ground level, we hear very heavy “boom~ boom~” sounds.</p>\n<p>Due to club music characteristics, low sounds are often emphasized by strong drums and bass, and since low frequencies have higher object penetration than high frequencies, outside clubs we mainly hear low sounds that penetrated relatively more than high sounds. This wave characteristic isn’t limited to sound - other waves like light also have higher energy loss rates for high frequencies than low frequencies.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/qmhwHUHc1Hc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<center>\n  <small>From 6:27 a part appears changing to sound using lowpass filter passing only low frequencies</small>\n  <br />\n  <br />\n</center>\n<p>Sound engineers like this analyze how specific situation sounds are heard and use various effectors including filters to give that situation’s on-site feeling.</p>\n<p>Fortunately, HTML5 Audio API provides <code class=\"language-text\">BiquadFilterNode</code> that can make such filters, so we can avoid the sad situation of having to directly crack audio buffers to analyze frequencies. We just need to know what the values this node provides mean.</p>\n<p>Let’s look one by one at what properties <code class=\"language-text\">BiquadFilterNode</code> provides mean.</p>\n<h4 id=\"frequency\" style=\"position:relative;\">Frequency<a href=\"#frequency\" aria-label=\"frequency permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Frequency is the value determining which frequency band to filter out. Uses Hz (hertz) as unit, and can assign values from 10Hz to half the audio’s sample rate. If audio source sample rate is 44,100Hz, this means you can assign up to 22,050.</p>\n<h4 id=\"q\" style=\"position:relative;\">Q<a href=\"#q\" aria-label=\"q permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Filtering signals fundamentally can’t be cut exactly like a knife. Since sound itself is an analog signal, it can’t be cut neatly square but inevitably filters with some boundary - here Q means how sensitively you can filter when filtering specific frequencies.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjklEQVR42o1TXW/CMAzk//87HpDgAY0KRKHtSqt8OU7i7ppAB2ibdqLIdXK+szGrKSOlFDMQMPN6vd7tdtvtFt/7/X6z2Vyv10kkMKeMwlrhEZG+7621RGSUatuuadp2ftouo2maYRjarq+vTVUdzufzNxlwzpV67H3XdpIrTg9IhtFKjwMsoOgLGZqFbCyNn58hs5/Jc2siMd9ZLt/Jxpg72ZEdevfKXlyU4JuMIcEGWirv2jGNvfFRnoCjJXjucRVCOJ1OKJavTJpY9AByTO+2f1AGua7rmSwpzuQg+uZDciH9i1xV1TiOUAbBc4iqx5mikCRNf9tGKoSIHxnvllMMnNQADYhbH+8r9JB+Vy7HHkCJMAm75Aw6mJNRMHb0/qvtkoWydn5ePDISg3grMU6oATs+WGJCOzGiRxSgxXYhD7ebMzqSZU8x32Jn2JrgLJLeGnyM1tgxssaq8V0ZY2AOSqkccA4IysZapTXmgjzmCnEiX/yvln/VfQcfAXb4cPi4XOrj8Ygmy9Fs+wlfnjxs6L3IYCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"filter q\" title=\"\" src=\"/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png\" srcset=\"/static/bd13c5d375c2729ffbcba3539fc82f14/69538/filter-q.png 160w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/72799/filter-q.png 320w,\n/static/bd13c5d375c2729ffbcba3539fc82f14/b06ae/filter-q.png 560w\" sizes=\"(max-width: 560px) 100vw, 560px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Q can be assigned values between 0.0001 ~ 1000, and higher Q values let you filter caught frequencies more sensitively. However, when filtering audio signals, if Q is too high it might sound unnatural and artificial rather than natural, so finding appropriate values is important.</p>\n<h4 id=\"type\" style=\"position:relative;\">Type<a href=\"#type\" aria-label=\"type permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">BiquadFilterNode</code> can make various types of filters - they broadly divide into types that completely filter frequencies out, and types that can amplify or decrease specific frequencies.</p>\n<h5 id=\"types-that-filter-frequencies\" style=\"position:relative;\">Types that filter frequencies<a href=\"#types-that-filter-frequencies\" aria-label=\"types that filter frequencies permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<ul>\n<li><code class=\"language-text\">lowpass (highcut)</code>: Filters out all frequencies higher than specified frequency.</li>\n<li><code class=\"language-text\">highpass (lowcut)</code>: Filters out all frequencies lower than specified frequency.</li>\n<li><code class=\"language-text\">bandpass</code>: Filters out all frequencies except specified frequency.</li>\n<li><code class=\"language-text\">notch</code>: Filters out specified frequency.</li>\n</ul>\n<h5 id=\"types-that-amplifydecrease-frequencies\" style=\"position:relative;\">Types that amplify/decrease frequencies<a href=\"#types-that-amplifydecrease-frequencies\" aria-label=\"types that amplifydecrease frequencies permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<ul>\n<li><code class=\"language-text\">lowshelf</code>: Amplifies/decreases frequencies lower than specified frequency.</li>\n<li><code class=\"language-text\">highshelf</code>: Amplifies/decreases frequencies higher than specified frequency.</li>\n<li><code class=\"language-text\">peaking</code>: Amplifies/decreases specified frequency.</li>\n</ul>\n<p>Among these, types that amplify/decrease frequencies can also be used in EQ (Equalizer) discussed below. This time I plan to make filters simply filtering frequencies, so I’ll implement filters using only types that filter frequencies.</p>\n<p>I’ll implement a lowpass filter filtering all frequencies higher than specific frequency and a highpass filter filtering all frequencies lower than specific frequency. Let’s simply implement filters.</p>\n<h3 id=\"implementing-filter\" style=\"position:relative;\">Implementing Filter<a href=\"#implementing-filter\" aria-label=\"implementing filter permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>First use AudioContext object’s <code class=\"language-text\">createBiquadFilter</code> method to create <code class=\"language-text\">BiquadFilterNode</code>. Since my audio sample has 44,100Hz sample rate, I’ll set lowpass filter frequency to 1,000Hz and highpass filter frequency to 20,000Hz.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> lowpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowpass'</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> highpassFilterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highpass'</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I didn’t separately set Q values, but that’s actually fine. <code class=\"language-text\">BiquadFilterNode</code>’s Q has default value 350 which isn’t too excessive or insufficient, so I’ll just use the default value. <small>(Also a bit lazy.)</small></p>\n<p>Now connecting the created filter nodes to the audio source lets you hear audio samples with frequencies below 1,000Hz and above 20,000Hz removed.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">sourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>lowpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlowpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>highpassFilterNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhighpassFilterNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Those who’ve read this far probably started feeling, but actually HTML5 Audio API is so well made that developers barely need to touch anything. Before knowing <code class=\"language-text\">BiquadFilterNode</code> existed, I worried “wow how will I make this filter…?” but it was actually the one needing least worry. <small>(So it was slightly anticlimactic.)</small></p>\n<h2 id=\"eq\" style=\"position:relative;\">EQ<a href=\"#eq\" aria-label=\"eq permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACmUlEQVR42j2RS28TVxiG5xdwB9meGXvseC5nbrbHM2PHcUKJg517CARBAiQBJBBBgqAoMgSQCpuy6YIFrVSpXVa0UretuuAnsOT3PJyZIBav3ve7nO92FOF6RK0WjWYT27ZxHBvLMtF1DU1Tczbrdcm6tI99xyyhlnIul/U8r2oYKK4bEIRNwnYfL4ikDnGEoKRqqJouWaeYab2c64yLqkpJy3wVtHJFDuKQDVarmyj6RIDhxNTdNEdVpFhBSk1y3Z9kwutiiATDS6g6CfVwGje8iAgk94bU/C6m08GwIkpVD8VsXsJN5yUWEMl8DiceYbeH1JuDnOO5TXrL9xGdRazWZWZ+2KY3s4WQb7zOUs5ONJCDJShWMsTtryH6V/Cn12nMbBDP3mBaFli+94qd17+x/8u/HP7+iQfv/mS0PWawvMfU3Dbe1CqBfOf1VnFls3rYRzlae8CLq3v8eH2fJ2uP2BjeYriww+LNZyzcPmT17hGjrYMcK7sv2bz/jqcP/+DN6/94Pv6H8eFfjA/+ZriyRy0r+HHrBR/vvOJg/TFpfx0/6za5gi3XsOJ57CSDXCldzG2RLLE02ufR7gfeHv3P+58+8+vPX1jbGKPZbZT3156wOb+N3pql1hpgRXPyTnOY0TGs9uUc2S0tiey+cW+DQBauNWeJpq7RvbiFK5sWJpoooRFyVqJiBlTtBiX5W067nQfL8tdVK6YoYvSkR6HWwoguobodJpxpbH9AodpAqCmFSkjJjlHKokvBjOWKI8qiw4miyfmqw8mSzSlNcEqVWpPacDlZtDhd8aXtcEbzOVcOZdzmQsnL807rAsVvd/FaCVF3hqDVwXZDiQaO15Ac0JCxdjpJM0q/+zJ2PJnnHWvbD7/ZIV8B/qNr5c4oeIoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"parametric eq\" title=\"\" src=\"/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png\" srcset=\"/static/b972a654c602720bb3a9d335899a0d25/69538/parametric-eq.png 160w,\n/static/b972a654c602720bb3a9d335899a0d25/72799/parametric-eq.png 320w,\n/static/b972a654c602720bb3a9d335899a0d25/6af66/parametric-eq.png 640w,\n/static/b972a654c602720bb3a9d335899a0d25/d9199/parametric-eq.png 960w,\n/static/b972a654c602720bb3a9d335899a0d25/c1b63/parametric-eq.png 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Equalizer (EQ) is an effector used for a kind of frequency equalization work (Frequency Equalizing) as the name suggests.</p>\n<p>EQ is a basic effector laid down with compressors when mixing audio, mainly used to eliminate useless sounds from original sources and harmonize with other sounds. Since EQ is ultimately an effector controlling frequencies, it’s implemented using filters - since we’ve already made filters once, we can easily whip up EQ.</p>\n<p>EQ broadly divides into two types: parametric equalizer and graphic equalizer - I plan to implement graphic equalizer among these. By the way, the image at top is parametric EQ, but I included it because the image looked cooler. For reference, graphic EQ looks like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAclaJliP/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEDAgQRExQh/9oACAEBAAEFAud5cDFbs2+uYVZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQMTJBkaH/2gAIAQEABj8Csmi/CTJKt//EABwQAAICAgMAAAAAAAAAAAAAAAABESFRgTGR8f/aAAgBAQABPyHAtjCdh1cXopBOh4Apq5Z//9oADAMBAAIAAwAAABAYz//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAgEBPxBY/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFhsf/aAAgBAQABPxDoHs88NxX40NWnd6o/dakCgQhMggdStGdoYZWb/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graphic eq\" title=\"\" src=\"/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg\" srcset=\"/static/810256ab252fd73a1c3030c32279669f/0913d/graphic-eq.jpg 160w,\n/static/810256ab252fd73a1c3030c32279669f/cb69c/graphic-eq.jpg 320w,\n/static/810256ab252fd73a1c3030c32279669f/c08c5/graphic-eq.jpg 640w,\n/static/810256ab252fd73a1c3030c32279669f/49e4f/graphic-eq.jpg 836w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Graphic EQ visual exuding deep analog nostalgia</small>\n</center>\n<p>Both EQs have pros and cons - first, graphic EQ’s advantage is having more controllable frequency bands than parametric EQ and having an intuitive interface. You might say seeing the parametric EQ image attached at this paragraph’s top “huh? Parametric looks quite intuitive too?” - but originally hardware parametric EQ looked like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFgEBAQEAAAAAAAAAAAAAAAAABAAC/9oADAMBAAIQAxAAAAHExB6DV//EABgQAQADAQAAAAAAAAAAAAAAAAIAEiEi/9oACAEBAAEFAkeqwnP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAATH/2gAIAQEABj8CrKys/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERUcHw/9oACAEBAAE/IUyts7sl1n//2gAMAwEAAgADAAAAEHwv/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBF//8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQIBAT8Qp//EABoQAAICAwAAAAAAAAAAAAAAAAABETEhQWH/2gAIAQEAAT8QexUtXY1UBmG79H//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hardware parametric eq\" title=\"\" src=\"/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg\" srcset=\"/static/351a26bf4458838f2afdbc6e4cb82da6/0913d/hardware-parametric-eq.jpg 160w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/cb69c/hardware-parametric-eq.jpg 320w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/c08c5/hardware-parametric-eq.jpg 640w,\n/static/351a26bf4458838f2afdbc6e4cb82da6/07f3a/hardware-parametric-eq.jpg 740w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Black things are knobs. White things are numbers.</small>\n  <br>\n</center>\n<p>So graphic EQ is mainly used in places needing quick response like concert halls, and senior sound engineers with much experience have the scary skill of immediately catching the frequency when howling <small>(sharp “screee-” sound sometimes in karaoke)</small> occurs at concert halls and killing it with graphic EQ.</p>\n<p>Graphic EQ’s disadvantages are that controllable frequency bands are fixed and fine frequency adjustment is difficult. Conversely, parametric EQ unlike graphic EQ can even set all controllable frequency bands.</p>\n<p>However, simultaneously controllable frequency count is greatly lacking compared to graphic EQ. While typical parametric EQ can control 3-5 frequency bands, graphic EQ has experts with over 40 simultaneously controllable frequencies.</p>\n<p>I think hardware parametric EQ’s maximum disadvantage is having a non-intuitive interface - this disadvantage is an area coverable with UI when implementing in software, and since most recording studios have situations where you can keep listening and equalizing rather than immediate response, many software EQs are implemented as parametric EQ with high freedom in frequency band control.</p>\n<p>But in situations like the demo I’m making where I’m simply implementing, it’ll obviously be implemented with UI similar to hardware parametric EQ above, so I chose graphic EQ which is relatively easier to make UI for. <small>(If you don’t understand this well, check the parametric EQ attached at the EQ chapter’s very top)</small></p>\n<p>As mentioned once above, since EQ is implemented using filters, it’s not that complex. Let’s simply whip it up now.</p>\n<h3 id=\"implementing-graphic-eq\" style=\"position:relative;\">Implementing Graphic EQ<a href=\"#implementing-graphic-eq\" aria-label=\"implementing graphic eq permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>If you saw the graphic EQ image above, you know this guy is equipment with fixed controllable frequency band counts. So I’ll also declare one array containing controllable frequencies and iterate this array while generating filters.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> frequencies <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">63</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">125</span><span class=\"token punctuation\">,</span> <span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">315</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1600</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>There’s a point to note here. Since EQ uses multiple filters, you must chain-connect each filter to each other. If filter gain is even slightly higher than 1, sound amplifies a bit each time passing through filters, and by the time it reaches your ears it becomes extremely loud sound that could permanently separate your eardrums.</p>\n<blockquote>\n<p>🚨 <strong>Therefore you must set filters’ gain to 0 or below.</strong></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> inputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsourceNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> filters <span class=\"token operator\">=</span> frequencies<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">frequency<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> array</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> filterNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  filterNode<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span><span class=\"token function\">setValueAtTime</span><span class=\"token punctuation\">(</span>frequency<span class=\"token punctuation\">,</span> audioContext<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'lowshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> array<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'highshelf'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    filterNode<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'peaking'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> filterNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfilters<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  prev<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> current<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> inputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> outputNode <span class=\"token operator\">=</span> audioContext<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfilters<span class=\"token punctuation\">[</span>filters<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>outputNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\noutputNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioContext<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looking at the <code class=\"language-text\">if</code> statement inside <code class=\"language-text\">map</code> method shows only the first and last filters getting different types - this is to cover all frequencies lower than first filter frequency and higher than last filter frequency using shelf type filters. <small>(If you don’t remember filter types well, go back and see the Filter part)</small></p>\n<p>Then chained all generated filters through <code class=\"language-text\">reduce</code> method and connected to <code class=\"language-text\">outputNode</code> too. Playing <code class=\"language-text\">sourceNode</code> after writing this far shows no changes.</p>\n<p>Naturally since all filters’ gain is <code class=\"language-text\">0</code> there are no changes. Assigning random numbers between <code class=\"language-text\">-1 ~ 1</code> to these filters’ values lets you hear sound change slightly. I personally recommend making it controllable by connecting with <code class=\"language-text\">input[type=\"range\"]</code> elements to control filters’ gain and directly trying various things.</p>\n<p>Also, since the lowest and highest frequency filters are set to shelf type, lowering these filters’ gain can also produce effects like lowpass or highpass filters.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So here we made commonly used effectors - compressor, reverb, delay, filter, EQ. Actually there are various other interesting effectors besides these 5, but I’ll stop here due to massive volume control failure.</p>\n<p>As mentioned once when making filters, since HTML5 Audio API provides extremely high-level abstracted nodes, there’s actually not much for developers to directly implement. This also means detailed-level implementation is difficult, but since I’m not starting some audio effector company, it seems sufficient for making things just for fun.</p>\n<p>Making various effectors like this brought back memories from when I worked as a sound engineer, and I had new things to learn about effectors too, so I had extremely fun working. Besides effectors written in the post, I plan to keep implementing various effectors, so interested people can look around <a href=\"https://github.com/evan-moon/simple-waveform-visualizer\" target=\"_blank\" rel=\"nofollow\">my GitHub</a> and send PRs. <small>(Good things double when shared.)</small></p>\n<p>That’s all for this post on making audio effectors with JavaScript - creating your own sound.</p>","fields":{"slug":"20190821-javascript-audio-effectors-practice-en","path":"/2019/08/21/javascript-audio-effectors-practice/en/","lang":"en"},"frontmatter":{"title":"[Making JavaScript Audio Effectors] Creating Your Own Sound with Audio Effectors","subTitle":"Like Logic Pro, Pro Tools? Implementing audio effects on the web","date":"Aug 21, 2019","categories":["Programming","Audio"],"tags":["JavaScript","JavaScript","Audio","Audio Effectors","JavaScript Audio API","Logic Pro X","Logic Pro","Protools","Pro Tools","Cubase","Cubase","Audio Plugin","Compressor","Delay","Reverb","EQ"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/3a812/thumbnail.jpg 320w,\n/static/026a9fe9c894f201ec1e45217221447c/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/fc5c5/thumbnail.webp 320w,\n/static/026a9fe9c894f201ec1e45217221447c/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/026a9fe9c894f201ec1e45217221447c/2d839/thumbnail.jpg","srcSet":"/static/026a9fe9c894f201ec1e45217221447c/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/026a9fe9c894f201ec1e45217221447c/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}]}},"pageContext":{"slug":"20190821-javascript-audio-effectors-practice","previous":{"fields":{"slug":"20190819-javascript-audio-effectors-gain","path":"/2019/08/19/javascript-audio-effectors-gain/","lang":"ko","postGroup":"20190819-javascript-audio-effectors-gain"},"frontmatter":{"title":"[JavaScript 오디오 이펙터 만들기] 소리의 흐름을 파악하자"}},"next":{"fields":{"slug":"20190824-what-is-object-oriented-programming","path":"/2019/08/24/what-is-object-oriented-programming/","lang":"ko","postGroup":"20190824-what-is-object-oriented-programming"},"frontmatter":{"title":"알고 보면 재밌는 객체 지향 프로그래밍, OOP 흝어보기"}},"lang":"ko","postGroup":"20190821-javascript-audio-effectors-practice"}},"staticQueryHashes":["3129619726","3523904809","376081736","650499039"],"slicesMap":{}}