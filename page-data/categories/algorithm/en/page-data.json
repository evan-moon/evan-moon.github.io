{"componentChunkName":"component---src-templates-category-page-template-index-tsx","path":"/categories/algorithm/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"69d362fb-1673-5f3a-b10b-86cb46388823","tableOfContents":"<ul>\n<li>\n<p><a href=\"#simplifying-problems-with-mathematical-thinking\">Simplifying Problems with Mathematical Thinking</a></p>\n</li>\n<li>\n<p><a href=\"#what-day-of-the-week-is-it-10-billion-days-from-now\">What Day of the Week Is It 10 Billion Days from Now?</a></p>\n<ul>\n<li><a href=\"#lets-also-find-the-day-10100000000-days-from-now\">Let’s Also Find the Day <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> Days from Now</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tiling-a-bathroom-floor\">Tiling a Bathroom Floor</a></p>\n</li>\n<li>\n<p><a href=\"#drawing-without-lifting-your-pen-proving-the-k%C3%B6nigsberg-bridge-problem\">Drawing Without Lifting Your Pen: Proving the Königsberg Bridge Problem</a></p>\n<ul>\n<li><a href=\"#focus-on-whether-the-degree-is-odd-or-even\">Focus on Whether the Degree Is Odd or Even</a></li>\n<li><a href=\"#when-start-and-end-are-the-same\">When Start and End Are the Same</a></li>\n<li><a href=\"#when-start-and-end-are-different\">When Start and End Are Different</a></li>\n<li><a href=\"#why-is-drawing-without-lifting-your-pen-impossible-for-the-k%C3%B6nigsberg-bridges\">Why Is Drawing Without Lifting Your Pen Impossible for the Königsberg Bridges?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"Recently, many IT companies conduct coding tests when hiring developers. While each company differs in the style of problems they pose, most seem to prefer simple algorithm problems or problems that mix in real-world scenarios, like those on Codility or Programmers. Given the nature of these problems, you need to use CS fundamentals, problem analysis skills, and intuition in various combinations — so short-term practice won’t dramatically improve your abilities.","html":"<p>Recently, many IT companies conduct coding tests when hiring developers. While each company differs in the style of problems they pose, most seem to prefer simple algorithm problems or problems that mix in real-world scenarios, like those on Codility or Programmers.</p>\n<p>Given the nature of these problems, you need to use CS fundamentals, problem analysis skills, and intuition in various combinations — so short-term practice won’t dramatically improve your abilities.</p>\n<!-- more -->\n<p>These problems don’t simply ask us “Do you know this algorithm?” but rather “What approach would you like to use to solve this?”</p>\n<p>While data structures and algorithms themselves can be mastered to some degree by studying and implementing them a few times, the ability to analyze problems, simplify them, and choose appropriate methods isn’t something you can develop through study alone.</p>\n<p>I’ve been solving these kinds of problems recently while job hunting, and I’ve definitely felt that while my CS fundamentals are lacking, my ability to analyze problems and choose good approaches is even more lacking.</p>\n<p>So while re-studying data structures and algorithms from scratch, I also started thinking about what methods might help develop problem-solving abilities.</p>\n<h2 id=\"simplifying-problems-with-mathematical-thinking\" style=\"position:relative;\">Simplifying Problems with Mathematical Thinking<a href=\"#simplifying-problems-with-mathematical-thinking\" aria-label=\"simplifying problems with mathematical thinking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>After getting thoroughly destroyed in interviews recently, I started re-studying CS fundamentals and JavaScript basics from the beginning. But when I tried to use this knowledge to solve coding test problems, things didn’t go as well as I’d hoped.</p>\n<p>As most people know, many coding test platforms show you how others solved the same problem after you complete it. Honestly, this curiosity is part of why I solve problems.</p>\n<p>During this process, I once saw someone solve a problem that most people had solved with brute force using just a few simple arithmetic operations.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdXJvYQtD//EABsQAAIDAAMAAAAAAAAAAAAAAAISAQMEACEi/9oACAEBAAEFAmQdVb6cwLXBCPK59jHX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHhAAAgICAgMAAAAAAAAAAAAAAREAAhIhA0EQIlH/2gAIAQEABj8CFQOvs9aZE1cV03MeWux2m5a9hi9Dx//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVFh/9oACAEBAAE/ISuLQrA5KXGe1B9i6eVB5B7bjBiclySilNE2ns//2gAMAwEAAgADAAAAEEMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFBgf/aAAgBAQABPxAgmKdw9RyWBw8lSp3hjsCIHRpO/c0cu0AeE9jHNVpcN8qcWrMuglWJn//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"genius\" title=\"\" src=\"/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg\" srcset=\"/static/27a2afda0a9a543f086498edf0c8c59a/0913d/genius.jpg 160w,\n/static/27a2afda0a9a543f086498edf0c8c59a/cb69c/genius.jpg 320w,\n/static/27a2afda0a9a543f086498edf0c8c59a/70ebb/genius.jpg 350w\" sizes=\"(max-width: 350px) 100vw, 350px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The world is vast and geniuses are plentiful</small>\n</center>\n<p>Of course, I had also solved that problem with brute force and thought that was the only way. But this genius had found patterns in the problem and simplified it.</p>\n<p>Sure, the code was a bit obscure and might be controversial for production use, but I was shocked that a complex problem most people solved with brute force could be solved with just a few simple equations.</p>\n<p>What I took away from this was the need for mathematical thinking. Of course, algorithms are also generalizations of efficient solutions based on such mathematical thinking, but what I wanted was more fundamental problem-solving ability.</p>\n<p>When I say mathematical thinking, I don’t mean reading a problem and immediately writing complex equations. Analyzing problems written in natural language, breaking them down into solvable pieces, and finding patterns all stem from mathematical thinking. After all, mathematics itself is the discipline of simplifying complex problems and finding patterns to generalize them.</p>\n<p>As I mentioned in my <a href=\"/2019/07/17/programmer-with-math/\">Do Developers Need to Be Good at Math?</a> post, the math I’m talking about isn’t difficult theories or formulas.</p>\n<p>This is my personal opinion, but I think understanding “the properties of numbers” is most important. For example, knowing that adding 1 to an odd number gives an even number, or that the sum from 1 to 100 can be calculated as <code class=\"language-text\">101 * 100 / 2</code>.</p>\n<p>For this reason, I recently read a book called “Think Like a Programmer with Math,” and since some interesting problem-solving methods appeared early in the book, I’d like to share those problems and their solutions.</p>\n<h2 id=\"what-day-of-the-week-is-it-10-billion-days-from-now\" style=\"position:relative;\">What Day of the Week Is It 10 Billion Days from Now?<a href=\"#what-day-of-the-week-is-it-10-billion-days-from-now\" aria-label=\"what day of the week is it 10 billion days from now permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Finding the day of the week <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> days later is a classic problem requiring mathematical thinking.</p>\n<p>Even without going to coding tests, this is a problem you encounter quite often just handling business logic in daily development. So as a warm-up, let’s look at this relatively familiar day-of-the-week problem first.</p>\n<blockquote>\n<p>As I write this on October 29, 2019, it’s “Tuesday.” What day of the week will it be 10 billion days from now?</p>\n</blockquote>\n<p>Well, thinking simply, since today is Tuesday, we could approach this sequentially: 1 day later is Wednesday, 2 days later is Thursday, and so on.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Sun'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mon'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Tue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Wed'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Fri'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sat'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> shift <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  shift <span class=\"token operator\">=</span> i <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ntoday <span class=\"token operator\">+=</span> shift<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">></span> week<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  today <span class=\"token operator\">-=</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>today<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Sat\ncalc: 60948.138ms</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Even though computers these days have great processing power and work without pay like SCVs, making one calculate a loop that repeats 10 billion times is just cruel. Since this algorithm has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity, it takes over a minute just running the loop.</p>\n<p>We can’t solve it this brutishly, so we need to find another way. Fortunately, we know that days of the week repeat every 7 days. If today is Tuesday, 7 days from now is also Tuesday, and 14 days from now is also Tuesday.</p>\n<p>In other words, there’s a “periodicity” where days repeat. Once we’ve found the pattern that any day that’s a multiple of 7 from today is Tuesday, the rest becomes simple.</p>\n<p>Since continuously dividing any number by 7 while incrementing by 1 produces a periodic pattern of 0-6, just like finding multiples, we can divide 10 billion by 7 and check the remainder.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Sun'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mon'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Tue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Wed'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Fri'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sat'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> shift <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\ntoday <span class=\"token operator\">+=</span> shift<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>today <span class=\"token operator\">></span> week<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  today <span class=\"token operator\">-=</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>today<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Sat\ncalc: 0.156ms</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Execution time dropped from <code class=\"language-text\">60000ms</code> to <code class=\"language-text\">0.156ms</code>. By finding periodicity in the problem and connecting it to the periodicity of remainders, we can solve the problem easily using remainders without brute force.</p>\n<h3 id=\"lets-also-find-the-day-10100000000-days-from-now\" style=\"position:relative;\">Let’s Also Find the Day <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> Days from Now<a href=\"#lets-also-find-the-day-10100000000-days-from-now\" aria-label=\"lets also find the day 10100000000 days from now permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Let’s take this one step further. Can we find the day of the week <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> days from now using this method? I don’t know what 10 to the power of 100 million is called, but considering that the number of all atoms in the observable universe is about <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>78</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{78}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">78</span></span></span></span></span></span></span></span></span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> is definitely an astronomically huge number.</p>\n<p>Obviously, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> far exceeds JavaScript’s <code class=\"language-text\">Number.MAX_SAFE_INTEGER</code>, so calculation using the above method is impossible. From here on, simplifying the problem and finding periodicity becomes more important than leaving the calculation to the computer.</p>\n<p>Since today is Tuesday, October 29th, let’s look at the days of the week <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> days from now. Using the logic from the example we just made to look up to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>30</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{30}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">30</span></span></span></span></span></span></span></span></span></span></span></span></span> days later, I found the following pattern. Since listing all results would make the table too long, I’ll only include results from <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span></span></span></span></span></span></span></span></span> days onward.</p>\n<table>\n<thead>\n<tr>\n<th>Days</th>\n<th>Day</th>\n<th>Index</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>0</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Wed</td>\n<td>3</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>1</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Fri</td>\n<td>5</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Thu</td>\n<td>4</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Mon</td>\n<td>1</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Sat</td>\n<td>6</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Sun</td>\n<td>0</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>6</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Wed</td>\n<td>3</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>7</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Fri</td>\n<td>5</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>8</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Thu</td>\n<td>4</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Mon</td>\n<td>1</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>10</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Sat</td>\n<td>6</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>11</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{11}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Sun</td>\n<td>0</td>\n</tr>\n<tr>\n<td><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span></span></span></span></span></span></span></span></span> days later</td>\n<td>Wed</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p>From this process, I discovered two pieces of information: the days repeat in the order <code class=\"language-text\">Wed, Fri, Thu, Mon, Sat, Sun</code>, and today’s day <code class=\"language-text\">Tuesday</code> never appears.</p>\n<p>In other words, the same day returns every time the exponent of 10 increases by 6. Put another way, the same day returns every time 6 more zeros are added.</p>\n<p>This means we can find the day using the same method as before, using the remainder when dividing the exponent of 10 by 6.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> week <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Wed'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Fri'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mon'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sat'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sun'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> exp <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>week<span class=\"token punctuation\">[</span>exp <span class=\"token operator\">%</span> week<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Sat</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Although the computer can’t hold the enormous number <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> so we can’t calculate it directly, by understanding the periodicity of days due to exponent increase, we can find the day of the week in an unimaginably distant future. <small>(Though what’s the point of calculating this anyway…)</small></p>\n<p>If we had tried to solve this problem with the honest method we used above, it would have been impossible. But by analyzing the problem and finding periodicity, we managed to solve it somehow.</p>\n<h2 id=\"tiling-a-bathroom-floor\" style=\"position:relative;\">Tiling a Bathroom Floor<a href=\"#tiling-a-bathroom-floor\" aria-label=\"tiling a bathroom floor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Unlike the day-finding problem we just solved, where the repeating numbers with a clear regular period are quite visible, most problems we encounter in daily life don’t show their patterns so obviously.</p>\n<p>What’s needed then is analyzing the problem and finding patterns. The real significance of being able to use the number property of periodicity lies in being able to create and find patterns. This time, it’s a problem about validating using those patterns.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/29114/tile.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVR42oWS6Q6CQAyEef93JAGWQ+SSK7Bc6xcaFjEa5kczYGemtDrmimVZuq7r+37btqZphmEw/+FYtq7rNE1t27qu6/s+FlEUlWV5IyaESk6apnS/dkDCMLwXk1nXdZIkRD12wLMsU0rdi5n2uQNZdsAmYz2OI7v4LZ7nmShyPM9TB5iCj8elKIo4ju0IJGmtv5OJRcBnQ6h5npPMe3zhVVWJAF9MTzEjYU8IMrqFUIMgwI5uXoqYGLYDh5ynYnJ9AE4Uc0omVU7wOeNFbCFnYxAyWYFUHqVb7oKX7M/5eQP+YXTItghHY39iLjEyxrwBlOx32KwMnxoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tile\" title=\"\" src=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/6af66/tile.png\" srcset=\"/static/0ab29f40bfe6194b334f10a4ee3488e2/69538/tile.png 160w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/72799/tile.png 320w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/6af66/tile.png 640w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/d9199/tile.png 960w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/21b4d/tile.png 1280w,\n/static/0ab29f40bfe6194b334f10a4ee3488e2/29114/tile.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p>Evan got a job at a tile installation company and is doing his first bathroom floor installation. But since today is his first day, Evan accidentally only brought rectangular tiles that are 1cm wide and 2cm long.</p>\n<p>Fortunately, all bathroom floors are standardized as grids of 1cm × 1cm squares, but the shape and number of squares vary for each bathroom.</p>\n<p>Evan needs to completely fill the bathroom floor with his rectangular tiles, but depending on the bathroom floor shape, some jobs may be impossible. Plus, Evan is weak and can’t break tiles in half to use them.</p>\n<p>How can Evan determine whether a job is possible?</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> floor <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>For this problem, we could check each possible way to fill the bathroom floor with tiles one by one, but there are too many possibilities and the logic would obviously become complex.</p>\n<p>What if we count the number of squares on the bathroom floor? Since a tile covers two squares, if the number of floor squares is odd, Evan’s tiles could never fill the floor.</p>\n<p>But sadly, the total number of squares in this problem is an even 34, and knowing whether the floor squares are odd or even alone can’t solve this problem anyway. Is there a more reliable verification method?</p>\n<p>This problem might seem to have nothing to do with periodicity, but there’s actually a very simple hidden pattern: Evan’s tile consists of two squares.</p>\n<p>To make thinking easier, let’s color the tiles and floor.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1176e8fe1e16c230190fc00d483d8535/29114/tile-fill.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVR42oWSP8uCUBTG+1RBuIRTH8BFgsAo8BMINRTREmEtQUW4OQgROkZO/aGlaEqXtlpqESnTyuzPQxcCX5L3DMdzL/e553eea+wVjiAIzuez67rP5/N4PHqe94qOGPk8Hg+cRgHBbrc7HA6n08myLOR/xFAi67qey+VQd7vder2OnXw+rygKwYkUo+dkMmk2m4VCod/v12q1arWqqiqWo9Hoe3skdiaTqVQqjuMkEonhcLhYLCiKMgwD8/u+b9s28m/x9Xq93W6yLEOJIQVByGaz8CyZTEqShPnj8fhsNiMIwSdC2J1OB7TQl0ol1NCUy+XBYNBqtQCvadp2uyUC0zSXy2UIu1gswicgpNPp+Xy+Xq9Zlh2PxxDzPI/T+/2enIQdHMeFxIj7/X65XECBAo+Ei2ia7vV6kAF7Op0S7NVqhZqQx/54QIzFhKlUCgiNRoNhGKDCOdLA+8RvMflVNpuNKIrojydst9tk8wv4df4NB4UwbmGxoHcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tile fill\" title=\"\" src=\"/static/1176e8fe1e16c230190fc00d483d8535/6af66/tile-fill.png\" srcset=\"/static/1176e8fe1e16c230190fc00d483d8535/69538/tile-fill.png 160w,\n/static/1176e8fe1e16c230190fc00d483d8535/72799/tile-fill.png 320w,\n/static/1176e8fe1e16c230190fc00d483d8535/6af66/tile-fill.png 640w,\n/static/1176e8fe1e16c230190fc00d483d8535/d9199/tile-fill.png 960w,\n/static/1176e8fe1e16c230190fc00d483d8535/21b4d/tile-fill.png 1280w,\n/static/1176e8fe1e16c230190fc00d483d8535/29114/tile-fill.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>After coloring like this, Evan’s tile becomes a two-square tile consisting of 1 black square and 1 white square. This means if Evan’s tiles can completely fill the bathroom floor without gaps, the number of black squares and white squares on the bathroom floor must be equal.</p>\n<p>However, our given bathroom floor has <code class=\"language-text\">16</code> black squares and <code class=\"language-text\">18</code> white squares. This means this bathroom floor cannot be filled with Evan’s tiles.</p>\n<p>This problem is solved by assigning “the periodicity of black and white” to Evan’s two-square tile. If the color period of Evan’s tile doesn’t match the bathroom floor’s period, that bathroom floor cannot be filled.</p>\n<p>So if we define black squares as <code class=\"language-text\">-1</code> and white squares as <code class=\"language-text\">1</code>, and alternately add <code class=\"language-text\">-1</code> and <code class=\"language-text\">1</code> each time we encounter a floor square, if the final value is <code class=\"language-text\">0</code>, the number of black and white squares is equal.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> floor <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> tileIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\nfloor<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">row<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  tileIndex <span class=\"token operator\">=</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  row<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">col</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>col <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      count <span class=\"token operator\">+=</span> tile<span class=\"token punctuation\">[</span>tileIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    tileIndex <span class=\"token operator\">=</span> tileIndex <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The difference between black and white tiles is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">The difference between black and white tiles is 2.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The reason we reset <code class=\"language-text\">tileIndex</code> when iterating each <code class=\"language-text\">row</code> is that this matrix has an even number of columns. Since the tile’s period is also even, the color of the last tile in the previous row appears again at the start of the next row. <small>(If we made the columns odd, this step wouldn’t be needed — I made the problem wrong…)</small></p>\n<p>Although the problem seemed to have nothing to do with periodicity at first glance, by finding repeating patterns within the problem and assigning periodicity, we can solve the problem in a simpler way.</p>\n<h2 id=\"drawing-without-lifting-your-pen-proving-the-königsberg-bridge-problem\" style=\"position:relative;\">Drawing Without Lifting Your Pen: Proving the Königsberg Bridge Problem<a href=\"#drawing-without-lifting-your-pen-proving-the-k%C3%B6nigsberg-bridge-problem\" aria-label=\"drawing without lifting your pen proving the königsberg bridge problem permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The Königsberg bridge problem is a very famous problem that initiated modern topology. It uses bridges in the city of Königsberg in Prussia <small>(now Kaliningrad, Russia)</small>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/01ceca6d071c0587b998af2d102b848b/2bef9/Konigsberg_bridges.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 69.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXklEQVR42jVUaVNiRxTlD08qyadYMZWUMy6Asi+yP/bH8sCRTXCMxIkBrLigDhiMohFHEHEpYoAH9El3T01X3er1nrud24opHQDIVxmNRqTX65Fut0s6nQ65uLggNzc35OzsjFSrVVKv18nV1RW5v78nl5eXfH19fc31Xl5eporJZMKAQGc8PDxgf38fiUQCfr8fXq8XhUIB2WwWoVAIgUCAn2cyGRiNRphMJuh0OhgMBtRqNbRaLaJgyAzw9fUV8XicKzkcDq4YDofh8/m4ktVqhdlsRj6fRyqV4m+YsPdarRbpdBoHBwdEMRwOOeDp6SlcLhcEQYDH4+GATqcTdrsdy8vLUKlU/I55y8CZd+xMrVZjYWEBs7OzsFgsRDEYDAgd2N3dhc1m46GweWZmBmaTEaFgAFI8hmg0wtfJhERTwYy6KagRb9/OQbm0iKXFeXz/3bdE0e/3Cctfo9GAKIrQ6/Vw0lDevPkGc/NK6IyriErv4XT74PQEEBLjcHm8EHwhWG0u/PDjz1BpTDDbvVCt6GkOhwNyfFxFqVRCJBKBRrNCc2XBLyob5tVGLGmsUOuYrMJk88HqkeCJ5OCLbcDup4aCKQjRPNYKFQTXfiOK1l2XSIkkLUAIAg3DQsN4pxXw05wa2pUluJ02rFqMWEvEEfS64PFHEE1m4bBbkUwmsVcp4696Dd37Nm5ZlQuVaxLJ/QmzsA6NTYR6NQJX/COUeicMDhEWdxRKow+LBh/0Tgli7gDJ91lsbOSwvV1E9fgEo5HM6oqnx95U8TclbkxKgongC8DmcCMsRrCezsHh9uLdghKLqhUagQh7MIu1zT18LH5ApVxCvf4Jd7c3+Pz5Fq32Iz6d//OFNu1OG5ucwBlKDQ/PZSwWRZwK24tiGLXTKjLFQ2xWmsgVfoXgF7FTOsB2uYbUTgPZ3xv4sNckvFNYlbe2tjjHJEnC+vo67wyWI0bYePzLWSwWQ1DKQ4gVuLeZnRr2anfoPL7ykMfycKpg/Tsej3F4eEjzsoFiscjncrnMwRkIM3Z0dES5+gdy2TQ6NCJZHoHx9+t4enqirdsjCvo3jKiHMm1B+fn5WaYXcrvdlumHIDebTfn8/Fw+OTnhe2pYpu9ZBeTJZCqPqR4Ttv5vMJD7/X9H/wO3joG6nQwATQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Konigsberg bridges\" title=\"\" src=\"/static/01ceca6d071c0587b998af2d102b848b/6af66/Konigsberg_bridges.png\" srcset=\"/static/01ceca6d071c0587b998af2d102b848b/69538/Konigsberg_bridges.png 160w,\n/static/01ceca6d071c0587b998af2d102b848b/72799/Konigsberg_bridges.png 320w,\n/static/01ceca6d071c0587b998af2d102b848b/6af66/Konigsberg_bridges.png 640w,\n/static/01ceca6d071c0587b998af2d102b848b/d9199/Konigsberg_bridges.png 960w,\n/static/01ceca6d071c0587b998af2d102b848b/2bef9/Konigsberg_bridges.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p>The Pregel River flows through the middle of Königsberg, and there are 7 bridges connecting the islands in the center.</p>\n<p>Starting from any point, can you cross all bridges exactly once?</p>\n</blockquote>\n<p>In other words, it’s a problem of drawing without lifting your pen. Since it’s hard to think about the problem as-is, let’s simplify the diagram, assign identifiers to each region, and organize the problem conditions.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/30994aef6d3b47d307b472255c8cc5a7/29114/bridges.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42mOwKJM1K5EwK5E0LZHUK5IwL5E0LpbUL5YwLRZ3qFZ1rFEzKRY3A0sBSTTEYF+tZVulblWp5lWnU9tra1ahGtqoX9ZtbVqu7NlkAkSWFSouNVpAKYdqDZsqdVskxDB179Wpey9P3ndz2f7z13fNmnTw8YZ9Ry7sXjT5wIMpey5M3nNxyt5rc/ddvL5z5uz916bvvzVj/00gmrYPqOsKw8JjbxYdezv7yKsFu49e2TGte8+11bt3n90xu3//vYXH3y04/m7u8Q8LDt6+tnPWnIM3Zxy8N/PgXSBacPTlwmNvGeYdebL01OfKlQscK2QLO80sKpUD6rXTW3T9WuyWH7q+4sjdpYduJPYGFrQbO9fqOtToOlRrW1co165esvTkJ4a5R54uO/WtdOlU3TxulTzB4A4Lq0pFxRzexl6rG7tnX9w1F0g299kq5vJZl8t6NekaFgrr5XEWLZ6w7PR3oM1Pl5z8WL9uXVCzZdskD6dGm/gOx5peh+CeyPlHHi089nzu4YeR3QF1PRYumDYvOv4OiOaf+LT68M2bu+fNOPZ+66Ezl/csm33845IT7xYff7fw+Iclh+9f3zVn3qG7sw49mn3oIRCBQur4O2BoXwOG26S9NxbvPXl15/T+/XfX7tl/fue8CftuTwEG9Z5LU/Zen7v3wrUdM2btuzJt343p+64D0bR9QF1XGRxqdOyqNW2qNDzqdAo7LSwq1QMb9HM6zM0rVL2azTybTK0r1ZxrtYFSjjVattWadkiIwaJMxqwEmIYkTEskwClMwrhYApjCTIpFXWrVnWvVTYpEzUBS4uCEiIIAhkVMbQ+U2WIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bridges\" title=\"\" src=\"/static/30994aef6d3b47d307b472255c8cc5a7/6af66/bridges.png\" srcset=\"/static/30994aef6d3b47d307b472255c8cc5a7/69538/bridges.png 160w,\n/static/30994aef6d3b47d307b472255c8cc5a7/72799/bridges.png 320w,\n/static/30994aef6d3b47d307b472255c8cc5a7/6af66/bridges.png 640w,\n/static/30994aef6d3b47d307b472255c8cc5a7/d9199/bridges.png 960w,\n/static/30994aef6d3b47d307b472255c8cc5a7/21b4d/bridges.png 1280w,\n/static/30994aef6d3b47d307b472255c8cc5a7/29114/bridges.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<ul>\n<li>You can start from any point.</li>\n<li>You must cross all bridges.</li>\n<li>You cannot cross a bridge you’ve already crossed.</li>\n<li>You can visit each region any number of times.</li>\n<li>You may or may not return to the starting region.</li>\n</ul>\n</blockquote>\n<p>After a few attempts drawing with a pen, you get the feeling it’s probably impossible. But to conclude that “it’s absolutely impossible to cross,” we need to prove why it’s impossible. Maybe there’s a way we just haven’t found yet.</p>\n<p>First, to think about this problem more easily, let’s redraw it not as a complex map but as a simplified graph.</p>\n<center>\n  <div style=\"width: 150px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 174.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAECElEQVR42p1WXUhbSRRO6irGn8QEjX+xtrutFrE+VBd8C4iuu0t3oQ8+BBUUBBHxQV/0QZDKiiiiiILIgj6IL7ILq4IKuui27tYmGlOrRPGnKoKKD/5GYmzu3e9cZtrbYKO5A4c5d+bOmTPnfOebUTU2NqYuLi6+Pjg4ENHbWltbM1RoDQ0N91RK2vLy8isRbXNz00O90+m0YliZMWr7+/vuvb09b25urnB0dCScnZ25EhMTlXu5sbExf3p6Ko6NjV3DmLi7u/sOw491Ol0U+0UdkMHKysr81dXVdZzWg363trb2FxqPjIxMRadRcmoTvNGbzeYHcXFxMfhOYONk7BHkm4CshYaG3k9OTg4lPTY2Nlyj0Zhk03rIg0A9TCK7TA+HJDKdJyQemyTcOZ5lZWUPq6urpVh1d3dHlJeXc4/UiKtktK+vL29ra+v3O7k3PT39l81myyO9p6fnxfj4+N98bmhoKIj6wcFBMzZ7z0Pj19OmpqZ/Ozo6fiW9paWlsKur6z2fg4dq1msBr0yCEyTYr4cw8qy/v1/CXGdnZ0x7e/szP15oId/dFkt5UsJkSVHLPeXHJzCwNTdvGhUVlZydnS0lJSMjI1yv1yf58ZCP3YcYfcKi5jrhLqKgoEDHyi3hBg/v8YzL5h6xdUEoiuhPsS0uLjYvLS0toI6vHA7HCkpRyjj9yBaqfQypOWmUlJT8jHK1Hx8ffwRrzSHB6SoMvPV6vaLVar0m+kI2HbzceNwuLi7yQRr5PgwUvLOzM09rFhYWOPX9pwJluWHMm5OTI6ysrIhut/vcYDBk09FNJhMdS4Ps/wn5A7pOq9VSluOzsrK+Pzk5uZycnBSam5sFeCnC1gl5+MblcokjIyPXgiAQ0drJSGZmZjBP1sDAgGV4eNhCOoGb5ggR29vbVo/HI05NTUkerq2tvVZZLBYzPHPg24U4OFF6ebeRK89maWnpT+vr6+/w7YYNmxRDlmXCn4EB9yYiUPts8CnLTCdsBnH6+gKHMvryVw2EwxgOKV8c3lopPt9Gdir52Od/cZQnRFsMexEVFRXf3qGWv94mJibG5ubmfiC9rq4upa2t7aVvUnCUMEgSi5t/tsFFPwW2+ZExTyrA/Bs3yIENziweHR1dgxpya3zppdDb26sjvbCwUFtTU5PCF7HyUxUVFZUiFONK7pSwm+6U6Ojo+DvfKURfKDENv/Vk9CVNQx4GfC+npaUZUKum9PT0WBmww1gSggJ+OYAlnOfn516Uzwdk+jmNh4SEKHs5oKDnr66uxNnZWYm+cF3S2yZF8dvm8PDQbbfbvVVVVQJ4Tbi8vHQZjcanil9fOO0MOFCcmZnhFPQmYK/krb6+/jFoa5Lehej/4RSk9AX7P/dqAvLlyMqBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graph\" title=\"\" src=\"/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png\" srcset=\"/static/d45e49c295c93e41171d55c8b167aca8/69538/graph.png 160w,\n/static/d45e49c295c93e41171d55c8b167aca8/72799/graph.png 320w,\n/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png 640w,\n/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png 644w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <br>\n  </div>\n</center>\n<p>In this graph, the points representing regions <code class=\"language-text\">A</code>, <code class=\"language-text\">B</code>, <code class=\"language-text\">C</code>, <code class=\"language-text\">D</code> are called vertices, the lines representing bridges <code class=\"language-text\">a</code> - <code class=\"language-text\">g</code> are called edges, and the number of edges attached to each vertex is called the degree.</p>\n<p>In the Königsberg problem, crossing a bridge means moving from one vertex to another, and not being able to cross a bridge again means we must delete the edge used to move to another vertex.</p>\n<p>Looking at the cases where we can move by crossing bridges, we can roughly classify them into three cases: starting, arriving at the end, and passing through. There’s a hidden pattern in the number of edges deleted in these three cases.</p>\n<h4 id=\"when-starting\" style=\"position:relative;\">When Starting<a href=\"#when-starting\" aria-label=\"when starting permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/c9c44/start.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42mNgAIL///8zguje+v0q05qPxk5qPqiILE4S+H8rtfnPteRz/1+GZAENy14y+fb/SU3H4kBy9fX7WXDq+88Atuz//XqO/zdT2v9djz/170ZKOcP/d4X//z+v/P3/ee7/46v7umycl6tFRtqLeHt7C+LCoaGh/HFx3tIMDKYSP64kV/5/X/r//8vm3/9f5f5n+P+25P//JzO//n9W+n//8vkbGRj0FbzdHPWdnJz0sGFHR7Cclp+3s4uyhk3qp9upS/6/qfr/78ncb//f5AMNvJ328f/LvP9A+vX/uwm6EO/UMxEMKqgaoHdt/99J//z/Re7//7fSXzD8v5Sp9P9GWvj/25myIAWhoQzMQIqJGAz0OjPY0CvJKv+vJof/v5kuDQB5t6HogMe9+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"start\" title=\"\" src=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/6af66/start.png\" srcset=\"/static/8ec24914b417c530b4d87c5a3b7fb4d4/69538/start.png 160w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/72799/start.png 320w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/6af66/start.png 640w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/d9199/start.png 960w,\n/static/8ec24914b417c530b4d87c5a3b7fb4d4/c9c44/start.png 1245w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>When departing from any vertex to move to another, only the edge serving as the exit will be deleted. That is, the starting vertex’s degree decreases by <code class=\"language-text\">1</code>.</p>\n<h4 id=\"when-arriving-at-the-end\" style=\"position:relative;\">When Arriving at the End<a href=\"#when-arriving-at-the-end\" aria-label=\"when arriving at the end permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/dd696d0493d19659168fc2ce6cf3f31d/27e9a/end.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR42mNgAIL/5+MF/t/IUfy/KpQZyGUEYiZc2N6+ngWkZ1LjoarJzUdXLm3fIvj/WZT8vxO5fAxgw24k6/27kfro/6PM//+vp81mIADq6/+DDGaY2nyuZG7X8em/rqZv+v846///m2k3/t9IUWT4/zS99//7qv//H3b//Pso/ceqmdF+Uoo2ar6+HnouLi666NjJyUkvwMtLU11b3be1vL3p242K//+f9n///676/7+naeUM/68mZfx/V/L//+f6///uZt7fPytQhoHBgz001J7H1dWVGxuOiXHlFpXXkpjf2mj983bem/9fmv7/f1kE9GFSMMP///8Z/99ITP5/PXHy/5vp+uBgAIoR8jpMzf/bSZb/r8dP/X8zMRIkAQBm3ZVwBqCyZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"end\" title=\"\" src=\"/static/dd696d0493d19659168fc2ce6cf3f31d/6af66/end.png\" srcset=\"/static/dd696d0493d19659168fc2ce6cf3f31d/69538/end.png 160w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/72799/end.png 320w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/6af66/end.png 640w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/d9199/end.png 960w,\n/static/dd696d0493d19659168fc2ce6cf3f31d/27e9a/end.png 1253w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Opposite to starting, the arriving vertex only needs to delete the edge that served as the entrance, so that vertex’s degree decreases by <code class=\"language-text\">1</code>.</p>\n<h4 id=\"when-passing-through\" style=\"position:relative;\">When Passing Through<a href=\"#when-passing-through\" aria-label=\"when passing through permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/8affb/cross.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABdUlEQVR42mOor//PxAAENVkntae2nNk1qfGoN4i/KnQVMwOJ4D8DAyOE8TjM8f6+xtUrpx8611l1xggkBrMIp+b/EM3/r2Wr/buRWPf/RqonROJqUsD/J7n//78p+P/nauypdQuzheXl7TliYly5fXx8uLDhtDQfLkElF/5NM0Pl/t9Lu/X/Y9X//4+BZlxJ8mP4/zq7+f/riv9vLjV++3i+6v/U5iUlAhIC8h4eHnqOjo7a6Nje3l4nwNNZTUffNnpKb3jO/6dpf/8+mf3z/4f6//+fpzUy/H+QZvTjcvrzr5dK/v+/m7b1/357FmQv4fXumTTW/7fStvx/mPn//8205/+vZhiCFWye264/q31By///WmwogUtMRFwo5v5/Pdnh/+1MWbigi4sLv5OTjRYkMhiYiDYM6FK4a5HYDP7+9gLe3q46UHWMJCeX/6HM////Z0RzoZMWuQZiAGCM8lHVQJALgYZSz0BXV1duZ2dnJWoYCADZfLQQLFEFEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cross\" title=\"\" src=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/6af66/cross.png\" srcset=\"/static/8f3307f7dbd27e4b12560ad4169d4b03/69538/cross.png 160w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/72799/cross.png 320w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/6af66/cross.png 640w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/d9199/cross.png 960w,\n/static/8f3307f7dbd27e4b12560ad4169d4b03/8affb/cross.png 1254w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>When passing through, we must delete both the edge serving as entrance and the edge serving as exit, so that vertex’s degree decreases by <code class=\"language-text\">2</code>.</p>\n<p>In other words, successfully drawing without lifting your pen on a graph means that when there are no more edges to cross while traversing vertices, “all vertices must have degree 0.” If there exists a vertex with non-zero degree, it means that vertex still has uncrossed edges connected to it, so the drawing without lifting your pen has failed.</p>\n<p>Here, we can get a hint to solve this problem from the fact that each vertex’s degree decreases by either <code class=\"language-text\">1</code> or <code class=\"language-text\">2</code>.</p>\n<h3 id=\"focus-on-whether-the-degree-is-odd-or-even\" style=\"position:relative;\">Focus on Whether the Degree Is Odd or Even<a href=\"#focus-on-whether-the-degree-is-odd-or-even\" aria-label=\"focus on whether the degree is odd or even permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When the degree decreases by 1, the odd/even status changes each time it’s performed. When it decreases by 2, the odd/even status never changes.</p>\n<p>The reason we’re talking about whether vertex degrees are odd or even is because “0 is even.”</p>\n<p>That is, if we understand the odd/even pattern of how degrees change when departing, arriving, or passing through vertices, we can easily determine whether this graph allows drawing without lifting your pen without examining all possible cases.</p>\n<h3 id=\"when-start-and-end-are-the-same\" style=\"position:relative;\">When Start and End Are the Same<a href=\"#when-start-and-end-are-the-same\" aria-label=\"when start and end are the same permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As we observed above, intermediate vertices that are passed through always have their degrees decrease by 2, so the odd/even status never changes no matter how many times they’re passed through.</p>\n<p>This means for a passing vertex’s degree to become 0 regardless of how you traverse, that vertex’s degree must be even from the start.</p>\n<p>If a passing vertex’s degree is odd, it will inevitably end up with degree 1, and if you arrive at that vertex via this edge, there are no remaining edges, so you can’t cross to another vertex.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 112.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe9rHmWVXWTVgsg//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACEBETIUH/2gAIAQEAAQUCW4aKd05LQBj/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAXEQADAQAAAAAAAAAAAAAAAAACICEx/9oACAECAQE/ASmJ/8QAHRAAAQQCAwAAAAAAAAAAAAAAEQABAhASQSExcf/aAAgBAQAGPwJaoldriTDyoPhE7ev/xAAbEAEAAgMBAQAAAAAAAAAAAAABAEERITEQUf/aAAgBAQABPyFa8NxUWcFeWmBJBQhu8TdsnlUx8n//2gAMAwEAAgADAAAAENDIPP/EABYRAQEBAAAAAAAAAAAAAAAAAAEgUf/aAAgBAwEBPxBDY//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxBKIuP/xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhUTFBYXH/2gAIAQEAAT8QBeveHhY/LlB3G5HxE3i8FUEGz5MVwnYVCduUG3C9wr7D6IlA1W51Qcz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cant get out\" title=\"\" src=\"/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg\" srcset=\"/static/000298206bf4e8d3922da6d4597311b7/0913d/cant-get-out.jpg 160w,\n/static/000298206bf4e8d3922da6d4597311b7/cb69c/cant-get-out.jpg 320w,\n/static/000298206bf4e8d3922da6d4597311b7/fe55e/cant-get-out.jpg 440w\" sizes=\"(max-width: 440px) 100vw, 440px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Once you enter a passing vertex with odd degree, you can't get out</small>\n</center>\n<p>Also, when start and end are the same, you decrease the starting vertex’s degree by 1 when first departing and decrease it by 1 again when arriving, so ultimately that vertex’s degree decreases by a total of 2.</p>\n<p>In this case too, since the starting vertex’s odd/even status cannot change, it must have an even degree from the start. That is, when start and end are the same, for drawing without lifting your pen to succeed, “all vertices must have even degrees.”</p>\n<h3 id=\"when-start-and-end-are-different\" style=\"position:relative;\">When Start and End Are Different<a href=\"#when-start-and-end-are-different\" aria-label=\"when start and end are different permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When start and end are different, passing vertices still must have even degrees from the start, but this time since start and end are different, the starting and ending vertices must have odd degrees.</p>\n<p>Intermediate passing vertices always have degrees decrease by 2, so odd/even doesn’t change, but at start and end, degrees decrease by only 1, so odd/even status changes.</p>\n<p>That is, when start and end are different, the conclusion is “start and end must have odd degrees, all other vertices must have even degrees.”</p>\n<h3 id=\"why-is-drawing-without-lifting-your-pen-impossible-for-the-königsberg-bridges\" style=\"position:relative;\">Why Is Drawing Without Lifting Your Pen Impossible for the Königsberg Bridges?<a href=\"#why-is-drawing-without-lifting-your-pen-impossible-for-the-k%C3%B6nigsberg-bridges\" aria-label=\"why is drawing without lifting your pen impossible for the königsberg bridges permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Summarizing these two conditions, drawing without lifting your pen while traversing graph vertices is possible when “all vertices have even degrees OR there are exactly 2 vertices with odd degrees.” Let’s look at the graph representing the Königsberg bridges again and check if it meets these conditions.</p>\n<center>\n  <div style=\"width: 150px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 174.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAECElEQVR42p1WXUhbSRRO6irGn8QEjX+xtrutFrE+VBd8C4iuu0t3oQ8+BBUUBBHxQV/0QZDKiiiiiILIgj6IL7ILq4IKuui27tYmGlOrRPGnKoKKD/5GYmzu3e9cZtrbYKO5A4c5d+bOmTPnfOebUTU2NqYuLi6+Pjg4ENHbWltbM1RoDQ0N91RK2vLy8isRbXNz00O90+m0YliZMWr7+/vuvb09b25urnB0dCScnZ25EhMTlXu5sbExf3p6Ko6NjV3DmLi7u/sOw491Ol0U+0UdkMHKysr81dXVdZzWg363trb2FxqPjIxMRadRcmoTvNGbzeYHcXFxMfhOYONk7BHkm4CshYaG3k9OTg4lPTY2Nlyj0Zhk03rIg0A9TCK7TA+HJDKdJyQemyTcOZ5lZWUPq6urpVh1d3dHlJeXc4/UiKtktK+vL29ra+v3O7k3PT39l81myyO9p6fnxfj4+N98bmhoKIj6wcFBMzZ7z0Pj19OmpqZ/Ozo6fiW9paWlsKur6z2fg4dq1msBr0yCEyTYr4cw8qy/v1/CXGdnZ0x7e/szP15oId/dFkt5UsJkSVHLPeXHJzCwNTdvGhUVlZydnS0lJSMjI1yv1yf58ZCP3YcYfcKi5jrhLqKgoEDHyi3hBg/v8YzL5h6xdUEoiuhPsS0uLjYvLS0toI6vHA7HCkpRyjj9yBaqfQypOWmUlJT8jHK1Hx8ffwRrzSHB6SoMvPV6vaLVar0m+kI2HbzceNwuLi7yQRr5PgwUvLOzM09rFhYWOPX9pwJluWHMm5OTI6ysrIhut/vcYDBk09FNJhMdS4Ps/wn5A7pOq9VSluOzsrK+Pzk5uZycnBSam5sFeCnC1gl5+MblcokjIyPXgiAQ0drJSGZmZjBP1sDAgGV4eNhCOoGb5ggR29vbVo/HI05NTUkerq2tvVZZLBYzPHPg24U4OFF6ebeRK89maWnpT+vr6+/w7YYNmxRDlmXCn4EB9yYiUPts8CnLTCdsBnH6+gKHMvryVw2EwxgOKV8c3lopPt9Gdir52Od/cZQnRFsMexEVFRXf3qGWv94mJibG5ubmfiC9rq4upa2t7aVvUnCUMEgSi5t/tsFFPwW2+ZExTyrA/Bs3yIENziweHR1dgxpya3zppdDb26sjvbCwUFtTU5PCF7HyUxUVFZUiFONK7pSwm+6U6Ojo+DvfKURfKDENv/Vk9CVNQx4GfC+npaUZUKum9PT0WBmww1gSggJ+OYAlnOfn516Uzwdk+jmNh4SEKHs5oKDnr66uxNnZWYm+cF3S2yZF8dvm8PDQbbfbvVVVVQJ4Tbi8vHQZjcanil9fOO0MOFCcmZnhFPQmYK/krb6+/jFoa5Lehej/4RSk9AX7P/dqAvLlyMqBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graph\" title=\"\" src=\"/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png\" srcset=\"/static/d45e49c295c93e41171d55c8b167aca8/69538/graph.png 160w,\n/static/d45e49c295c93e41171d55c8b167aca8/72799/graph.png 320w,\n/static/d45e49c295c93e41171d55c8b167aca8/6af66/graph.png 640w,\n/static/d45e49c295c93e41171d55c8b167aca8/78274/graph.png 644w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n</center>\n<p>The degrees of vertices in this graph are <code class=\"language-text\">A=3, B=5, C=3, D=3</code> — all vertices have odd degrees, which doesn’t match any condition we found above.</p>\n<p>Thus, it’s proven that the Königsberg bridges have a structure where drawing without lifting your pen is impossible.</p>\n<p>In graph theory, such a drawing without lifting your pen — that is, a path that passes through all edges of a graph exactly once — is called an Eulerian trail. The reason is that the great Leonhard Euler had already proved this problem in 1735 and used it in his paper.</p>\n<p>You can check the paper at <a href=\"http://eulerarchive.maa.org//docs/originals/E053.pdf\" target=\"_blank\" rel=\"nofollow\">Solutio Problematis ad Geometriam Situs Pertinentis</a>, but as the title suggests, it’s not in English. Like most papers written by highly educated people of that era, it’s written in Latin, so actually reading it is difficult. But just in case there are any geniuses out there who, beyond my imagination, can read Latin, I’ll include it anyway.</p>\n<p>Anyway, the key idea to note in Euler’s solution is that when investigating each vertex’s degree, he focused not on the degree itself but on the property of odd and even. Without understanding the pattern of how a vertex’s degree status changes between odd and even when departing, arriving, or passing through, this problem would have been difficult to solve.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The three problems we looked at in this post don’t use difficult mathematical formulas.</p>\n<p>The inference that <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>10</mn><mn>100000000</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{100000000}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">100000000</span></span></span></span></span></span></span></span></span></span></span></span></span> days from now must have some pattern based on the 7-day repeating pattern, being able to think of the black and white repeating pattern when looking at a two-square tile, being able to think of the pattern of odd/even changes in each vertex’s degree without examining all cases of graph traversal — these are all problem-solving approaches anyone can take if they just understand the properties of numbers, even without knowing complex mathematical formulas.</p>\n<p>By understanding and using fundamental properties of numbers like this, you can solve complex problems simply. The sad part is that this isn’t an ability you can gain just through studying. To develop this ability, you just need to practice thinking this way a lot.</p>\n<p>Solving many coding tests is of course good, but finding and analyzing patterns in various problems encountered in daily life might also help, right? For example, when a friend suggests meeting on November 10th, instead of checking your phone for what day it is, you could try calculating it yourself.</p>\n<p>That wraps up this post on simplifying complex problems with math!</p>","fields":{"slug":"20191030-make-simple-with-math-en","path":"/2019/10/30/make-simple-with-math/en/","lang":"en"},"frontmatter":{"title":"Simplifying Complex Problems with Math","subTitle":"Think math is hard? Finding patterns makes problem-solving easier","date":"Oct 30, 2019","categories":["Programming","Algorithm"],"tags":["Math","Programming","Algorithm","Coding Test","Math for Developers"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/d803c/thumbnail.png","srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/d803c/thumbnail.png 320w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/fc5c5/thumbnail.webp 320w,\n/static/058a4bdbe47ac4f5b0b72c3cdf42d514/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/01fb2/thumbnail.png","srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/058a4bdbe47ac4f5b0b72c3cdf42d514/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"c6bec1b2-f1bb-5b96-844f-156ec242c204","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-a-heap\">What Is a Heap?</a></p>\n</li>\n<li>\n<p><a href=\"#complete-binary-tree\">Complete Binary Tree</a></p>\n<ul>\n<li><a href=\"#why-arrays-are-more-efficient\">Why Arrays Are More Efficient</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#difference-between-complete-binary-trees-and-heaps\">Difference Between Complete Binary Trees and Heaps</a></p>\n</li>\n<li>\n<p><a href=\"#lets-implement-a-heap\">Let’s Implement a Heap</a></p>\n<ul>\n<li><a href=\"#inserting-new-values-bubble-up\">Inserting New Values: Bubble Up!</a></li>\n<li><a href=\"#extracting-values-from-the-root-trickle-down\">Extracting Values from the Root: Trickle Down!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to explain and implement the heap — one of the most representative data structures. As I’ve mentioned in previous posts, I’m currently unemployed. Now that my month of healing in Prague is over, it’s time to start going to interviews. As everyone knows, there’s a very high chance of getting questions about basic algorithms or data structures in interviews. But since I’ve been neglecting my fundamentals study for about a year, I need to study again.","html":"<p>In this post, I want to explain and implement the heap — one of the most representative data structures.</p>\n<p>As I’ve mentioned in previous posts, I’m currently unemployed. Now that my month of healing in Prague is over, it’s time to start going to interviews. As everyone knows, there’s a very high chance of getting questions about basic algorithms or data structures in interviews. But since I’ve been neglecting my fundamentals study for about a year, I need to study again.</p>\n<!-- more -->\n<p>So I’m planning to review data structures first, starting with the heap — the one I remember least well.</p>\n<h2 id=\"what-is-a-heap\" style=\"position:relative;\">What Is a Heap?<a href=\"#what-is-a-heap\" aria-label=\"what is a heap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A heap is fundamentally a data structure based on a complete binary tree, where a size relationship exists between parent and child nodes. Because of this, the root node of a heap is either the largest or smallest value among all data in the heap.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/26d27d27a40c51726b85a6765778022c/29114/heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVR42o1Sy0oDMRTt5/gH7gU/wB9w4UrQn9CFvyCC24obV1KhC0GhilAUoVCkUGydSWbUeSeZRx43TmZaQaelvYuThNxz77knaelGAECJnudhZLn4Iwh8vSRayy60zG+e8HF7lBBmKq5LBqWUWU87eOdkFCZ5JUc1KyzuLIRwMA6jhGYSI5tSulK2KQwi5n4P2RPG0pl8KTF26GcPMus3rUEGWUKGroLbjczrV1IlaDOA5CS432RvR/M0+Ec2Z5bmrjXM3Y6D3qWE2vrKeZ/YXd/uhxFdJBsKRmMbYc55eYpj4jpTyLFWlARjx/2qPSs3sT/Ron48mJHTwb7/cihkbXZRIhmfJY9bbHAQPmyLglRZSoGOnvfY6+6fzvn0nKP2XL+ZU5FhgS6Ed1egy/mQBsV3l7vXqz7JGvEDXwN3AjESS6YAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"heap\" title=\"\" src=\"/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png\" srcset=\"/static/26d27d27a40c51726b85a6765778022c/69538/heap.png 160w,\n/static/26d27d27a40c51726b85a6765778022c/72799/heap.png 320w,\n/static/26d27d27a40c51726b85a6765778022c/6af66/heap.png 640w,\n/static/26d27d27a40c51726b85a6765778022c/d9199/heap.png 960w,\n/static/26d27d27a40c51726b85a6765778022c/21b4d/heap.png 1280w,\n/static/26d27d27a40c51726b85a6765778022c/29114/heap.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    A Max Heap where the maximum value is at the root<br>\n    It looks exactly like a complete binary tree\n  </small>\n</center>\n<p>This means when you want to access the largest or smallest value in the heap, you can access it in one shot without any comparison operations, and the time complexity of this access operation is naturally <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>. Because of this characteristic, heaps are useful in areas where you need to quickly find the largest or smallest value among multiple pieces of data.</p>\n<p>Actually, if you simply want to access the maximum or minimum value in some data with <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity, you could just sort a linked list or array and use that. Once you sort it once, you can just pluck values from the head whenever you need them.</p>\n<p>However, when adding new data to this sorted data collection, you have to search through the entire collection to find the new maximum and minimum values and re-sort.</p>\n<p>While linear data structures like arrays and linked lists require <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity for this process, a binary tree sorted so that parents are larger or smaller than children only needs to compare with the newly added node’s parent nodes to maintain the sorted state, requiring only <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>In other words, the more data you want to sort, the more advantageous it becomes.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVR42pWSzUoDMRDH+zi+gldBfBVBH8KjB19AUG+Klx48eFNQ1F5aCrJYkVq02Oxmt7vb/c7HJBOztLUHbdWBBDLML/+Zf9IwywOZQqlXFDSWgagM+FfsZR9Z8R8YrZpWwiRPB1Frq0qosfqo/6oMAK5HszDQVUw8v0gSA7/AWC9IZXRPRu9lWdU5CcC56wc5udVJf1ryE2ynNIaRZny9xsL2bG7UKJViSXy3Xvb2UNoEfIfr+8qK048ep5ceeVMKp8bZbex52eAicjuTSWZH+tKewyjKIh0RV0ppT2maU2+I3DW6yONX6o+NNlqAH4xpSIosMBoXcOVsR91dUFOzhd3zwWHW2iidncnDJoi8zkuBXDQfT5rOsa6Y1Z/BfHgkyem8/9pYnfcEOYPwRpDzhUna9En3edS2Rq74JMvDNjx/tk8Qa3f4BKGthQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compares\" title=\"\" src=\"/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png\" srcset=\"/static/47f8478a4454f5e1e36018547cc390aa/69538/compares.png 160w,\n/static/47f8478a4454f5e1e36018547cc390aa/72799/compares.png 320w,\n/static/47f8478a4454f5e1e36018547cc390aa/6af66/compares.png 640w,\n/static/47f8478a4454f5e1e36018547cc390aa/d9199/compares.png 960w,\n/static/47f8478a4454f5e1e36018547cc390aa/21b4d/compares.png 1280w,\n/static/47f8478a4454f5e1e36018547cc390aa/29114/compares.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>You only need to compare this part to re-sort, not the entire data</small>\n</center>\n<p>Since heaps are based on complete binary trees, the implementation method is also similar to complete binary trees. So before implementing a heap, I want to talk about the characteristics of complete binary trees first.</p>\n<h2 id=\"complete-binary-tree\" style=\"position:relative;\">Complete Binary Tree<a href=\"#complete-binary-tree\" aria-label=\"complete binary tree permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, let’s look at the characteristics of complete binary trees, which form the basis of heaps. A binary tree is a tree where any single node can have at most 2 child nodes.</p>\n<p>This means the maximum number of nodes that can be at each level is fixed, and you can assign unique indices to nodes.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR42n1Qu07DMBTNH8IHMDPxB+wwIXVi4BdAzLAjoS7AwkMoIokD5GHydFPXrxwSJ61aoFiyr2zfc8/DwT+rbbWtM3KB/O4AZdVASgmt1VpPu4FxtoyyZw+MogRZQtCUAXw/QJqmYIzZLYSAMWYD5mxTN+cchBALXC6leoIIWZZbpXX3V5Wl7dFcAEL9GNhZ7LXN3RPQp1MMho21Za2N9or4EdX9PlpVw2iNRY+5PoOc7P1WWDEO6l0hC286lfrPMGjsofTPEUfhMh2Ytwfo28v1gQacfSIMic1FdvZCEkA08aDStjAkkYcsLyyC0i/Q7g4zW9E5aIdQTeOinO5C8mJFIdg7qukOWv4x5PpyiPp1MvIvbKmfj8Dd4/FN4Rtc0Rneo/vvfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"not allow new node\" title=\"\" src=\"/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png\" srcset=\"/static/e856823cf8415cb0c25f814a983547b7/69538/not_allow_new_node.png 160w,\n/static/e856823cf8415cb0c25f814a983547b7/72799/not_allow_new_node.png 320w,\n/static/e856823cf8415cb0c25f814a983547b7/6af66/not_allow_new_node.png 640w,\n/static/e856823cf8415cb0c25f814a983547b7/d9199/not_allow_new_node.png 960w,\n/static/e856823cf8415cb0c25f814a983547b7/21b4d/not_allow_new_node.png 1280w,\n/static/e856823cf8415cb0c25f814a983547b7/3a5d5/not_allow_new_node.png 1807w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A parent node must have 2 or fewer child nodes.</small>\n</center>\n<p>A complete binary tree is a binary tree where nodes are created by filling from the left side of the tree sequentially. In a complete binary tree, you cannot create nodes at the next level until the current level is completely filled. In other words, all levels except the last must be completely filled with nodes.</p>\n<p>Trees are usually implemented using linear data structures like linked lists or arrays, and depending on the characteristics of linked lists and arrays, there are different pros and cons to consider. <small>(The differences between linked lists and arrays aren’t the topic of this post, so I won’t explain them separately.)</small></p>\n<p>Generally, trees are implemented using linked lists, but for complete binary trees, implementing with arrays is more efficient.</p>\n<h3 id=\"why-arrays-are-more-efficient\" style=\"position:relative;\">Why Arrays Are More Efficient<a href=\"#why-arrays-are-more-efficient\" aria-label=\"why arrays are more efficient permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Actually, the reason linked lists are generally used to implement trees is that implementing trees with arrays is too inconvenient due to the fixed memory allocation nature of arrays.</p>\n<p>However, with complete binary trees, these inconveniences disappear, so you can fully take advantage of arrays’ benefits.</p>\n<h4 id=\"easy-access-to-any-node\" style=\"position:relative;\">Easy access to any node<a href=\"#easy-access-to-any-node\" aria-label=\"easy access to any node permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>This takes full advantage of arrays’ biggest benefit: if you know the index, you can access that element directly. Since binary trees have a fixed maximum number of nodes at each level, you can find a specific node’s index with a simple formula and access it with <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>First, if you want to access parent or child nodes based on a specific node, you can calculate indices as follows:</p>\n<blockquote>\n<p>When the root node has index 0 and the current node has index <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>:</p>\n<ul>\n<li>Parent node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">(i-1) / 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span></span></li>\n<li>Left child node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li>Right child node: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2i+2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span></span></li>\n</ul>\n</blockquote>\n<p>There’s also the method above for finding parent and children indices based on a specific node’s index, but the real advantage of array-based complete binary trees is that you can directly access a node at any level and position through a simple formula.</p>\n<p>This is possible because you can easily calculate <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span>, the maximum number of nodes up to a specific level, using the properties of complete binary trees.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>c</mi><mo>=</mo><msup><mn>2</mn><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">c = 2^{level} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9824em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getAllNodeCountByLevel</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">**</span> level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">7</span> <span class=\"token comment\">// Maximum number of nodes in a complete binary tree with 3 levels</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Using this formula, you can easily find the index of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node at the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>th level.</p>\n<p>For example, if you want to find index <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node at level <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> of a complete binary tree, you get the total number of nodes <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span> up to level <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> (one level above where you want to access), then add which <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>th node you want to access within that level.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>i</mi><mo>=</mo><mi>c</mi><mo>+</mo><mi>m</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i = c + m - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getNodeIndex</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">getAllNodeCountByLevel</span><span class=\"token punctuation\">(</span>level <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getNodeIndex</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">5</span> <span class=\"token comment\">// Index of the 3rd node at level 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>We subtract 1 at the end because we want the index, not the ordinal position. Don’t forget that array indices start from <code class=\"language-text\">0</code>.</p>\n<p>As such, complete binary trees implemented with arrays make it easy to access desired nodes through simple calculations, but with linked list implementations, you can’t access nodes directly and must traverse the tree.</p>\n<h4 id=\"no-need-to-shift-array-elements-back\" style=\"position:relative;\">No need to shift array elements back<a href=\"#no-need-to-shift-array-elements-back\" aria-label=\"no need to shift array elements back permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Since arrays allocate contiguous memory space, inserting an element in the middle requires shifting elements back one position to secure new memory space — a sad situation. But linked lists can easily insert new elements in the middle just by changing <code class=\"language-text\">prev</code> and <code class=\"language-text\">next</code> values.</p>\n<p>However, binary trees have the constraint that each node can have at most 2 children, so a tree of height <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span> has a fixed maximum of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>h</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{h} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9324em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> nodes. Once you allocate this much space in memory, you never need to shift array elements to insert new nodes in the middle.</p>\n<h4 id=\"the-tree-doesnt-become-skewed\" style=\"position:relative;\">The tree doesn’t become skewed<a href=\"#the-tree-doesnt-become-skewed\" aria-label=\"the tree doesnt become skewed permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Generally, when an array-implemented tree becomes skewed, serious memory waste occurs. This is easier to understand with a diagram.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvGiGav//EABcQAAMBAAAAAAAAAAAAAAAAAAEQESD/2gAIAQEAAQUCOIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAACAwADAAAAAAAAAAAAAAABEQAQUTFhof/aAAgBAQABPyEl3Gjr8pBk7AA4Ff/aAAwDAQACAAMAAAAQlw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAGxABAAIDAQEAAAAAAAAAAAAAAREhABAxUfD/2gAIAQEAAT8Qh0S8MFQ38H5GgiF9OPqQvdf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"balanced\" title=\"\" src=\"/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg\" srcset=\"/static/594a877d7281f11d27e067794310ed3f/0913d/balanced.jpg 160w,\n/static/594a877d7281f11d27e067794310ed3f/cb69c/balanced.jpg 320w,\n/static/594a877d7281f11d27e067794310ed3f/c08c5/balanced.jpg 640w,\n/static/594a877d7281f11d27e067794310ed3f/6a068/balanced.jpg 960w,\n/static/594a877d7281f11d27e067794310ed3f/eea4a/balanced.jpg 1280w,\n/static/594a877d7281f11d27e067794310ed3f/0f98f/balanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>The diagram above shows an ideally balanced binary tree. If we implement this tree as an array, values would be stored in memory like this:</p>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>E</td>\n<td>F</td>\n</tr>\n</tbody>\n</table>\n<p>It’s packed into memory with no empty spaces in between. Since node indices are assigned sequentially from the left of the tree, if you create child nodes from the left, you can avoid creating empty spaces in memory.</p>\n<p>Of course, if you create the right child first while skipping the left, empty spaces will appear. But the bigger problem is when the tree becomes a skewed tree, heavily leaning to one side.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvyqDVf//EABUQAQEAAAAAAAAAAAAAAAAAABBC/9oACAEBAAEFAmj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPwGn/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITEQcYH/2gAIAQEAAT8hWi2UuXyF1ncNuuf/2gAMAwEAAgADAAAAEFQP/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQMBAT8Qh//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EBj/xAAbEAADAAIDAAAAAAAAAAAAAAABESEAQRAxof/aAAgBAQABPxAbiY5EEFprIIirrKfoF7z/AP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unbalanced\" title=\"\" src=\"/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg\" srcset=\"/static/9b55af495204108a9d6c5989a4f0ee15/0913d/unbalanced.jpg 160w,\n/static/9b55af495204108a9d6c5989a4f0ee15/cb69c/unbalanced.jpg 320w,\n/static/9b55af495204108a9d6c5989a4f0ee15/c08c5/unbalanced.jpg 640w,\n/static/9b55af495204108a9d6c5989a4f0ee15/6a068/unbalanced.jpg 960w,\n/static/9b55af495204108a9d6c5989a4f0ee15/eea4a/unbalanced.jpg 1280w,\n/static/9b55af495204108a9d6c5989a4f0ee15/0f98f/unbalanced.jpg 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<table>\n<thead>\n<tr>\n<th>index</th>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index</td>\n<td>A</td>\n<td>B</td>\n<td>C</td>\n<td>D</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>H</td>\n</tr>\n</tbody>\n</table>\n<p>As shown above, a heavily skewed tree creates empty spaces in memory because nodes are created at the next level while skipping intermediate indices. That’s why we say memory space is wasted. Of course, if it’s skewed to the right, the skipped indices are even larger, so the memory waste is even worse.</p>\n<p>However, complete binary trees have constraints: nodes must be filled from the left sequentially, and you can’t fill nodes at the next level until all nodes in the current level are filled. So there’s no possibility of the tree becoming skewed, meaning no empty spaces in memory.</p>\n<p>For these reasons, complete binary trees are often implemented taking advantage of arrays’ direct element access, and heaps, which are based on complete binary trees, are also mainly implemented with arrays for the same reasons.</p>\n<h2 id=\"difference-between-complete-binary-trees-and-heaps\" style=\"position:relative;\">Difference Between Complete Binary Trees and Heaps<a href=\"#difference-between-complete-binary-trees-and-heaps\" aria-label=\"difference between complete binary trees and heaps permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since heaps are based on complete binary trees, the basic node insertion and deletion algorithms are the same as regular complete binary trees. Node insertion is only possible at the end of the array, and after deleting a node, remaining nodes must be pulled forward to fill the empty space.</p>\n<p>However, heaps have the condition that a size relationship must exist between parent and child nodes, so “functionality to re-sort nodes after insertion and deletion” is additionally required.</p>\n<p>Also, since heaps are data structures designed to easily find maximum or minimum values within the tree, there’s rarely a need to directly access nodes in the middle of the tree. You just pluck and use the root node at <code class=\"language-text\">Array[0]</code>. Extracting the root node means deleting it, so the heap must be re-sorted accordingly.</p>\n<p>Heaps are divided into max heaps and min heaps. In a max heap, the parent’s value must always be larger than the children’s. In a min heap, conversely, the parent’s value must be smaller than the children’s. That is, “the root of a max heap is the largest value in the heap” and “the root of a min heap is the smallest value in the heap.”</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAC4jAAAuIwF4pT92AAABYUlEQVR42nVS2ZKDIBDM/3/hvmw2ajwCiNyHEdxWEjebqowU1bTdM8PoabRSelPWTTCmODeCSk7EuIORSADJ1FTWIYbxJL1e98g5D33fXq91VRFCLj+Xru0A2uZKKQVu6gZgU+JZV+E1zOY4lxTLsuQ9UkovIJXjIYbxaS4snDmtHyLlD+a0syq6M23Ts4u3qNhAFT/E/yqHZdazd3NAirf6OJrZ2zno6Nw9lty72W0DA/tN23tagDtBa357NdfjMAgGAMHXUCHRw6y8icuMaiiLHRfjQaOICHYbVc4yWFSbgoZz46NV0aJN5e1JBVOzXgenve0nCl1DB1z7TFpIbfQV67d29lcDvrQzKtiaDdj/7ky9ZF4RJ1hQmOc+2VyKo53O8tHrmxMy2vwysMdPAlZGBwXafpszsiAvGh6Dxg4mLndmxIlbhe6xbHAmOPQJgCMSF74A8Cb4otHeVVPfCvILGpu2RzRW2cIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"min max heap\" title=\"\" src=\"/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png\" srcset=\"/static/7ef8339acc6f0333106978ece7c8b376/69538/min-max-heap.png 160w,\n/static/7ef8339acc6f0333106978ece7c8b376/72799/min-max-heap.png 320w,\n/static/7ef8339acc6f0333106978ece7c8b376/6af66/min-max-heap.png 640w,\n/static/7ef8339acc6f0333106978ece7c8b376/d9199/min-max-heap.png 960w,\n/static/7ef8339acc6f0333106978ece7c8b376/00d43/min-max-heap.png 1000w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>So implementing a heap means implementing a complete binary tree and adding sorting functionality appropriate for max heaps and min heaps.</p>\n<h2 id=\"lets-implement-a-heap\" style=\"position:relative;\">Let’s Implement a Heap<a href=\"#lets-implement-a-heap\" aria-label=\"lets implement a heap permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since the only difference between max heaps and min heaps is the sorting condition, I’ll only implement a max heap. As I mentioned above, for complete binary trees it’s more efficient to use arrays than linked lists, so I’ll implement using an array.</p>\n<p>First, let’s create a small and cute <code class=\"language-text\">MaxHeap</code> class.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxHeap</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If I wanted to implement with a linked list, I’d declare a separate <code class=\"language-text\">Node</code> class, but since I’m using an array, it’s extremely simple. Now let’s create a method for inserting values into the heap.</p>\n<h3 id=\"inserting-new-values-bubble-up\" style=\"position:relative;\">Inserting New Values: Bubble Up!<a href=\"#inserting-new-values-bubble-up\" aria-label=\"inserting new values bubble up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When inserting a new value into a heap, we always fill from the left of the tree according to complete binary tree rules. In other words, we just shove values one by one into the tail of the array using the <code class=\"language-text\">push</code> method. If this doesn’t make sense, go back and re-read the complete binary tree explanation above.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Max heaps have the constraint that parents must always have larger values than children, so if the node we inserted has a larger value than its parent node, we need to swap their positions.</p>\n<p>And we repeat this process until the inserted node reaches the root or has a smaller value than its parent — whichever condition is satisfied first.</p>\n<p>The way the newly added value swaps with parent nodes and gradually rises up the tree resembles bubbles rising, which is why it’s called “Bubble Up.”</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42qWSy0rDQBSG+zi+gluh7yLoI/gIgmulW8VFXYlLoUgUQbTUQhWk1NJMpiGZ1GRmkrnljJmmFUpFK57Fv/g537lxGvYf0fjehrISQzpieAig/gJXJJQV/fF6RLxmweJlOdios9YaBTjLZqCZjzBj9NfOrjDoVBEP+e+c57VrjAkCzEIPxOQrbQ0GU0mBLpLrrSJ+cAZoa+fLS5rcbPPnAyssyALWYOfwXEwnAzG9wmhkzDwHnMYkoaNLMr6fJZmVyiq9CoPkLPVRoJS7bZrSKR6DCGzJKBniMKoAkDqM4pDgPA1X4Ly/S572tanvKiulw+Psbof392a3Ta2om4xmVpt2t9XundSLL2Axbil0upzf7VnSgURnOu5IdL44kjGWF2/o8SXq/fgkm33YJyCFeIuZ4cs3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bubbleup\" title=\"\" src=\"/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png\" srcset=\"/static/ba74af93911b1287276f76834eaa6b01/69538/bubbleup.png 160w,\n/static/ba74af93911b1287276f76834eaa6b01/72799/bubbleup.png 320w,\n/static/ba74af93911b1287276f76834eaa6b01/6af66/bubbleup.png 640w,\n/static/ba74af93911b1287276f76834eaa6b01/d9199/bubbleup.png 960w,\n/static/ba74af93911b1287276f76834eaa6b01/21b4d/bubbleup.png 1280w,\n/static/ba74af93911b1287276f76834eaa6b01/29114/bubbleup.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>It swaps with the parent and gradually climbs up the tree</small>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">insert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bubbleUp</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> currentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentIndex <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> parentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parentNode <span class=\"token operator\">>=</span> currentNode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parentNode<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> currentNode<span class=\"token punctuation\">;</span>\n  index <span class=\"token operator\">=</span> parentIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">bubbleUp</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">bubbleUp</code> method compares the value of the node at the given index with its parent node’s value, and if the node has a larger value than the parent, it swaps their positions. Due to tree characteristics, this operation can be solved with divide and conquer, so I implemented it with recursive calls.</p>\n<p>If we test at this point, we can see that the largest value in the heap is positioned at the head of the array — the root of the tree.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span> <span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n  <img src=\"/9e2a2f66409a09f23bc1717c7002b9fd/max-heap.gif\" width=\"100%\">\n  <br>\n  <small>When a value larger than the parent is added, it swaps positions with the parent</small>\n  <br>\n  <br>\n</center>\n<h3 id=\"extracting-values-from-the-root-trickle-down\" style=\"position:relative;\">Extracting Values from the Root: Trickle Down!<a href=\"#extracting-values-from-the-root-trickle-down\" aria-label=\"extracting values from the root trickle down permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now that we’ve implemented value insertion and bubble up, let’s create a method to extract values from the root. This is the delete operation. When we extract the root node, its position becomes empty, so we need to re-sort the heap and fill the root node again.</p>\n<p>Instead of promoting the existing root node’s children to the root, we take the node at the very end of the tree and insert it as the root node. This is to reduce the number of operations by preventing empty spaces in the modified heap.</p>\n<p>If we directly pulled up the children right below the root to use as the new root, the space where that node was would naturally become empty, and then we’d need comparison operations to determine which node to pull up from the next level.</p>\n<p>And since heaps must always maintain the form of a complete binary tree, if the tree becomes skewed during this process, we’d have the hassle of rebalancing the tree.</p>\n<p>So we use the last node as the new root node and swap positions while comparing with children. The way the new root node gradually moves down the tree resembles a water drop falling, which is why it’s called “Trickle Down.” <small>(For a computer term, it’s somehow poetic…)</small></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">extract</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> max <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> max<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">trickleDown</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> leftChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rightChildIndex <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> index <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> largest <span class=\"token operator\">=</span> index<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>leftChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>leftChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> leftChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rightChildIndex <span class=\"token operator\">&lt;=</span> length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>rightChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    largest <span class=\"token operator\">=</span> rightChildIndex<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>largest <span class=\"token operator\">!==</span> index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">[</span>largest<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">trickleDown</span><span class=\"token punctuation\">(</span>largest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trickle down can also be solved through divide and conquer via recursive calls, just like bubble up.</p>\n<p>The <code class=\"language-text\">trickleDown</code> method compares the parent node’s value with the left and right child nodes’ values, and if a child has a larger value than the parent, it swaps their positions.</p>\n<p>Simply put, the one with the largest value among the three nodes takes the parent position. If the parent loses this power struggle, think of it as being demoted to where its child used to be.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABmbOqp0WG417IykP/xAAeEAACAQQDAQAAAAAAAAAAAAAAAQIDERITISIxM//aAAgBAQABBQJLlpIujNFO7c49tbtFYmuTKf1Je//EABcRAQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BYuP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAgMBAAAAAAAAAAAAAAAAARAhAhExYf/aAAgBAQAGPwJI9LK6jtF5G09ocOf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBBcYGh/9oACAEBAAE/IbDdstdW1ElrTGsVgzENQ6ZmRS+osx0R0qutMVXVeWfMzs4v/9oADAMBAAIAAwAAABAA5/P/xAAZEQACAwEAAAAAAAAAAAAAAAAAEQEQMVH/2gAIAQMBAT8QiHouhsr/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQFB/9oACAECAQE/EF1Oo//EAB8QAQACAgICAwAAAAAAAAAAAAEAESExQVEQYXGBsf/aAAgBAQABPxA2yAWOtYgIOlXFG371BJrbqCQU6pp4SLULRVVtsI+Z+G7R1Eb7KnJ8kwQDRDS9zEj0IfOD8Sf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Arthas King\" title=\"\" src=\"/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg\" srcset=\"/static/8cb9ae698e4cb007189258112e07a9b6/0913d/Arthas_King.jpg 160w,\n/static/8cb9ae698e4cb007189258112e07a9b6/cb69c/Arthas_King.jpg 320w,\n/static/8cb9ae698e4cb007189258112e07a9b6/d7854/Arthas_King.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The succession process somehow reminds me of this guy</small>\n</center>\n<p>If the parent and child positions are swapped during this process, the swapped parent node’s index is passed as an argument to <code class=\"language-text\">trickleDown</code> again to repeat this process.</p>\n<p>Now let’s do a simple test like we did with bubble up. The values going into the heap are the same as we used for bubble up earlier.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxHeap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheap<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MAX_VALUE = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HEAP = '</span><span class=\"token punctuation\">,</span> heap<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">32</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">23</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token constant\">MAX_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token constant\">HEAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <img src=\"/95d84ea96d74c0b03c6309156fa60dad/min-heap.gif\" width=\"100%\">\n  <br>\n  <small>Note that we take a node from the very end of the tree to use as the root node</small>\n  <br>\n  <br>\n</center>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A heap itself is simply a complete binary tree where data is loosely sorted, but because the root always contains the maximum or minimum value among all data in the heap, it can be used in various applications.</p>\n<p>One representative use is a sorting method for linear data structures called heap sort. Currently, V8’s <code class=\"language-text\">Array.prototype.sort</code> method uses quick sort, but in the early days, it briefly used heap sort — a sorting algorithm that uses heaps.</p>\n<p>Anyway, it feels good to revisit these basic data structures I had forgotten about.</p>\n<p>Since heaps are used in so many places, it doesn’t hurt to know them, and I remember being asked about them quite often in interviews too. Now that I’ve become an unemployed developer with no connection to any company’s business logic, I should take this opportunity to study the fundamental theory I’ve been neglecting in more detail.</p>\n<p>That wraps up this post on heaps — the data structure that helps you find minimum and maximum values fast.</p>","fields":{"slug":"20191012-introduction-data-structure-heap-en","path":"/2019/10/12/introduction-data-structure-heap/en/","lang":"en"},"frontmatter":{"title":"Heaps: Finding Min and Max Values Fast","subTitle":"The magic of O(log n) — fast min/max lookups using heaps","date":"Oct 12, 2019","categories":["Programming","Algorithm"],"tags":["Heap","Data Structure","JavaScript","Tree Traversal","Tree Sorting","Algorithm"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/d803c/thumbnail.png 320w,\n/static/bbb54a15b5551610fa2986be824555fd/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/fc5c5/thumbnail.webp 320w,\n/static/bbb54a15b5551610fa2986be824555fd/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/bbb54a15b5551610fa2986be824555fd/01fb2/thumbnail.png","srcSet":"/static/bbb54a15b5551610fa2986be824555fd/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/bbb54a15b5551610fa2986be824555fd/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"16ffc4fc-6668-5b94-bf30-7b6aed86af8e","tableOfContents":"<ul>\n<li>\n<p><a href=\"#problems-with-typical-arithmetic-mean-formula\">Problems with Typical Arithmetic Mean Formula</a></p>\n</li>\n<li>\n<p><a href=\"#average-filter-algorithm\">Average Filter Algorithm</a></p>\n<ul>\n<li><a href=\"#what-principle-makes-this-work\">What Principle Makes This Work?</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post, I want to briefly explain how to efficiently calculate averages of rapidly accumulating real-time data. Cases needing to calculate real-time data averages are quite common - like calculating average response time of responses accumulating in server engine access logs, or calculating averages of values coming from sensors.","html":"<p>In this post, I want to briefly explain how to efficiently calculate averages of rapidly accumulating real-time data. Cases needing to calculate real-time data averages are quite common - like calculating average response time of responses accumulating in server engine access logs, or calculating averages of values coming from sensors.</p>\n<!-- more -->\n<p>Since this data can accumulate at intervals as fast as 1ms in some cases, performance for processing data quickly as soon as it’s received is extremely important.</p>\n<p>When we need to calculate averages from this data in real-time, the typical average formula that comes to mind would be <code class=\"language-text\">sum of all data / length of data array</code>. The average value calculated like this is called the <code class=\"language-text\">arithmetic mean</code>.</p>\n<p>However, the typical method we use to calculate arithmetic mean doesn’t really fit systems needing to process data quickly in real-time. Why is that?</p>\n<h2 id=\"problems-with-typical-arithmetic-mean-formula\" style=\"position:relative;\">Problems with Typical Arithmetic Mean Formula<a href=\"#problems-with-typical-arithmetic-mean-formula\" aria-label=\"problems with typical arithmetic mean formula permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The formula that typically comes to mind when calculating arithmetic mean is:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>x</mi><mi>k</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">Average(n) = \\frac{1}{n}\\sum_{k=1}^{n}x_k = \\frac{x_1 + x_2 + ... + x_n}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9535em;vertical-align:-1.3021em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3021em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.9463em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2603em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>While the formula looks a bit complex, ultimately it’s initializing <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span> to 1, iterating until <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span> becomes <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>, adding everything from <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, then finally multiplying by <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> - basically the typical average algorithm we learned in school. This method of collecting all data and calculating at once is called batch expression.</p>\n<p>The batch expression’s disadvantage is exactly that time complexity is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>. While this isn’t a big problem when data quantity is small, it becomes a fatal disadvantage in systems needing to quickly process continuously accumulating real-time data.</p>\n<p>Let’s simply check the execution time of a batch expression average algorithm repeatedly calculating the average from 1 to 100,000.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> avg <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">average</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sum <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> prev <span class=\"token operator\">+</span> current<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> sum <span class=\"token operator\">/</span> numbers<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avg1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> k <span class=\"token operator\">&lt;</span> <span class=\"token number\">100001</span><span class=\"token punctuation\">;</span> k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  numbers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  avg <span class=\"token operator\">=</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avg1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">So the average is? -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>avg<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I wrote simple code mimicking real-time data processing. New data repeatedly enters the <code class=\"language-text\">numbers</code> array and calculates a new average each time. Since the first <code class=\"language-text\">for</code> loop is for implementing the real-time data input environment, excluding it from time complexity and looking only inside the <code class=\"language-text\">getAvg</code> function, you can see that each time calculating an average, it traverses the entire accumulated data array from the beginning to find the sum.</p>\n<p>So ultimately, the time this algorithm took to calculate the average of 100,000 data points…</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ node average.js\navg1: 8146.261ms\nSo the average is? -> 50000.5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>About <code class=\"language-text\">8146ms</code>? Roughly 8 seconds - an extremely long time. In real-time data processing systems, if processing some value takes 8 seconds, that’s just ruined. <small>(Actually even exceeding 1 second means ruined.)</small></p>\n<p>Plus, due to real-time data characteristics, data quantity inevitably keeps accumulating and increasing - if processing 100,000 takes 8 seconds, processing 1,000,000 would take roughly 80 seconds, right?</p>\n<p>Actually, the batch expression’s disadvantage isn’t simply that it takes long, but like this, execution time increases proportionally as data increases.</p>\n<p>Also, when calculating the average combining up to the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>th data point, you can’t use previous average calculation results at all, so ultimately you must store all data that’s come in so far, wasting unnecessary memory resources. So is there an <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> average algorithm that always has constant execution speed regardless of data increase?</p>\n<h2 id=\"average-filter-algorithm\" style=\"position:relative;\">Average Filter Algorithm<a href=\"#average-filter-algorithm\" aria-label=\"average filter algorithm permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>There is. It’s the average filter algorithm. This algorithm can reuse the average up to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> when calculating the average of the data set when the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span>th data comes in. This kind of algorithm is called recurrence expression. <small>(By the way, recurrence expression is a more comprehensive concept than recursive functions.)</small></p>\n<p>Using the recurrence expression average filter algorithm, you don’t need to store all previous data, and no matter how many data points accumulate, it absolutely guarantees <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity. So this algorithm is used more in IoT and embedded fields needing to process data coming from sensors at short intervals in real-time. <small>(I first learned this from a friend working in this field.)</small></p>\n<p>But diving straight into math isn’t fun, so to aid understanding, this time I’ll first check code and execution time before explaining this algorithm.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> avg <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">cumulativeAverage</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prevAvg<span class=\"token punctuation\">,</span> newNumber<span class=\"token punctuation\">,</span> listLength</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> oldWeight <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>listLength <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> listLength<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> newWeight <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> listLength<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>prevAvg <span class=\"token operator\">*</span> oldWeight<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>newNumber <span class=\"token operator\">*</span> newWeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avg2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> k <span class=\"token operator\">&lt;</span> <span class=\"token number\">100001</span><span class=\"token punctuation\">;</span> k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  avg <span class=\"token operator\">=</span> <span class=\"token function\">cumulativeAverage</span><span class=\"token punctuation\">(</span>avg<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avg2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">So the average is? -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>avg<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">cumulativeAverage</code> function uses 3 arguments: average up to previous data, newly entered data, and total data count. And it immediately calculates the average through a simple formula. If there’s the biggest difference from the <code class=\"language-text\">average</code> function written above, it’s that there’s no iteration inside the function.</p>\n<p>The batch expression average algorithm we saw above took 8 seconds to calculate the average of 100,000 data points in real-time, but this guy is on another level.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ node average.js\navg: 4.631ms\nSo the average is? -> 50000.5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Ta-da, it went from <code class=\"language-text\">8000ms</code> to <code class=\"language-text\">4ms</code>. Well, this is actually a natural fact. Because you don’t need to traverse all data to calculate the average - you just need to repeat simple operations. Even increasing data count to 1,000,000, execution time is about <code class=\"language-text\">10ms</code>, not changing much.</p>\n<p>And the reason time increased when increasing data quantity from 100,000 to 1,000,000 in this code is just because the <code class=\"language-text\">for</code> loop runs longer - in real-time data processing systems, you don’t input data by iterating like this, but literally data comes in asynchronously continuously and executes the average function through event listeners, so ultimately in actual use cases you can think it always has uniform execution speed.</p>\n<p>So what principle makes this algorithm work?</p>\n<h3 id=\"what-principle-makes-this-work\" style=\"position:relative;\">What Principle Makes This Work?<a href=\"#what-principle-makes-this-work\" aria-label=\"what principle makes this work permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Googling “average filter algorithm” shows many people have already posted the process of deriving recurrence expression from batch expression. But due to these posts’ characteristics of feeling strongly like the writer’s own archive, there weren’t really any friendly explanations.</p>\n<p>And such formula derivation explanation methods can’t be intuitive explanations for people not friendly with math. So I’ll try explaining with a more intuitive and simple feeling rather than the method of deriving recurrence expression from batch expression. Let’s first look at the average filter algorithm’s formula.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mi>n</mi></mfrac><mi>A</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>+</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">Average(n) = \\frac{n-1}{n}Average(n-1) + \\frac{1}{n}x_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0074em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0074em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></div>\n<p>In this expression, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> is the total data length so far, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Average(n-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> is the average up to previous data, and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is the newly entered data this time. So what does this expression mean that lets it calculate averages?</p>\n<p>The important keyword in this expression is weight. The condition for us to abandon batch expression and use recurrence expression was exactly “being able to utilize previous average value.” To do that, we need to calculate the influence the previous average value to use for calculating the new average will have on the new average value.</p>\n<p>Looking at the expression closely, the previous average value <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Average(n-1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> is multiplied by <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{n-1}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>. Here, what <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{n-1}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> means is exactly the weight. Also looking at the newly entered data <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, it’s multiplied by <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>, which is also the new data’s weight.</p>\n<p>For faster understanding, I’ll explain while looking at a simple example.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> prevData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> prevAverage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2.5</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Here’s a simple dataset with length <code class=\"language-text\">4</code>. I just hardcoded batch expression for <code class=\"language-text\">prevAverage</code> so you can understand more intuitively, and the assigned value becomes <code class=\"language-text\">2.5</code>, the average of <code class=\"language-text\">1, 2, 3, 4</code>.</p>\n<p>When the value <code class=\"language-text\">5</code> newly enters this dataset, the array length will become <code class=\"language-text\">5</code>. When calculating using batch expression, you’d add all from <code class=\"language-text\">1</code> to <code class=\"language-text\">5</code> then divide by array length <code class=\"language-text\">5</code>, but using recurrence expression, you just multiply the existing 4 elements’ average <code class=\"language-text\">2.5</code> by weight <code class=\"language-text\">4/5</code>, multiply newly entered <code class=\"language-text\">5</code> by weight <code class=\"language-text\">1/5</code>, then add them together.</p>\n<p>Let’s execute the code below in console and check the results.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> batch <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> recurrenced <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2.5</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>batch<span class=\"token punctuation\">,</span> recurrenced<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 3 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Results output identically as <code class=\"language-text\">3</code> for both. In other words, simply put, it’s calculating and adding how much proportion the previous average’s value and new data have in the new average.</p>\n<p>I think you probably roughly understand now. If you’re curious about the process of deriving recurrence expression from batch expression, Google “average filter” and you’ll find many posts written by others, so refer to those. I personally think understanding the abstract concept of how this algorithm works is more important than such formula derivation processes, so I won’t write separate derivation processes in this post.</p>\n<p>That’s all for this post on efficiently calculating averages of real-time data.</p>","fields":{"slug":"20190811-average-filter-en","path":"/2019/08/11/average-filter/en/","lang":"en"},"frontmatter":{"title":"Efficiently Calculating Averages of Real-Time Data","subTitle":"Average calculation gets slower as data increases? Let's solve it this way!","date":"Aug 11, 2019","categories":["Programming","Algorithm"],"tags":["Math","Average Calculation","Algorithm","Average","Algorithm","Cumulative Average"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/52ce705a7a96f11e55a6da43bb404bd8/3a812/thumbnail.jpg","srcSet":"/static/52ce705a7a96f11e55a6da43bb404bd8/3a812/thumbnail.jpg 320w,\n/static/52ce705a7a96f11e55a6da43bb404bd8/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/52ce705a7a96f11e55a6da43bb404bd8/fc5c5/thumbnail.webp 320w,\n/static/52ce705a7a96f11e55a6da43bb404bd8/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/52ce705a7a96f11e55a6da43bb404bd8/2d839/thumbnail.jpg","srcSet":"/static/52ce705a7a96f11e55a6da43bb404bd8/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/52ce705a7a96f11e55a6da43bb404bd8/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"b5cefc10-4818-50e4-bcd7-5e5ea2dd30cd","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-randomness\">What Is Randomness?</a></p>\n</li>\n<li>\n<p><a href=\"#randomness-in-computers\">Randomness in Computers</a></p>\n<ul>\n<li><a href=\"#mid-square-method\">Mid-Square Method</a></li>\n<li><a href=\"#linear-congruential-method\">Linear Congruential Method</a></li>\n<li><a href=\"#mersenne-twister\">Mersenne Twister</a></li>\n<li><a href=\"#xor-shift\">XOR Shift</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about randomness. Randomness refers to a pattern where, when events occur, there’s no discernible regularity between one event and the next — a truly arbitrary sequence. The computers we use also need to generate random patterns from time to time, and they do.","html":"<p>In this post, I want to talk about randomness. Randomness refers to a pattern where, when events occur, there’s no discernible regularity between one event and the next — a truly arbitrary sequence. The computers we use also need to generate random patterns from time to time, and they do.</p>\n<!-- more -->\n<p>But a computer is really just a fancy calculator. A calculator takes input values, juggles them around, and spits out a result. So how can such a machine produce random outcomes? Before we answer that question, we need to think about what randomness fundamentally is. Does true randomness even exist?</p>\n<h2 id=\"what-is-randomness\" style=\"position:relative;\">What Is Randomness?<a href=\"#what-is-randomness\" aria-label=\"what is randomness permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As I mentioned above, randomness is a pattern that occurs without any discernible order.</p>\n<p>People may have different associations, but the first thing that comes to my mind is gambling. The most dangerous thing about gambling is the hope that “sure, I lost this round, but I could win the next one!” — and that hope stems from the belief that gambling games are fundamentally based on randomness. In other words, there has to be a significant element of luck involved.</p>\n<p>The thing is, I don’t know much about actual gambling games, so let me use something lighter as an example — a coin-flipping game. Imagine placing coins on a thick book, then slapping the book to try to flip them. The idea is that whoever flips all the coins to show the same face wins the pot. It’s hard to calculate exactly how many of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> coins will flip when you slap the book, which makes it a game with a reasonable degree of randomness — and that’s what gives it the element of chance essential to gambling.</p>\n<p>So let me throw out that opening question again:</p>\n<blockquote>\n<p>Is this truly random?</p>\n</blockquote>\n<p>Even though it seems random, if you think about it, the game still operates within the laws of physics. If you knew the weight of each coin, the force of the slap, and the elasticity of the book, you could theoretically calculate which coins would flip. Of course, that kind of calculation isn’t easy — so even though it’s not random in the purest sense, we just say “close enough, let’s call it random.”</p>\n<p>In other words, true randomness is surprisingly rare even in our everyday lives. We just think things are random.</p>\n<h2 id=\"randomness-in-computers\" style=\"position:relative;\">Randomness in Computers<a href=\"#randomness-in-computers\" aria-label=\"randomness in computers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Just as we label things “random” in daily life when they have a reasonable degree of unpredictability, computers don’t generate true randomness either — they produce a convincing enough level of unpredictability and call it random. On top of that, creating something on a computer requires defining rules, and the very idea of using rules to generate rule-less randomness is a contradiction.</p>\n<p>That’s why all we can really create is pseudo-random — something that’s not truly random but close enough. And since computers are fundamentally number-crunching calculators, generating random events requires the ability to produce random numbers.</p>\n<p>So how do computers actually generate these random numbers?</p>\n<h3 id=\"mid-square-method\" style=\"position:relative;\">Mid-Square Method<a href=\"#mid-square-method\" aria-label=\"mid square method permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The Mid-Square Method is a pseudo-random number generation technique devised by John von Neumann in 1949. The idea is simple: take a number, square it, then extract a portion from the middle of the result to use as the next random number.</p>\n<p>Let’s say we want to generate 4-digit random numbers, starting with <code class=\"language-text\">1234</code>:</p>\n<table>\n<thead>\n<tr>\n<th>Phase</th>\n<th>Input</th>\n<th>Squared</th>\n<th>Random Number</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>1234</td>\n<td>1522756</td>\n<td>1<strong>5227</strong>56</td>\n</tr>\n<tr>\n<td>1</td>\n<td>5227</td>\n<td>27321529</td>\n<td>27<strong>3215</strong>29</td>\n</tr>\n<tr>\n<td>2</td>\n<td>3215</td>\n<td>10336225</td>\n<td>10<strong>3362</strong>25</td>\n</tr>\n</tbody>\n</table>\n<p>You keep extracting the middle digits and squaring them to generate the next random number. It’s pretty obviously predictable, right? Well, this was developed in the 1950s when von Neumann was active, and computers of that era were painfully underpowered, so the simplest possible approach was necessary. That’s why this method is rarely used today.</p>\n<h3 id=\"linear-congruential-method\" style=\"position:relative;\">Linear Congruential Method<a href=\"#linear-congruential-method\" aria-label=\"linear congruential method permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The Linear Congruential Method is the algorithm used by C’s <code class=\"language-text\">rand</code> function. It’s defined by the following recurrence relation and returns a sequence of random numbers:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>X</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>a</mi><msub><mi>X</mi><mi>n</mi></msub><mo>+</mo><mi>c</mi><mo stretchy=\"false\">)</mo><mspace></mspace><mspace width=\"1em\"></mspace><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">X_{n+1} = (aX_n + c) \\mod m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:1em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">mod</span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span></div>\n<p>Here, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span> is the sequence of random numbers and the rest are just arbitrary integers. For reference, the ANSI C standard specifies <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>=</mo><msup><mn>2</mn><mn>31</mn></msup><mo separator=\"true\">,</mo><mi>a</mi><mo>=</mo><mn>1103515245</mn><mo separator=\"true\">,</mo><mi>c</mi><mo>=</mo><mn>12345</mn></mrow><annotation encoding=\"application/x-tex\">m = 2^{31}, a = 1103515245, c = 12345</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0085em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">31</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">1103515245</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">12345</span></span></span></span></span>. Let’s implement this in JavaScript:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> m <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">**</span> <span class=\"token number\">31</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1103515245</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> <span class=\"token number\">12345</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">rand</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> a<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> c<span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getRandomNumbers</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">randCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Use the current time as the initial seed.</span>\n  <span class=\"token keyword\">const</span> initial <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> randomNumbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>initial<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> randCount<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    randomNumbers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span>randomNumbers<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  randomNumbers<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> randomNumbers<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getRandomNumbers</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Paste this into your browser console and run it — you’ll get an array of random numbers with the length you specified as the argument.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1163074432</span><span class=\"token punctuation\">,</span> <span class=\"token number\">465823232</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1719475776</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1744670976</span><span class=\"token punctuation\">,</span> <span class=\"token number\">790949120</span><span class=\"token punctuation\">,</span> <span class=\"token number\">552540416</span><span class=\"token punctuation\">,</span> <span class=\"token number\">896259328</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1473241344</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1074855168</span><span class=\"token punctuation\">,</span> <span class=\"token number\">575793408</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>A key characteristic of the Linear Congruential Method is that it uses the previously generated random number to produce the next one, and since it has at most <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span> possible values, it has a maximum period of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span> before repeating. That’s why I declared the <code class=\"language-text\">m</code> variable with <code class=\"language-text\">let</code>. Try assigning a small number to <code class=\"language-text\">m</code> in your browser console and calling <code class=\"language-text\">getRandomNumbers</code> again — you’ll notice duplicate values appearing much more frequently.</p>\n<p>The Linear Congruential Method has been widely used in computers since the early days because the computation is extremely simple and fast. However, it has a periodic cycle and correlations exist between generated numbers, meaning that if you know the last generated number and the other variables, you can predict all subsequent numbers.</p>\n<p>The problem is that those variables are defined by the ANSI C standard, so anyone can look them up. In other words, anyone with a bit of knowledge can observe the output of <code class=\"language-text\">rand</code> and predict the next random number.</p>\n<p>That’s why this algorithm is mainly used in situations where it doesn’t matter if the random numbers are predicted, or in constrained environments like embedded systems where memory is limited.</p>\n<h3 id=\"mersenne-twister\" style=\"position:relative;\">Mersenne Twister<a href=\"#mersenne-twister\" aria-label=\"mersenne twister permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The Mersenne Twister is a random number generation algorithm used in Excel, MATLAB, PHP, Python, R, C++, and many others. It was developed in 1997 by Makoto Matsumoto and Takuji Nishimura. The name comes from the fact that the algorithm’s period is a Mersenne prime.</p>\n<p>“Mersenne prime” might sound fancy, but it’s actually straightforward. A Mersenne number is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>M</mi><mi>n</mi></msub><mo>=</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">M_n = 2^{n} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7477em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> — just 2 to the power of n, minus 1. A Mersenne prime is simply a Mersenne number that happens to be prime.</p>\n<p>The most commonly used variant is “MT19937,” which has a period of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>19937</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{19937} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">19937</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>. C++ also uses this algorithm. Here’s a simplified overview of how it works:</p>\n<blockquote>\n<ol>\n<li>Use a seed to generate a vector of length 624. The seed is usually derived from hardware noise or the current date.</li>\n<li>Use this vector to produce 624 pseudo-random numbers.</li>\n<li>Apply noise to the vector and repeat step 2. This noise application is called “twisting.”</li>\n</ol>\n</blockquote>\n<p>The twisting step uses a technique called GFSR (Generalized Feedback Shift Register). There isn’t much accessible material on GFSR — most of it is academic papers — so I wasn’t able to dig into it deeply. But after some extensive Googling and poring over papers, I found that it appears to be a variation of LFSR (Linear Feedback Shift Register). <small>(Information was so limited that I’m not 100% certain it’s LFSR-based.)</small></p>\n<p>LFSR takes previous state values, runs them through a linear function, and uses the result to generate the next value. The function typically used is XOR, and the initial value is called the seed.</p>\n<img src=\"/ad9106cf75abf61d96aea27d0f40cef7/lfsr.gif\" width=\"100%\">\n<p>Here’s a brief explanation of LFSR: you designate a few memory addresses and push an initialized input (the seed) into the register. The bits shift one position to the right, and you get one bit popping out at the end as output. Then you access the pre-designated memory addresses, extract their values, and pass them through three XOR gates in sequence to produce the next input, which you push back into the register. Repeat.</p>\n<p>Since the Mersenne Twister uses GFSR — a slight variation of LFSR — to generate random numbers, it also requires an initial seed.</p>\n<p>For the detailed algorithm, check the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister#Algorithmic_detail\" target=\"_blank\" rel=\"nofollow\">Mersenne Twister - Algorithmic detail</a>. I ported the C implementation of MT19937 — which Matsumoto and Nishimura revised and improved in 2002 — to JavaScript. This code is designed for 32-bit random numbers. There’s a separate 64-bit version called MT19937-64.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">N</span> <span class=\"token operator\">=</span> <span class=\"token number\">624</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">M</span> <span class=\"token operator\">=</span> <span class=\"token number\">397</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">F</span> <span class=\"token operator\">=</span> <span class=\"token number\">1812433253</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">UPPER_MASK</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">**</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0x80000000</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LOWER_MASK</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPPER_MASK</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0x7fffffff</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MATRIX_A</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x9908b0df</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MersenneTwister</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> initSeed <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> <span class=\"token constant\">N</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">seedMt</span><span class=\"token punctuation\">(</span>initSeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">seedMt</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">seed</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> s<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> seed <span class=\"token operator\">>>></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">&lt;</span> <span class=\"token constant\">N</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant\">F</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;=</span> <span class=\"token number\">0xffffffff</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">int</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> mag01 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">MATRIX_A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">>=</span> <span class=\"token constant\">N</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> kk<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">===</span> <span class=\"token constant\">N</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">seedMt</span><span class=\"token punctuation\">(</span><span class=\"token number\">5489</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>kk <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> kk <span class=\"token operator\">&lt;</span> <span class=\"token constant\">N</span> <span class=\"token operator\">-</span> <span class=\"token constant\">M</span><span class=\"token punctuation\">;</span> kk<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">UPPER_MASK</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">LOWER_MASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk <span class=\"token operator\">+</span> <span class=\"token constant\">M</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">>>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">^</span> mag01<span class=\"token punctuation\">[</span>y <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span> kk <span class=\"token operator\">&lt;</span> <span class=\"token constant\">N</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> kk<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">UPPER_MASK</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">LOWER_MASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span>kk <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">M</span> <span class=\"token operator\">-</span> <span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">>>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">^</span> mag01<span class=\"token punctuation\">[</span>y <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token constant\">N</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">UPPER_MASK</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">LOWER_MASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token constant\">N</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token constant\">M</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">>>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">^</span> mag01<span class=\"token punctuation\">[</span>y <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    y <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mt<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    y <span class=\"token operator\">^=</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">>>></span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    y <span class=\"token operator\">^=</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0x9d2c5680</span><span class=\"token punctuation\">;</span>\n    y <span class=\"token operator\">^=</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xefc60000</span><span class=\"token punctuation\">;</span>\n    y <span class=\"token operator\">^=</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">>>></span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> y <span class=\"token operator\">>>></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The constants used in the code — <code class=\"language-text\">F = 1812433253</code>, <code class=\"language-text\">MATRIX_A = 0x9908b0df</code>, <code class=\"language-text\">this.seedMt(5489)</code> — aren’t numbers I chose arbitrarily. They’re standard coefficients defined in the MT19937 specification.</p>\n<p>Honestly, the algorithm is so complex that I don’t fully understand all of it myself. <small>(The price of not studying harder in college…)</small> Still, writing it out as code gives you a much better grasp than just reading about it, which is why I ported the original C code to JavaScript. The C library code I referenced can be found <a href=\"http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c\" target=\"_blank\" rel=\"nofollow\">here</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> rand <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MersenneTwister</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rand<span class=\"token punctuation\">.</span><span class=\"token function\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2145258025</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Running the code, it seems to generate random numbers just fine. To properly verify randomness you’d need to visualize the results and examine the distribution, but I’ll skip that for now. By the way, if you visit the homepage of <a href=\"http://www.math.sci.hiroshima-u.ac.jp/~m-mat/eindex.html\" target=\"_blank\" rel=\"nofollow\">Makoto Matsumoto</a>, who created this algorithm, you can find the story behind how it got its name:</p>\n<blockquote>\n<p><strong>Makoto</strong>: Professor Knuth says it’s too hard to pronounce the name.<br />\n<strong>Takuji</strong>: …</p>\n<p>[A few days later]</p>\n<p><strong>Makoto</strong>: Hey Takun, how about Mersenne Twister? It uses Mersenne primes, and the original is a Twisted GFSR (Generalized Feedback Shift Register).<br />\n<strong>Takuji</strong>: Hmm…?<br />\n<strong>Makoto</strong>: Doesn’t it sound like a roller coaster? It sounds fast, it’s easy to remember, and easy to pronounce. And here’s a secret — our initials are hidden in the name! (Makoto, Takuji)<br />\n<strong>Takuji</strong>: …<br />\n<strong>Makoto</strong>: Come on, let’s go with MT!<br />\n<strong>Takuji</strong>: …Fine.</p>\n<p>Later, we received a letter from Professor Knuth saying “it seems like a good name.”</p>\n</blockquote>\n<p>You can really feel the dynamic between the bubbly Makoto and the deadpan Takuji. It’s nice to see that even the creators of such a brilliant algorithm have this very human side to them.</p>\n<h3 id=\"xor-shift\" style=\"position:relative;\">XOR Shift<a href=\"#xor-shift\" aria-label=\"xor shift permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>XOR Shift, like the Mersenne Twister, is a pseudo-random number algorithm based on LFSR. You could think of it as a lighter alternative to the Mersenne Twister — the principle is similar, but the implementation is much simpler and faster, so it sees plenty of use.</p>\n<p>There are several variants of the XOR Shift algorithm, using 32-bit, 64-bit, or 128-bit numbers, with periods of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{32} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">32</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>64</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{64} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">64</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>, and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>128</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{128} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">128</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> (all Mersenne numbers) respectively.</p>\n<p>The problem was that it couldn’t pass TestU01, a random number quality testing framework. Passing TestU01 is a requirement for becoming an ANSI C standard.</p>\n<p>This led to several variant algorithms, one of which is XOR Shift 128+ — an improvement on the 128-bit XOR Shift 128. <small>(Sounds like a video game sequel title…)</small></p>\n<p>As it happens, XOR Shift 128+ is the random number generation algorithm adopted by major JavaScript engines including V8, SpiderMonkey, and JavaScriptCore. This algorithm was presented by Sebastiano Vigna at a conference in November 2016. The paper can be found <a href=\"http://vigna.di.unimi.it/ftp/papers/xorshiftplus.pdf\" target=\"_blank\" rel=\"nofollow\">here</a>.</p>\n<p>The overall principle is similar to the LFSR I explained above, so let’s look at how V8 implements <code class=\"language-text\">Math.random</code>. The original code is written in C++, but I’ve ported the same logic to JavaScript so you can easily run it in your browser.</p>\n<p>V8’s XOR Shift 128+ algorithm can be found in <a href=\"https://github.com/v8/v8/blob/main/src/base/utils/random-number-generator.h#L119C71-L120C1\" target=\"_blank\" rel=\"nofollow\">v8/src/base/utils/random-number-generator.h</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// xorshift128plus.js</span>\n<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1827981275</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1295982171</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">xorshift128plus</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> s1 <span class=\"token operator\">=</span> state<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> s0 <span class=\"token operator\">=</span> state<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  state<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> s0<span class=\"token punctuation\">;</span>\n  s1 <span class=\"token operator\">^=</span> s1 <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">23</span><span class=\"token punctuation\">;</span>\n  s1 <span class=\"token operator\">^=</span> s1 <span class=\"token operator\">>></span> <span class=\"token number\">17</span><span class=\"token punctuation\">;</span>\n  s1 <span class=\"token operator\">^=</span> s0<span class=\"token punctuation\">;</span>\n  state<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> s1<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Current register state -> '</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> state<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Initial register state -> '</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Random number -> '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">xorshift128plus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Initial register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">1827981275</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1295982171</span> <span class=\"token punctuation\">]</span>\nCurrent register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">1295982171</span><span class=\"token punctuation\">,</span> <span class=\"token number\">867440954</span> <span class=\"token punctuation\">]</span>\nRandom number <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">2163423125</span>\nCurrent register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">867440954</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1393243966</span> <span class=\"token punctuation\">]</span>\nRandom number <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">2260684920</span>\nCurrent register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">1393243966</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37812574</span> <span class=\"token punctuation\">]</span>\nRandom number <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">1431056540</span>\nCurrent register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">37812574</span><span class=\"token punctuation\">,</span> <span class=\"token number\">833890405</span> <span class=\"token punctuation\">]</span>\nRandom number <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">871702979</span>\nCurrent register state <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">[</span> <span class=\"token number\">833890405</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1661667227</span> <span class=\"token punctuation\">]</span>\nRandom number <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">2495557632</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looking at the output, you can see how the register state changes over time.</p>\n<p>The value at index <code class=\"language-text\">[1]</code> moves to index <code class=\"language-text\">[0]</code>, a new random number is placed at index <code class=\"language-text\">[1]</code>, and the two elements are added together for the output.</p>\n<p>When inserting the new value at index <code class=\"language-text\">[1]</code>, it uses the shifted-out value from index <code class=\"language-text\">[0]</code> to perform XOR shifting, then places the result back at index <code class=\"language-text\">[1]</code>.</p>\n<p>The shifting constants <code class=\"language-text\">23</code> and <code class=\"language-text\">17</code> were discovered through research during the development of the XOR Shift 128+ algorithm — they’re the optimal constants found through testing. The paper includes detailed tables comparing the results of various different constants they tried.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I originally started this post thinking it would be a light discussion about randomness, but it ended up being heavier on the math than I expected.</p>\n<p>The truth is, generating truly random numbers with a computer — which is just a calculator — is virtually impossible. Recently, researchers in the US reportedly succeeded in generating true random numbers using a quantum computer, but quantum computing is still a distant reality for most of us, so I’ll leave that aside.</p>\n<p>I’m not exactly a math enthusiast myself. But seeing the many people who have taken on the challenge of creating orderless random numbers through mathematical research, I feel genuinely grateful as someone who comfortably codes at higher abstraction layers. <small>(I could never do what they do…)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/4b190/thanks.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAQBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFtswTKxRyQpB//xAAeEAACAgAHAAAAAAAAAAAAAAABAgADBBESEzEyM//aAAgBAQABBQIVFpUldj6QGXhSFbZGZmI9E6//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAeEAACAgICAwAAAAAAAAAAAAABAgAxESEDECKBof/aAAgBAQAGPwJnY4UGeNCwYwrcbjKnA+zQ2YTmzDE99f/EAB0QAAMAAgIDAAAAAAAAAAAAAAABESExEHFRgbH/2gAIAQEAAT8hyA5S4ZvuPgSOeGnpF7nHWhKs6BUT2h8OG1n/2gAMAwEAAgADAAAAEBMPAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB0QAQEAAwACAwAAAAAAAAAAAAERACExYfAQceH/2gAIAQEAAT8QNdEUtY7mbrYqXbUJ5xNgnKwwIEwQz1dAt/MCsCFCQliW4ZAU7NWa74zj278B7PrP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"thanks\" title=\"\" src=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/c08c5/thanks.jpg\" srcset=\"/static/4ac69e39a60e61a01bddd4634b5d04ee/0913d/thanks.jpg 160w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/cb69c/thanks.jpg 320w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/c08c5/thanks.jpg 640w,\n/static/4ac69e39a60e61a01bddd4634b5d04ee/4b190/thanks.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>If the researchers build the foundational algorithms, I'll put them to good use in production applications...!!!</small>\n</center>\n<p>While writing this post, I spent a lot of time staring at papers and Wikipedia — my brain is overloaded from too much English and too many formulas. And the Mersenne Twister in particular… seriously, it’s insanely complex.</p>\n<p>By the way, Makoto Matsumoto, who created it, is currently an associate professor at Hiroshima University’s mathematics graduate school. It makes me wonder just how brilliant you have to be to stand at that podium. A completely different level…</p>\n<p>That wraps up this post on whether the randomness computers create is actually random.</p>\n<hr>\n<p>References</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Xorshift#xorshift+\" target=\"_blank\" rel=\"nofollow\">XorShift - Wikipedia</a><br />\n<a href=\"https://v8.dev/blog/math-random\" target=\"_blank\" rel=\"nofollow\">There’s Math.random(), and then There’s Math.random() - V8 Dev</a><br />\n<a href=\"http://vigna.di.unimi.it/ftp/papers/xorshiftplus.pdf\" target=\"_blank\" rel=\"nofollow\">Further scramblings of Marsaglia’s xorshift generators - Sebastiano Vigna</a><br />\n<a href=\"https://lemire.me/blog/2017/09/08/the-xorshift128-random-number-generator-fails-bigcrush/\" target=\"_blank\" rel=\"nofollow\">The Xorshit128+ random number generator fails BigCrush - Daniel Lemire</a></p>","fields":{"slug":"20190714-what-is-random-en","path":"/2019/07/14/what-is-random/en/","lang":"en"},"frontmatter":{"title":"Is the Randomness Your Computer Creates Actually Random?","subTitle":"Mid-Square Method, Linear Congruential Method, Mersenne Twister — the secrets behind random number generation algorithms","date":"Jul 14, 2019","categories":["Programming","Algorithm"],"tags":["Algorithm","Random Number Generation","Mersenne Twister","Real Random","JavaScript","Math","Cryptography"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/a801f480d325ee0f4ce6bccd0622d392/3a812/thumbnail.jpg","srcSet":"/static/a801f480d325ee0f4ce6bccd0622d392/3a812/thumbnail.jpg 320w,\n/static/a801f480d325ee0f4ce6bccd0622d392/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/a801f480d325ee0f4ce6bccd0622d392/fc5c5/thumbnail.webp 320w,\n/static/a801f480d325ee0f4ce6bccd0622d392/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/a801f480d325ee0f4ce6bccd0622d392/2d839/thumbnail.jpg","srcSet":"/static/a801f480d325ee0f4ce6bccd0622d392/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/a801f480d325ee0f4ce6bccd0622d392/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"22038d33-6f94-5288-a019-29c76ea630cc","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-a-hash-table\">What is a Hash Table?</a></p>\n<ul>\n<li><a href=\"#direct-address-table\">Direct Address Table</a></li>\n<li><a href=\"#compensating-for-direct-address-tables-weakness-with-hash-functions\">Compensating for Direct Address Table’s Weakness with Hash Functions!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#hash-collision\">Hash Collision</a></p>\n<ul>\n<li><a href=\"#resolving-collisions\">Resolving Collisions</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#table-resizing\">Table Resizing</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to cover the hash table — one of the most commonly used data structures. Let’s start by understanding what a hash table is and why we use it.","html":"<p>In this post, I want to cover the hash table — one of the most commonly used data structures. Let’s start by understanding what a hash table is and why we use it.</p>\n<!-- more -->\n<h2 id=\"what-is-a-hash-table\" style=\"position:relative;\">What is a Hash Table?<a href=\"#what-is-a-hash-table\" aria-label=\"what is a hash table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A hash table is a data structure that takes an input value, passes it through a hash function, and stores it at the index returned by that function. It’s usually implemented using arrays. Before explaining what a hash function is or what “hash” even means, let’s first understand where the concept of hash tables originated.</p>\n<h3 id=\"direct-address-table\" style=\"position:relative;\">Direct Address Table<a href=\"#direct-address-table\" aria-label=\"direct address table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The idea behind hash tables evolved from a data structure called the Direct Address Table. A direct address table is a data mapping approach that uses the input value directly as the key. Code makes this easier to understand:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DirectAddressTable</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setValue</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getValue</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getTable</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> myTable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DirectAddressTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myTable<span class=\"token punctuation\">.</span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you’re reading this post on a desktop, copy and paste this code into your browser console or Node.js and run it. You’ll see our beautiful table printed to the console:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">3</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">6</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">79</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span> <span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>When we put <code class=\"language-text\">3</code> into the table, it becomes the element at index <code class=\"language-text\">3</code>. When we put <code class=\"language-text\">90</code>, it becomes the element at index <code class=\"language-text\">90</code>. Super simple. With a direct address table, knowing the input value means knowing the index where it’s stored, so we can access the stored data directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">myTable<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Since the value we’re looking for equals the table’s index, we can access the storage location directly without searching through the table — giving us <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity. Similarly, inserting, updating, or deleting values in the table can all be done in one shot if we know where the value is, also achieving <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>The reasons why algorithms for searching, inserting, updating, and deleting values in simple data structures like this tend to be time-consuming are usually similar:</p>\n<hr>\n<ol>\n<li>I don’t know where my target value is. Let’s search efficiently. (e.g., binary tree search)</li>\n<li>Inserting or deleting this value affects other values. (e.g., linked list)</li>\n</ol>\n<hr>\n<p>The direct address table is very convenient because we know exactly where our target value is, allowing direct access for subsequent operations.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 441px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYdSJCD//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMREiEi/9oACAEBAAEFAmwBY59MdFZ5Svsf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERECFBgf/aAAgBAQAGPwKyZ8psbfWf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARIUExYeH/2gAIAQEAAT8h3S4GWrLbKEY7jnfpGNxtpSf/2gAMAwEAAgADAAAAEDAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITGxQWFx/9oACAEBAAE/ELh8mAdZcho0pQc042Fe5mq2uDFT7k13moKpfjOjP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"fantastic\" title=\"\" src=\"/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg\" srcset=\"/static/db3a598bfb9db0b88f1811fc6087af73/0913d/fantastic.jpg 160w,\n/static/db3a598bfb9db0b88f1811fc6087af73/cb69c/fantastic.jpg 320w,\n/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg 441w\" sizes=\"(max-width: 441px) 100vw, 441px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>But direct address tables have an obvious downside: poor space efficiency. Looking at the state of <code class=\"language-text\">myTable</code> we just created makes this immediately clear. We inserted <code class=\"language-text\">3</code>, <code class=\"language-text\">10</code>, and <code class=\"language-text\">90</code> — values with quite large gaps between them.</p>\n<p>As a result, our <code class=\"language-text\">myTable</code> stores data in this sparse structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">91</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see above, the spaces filled with <code class=\"language-text\">0</code> (except for the stored data) have memory allocated but hold no values. In other words, wasted space. When using a direct address table, if the number of values is smaller than the range of data values you want to store, space efficiency suffers.</p>\n<p>This situation is described as having a low load factor. The load factor is calculated as <code class=\"language-text\">number of values / table size</code>. The current load factor of my table is <code class=\"language-text\">3/91 = 0.03296...</code>, about <code class=\"language-text\">3%</code> — not a high load factor.</p>\n<p>If even one large value like <code class=\"language-text\">1000</code> enters the table, the table size becomes <code class=\"language-text\">1001</code> and the load factor drops to <code class=\"language-text\">0.003996...</code>, about <code class=\"language-text\">0.4%</code>. In other words, direct address tables work best when storing consecutive values like <code class=\"language-text\">1, 2, 3</code> or data where values don’t have large range differences.</p>\n<h3 id=\"compensating-for-direct-address-tables-weakness-with-hash-functions\" style=\"position:relative;\">Compensating for Direct Address Table’s Weakness with Hash Functions!<a href=\"#compensating-for-direct-address-tables-weakness-with-hash-functions\" aria-label=\"compensating for direct address tables weakness with hash functions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>So direct address tables are convenient for accessing values but have poor space efficiency. Hash tables were designed to compensate for this weakness.</p>\n<p>Instead of using the value directly as the table index like a direct address table, a hash table passes the value through something called a hash function first. A hash function maps arbitrary-length data to fixed-length data. The output of this function is called a hash.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHtT2qExoz/AP/EABgQAQEBAQEAAAAAAAAAAAAAAAIBABAS/9oACAEBAAEFAm/GiT6ZDN//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BRWf/xAAXEAADAQAAAAAAAAAAAAAAAAAAECEB/9oACAEBAAY/Aia4v//EABgQAQEBAQEAAAAAAAAAAAAAAAERABCh/9oACAEBAAE/ITFR1/w4gkS6IEOf/9oADAMBAAIAAwAAABDbD//EABcRAQADAAAAAAAAAAAAAAAAAAEQITH/2gAIAQMBAT8QAMuP/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAh/9oACAECAQE/EFDk/8QAHBABAQACAgMAAAAAAAAAAAAAAREAMRAhQXGR/9oACAEBAAE/EC6lGddfcmYabM9XCwu8dCD4cEn2cf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hashbrown\" title=\"\" src=\"/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg\" srcset=\"/static/9ab3259234eddda6c50fdda48c352e4e/0913d/hashbrown.jpg 160w,\n/static/9ab3259234eddda6c50fdda48c352e4e/cb69c/hashbrown.jpg 320w,\n/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The word \"hash\" originally means something like \"chopped up food\" — think of a hash brown.<br>A hash function works similarly: whatever value comes in, it gets mashed into a fixed-length output.</small>\n</center>\n<p>Let me create a simple hash function to help with understanding:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">hashFunction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> key <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">102948</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 8</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">191919191</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">997</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 7</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That’s it. Sure, it’s a crude hash function, but it does perform its core job of hashing just fine.</p>\n<p>My crude hash function simply divides the input by <code class=\"language-text\">10</code> and returns the remainder. Since only the ones digit is returned regardless of input, the output is guaranteed to be between <code class=\"language-text\">0-9</code>.</p>\n<p>One characteristic of hash functions is that looking at the hash alone makes it hard to guess what the input was. You can’t determine the original number just by looking at the ones digit. This is why hash functions are widely used in cryptography.</p>\n<p>But what’s important for us isn’t cryptography — it’s this:</p>\n<blockquote>\n<p>No matter what value goes into the hash function, it will always return a value between <strong>0-9</strong>!</p>\n</blockquote>\n<p>The weakness of direct address tables was that even if just one value like <code class=\"language-text\">10000</code> came in, you’d need to create a table of size <code class=\"language-text\">10000</code> to store it at index <code class=\"language-text\">10000</code>, wasting <code class=\"language-text\">9999</code> spaces.</p>\n<p>But with my hash function, <code class=\"language-text\">100</code> returns <code class=\"language-text\">0</code>, <code class=\"language-text\">10001</code> returns <code class=\"language-text\">1</code>, and even <code class=\"language-text\">8982174981274</code> returns <code class=\"language-text\">4</code>.</p>\n<p>This means we can set a fixed table size and store data only within that space. Let me write a simple hash table using this property of hash functions. I’ll set the hash table size to <code class=\"language-text\">5</code> and write a hash function that ensures any value can be stored in this table.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myTableSize <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myHashTable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>myTableSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">hashFunction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Divide the input by table size and return the remainder</span>\n  <span class=\"token keyword\">return</span> key <span class=\"token operator\">%</span> myTableSize<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1991</span><span class=\"token punctuation\">;</span>\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">;</span>\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">5678</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">5678</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myHashTable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [empty, 1991, empty, 5678, 1234]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The input values <code class=\"language-text\">1991</code>, <code class=\"language-text\">1234</code>, and <code class=\"language-text\">5678</code> are much larger than my hash table size of <code class=\"language-text\">5</code>, but since the hash function only returns values between <code class=\"language-text\">0-4</code>, the values get stored neatly in my small, cute hash table.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe8FGAmHH//EABkQAAMBAQEAAAAAAAAAAAAAAAABAhIRMf/aAAgBAQABBQLiKh2p82yqe0f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAABAAIRIHH/2gAIAQEABj8CThIGV//EABwQAAEEAwEAAAAAAAAAAAAAAAABESExQWFxUf/aAAgBAQABPyHQh7HMJ6Uy5oQUWhnYy6f/2gAMAwEAAgADAAAAECDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFRQfDx/9oACAEBAAE/EPlYxVVCgEaVetZcEoAbtoFs8256DiUs3jwvGKL7Ty5//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cute\" title=\"\" src=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg\" srcset=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/0913d/cute.jpg 160w,\n/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg 295w\" sizes=\"(max-width: 295px) 100vw, 295px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>My hash table... so tiny and cute</small>\n</center>\n<p>And just like that, we’ve eliminated the endlessly wasted space that was the direct address table’s weakness!</p>\n<h2 id=\"hash-collision\" style=\"position:relative;\">Hash Collision<a href=\"#hash-collision\" aria-label=\"hash collision permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>It would be nice if this were a happy ending, but hash tables have their own weakness: hash collisions. Before explaining what a collision is, let’s use my hash function to create one and see for ourselves:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<p>When different values put into a hash function produce the same output — that’s a <strong>collision</strong>.</p>\n</blockquote>\n<p>If you think about it logically, direct address tables grew dynamically, but hash tables allocate fixed space upfront and keep cramming values into it.</p>\n<p>So if you set the table size to <code class=\"language-text\">100</code> and try to insert <code class=\"language-text\">200</code> pieces of data, only 100 will be stored and 100 will be left over — what happens to them?</p>\n<p>Don’t worry. Hash tables were designed with the intention of having a table smaller than the amount of data to be stored, so collision resolution methods were developed alongside them.</p>\n<h3 id=\"resolving-collisions\" style=\"position:relative;\">Resolving Collisions<a href=\"#resolving-collisions\" aria-label=\"resolving collisions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Because hash tables have this collision weakness, the most important factor in operating a hash table is how uniformly the hash function can distribute values. If there’s a high probability of getting the same index no matter what value you insert, it’s not a good hash function.</p>\n<p>However, even with a well-designed hash function, completely preventing collisions is fundamentally difficult. That’s why we either develop hash function algorithms that minimize collisions while accepting some level of them, or use methods that can work around collisions when they occur.</p>\n<p>In this post, I’ll explain a few methods for working around collisions when they happen.</p>\n<h4 id=\"open-addressing\" style=\"position:relative;\">Open Addressing<a href=\"#open-addressing\" aria-label=\"open addressing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Open addressing explores new addresses within the table when a hash collision occurs and inserts the colliding data into an empty spot. It’s called “open address” because it allows indices other than the one returned by the hash function.</p>\n<p>Open addressing can be divided into four types based on how empty spaces are probed.</p>\n<h5 id=\"1-linear-probing\" style=\"position:relative;\">1. Linear Probing<a href=\"#1-linear-probing\" aria-label=\"1 linear probing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>Linear probing literally means probing sequentially in a linear fashion. Let’s use the collision example with <code class=\"language-text\">1991</code> and <code class=\"language-text\">6</code> from above.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<br />\n<p>When we first passed <code class=\"language-text\">1991</code> through the hash function and put it in the hash table, it was placed at index <code class=\"language-text\">1</code>. Then we passed <code class=\"language-text\">6</code> through the hash function and got <code class=\"language-text\">1</code> again. But index <code class=\"language-text\">1</code> already contains <code class=\"language-text\">1991</code>, so <code class=\"language-text\">6</code> has nowhere to go in the hash table. A collision has occurred!</p>\n<p>Linear probing assigns the next room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> spaces away when a collision occurs. If <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>, <code class=\"language-text\">6</code> would be stored at index <code class=\"language-text\">2</code>; if <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n = 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span></span>, it would be stored at index <code class=\"language-text\">4</code>.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd><strong style=\"color: #ff0000;\">6</strong></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<center><small>Might as well take the next room over...</small></center>\n<br />\n<p>This is linear probing — assigning the next available room a fixed distance away when a collision occurs. If another collision happens here, the value would be stored at index <code class=\"language-text\">3</code>. This sequential probing continues until an empty space is found.</p>\n<p>The downside of linear probing is its vulnerability to the primary clustering problem, where all spaces around a particular hash value become filled.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd>6</dd></li>\n  <li><dt>3</dt><dd>13</dd></li>\n  <li><dt>4</dt><dd>21</dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<br />\n<p>When the same hash appears multiple times, linear probing increases the likelihood of data being stored consecutively — meaning data density increases. In this case, collisions occur not only when the hash is <code class=\"language-text\">1</code>, but also when it’s <code class=\"language-text\">2</code> or <code class=\"language-text\">3</code>.</p>\n<p>This creates a truly vicious cycle. As collisions continue, data gets stored consecutively, eventually forming a massive cluster of data. Then any hash value that falls within the indices occupied by that cluster will collide, and the colliding value gets stored behind the cluster, making it even larger.</p>\n<blockquote>\n<p><strong>Collision!</strong> -> Store colliding value behind the cluster -> Increased collision probability -> <strong>Collision!</strong> -> Store again, cluster grows -> Increased collision probability -> <strong>Collision</strong>…</p>\n</blockquote>\n<p>This painful infinite loop occurs. This is the primary clustering problem. Now let’s look at another method that somewhat addresses this painful issue.</p>\n<h5 id=\"2-quadratic-probing\" style=\"position:relative;\">2. Quadratic Probing<a href=\"#2-quadratic-probing\" aria-label=\"2 quadratic probing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>Quadratic probing is identical to linear probing, but the probe interval grows quadratically rather than staying fixed.</p>\n<p>On the first collision, probe <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>1</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">1^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> spaces from the collision point; on the second collision, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>; on the third, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">3^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> — the step size grows rapidly. Using quadratic probing in the same situation as the linear probing example above, the hash table looks like this:</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd>6</dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd>13</dd></li>\n  <li><dt>6</dt><dd></dd></li>\n  <li><dt>...</dt><dd></dd></li>\n  <li><dt>10</dt><dd>21</dd></li>\n</ul>\n<br />\n<blockquote>\n<p>On the first collision, <code class=\"language-text\">6</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>1</mn><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1^2 = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> space away from the collision at index <code class=\"language-text\">1</code>.</p>\n<p>On the second collision, <code class=\"language-text\">13</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">2^2 = 4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span></span> spaces away from the collision at index <code class=\"language-text\">1</code>.</p>\n<p>On the third collision, <code class=\"language-text\">21</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mn>2</mn></msup><mo>=</mo><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">3^2 = 9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">9</span></span></span></span></span> spaces away from the collision at index <code class=\"language-text\">1</code>.</p>\n</blockquote>\n<p>Using quadratic probing significantly reduces data density compared to linear probing even when collisions occur, greatly lowering the probability of chain collisions affecting other hash values.</p>\n<p>Still, if the hash repeatedly returns <code class=\"language-text\">1</code>, collisions are unavoidable. Data clustering remains an inescapable fate, which is why this phenomenon is called the secondary clustering problem.</p>\n<p>Can we improve further from here?</p>\n<h5 id=\"3-double-hashing\" style=\"position:relative;\">3. Double Hashing<a href=\"#3-double-hashing\" aria-label=\"3 double hashing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>That’s where double hashing comes in. As the name suggests, it uses two hash functions.</p>\n<p>One is used to get the initial hash as before, and the other is used to determine the probe step size when a collision occurs. This way, even if the initial hash returns the same value, passing through a different hash function for the step size will likely produce different probe intervals, increasing the probability of values being distributed evenly across different spaces.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myTableSize <span class=\"token operator\">=</span> <span class=\"token number\">23</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Table size should be prime for best results</span>\n<span class=\"token keyword\">const</span> myHashTable <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getSaveHash</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">%</span> myTableSize<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The step hash uses a prime slightly smaller than table size</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getStepHash</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token number\">17</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">%</span> <span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setValue</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token function\">getSaveHash</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> targetValue <span class=\"token operator\">=</span> myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>targetValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Stored </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> at index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myHashTable<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> myTableSize<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Table is full'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Collision while trying to store </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> at index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      index <span class=\"token operator\">+=</span> <span class=\"token function\">getStepHash</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      index <span class=\"token operator\">=</span> index <span class=\"token operator\">></span> myTableSize <span class=\"token operator\">?</span> index <span class=\"token operator\">-</span> myTableSize <span class=\"token operator\">:</span> index<span class=\"token punctuation\">;</span>\n      targetValue <span class=\"token operator\">=</span> myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Both the table size and the number used in the second hash function should be prime numbers. If either isn’t prime, the same hashing pattern will eventually repeat. It looks a bit complex at first glance, but breaking it down piece by piece reveals nothing special. Let’s walk through it:</p>\n<hr>\n<ol>\n  <li>Get the storage index from the <code class=\"language-text\">getSaveHash</code> hash function.</li>\n  <li>Start the loop</li>\n  <li>Is it empty?</li>\n  <ol style=\"list-style: lower-alpha;\">\n    <li>Empty? OK, store it!</li>\n    <li>Occupied? Give me the next index! Back to 3...</li>\n    <li>Table full? Let's end this.</li>\n  </ol>\n</ol>\n<hr>\n<p>Running the above code in a browser console or Node.js will show you through the printed strings roughly how this process flows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Stored 1991 at index 13!</span>\n<span class=\"token comment\">// Stored 6 at index 6!</span>\n<span class=\"token comment\">// Collision while trying to store 13 at index 13!</span>\n<span class=\"token comment\">// Stored 13 at index 17!</span>\n<span class=\"token comment\">// Stored 21 at index 21!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>These values would have caused chain collisions using linear or quadratic probing since they all hash to <code class=\"language-text\">1</code>, but with double hashing, all values were stored with only a single collision.</p>\n<p>If you’ve copied the code above and declared the function, run that console multiple times and change the values to see how data gets stored in the hash table. When the table is full, you’ll see <code class=\"language-text\">Table is full</code>, so feel free to run it until then.</p>\n<h4 id=\"separate-chaining\" style=\"position:relative;\">Separate Chaining<a href=\"#separate-chaining\" aria-label=\"separate chaining permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Separate chaining approaches collision resolution from a different concept than open addressing. Instead of storing a single value in each hash table bucket, it uses a linked list or tree.\nSince the concept is the same whether you use a tree or linked list, I’ll explain using a linked list.</p>\n<p>Let’s bring back the example we’ve been using. When the table size is <code class=\"language-text\">5</code> and we need to store <code class=\"language-text\">1991</code>, <code class=\"language-text\">6</code>, <code class=\"language-text\">13</code>, and <code class=\"language-text\">21</code> — all of which hash to <code class=\"language-text\">1</code> — using separate chaining looks like this:</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>[21, 13, 6, 1991]</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n</ul>\n<br />\n<p>Simple. But look closely — the order is <code class=\"language-text\">[21, 13, 6, 1991]</code>, not <code class=\"language-text\">[1991, 6, 13, 21]</code>. It’s reversed.</p>\n<p>This is a technique to reduce insertion time even slightly. To understand why reversing the data reduces insertion time, let’s look at the process of inserting new data when the linked list stored at index <code class=\"language-text\">1</code> of our table is in the order <code class=\"language-text\">[1991, 6, 13, 21]</code>.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: null }</dd></li>\n</ul>\n<center><small>Looks similar to a hash table, but this time it's a linked list</small></center>\n<br />\n<p>Let’s say we want to add <code class=\"language-text\">11</code>. Memory address <code class=\"language-text\">99</code> happens to be free, so we store <code class=\"language-text\">{ value: 11, next: null }</code> there. Then, to attach this new node to the list, we need to traverse to the last node in the list stored at memory <code class=\"language-text\">4</code>.</p>\n<p>Then we change the value at memory <code class=\"language-text\">4</code> to <code class=\"language-text\">{ value: 21, next: 99 }</code> and we’re done.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: 99 }</dd></li>\n  <li><dt>99</dt><dd>{ value: 11, next: null }</dd></li>\n</ul>\n<br />\n<p>The problem is the process of finding the node at memory <code class=\"language-text\">4</code> to attach the new node to the list. Due to linked list characteristics, checking data at memory <code class=\"language-text\">4</code> requires sequentially traversing from the head through each next node.</p>\n<p>This means to insert data, we must first find memory <code class=\"language-text\">1</code> (the list head), check the next memory address, move to <code class=\"language-text\">2</code>, check the next address again, and so on.</p>\n<p>This is manageable when the linked list is small, but as the list grows, execution time increases proportionally — definitely not a good approach. But reversing the order makes data insertion much easier.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>99</dt><dd>{ value: 11, next: 1 }</dd></li>\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: null }</dd></li>\n</ul>\n<br />\n<p>Since we’re adding the node at the front, we don’t need to traverse other nodes — just push it into memory and store <code class=\"language-text\">{ value: 11, next: 1 }</code>. That’s why when storing in hash tables, attaching data to the head of the list rather than the tail is commonly preferred.</p>\n<p>However, using separate chaining makes the hash function’s role extremely important. If an uneven hash causes data to cluster at a specific index, other buckets will be empty while one bucket’s list keeps growing longer.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>[21, 13, 6, 1991, 7, 11, 25, ...]</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n</ul>\n<center><small>This is an extreme example, but... it's no different from just using a linked list</small></center>\n<br />\n<p>If the value I’m looking for is at the very end of the list, I’d have to traverse the linked list from start to finish, giving us <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity. That’s why the hash function’s role in distributing data as evenly as possible to maintain reasonable list lengths is so important.</p>\n<h2 id=\"table-resizing\" style=\"position:relative;\">Table Resizing<a href=\"#table-resizing\" aria-label=\"table resizing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since hash tables are data structures that allocate fixed space to store lots of data, they’re bound to overflow eventually.</p>\n<p>When using open addressing, you’ll hit the situation where <code class=\"language-text\">Table is full</code> gets printed in the example code above — the table is literally full and can’t store more. When using separate chaining, as empty space decreases and collisions increase, the lists stored in each bucket grow longer until the resources spent traversing lists become excessive.</p>\n<p>That’s why hash tables perform better when somewhat empty rather than packed full, and when operating a hash table, you need to increase the table size once data reaches a certain level.</p>\n<p>This isn’t a special algorithm — it simply involves declaring a new table about twice the original size and moving the existing data over. For hash tables using separate chaining, rehashing can be used to split overly long lists and redistribute the data.</p>\n<p>That wraps up this post on diving deep into hash tables with JavaScript.</p>\n<style>\nul.hash-table-dummy {\n  width: 100%;\n  margin: 0 auto;\n  display: flex;\n  border: 1px solid #ddd;\n  padding: 0;\n}\nul.hash-table-dummy > li {\n  flex-grow: 1;\n  list-style: none;\n  border-right: 1px solid #ddd;\n  margin: 0;\n  text-align: center;\n  font-size: 14px;\n}\nul.hash-table-dummy dt {\n  border-bottom: 1px solid #ddd;\n  background-color: #f0f0f0;\n}\nul.hash-table-dummy dd {\n  margin: 0;\n}\n</style>","fields":{"slug":"20190625-hashtable-with-js-en","path":"/2019/06/25/hashtable-with-js/en/","lang":"en"},"frontmatter":{"title":"Diving Deep into Hash Tables with JavaScript","subTitle":"From hash functions to collision resolution and table resizing","date":"Jun 25, 2019","categories":["Programming","Algorithm"],"tags":["Data Structure","Hash Table","JavaScript","Technical Interview","Hash Collision"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/5976bcb3d5c35dab87987842997a2aef/3a812/thumbnail.jpg","srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/3a812/thumbnail.jpg 320w,\n/static/5976bcb3d5c35dab87987842997a2aef/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/fc5c5/thumbnail.webp 320w,\n/static/5976bcb3d5c35dab87987842997a2aef/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/5976bcb3d5c35dab87987842997a2aef/2d839/thumbnail.jpg","srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"32c0189b-e19a-5372-9d93-6964b7f2c8bd","tableOfContents":"<ul>\n<li>\n<p><a href=\"#big-o-notation-and-time-complexity\">Big O Notation and Time Complexity</a></p>\n</li>\n<li>\n<p><a href=\"#sorting-algorithms\">Sorting Algorithms</a></p>\n<ul>\n<li><a href=\"#bubble-sort\">Bubble Sort</a></li>\n<li><a href=\"#selection-sort\">Selection Sort</a></li>\n<li><a href=\"#insertion-sort\">Insertion Sort</a></li>\n<li><a href=\"#merge-sort\">Merge Sort</a></li>\n<li><a href=\"#quick-sort\">Quick Sort</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post, I want to cover five representative sorting algorithms and provide a rough explanation of Big O notation. First, here are the five sorting algorithms:","html":"<p>In this post, I want to cover five representative sorting algorithms and provide a rough explanation of Big O notation. First, here are the five sorting algorithms:</p>\n<!-- more -->\n<hr>\n<ol>\n<li>Bubble Sort</li>\n<li>Selection Sort</li>\n<li>Insertion Sort</li>\n<li>Merge Sort</li>\n<li>Quick Sort</li>\n</ol>\n<hr>\n<p>Since these algorithms’ performance is expressed using Big O notation, I’ll also briefly explain Big O notation before moving on.</p>\n<h2 id=\"big-o-notation-and-time-complexity\" style=\"position:relative;\">Big O Notation and Time Complexity<a href=\"#big-o-notation-and-time-complexity\" aria-label=\"big o notation and time complexity permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The metrics for evaluating algorithm performance are time complexity and space complexity. Time complexity indicates the execution time of an algorithm, while space complexity indicates memory usage.</p>\n<p>When studying algorithms, you’ll often encounter expressions like “the time complexity is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>” or “the time complexity is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>” — this is Big O notation.</p>\n<p>Putting it into words, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> means:</p>\n<blockquote>\n<p>Given n pieces of data, this function consumes at most n resources in the “worst” case</p>\n</blockquote>\n<p>Here, the resources mentioned above would be time for time complexity and memory space for space complexity. However, when evaluating sorting algorithms, we typically focus on time complexity, so that’s what we’ll examine here.</p>\n<p>To better understand time complexity, let’s look at the time complexity of the binary search algorithm. If you’re not familiar with binary search, think of the “Higher or Lower” number guessing game. As most people know, it’s a game where you have to guess a random number someone else is thinking of.</p>\n<p>What’s the best way to minimize the number of guesses? The answer is to start with the middle value: <code class=\"language-text\">50</code>. After calling <code class=\"language-text\">50</code>, when your opponent says “higher” or “lower,” you can discard the 50 numbers on the wrong side and only think about the remaining 50.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 306px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB682wjYVYFQf/xAAaEAEBAQADAQAAAAAAAAAAAAABABECEiIh/9oACAEBAAEFAnym3qQjn80k2y7N/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGhAAAgMBAQAAAAAAAAAAAAAAARAAIaERIv/aAAgBAQAGPwLp12Z52Wiv/8QAGxAAAwADAQEAAAAAAAAAAAAAAAERIWFxMVH/2gAIAQEAAT8hb4GwrV55TQ9ijKS2PTAlWoJi5rox5H//2gAMAwEAAgADAAAAEDjAPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/EGP/xAAdEAEAAgIDAQEAAAAAAAAAAAABABEhMUFRYXHh/9oACAEBAAE/EETQATCbyGc6lLFGkFwxxkjRRlDzHGky2FV8Y6cW+9u3n5HwiXpeDmpRTsF81CWljV2emYUaj//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"drink\" title=\"\" src=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg\" srcset=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/0913d/drink.jpg 160w,\n/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg 306w\" sizes=\"(max-width: 306px) 100vw, 306px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>If you're lucky and your opponent was thinking of 50, the game ends immediately and they have to drink.</small>\n</center>\n<p>Anyway, the worst case in this game is going back and forth with “higher” and “lower” until it ends in <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({\\log}N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></span> guesses. The best case is guessing the target value on the first try — a time complexity of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>.</p>\n<p>As you can see, there’s always a gap between best and worst case outcomes, which is why when evaluating algorithms, we typically focus on the <strong>worst case</strong>. And Big O notation is what we use to express this worst case.</p>\n<p>The common ones are typically <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>, and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({\\log}N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></span>. Plotted on a 2D graph, they look like this:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACBklEQVR42n1T2ZKbMBDk/z9vH5JNvLYxQgIEOtB9ITLYyd6VrqFA0jTdMwONECLnvP1DKYWbQLVPpcAqxzGlYdtcTmW5DYLMyYdFWiatdaH5TIbEkGYTfC4VXpVVzjPslVQ0XzmhW85UGDLLlPM35H2vKiSQrsfGXooEB7XuyQWnzOq8cX6ve631O3LdVp8CkGstWyhlhT0Q5OMilA0x7/s+CjJK8h/yoVaKKsVBNps45wrM5BJtMHQdmJ4bKeV78gPCx3xvWN0kVDFTSUfqspGGKyddtJBz2L5er3B7pcET0LgLoFar94HjaeluV+NXFwzMApLhCKiQ2nRd90kWEqSHXsZJoIHTeRhLPuo8OHdIQsjTk8T41XY9TN49uOQ7wQc+SEsNW6MBmyC8QjgpnBCWLeswWCHeGgY+Qg4mrj2bb2S2Eq24F/3gVhmtTd4l50pOd8OH9e0xqqOSveqguJjYNCHCtZ7N0huhj8r3NzysQcQYU0oNY0wbM3FMugu+YSHUrAUbL5LJkKJzzkN8RAhhHEdKacMFp5xMPVqYKls1Vvf9xWsNPU/vkD+i3NHgqceoU1LD8CVb8ETh5OH2MZU3w1/QtKj/+fQD306nl19nhBYO7RcY931/XAihtm0R6qA6/g6wVEo1IPH383goHD/GTjD6fXq5tu35fH5+fm6vl5TLV/U/q6uYTCSUTxgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"big o\" title=\"\" src=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png\" srcset=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/69538/big_o.png 160w,\n/static/8846c3df1d92e4a3a2108e993a5b69f7/72799/big_o.png 320w,\n/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png 631w\" sizes=\"(max-width: 631px) 100vw, 631px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>I’ll cover more detailed content like how to calculate Big O notation in another post.</p>\n<h2 id=\"sorting-algorithms\" style=\"position:relative;\">Sorting Algorithms<a href=\"#sorting-algorithms\" aria-label=\"sorting algorithms permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<img src=\"/6cfa6f10ba3dfd0a90b03cfb0926f05d/sorts.gif\" width=\"100%\">\n<p>Sorting algorithms are one of the important problems in computer science — given a dataset, the problem is to rearrange it in a specified order.</p>\n<p>In real development, you’ll frequently encounter situations where you need to sort irregular data before searching through it. The key is whether you can effectively solve the problem by using the right algorithm for the situation.</p>\n<p>For example, imagine you have a bag containing balls numbered 1 through 10 in random order, and you need to take them out one by one and arrange them from smallest to largest. Most humans can sort these without much difficulty. But computers often deal with <code class=\"language-text\">10,000</code> or even <code class=\"language-text\">10,000,000</code> pieces of data. And databases theoretically need to handle infinite amounts of data.</p>\n<p>If the data isn’t sorted, you’d have to look at each piece of data sequentially while searching. But if the data is already sorted, you can use powerful algorithms like the binary search I mentioned above. <small>(This is actually the biggest reason.)</small></p>\n<p>Now let’s look at the representative sorting algorithms: bubble sort, selection sort, insertion sort, merge sort, and quick sort.</p>\n<h3 id=\"bubble-sort\" style=\"position:relative;\">Bubble Sort<a href=\"#bubble-sort\" aria-label=\"bubble sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/1692a508cdbd24d8651e01ffe00385dd/bubble_sort.gif\" width=\"100%\">\n<p>Bubble sort shows the worst performance in almost every situation, but it shows the best performance on already-sorted data since it only needs to traverse once. You might wonder why you’d sort already-sorted data, but it’s meaningful because the sorting algorithm itself operates without knowing whether the data is sorted or not.</p>\n<p>Bubble sort works in the following order:</p>\n<hr>\n<ol>\n<li>Compare and sort the 0th and 1st elements</li>\n<li>Compare and sort the 1st and 2nd elements</li>\n<li>…keep repeating</li>\n<li>Compare and sort the (n-1)th and nth elements</li>\n</ol>\n<hr>\n<p>Each traversal sorts one element at the end, so it looks like bubbles rising — hence the name bubble sort. The principle is intuitive and easy to implement, but it’s a fairly inefficient sorting method. So typically you implement it once when first learning, but I’ve rarely seen it used in practice.</p>\n<p>Here’s the implementation code for bubble sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">bubbleSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> tmp<span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        tmp <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n        tmp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"selection-sort\" style=\"position:relative;\">Selection Sort<a href=\"#selection-sort\" aria-label=\"selection sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/fb94376d775d18dbffb09f9724ca9c14/selection_sort.gif\" width=\"100%\">\n<p>Selection sort is a sorting algorithm that finds and selects the appropriate data for the current position from the given data and swaps positions. After one traversal, the smallest value in the entire dataset will be at the 0th index according to the algorithm, so from the next traversal onward, you just repeat the process starting from index 1.</p>\n<p>Selection sort works in the following order:</p>\n<hr>\n<ol>\n<li>Find the smallest value from index 0 to n and swap it with index 0</li>\n<li>Find the smallest value from index 1 to n and swap it with index 1</li>\n<li>…keep repeating</li>\n<li>Find the smallest value from index n-1 to n and swap it with index n</li>\n</ol>\n<hr>\n<p>Selection sort traverses the entire list regardless of whether the current data is sorted or not, so it consistently has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity in both best and worst cases. Here’s the implementation code for selection sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">selectionSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> tmp<span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        tmp <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n        tmp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"insertion-sort\" style=\"position:relative;\">Insertion Sort<a href=\"#insertion-sort\" aria-label=\"insertion sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/e10adb7c9d0442b9799b538265a2fc05/insertion_sort.gif\" width=\"100%\">\n<p>Insertion sort compares each element from the given data, from the beginning, with the already-sorted portion and inserts it in its proper position. It’s actually the sorting method most similar to how humans naturally sort things. Imagine sorting cards in your hand — you’d probably do something like this:</p>\n<hr>\n<ol>\n<li>Pick up a card.</li>\n<li>Look through the cards you’re holding.</li>\n<li>Insert the current card in the position where it belongs.</li>\n</ol>\n<hr>\n<p>Insertion sort works similarly to this process:</p>\n<hr>\n<ol>\n<li>Skip index 0.</li>\n<li>Find where the value at index 1 should go among indices 0-1 and insert it</li>\n<li>Find where the value at index 2 should go among indices 0-2 and insert it</li>\n<li>…keep repeating</li>\n<li>Find where the value at index n should go among indices 0-n and insert it</li>\n</ol>\n<hr>\n<p>In the best case, insertion sort only needs to traverse the entire data once, giving it <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity, but in the worst case, it has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>Here’s the implementation code for insertion sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">insertionSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Start from the second card</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Pick up the card</span>\n    <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span>j <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> value<span class=\"token punctuation\">;</span> j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Look at the already-sorted cards from the back</span>\n      <span class=\"token comment\">// If the examined card is larger than the current card</span>\n      <span class=\"token comment\">// Move the examined card back one position</span>\n      input<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// After moving is done</span>\n    <span class=\"token comment\">// Place the current card one position after</span>\n    <span class=\"token comment\">// the card that's smaller than it</span>\n    input<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"merge-sort\" style=\"position:relative;\">Merge Sort<a href=\"#merge-sort\" aria-label=\"merge sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/d57ade8c3762931df83b836b9c7dc88b/merge_sort.gif\" width=\"100%\">\n<p>Merge sort is a type of divide and conquer algorithm — it breaks a big problem into several smaller problems, solves each one, and then combines the results to solve the original problem. As the name “merge” suggests, it’s an algorithm that sorts during the process of splitting the given data into small pieces and then merging them back together. Here’s how it works:</p>\n<hr>\n<ol>\n<li>Receive data <code class=\"language-text\">[5, 0, 4, 1]</code></li>\n<li>Split the data list in half until each piece has length 1</li>\n<li>Becomes <code class=\"language-text\">[5, 0]</code>, <code class=\"language-text\">[4, 1]</code></li>\n<li>Becomes <code class=\"language-text\">[5]</code>, <code class=\"language-text\">[0]</code>, <code class=\"language-text\">[4]</code>, <code class=\"language-text\">[1]</code></li>\n<li>Since each list now has length 1, start merging</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first.</strong> Between <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[0]</code>, 0 is smaller, so merge 0 into the new list first</li>\n<li>Create <code class=\"language-text\">[0, 5]</code></li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first.</strong> Between <code class=\"language-text\">[4]</code> and <code class=\"language-text\">[1]</code>, 1 is smaller, so merge 1 into the new list first</li>\n<li>Create <code class=\"language-text\">[1, 4]</code></li>\n<li>Now merge <code class=\"language-text\">[0, 5]</code> and <code class=\"language-text\">[1, 4]</code>. Since these lists are sorted, smaller indices are guaranteed to have smaller values.</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0]</code>. <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[1, 4]</code> remain</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0, 1]</code>. <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[4]</code> remain</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0, 1, 4]</code>. <code class=\"language-text\">[5]</code> remains</li>\n<li>Since there’s a value left, just merge it</li>\n<li><code class=\"language-text\">[0, 1, 4, 5]</code> sorting complete</li>\n</ol>\n<hr>\n<p>Looking at the emphasized <strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong> in the process above, you can see this step keeps repeating.</p>\n<p>Because it keeps repeating and merging in the same way, merge sort is typically implemented using recursion. Also, merge sort always has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mrow><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({n\\log n})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity, making it efficient. However, since it needs to split and separately store elements equal to the number of elements, it has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> space complexity. In other words, it trades memory for execution speed.</p>\n<p>Here’s the implementation code for merge sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">merge</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>left<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> right<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> right<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">mergeSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> middle <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> middle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>middle<span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"quick-sort\" style=\"position:relative;\">Quick Sort<a href=\"#quick-sort\" aria-label=\"quick sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/ca493988dbac1ae41fa5e70ae069aca5/quick_sort.gif\" width=\"100%\">\n<p>Quick sort is also a divide and conquer sorting method like merge sort. The difference from merge sort is that merge sort does nothing during the division phase and performs sorting during the merge phase, while quick sort performs important operations during the division phase and does nothing during merging.</p>\n<p>Here’s the execution order for quick sort:</p>\n<hr>\n<ol>\n<li>Select one element from the input data list. This element is called the Pivot.</li>\n<li>Divide the list in two based on the pivot.</li>\n<li>Move all elements smaller than the pivot to the left of the pivot</li>\n<li>Move all elements larger than the pivot to the right of the pivot</li>\n</ol>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token operator\">:</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> left<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">&lt;</span> right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Find the pivot point and classify smaller/larger numbers around it</span>\n    <span class=\"token keyword\">const</span> i <span class=\"token operator\">=</span>  <span class=\"token function\">position</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Sort left of pivot</span>\n    <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Sort right of pivot</span>\n    <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">position</span><span class=\"token punctuation\">(</span>arr<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> left<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> right<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> pivot <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// In-place arrangement of larger/smaller numbers to left/right</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> j<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> pivot<span class=\"token punctuation\">)</span> j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> j <span class=\"token operator\">&amp;&amp;</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> pivot<span class=\"token punctuation\">)</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> tmp <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  arr<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pivot<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> j<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That wraps up this post on sorting algorithms.</p>","fields":{"slug":"20181013-sort-algorithm-en","path":"/2018/10/13/sort-algorithm/en/","lang":"en"},"frontmatter":{"title":"Everything About Sorting Algorithms (Bubble, Selection, Insertion, Merge, Quick)","subTitle":"Understanding sorting algorithm principles and time complexity analysis","date":"Oct 13, 2018","categories":["Programming","Algorithm"],"tags":["Sort Algorithms","Algorithm","Bubble Sort","Selection Sort","Insertion Sort","Merge Sort","Quick Sort","Algorithm Fundamentals","Technical Interview"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/5971a1ceb80454e7d2a5b0bb79600959/3a812/thumbnail.jpg","srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/3a812/thumbnail.jpg 320w,\n/static/5971a1ceb80454e7d2a5b0bb79600959/1ddf3/thumbnail.jpg 660w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/fc5c5/thumbnail.webp 320w,\n/static/5971a1ceb80454e7d2a5b0bb79600959/32cde/thumbnail.webp 660w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/5971a1ceb80454e7d2a5b0bb79600959/eb1cc/thumbnail.jpg","srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/eb1cc/thumbnail.jpg 660w","sizes":"100vw"},"sources":[{"srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/cd93d/thumbnail.webp 660w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}]}},"pageContext":{"category":"Algorithm","lang":"en"}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}