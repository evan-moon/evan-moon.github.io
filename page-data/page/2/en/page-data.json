{"componentChunkName":"component---src-templates-posts-page-template-index-tsx","path":"/page/2/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"90c60f54-09b1-5bc1-b8f8-0ebea3582058","tableOfContents":"<ul>\n<li>\n<p><a href=\"#5k-raise-or-50k-in-stock-options\"><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>K</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>s</mi><mi>e</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">5K raise or </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">5</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Kr</span><span class=\"mord mathnormal\">ai</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">seor</span></span></span></span></span>50K in stock options?</a></p>\n</li>\n<li>\n<p><a href=\"#options-financial-instruments-with-time-value\">Options: financial instruments with time value</a></p>\n<ul>\n<li><a href=\"#options-in-everyday-life-apartment-pre-sale-rights\">Options in everyday life: apartment pre-sale rights</a></li>\n<li><a href=\"#aside-whats-the-difference-between-options-and-futures\">Aside: what‚Äôs the difference between options and futures?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#stock-options-the-right-to-buy-stock\">Stock options: the right to buy stock</a></p>\n<ul>\n<li><a href=\"#granting-stock-options\">Granting stock options</a></li>\n<li><a href=\"#strike-price\">Strike price</a></li>\n<li><a href=\"#vesting\">Vesting</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#exercising-stock-options-to-buy-stock\">Exercising stock options to buy stock</a></p>\n<ul>\n<li><a href=\"#paying-the-stock-option-strike-price\">Paying the stock option strike price</a></li>\n<li><a href=\"#income-means-taxes\">Income means taxes!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ready-to-sell-that-stock\">Ready to sell that stock?</a></p>\n<ul>\n<li><a href=\"#sold-your-stock-time-to-pay-taxes\">Sold your stock? Time to pay taxes!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#stock-option-expiration\">Stock option expiration</a></p>\n</li>\n<li>\n<p><a href=\"#how-can-you-make-a-good-choice\">How can you make a good choice?</a></p>\n<ul>\n<li><a href=\"#calculate-actual-profit-from-stock-options\">Calculate actual profit from stock options</a></li>\n<li><a href=\"#you-must-stay-at-the-company-until-the-cliff\">You must stay at the company until the cliff</a></li>\n<li><a href=\"#consider-company-size-and-growth-potential\">Consider company size and growth potential</a></li>\n<li><a href=\"#plan-your-personal-cash-flow\">Plan your personal cash flow</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing thoughts</a></p>\n</li>\n</ul>","excerpt":"This post is going to be a bit different from my usual content - instead of talking about philosophy or technical topics, I want to talk about something that pretty much everyone working in tech has heard about at least once: stock options. With the ongoing developer hiring crunch, more and more co‚Ä¶","html":"<p>This post is going to be a bit different from my usual content - instead of talking about philosophy or technical topics, I want to talk about something that pretty much everyone working in tech has heard about at least once: <strong>stock options</strong>.</p>\n<p>With the ongoing developer hiring crunch, more and more companies are offering signing bonuses or stock options as part of their compensation packages. But the thing is, a lot of people don‚Äôt really understand what stock options are, how they can actually make you money, or how much you‚Äôll owe in taxes - they just accept them without thinking too hard about it.</p>\n<p>I‚Äôve even heard people say things like ‚ÄúI got 100 shares worth 100 million won when my company was valued at 100 billion, and now it‚Äôs at 500 billion, so my money must have 5x‚Äôd too!‚Äù But stock options don‚Äôt work that simply. You have to pay taxes on your gains, and the actual profit you pocket will be lower than you think. Plus, some people get caught off guard when they don‚Äôt have the cash on hand to pay the strike price or taxes.</p>\n<p>Signing bonuses are easy to understand - the company gives you a lump sum of cash with your first paycheck after joining. It‚Äôs just regular incentive money. But stock options are financial derivatives, so if you don‚Äôt have any background in finance, they can be pretty confusing.</p>\n<p>Sure, you could just think of them as regular stock and probably be fine in most cases. But stock options are not the same as stock, and if you don‚Äôt understand the difference, it could mess with your personal cash flow planning.</p>\n<h2 id=\"5k-raise-or-50k-in-stock-options\" style=\"position:relative;\"><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>K</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>s</mi><mi>e</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">5K raise or </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">5</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Kr</span><span class=\"mord mathnormal\">ai</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">seor</span></span></span></span></span>50K in stock options?<a href=\"#5k-raise-or-50k-in-stock-options\" aria-label=\"5k raise or 50k in stock options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, let‚Äôs talk about what stock options actually are. As a developer, you‚Äôve probably gotten offers like this at some point:</p>\n<blockquote>\n<ul>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>K</mi><mi>s</mi><mi>a</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>y</mi><mi>i</mi><mi>n</mi><mi>c</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>v</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>s</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>a</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>y</mi><mo>+</mo></mrow><annotation encoding=\"application/x-tex\">5K salary increase vs. same salary + </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">5</span><span class=\"mord mathnormal\">Ks</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ry</span><span class=\"mord mathnormal\">in</span><span class=\"mord mathnormal\">cre</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">se</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">am</span><span class=\"mord mathnormal\">es</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ry</span><span class=\"mord\">+</span></span></span></span></span>50K worth of stock options</p>\n</li>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>50</mn><mi>K</mi><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>b</mi><mi>o</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi>v</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">50K signing bonus vs. </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">50</span><span class=\"mord mathnormal\">Ks</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">nin</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span></span></span></span></span>100K worth of stock options (or RSUs)</p>\n</li>\n</ul>\n</blockquote>\n<p>If you‚Äôve been around the block a few times, you can probably make a good call based on your situation. But if it‚Äôs your first time seeing an offer like this, it can be pretty overwhelming. If you don‚Äôt know much about stock options, you might think:</p>\n<center>\n  <img src=\"/61beca707059c9a6222de21b1eda6779/good.gif\" width=\"100%\">\n  <br>\n  <small>They're giving me $50K worth of stock instead of a $5K raise? That's amazing!</small>\n  <br>\n  <br>\n</center>\n<p>You hear stories about people making millions from stock options, buying houses, and so on. And let‚Äôs be real - a <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>K</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>s</mi><mi>e</mi><mi>d</mi><mi>o</mi><mi>e</mi><mi>s</mi><msup><mi>n</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup><mi>t</mi><mi>i</mi><mi>n</mi><mi>c</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>t</mi><mi>a</mi><mi>k</mi><mi>e</mi><mo>‚àí</mo><mi>h</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>p</mi><mi>a</mi><mi>y</mi><mi>b</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>a</mi><mi>t</mi><mi>m</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>f</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>t</mi><mi>a</mi><mi>x</mi><mi>e</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>y</mi><mi>w</mi><mi>a</mi><mi>y</mi><mi mathvariant=\"normal\">.</mi><mi>S</mi><mi>o</mi><mi>a</mi><mi>n</mi><mi>o</mi><mi>f</mi><mi>f</mi><mi>e</mi><mi>r</mi><mi>o</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">5K raise doesn't increase your take-home pay by that much after taxes anyway. So an offer of </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9463em;vertical-align:-0.1944em;\"></span><span class=\"mord\">5</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Kr</span><span class=\"mord mathnormal\">ai</span><span class=\"mord mathnormal\">se</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">oes</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">in</span><span class=\"mord mathnormal\">cre</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">seyo</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">ak</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">ha</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">ha</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">es</span><span class=\"mord mathnormal\">an</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">an</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">ff</span><span class=\"mord mathnormal\">ero</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span>50K worth of company stock sounds pretty good, right?</p>\n<p>But here‚Äôs the key thing: <strong>stock options are not stock</strong>.</p>\n<p>Wait, what? Stock options aren‚Äôt stock? But companies talk about them like they are - ‚Äú100 shares of stock options granted‚Äù and all that.</p>\n<p>To understand the real difference between stock and stock options, we need to understand what this <strong>option</strong> thing actually is as a financial instrument.</p>\n<h2 id=\"options-financial-instruments-with-time-value\" style=\"position:relative;\">Options: financial instruments with time value<a href=\"#options-financial-instruments-with-time-value\" aria-label=\"options financial instruments with time value permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>An option is <strong>a contract that gives you the right to buy or sell an underlying asset at a specific price at a future point in time</strong>. In simple terms, it‚Äôs a derivative product where you‚Äôre betting on how the price will change in the future.</p>\n<p>If you haven‚Äôt been into investing much, that might sound confusing, so let‚Äôs break it down step by step.</p>\n<p>First, an <strong>underlying asset</strong> is something like stock, bonds, dollars, gold, or Bitcoin - assets that have economic value on their own. Derivatives like options, futures, and swaps were created to meet market needs like making it easier to trade these assets or hedging against price volatility.</p>\n<p>For stock options, the underlying asset is stock - pretty straightforward.</p>\n<p>The phrase <strong>‚Äúthe right to buy or sell at a specific price at a future point in time‚Äù</strong> means exactly what it sounds like - you can buy or sell the underlying asset at a predetermined price in the future. Let me give you an example using corn as the underlying asset:</p>\n<blockquote>\n<p><strong>December 4 (current corn price: $0.50 per ear)</strong></p>\n<p>Me: I want to buy corn for $0.60 per ear on January 4, one month from now.</p>\n<p>Merchant: Sure. I‚Äôll sell you the right to buy corn for <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.60</mn><mi>o</mi><mi>n</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>f</mi><mi>r</mi><mi>o</mi><mi>m</mi><mi>n</mi><mi>o</mi><mi>w</mi><mo separator=\"true\">,</mo><mi>n</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>w</mi><mi>h</mi><mi>a</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi mathvariant=\"normal\">.</mi><mi>T</mi><mi>h</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">0.60 one month from now, no matter what the price is then. That right costs </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0.60</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">ro</span><span class=\"mord mathnormal\">mn</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">ma</span><span class=\"mord mathnormal\">tt</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">ha</span><span class=\"mord mathnormal\">tt</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">ce</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">ha</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">cos</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span></span></span></span></span>0.10. You can decide whether to actually buy it when the time comes.</p>\n<p><strong>January 4 (current corn price: $1.00 per ear)</strong></p>\n<p>Me: Oh wow, corn went up a lot! Now I‚Äôll exercise my option (the right to buy) and purchase corn for $0.60 per ear!</p>\n</blockquote>\n<p>This example shows a call option - buying and selling the right to purchase something. Since I can exercise my call option and buy corn for $0.60 no matter what the current price is, the more the corn price goes up over that month, the bigger my profit.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ff68626a0dad3dd5b48e34a969701d5d/9cac8/call-option.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42mNgwATCQMzEQAT4z8DA+P//f0Z8ajiAmA+IGYk15H99PdOxwkJOkNh/BkzDxYFYkqAhQPbz4mLu19nZUq+ys9XO5DYrE3IlE1ZD09K4XqWlSb7MSlb5kJmo9DQtTeR/KAPzwop1wktqtuqubdkOdowAEPOC6DTjNFZ1dSteYyANdAbjqlWrmE/k1vPdLiqSvZ+ZqXk3JVvtflaJxCqgFxkY6pkY6v8zhYauYp6cvVB4Zv0mrpkzz7CCDFQAYhkgVpyYO5Hd3z5e4FBupeiz4mr5RxnFOvfyS9VvFlZJ78+q50lLO8NaX3+FbWLuNvZtEyF4fv1+jt7CVZy4vCuSrKWlcig0VGuWh4eMvagoD1CMGYhZgJgdGhwcWNggzA8yAQBQZWpop7Fk2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"call option\" title=\"\" src=\"/static/ff68626a0dad3dd5b48e34a969701d5d/6af66/call-option.png\" srcset=\"/static/ff68626a0dad3dd5b48e34a969701d5d/69538/call-option.png 160w,\n/static/ff68626a0dad3dd5b48e34a969701d5d/72799/call-option.png 320w,\n/static/ff68626a0dad3dd5b48e34a969701d5d/6af66/call-option.png 640w,\n/static/ff68626a0dad3dd5b48e34a969701d5d/d9199/call-option.png 960w,\n/static/ff68626a0dad3dd5b48e34a969701d5d/21b4d/call-option.png 1280w,\n/static/ff68626a0dad3dd5b48e34a969701d5d/9cac8/call-option.png 2288w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    No matter how much corn prices rise, I can exercise my call option<br>\n    and buy at $0.60, so higher corn prices mean more profit for me\n  </small>\n</center>\n<p>If there‚Äôs a right to buy, there‚Äôs also a right to sell, and that‚Äôs called a put option.</p>\n<p>If the option I bought from the merchant was a put option instead of a call option - meaning the right to sell corn for <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.60</mn><mo>‚àí</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>i</mi><mi>f</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>n</mi><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>d</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>s</mi><mi>t</mi><mi>o</mi></mrow><annotation encoding=\"application/x-tex\">0.60 - then even if the current corn price drops to </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">0.60</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">ni</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">ec</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">rre</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">cor</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">ce</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">ro</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">o</span></span></span></span></span>0.10, I can still sell at $0.60. So with put options, the more the price drops over that month, the bigger my profit. <small>(That‚Äôs why call options are bullish bets and put options are bearish bets)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/65f5c9330f73b05984b596d7b5354bbe/9cac8/put-option.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVR42mNgQAWMQCzEEBrK/P//f0YGKgA2GQs3IY/ciezIgmDDybRASNsqQDl34hEwzp58Urhw1TFOUl3LBcQgF3H+r//PJCMjw1kY2suZVb+Kp6jnoGxRz261/P696jndBxUzp20RrK/fz/EfGDT/Gf6D8f79+1lWrVrFjGygChDLArHyRKBXvb2jBGNiirnPzDzDOjNtJitIrL5+MV9l6zZRsOGde9XzuvbolXdskquv3yTSW9jLubBinfBSIHsK0BHorhUAYlF83gF5f9X//8y5Ew+JFs85Kp8+/bxCS8tOg+X1u9UW1e8UQ49hNiDmA2JuUBBAMRcES3JJSkpyQcU4gJgViJlVzDz4rKz8eKF6GAA3A2GQZ1XiaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"put option\" title=\"\" src=\"/static/65f5c9330f73b05984b596d7b5354bbe/6af66/put-option.png\" srcset=\"/static/65f5c9330f73b05984b596d7b5354bbe/69538/put-option.png 160w,\n/static/65f5c9330f73b05984b596d7b5354bbe/72799/put-option.png 320w,\n/static/65f5c9330f73b05984b596d7b5354bbe/6af66/put-option.png 640w,\n/static/65f5c9330f73b05984b596d7b5354bbe/d9199/put-option.png 960w,\n/static/65f5c9330f73b05984b596d7b5354bbe/21b4d/put-option.png 1280w,\n/static/65f5c9330f73b05984b596d7b5354bbe/9cac8/put-option.png 2288w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    No matter how much corn prices fall, I can exercise my put option<br>\n    and sell at $0.30, so falling corn prices mean more profit for me\n  </small>\n</center>\n<p>Basically, options let you bet on whether the underlying asset‚Äôs price will go up or down by locking in a future price in advance.</p>\n<p>Now, what if I‚Äôm holding a call option to buy corn at <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.60</mn><mo separator=\"true\">,</mo><mi>b</mi><mi>u</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>l</mi><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">0.60, but a month later corn is still </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0.60</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">am</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">ercor</span><span class=\"mord mathnormal\">ni</span><span class=\"mord mathnormal\">ss</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">ll</span></span></span></span></span>0.50 or even lower? What should I do? There‚Äôs no profit in exercising the option, right?</p>\n<p>Simple - you just don‚Äôt exercise your right to buy or sell. That‚Äôs why they‚Äôre called options - you have the option to exercise them or let them expire. If you don‚Äôt exercise an option, you only lose what you paid for the option itself.</p>\n<h3 id=\"options-in-everyday-life-apartment-pre-sale-rights\" style=\"position:relative;\">Options in everyday life: apartment pre-sale rights<a href=\"#options-in-everyday-life-apartment-pre-sale-rights\" aria-label=\"options in everyday life apartment pre sale rights permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A classic real-world example of options is apartment pre-sale rights in Korea. When you win an apartment lottery, you get the right to buy an apartment at the pre-sale price, which is usually much cheaper than market value.</p>\n<p>But having the right to buy an apartment for 300 million won means you need to actually have 300 million won in cash to use that right. If you can‚Äôt come up with the money or don‚Äôt want the apartment, people often sell these pre-sale rights to others.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 604px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7b2452ff1dcab002720732bbd4d3b4f3/efa6e/option.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 136.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHskUaCBXlRYg//xAAaEAABBQEAAAAAAAAAAAAAAAAAAQIQETFB/9oACAEBAAEFArnHCF3Kbw//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAXEAEAAwAAAAAAAAAAAAAAAAAQASAx/9oACAEBAAY/ArYy/wD/xAAaEAADAQEBAQAAAAAAAAAAAAAAAREhUWEQ/9oACAEBAAE/IVSbdxie+lfR6Qje6JgqRCwopdefP//aAAwDAQACAAMAAAAQIwkA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAwEBAAAAAAAAAAAAAQARMVEhQYGx4f/aAAgBAQABPxBUqEsmIB2IfohGXPYJEh1bEPUNQFbJe2OC2iO8IYzz9lt+0AM//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"option\" title=\"\" src=\"/static/7b2452ff1dcab002720732bbd4d3b4f3/efa6e/option.jpg\" srcset=\"/static/7b2452ff1dcab002720732bbd4d3b4f3/0913d/option.jpg 160w,\n/static/7b2452ff1dcab002720732bbd4d3b4f3/cb69c/option.jpg 320w,\n/static/7b2452ff1dcab002720732bbd4d3b4f3/efa6e/option.jpg 604w\" sizes=\"(max-width: 604px) 100vw, 604px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Trading pre-sale rights isn't trading the apartment itself - it's trading the right to buy the apartment</small>\n</center>\n<p>In other words, an apartment pre-sale right is a contract containing ‚Äúthe right to buy an apartment for 300 million won by a certain date,‚Äù so people trading these rights are buying and selling ‚Äúthe right to buy an apartment,‚Äù not the apartment itself. That‚Äôs an option.</p>\n<h3 id=\"aside-whats-the-difference-between-options-and-futures\" style=\"position:relative;\">Aside: what‚Äôs the difference between options and futures?<a href=\"#aside-whats-the-difference-between-options-and-futures\" aria-label=\"aside whats the difference between options and futures permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A quick aside since many people confuse futures and options. They‚Äôre confusing because both involve making trades now based on predictions about future asset prices. But futures are the broader concept, and options are a type of futures contract.</p>\n<p><strong>Futures contracts are about pulling a future transaction into the present</strong>. So a corn futures contract would be like ‚Äúone month from now, I‚Äôm going to trade corn for $0.60 - stamp stamp‚Äù in the contract. When the futures contract expires, the settlement goes through and the transaction is executed.</p>\n<p>Since you‚Äôre literally contracting now for a future transaction, futures contracts don‚Äôt give you the choice to exercise or not exercise like options do.</p>\n<p>Just like with options, if corn prices go up to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1.00</mn><mo separator=\"true\">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>w</mi><mi>h</mi><mi>o</mi><mi>b</mi><mi>o</mi><mi>u</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>n</mi><mi>f</mi><mi>u</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>g</mi><mi>e</mi><mi>t</mi><mi>s</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">1.00, the person who bought corn futures gets a </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">1.00</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">erso</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ug</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">cor</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">res</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">a</span></span></span></span></span>0.40 profit. If corn prices drop to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.30</mn><mo separator=\"true\">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>w</mi><mi>h</mi><mi>o</mi><mi>s</mi><mi>o</mi><mi>l</mi><mi>d</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>n</mi><mi>f</mi><mi>u</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>f</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">0.30, the person who sold corn futures for </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0.30</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">erso</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">oso</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">cor</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">res</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span></span></span></span></span>0.60 gets a $0.30 profit. <small>(Futures trading is a zero-sum game - one person always wins and one person always loses)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5ae794732187196080a4074fd043ebe6/41099/future.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABw7mRFiQv/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAECEQMSIf/aAAgBAQABBQJLSpfUmsXJ4M//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAwADAAAAAAAAAAAAAAAAAAEQESFx/9oACAEBAAY/AjcSwdn/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhMVFhcf/aAAgBAQABPyFzQQfgXC8JqkTNU7Gx/9oADAMBAAIAAwAAABDT3//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxAEO3//xAAWEQEBAQAAAAAAAAAAAAAAAAABEQD/2gAIAQIBAT8Qjck3/8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFBYYGR/9oACAEBAAE/EDQvMWWYmABho3h8TF3hWiXXeQJSvXxkNAGuDP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"future\" title=\"\" src=\"/static/5ae794732187196080a4074fd043ebe6/41099/future.jpg\" srcset=\"/static/5ae794732187196080a4074fd043ebe6/0913d/future.jpg 160w,\n/static/5ae794732187196080a4074fd043ebe6/cb69c/future.jpg 320w,\n/static/5ae794732187196080a4074fd043ebe6/41099/future.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>This is the futures contract that Squid Game's Cho Sang-woo lost 6 billion won on</small>\n</center>\n<p>But most people trading futures don‚Äôt actually want to own the underlying asset - they just want to profit from price changes. So before the contract expires and they actually have to take delivery, they sell their futures contract to someone who actually wants to buy the asset cheap, then roll over into next month‚Äôs futures contract.</p>\n<h4 id=\"memories-of-negative-oil-prices-in-march-2020\" style=\"position:relative;\">Memories of negative oil prices in March 2020<a href=\"#memories-of-negative-oil-prices-in-march-2020\" aria-label=\"memories of negative oil prices in march 2020 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>So what happens if the futures contract is about to expire but there‚Äôs nobody who wants to buy the underlying asset cheap, so you can‚Äôt roll over your contract?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3e32591136ab104e94bd94d2dee99f11/72e01/container_ship.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 73.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAf/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAF2T1o0SaOf/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECEhMh/9oACAEBAAEFAnaNGx0dBV5//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAS/9oACAEDAQE/ATLP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/AaF//8QAGBAAAgMAAAAAAAAAAAAAAAAAARAgITL/2gAIAQEABj8CqGiv/8QAGxABAAEFAQAAAAAAAAAAAAAAAQAQESFhgTH/2gAIAQEAAT8hurBxuPRR1jZkF2DML2f/2gAMAwEAAgADAAAAEI/f/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxCjuMWmf//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBYMv/EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQXFRobH/2gAIAQEAAT8QRQkW3ZeiMFnYRHmLi8DhjpBtfRx7itDpt5n/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"container ship\" title=\"\" src=\"/static/3e32591136ab104e94bd94d2dee99f11/c08c5/container_ship.jpg\" srcset=\"/static/3e32591136ab104e94bd94d2dee99f11/0913d/container_ship.jpg 160w,\n/static/3e32591136ab104e94bd94d2dee99f11/cb69c/container_ship.jpg 320w,\n/static/3e32591136ab104e94bd94d2dee99f11/c08c5/container_ship.jpg 640w,\n/static/3e32591136ab104e94bd94d2dee99f11/6a068/container_ship.jpg 960w,\n/static/3e32591136ab104e94bd94d2dee99f11/72e01/container_ship.jpg 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Hi Evan, delivery of the 100,000 barrels of crude oil you contracted for last month - honk honk~</small>\n</center>\n<p>When a futures contract expires, ownership of the underlying asset actually transfers to you. If it‚Äôs stock that‚Äôs not a huge deal, but if it‚Äôs a physical commodity like crude oil or corn, the moment it expires you have an absolute disaster on your hands - <strong>this stuff actually gets shipped to some unknown port in America with your name on it</strong>. <small>(This is why messing with futures without understanding them can really screw you)</small></p>\n<p>The reason crude oil futures prices dropped to -$37 in March 2020 when COVID first hit was because of this characteristic of futures contracts. By the way, a negative price means you have to pay someone extra to take your futures contract off your hands. Around that time, the WHO declared a pandemic, and the market sentiment was:</p>\n<blockquote>\n<p>Oh crap, a pandemic? Consumer spending will drop üëâ Production will drop too üëâ Wait‚Ä¶so we won‚Äôt need much crude oil to make and ship stuff for a while‚Ä¶?</p>\n</blockquote>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/15ec7/mang.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG7Ja4Yq8NGMMkH/8QAHBAAAgICAwAAAAAAAAAAAAAAAQMAEgIQESEz/9oACAEBAAEFAlKsGIFZiKY9ThWhGen/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAABBQEBAAAAAAAAAAAAAAAAAhAREiExcf/aAAgBAQAGPwKVcJS1TDat4KP/xAAdEAACAwACAwAAAAAAAAAAAAABEQAhMRBRQWFx/9oACAEBAAE/IRgc3uMjpWnwMDUMJhcK3jJ1xP0cYQF4i1dz/9oADAMBAAIAAwAAABATDzz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAgEAEAAgIBBAMAAAAAAAAAAAABABEhQTEQUWFxgaGx/9oACAEBAAE/ED6VlBQo7waJDJYTowbDWwS2ASJrgcNeIAGGYKPx9x4gRINjY5qE16M/nf3P/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mang\" title=\"\" src=\"/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/c08c5/mang.jpg\" srcset=\"/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/0913d/mang.jpg 160w,\n/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/cb69c/mang.jpg 320w,\n/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/c08c5/mang.jpg 640w,\n/static/0ce6a4f4f89b2f1a8f2c5f4a548030af/15ec7/mang.jpg 690w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>\"I need to dump these futures contracts fast...\"</small>\n  <br>\n  <br>\n</center>\n<p>When demand for crude oil itself drops, oil prices naturally fall. And at that time, Russia and Saudi Arabia were in an oil price war and increased production, causing crude oil spot prices to absolutely crater.</p>\n<p>The problem was that futures contracts bought before the crash had strike prices around $20 - the pre-crash price. For these contracts to be profitable, future crude oil spot prices needed to go up. But with all these factors combined, nobody wanted to buy these futures contracts. It was cheaper to just buy at current spot prices than to buy futures contracts.</p>\n<p>So there was an oversupply of sellers and no buyers - a truly tragic market situation.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1335a33be53bfd1691c01d192a5e32cc/6aca1/oil-future.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB5LbEcqWf/8QAFxABAQEBAAAAAAAAAAAAAAAAAQIQEv/aAAgBAQABBQKFa6ygwgT/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BR//EABcQAAMBAAAAAAAAAAAAAAAAAAAQMRH/2gAIAQEABj8Cwij/AP/EABgQAQEBAQEAAAAAAAAAAAAAAAEAERBR/9oACAEBAAE/IR+pCeJgaAMOE1W//9oADAMBAAIAAwAAABDg7//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCxh//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCNP//EABoQAQEBAQEBAQAAAAAAAAAAAAERACExYfD/2gAIAQEAAT8QAA8bYcC6KRx+7ppCCeXG9YBDuuscScfu/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"oil future\" title=\"\" src=\"/static/1335a33be53bfd1691c01d192a5e32cc/c08c5/oil-future.jpg\" srcset=\"/static/1335a33be53bfd1691c01d192a5e32cc/0913d/oil-future.jpg 160w,\n/static/1335a33be53bfd1691c01d192a5e32cc/cb69c/oil-future.jpg 320w,\n/static/1335a33be53bfd1691c01d192a5e32cc/c08c5/oil-future.jpg 640w,\n/static/1335a33be53bfd1691c01d192a5e32cc/6aca1/oil-future.jpg 650w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>This is the \"I'll give you $37.63 if you please just buy my contract...\" situation</small>\n</center>\n<p>As futures contracts couldn‚Äôt be sold and expiration dates approached, futures investors panicked about actually taking delivery of crude oil. So they started throwing their contracts away while paying $37 per contract just to get rid of them. <small><del>(The ultimate panic sell isn‚Äôt selling cheap - it‚Äôs paying someone to take it off your hands‚Ä¶)</del></small></p>\n<p>This is the scary situation that arises from the key difference between options and futures: ‚Äúyou can‚Äôt back out of the transaction when it expires.‚Äù</p>\n<p>On the other hand, <strong>options are about buying and selling the right to transact in the future</strong>. They‚Äôre a type of futures contract, but since you‚Äôre contracting for ‚Äúthe right to transact‚Äù rather than ‚Äúto transact,‚Äù you have the choice to exercise or not exercise your rights at expiration. In simple terms, options give you one more chance to make the final decision compared to regular futures.</p>\n<table>\n<thead>\n<tr>\n<th>Product</th>\n<th>What you‚Äôre trading</th>\n<th>When it expires?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Futures</td>\n<td>Contract to transact underlying asset</td>\n<td>Transaction is executed no matter what</td>\n</tr>\n<tr>\n<td>Options</td>\n<td>Contract for the right to transact underlying asset</td>\n<td>You can exercise the right or not</td>\n</tr>\n</tbody>\n</table>\n<p>Also, since futures require mandatory execution at expiration, it‚Äôs a zero-sum game where one person profits and one person loses. But with options, the buyer can just abandon their rights, so the option seller can end up with a pure loss.</p>\n<p>That‚Äôs why when you buy an option, you pay the option seller a separate price for the option itself. This option price is calculated using methods like the <a href=\"https://namu.wiki/w/%EB%B8%94%EB%9E%99-%EC%88%84%EC%A6%88%20%EB%AA%A8%ED%98%95\" target=\"_blank\" rel=\"nofollow\">Black-Scholes model</a>.</p>\n<h2 id=\"stock-options-the-right-to-buy-stock\" style=\"position:relative;\">Stock options: the right to buy stock<a href=\"#stock-options-the-right-to-buy-stock\" aria-label=\"stock options the right to buy stock permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now that we know what options are, stock options are easy to explain. Stock options are options where the underlying asset is stock, meaning they‚Äôre contracts that give you the right to buy or sell stock at a specific price at a specific time.</p>\n<p>However, the incentive stock options we typically encounter aren‚Äôt about selling stock you already own - they‚Äôre additional incentives given when you don‚Äôt have any stock yet. So stock options just mean the right to buy stock, not to sell it. That‚Äôs why in Korean they‚Äôre called ‚Äústock purchase option rights.‚Äù</p>\n<p>When you receive stock options, you‚Äôre not receiving stock - you‚Äôre receiving ‚Äúthe right to buy stock.‚Äù And the act of ‚Äúusing my stock options to buy stock‚Äù is exercising your right to purchase stock, which is why we say we‚Äôre ‚Äúexercising stock options.‚Äù</p>\n<h3 id=\"granting-stock-options\" style=\"position:relative;\">Granting stock options<a href=\"#granting-stock-options\" aria-label=\"granting stock options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>If you join a company and they promise to grant you stock options, do you get them on day one when you sign your employment contract?</p>\n<p>Nope. Stock options aren‚Äôt something you can just hand out with a single contract. For a corporation to grant stock options to someone, they must hold a shareholders‚Äô meeting and go through an approval process.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/783da1105578e0f9950fffb6d49bf961/d6e5c/meeting.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABumprSpigf//EABoQAAIDAQEAAAAAAAAAAAAAAAACAQMTBBL/2gAIAQEAAQUCzQwgzrF71gZva2dC1v8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAECETEyQZEi/9oACAEBAAY/AsFwwiWXDBnmSVdjhem0f//EABwQAQEBAAEFAAAAAAAAAAAAAAERABAhMVGhsf/aAAgBAQABPyEZhkj8ocfbfRNKZDs6zQw+YI7/2gAMAwEAAgADAAAAEGjf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EFtL/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qh//EABwQAQADAQADAQAAAAAAAAAAAAEAESExUWGR0f/aAAgBAQABPxAAmvAP5Ddtq0Mk518cfn0UCnh2BrQhBaY9ORaLqWmE/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"meeting\" title=\"\" src=\"/static/783da1105578e0f9950fffb6d49bf961/c08c5/meeting.jpg\" srcset=\"/static/783da1105578e0f9950fffb6d49bf961/0913d/meeting.jpg 160w,\n/static/783da1105578e0f9950fffb6d49bf961/cb69c/meeting.jpg 320w,\n/static/783da1105578e0f9950fffb6d49bf961/c08c5/meeting.jpg 640w,\n/static/783da1105578e0f9950fffb6d49bf961/6a068/meeting.jpg 960w,\n/static/783da1105578e0f9950fffb6d49bf961/eea4a/meeting.jpg 1280w,\n/static/783da1105578e0f9950fffb6d49bf961/d6e5c/meeting.jpg 1685w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Corporations can only grant stock options to specific individuals after shareholder approval</small>\n</center>\n<p>After the shareholders‚Äô meeting resolves to grant the stock options and approve the shares to be issued or transferred upon exercise, then they can enter into a stock option grant agreement with the recipient.</p>\n<p>Why should we care about shareholder meetings when the company handles them? Because when your stock options are granted depends on how often these meetings are held. If you join in January 2021 but the shareholders‚Äô meeting is in December, your stock option grant date could be after that.</p>\n<p>And the criteria for when and how much you can exercise your stock options are calculated from the <strong>stock option grant date</strong> determined by this shareholders‚Äô meeting, not your hire date. So you need to know when your company holds shareholder meetings to estimate when your grant date will be.</p>\n<p>Anyway, once the shareholders‚Äô meeting approves granting you stock options, you‚Äôll sign a stock option agreement. This agreement includes information like:</p>\n<blockquote>\n<ol>\n<li>\n<p>Number of shares to receive</p>\n</li>\n<li>\n<p>Stock option grant method and grant date</p>\n</li>\n<li>\n<p>Stock option exercise price</p>\n</li>\n<li>\n<p>Cliff and vesting period</p>\n</li>\n<li>\n<p>How to exercise stock options</p>\n</li>\n</ol>\n</blockquote>\n<p>All of this is important, but when you get this agreement, the key things to look at are the stock option <strong>strike price</strong>, <strong>cliff</strong>, and <strong>vesting</strong>.</p>\n<h3 id=\"strike-price\" style=\"position:relative;\">Strike price<a href=\"#strike-price\" aria-label=\"strike price permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>I mentioned earlier that stock options give you the right to buy stock at a predetermined price at a specific time. This ‚Äúpredetermined price‚Äù is called the <strong>strike price</strong>.</p>\n<p>In other words, it‚Äôs literally the money you have to pay when you exercise your stock options to buy stock. If you thought stock options were just stock, you might be caught off guard when the company suddenly asks you to pay money when you want to exercise them.</p>\n<p>Stock options aren‚Äôt free stock - they‚Äôre ‚Äúthe right to buy stock,‚Äù so of course you have to pay. According to <a href=\"https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%83%81%EB%B2%95/%EC%A0%9C340%EC%A1%B0%EC%9D%982\" target=\"_blank\" rel=\"nofollow\">Article 340-2 of the Commercial Act</a>, the strike price must be set at the higher of either the par value (initial capital divided by number of issued shares) or the current market price.</p>\n<p>However, companies that qualify for <a href=\"https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EB%B2%A4%EC%B2%98%EA%B8%B0%EC%97%85%EC%9C%A1%EC%84%B1%EC%97%90%EA%B4%80%ED%95%9C%ED%8A%B9%EB%B3%84%EC%A1%B0%EC%B9%98%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9/%EC%A0%9C11%EC%A1%B0%EC%9D%983\" target=\"_blank\" rel=\"nofollow\">venture exemptions</a> can set the strike price below market value if they meet certain conditions. Most startups qualify for venture exemptions, so they often set strike prices below market value. <small>(Kakao was a famous case that didn‚Äôt qualify for venture exemptions, so they had to set their strike price at market value at the time of grant)</small></p>\n<p>Your actual pre-tax profit from stock options is <code class=\"language-text\">(market price - strike price) * number of shares</code>, and you might need to have cash ready to pay the strike price when exercising. So you absolutely need to know your stock options‚Äô strike price.</p>\n<h3 id=\"vesting\" style=\"position:relative;\">Vesting<a href=\"#vesting\" aria-label=\"vesting permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Many of you probably know this already, but you can‚Äôt exercise stock options immediately after they‚Äôre granted.</p>\n<p>In Korea, <a href=\"https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%83%81%EB%B2%95/(20190916,14096,20160322)/%EC%A0%9C340%EC%A1%B0%EC%9D%984\" target=\"_blank\" rel=\"nofollow\">Article 340-4 of the Commercial Act</a> states that you must remain employed ‚Äúfor at least 2 years from the shareholders‚Äô meeting resolution date‚Äù before you can exercise stock options. Though in practice, companies usually count 2 years from the grant date rather than the resolution date. <small>(Since the grant date is always later than the resolution date anyway, this is legally fine)</small></p>\n<p>Without this requirement, employees could exercise all their stock options immediately after receiving them and quit - a classic pump and dump - and the company would have no recourse. So this is a minimum safeguard.</p>\n<p>That‚Äôs why stock option agreements always include language like <strong>‚Äúcan exercise n% after remaining employed for at least 24 months from grant date.‚Äù</strong></p>\n<p>How much you can exercise after 24 months depends on the company‚Äôs vesting plan. Early-stage startups sometimes let you exercise 100% after 2 years, but larger companies often split it up like ‚Äú50% after 2 years, 25% in year 3, 25% in year 4.‚Äù</p>\n<p>It‚Äôs important to understand that after these periods pass, your stock options transition from unexercisable to exercisable - they‚Äôre not being granted or exercised automatically, and you‚Äôre not receiving stock yet. This <strong>transition from unexercisable to exercisable status is called vesting</strong>.</p>\n<p>The first moment when you can exercise any of your granted stock options is called the <strong>cliff</strong>. Cliff literally means cliff, and it‚Äôs called that because the amount of exercisable stock options jumps from 0 to some positive number. When you graph exercisable quantity over time, it looks like a cliff.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/830230ebe0f0489c89ca66d73e19a1a9/2adcb/cliff.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKElEQVR42mNggABmIBYHYmkgZmdAA/8Z/jMykAi4gJgDivGC/wwMjHAcGsr8v76eCZs6TiQMA2BXrSpfxb+8aYvm/Pr9HMiGgun6fIH/lbmiyGLILuTC5sL9QIMWt2yXBNIsIP7LrHiJZ1lZ8o9TUmSe5+QoPi8u5sbmQlZo2GH18triRWIgjf9nprH+yEtXPRYaynklNJTtTFoaK66g4cPmQpg3HuXl6bzIzFR6k5si8yIvWZzYiGFBC0O4ge/S0uSAgc9Cakwzx+jpcf8HegPkHZABtzw82EEx+T4nRXEbkA1Uw1QPxAwIzAjFIMvYoDQEcHNzi9dYWhr+y82VuR4fr7A1IEDtK5D9LClJvsfeXgOkBOoDUWgQgYJHGIj5gVgAiOWAWAgAQQdW2jCQZooAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cliff\" title=\"\" src=\"/static/830230ebe0f0489c89ca66d73e19a1a9/6af66/cliff.png\" srcset=\"/static/830230ebe0f0489c89ca66d73e19a1a9/69538/cliff.png 160w,\n/static/830230ebe0f0489c89ca66d73e19a1a9/72799/cliff.png 320w,\n/static/830230ebe0f0489c89ca66d73e19a1a9/6af66/cliff.png 640w,\n/static/830230ebe0f0489c89ca66d73e19a1a9/d9199/cliff.png 960w,\n/static/830230ebe0f0489c89ca66d73e19a1a9/21b4d/cliff.png 1280w,\n/static/830230ebe0f0489c89ca66d73e19a1a9/2adcb/cliff.png 1984w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A sharp increase in exercisable stock options occurs 2 years from the grant date</small>\n</center>\n<p>This graph shows a vesting plan with a 4-year total vesting period and a 2-year cliff.</p>\n<p>Let‚Äôs say I join this company and immediately get granted 100 stock options after a shareholders‚Äô meeting. Here‚Äôs roughly what happens:</p>\n<p>I have 100 stock options but can‚Äôt exercise any of them for the first 2 years from the grant date. Not being able to exercise stock options means I can‚Äôt exercise ‚Äúthe right to buy stock cheap,‚Äù so for the first 2 years I‚Äôm just holding them. <small><del>(But I‚Äôm definitely tracking the company‚Äôs stock price from day one‚Ä¶)</del></small></p>\n<p>When 2 years pass from the grant date, I can exercise 50% of my 100 stock options - that‚Äôs 50 shares. Since there‚Äôs still a long way to go before the vesting plan ends, it‚Äôs up to me whether to exercise then. As I‚Äôll mention below, for tax optimization it‚Äôs sometimes better to exercise in batches rather than all at once, so exercising at this point isn‚Äôt a bad choice.</p>\n<p>After 3 years, I can exercise another 25% (half of the remaining 50%). So at this point I can exercise 75 of my original 100 stock options.</p>\n<p>Finally, after 4 years, I can exercise all my granted stock options and the vesting period ends. This 2-year cliff with <code class=\"language-text\">50%/25%/25%</code> vesting is very common, but there are various other vesting plans - some companies vest monthly after the 2-year cliff, for example.</p>\n<blockquote>\n<p><strong>üßê  I‚Äôve seen places offering 1-year cliffs though?</strong></p>\n<p>As I mentioned, the minimum 2-year cliff is specified in Korean commercial law.</p>\n<p>So foreign companies, especially US companies where there‚Äôs no specific law about cliffs, might offer vesting plans like ‚Äú1-year cliff, then monthly vesting in equal parts.‚Äù</p>\n</blockquote>\n<h2 id=\"exercising-stock-options-to-buy-stock\" style=\"position:relative;\">Exercising stock options to buy stock<a href=\"#exercising-stock-options-to-buy-stock\" aria-label=\"exercising stock options to buy stock permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now we know when and how we receive stock options from the company and when we can exercise our rights. Let‚Äôs talk about the most important part: ‚Äúthe process of turning stock options into money.‚Äù</p>\n<p>The first step in turning stock options into money is exercising them to buy stock. As I‚Äôve mentioned many times, exercising stock options means ‚ÄúI‚Äôm going to use my right to buy stock cheap to actually buy the stock.‚Äù</p>\n<p>The exercise method usually involves written notification to the company, but the exact process can vary by company, so check with your company‚Äôs person in charge or read your stock option agreement carefully.</p>\n<h3 id=\"paying-the-stock-option-strike-price\" style=\"position:relative;\">Paying the stock option strike price<a href=\"#paying-the-stock-option-strike-price\" aria-label=\"paying the stock option strike price permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Stock options come in three main types: new share issuance type, treasury stock delivery type, and cash settlement type. Whether you need to pay the strike price depends on which type you have.</p>\n<p>With cash settlement type, the company pays you cash equal to the difference between your stock option strike price and the current market price, so you don‚Äôt need to pay the strike price. But with new share issuance (where new shares are issued and given to you) and treasury stock delivery (where the company gives you shares it already owns), you‚Äôre exercising stock options to purchase stock, so you need to pay the strike price to the company.</p>\n<p>If you thought stock options were just stock, you might not have the cash on hand to pay the strike price even after your options vest. This could prevent you from exercising the desired amount of stock options or even force you to take out an emergency loan. So always remember your stock options are ‚Äúthe right to purchase stock.‚Äù</p>\n<h3 id=\"income-means-taxes\" style=\"position:relative;\">Income means taxes!<a href=\"#income-means-taxes\" aria-label=\"income means taxes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<blockquote>\n<p>Taxes on stock options can vary slightly by situation, so what I‚Äôm explaining here isn‚Äôt 100% accurate in all cases.</p>\n<p>This is just to give you a rough idea of how they‚Äôre calculated - for accurate information, ask your company when you exercise your stock options.</p>\n</blockquote>\n<p>Actually, the most important thing to understand about exercising stock options is <strong>taxes</strong>. Unfortunately, stock you receive from exercising stock options counts as income, so naturally you have to pay income tax on it. <small><del>(No idea why they count unsold stock as income, but whatever‚Ä¶)</del></small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2923ebd94179d5db9428479351befdbb/4a359/poor.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAYYtAuYUs//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMTERQi/9oACAEBAAEFAkrznPnriB9FUASxyH//xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAwEBPwGI/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8Bqv/EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhUXGR/9oACAEBAAY/Amj2KBd8Yt11hJ//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFRcZGh/9oACAEBAAE/IQwyPJl8ltI7FHq55XYhVp9mvsHlUT//2gAMAwEAAgADAAAAEKA//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERUf/aAAgBAwEBPxBMTZ//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHBABAQACAwEBAAAAAAAAAAAAAREAITFBUWFx/9oACAEBAAE/EJOGKJ0cSmuXLrdixEXUOucFBQbYafMalTxmQ+3v8y0z2UYejF5ywZLrzP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"poor\" title=\"\" src=\"/static/2923ebd94179d5db9428479351befdbb/c08c5/poor.jpg\" srcset=\"/static/2923ebd94179d5db9428479351befdbb/0913d/poor.jpg 160w,\n/static/2923ebd94179d5db9428479351befdbb/cb69c/poor.jpg 320w,\n/static/2923ebd94179d5db9428479351befdbb/c08c5/poor.jpg 640w,\n/static/2923ebd94179d5db9428479351befdbb/4a359/poor.jpg 719w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>After year-end tax settlement...</small>\n</center>\n<p>Income from exercising stock options is calculated as <code class=\"language-text\">(market price - strike price) * number of shares</code>, and the taxes vary depending on whether you‚Äôre still employed at that company, how much income you earn from exercising, and whether your company is a venture company.</p>\n<p>For startups, since they‚Äôre usually unlisted with few stock transactions, they use a <strong>supplementary valuation method</strong> that calculates market price based on net asset value per share and net income value per share. As you know, startups often aren‚Äôt focused on operating profit - they just burn money to generate revenue growth. So when you calculate market price using the supplementary valuation method, it might actually be lower than the strike price.</p>\n<p>When market price is lower than strike price, exercising stock options to acquire stock is actually a loss, so income is calculated as negative and you don‚Äôt pay income tax. <small>(In this case you‚Äôre hoping the next funding round will bring a higher valuation from VCs)</small></p>\n<h4 id=\"if-youre-still-employed-earned-income\" style=\"position:relative;\">If you‚Äôre still employed: earned income<a href=\"#if-youre-still-employed-earned-income\" aria-label=\"if youre still employed earned income permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>First, taxes on stock option exercise differ depending on whether you‚Äôre still employed at the company.</p>\n<p>If you‚Äôre still employed when exercising stock options, all profits from exercising are evaluated as <strong>earned income</strong> and added to your annual comprehensive income. So the taxes you pay are determined by <a href=\"https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%86%8C%EB%93%9D%EC%84%B8%EB%B2%95/%EC%A0%9C55%EC%A1%B0\" target=\"_blank\" rel=\"nofollow\">Article 55 of the Income Tax Act</a>.</p>\n<table>\n<thead>\n<tr>\n<th>Income bracket</th>\n<th>Tax rate</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Up to 12 million won</td>\n<td>6% of taxable base</td>\n</tr>\n<tr>\n<td>12 million - 46 million won</td>\n<td>15%</td>\n</tr>\n<tr>\n<td>46 million - 88 million won</td>\n<td>24%</td>\n</tr>\n<tr>\n<td>88 million - 150 million won</td>\n<td>35%</td>\n</tr>\n<tr>\n<td>150 million - 300 million won</td>\n<td>38%</td>\n</tr>\n<tr>\n<td>300 million - 500 million won</td>\n<td>40%</td>\n</tr>\n<tr>\n<td>500 million - 1 billion won</td>\n<td>42%</td>\n</tr>\n<tr>\n<td>Over 1 billion won</td>\n<td>45%</td>\n</tr>\n</tbody>\n</table>\n<p>As you probably know, this is a progressive tax applied only to the amount exceeding each bracket, not to the entire amount. So if my total income this year is 100 million won, I don‚Äôt pay 35% on the full 100 million. Instead, I pay 6% up to 12 million, 15% on the portion exceeding 12 million, 24% on the portion exceeding 46 million, and so on - the higher rate only applies to the portion exceeding each bracket.</p>\n<p>The problem is that with just your salary, you often won‚Äôt exceed 35%, but once stock options are added, your income bracket suddenly jumps way up. So if you thoughtlessly exercise all your stock options at once, you could face a tax bomb of tens of millions of won.</p>\n<p>That‚Äôs why when exercising stock options, it‚Äôs generally better to do it in batches rather than all at once for tax optimization.</p>\n<p>However, according to <a href=\"https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A1%B0%EC%84%B8%ED%8A%B9%EB%A1%80%EC%A0%9C%ED%95%9C%EB%B2%95/(20211123,18521,20211123)/%EC%A0%9C16%EC%A1%B0\" target=\"_blank\" rel=\"nofollow\">Article 16 of the Restriction of Special Taxation Act</a>, if your company qualifies for venture exemptions, there are some benefits:</p>\n<ul>\n<li>[Article 16-2] No tax on profits up to 30 million won per year (raised to 50 million won for stock options granted from 2022 onwards)</li>\n<li>[Article 16-3] If the company applies for tax payment exemption, earned income tax isn‚Äôt withheld. You can pay income tax in 1/5 installments over 5 years</li>\n<li>[Article 16-4] If total exercise price over 3 years is under 500 million won, you don‚Äôt pay income tax at exercise - instead you pay capital gains tax when you sell the stock</li>\n</ul>\n<p>Simply put, the government is using tax breaks on stock option exercise at venture companies to encourage venture company growth. Many decently-sized startups still qualify for venture exemptions, so definitely look into this.</p>\n<p>If your company qualifies for venture exemptions, you could pay zero income tax by only exercising 30 million won worth of stock options per year. But if your profits are in the hundreds of millions, this approach would take too long, so you might want to consider other strategies.</p>\n<h4 id=\"if-youre-no-longer-employed-other-income\" style=\"position:relative;\">If you‚Äôre no longer employed: other income<a href=\"#if-youre-no-longer-employed-other-income\" aria-label=\"if youre no longer employed other income permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Many companies only allow you to exercise stock options while still employed, but some companies let you exercise even after leaving.</p>\n<p>In this case, since you‚Äôre exercising stock options after the employment relationship has ended, profits are evaluated as other income rather than earned income. At exercise, 22% total tax (including 2% local income tax) is withheld from the profits.</p>\n<p>Also, if other income exceeds 3 million won per year, you need to include it in comprehensive income and file a final tax return. At that point, taxes are recalculated using the comprehensive income tax rate table above. If other income is under 3 million won you could just end it with withholding, but since stock options almost never earn less than 3 million won, you should pretty much always expect to file a comprehensive income final tax return.</p>\n<p>Taxes are complicated and vary based on your company‚Äôs current status and your earned income, so you can‚Äôt know exactly how much tax you‚Äôll owe until you actually exercise.</p>\n<p>But you should prepare for tax payments before exercising to avoid cash flow problems later. So definitely be aware that you have to pay taxes when exercising stock options.</p>\n<h2 id=\"ready-to-sell-that-stock\" style=\"position:relative;\">Ready to sell that stock?<a href=\"#ready-to-sell-that-stock\" aria-label=\"ready to sell that stock permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Even after exercising stock options to buy stock, it‚Äôs not your money yet. You need to sell your stock to actually realize the profit.</p>\n<p>So who do you sell these shares to? If your company is publicly traded, selling stock is easy. But most stock options are granted when companies are still small and growing, so even when your vesting plan ends and you actually buy the stock, the company is often still private.</p>\n<p>When trading unlisted stock, you use OTC platforms like <a href=\"https://www.seoulexchange.kr/\" target=\"_blank\" rel=\"nofollow\">Seoul Exchange</a> or <a href=\"https://www.ustockplus.com/\" target=\"_blank\" rel=\"nofollow\">Ustock Plus Unlisted</a>, or you trade directly with a buyer through a contract.</p>\n<p>But here‚Äôs an important point: stock received from stock options often has <strong>right of first refusal</strong> provisions, or might be completely locked from selling before IPO (initial public offering) or M&#x26;A (merger &#x26; acquisition).</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f78708042d7eb6fa950c8953c131c193/1ef88/messi.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 88.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwIE/9oADAMBAAIQAxAAAAFNVCk3J1xo5gaaIzt//8QAHxAAAAUEAwAAAAAAAAAAAAAAAAECAxEEEhMhIjJE/9oACAEBAAEFAi21mhZOyN4GCuXySPJT9x//xAAaEQABBQEAAAAAAAAAAAAAAAAAAQIQEiEy/9oACAEDAQE/AesKKNj/xAAaEQACAgMAAAAAAAAAAAAAAAAAAQIhEBJB/9oACAECAQE/AajZuh9x/8QAHhAAAQMEAwAAAAAAAAAAAAAAAAECERIhUXEQMpH/2gAIAQEABj8CqVJgqydXeDtWL4IQdrn/xAAbEAEBAQACAwAAAAAAAAAAAAABABEhMWFxgf/aAAgBAQABPyENgAn0MhGjHi76TgJ2iOhpIdN4HJ7v/9oADAMBAAIAAwAAABCM2L//xAAYEQEBAAMAAAAAAAAAAAAAAAABABAxQf/aAAgBAwEBPxAUCk3Vxj//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAECAQE/EAocOW9v/8QAHBABAQACAwEBAAAAAAAAAAAAAREAQSExcVGx/9oACAEBAAE/EKDC1jKG8HHQBOK/cqlN8H7gAqD2k9yDuzXhnKk6LlTFnWAjBaMwmhn/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"messi\" title=\"\" src=\"/static/f78708042d7eb6fa950c8953c131c193/c08c5/messi.jpg\" srcset=\"/static/f78708042d7eb6fa950c8953c131c193/0913d/messi.jpg 160w,\n/static/f78708042d7eb6fa950c8953c131c193/cb69c/messi.jpg 320w,\n/static/f78708042d7eb6fa950c8953c131c193/c08c5/messi.jpg 640w,\n/static/f78708042d7eb6fa950c8953c131c193/6a068/messi.jpg 960w,\n/static/f78708042d7eb6fa950c8953c131c193/1ef88/messi.jpg 1242w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>You have to offer your shares to that person over there first before selling to anyone else</small>\n  <br>\n  <br>\n</center>\n<p>Right of first refusal means <strong>the right to purchase shares before anyone else</strong>, and in most cases the holder of this right is the company (corporation) or someone designated by the company (individual).</p>\n<p>The reason companies bother us like this is simple - whether it‚Äôs newly issued shares or treasury stock distributed, they‚Äôre wary of these shares ending up in hostile hands.</p>\n<p>When you exercise stock options, existing investors‚Äô equity gets diluted. By buying back these shares or redistributing them to existing investors, they‚Äôre trying to maintain friendly ownership.</p>\n<p>So when you transfer stock acquired from exercising stock options, read the original grant agreement carefully and check whether you need to give written notice to the company, whether there‚Äôs a right of first refusal holder, and whether you can actually sell the stock.</p>\n<h3 id=\"sold-your-stock-time-to-pay-taxes\" style=\"position:relative;\">Sold your stock? Time to pay taxes!<a href=\"#sold-your-stock-time-to-pay-taxes\" aria-label=\"sold your stock time to pay taxes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>So once you‚Äôve sold all your stock, are you done? Nope. You also have to pay taxes on the profits from selling the stock. In the US, you don‚Äôt pay separate taxes at exercise - you just pay 20% capital gains tax when you sell the stock. But in Korea, you pay income tax when exercising stock options AND income tax again when selling the stock. <small><del>(Stop taking my money!)</del></small></p>\n<p>This tax is called <strong>capital gains tax</strong>, which will be familiar to anyone who trades foreign stocks. You have to pay 22% capital gains tax annually on profits from foreign stock trading.</p>\n<p>So many people think there are no taxes beyond securities transaction tax when trading domestic stocks. But this depends on whether the stock you‚Äôre selling is from a listed company or an unlisted company.</p>\n<p>If you‚Äôre selling stock when your company is still unlisted and is a small to medium enterprise, you pay 11% total capital gains tax (including local income tax) on profits from selling the stock. If it‚Äôs a mid-sized or larger company, you pay 22%. <small>(Local income tax is 10% of the tax owed)</small></p>\n<table>\n<thead>\n<tr>\n<th>Company size</th>\n<th>Capital gains tax rate (including local tax)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Small to medium enterprise</td>\n<td>11%</td>\n</tr>\n<tr>\n<td>Mid-sized/large enterprise</td>\n<td>22%</td>\n</tr>\n</tbody>\n</table>\n<p>If your ownership is 4% or more or your shares are worth over 1 billion won, you‚Äôre classified as a major shareholder and pay more capital gains tax. But since we‚Äôre rarely major shareholders, just think of it as 11% or 22% including local income tax.</p>\n<p>The silver lining is that there‚Äôs a 2.5 million won capital gains tax exemption. So if your total profit from selling stock is 10 million won, you only pay 11% tax on 7.5 million won (after deducting the 2.5 million won exemption). But since stock option profits are usually at least in the tens of millions, it‚Äôs easier to just assume you‚Äôll pay capital gains tax from the start.</p>\n<p>If your company is publicly traded, as long as you‚Äôre not a major shareholder, you won‚Äôt pay capital gains tax - it‚Äôs just like regular stock trading.</p>\n<h2 id=\"stock-option-expiration\" style=\"position:relative;\">Stock option expiration<a href=\"#stock-option-expiration\" aria-label=\"stock option expiration permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>This is another thing many people miss - even vested stock options don‚Äôt give you rights that last forever. In other words, under certain conditions your stock option grant can be cancelled or you might lose the ability to exercise.</p>\n<p>Stock option expiration terms vary by company, but here are some common cases:</p>\n<ul>\n<li>Quit your job? Stock option grant cancelled</li>\n<li>Quit your job? You must exercise all vested stock options at the time you leave</li>\n<li>You must exercise within 4 years of being granted stock options</li>\n</ul>\n<p>This is also in the stock option grant agreement, so read the agreement very carefully when receiving stock options.</p>\n<h2 id=\"how-can-you-make-a-good-choice\" style=\"position:relative;\">How can you make a good choice?<a href=\"#how-can-you-make-a-good-choice\" aria-label=\"how can you make a good choice permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b19e4452b9c863d23502a510a26ae493/d7854/zzal.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBAb/xAAXAQADAQAAAAAAAAAAAAAAAAABAgME/9oADAMBAAIQAxAAAAFZoETQrQIimf8A/8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABAxIEERP/2gAIAQEAAQUCZPAPJRlWQ8ka7X//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREC/9oACAEDAQE/AcYbVhD/xAAWEQADAAAAAAAAAAAAAAAAAAABAhD/2gAIAQIBAT8BYz//xAAcEAABBQADAAAAAAAAAAAAAAABABAREiECMUH/2gAIAQEABj8CUegdsOR2EaWGN//EABwQAAICAgMAAAAAAAAAAAAAAAABEVEQITFBYf/aAAgBAQABPyFmRketY1QpUg3FjSNiCXuH/9oADAMBAAIAAwAAABDIL//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxB0dE6v/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAECAQE/EBIXXf/EABsQAQEAAgMBAAAAAAAAAAAAAAERADEhUYFh/9oACAEBAAE/EAPG7xjH6ykVt1v3Fp+u8LnQsphZ7qHS9YYQRuf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"zzal\" title=\"\" src=\"/static/b19e4452b9c863d23502a510a26ae493/d7854/zzal.jpg\" srcset=\"/static/b19e4452b9c863d23502a510a26ae493/0913d/zzal.jpg 160w,\n/static/b19e4452b9c863d23502a510a26ae493/cb69c/zzal.jpg 320w,\n/static/b19e4452b9c863d23502a510a26ae493/d7854/zzal.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>So when faced with choices like ‚Äústock options vs. salary increase,‚Äù what should you consider? Personally, I‚Äôd recommend looking not just at the stock option amount, but also at things like the vesting plan and tax optimization benefits.</p>\n<h3 id=\"calculate-actual-profit-from-stock-options\" style=\"position:relative;\">Calculate actual profit from stock options<a href=\"#calculate-actual-profit-from-stock-options\" aria-label=\"calculate actual profit from stock options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>If you‚Äôve read this far, you know that receiving 100 million won worth of stock options doesn‚Äôt mean your actual profit will be 100 million won.</p>\n<p>When exercising stock options, you have to pay the strike price to the company and also pay income tax. When selling stock acquired from stock options, you pay capital gains tax again. Of course, we‚Äôre not tax accountants, so we can‚Äôt predict future taxes precisely. But you can roughly estimate how much you‚Äôll owe based on tax rate information already available online.</p>\n<p>Depending on acquisition value, you might pay up to 45% of your profits in taxes, so definitely calculate and recalculate before choosing stock options.</p>\n<h3 id=\"you-must-stay-at-the-company-until-the-cliff\" style=\"position:relative;\">You must stay at the company until the cliff<a href=\"#you-must-stay-at-the-company-until-the-cliff\" aria-label=\"you must stay at the company until the cliff permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As I mentioned, Korean law requires at least 2 years of employment before you can vest stock options. But depending on the company‚Äôs vesting plan, the cliff might be 2 years or 3 years, so think of <strong>cliff === period I can‚Äôt quit the company</strong> when making your decision.</p>\n<p>You need to pass at least the cliff period before you have any exercisable stock options. So if you don‚Äôt plan to stick around that long, it might be better to just take cash like a signing bonus and invest it separately.</p>\n<h3 id=\"consider-company-size-and-growth-potential\" style=\"position:relative;\">Consider company size and growth potential<a href=\"#consider-company-size-and-growth-potential\" aria-label=\"consider company size and growth potential permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Stock options are financial instruments that benefit you more when your company grows and the gap between strike price and market price widens. In other words, your potential gain depends on ‚Äúhow much more this company will grow.‚Äù</p>\n<p>For example, a startup that just finished Series A funding has such a low current valuation that it‚Äôs common for valuations to increase 20x or 30x with each funding round. Well-performing companies sometimes get valuations over 100x higher.</p>\n<p>That‚Äôs why you hear about stock option jackpot stories in the tens of millions - they mostly come from this space. But the flip side is these companies might not have found product-market fit yet and have no market influence, so there‚Äôs also a high probability your stock options become worthless.</p>\n<p>But if your company has already grown to Series D or E funding rounds, the chance of the company failing and your stock options becoming worthless is low - but growth potential might not be as huge as a tiny startup.</p>\n<p>Plus, large companies like Naver or Kakao don‚Äôt qualify for venture exemptions. So even if you get stock options now, you‚Äôll barely get any tax benefits, and the stock option strike price will be set at market value at grant time, so when you run the numbers it might not be such a huge amount.</p>\n<p>Of course, even if the company is large, if they‚Äôre planning promising new business ventures that could skyrocket the company‚Äôs value, the stock options could be almost as safe as guaranteed assets. So before accepting stock options, try to gather as much information as possible about the company‚Äôs future plans to make a good decision.</p>\n<h3 id=\"plan-your-personal-cash-flow\" style=\"position:relative;\">Plan your personal cash flow<a href=\"#plan-your-personal-cash-flow\" aria-label=\"plan your personal cash flow permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When explaining stock options earlier, I talked a lot about cash flow. People usually only think about corporate cash flow, but cash flow is extremely important for individuals too.</p>\n<p>Once cash flow gets blocked, you might have to take out unplanned loans or sell stocks at a loss just to raise cash.</p>\n<p>If you haven‚Äôt thought about or planned for the strike price and taxes you‚Äôll need to pay when exercising stock options, you might not be able to exercise when the time comes due to lack of funds, or you might have to take out loans to pay taxes - a truly tearful situation.</p>\n<p>So before choosing stock options, ask about the company‚Äôs vesting plan ahead of time and think about whether you‚Äôll have major expenses like lease renewal when your cliff hits and vesting periods come around.</p>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As I mentioned at the start, I wrote this post because many people holding stock options simply think of them as regular stock.</p>\n<p>Especially for people receiving stock options for the first time, when I tell them ‚Äúthat‚Äôs not free, you have to pay money when you exercise,‚Äù they sometimes ask why they have to pay money to sell stock - showing how many people really don‚Äôt understand stock options. <small>(Surprisingly many people thought vesting stock options meant selling stock)</small></p>\n<p>But stock options are financial instruments paid as compensation, so it‚Äôs very important to know exactly how much compensation you‚Äôre receiving and what process you need to go through to realize that compensation as profit.</p>\n<p>Also, many people think stock options are granted for free, but by choosing stock options you might be accepting a lower salary increase rate or even freezing your salary, and you might be giving up cash benefits like signing bonuses. So it‚Äôs not really free.</p>\n<p>The salary increase or cash benefits you‚Äôre giving up become an opportunity cost, and this opportunity cost is effectively the premium you‚Äôre paying to receive stock options as a financial instrument.</p>\n<p>I hope that going forward, when you encounter choices like ‚Äù<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>K</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>s</mi><mi>e</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">5K raise or </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">5</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Kr</span><span class=\"mord mathnormal\">ai</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">seor</span></span></span></span></span>50K in stock options,‚Äù you‚Äôll consider all these factors and make decisions that maximize your potential gains.</p>\n<p>That wraps up my post on everything developers need to know about stock options.</p>","fields":{"slug":"20211204-what-is-stock-options-en","path":"/2021/12/04/what-is-stock-options/en/","lang":"en"},"frontmatter":{"title":"Everything developers need to know about stock options","subTitle":"Will stock options actually make you money? A realistic guide for developers","date":"Dec 04, 2021","categories":["ÏóêÏÑ∏Ïù¥"],"tags":["Ïä§ÌÜ°ÏòµÏÖò","Ï£ºÏãù","Í∏àÏúµ","Ïù∏ÏÑºÌã∞Î∏å","Í∞úÎ∞úÏûê","Stock Option","Finance"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/e0625d4d6673da5b3f79fb2e72110dfe/d803c/thumbnail.png","srcSet":"/static/e0625d4d6673da5b3f79fb2e72110dfe/d803c/thumbnail.png 320w,\n/static/e0625d4d6673da5b3f79fb2e72110dfe/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/e0625d4d6673da5b3f79fb2e72110dfe/fc5c5/thumbnail.webp 320w,\n/static/e0625d4d6673da5b3f79fb2e72110dfe/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/e0625d4d6673da5b3f79fb2e72110dfe/01fb2/thumbnail.png","srcSet":"/static/e0625d4d6673da5b3f79fb2e72110dfe/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/e0625d4d6673da5b3f79fb2e72110dfe/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"48e399f3-ff32-5a57-85d3-87916683400c","tableOfContents":"<ul>\n<li>\n<p><a href=\"#effort-without-direction\">Effort Without Direction</a></p>\n</li>\n<li>\n<p><a href=\"#thinking-about-the-cost-of-effort\">Thinking About the Cost of Effort</a></p>\n<ul>\n<li><a href=\"#the-market-perspective\">The Market Perspective</a></li>\n<li><a href=\"#the-perspective-of-continuous-personal-growth\">The Perspective of Continuous Personal Growth</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#so-what-should-i-do\">So What Should I Do?</a></p>\n<ul>\n<li><a href=\"#beware-of-fixating-on-the-act-itself\">Beware of Fixating on the Act Itself</a></li>\n<li><a href=\"#diligence-isnt-a-strong-weapon\">Diligence Isn‚Äôt a Strong Weapon</a></li>\n<li><a href=\"#build-intrinsic-motivation\">Build Intrinsic Motivation</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing thoughts</a></p>\n</li>\n</ul>","excerpt":"Lately, I‚Äôve been doing more mentoring ‚Äî reviewing r√©sum√©s, conducting mock interviews, and discussing growth strategies with developers who are relatively new to the profession. These conversations have been happening more and more frequently. As these experiences accumulated, I started noticing p‚Ä¶","html":"<p>Lately, I‚Äôve been doing more mentoring ‚Äî reviewing r√©sum√©s, conducting mock interviews, and discussing growth strategies with developers who are relatively new to the profession. These conversations have been happening more and more frequently.</p>\n<p>As these experiences accumulated, I started noticing patterns in the struggles people face. Today, I want to talk about those patterns.</p>\n<p>These patterns show up not just in mentoring but in actual interviews as well, so in a way, this post might serve as interview advice too. Of course, developers with some years under their belt probably have an intuitive sense of these things already, so I think this post will be most helpful for those in the entry-level to two-year-experience range.</p>\n<p>Going forward, I‚Äôll continue framing the discussion around the emotions and situations of this group. Since writing ‚Äúentry-level to two-year experience‚Äù every time would be tedious, I‚Äôll just call this segment ‚Äújuniors.‚Äù</p>\n<h2 id=\"effort-without-direction\" style=\"position:relative;\">Effort Without Direction<a href=\"#effort-without-direction\" aria-label=\"effort without direction permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>One of the most common concerns I hear from junior developers during mentoring is: ‚ÄúI can‚Äôt figure out the right direction for my growth.‚Äù</p>\n<p>In my experience, people who join the <a href=\"https://lubycon.io\" target=\"_blank\" rel=\"nofollow\">Lubycon mentoring project</a> or request mentoring through other platforms tend to be people who are self-motivated and working hard.</p>\n<p>But because the direction of that effort isn‚Äôt clear, doubts like ‚ÄúAm I even on the right path‚Ä¶?‚Äù creep in, and they feel anxious despite putting in the work.</p>\n<p>To ease that anxiety and find stability, it‚Äôs very easy to channel effort toward a direction that feels safe ‚Äî meaning what lots of other people are doing. Common examples include daily commits (1 commit per day), writing TIL (Today I Learned) posts, and clone coding. In mentoring sessions and interviews, I see a remarkable number of junior developers engaging in these activities.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39cecaa3a513c543dbe8543953b2ff61/07d7d/contributions.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVR42h2O21KCUABF+f8/qabppcnKptKki6WN2qQoGmDckcMBQVBzxfi2935YaytZkTP2ZvxmLvPYRAvmiEIS5YJxNEcLF0RZjJk6zGIDp/DRpYWd+7hlgC5MvoWOnhhsdiVKICJUp88g0rizn3nwXuiEfYZ1V4Mej8s3hr7GuBZdW21uww5PfpfRasqZ3eDUaNDyuvSTL6JKoCRlipb+sJBLLs17mo5aw6Z4acir+OTcuKHtvfPhjWhaKld2qwb2mEmTC7PJyeSSkdSOgnJfoVT7Lb6MCOQKJ/ZZCpckTY/35X5NUmakuzWiSlnvcuS23upc/G0QG4mbBQxWExa+xeFw4B9gECNpMFTS+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"contributions\" title=\"\" src=\"/static/39cecaa3a513c543dbe8543953b2ff61/6af66/contributions.png\" srcset=\"/static/39cecaa3a513c543dbe8543953b2ff61/69538/contributions.png 160w,\n/static/39cecaa3a513c543dbe8543953b2ff61/72799/contributions.png 320w,\n/static/39cecaa3a513c543dbe8543953b2ff61/6af66/contributions.png 640w,\n/static/39cecaa3a513c543dbe8543953b2ff61/d9199/contributions.png 960w,\n/static/39cecaa3a513c543dbe8543953b2ff61/21b4d/contributions.png 1280w,\n/static/39cecaa3a513c543dbe8543953b2ff61/07d7d/contributions.png 1478w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The contribution graph on a GitHub profile is data showing how active someone is in development-related activities.</small>\n</center>\n<p>Of course, doing <em>something</em> for your growth is a great attitude. But blindly jumping in because everyone else is doing it, or because a bootcamp told you it‚Äôs necessary for landing a job, may not be the best approach.</p>\n<p>If you‚Äôre just starting out, simply committing every day or writing down what you learned on a blog might generate some growth. That‚Äôs because at this stage, rapidly getting comfortable with coding directly translates to growth.</p>\n<p>But as you know, this phase passes fairly quickly. The more comfortable you get with coding, the more you encounter familiar things rather than new ones ‚Äî and from that point on, simply coding alone makes it increasingly difficult to improve or learn something new.</p>\n<p>Eventually, you start to feel that daily commits or TIL posts alone aren‚Äôt producing the same growth velocity they used to. And that‚Äôs when this question hits:</p>\n<blockquote>\n<p>What should I study next to go further? What kind of effort should I be making now?</p>\n</blockquote>\n<p>This is the state of putting in effort without a clear direction. You need to nail both the <em>volume</em> and the <em>direction</em> of your effort ‚Äî only then can you get maximum return on the same amount of investment.</p>\n<h2 id=\"thinking-about-the-cost-of-effort\" style=\"position:relative;\">Thinking About the Cost of Effort<a href=\"#thinking-about-the-cost-of-effort\" aria-label=\"thinking about the cost of effort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>People tend to think of the effort they put into achieving something as a kind of cost ‚Äî and it genuinely is. You‚Äôre investing your time and energy to create new value. That‚Äôs why we instinctively seek the most efficient form of effort ‚Äî the direction where minimal input yields maximum return.</p>\n<p>Unfortunately, there‚Äôs no predetermined shortcut in life. But you can gradually improve your effort‚Äôs efficiency by constantly asking yourself where the right direction might be. The method that maximizes efficiency differs from person to person, and the only way to find it is through your own reflection.</p>\n<p>The problem is that many people can‚Äôt afford the mental space for this kind of reflection. Someone who experienced rapid growth through daily commits or TIL tends to think ‚ÄúI‚Äôm not growing because I‚Äôm not trying hard enough‚Äù ‚Äî because of that past experience, or simply out of inertia.</p>\n<p>But as I mentioned, misdirected effort leads to lower efficiency, and lower efficiency means the value of what your effort produces decreases.</p>\n<p>For those who aren‚Äôt sure what ‚Äúthe value of your effort decreasing‚Äù means, I want to explain this from two perspectives: the market perspective and the perspective of continuous personal growth.</p>\n<h3 id=\"the-market-perspective\" style=\"position:relative;\">The Market Perspective<a href=\"#the-market-perspective\" aria-label=\"the market perspective permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>First, the place where the returns on your effort shine most brightly is the job market. And since the job market is literally a market, most of the principles we know about markets apply.</p>\n<p>The principle I want to discuss is ‚Äúinflation.‚Äù The basic definition of inflation is when something becomes so common in the market that its value drops. Usually we talk about the value of money dropping, but in the job market, think of it as the value of skills or credentials.</p>\n<p>The most classic example of this inflation is education. In the 1970s, having a college degree commanded respect and gave you a significant advantage in job hunting. But by the 2020s, with college enrollment rates approaching 79%, simply having a bachelor‚Äôs degree no longer carries much weight.</p>\n<p>In other words, the bachelor‚Äôs degree we spent 12 years earning ‚Äî from elementary school through college entrance exams ‚Äî has become something that most people in the job market possess. It‚Äôs become an ordinary commodity, and an ordinary commodity that everyone has is, by definition, one that has lost its value.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/16a130e56cdf12fffd6fd91b275a887d/36dd4/graduate.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgb/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAVMlaZvHOGX/xAAZEAADAQEBAAAAAAAAAAAAAAAAAQITETH/2gAIAQEAAQUCUigXmlGtc0s//8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAEDAQE/Aco//8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAECAQE/AdK//8QAGBAAAgMAAAAAAAAAAAAAAAAAABABMnH/2gAIAQEABj8Ceq0n/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAUUHx/9oACAEBAAE/IVzhKz3u7ZRq5cRjZvob/9oADAMBAAIAAwAAABDTH//EABcRAAMBAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQMBAT8QEan/xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAECAQE/EDeL/8QAHBABAQADAAMBAAAAAAAAAAAAAREAIUFRYXHw/9oACAEBAAE/EB7Wh4MPhuTX4HAgJvocRvUKzX7uFKtsFkmiZYKuuvP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"graduate\" title=\"\" src=\"/static/16a130e56cdf12fffd6fd91b275a887d/36dd4/graduate.jpg\" srcset=\"/static/16a130e56cdf12fffd6fd91b275a887d/0913d/graduate.jpg 160w,\n/static/16a130e56cdf12fffd6fd91b275a887d/cb69c/graduate.jpg 320w,\n/static/16a130e56cdf12fffd6fd91b275a887d/36dd4/graduate.jpg 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\n    As of 2021, the proportion of college graduates has grown compared to the past,<br>\n    and having a degree no longer signals that you're an exceptional talent.\n  </small>\n</center>\n<p>This is a fundamental market principle: when everyone has something, its value drops. And this principle applies to hiring as well. The job market is essentially a jungle of supply and demand where you have to compete against others to survive.</p>\n<p>To survive in this jungle, you need to demonstrate that you‚Äôre better at the job than others, that you have higher growth potential ‚Äî sending the message ‚Äúinvest in me and you won‚Äôt regret it‚Äù to companies, our consumers. That‚Äôs why people try so hard to graduate from good universities, earn certifications, and study abroad.</p>\n<p>The bottom line: you need to be a differentiated person, a desirable product in the job market. This is no different for developers ‚Äî the only difference is that the differentiation criteria focus on programming skills rather than credentials.</p>\n<p>But the problem is that many people don‚Äôt think deeply about whether a particular asset will serve as a weapon in the job market ‚Äî or whether it‚Äôs a weapon at all. They just think they need it because other people already have it. Much like our parents told us we absolutely must graduate college to make a living.</p>\n<p>Sure, having it is probably better than not having it. But relative to the 12 years of effort you invested, a bachelor‚Äôs degree probably doesn‚Äôt guarantee proportional value. This is especially true in the IT industry, which values ability over credentials.</p>\n<p>Similarly, activities like daily commits, TIL, and clone coding are already widely known. Bootcamps are even providing explicit guidance that these activities help with getting hired. When reviewing r√©sum√©s, I can definitely feel that far more people are doing these activities than before.</p>\n<p>In other words, these activities have become commodities that too many people possess. Simply having done them no longer makes a strong impression on an interviewer ‚Äî just like a bachelor‚Äôs degree.</p>\n<h3 id=\"the-perspective-of-continuous-personal-growth\" style=\"position:relative;\">The Perspective of Continuous Personal Growth<a href=\"#the-perspective-of-continuous-personal-growth\" aria-label=\"the perspective of continuous personal growth permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Second, as I mentioned, activities like daily commits, TIL, and clone coding only generate meaningful growth during the very earliest stages of learning to code. There are limits to what you can achieve by simply being exposed to coding frequently.</p>\n<p>Moreover, since these activities emphasize consistency, they can easily become mere habits. You end up just ‚Äúdoing them‚Äù without deeply considering what you‚Äôre learning from them or why you‚Äôre doing them in the first place.</p>\n<p>The reasons people fall into this habit vary ‚Äî inertia from having done it consistently, anxiety about falling behind if they stop ‚Äî but regardless of the reason, continuing to pour effort in without clear direction can never produce sustained growth.</p>\n<p>Worse, if you forget the original purpose of these activities and just repeat them mechanically, there‚Äôs a risk of becoming fixated on results over purpose ‚Äî making meaningless commits to fill the daily quota, or even faking commit timestamps. This is actually a recurring theme in many people‚Äôs retrospectives on daily commits.</p>\n<p>Ultimately, even if you have both the passion for growth and the energy to execute, if you can‚Äôt define a clear direction for yourself, your energy might end up invested in the wrong places.</p>\n<h2 id=\"so-what-should-i-do\" style=\"position:relative;\">So What Should I Do?<a href=\"#so-what-should-i-do\" aria-label=\"so what should i do permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Alright, so what should you actually do? Obviously, I can‚Äôt provide a one-size-fits-all answer with perfectly clear action items in a single blog post.</p>\n<p>But I can at least talk about things worth reflecting on ‚Äî things you should sit down and think about seriously.</p>\n<h3 id=\"beware-of-fixating-on-the-act-itself\" style=\"position:relative;\">Beware of Fixating on the Act Itself<a href=\"#beware-of-fixating-on-the-act-itself\" aria-label=\"beware of fixating on the act itself permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>What does it mean to fixate on the act itself? Let me use the popular activity of daily commits as an example.</p>\n<p>The act of ‚Äúone commit per day‚Äù means nothing more and nothing less than making at least one commit each day. If you focus on the act itself, when someone asks ‚ÄúWhy do you do daily commits?‚Äù, you can only answer with something like ‚ÄúBecause it‚Äôs important to do something consistently.‚Äù</p>\n<p>But as I discussed, once you‚Äôre past the very earliest stage of learning to code, mere consistency alone can‚Äôt produce sustained growth. If you‚Äôve reached this stage, it‚Äôs time to ask yourself:</p>\n<blockquote>\n<p>What is the essential value that daily commits create?</p>\n</blockquote>\n<p>The answer will differ for each person, but I believe the essential value of daily commits is closer to ‚Äúconsistently working on my own development projects without letting go.‚Äù</p>\n<p>In other words, the ‚Äúcommit‚Äù in ‚Äúdaily commit‚Äù doesn‚Äôt mean any random commit ‚Äî it means commits toward building your own side project, contributing to open source, and so on.</p>\n<p>As you know, a commit is ultimately part of the process of building something. But if you fixate on the act of committing itself, the goal of building something disappears into the distance, and only the ‚Äúcommit‚Äù remains.</p>\n<p>When you focus solely on the act itself, you fail to capture the real benefits these activities offer and end up wasting energy.</p>\n<h3 id=\"diligence-isnt-a-strong-weapon\" style=\"position:relative;\">Diligence Isn‚Äôt a Strong Weapon<a href=\"#diligence-isnt-a-strong-weapon\" aria-label=\"diligence isnt a strong weapon permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A few years ago, I had a casual conversation with someone who had graduated from a bootcamp. I heard something interesting: at their bootcamp, students were told that writing TIL posts on their blogs was necessary for getting hired.</p>\n<p>Of course, bootcamps are businesses, not charities, so they need to maximize results with minimal resources. Providing customized education for every individual is prohibitively expensive, which is why they end up creating standardized curricula and funneling people through them. <em>(Most of the education industry works this way, honestly.)</em></p>\n<p>So I asked:</p>\n<blockquote>\n<p>‚ÄúWhy does writing TIL posts on your blog help with getting hired?‚Äù</p>\n</blockquote>\n<p>I asked because I believe hiring involves an enormous number of variables ‚Äî company size, current business conditions, the talent pool in the market, existing team members‚Äô capacity ‚Äî and I wasn‚Äôt convinced that any specific activity would universally help with employment.</p>\n<p>The answer I got was: ‚ÄúIsn‚Äôt it data that shows diligence?‚Äù</p>\n<p>Honestly, learning something new every single day and writing about it on a blog is no small feat. How can anyone possibly learn something new every single day?</p>\n<p>Of course, a developer who just started coding might encounter new knowledge daily. But the more comfortable you get with coding, the less that happens. You <em>can</em> sustain this pattern by actively seeking out new knowledge, but it takes considerable effort.</p>\n<p>And if the result of all that effort is merely to demonstrate ‚Äúdiligence‚Äù ‚Äî well, personally, I don‚Äôt think that‚Äôs a good trade.</p>\n<blockquote>\n<p>Because <strong>companies don‚Äôt hire people based on diligence alone.</strong></p>\n</blockquote>\n<p>Companies exist to generate profit. So naturally, when they hire, they want people who will earn back more than what‚Äôs invested in them. Diligence might be one criterion for evaluating such people, but it‚Äôs not a critical factor. If someone is a bit lazier than average but does great work, helps the team grow, and generates revenue ‚Äî that‚Äôs fine.</p>\n<p>On top of that, as I mentioned, TIL is already a widely recommended activity across multiple bootcamps, and many junior developers are doing it. Inflation has already arrived ‚Äî simply having done it consistently is no longer that attractive in the job market.</p>\n<p>So if you want TIL to be your weapon, you need something beyond mere consistency and diligence ‚Äî something that differentiates you. For instance, diving deep into areas most people don‚Äôt study, or showing an extraordinary five-year streak of TIL posts without missing a single day.</p>\n<p>To create these differentiating factors, you need to think about what value TIL truly provides.</p>\n<p>TIL isn‚Äôt something you do to get hired. It‚Äôs an archive where you observe, learn, and record things to hand off to your future self. Yet many people write TIL posts as little more than rough, unorganized notes. And with notes that disorganized, revisiting them a year or two later for review won‚Äôt be easy.</p>\n<p>This is a textbook example of using a good tool in a bad way. If you‚Äôve been doing TIL or daily commits for the sake of employment, it‚Äôs time to reflect on what value you can genuinely extract from these activities and how that value can fuel your growth.</p>\n<p>Nobody else will do this thinking for you, and no one will teach you the answer. It certainly won‚Äôt come quickly, but I recommend practicing ‚Äî even just a little each day ‚Äî the habit of questioning whether what you‚Äôre currently doing truly has meaning.</p>\n<h3 id=\"build-intrinsic-motivation\" style=\"position:relative;\">Build Intrinsic Motivation<a href=\"#build-intrinsic-motivation\" aria-label=\"build intrinsic motivation permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The last thing I want to talk about is building intrinsic motivation. This connects to the earlier discussion about ‚Äúactivities done for the sake of getting hired or changing jobs‚Äù ‚Äî because landing a job or making a career move is the quintessential example of external motivation.</p>\n<p>Imagine you‚Äôve been diligently doing daily commits or TIL to get hired.</p>\n<p>The developer market currently has more demand than supply, and company founders are always asking ‚ÄúKnow any good developers?‚Äù ‚Äî so you‚Äôll probably land a job eventually. <em>(Everyone feels anxious during the process, but people tend to land jobs more easily than they expect.)</em></p>\n<p>OK, so you‚Äôve achieved your goal. Should you keep doing daily commits or TIL?</p>\n<p>Maybe inertia carries you for a while. But once you start adapting to new people, new code, and a new environment at your job, it‚Äôs easy to stop ‚Äî because you‚Äôre tired, or because adapting to the job takes priority over personal development.</p>\n<p>The reason you stop might not actually matter that much. Because the moment you achieved your goal of getting hired, the very motivation to continue these labor-intensive, diligence-demanding activities simply vanished.</p>\n<p>This is the fundamental problem with external motivation. Behavior driven by external motivation is easily abandoned the moment the source of that motivation disappears.</p>\n<p>That‚Äôs why motivation should stem from intrinsic sources ‚Äî like growth and genuine interest ‚Äî rather than external conditions like employment or job changes.</p>\n<p>Intrinsic motivation can also collapse due to internal factors like burnout, but at least it‚Äôs far more robust than motivation that evaporates the instant you hit your target.</p>\n<p>Even if you‚Äôve never deeply considered external versus intrinsic motivation, everyone instinctively knows which one is more robust.</p>\n<p>If you were an interviewer and asked ‚ÄúWhy do you write TIL?‚Äù, would you trust the person who says ‚ÄúTo get hired‚Äù more, or the person who says ‚ÄúBecause I enjoy developing‚Äù or ‚ÄúBecause it helps me grow‚Äù?</p>\n<p>The first answer naturally provokes the thought: ‚ÄúSo they‚Äôll stop once they‚Äôre hired?‚Äù And that reaction is exactly the risk that external motivation creates.</p>\n<p>Of course, most people nod in agreement when I explain it with examples like this. But the truth is, we‚Äôre all very accustomed to lives driven by external motivation ‚Äî and even I, the one writing this, find myself increasingly dependent on the external motivation of money as I get older. <del><em>(Housing prices are absolutely maddening‚Ä¶)</em></del></p>\n<p>Ultimately, what I want to say in this post isn‚Äôt that you should eliminate external motivation entirely. That‚Äôs impossible, and sometimes external motivation can create even greater momentum. But I do think it‚Äôs worth reflecting at least once on whether the motivation you‚Äôre currently depending on is sustainable going forward, and whether it truly helps your growth.</p>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>This might sound somewhat idealistic. After all, if you‚Äôre in an urgent, desperate situation where you need a job right now, it‚Äôs hard to find the headspace for this kind of reflection.</p>\n<p>But everything I‚Äôve discussed in this post will absolutely help your job search and career moves. Your real enemy is the anxiety whispering inside you: ‚ÄúEveryone else is working hard while I‚Äôm wasting time on these thoughts‚Äù or ‚ÄúI don‚Äôt have time to think ‚Äî I just need to do something.‚Äù</p>\n<p>Developers with relatively little experience often don‚Äôt have many weapons to showcase in the job market. So to put their best foot forward in interviews, they focus on fundamentals like algorithm problems and language comprehension, or on immediately actionable activities like daily commits.</p>\n<p>Studying fundamentals is indeed essential ‚Äî you could call it a developer‚Äôs basic literacy. And activities like daily commits or TIL can help you demonstrate qualities like diligence. But what matters is that interviewers ultimately aren‚Äôt looking for someone who‚Äôs merely knowledgeable in theory or just diligent ‚Äî they‚Äôre looking for someone who can ‚Äúget things done, whatever it takes.‚Äù</p>\n<p>In other words, you need a strategy to stand out as a compelling talent in the job market. And crafting that strategy requires ‚Äúeffort with a clear direction.‚Äù</p>\n<p>Before starting anything, try visualizing what you want from this effort and who you want to become. Establish your direction, then execute. If you keep practicing this, I believe you‚Äôll eventually develop your own know-how and strategy to showcase what makes you special in the market.</p>\n<p>This concludes my post: How to Find Your Own Color ‚Äî Setting a Direction for Growth.</p>","fields":{"slug":"20210910-developer-direction-of-effort-en","path":"/2021/09/10/developer-direction-of-effort/en/","lang":"en"},"frontmatter":{"title":"How to Find Your Own Color ‚Äì Setting a Direction for Growth","subTitle":"Developer growth isn't about consistency: it's about direction and differentiation","date":"Sep 10, 2021","categories":["Essay"],"tags":["Developer","Interview","Hiring","Developer Study","Daily Commit","TIL","Clone Coding"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/ee5062e1a1df98afe98d15537f8d4da0/3a812/thumbnail.jpg","srcSet":"/static/ee5062e1a1df98afe98d15537f8d4da0/3a812/thumbnail.jpg 320w,\n/static/ee5062e1a1df98afe98d15537f8d4da0/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ee5062e1a1df98afe98d15537f8d4da0/fc5c5/thumbnail.webp 320w,\n/static/ee5062e1a1df98afe98d15537f8d4da0/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ee5062e1a1df98afe98d15537f8d4da0/2d839/thumbnail.jpg","srcSet":"/static/ee5062e1a1df98afe98d15537f8d4da0/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/ee5062e1a1df98afe98d15537f8d4da0/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"291b2741-13ed-52c0-89e8-e5ae34330c89","tableOfContents":"<ul>\n<li>\n<p><a href=\"#when-bad-regex-causes-late-nights-at-the-office\">When Bad Regex Causes Late Nights at the Office</a></p>\n<ul>\n<li><a href=\"#the-regex-that-never-ends\">The Regex That Never Ends</a></li>\n<li><a href=\"#problems-regex-simply-cannot-solve\">Problems Regex Simply Cannot Solve</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#why-were-regular-expressions-created\">Why Were Regular Expressions Created?</a></p>\n<ul>\n<li><a href=\"#expressing-languages-that-machines-can-understand\">Expressing Languages That Machines Can Understand</a></li>\n<li><a href=\"#the-runtime-environment-for-regex-finite-automata\">The Runtime Environment for Regex: Finite Automata</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#the-limitations-of-regular-expressions\">The Limitations of Regular Expressions</a></p>\n<ul>\n<li><a href=\"#why-regex-cant-understand-html\">Why Regex Can‚Äôt Understand HTML</a></li>\n<li><a href=\"#regex-is-ultimately-a-finite-automaton\">Regex Is Ultimately a Finite Automaton</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing thoughts</a></p>\n</li>\n</ul>","excerpt":"This post is the third installment in my series about regular expressions, that dreaded beast whose name alone is enough to make you break a sweat. As everyone knows, regex is infamous for its gnarly syntax, and there‚Äôs no shortage of posts out there (like my own Finding Patterns in Irregularity) t‚Ä¶","html":"<p>This post is the third installment in my series about regular expressions, that dreaded beast whose name alone is enough to make you break a sweat.</p>\n<p>As everyone knows, regex is infamous for its gnarly syntax, and there‚Äôs no shortage of posts out there (like my own <a href=\"/2020/07/24/about-regular-expression\">Finding Patterns in Irregularity</a>) that break down regex grammar and usage.</p>\n<p>On the flip side, once you get comfortable with that gnarly syntax, you can solve a surprisingly wide range of string problems with short regex patterns. This is why regex occupies a love-hate place in most developers‚Äô hearts. <del>(Most developers I know aren‚Äôt exactly fans of regex either‚Ä¶)</del></p>\n<p>So when solving problems with regex, many of us either copy-paste patterns found via Google or hack away on sites like <a href=\"https://regexr.com/\" target=\"_blank\" rel=\"nofollow\">regexr</a>, and in the process, it‚Äôs not uncommon to use a flawed regex without proper validation and pay the price.</p>\n<p>Of course, looking at a regex and determining whether it‚Äôs correct isn‚Äôt easy. But if you understand why regular expressions were created in the first place and what kind of environment they were designed to run in, the limitations of regex become naturally apparent.</p>\n<p>In this post, I‚Äôll explore the purpose and limitations of regular expressions through a single question that‚Äôs especially familiar to frontend developers like me: can you parse HTML using only regex?</p>\n<h2 id=\"when-bad-regex-causes-late-nights-at-the-office\" style=\"position:relative;\">When Bad Regex Causes Late Nights at the Office<a href=\"#when-bad-regex-causes-late-nights-at-the-office\" aria-label=\"when bad regex causes late nights at the office permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Before diving in, let‚Äôs look at what can happen when a poorly written regex makes it into your code.</p>\n<p>The kind of ‚Äúpoorly written‚Äù regex I‚Äôm talking about here isn‚Äôt the ‚Äúthe regex was supposed to find <code class=\"language-text\">a</code> but found <code class=\"language-text\">b</code>‚Äù variety. That kind of mistake is just unfamiliarity with regex syntax ‚Äî spend a bit more time studying the pattern and anyone can spot the error.</p>\n<p>What I‚Äôm talking about are performance issues that arise from not understanding how regex works internally, or the sad situation of spending hours trying to solve a problem that regex fundamentally cannot solve.</p>\n<p>Of course, the regex engine exists as an abstraction layer so developers can use regex without understanding these internals. But trusting the engine too blindly can absolutely come back to bite you.</p>\n<h3 id=\"the-regex-that-never-ends\" style=\"position:relative;\">The Regex That Never Ends<a href=\"#the-regex-that-never-ends\" aria-label=\"the regex that never ends permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The first kind of bite is a performance issue that can occur when you don‚Äôt understand how regex matches patterns.</p>\n<p>Regex uses a <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/base-types/backtracking-in-regular-expressions\" target=\"_blank\" rel=\"nofollow\">backtracking</a> algorithm based on DFS (depth-first search) to match string patterns. This means that depending on which nodes are explored and under what conditions, the matching time can become surprisingly long.</p>\n<p>In particular, the regex engine built into JavaScript engines operates synchronously, not asynchronously. So if a regex takes a long time to match, nothing else can execute during that time: a truly painful scenario.</p>\n<p>If that‚Äôs hard to picture, open a new browser tab and try running this in the console. <del>(Do it in another tab so you can still read this post‚Ä¶)</del></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Always exactly 8 explorations regardless of string length</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>$<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123123123123123123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 26 explorations</span>\n<span class=\"token comment\">// This finishes quickly</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>$<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 98,306 explorations</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>$<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123123123123123!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Uh... the computation never ends....</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>$<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123123123123123123123123123123123123123123!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The first example always completes in just 8 explorations regardless of string length. But in the second example, adding a single special character to the end causes the number of operations to grow exponentially, eventually reaching the point where it never finishes.</p>\n<p>If this happened in an actual business application, the user would be staring at a frozen screen, unable to interact with any UI element. There‚Äôs even an attack method called <a href=\"https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS\" target=\"_blank\" rel=\"nofollow\">ReDoS</a> that exploits exactly this behavior to bring systems to a halt.</p>\n<p>This is the kind of late-night debugging session you might find yourself in when you don‚Äôt understand how regex works under the hood.</p>\n<p>What makes it even more frustrating is that these regex patterns don‚Äôt throw errors; they just take exponentially longer to execute. That makes it even easier to get blindsided. And even if you do track it down, these kinds of bugs are notoriously hard to find. <del>(And even if you do find it, realizing the culprit is a regex is its own kind of despair‚Ä¶)</del></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/eb72386d97e23ce4f176bfa012c913c9/6a068/noway.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBP/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGQ9ugmcLFf/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQMAAhIRQf/aAAgBAQABBQLyy8ViaAx6xjpn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhUv/aAAgBAQAGPwIWwrL5j//EABkQAQEAAwEAAAAAAAAAAAAAAAEAEBEhYf/aAAgBAQABPyGEvpcArrduSs9r/9oADAMBAAIAAwAAABCc7//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxATG2//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EJqRp//EABoQAQADAQEBAAAAAAAAAAAAAAEAETEhUUH/2gAIAQEAAT8QqwCCmsVKH0+ZPNyDdb1h2MA0cFsRaqUcvP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"noway\" title=\"\" src=\"/static/eb72386d97e23ce4f176bfa012c913c9/c08c5/noway.jpg\" srcset=\"/static/eb72386d97e23ce4f176bfa012c913c9/0913d/noway.jpg 160w,\n/static/eb72386d97e23ce4f176bfa012c913c9/cb69c/noway.jpg 320w,\n/static/eb72386d97e23ce4f176bfa012c913c9/c08c5/noway.jpg 640w,\n/static/eb72386d97e23ce4f176bfa012c913c9/6a068/noway.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The face you make when you realize your overtime was caused by a single bad regex.</small>\n</center>\n<p>Because of how the backtracking algorithm works, the exploration path can dramatically impact performance. So when using regex, you should always keep in mind that unexpected situations like this can occur.</p>\n<h3 id=\"problems-regex-simply-cannot-solve\" style=\"position:relative;\">Problems Regex Simply Cannot Solve<a href=\"#problems-regex-simply-cannot-solve\" aria-label=\"problems regex simply cannot solve permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The second kind of bite is trying to solve a problem with regex that regex fundamentally cannot solve.</p>\n<p>The first situation can at least be detected through performance monitoring: ‚Äúsomething‚Äôs off with this regex.‚Äù But this second situation? If you don‚Äôt understand the principles and limitations of regex, you could spend an entire week going in circles. Personally, I find this second scenario the sadder one.</p>\n<p>As I‚Äôll explain below, regex is not some master key that can find patterns in any string. It‚Äôs actually a tool with strict limitations.</p>\n<p>Most notably, languages with arbitrarily nested tags or brackets ‚Äî like HTML and CSS ‚Äî cannot be validated with regex. So the answer to this post‚Äôs title question, ‚ÄúCan you parse HTML with regex?‚Äù is:</p>\n<center>\n.<br/>\n.<br/>\n.<br/>\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1f85f28d9af3c34a4c07a14d96563b68/066f9/x.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 116.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHJSPJcQS1AyCv/xAAdEAACAQQDAAAAAAAAAAAAAAABAgADERIyEyEx/9oACAEBAAEFAqZXj6WPuptSzj7hrByRD7//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPwFj/8QAFREBAQAAAAAAAAAAAAAAAAAAESD/2gAIAQIBAT8BI//EABwQAAICAgMAAAAAAAAAAAAAAAABAhEhcRAxMv/aAAgBAQAGPwJXRHOx7EzpDFhM8RV8f//EAB0QAAICAgMBAAAAAAAAAAAAAAERACExYRBBUaH/2gAIAQEAAT8hEyigBia/XBVc9QWob1PthiyIKDmX6BCO7zP/2gAMAwEAAgADAAAAEIPoQP/EABURAQEAAAAAAAAAAAAAAAAAACAh/9oACAEDAQE/EIH/xAAWEQEBAQAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8Q0U//xAAeEAACAgICAwAAAAAAAAAAAAABEQAhMbFBcVGBwf/aAAgBAQABPxAJEjA+4AjKsBBKeOIteG3FOBiiTWTdQgB5RgvplO/uAoEhyHZwDA4qjJh3PM2vuf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"x\" title=\"\" src=\"/static/1f85f28d9af3c34a4c07a14d96563b68/066f9/x.jpg\" srcset=\"/static/1f85f28d9af3c34a4c07a14d96563b68/0913d/x.jpg 160w,\n/static/1f85f28d9af3c34a4c07a14d96563b68/cb69c/x.jpg 320w,\n/static/1f85f28d9af3c34a4c07a14d96563b68/066f9/x.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\"No.\"</small>\n</center>\n<p>If you didn‚Äôt know that parsing HTML with regex alone is impossible, you could end up wasting a lot of time trying to solve a literally unsolvable problem.</p>\n<p>But wait ‚Äî many of us, myself included, have used regex to work with HTML before. So why am I saying it can‚Äôt be done?</p>\n<p>The key distinction is that what we were actually doing was checking small, constrained rules like ‚Äúdid a <code class=\"language-text\">&lt;div></code> tag open and close?‚Äù, not validating an entire HTML document.</p>\n<p>To understand why full HTML validation is impossible with regex, we need to look at the context in which regex was developed, the assumptions it was built on, and the limitations that follow.</p>\n<h2 id=\"why-were-regular-expressions-created\" style=\"position:relative;\">Why Were Regular Expressions Created?<a href=\"#why-were-regular-expressions-created\" aria-label=\"why were regular expressions created permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The term ‚Äúregular expression‚Äù is already familiar to developers ‚Äî so familiar, in fact, that it‚Äôs spawned various nicknames and memes in developer communities around the world.</p>\n<p>But few people stop to wonder why it has this peculiar name: ‚Äúregular expression.‚Äù So as a first step toward understanding what regex actually does, let‚Äôs think about what this name means.</p>\n<p>The English word ‚Äúregular‚Äù means something that follows a rule or pattern. A ‚Äúregular expression‚Äù is literally an expression that represents a regular pattern. That‚Äôs why we generally think of regex as a tool for matching patterns in strings.</p>\n<p>The word ‚Äúpattern‚Äù here doesn‚Äôt just mean simple repetition like <code class=\"language-text\">12121212</code>. It encompasses any rule a user defines, such as ‚Äù<code class=\"language-text\">a</code> appears twice, followed immediately by <code class=\"language-text\">b</code>.‚Äù</p>\n<p>So the most basic use of regex is finding patterns in strings. But regex wasn‚Äôt actually created just to satisfy the need for string pattern matching. So what kind of pattern is a regular expression actually expressing?</p>\n<h3 id=\"expressing-languages-that-machines-can-understand\" style=\"position:relative;\">Expressing Languages That Machines Can Understand<a href=\"#expressing-languages-that-machines-can-understand\" aria-label=\"expressing languages that machines can understand permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As mentioned, regex was born to express patterns. But to truly understand its origins, what matters more is understanding <em>why</em> people wanted to find patterns in strings in the first place.</p>\n<p>The short answer: regular expressions originated from the effort to express languages that machines can understand. In other words, regex was born as a concept for mathematically expressing language so that machines could recognize it.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 562px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4f4d2658e241ef2ff07b2ea1ebe8d947/9f2bf/kleene.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 142.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAwH/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABroo6pqJCLVJzJUOi/wD/xAAbEAEBAQADAQEAAAAAAAAAAAACAwEAERITBP/aAAgBAQABBQL6Hn6L+eCrRROW+M9CkZrN6pR+hgyppRSUabQRzof/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAeEAADAAIBBQAAAAAAAAAAAAAAAQIRMSESIlFiof/aAAgBAQAGPwLZwzJXfm38F1rnWRzVjbF7SKsrRUp8ZJb2rMeD/8QAGxAAAwEBAQEBAAAAAAAAAAAAAAERITFxQVH/2gAIAQEAAT8hxskCauX0WQ46yvMY2BEauD2FX45g++ad2YxCieNj8HbZekqWpoYE4L6hX31Ef//aAAwDAQACAAMAAAAQaCD8/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQAQEf/aAAgBAwEBPxBbwn//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAgEAEAAgEEAgMAAAAAAAAAAAABESEAMUFxkVGBodHw/9oACAEBAAE/EGdoyUm44w4zG9VoisIB2H3hxLJEGF8mIcZk32CbRK9ZMGUixUVWSWqgKTn4xBVqlzFs864rVAhh7JyCACCe44rAtSaixJr9OTtJVNK1D1MZ/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"kleene\" title=\"\" src=\"/static/4f4d2658e241ef2ff07b2ea1ebe8d947/9f2bf/kleene.jpg\" srcset=\"/static/4f4d2658e241ef2ff07b2ea1ebe8d947/0913d/kleene.jpg 160w,\n/static/4f4d2658e241ef2ff07b2ea1ebe8d947/cb69c/kleene.jpg 320w,\n/static/4f4d2658e241ef2ff07b2ea1ebe8d947/9f2bf/kleene.jpg 562w\" sizes=\"(max-width: 562px) 100vw, 562px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>Stephen Kleene, who in 1951 first used regular sets to mathematically describe language</small>\n  <br>\n  <br>\n</center>\n<p>Of course, ‚Äúlanguages that machines can understand‚Äù at the time didn‚Äôt mean high-level natural languages like the ones we research today.</p>\n<p>Here, ‚Äúlanguage‚Äù doesn‚Äôt mean natural languages like English or Korean. It‚Äôs a more abstract concept. Just as we call programming languages ‚Äúlanguages,‚Äù in computer science and mathematics, a language simply means a set of strings that follow certain rules.</p>\n<h4 id=\"the-mathematical-definition-of-language\" style=\"position:relative;\">The Mathematical Definition of Language<a href=\"#the-mathematical-definition-of-language\" aria-label=\"the mathematical definition of language permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>We all have an intuitive sense of what a ‚Äúlanguage‚Äù is, but most of us have never rigorously defined it.</p>\n<p>In computer science and mathematics, however, intuitive knowledge doesn‚Äôt cut it. If you want to use the concept of ‚Äúlanguage‚Äù in these fields, you need a precise definition.</p>\n<p>A language, in the mathematical and computer science sense, is simply a set of strings ‚Äî nothing more, nothing less.</p>\n<center>\n  <div style=\"max-width: 500px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6ddec89701fd0b1be27aa0c351fb400f/3534c/language_set.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVR42n1VWU9TYRC9PxAoW4FuQAsJWygF2SWENSmlgO8+EaDCpfokxgARxKAoxEQkbMGG4ANqQvTFGOS2x55pptwWtcnkW+58Z+acme+rgTu/FK5vLDz9cIXF3a8w975h8e0lltJm7n5BbOcSzz5e4cZKim/+z7AvksmkjD+vLSzsfcf9h88RmnqE4OSC2L0ZE6GZZZjvf+DXbysTPpX6O6B+SCQ+IRyJIrr4Eg+evEN06RWml19jOv4mM3+8g8nYC0xGp/D54uIOqGHPbGNjAx6PB8XFxXB73PB4ffD6fDLq3JseKysr4SgqQnV1Nba3t3PYGTpZW1sToIqKCjngdDrTcyeqqqpyzO12IRDwo6amRnzLysqwtbWVBZUMT09P4XK5xKG2thYNDQ2or69HXV2d7KsRkECjo6Nobm6WNYN7vV6cn5/fUh4eHs7QdLsFaGxsDAMDA+jo6JA9OyBHgmSydQuYw+FAOBzOAB4cHKC8vDx7gM5c00ib+zxIbX1pDRWce2SkUpA6mRqzs7MSgVRpjMgDBKAjaQ8NDWF8fBxdXV0CxKCtra3CrLe3FyMjIwiFQjBNEwadCcAPnDc2Nkpkpaq0NJAaA1JPZq0FmpiYgNHe3i7U7FrZjdnQWaufXyTVsqSkBH19ff8H5F4gEBDaLBbn9mrzrGZLwP7+fhjkX1paKqnzgz06193d3RKZVacsWml+o+b2DCORCIy5uTkUFBSIqC0tLVn91EhTaXPUfaVLUGbOtovH4zD29/elRXxyrW6F17bR1rAH0Cy5JgP2K/2Oj48zjT04OCgpa6sQuKenB21tbdIefr8/KwO7gJpqgQjKtmNbZW/K0dGRRLA3cWdnp4AGg0FZs3GZdVNTkxRIr5xmf3Z2lvs4rKysoCj9ghCUjjxMEAaitqwo769SpkQcqd36+nru46Cgq6urAqj0CcwnigXjLWF23GNGBKLP5uZm7vOV/1rzPvJKsSDUhuCFhYXSCWTAPWZNzRKJRM7Zf/4FWJaFw8NDzM/Pyz2lluxBPluxWAwnJydZ3/y/gD9PC0UiLVJxTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"language set\" title=\"\" src=\"/static/6ddec89701fd0b1be27aa0c351fb400f/6af66/language_set.png\" srcset=\"/static/6ddec89701fd0b1be27aa0c351fb400f/69538/language_set.png 160w,\n/static/6ddec89701fd0b1be27aa0c351fb400f/72799/language_set.png 320w,\n/static/6ddec89701fd0b1be27aa0c351fb400f/6af66/language_set.png 640w,\n/static/6ddec89701fd0b1be27aa0c351fb400f/3534c/language_set.png 808w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>JavaScript is roughly a set of strings like these, isn't it?</small>\n  <br>\n  <br>\n</center>\n<p>But it‚Äôs not just any arbitrary collection of strings. The set of strings that constitutes a language must satisfy three conditions:</p>\n<blockquote>\n<ol>\n<li>\n<p>There must exist a finite set of symbols S</p>\n</li>\n<li>\n<p>There must be rules for forming S*, a set of strings made from elements of S</p>\n</li>\n<li>\n<p>It must be possible to determine what meaning each string in the set carries</p>\n</li>\n</ol>\n</blockquote>\n<p>Any set of strings satisfying these three conditions qualifies as a basic language. Now that we know the definition, let‚Äôs satisfy each condition one by one and build a language.</p>\n<p>First, what does the set of symbols <code class=\"language-text\">S</code> mean?</p>\n<p>If you think about it, every language on Earth has symbols used within that language. Korean has consonant symbols like „Ñ±, „Ñ¥, „Ñ∑ and vowel symbols like „Öè, „Öë, „Öì. English has symbols like a, b, c. We call these collections of symbols an ‚Äúalphabet,‚Äù and this alphabet is the set of symbols <code class=\"language-text\">S</code> ‚Äî the first condition of a language.</p>\n<p>Let me define an alphabet. I‚Äôll keep it simple with just two symbols: <code class=\"language-text\">a</code> and <code class=\"language-text\">b</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">S</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Now I‚Äôve fulfilled the first condition: ‚Äúa finite set of symbols <code class=\"language-text\">S</code>.‚Äù Next, I need to create <code class=\"language-text\">S*</code>, the set of strings made from elements of <code class=\"language-text\">S</code>. The second condition says we need rules for forming this set.</p>\n<p>These rules are what we call the syntax of the language. Since many languages share the same alphabet, it‚Äôs this second element ‚Äî the syntax ‚Äî that gives each language its character.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[Same Latin alphabet, different rules for combining strings]\n\nEnglish: I love you\nFrench: je t'aime\nItalian: ti amo</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see, English, French, and Italian largely share the Latin alphabet. Even for the same concept of ‚Äúlove,‚Äù English uses the 4-letter string <code class=\"language-text\">love</code>, while French uses <code class=\"language-text\">l'amour</code> with 7 characters including an apostrophe.</p>\n<p>So defining just an alphabet isn‚Äôt enough to define a language. I‚Äôll set the rule for my string set <code class=\"language-text\">S*</code> as ‚Äúall strings of 3 characters or fewer that can be made from the alphabet <code class=\"language-text\">a</code> and <code class=\"language-text\">b</code>.‚Äù Then the set <code class=\"language-text\">S*</code> of my language looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token constant\">S</span><span class=\"token operator\">*</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ba\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bb\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"aab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"aba\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abb\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"baa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bba\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bbb\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now that I‚Äôve defined the second condition, I can see exactly what strings my language contains. At this point, the third condition is automatically satisfied.</p>\n<p>Since my rule ‚Äî ‚Äúall strings of 3 characters or fewer made from <code class=\"language-text\">a</code> and <code class=\"language-text\">b</code>‚Äù ‚Äî produces only a finite number of strings, it‚Äôs possible to assign meaning to each one.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">a = I'm hungry\nb = I want to go home\naa = The server is returning 500s\n...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Just like that, I‚Äôve satisfied all three conditions and created a humble language. I‚Äôll call it ‚ÄúEvan-ese‚Äù going forward.</p>\n<h4 id=\"machine-please-understand-my-language\" style=\"position:relative;\">Machine, Please Understand My Language<a href=\"#machine-please-understand-my-language\" aria-label=\"machine please understand my language permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Creating a language with simple rules isn‚Äôt hard ‚Äî anyone can create something like Evan-ese. The question is whether a machine can understand it.</p>\n<p>For a machine to understand a language, the strings that compose it need to have a recognizable pattern. If we can express the pattern of a language‚Äôs strings mathematically, then we can say this is a language a machine can understand.</p>\n<p>Of course, natural languages like English or Korean have highly free-form context and evolving grammar, so absolute patterns don‚Äôt exist. But if the rules governing a language‚Äôs strings are clear ‚Äî like Evan-ese ‚Äî then it‚Äôs a language a machine can understand.</p>\n<p>Evan-ese has a clear rule: strings of 3 characters or fewer made from <code class=\"language-text\">a</code> and <code class=\"language-text\">b</code>. This can be expressed as a mathematical formula:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>L</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>œµ</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>œµ</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>œµ</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo>=</mo><mo stretchy=\"false\">{</mo><mi>œµ</mi><mo separator=\"true\">,</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>a</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>a</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>b</mi><mo separator=\"true\">,</mo><mi>a</mi><mi>a</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>a</mi><mi>a</mi><mi>b</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi>b</mi><mi>b</mi><mi>b</mi><mo stretchy=\"false\">}</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nL = (a+b+\\epsilon)(a+b+\\epsilon)(a+b+\\epsilon) \\\\\n= \\{ \\epsilon, a, b, aa, ab, ba, bb, ba, bb, aaa, aab, ... bbb \\}\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3em;vertical-align:-1.25em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.75em;\"><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">œµ</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">œµ</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">œµ</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\">œµ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">aa</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">ab</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">ba</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">bb</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">ba</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">bb</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">aaa</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">aab</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">...</span><span class=\"mord mathnormal\">bbb</span><span class=\"mclose\">}</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.25em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>Since Evan-ese consists of ‚Äústrings of 3 characters or fewer made from a and b,‚Äù the empty string is also included. That‚Äôs why the formula adds <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œµ</mi></mrow><annotation encoding=\"application/x-tex\">\\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">œµ</span></span></span></span></span> (epsilon, representing the empty string) to each position, and the language Evan-ese includes <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œµ</mi></mrow><annotation encoding=\"application/x-tex\">\\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">œµ</span></span></span></span></span> as well.</p>\n<p>And when you translate this formula into a specific notation that machines can understand, you get‚Ä¶</p>\n<div class=\"gatsby-highlight\" data-language=\"regex\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-regex line-numbers\"><code class=\"language-regex\"><span class=\"token anchor function\">^</span><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span>ab<span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">{0,3}</span><span class=\"token anchor function\">$</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>‚Ä¶the regular expression we all know.</p>\n<p>In other words, the first step toward making machines recognize language was to create a way to express the ‚Äúrules‚Äù by which a language‚Äôs strings are generated. That‚Äôs the origin of regular expressions. If you look at the <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" target=\"_blank\" rel=\"nofollow\">Wikipedia article on regular expressions</a>, you can see this context reflected directly in the definition:</p>\n<blockquote>\n<p>A regular expression [‚Ä¶] is <strong>a sequence of characters that specifies a match pattern in text</strong>. Usually such patterns are used by string-searching algorithms for ‚Äúfind‚Äù or ‚Äúfind and replace‚Äù operations on strings, or for input validation.</p>\n</blockquote>\n<p>Of course, the definition of language I‚Äôve presented here is quite simplified. If you‚Äôre interested in going deeper, I‚Äôd recommend searching for ‚Äúformal language‚Äù and ‚ÄúChomsky hierarchy.‚Äù</p>\n<h3 id=\"the-runtime-environment-for-regex-finite-automata\" style=\"position:relative;\">The Runtime Environment for Regex: Finite Automata<a href=\"#the-runtime-environment-for-regex-finite-automata\" aria-label=\"the runtime environment for regex finite automata permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>We now know that regular expressions weren‚Äôt simply born to match string patterns ‚Äî they emerged from the effort to make machines recognize language. But I‚Äôve been saying ‚Äúmachine‚Äù over and over. What machine exactly?</p>\n<p>Regular expressions as a concept were born in 1951. Computers did exist at the time, but it was the wild days of debating whether to use mercury delay lines or magnetic cores for memory ‚Äî not exactly an era where you could write code without worrying about memory constraints.</p>\n<p>So research on machines during this period often involved imagining abstract machines in your head rather than working with actual computers. <del>(The OG of vibe coding‚Ä¶)</del></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/edc01160f5c13aa18f99073f08bdb540/36dd4/magnatic_drum.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABU0StDAqWf//EABoQAQEAAgMAAAAAAAAAAAAAAAECABEDEhP/2gAIAQEAAQUCjiE8pMuGWa3nbF2//8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8Bh//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/Aaf/xAAbEAACAQUAAAAAAAAAAAAAAAAAEQEgIUGBkf/aAAgBAQAGPwKGumI2K1H/xAAbEAEBAQADAQEAAAAAAAAAAAABEQAhMVFBYf/aAAgBAQABPyGKUz7nJ8HkrXZ6XvDFCv5kwQLfMtF3/9oADAMBAAIAAwAAABDPz//EABURAQEAAAAAAAAAAAAAAAAAABEQ/9oACAEDAQE/EET/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QTVrf/8QAHRABAAMAAQUAAAAAAAAAAAAAAQARIUFRYbHB4f/aAAgBAQABPxCgSUcdtjehlaJnSC11ATgxbSt4eZROQC/vtGyl9T//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"magnatic drum\" title=\"\" src=\"/static/edc01160f5c13aa18f99073f08bdb540/36dd4/magnatic_drum.jpg\" srcset=\"/static/edc01160f5c13aa18f99073f08bdb540/0913d/magnatic_drum.jpg 160w,\n/static/edc01160f5c13aa18f99073f08bdb540/cb69c/magnatic_drum.jpg 320w,\n/static/edc01160f5c13aa18f99073f08bdb540/36dd4/magnatic_drum.jpg 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Behold the majesty of the magnetic drum ‚Äî cutting-edge computer memory circa 1952</small>\n</center>\n<p>Among these abstract machines, regular expressions specifically emerged from research on making <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" target=\"_blank\" rel=\"nofollow\">finite automata</a> (abstract machines) understand language.</p>\n<p>‚ÄúAutomata‚Äù means automatic (Auto) machine (Mata). Since these are abstract automated machines, they don‚Äôt require physical devices like computers. They can exist purely as theory or design.</p>\n<p>The study of automata is fundamentally about finding answers to what a machine can and cannot do, making it a foundational field for the computer science we study today.</p>\n<p>A finite automaton, in simple terms, is a machine that can be in exactly one of a finite number of states at any time. When designing finite automata, we use diagrams called state transition diagrams to illustrate how states change. They look something like this:</p>\n<center>\n  <div style=\"max-width: 500px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/79576089b5b65ad5a36ea7b3a791bbc6/ea964/dfa.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 43.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABf0lEQVR42mNgQAP///9nAtFbtmzx2LVrVx+yGCWAtaenx3Dt2rWBQDZnfX09ZQbKyckJAikWEJuPj08IxsbiG0Y0NiOGotDQUDYgJXz06FGxw4cPKxkbG/PLyMhwwjStWrWKGcSGufrQoUOily9fVt62bRs7zAKYyYwwgfXr1zd+/vz5/devX/8/fPhwS3p6ujSSIXBDz507F3/v3r23z549+3/r1q09GzZskMIWGQbfgADI///r16/fIBpoaAdIDuhiwStXrmiB2MuXL1d+8+bNB5D8z58/weru3LkzGyQHCi8BLS0tUFixzZo1qxwkeffu3Z9nz579BWI/ffp0N0jhnDlzHIFeA2tqbW1NBfng0aNHP06cOPHn+/fv/y9evHgVJAdyGZO9vT0L1GZNoEKwzUAAs7keJAd0qeDr16/VQeyFCxfKvQQCZHU3b96cgDUNAgM5+N27d9ffvn37Cui6KTExMdzIsQpTd/r0aS9gGF4G+uY1MAwXzJ8/XwAAZcUKOrOtVWoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dfa\" title=\"\" src=\"/static/79576089b5b65ad5a36ea7b3a791bbc6/6af66/dfa.png\" srcset=\"/static/79576089b5b65ad5a36ea7b3a791bbc6/69538/dfa.png 160w,\n/static/79576089b5b65ad5a36ea7b3a791bbc6/72799/dfa.png 320w,\n/static/79576089b5b65ad5a36ea7b3a791bbc6/6af66/dfa.png 640w,\n/static/79576089b5b65ad5a36ea7b3a791bbc6/d9199/dfa.png 960w,\n/static/79576089b5b65ad5a36ea7b3a791bbc6/21b4d/dfa.png 1280w,\n/static/79576089b5b65ad5a36ea7b3a791bbc6/ea964/dfa.png 1312w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n  <br>\n</center>\n<p>This state transition diagram shows how a finite automaton‚Äôs state changes. The machine receives a string as input: if the character is <code class=\"language-text\">a</code>, it transitions to State 1; if the next character is <code class=\"language-text\">b</code>, it transitions to State 2. State 2 is the machine‚Äôs final (accepting) state, shown as a double circle.</p>\n<p>If this machine reaches its final state after processing an input string, the string is guaranteed to be something like <code class=\"language-text\">ab</code>, <code class=\"language-text\">aab</code>, <code class=\"language-text\">aaa...b</code>, and so on. This machine can also be expressed as the regex <code class=\"language-text\">a+b</code>. The machine I drew and the regex <code class=\"language-text\">a+b</code> are conceptually equivalent ‚Äî the regex is just a representation of that machine. (Finite automata and regular expressions are said to be in an equivalence relation.)</p>\n<p>When there‚Äôs only one possible path from any state to the next, you can tell at a glance how the machine will behave just from the state transition diagram. That‚Äôs because from any state, there‚Äôs exactly one possible next state. Such a finite automaton is called a Deterministic Finite Automaton (DFA) because the state transitions are already fully determined.</p>\n<p>DFAs are simple in structure and fully predictable, making them easy to implement as programs and efficient to run. But they have one drawback:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/eeda28f28f54f69d85014dfc688e8f14/41099/difficult.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBAUC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHmbMvrOrnOJXAkCv/EABwQAAICAgMAAAAAAAAAAAAAAAECAAMQEhETMv/aAAgBAQABBQKWougqfjrZppbHBVj6x//EABcRAQADAAAAAAAAAAAAAAAAAAEAEBH/2gAIAQMBAT8BGbf/xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPwEj/8QAHRAAAgEEAwAAAAAAAAAAAAAAAAERAiAhkTFR0f/aAAgBAQAGPwIULPYvRcbImnZDs//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExQRBR/9oACAEBAAE/ISfWozWyiiVXURrGqaowc2BTdaX2mz3/2gAMAwEAAgADAAAAEFsffP/EABYRAQEBAAAAAAAAAAAAAAAAAAEgMf/aAAgBAwEBPxADYf/EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8Qpk3/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFxkaH/2gAIAQEAAT8QsIsbj2nKstAwJcJ3SysnML1m0kCpUNLDQqZ6lSYnFAVmz7WdeYz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"difficult\" title=\"\" src=\"/static/eeda28f28f54f69d85014dfc688e8f14/41099/difficult.jpg\" srcset=\"/static/eeda28f28f54f69d85014dfc688e8f14/0913d/difficult.jpg 160w,\n/static/eeda28f28f54f69d85014dfc688e8f14/cb69c/difficult.jpg 320w,\n/static/eeda28f28f54f69d85014dfc688e8f14/41099/difficult.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Expressing a language's structure with a DFA's restricted state transitions is really hard...</small>\n</center>\n<p>Why is it hard? For a simple regex like <code class=\"language-text\">a+b</code>, drawing the state transition diagram as a DFA is straightforward. But try expressing something like <code class=\"language-text\">(a|b)b</code> ‚Äî which includes an OR ‚Äî as a DFA, and it gets tough. A DFA requires that for any given input, there be exactly one possible next state. It‚Äôs like trying to handle conditionals without <code class=\"language-text\">if</code> statements.</p>\n<p>For this reason, when expressing machines that recognize language, we use machines where multiple next states can exist rather than just one. Since the next state depends on the input, you can‚Äôt predict from the diagram alone how the machine will behave.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e7fceab762eed09c508982488f4c711d/a3a74/nfa.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVR42n1STUsCYRD2o0L6ALtVUN66RJf2WlCQeKsf0DE6BV38AV6Cbp4iSmIXNUwEwUvgx8GDCmtsrBZiICLiYSF11V3dxc1tm3fZlWUpB4bhfeadeed55rVYTKYoihXFYrG4xrIszXGc0Gg0jrScjaKo9X6//wE4X6/XD3Tc8l8jiHMottvtM1EUFWTQ+M7r9bqCweB+qVQ6lyRJxTudzr2xRu8xtWw2u4xiOp3fCAQCp9CIGo1GXK1W8yAcw7D5QqHgGgwG74CzlUrlOBqNemiadvp8PkcsFrNPx2UY5nI4HH5DEyIcfj4kSUqlk0gkVsxsUHEoFFrSjlaSJK9hWgmkeUSAA3wVgDdEA2gK1Wp1V6NgN2uEaBkdIDto+jmZTBSe50X0msq/1WpdCYLw0+12n3Acd79kMttGGYxGEIQjlUoZJ7wBzeVms4mbqSyimMvlsHg8fgL0X0EGDi669Ykht4U0hGlUDSORiBsedUJ6AeptM7c8Ho/VbfZ6vVu/378HvlMuly9kWVZxuPMwc8tofB3U/lse/Ev/hyifTCY3ASPBmb/+4S99g1RDfuL+QQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"nfa\" title=\"\" src=\"/static/e7fceab762eed09c508982488f4c711d/6af66/nfa.png\" srcset=\"/static/e7fceab762eed09c508982488f4c711d/69538/nfa.png 160w,\n/static/e7fceab762eed09c508982488f4c711d/72799/nfa.png 320w,\n/static/e7fceab762eed09c508982488f4c711d/6af66/nfa.png 640w,\n/static/e7fceab762eed09c508982488f4c711d/d9199/nfa.png 960w,\n/static/e7fceab762eed09c508982488f4c711d/21b4d/nfa.png 1280w,\n/static/e7fceab762eed09c508982488f4c711d/a3a74/nfa.png 2272w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>Such a machine is called a Nondeterministic Finite Automaton (NFA) because the state transitions aren‚Äôt predetermined but change depending on the input.</p>\n<p>The machine above starts by accepting the empty string <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œµ</mi></mrow><annotation encoding=\"application/x-tex\">\\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">œµ</span></span></span></span></span>, then transitions to State 2 if the next character is <code class=\"language-text\">a</code>, or to State 3 if it‚Äôs <code class=\"language-text\">b</code>. There are two or more possible next states from a single state. Since you can‚Äôt tell from the diagram alone what the next state will be, it‚Äôs called ‚Äúnondeterministic.‚Äù</p>\n<p>This is the rough concept of finite automata ‚Äî the machine that regex runs on. Regular expressions were designed with the goal of making this kind of abstract machine recognize language. The critical point to note here is that <strong>a finite automaton can only remember a single state at a time</strong>.</p>\n<p>This constraint is precisely what creates the limitations of regular expressions as a language.</p>\n<h2 id=\"the-limitations-of-regular-expressions\" style=\"position:relative;\">The Limitations of Regular Expressions<a href=\"#the-limitations-of-regular-expressions\" aria-label=\"the limitations of regular expressions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Languages that can be expressed by regular expressions ‚Äî that is, languages that finite automata can understand ‚Äî are called ‚Äúregular languages.‚Äù</p>\n<p>As we‚Äôve seen, regex was originally designed to express languages with mathematically describable rules, and it was built to run on finite automata that can hold only one state at a time, so it cannot express all languages.</p>\n<p>Think of it this way: you can‚Äôt express free-form natural languages like English or Korean with regex. (If you could express natural language with regex, we wouldn‚Äôt need machine learning.)</p>\n<p>In other words, there are clear limits to what regex can express, and the languages within those limits are called regular languages.</p>\n<center>\n  <div style=\"max-width: 400px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cbdaac181d19daaf1bcf0282472c8d32/21b4d/chomsky.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTklEQVR42o2U6UrDQBRGszVJ0yaTBvdgCYqodcO6oYL4/k/lN/GMXOMfBw4zzd3v3GkUfa/Y7JVYiVrMJ1TsNTqVsf2zctGIIvr/KrDJp4KSqIO4E+fiWlyJJ77figv2e3EjPsSJWJL5uGai5ew/dvz2HMGh2Bc9Zy9zYs84avE1CrJJLwv6M4OcPeNcmdYEmywk1prSU5rdEaimHXMchAtp0OmwiUyWozBEchgO9OhVvNOzT/Es3sSDOCVbZ7JsrEMffWEyLSEDW/LcZLYwfWxsyTVKoRcN+465pF1xQFtC71Nsf3x5QcLVp8bxirHxJb6ILSO1pXcJQVNsE3yNpTgzpEtza0ExkE7Krc1jcGFswmA7c8Mxit74koH2nKHboNOZmSynryUM+MAAOzLpeTnHDHIorUe3tZlNV0yktXgUG8opzBxukK3R/fXn8AWNkA9NoCwYMAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"chomsky\" title=\"\" src=\"/static/cbdaac181d19daaf1bcf0282472c8d32/6af66/chomsky.png\" srcset=\"/static/cbdaac181d19daaf1bcf0282472c8d32/69538/chomsky.png 160w,\n/static/cbdaac181d19daaf1bcf0282472c8d32/72799/chomsky.png 320w,\n/static/cbdaac181d19daaf1bcf0282472c8d32/6af66/chomsky.png 640w,\n/static/cbdaac181d19daaf1bcf0282472c8d32/d9199/chomsky.png 960w,\n/static/cbdaac181d19daaf1bcf0282472c8d32/21b4d/chomsky.png 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>In the Chomsky hierarchy, which ranks languages by complexity, regular languages sit at the very bottom.</small>\n  <br>\n  <br>\n</center>\n<p>Even among the strings we deal with in everyday business contexts, quite a few aren‚Äôt regular languages. The most prominent example is HTML. In other words, it‚Äôs impossible to determine whether a given string is valid HTML using regex.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7c89426e48dfcc4187fffa597065a5e1/65f94/question.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAACAP/aAAwDAQACEAMQAAAB6UdChKUBf//EABoQAAICAwAAAAAAAAAAAAAAAAACAREDEiP/2gAIAQEAAQUCHbnjvUVKk//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8BWosP/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACEEEiMTL/2gAIAQEABj8CQdyTSy3DibMf/8QAHBABAAEEAwAAAAAAAAAAAAAAAQARITFBUWFx/9oACAEBAAE/IW1ctSWEKgFmvE3z6hkndym2f//aAAwDAQACAAMAAAAQw+//xAAXEQADAQAAAAAAAAAAAAAAAAAAASER/9oACAEDAQE/EFio7T//xAAXEQEAAwAAAAAAAAAAAAAAAAAAESFB/9oACAECAQE/ENyVH//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFBMVFhcZH/2gAIAQEAAT8QSQ0o42wgx0mC6cDKDYs3ueIkYy3X2MqFoVo1HHvn/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"question\" title=\"\" src=\"/static/7c89426e48dfcc4187fffa597065a5e1/65f94/question.jpg\" srcset=\"/static/7c89426e48dfcc4187fffa597065a5e1/0913d/question.jpg 160w,\n/static/7c89426e48dfcc4187fffa597065a5e1/cb69c/question.jpg 320w,\n/static/7c89426e48dfcc4187fffa597065a5e1/65f94/question.jpg 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Wait, I've definitely matched HTML with regex before though?</small>\n</center>\n<p>Sure, I‚Äôve matched HTML with regex too. But the rules we were applying at the time were small, constrained checks on parts of the HTML (like ‚Äúdid a <code class=\"language-text\">&lt;div></code> tag open and close?‚Äù), not validating the entire HTML document.</p>\n<p>So why do I say regex can‚Äôt validate HTML? The answer becomes clear when you remember that regex represents a finite automaton that can only remember a single state, and then look at HTML‚Äôs structure.</p>\n<h3 id=\"why-regex-cant-understand-html\" style=\"position:relative;\">Why Regex Can‚Äôt Understand HTML<a href=\"#why-regex-cant-understand-html\" aria-label=\"why regex cant understand html permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As we all know, HTML has a structure where tags open and close, and tags can be nested infinitely deep inside other tags.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>\n      ...\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>So if a machine receives an HTML string as input and needs to verify that it‚Äôs valid, what would it need to do?</p>\n<p>A valid HTML string requires every opening tag to have a matching closing tag, which means the machine needs to read characters one by one while simultaneously tracking which tags are open and closed. It would work roughly like this:</p>\n<hr>\n<ol>\n<li>Encounter <code class=\"language-text\">&lt;main></code>. Store the state that the <code class=\"language-text\">&lt;main></code> tag is open.</li>\n<li>Encounter <code class=\"language-text\">&lt;section></code>. Store the state that the <code class=\"language-text\">&lt;section></code> tag is open.</li>\n<li>‚Ä¶repeat</li>\n<li>Encounter <code class=\"language-text\">&lt;/main></code>. If the state says <code class=\"language-text\">&lt;main></code> is open, it has closed correctly.</li>\n<li>Encounter <code class=\"language-text\">&lt;/section></code>. If the state says <code class=\"language-text\">&lt;section></code> is open, it has closed correctly.</li>\n<li>If no tags remain open when the end of the string is reached, this is valid HTML.</li>\n</ol>\n<hr>\n<p>If you were building such a machine, how many states would it need to store?</p>\n<center>\n.<br/>\n.<br/>\n.<br/>\n</center>\n<blockquote>\n<p>The answer is <strong>infinite</strong>.</p>\n</blockquote>\n<p>If that‚Äôs not immediately clear, imagine building an HTML parser yourself. As discussed, this parser needs to verify that tags are properly opened and closed, so whenever it encounters an opening tag string, it needs to store that state somewhere.</p>\n<p>The exact approach to state management may vary from person to person, but the classic technique for validating matched pairs of opening and closing brackets is using a stack.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d4263f72bef0eb338a9fd098cb06b100/17a7a/html_parser.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADG0lEQVR42o2U+1MbVRTH+S99TLWo4+MHf4AUKoWhjr85U7WETtugBIJUpUKDZYpAaUmCBJKxJs2StGmSXfJ+kRdsVgoBPt7dJJXOFOiZ+ezee8853z333N3tQJim7hOPVkjEqgYpuUZK2WkiN9HX41HhU2o0Gke07fj42KBtHfpFCZeZGnnKvXGJmTEJq3mF29cWDEaHHjM+7MRuCzFtDTA7sUkskqRaq5BMJslms3g8HiRJ4vDwsClYLmg8WU3hc6cNPE6ZdUeUDYHXpRj41zP8s5ZC8ubIpPMiuSEqPeTo6IharUa5XP6/wpMln2XtOD1ZF3qTdehBmqaxu7uLqqoG+rhNe9721et1crnca4In+9gUFEHtBCNJPEBroQvUT/jfJPhahUKfQrVOML3Ls4xq4JeL+GIF/IKnyjaBeJnn2TqhtEo4qyJvJURFZwjmqxqSCA5mdGGVpXWJhTU/Dzc2cfmirAYUnuf32NRjBLnC9ql9br42+R3mfAXmA9v8uVlhIVgVVFpUxVqZeanEA3+RRanITn2v1btTBB8Fi3TaXvD5xDM++G6RD68v03nDxUc317lodtA5rI/dfDYZ4ctfIiSKKqe9HYZgIF7hh6UEw8sJrs+HGVqKYV5SMD9UGFqMvcK8nOTWSpJiTTu7wo1omcszMa7OxRm4F6HvN4krU0H674bo/z1kjAf/2GJgVuGbOYVspX62oDtSonc6xuD9OH0iuXtkBdNPTnonvFwac9NjXWPAHqNfCH59XyFTOkcwmKxy41ESy0qK2440ltU8lr8KWJxZgxF9LtZvPU4x6kpR2jlny8viUC6Mhvl0Uuai5QnvfPuA964tcsHs4v3vl3lXzD+xhfl4IsIXd97iUEKiwpui2T86U4zoOJJNXs0T4i524EgxtvoWFa69KNE1FaXPvsWlX4N0WTfoGvdi+tlHt+1vusY8xqH1Tsv022XS5/XQLQRNd6NcsStcngrRbXVjGvfQM+mj544fk81LnxD8akZmcFYmUz5ny/sHB6j/vqSus7ePtt9Ae6lz0KLR9LVoiB/paZ/ef/l8VA9zcB1BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"html parser\" title=\"\" src=\"/static/d4263f72bef0eb338a9fd098cb06b100/6af66/html_parser.png\" srcset=\"/static/d4263f72bef0eb338a9fd098cb06b100/69538/html_parser.png 160w,\n/static/d4263f72bef0eb338a9fd098cb06b100/72799/html_parser.png 320w,\n/static/d4263f72bef0eb338a9fd098cb06b100/6af66/html_parser.png 640w,\n/static/d4263f72bef0eb338a9fd098cb06b100/17a7a/html_parser.png 753w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>A bare-bones HTML parser can be built just by pushing opening tags onto a stack and popping when closing tags are encountered.</small>\n  <br>\n  <br>\n</center>\n<p>No matter how deeply tags are nested, inner tags must always close before outer ones ‚Äî and the stack‚Äôs last-in-first-out property is a perfect fit for validating this structure.</p>\n<p>But the problem is the size of the stack. How large does the stack need to be to handle any possible HTML string?</p>\n<p>The bigger the better, obviously. A larger stack means you can parse HTML with deeper nesting. But eventually, an HTML tree deeper than the stack‚Äôs capacity will come along and crash the program, which means that to build an HTML parser that can handle any string, the stack size needs to be infinite.</p>\n<h3 id=\"regex-is-ultimately-a-finite-automaton\" style=\"position:relative;\">Regex Is Ultimately a Finite Automaton<a href=\"#regex-is-ultimately-a-finite-automaton\" aria-label=\"regex is ultimately a finite automaton permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Validating whether HTML is well-formed requires an infinite number of states. But regex represents a finite automaton that can hold only a single state, so it fundamentally cannot recognize HTML, which requires infinite states to parse.</p>\n<p>The core takeaway is that regex represents a finite automaton that can only hold one state, and there exist problems that such a machine simply cannot solve.</p>\n<p>So rather than reaching for regex the moment you see a string problem, it‚Äôs better to first think: ‚ÄúIf I were building a parser for this string, how many states would I need?‚Äù If the answer is two or more, you can generally conclude that regex alone won‚Äôt cut it.</p>\n<p>Of course, this kind of mental simulation differs between those who are experienced and those who aren‚Äôt; you might think a problem requires multiple states when one would suffice. But algorithms are a domain of practice, not talent, so with a year or two of steady effort, your intuition will sharpen over time.</p>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The limitations of regex can actually be summarized in a single sentence: ‚Äúit cannot recognize strings with unbounded nesting depth.‚Äù</p>\n<p>But rather than just stating and memorizing that, I thought it would be easier to understand if we explored what problem regex was created to solve and what concept it‚Äôs built on.</p>\n<p>If you don‚Äôt know that regex has these limitations, you might take your experience of using regex in constrained situations (like checking whether a <code class=\"language-text\">&lt;li></code> tag exists inside a <code class=\"language-text\">&lt;ul></code> tag) and try to tackle a fundamentally unsolvable problem.</p>\n<p>Regex does provide a lot of convenience when working with strings, that‚Äôs true. But as we‚Äôve discussed, the backtracking algorithm can introduce unexpected performance issues, and there are problems regex simply cannot solve. So before reaching for regex, it‚Äôs always worth asking: ‚ÄúIs this really the right tool for the job?‚Äù</p>\n<p>That‚Äôs all for this post on why you can‚Äôt parse HTML with regex.</p>","fields":{"slug":"20210507-why-regexp-called-regexp-en","path":"/2021/05/07/why-regexp-called-regexp/en/","lang":"en"},"frontmatter":{"title":"Why You Can't Parse HTML with Regex","subTitle":"Backtracking and Automata: Why Regular Expressions Can't Understand HTML","date":"May 07, 2021","categories":["Programming"],"tags":["Regex","Regular Expression","Automaton","Automata","Backtracking"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/267c5d189674e3002cc5cc4b33695d75/3a812/thumbnail.jpg","srcSet":"/static/267c5d189674e3002cc5cc4b33695d75/3a812/thumbnail.jpg 320w,\n/static/267c5d189674e3002cc5cc4b33695d75/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/267c5d189674e3002cc5cc4b33695d75/fc5c5/thumbnail.webp 320w,\n/static/267c5d189674e3002cc5cc4b33695d75/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/267c5d189674e3002cc5cc4b33695d75/2d839/thumbnail.jpg","srcSet":"/static/267c5d189674e3002cc5cc4b33695d75/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/267c5d189674e3002cc5cc4b33695d75/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"aa7e78f8-d11c-5873-9fed-047eb7246ba9","tableOfContents":"<ul>\n<li>\n<p><a href=\"#how-it-started\">How It Started</a></p>\n</li>\n<li>\n<p><a href=\"#drawing-a-doughnut-chart\">Drawing a Doughnut Chart</a></p>\n<ul>\n<li><a href=\"#visualizing-multiple-data-points\">Visualizing Multiple Data Points</a></li>\n<li><a href=\"#full-code\">Full Code</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#building-animation-with-arcs\">Building Animation with Arcs</a></p>\n<ul>\n<li><a href=\"#cant-use-the-circle-element\">Can‚Äôt Use the circle Element</a></li>\n<li><a href=\"#understanding-how-svg-renders-arcs\">Understanding How SVG Renders Arcs</a></li>\n<li><a href=\"#understanding-the-arc-flags\">Understanding the Arc Flags</a></li>\n<li><a href=\"#finding-arc-endpoints-with-trigonometry\">Finding Arc Endpoints with Trigonometry</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about something I recently wrestled with: drawing doughnut charts with SVG. Drawing the chart itself is straightforward since SVG provides a  element, but what really gave me trouble was the animation. Of course, you can easily get a doughnut chart by using a chart libr‚Ä¶","html":"<p>In this post, I want to talk about something I recently wrestled with: drawing doughnut charts with SVG. Drawing the chart itself is straightforward since SVG provides a <code class=\"language-text\">circle</code> element, but what really gave me trouble was the animation.</p>\n<p>Of course, you can easily get a doughnut chart by using a chart library like <a href=\"https://www.chartjs.org/\" target=\"_blank\" rel=\"nofollow\">chartjs</a> or <a href=\"https://nivo.rocks/\" target=\"_blank\" rel=\"nofollow\">nivo</a>, but all I actually needed was a bar chart and a doughnut chart. Using a full chart library felt like overkill, and I figured I could just throw something together with canvas or SVG ‚Äî so I decided to build it myself.</p>\n<h2 id=\"how-it-started\" style=\"position:relative;\">How It Started<a href=\"#how-it-started\" aria-label=\"how it started permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <div style=\"max-width: 300px;\">\n    <img src=\"/d73af6df8335316c67a49ab5b03887cb/doughnut_clipped.gif\" width=\"100%\">\n  <div>\n</div></div></center>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// The original interface looked like this</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DoughnutChart</span></span> <span class=\"token attr-name\">size</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">40</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">rate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">80</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>It all started with this doughnut chart. It was only being used in one specific service I was responsible for, so it had a rather naive interface. But recently, other teams started needing it too, which meant I had to make the interface more abstract.</p>\n<p>The original interface rendered a single data point onto an empty doughnut using a <code class=\"language-text\">rate</code> percentage value, so it only worked under the assumption that there would always be exactly one data point.</p>\n<p>But to make the doughnut chart freely usable across different contexts, I needed to support visualizing multiple data points ‚Äî which meant overhauling both the chart logic and the animation.</p>\n<h2 id=\"drawing-a-doughnut-chart\" style=\"position:relative;\">Drawing a Doughnut Chart<a href=\"#drawing-a-doughnut-chart\" aria-label=\"drawing a doughnut chart permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Drawing an SVG doughnut chart itself is fairly simple by combining the <code class=\"language-text\">circle</code> element with <code class=\"language-text\">stroke</code>. Let‚Äôs start by drawing a simple circle in SVG.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 100 100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transparent<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 509px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/928ae352c7a3d1872f030ad036c7c03d/71554/circle.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVR42q2UsYrCQBCGoygKPoQWloK+iaCNjSD4DlaWaqUW2vkggo2NhYV2oq2gfYpIEkw0/93cMCSYxFsvt/DDLv/ONzObzWq6rsOyLJimmVi32w0aTWh4noekw3VdNSBZKvl+BT6frLj1R8Bg4GuFcdXGAmW63QKdDlCpsLpdYL8PJ3wLlI2zGZBOA5oGpFIsmmcywGIRDQ0BHw82NhsOzGaBfh84nYDjEej1GJzPA7tdGBoCitlqcTWDAa8pkSSjBORR++LJEUW27DhAucxB57NfhQAPB/ZqNd4bPPNI4P3uAy8X2ciiQa2TV60qAKXlRoODptNwy6MRe+22QssStFxyUKEAzOfA9crVTiZALsfeeu0Dla7NcMiBJIIIiDQeK16b179ktQLqdaBYBEoloNn0K1O+2HLIwVZsmyUj6H30ONBXlC8Ztf7z8/Xv7+FHQMMwfibOdy9JZds2vgDYWtG2KLhreAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"circle\" title=\"\" src=\"/static/928ae352c7a3d1872f030ad036c7c03d/71554/circle.png\" srcset=\"/static/928ae352c7a3d1872f030ad036c7c03d/69538/circle.png 160w,\n/static/928ae352c7a3d1872f030ad036c7c03d/72799/circle.png 320w,\n/static/928ae352c7a3d1872f030ad036c7c03d/71554/circle.png 509w\" sizes=\"(max-width: 509px) 100vw, 509px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>In SVG, numbers without explicit units are implicitly defined in <code class=\"language-text\">px</code>. I rendered a square box with <code class=\"language-text\">width</code> and <code class=\"language-text\">height</code> of <code class=\"language-text\">500px</code> and used <code class=\"language-text\">viewBox=\"0 0 100 100\"</code> to define an internal coordinate system of <code class=\"language-text\">100px</code> by <code class=\"language-text\">100px</code>.</p>\n<p>Without the <code class=\"language-text\">viewBox</code> attribute, SVG would automatically render a viewbox matching the <code class=\"language-text\">width</code> and <code class=\"language-text\">height</code> pixel values, but having coordinates from 0 to 100 makes it easier to reason about shape positions.</p>\n<p>So the box we see is <code class=\"language-text\">500px</code> on each side, but internally it operates on a <code class=\"language-text\">100 √ó 100</code> coordinate system. I then rendered a circle centered at <code class=\"language-text\">(50px, 50px)</code> with a radius of <code class=\"language-text\">20px</code> and a stroke width of <code class=\"language-text\">10px</code>.</p>\n<p>This circle by itself can be thought of as a doughnut chart where a single data point takes up 100%. Since SVG‚Äôs <code class=\"language-text\">circle</code> element alone can produce the basic shape, the visualization itself isn‚Äôt particularly difficult.</p>\n<p>But a doughnut chart should be able to visualize multiple data points simultaneously. So how do we represent multiple data points?</p>\n<h3 id=\"visualizing-multiple-data-points\" style=\"position:relative;\">Visualizing Multiple Data Points<a href=\"#visualizing-multiple-data-points\" aria-label=\"visualizing multiple data points permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A doughnut chart is essentially a single doughnut shape divided among multiple data points. In other words, each data point occupies a portion of the circle.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVR42rWUT6uCUBDF+84uW0dbP4I7Azct0sidCzdZSCiBlJkRRJQWlBWkncdcMORpf9T3hIMD987vHu7M3EYYhrhcLoiiqLbO5zMaFPzVd7/fvwc+Ho/6QIIUqRIwm/gb9Ar60WEQBBgOh1BVlckwDOz3+5fQQmC6cbVaQZIkCIKATqcDURRZzPM8RqNRITQHTDccDgcMBgP0+33Yto3T6cTaYjweo9VqMa3X6xz0JdCyLPR6Pbium7tDXdfRbDbR7XbfA9MF+lMSOcyuJUnC4t1uB47j0G63GSCb+xZIRbherzmHt9sNpmliOp0+DykEZhcmkwlkWYbneTng8XjEfD7Hdrv9XOU0idpFURRomsYKRBtJBKN7nc1mbP5L9eFyuWQVpuTFYsHkOA5zR+BSjZ06JRebzQa+7zNRXOSs9OjR5acFqDV6RYmVH4d/fw+/BtKcxnH8bI2qIgY1/Q8BlAsFCsBhOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"doughnut\" title=\"\" src=\"/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png\" srcset=\"/static/733cf6be71679daf82979b47834fb780/69538/doughnut.png 160w,\n/static/733cf6be71679daf82979b47834fb780/72799/doughnut.png 320w,\n/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png 508w\" sizes=\"(max-width: 508px) 100vw, 508px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Each data point occupies a portion of the circle</small>\n</center>\n<p>Fortunately, SVG provides a <code class=\"language-text\">stroke-dasharray</code> attribute that can render dashed lines (dashes), which is exactly what we need to control how much of each data point to draw.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span>\n  <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transparent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">stroke-width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">stroke-dasharray</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10 5<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">stroke-dasharray</code> takes a series of space-separated values to define the dash pattern: the first value determines how long to draw the line, and the second determines how long to leave a gap. So the code above draws <code class=\"language-text\">10px</code> of line followed by <code class=\"language-text\">5px</code> of gap, repeating around the circle:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 510px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2a7989e6f31606ad23b405a597271acd/0abdd/dasharray.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42s2VTYvCMBCG/f8/RBDxC08i3jyIeBAvioigeFLEUvphq/bRsQxbm3btbpHdQGjSTJ9535BMK5Zl4fs+nueV7o7jUHFdF2lRFFG2hWH4R0BZKpLvLfB2M8Hpd4WByeluB+s1XK/Zid4CdTgYwGoFoxHU67DZwHSabz8TqNkXC6jVvuYKqVZhOMxWmqvwfIbl8nUv1e7lAttttm0DqEGzGXQ6pgqF9nown5t7bQB1UfZKLKc/UGC7HSdNJ8y1LEGTSWxPQcmz2GrB4VBAYTJjowH9/qsKeYqy4/EX5/BRL9jvYTyGZpPHxYduNx6nlRUCqiqxJvZPJ5DQ767hj4tDqav3keLwP+qhbdvPQRAEpbv8Bu6uQSNFqgA4NwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dasharray\" title=\"\" src=\"/static/2a7989e6f31606ad23b405a597271acd/0abdd/dasharray.png\" srcset=\"/static/2a7989e6f31606ad23b405a597271acd/69538/dasharray.png 160w,\n/static/2a7989e6f31606ad23b405a597271acd/72799/dasharray.png 320w,\n/static/2a7989e6f31606ad23b405a597271acd/0abdd/dasharray.png 510w\" sizes=\"(max-width: 510px) 100vw, 510px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A dashed line with 10px dashes and 5px gaps</small>\n</center>\n<p>Using this attribute, we can draw a line that occupies only part of the circle while leaving the rest as a gap ‚Äî which is how we represent multiple data points in a doughnut chart.</p>\n<p>But if you look closely at the example above, the line segment on the right side of the circle is longer than the others. That‚Äôs because the values I passed to <code class=\"language-text\">stroke-dasharray</code> don‚Äôt evenly divide the circumference.</p>\n<p><code class=\"language-text\">stroke-dasharray</code> takes values in <code class=\"language-text\">px</code> ‚Äî the length of lines and gaps. So to get evenly spaced dashes, you need to first calculate the circumference and then use values that divide it evenly.</p>\n<p>SVG renders circles starting from the point <code class=\"language-text\">(cx + r, cy)</code> ‚Äî the rightmost point of the circle. So if <code class=\"language-text\">stroke-dasharray</code> doesn‚Äôt align precisely with the circumference, you get that uneven segment at the starting point.</p>\n<p>The formula for circumference is the beautifully simple <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span>, which we can easily compute with <code class=\"language-text\">Math.PI</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> diameter <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>diameter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 125.66370614359172</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>With a radius of <code class=\"language-text\">20px</code>, the circumference is about <code class=\"language-text\">126px</code>. Dividing by <code class=\"language-text\">15</code> (the sum of our dasharray values, <code class=\"language-text\">10 + 5</code>) gives <code class=\"language-text\">8.37</code> ‚Äî not a clean division. So the dash pattern repeats 8 times with <code class=\"language-text\">0.37</code> worth of leftover awkwardly attached to the start.</p>\n<p>To properly visualize multiple data points in a doughnut chart, you need two pieces of information:</p>\n<blockquote>\n<ol>\n<li>The circumference (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span>)</li>\n<li>The ratio of each data point to the total</li>\n</ol>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> diameter <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> dataset <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> total <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r <span class=\"token operator\">+</span> v<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndataset<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> ratio <span class=\"token operator\">=</span> data <span class=\"token operator\">/</span> total<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> strokeLength <span class=\"token operator\">=</span> diameter <span class=\"token operator\">*</span> ratio<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> spaceLength <span class=\"token operator\">=</span> diameter <span class=\"token operator\">-</span> strokeLength<span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">stroke-dasharray = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>strokeLength<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>spaceLength<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">stroke-dasharray = 51.4078797860148 74.25582635757692\nstroke-dasharray = 28.559933214452663 97.10377292913907\nstroke-dasharray = 22.847946571562133 102.81575957202959\nstroke-dasharray = 17.135959928671596 108.52774621492013\nstroke-dasharray = 5.711986642890533 119.95171950070119</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>With the circumference and each data point‚Äôs ratio, we can define exactly how much of the circle each data point should occupy.</p>\n<p>But if you try to render the chart with just this information, you‚Äôll hit a problem: every data point starts rendering from the same point, <code class=\"language-text\">(cx + r, cy)</code>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/95e06fb4efbe157747f5fe4cb2318dae/6fffd/blog-Page-9.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 94.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH3pYVRjQcQf//EABgQAAIDAAAAAAAAAAAAAAAAAAABEBEg/9oACAEBAAEFAtKLZ//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABsQAQEBAAIDAAAAAAAAAAAAAAEAERAhMUFx/9oACAEBAAE/IcLc9MBZBF337wk+b//aAAwDAQACAAMAAAAQAwAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBcVGBkf/aAAgBAQABPxAAcVmI2TPENdBuZHvzB0WA3ucu4kWWK7+xAC2z/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"blog Page 9\" title=\"\" src=\"/static/95e06fb4efbe157747f5fe4cb2318dae/c08c5/blog-Page-9.jpg\" srcset=\"/static/95e06fb4efbe157747f5fe4cb2318dae/0913d/blog-Page-9.jpg 160w,\n/static/95e06fb4efbe157747f5fe4cb2318dae/cb69c/blog-Page-9.jpg 320w,\n/static/95e06fb4efbe157747f5fe4cb2318dae/c08c5/blog-Page-9.jpg 640w,\n/static/95e06fb4efbe157747f5fe4cb2318dae/6a068/blog-Page-9.jpg 960w,\n/static/95e06fb4efbe157747f5fe4cb2318dae/eea4a/blog-Page-9.jpg 1280w,\n/static/95e06fb4efbe157747f5fe4cb2318dae/6fffd/blog-Page-9.jpg 1364w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>No matter how accurately you‚Äôve computed the line lengths, if every data point renders from the same starting point, you end up with a sad-looking chart like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d4cb50a4f4bcede54c55b2ae29f0585c/2fd48/doughnut_failed.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1UlEQVR42u3TOwqEMBAGYG+tF7DyCtbqGawF0ZSp7AQLAxYKvvHxywQCu+wuGFwWFhyYIo/5CJnEqOsa4zhiGIbL2XUdjL7v8a1YluUGb/An4LquaNsWVLfvuz5IRZTbtslxVVWwLAuO40hA7dE+oSqK4ximaSIIgqf5U+A8z2iaBtM0yb+aZRlc14Vt28jzXA+kjUVRSCRJEoRhCM/z4Ps+OOcv2CmQ1oQQSNMUURSBMYayLN9iWndInVVN+YSdAlWHVRD6CP/pT6FXT3dEgytJBj2vA6s/IZqqELpFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"doughnut failed\" title=\"\" src=\"/static/d4cb50a4f4bcede54c55b2ae29f0585c/2fd48/doughnut_failed.png\" srcset=\"/static/d4cb50a4f4bcede54c55b2ae29f0585c/69538/doughnut_failed.png 160w,\n/static/d4cb50a4f4bcede54c55b2ae29f0585c/72799/doughnut_failed.png 320w,\n/static/d4cb50a4f4bcede54c55b2ae29f0585c/2fd48/doughnut_failed.png 508w\" sizes=\"(max-width: 508px) 100vw, 508px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>An unidentifiable something has been summoned</small>\n</center>\n<p>Since a doughnut chart accumulates data to eventually form a complete circle, after rendering one data point, the next data point‚Äôs starting position needs to be offset by the total of all previously rendered data.</p>\n<p>Fortunately, SVG provides the <code class=\"language-text\">stroke-dashoffset</code> attribute to shift where the dash pattern begins, so we just need to compute the right offset values.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> dataset <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Accumulate the data values</span>\n<span class=\"token keyword\">const</span> acc <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>result<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">[</span>result<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The first data point doesn‚Äôt need any offset, so it starts at <code class=\"language-text\">0</code>. The <code class=\"language-text\">reduce</code> function‚Äôs second argument is the initial value, so we pass an array containing just <code class=\"language-text\">0</code>.</p>\n<p>Since the initial array already contains <code class=\"language-text\">0</code>, the accumulated array is one element longer than the dataset. The last element <code class=\"language-text\">22</code> ‚Äî equal to the total ‚Äî isn‚Äôt really needed since these values define starting positions for rendering, and <code class=\"language-text\">22</code> represents the point where all data has been rendered.</p>\n<p>With these accumulated values, we can compute exactly how many pixels to offset using <code class=\"language-text\">(acc[i] / total) * diameter</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> diameter <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> dataset <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> total <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r <span class=\"token operator\">+</span> v<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> acc <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>result<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">[</span>result<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndataset<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> offset <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> total<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> diameter<span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">stroke-dashoffset = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token operator\">-</span>offset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">stroke-dashoffset = 0\nstroke-dashoffset = -51.4078797860148\nstroke-dashoffset = -79.96781300046746\nstroke-dashoffset = -102.8157595720296\nstroke-dashoffset = -119.9517195007012</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You could skip <code class=\"language-text\">reduce</code> and just use a <code class=\"language-text\">let</code> variable that accumulates as you render. The key point is knowing ‚Äúhow far have I rendered so far.‚Äù</p>\n<p>Notice I‚Äôm negating the offset values. That‚Äôs because SVG renders lines in the counterclockwise direction by default.</p>\n<p>Intuitively, you‚Äôd expect doughnut chart data to accumulate clockwise, so SVG should render clockwise too ‚Äî but SVG doesn‚Äôt care about your expectations. Data might accumulate clockwise in this chart, but depending on how coordinates are defined, counterclockwise is equally valid. Changing the rendering direction every time coordinates shift would be inefficient, so SVG always draws counterclockwise by default.</p>\n<p>This same concept applies to arcs, which I‚Äôll discuss below. Keeping this in mind will make it easier to understand how arcs are rendered. To verify SVG‚Äôs drawing direction, you can test with lines instead of circles:</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">stroke-dasharray</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-dashoffset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>90<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">stroke-dasharray</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-dashoffset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>90<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 452px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3ac1afa110392b8bc30dc4a4874b889c/fcb94/line_offset_plus.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArklEQVR42jWQVwqEQBQEvf8JFRRdUAzImnPopRp2fkbtmup5Bvd9KwxDbdumOI41DIOKolBZlvp+v0qSxFkURTqOw+y6rkrT1HlVVfp8PmK976uAh77vhXiaJh9CsCyLzvN0wfM8Zth5v65L8zyb2/fd5/4rIPx/pBFhXdcuoJ29aRozXdeZo6xtWxfC4iCzEME4jpblee5xGBOYX4CI8WAoQM4tsyzzDWFxkCH8ASGDMXqTBVmPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"line offset plus\" title=\"\" src=\"/static/3ac1afa110392b8bc30dc4a4874b889c/fcb94/line_offset_plus.png\" srcset=\"/static/3ac1afa110392b8bc30dc4a4874b889c/69538/line_offset_plus.png 160w,\n/static/3ac1afa110392b8bc30dc4a4874b889c/72799/line_offset_plus.png 320w,\n/static/3ac1afa110392b8bc30dc4a4874b889c/fcb94/line_offset_plus.png 452w\" sizes=\"(max-width: 452px) 100vw, 452px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>With an offset of 3, the bottom line shifts 3px to the left</small>\n</center>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">stroke-dasharray</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-dashoffset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>90<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">stroke-dasharray</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-dashoffset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>90<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 451px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6c9e6de0fef414a907f7acb5218e6d4c/38070/line_offset_minus.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 23.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42rWQTQuFIBBF/f9/LF2GLewDDMqVCqkRVOh9jIvgQcv37nIO3DkzbNs27PuO8zzhvUcpBdZa3PeNEAJSSpU5517ZdV0Po7BpmmCMQYwRXdch54y2bXEcB7TWWNe1MinlF5vnGcuy1FJiTyF+HEb6TdPUTX3fg4zpDUKIehrnvBoOw4BxHF8ZzZVS/zH8AINHf/jeKilIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"line offset minus\" title=\"\" src=\"/static/6c9e6de0fef414a907f7acb5218e6d4c/38070/line_offset_minus.png\" srcset=\"/static/6c9e6de0fef414a907f7acb5218e6d4c/69538/line_offset_minus.png 160w,\n/static/6c9e6de0fef414a907f7acb5218e6d4c/72799/line_offset_minus.png 320w,\n/static/6c9e6de0fef414a907f7acb5218e6d4c/38070/line_offset_minus.png 451w\" sizes=\"(max-width: 451px) 100vw, 451px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>With an offset of -3, the bottom line shifts 3px to the right</small>\n</center>\n<p>Now that we understand all this, we can freely control how much data to render along the circumference and how many pixels to offset each data point‚Äôs starting position, using <code class=\"language-text\">stroke-dasharray</code> and <code class=\"language-text\">stroke-dashoffset</code>.</p>\n<h3 id=\"full-code\" style=\"position:relative;\">Full Code<a href=\"#full-code\" aria-label=\"full code permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Draw a 100 x 100 viewbox --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 100 100<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Chart radius</span>\n<span class=\"token keyword\">const</span> diameter <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Chart circumference</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#bbb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#aaa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#888'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#666'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dataset <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Total of all dataset values</span>\n<span class=\"token keyword\">const</span> total <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r <span class=\"token operator\">+</span> v<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Accumulated dataset values</span>\n<span class=\"token keyword\">const</span> acc <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> last <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">,</span> last <span class=\"token operator\">+</span> v<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Time for some property-setting grunt work...</span>\n<span class=\"token keyword\">const</span> svg <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndataset<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> ratio <span class=\"token operator\">=</span> data <span class=\"token operator\">/</span> total<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> fillSpace <span class=\"token operator\">=</span> diameter <span class=\"token operator\">*</span> ratio<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> emptySpace <span class=\"token operator\">=</span> diameter <span class=\"token operator\">-</span> fillSpace<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> offset <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> total<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> diameter<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> circle <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElementNS</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.w3.org/2000/svg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'circle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'50'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cy'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'50'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>radius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'transparent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stroke'</span><span class=\"token punctuation\">,</span> colors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stroke-width'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'10'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stroke-dasharray'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fillSpace<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>emptySpace<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  circle<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stroke-dashoffset'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>offset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  svg<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>circle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVR42rWUT6uCUBDF+84uW0dbP4I7Azct0sidCzdZSCiBlJkRRJQWlBWkncdcMORpf9T3hIMD987vHu7M3EYYhrhcLoiiqLbO5zMaFPzVd7/fvwc+Ho/6QIIUqRIwm/gb9Ar60WEQBBgOh1BVlckwDOz3+5fQQmC6cbVaQZIkCIKATqcDURRZzPM8RqNRITQHTDccDgcMBgP0+33Yto3T6cTaYjweo9VqMa3X6xz0JdCyLPR6Pbium7tDXdfRbDbR7XbfA9MF+lMSOcyuJUnC4t1uB47j0G63GSCb+xZIRbherzmHt9sNpmliOp0+DykEZhcmkwlkWYbneTng8XjEfD7Hdrv9XOU0idpFURRomsYKRBtJBKN7nc1mbP5L9eFyuWQVpuTFYsHkOA5zR+BSjZ06JRebzQa+7zNRXOSs9OjR5acFqDV6RYmVH4d/fw+/BtKcxnH8bI2qIgY1/Q8BlAsFCsBhOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"doughnut\" title=\"\" src=\"/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png\" srcset=\"/static/733cf6be71679daf82979b47834fb780/69538/doughnut.png 160w,\n/static/733cf6be71679daf82979b47834fb780/72799/doughnut.png 320w,\n/static/733cf6be71679daf82979b47834fb780/2fd48/doughnut.png 508w\" sizes=\"(max-width: 508px) 100vw, 508px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The finished doughnut chart!</small>\n</center>\n<h2 id=\"building-animation-with-arcs\" style=\"position:relative;\">Building Animation with Arcs<a href=\"#building-animation-with-arcs\" aria-label=\"building animation with arcs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now we can freely render beautiful doughnut charts with any dataset. But the real challenge wasn‚Äôt rendering the chart. Let‚Äôs look at my implementation again.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <img src=\"/d73af6df8335316c67a49ab5b03887cb/doughnut_clipped.gif\" width=\"100%\">\n  <div>\n</div></div></center>\n<center>\n.<br />\n.<br />\n.<br />\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/acb04/um.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEFAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAelzUauZGH//xAAZEAEBAQEBAQAAAAAAAAAAAAABAgMRAAT/2gAIAQEAAQUCbHcuSnndYdvozyc/Wo//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARL/2gAIAQMBAT8BZr//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQIBAT8BjT//xAAdEAACAQQDAAAAAAAAAAAAAAABEQACEBMyMUFx/9oACAEBAAY/AsZKCfspFJ26JsQFxMj1Kt//xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhMUFxkf/aAAgBAQABPyEk4LRnplASuwiaqYfNFInlpUkqNwmb/9oADAMBAAIAAwAAABB/3//EABcRAAMBAAAAAAAAAAAAAAAAAAARIQH/2gAIAQMBAT8QcGXD/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxDrZA5f/8QAHBABAAIDAQEBAAAAAAAAAAAAAREhADFRQWGB/9oACAEBAAE/EHEoKU5glsNtbwuKLWpNW08nmWBT7ilEUtNE+H3HF627Nj+5AQhJvP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"um\" title=\"\" src=\"/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/c08c5/um.jpg\" srcset=\"/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/0913d/um.jpg 160w,\n/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/cb69c/um.jpg 320w,\n/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/c08c5/um.jpg 640w,\n/static/f289e4b9b9b1c2f28a253dfe3ee0ed08/acb04/um.jpg 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Uh... there's a nice animation in there</small>\n</center>\n<p>There aren‚Äôt actually that many ways to implement this kind of animation. If you want to keep it lightweight, it comes down to roughly two approaches:</p>\n<blockquote>\n<ol>\n<li>Use SVG‚Äôs <code class=\"language-text\">clippath</code> or <code class=\"language-text\">mask</code></li>\n<li>Animate the <code class=\"language-text\">stroke-dasharray</code> and <code class=\"language-text\">stroke-offset</code> properties for each data point</li>\n</ol>\n</blockquote>\n<p>This is a fairly settled debate. The second approach ‚Äî animating <code class=\"language-text\">stroke-dasharray</code> and <code class=\"language-text\">stroke-offset</code> per data point ‚Äî means defining separate animations for each slice of the doughnut chart.</p>\n<p>But making the second data point‚Äôs animation start seamlessly right after the first one finishes is a pain. <del>(Since they‚Äôre separate animations, no matter how precisely you time them, there‚Äôs a good chance of some jankiness.)</del></p>\n<p>So I went with option 1: clip paths. At first I thought, ‚ÄúIt‚Äôs basically the same principle as drawing the chart, just apply it to a clip path, right?‚Äù Turns out, this path led straight to hell too.</p>\n<h3 id=\"cant-use-the-circle-element\" style=\"position:relative;\">Can‚Äôt Use the circle Element<a href=\"#cant-use-the-circle-element\" aria-label=\"cant use the circle element permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The road to hell started when I realized I couldn‚Äôt use the <code class=\"language-text\">circle</code> element. Since the animation renders a circle clockwise from a starting point, I naturally assumed <code class=\"language-text\">circle</code> would work. But on closer thought, the intermediate frames aren‚Äôt circles.</p>\n<p>The animation only becomes a full circle at the very end. During the animation, the intermediate shapes aren‚Äôt circles ‚Äî so <code class=\"language-text\">circle</code> can‚Äôt be used.</p>\n<p>You might ask whether <code class=\"language-text\">stroke-dasharray</code> and <code class=\"language-text\">stroke-offset</code> could work, but <code class=\"language-text\">clippath</code> masks the intersection of filled areas, so stroke-based properties can‚Äôt create a mask.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <img src=\"/3411be000f4591fc8094072520231528/pie.gif\" width=\"100%\">\n  </div>\n  <br>\n  <small>The animation progresses by rendering shapes like these one by one</small>\n</center>\n<p>The intermediate shapes during the animation can‚Äôt be defined as circles. A circle is defined as the set of points equidistant from a center, and those partially-eaten shapes don‚Äôt satisfy this definition.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/716a0371418c438cea6811c21c0d9d6f/84f4d/arc_render_animation.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 43.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVR42n2SfU+DMBDG+f5fyP+N29jUJRplMFj2PqZi5kAoLZTHXkvZZqaXXA7o0989veKgjYI3CHcCSSrR4P/ImMR8zxGscizeK+Ss7tacpt2dZgL9CUPPLzFdF5BSXoXtPmu4QYnepESfqtK7kxxvh+oX8MgxDBhGYYk7j2GTGEHTJsUxlxgoiDstMVI5bKvbPn+X8gxYmM4koE1Pcw67ZussrrSzc5iuoXG8/KhOwJcVx+0rw31oOo7DAoJXF0BvLTDwDYDqzbjowH31HsYCDuc1InUZ9MEuksPnBTlsLoDRvtI664xOZB3SPJcxg/MQFEpkZqczUva9AttEdDAL/KIZ+ieIzWE7x4xm+Djj2hF1JjF1Cnccsr5+y5uk1vqBf0qCxQfz6zilaLBWN+pvhJ5Bktado7+CnEZK66k9M9U8zXh3mh+/G6h59wwMaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc render animation\" title=\"\" src=\"/static/716a0371418c438cea6811c21c0d9d6f/6af66/arc_render_animation.png\" srcset=\"/static/716a0371418c438cea6811c21c0d9d6f/69538/arc_render_animation.png 160w,\n/static/716a0371418c438cea6811c21c0d9d6f/72799/arc_render_animation.png 320w,\n/static/716a0371418c438cea6811c21c0d9d6f/6af66/arc_render_animation.png 640w,\n/static/716a0371418c438cea6811c21c0d9d6f/d9199/arc_render_animation.png 960w,\n/static/716a0371418c438cea6811c21c0d9d6f/84f4d/arc_render_animation.png 1208w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>In the figure above, all points on the right shape‚Äôs edge are equidistant from the center, but the left shape‚Äôs edge points are not. The right shape satisfies the definition of ‚Äúa set of points equidistant from a center‚Äù and is therefore a <strong>circle</strong>, while the left shape represents a portion of the circumference ‚Äî an <strong>arc</strong>.</p>\n<p>It‚Äôs easy to confuse since we‚Äôre drawing arcs based on circles here, but an arc is defined as a portion of the circumference, not a portion of the circle itself. Since ellipses also have circumferences, arcs can take many different shapes.</p>\n<p>Since an arc isn‚Äôt a circle, the <code class=\"language-text\">circle</code> element can‚Äôt be used for this clip path animation.</p>\n<h3 id=\"understanding-how-svg-renders-arcs\" style=\"position:relative;\">Understanding How SVG Renders Arcs<a href=\"#understanding-how-svg-renders-arcs\" aria-label=\"understanding how svg renders arcs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>SVG doesn‚Äôt provide a dedicated element for arcs, but it offers the <code class=\"language-text\">A</code> command within the <code class=\"language-text\">path</code> element to define them.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\n  M 50 50\n  A 45 45, 0, 1, 0, 275 125\n  L 275 80 Z\n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This might look simple, but the rendering logic isn‚Äôt exactly intuitive. When people see an arc, they naturally think of it as part of a circle and instinctively think in terms of the central angle ‚Äî but as you can see from the interface above, there‚Äôs no angle parameter anywhere.</p>\n<p>SVG‚Äôs arc rendering does start with defining a circle on the coordinate plane. As discussed, an arc is a portion of a circumference, so you need a circle first.</p>\n<p>The circle is defined by the first parameters of the <code class=\"language-text\">A</code> command: <code class=\"language-text\">rx</code> and <code class=\"language-text\">ry</code>. The reason it takes x and y axis lengths instead of a single radius is that arcs are portions of circumferences ‚Äî not just circles, but potentially ellipses too.</p>\n<p>Since a circle is just a special case of an ellipse, the <code class=\"language-text\">A</code> command is designed with the abstract interface of taking x-axis and y-axis radii. But since all our examples use circles, I‚Äôll keep the explanations circle-based for simplicity.</p>\n<center>\n  <div style=\"max-width: 400px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3c5013d03ac4f509c0333f538f8322e0/d48f1/arc_render1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42pVUCXLDIAz0/5/ZaXPa8Y257C1LqsQm5KhmGDRIWq0EqEAiy7LERfHewxgDa23YbdR5lvqtpUBGGNS2LS6XC/quw8/xhK/9AX3fhbM62tbAWUAxaK1RliWmabqfWYdRm5sfbeKTgm4Y0qGqqiT7EgAtlDGb4Hmeo69SKs+QDszKPRUbEhyaNoDaB1DGCIEIKMamaTCOY7YvxnlU/QATSk+FDOu63jIkAOnnbi320IUe/pX8+CqwqayQ3vHmcuzugHYDsvbl7Usv3wBedaM7NHUJNXroyeG463Da9yHOQSuP3Tdt6nOGi1ewUw9r5rAcnJ3DCo9eO3i34LCvPmX4WsS365KSaWBj/wO2ls2lrJ+NZPkEWHxY3cOzkf97Pp9vmV6Bio07Y5xz+a9HhmnpMlXS6SJvVz7D02nDEpiVQ+KZyADJtajIlbIeX8MwRBZc1HnGfr8dXymo6GQhgNRzw2MN+Aut8ItFkjTV9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc render1\" title=\"\" src=\"/static/3c5013d03ac4f509c0333f538f8322e0/6af66/arc_render1.png\" srcset=\"/static/3c5013d03ac4f509c0333f538f8322e0/69538/arc_render1.png 160w,\n/static/3c5013d03ac4f509c0333f538f8322e0/72799/arc_render1.png 320w,\n/static/3c5013d03ac4f509c0333f538f8322e0/6af66/arc_render1.png 640w,\n/static/3c5013d03ac4f509c0333f538f8322e0/d48f1/arc_render1.png 796w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>The arc rendering process begins by drawing a virtual circle like this</small>\n  <br>\n</center>\n<p>An important detail: the arc‚Äôs starting point is not the circle‚Äôs center. Looking back at the <code class=\"language-text\">path</code> element example, there‚Äôs no parameter for the circle‚Äôs center point.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\n  M 50 50\n  A 45 45, 0, 1, 0, 275 125\n  L 275 80 Z\n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This command sequence starts with <code class=\"language-text\">M 50 50</code>, where the <code class=\"language-text\">M</code> command moves the render cursor to an arbitrary position (Move).</p>\n<p>But this position isn‚Äôt the circle‚Äôs center ‚Äî it‚Äôs the starting point where the arc begins drawing. The arc is drawn from coordinate <code class=\"language-text\">(50, 50)</code> to the <code class=\"language-text\">A</code> command‚Äôs final arguments <code class=\"language-text\">(dx, dy)</code>, following the virtual circumference defined by <code class=\"language-text\">rx, ry</code>.</p>\n<center>\n  <div style=\"max-width: 400px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/345642d6dabfe22074ecf24472c1a351/0fcea/arc_render2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 81.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsElEQVR42pWUa2+dMAyGz///Z5u0qdq+TLu166FQDpdArhDCeWfTJSsRbVVLEVHAT2y/Nidkdr1e09M5B2stLm2Lrhfw8wwtGxTFGWVVoSxLWGN2/qcjGIP6vodUChPthTIYydERvHi8R9GMWBZPa8G6hs0vrlMeodYawzDQh2s6c97DhwULHd0UDh9/D/hZETSE3H0P5PQYlkdsZ09rxkXO+HQ34stZ4cOtwt3jBaI5o760qOsaLZUmAQPd1nVdguwuImAlRnyrND7/UQSV+F47GGdQFrcQYth8pZT/gYrqZf4VOIdOVK/BzLi51xvs3E8I69M3DJkp+pRydBaCVKRaHRnX71dj8PXBQLqwu9QYvQUTz05xkwuxnUehrMKPB0EpBgQf0NYakyWFwxVK2i3lnShcv+di5LZMI5xWmN1KwnkYTSIZTy1Ffp1F2/THKXNfvde4M7jVUsoRyBFO0/RuYC5mUpmV4iiPVH7JuOZ5q+0am4GcwlvQ+G4cx5Tui7PMN/Isv2Xcfwx8dfSetxCvp+Ff0+DznkvDP448sleBsaYcAYP5GfcsQuyGo7L8BTt65ir/jmDOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc render2\" title=\"\" src=\"/static/345642d6dabfe22074ecf24472c1a351/6af66/arc_render2.png\" srcset=\"/static/345642d6dabfe22074ecf24472c1a351/69538/arc_render2.png 160w,\n/static/345642d6dabfe22074ecf24472c1a351/72799/arc_render2.png 320w,\n/static/345642d6dabfe22074ecf24472c1a351/6af66/arc_render2.png 640w,\n/static/345642d6dabfe22074ecf24472c1a351/0fcea/arc_render2.png 851w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>I've shown the arc as a filled area for clarity,<br>but only the arc's stroke from (x,y) to (dx,dy) is actually rendered</small>\n  <br>\n</center>\n<p>This is the basic principle of how SVG draws arcs. But the catch is that there‚Äôs more than one way to connect <code class=\"language-text\">(x, y)</code> and <code class=\"language-text\">(dx, dy)</code>. An arc simply connects two points along a circumference ‚Äî there‚Äôs no rule saying it has to go in a specific direction.</p>\n<p>So SVG uses two circles that can both place <code class=\"language-text\">(x, y)</code> and <code class=\"language-text\">(dx, dy)</code> on their circumferences.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1fa1f37669b1e0df075146506faacf30/2bef9/arc_with_circle.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 81.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOklEQVR42o2T226EMAxE+f9v3IduV4XtVtzD/eL2BBkFwkJHygPEM7bHTiAnmOfZnnEcpSgKMcZIXdf2lGVpv6dp2nACuUDf95JlmQzD4N21bWvvXNFTQQIhUOE7dF1nq/+XIK1VVXXVhBXUDoK9ZwARPHpGX55HMk/L2SVumua4QkSTJJYwjCR83KwwFeDlotf+nc7zmThPkLLxDF8AQQTjIf+p5AhMWznB2QCYIsGuV0p0kef5ygvUN4jqw95whIFW6gK/3aSrIMSj9dDKaZdYY6q1Sh2et9gEIqji64DGikv7fyEbyZJvuX/cJIqe8vN6bbZj4yGC/ooMHqEscnl83iVNU4nj2Bd0W9bVOHvXDGDfyeFbZmUIPgNt68vRBG8FdeOPWofI3VXCw5fCBCGyCnpIolO+EvwF0Kft1sSJ3SUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc with circle\" title=\"\" src=\"/static/1fa1f37669b1e0df075146506faacf30/6af66/arc_with_circle.png\" srcset=\"/static/1fa1f37669b1e0df075146506faacf30/69538/arc_with_circle.png 160w,\n/static/1fa1f37669b1e0df075146506faacf30/72799/arc_with_circle.png 320w,\n/static/1fa1f37669b1e0df075146506faacf30/6af66/arc_with_circle.png 640w,\n/static/1fa1f37669b1e0df075146506faacf30/d9199/arc_with_circle.png 960w,\n/static/1fa1f37669b1e0df075146506faacf30/2bef9/arc_with_circle.png 1024w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>There are exactly two circles that can place both (x, y) and (dx, dy) on their circumference</small>\n</center>\n<p>Using these two circles, there are four possible arcs that connect <code class=\"language-text\">(x, y)</code> and <code class=\"language-text\">(dx, dy)</code>. The ‚Äúlarge arc flag‚Äù and ‚Äúsweep flag‚Äù determine which arc gets drawn.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"understanding-the-arc-flags\" style=\"position:relative;\">Understanding the Arc Flags<a href=\"#understanding-the-arc-flags\" aria-label=\"understanding the arc flags permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A picture is worth a thousand words, so let‚Äôs draw some arcs to understand exactly what these flags do. As with the doughnut chart, I‚Äôll use a 100 √ó 100 viewbox for easy coordinate reasoning.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 100 100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\n    M 50 10\n    A 40 40, 0, 0, 0, 10 50<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>green<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transparent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<ol>\n<li>Move the render cursor to <code class=\"language-text\">(50, 10)</code>.</li>\n<li>Define a circle with radius 40 by setting both rx and ry to <code class=\"language-text\">40</code>.</li>\n<li>Set rotation to <code class=\"language-text\">0</code>, large arc flag to <code class=\"language-text\">0</code>, sweep flag to <code class=\"language-text\">0</code>.</li>\n<li>Draw an arc to the endpoint <code class=\"language-text\">(10, 50)</code>.</li>\n</ol>\n</blockquote>\n<p>With both the large arc flag and sweep flag set to <code class=\"language-text\">0</code>, SVG draws the smaller arc by default, in SVG‚Äôs default counterclockwise direction.</p>\n<p>The rotation parameter determines how much to tilt the reference circle, but since we‚Äôre using a circle (not an elongated ellipse), tilting has no effect.</p>\n<p>With these commands, we get a nice-looking arc:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 509px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a084d433d6987120384f775cc95cd1e5/71554/arc_0_0.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVR42u2VSwvCMBCE/f8/TKlePHip4ANUpFQbWpNN82hGEl+UFm3twYtDFpINfJmFgYwYY5BSgohqJUiE0qWGVbZx31acc4yEEPByzqFNF3VBwhNUrsInGWNeQDi/blDrLNZsjdlhhkWywJZtQ68X8OEwL3NE+wgbtoGpDPqo7vAOG+/GIE3Pnn+oy7gNoHcz2U3AFQ/nrpAGkIsbYHleYpWtvoY1HE73U5S2xBAFoJIKmcwwP87fxqcz0Ac3pRTxKR407hNIgkL+tNUYqtYc/oF/4C+ARVGEjdZ6cPmv5AobUiygbVTaNgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc 0 0\" title=\"\" src=\"/static/a084d433d6987120384f775cc95cd1e5/71554/arc_0_0.png\" srcset=\"/static/a084d433d6987120384f775cc95cd1e5/69538/arc_0_0.png 160w,\n/static/a084d433d6987120384f775cc95cd1e5/72799/arc_0_0.png 320w,\n/static/a084d433d6987120384f775cc95cd1e5/71554/arc_0_0.png 509w\" sizes=\"(max-width: 509px) 100vw, 509px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<h4 id=\"the-sweep-flag\" style=\"position:relative;\">The Sweep Flag<a href=\"#the-sweep-flag\" aria-label=\"the sweep flag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>There are only two flags for arcs, but the shape changes dramatically when either value flips. This can feel confusing if you don‚Äôt understand exactly how SVG draws arcs.</p>\n<p>But if you remember that SVG draws lines counterclockwise by default, it‚Äôs not that complicated.</p>\n<p>Let me redraw the arc from above in more detail:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/94400700b6bb656957fa15af90fe1e42/73b94/arc_0_0_example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVR42p1U7W6DMAzk/Z+nDzGtmir20apqpf6i7QT0CxICAW65aGYp7TppSCaJHTt3tpPofD5jsVggyzLw67pukL7v0batHynUcS32e/Ooqiqs12tst1torVEUBS6Xi5eyLJHnObLjEQcnYuMYzjlaa33QiKiUUqjr2p9AQ9M06Jyxdev47RVPkwmW8zkaZxNHG8zJ0vsQIQMSCRX8hGZpKican0WF3UuMTitYBnL7whSIP4NTF1FJyMYYr6AhdzS0C1aYDmnpchPkj0woglD8qfOUGYR5oILzI+nbGqrukevvZI+Sz30SgB/9byi37jRVG2gnpemRKVYZzqkbKIZV5yhpuqIcIlS1xllbpBc7ONoA3bhVhJXUwCPkjwGVS3py0jho5rFxgayvslRSJFwLbQE0tI3WLtFqh13yhPePJabTZyRJ4umEjR1WVgrINdvuinLp+9Cgs8ZXmw0udNr/Ujamdsp2cBLHR5R5uPhfURbIYwRyt+9RflhlKgS+NG34ONx7BGTfTR/+UDaDA+eyYZxD6h/elN/usjhQP16P6RPQTWNLwPB6jSlLEBnvBqSSCE+nkx/lLeQmWcv7F76VImmaYr/fD/6RnBRWWVrjr7Yhq81mg9lshjiOsVqt8AV3P83cpNmVpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc 0 0 example\" title=\"\" src=\"/static/94400700b6bb656957fa15af90fe1e42/6af66/arc_0_0_example.png\" srcset=\"/static/94400700b6bb656957fa15af90fe1e42/69538/arc_0_0_example.png 160w,\n/static/94400700b6bb656957fa15af90fe1e42/72799/arc_0_0_example.png 320w,\n/static/94400700b6bb656957fa15af90fe1e42/6af66/arc_0_0_example.png 640w,\n/static/94400700b6bb656957fa15af90fe1e42/d9199/arc_0_0_example.png 960w,\n/static/94400700b6bb656957fa15af90fe1e42/73b94/arc_0_0_example.png 1004w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The arc follows the virtual circumference defined by the command</small>\n</center>\n<p>The red dot is the starting point I set with the <code class=\"language-text\">M</code> command, and the yellow dot is the endpoint <code class=\"language-text\">(10, 50)</code> from the <code class=\"language-text\">A</code> command‚Äôs last arguments.</p>\n<p>The blue arrow shows the actual direction SVG renders the line. There‚Äôs only one way to draw a small arc from the start point to the endpoint in the counterclockwise direction. <del>(If this isn‚Äôt clear, try drawing it on paper.)</del></p>\n<p>What happens if we swap the start and endpoints? This time, I‚Äôll move the start to <code class=\"language-text\">(10, 50)</code> and set the endpoint to <code class=\"language-text\">(50, 10)</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-svg line-numbers\"><code class=\"language-svg\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 100 100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\n    M 10 50\n    A 40 40, 0, 0, 0, 50 10<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>green<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transparent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4a6a8910a7786f804c830459a4f05322/d74fe/arc_0_1_example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42n1UXW+DMAzk//+zvUxat5aNSZXWh3XaukL5CAQIXi7rRYayRbIAx7Hv7CPJOI7inBNrrfR9H57DMATDNwwx2rCnn9qfIBkPTtMkLABjEIosD2JfJ2R8QidRdl0XEjOARZhk6ce3jk9YHetwOMh2u5W2bWNyWN/jHa0Yow/7Oi4mBFVWBoqiKEIgzBgTgsuykof7O3l9fpTc78OH/aZpQsI8zyODQBmQSQFBWKQRKg9O0n0mx/cnf3CKlLGHheT0RYRw4B0JidaCpvcVZpRTY8VeBwBUVAVi67qOarihXFWVryS/weMguZmktk6qtpFBKYDqwAKIGWUtA/TNAcnQS96MYuwkpm+l7lr0YTZlogLlmJBUSQEIvRCk6CZpPDLTGSl9kTUdIp6sImWtIWt7MVUppzSTt+OXfJw+PTobB8Dh8Z0FZkNZ9sT4Bn/v95JlL7Lb7QJ9N7qbP0j/KRhKpKwTwolNiMER+SKJ7iH7j77HhKRBCoDvrn1do6n1x5g/KbPBDNaSWiKkHpHkX8qAT7RMqi8Q3j6cKmIpmzDltR7OfrurTGj8ZlGsGUKtL1Q9n89B+aCOQG3wgQH3+LxcLrFgsnbHLW/mv25snEOyNE1ls9l4qWXyA9Fw0bKuvd0DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc 0 1 example\" title=\"\" src=\"/static/4a6a8910a7786f804c830459a4f05322/6af66/arc_0_1_example.png\" srcset=\"/static/4a6a8910a7786f804c830459a4f05322/69538/arc_0_1_example.png 160w,\n/static/4a6a8910a7786f804c830459a4f05322/72799/arc_0_1_example.png 320w,\n/static/4a6a8910a7786f804c830459a4f05322/6af66/arc_0_1_example.png 640w,\n/static/4a6a8910a7786f804c830459a4f05322/d9199/arc_0_1_example.png 960w,\n/static/4a6a8910a7786f804c830459a4f05322/d74fe/arc_0_1_example.png 1164w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The arc follows a virtual circle on the opposite side</small>\n</center>\n<p>The arc is still drawn along a circle with the same radius, but this time it follows a different virtual circle on the opposite side.</p>\n<p>That‚Äôs because, just as before, there‚Äôs only one way to draw a small arc from this start point to this endpoint in the counterclockwise direction. If you tried to draw an arc along the first example‚Äôs circle while connecting these swapped points, it would go clockwise, not counterclockwise.</p>\n<p>This is the principle behind the sweep flag. Instead of swapping start and endpoints, you can simply change the drawing direction to define both arcs.</p>\n<h4 id=\"the-large-arc-flag\" style=\"position:relative;\">The Large Arc Flag<a href=\"#the-large-arc-flag\" aria-label=\"the large arc flag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The large arc flag selects whether to draw the smaller or larger arc connecting the start and endpoints. As we saw, SVG defines two virtual circles for arc rendering, which is what makes the concepts of ‚Äúsmall arc‚Äù and ‚Äúlarge arc‚Äù possible.</p>\n<p>We‚Äôve already seen the small arc, so let‚Äôs see what happens when we draw the large arc.</p>\n<p>If the sweep flag is <code class=\"language-text\">0</code> (counterclockwise), the small and large arcs look like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/762ad0bb83895985025acc4e8a438a41/d74fe/arc_1_0_example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACH0lEQVR42n1Uy47bMAzM//9Wr20PATYugj0UuXW7SeRYfsiSPOXQpqIYixogZMuj4QxJ+5BSQk4Z/S1icAnDI2LqksbgouwnpCiRIohlxBhf1nr/oGTXjMlHYFmQsyRYnhGGBH8lWA7l58Gc8wshn7keBpcRfAYgawiYxkl4FwUwJAvmccFwz7Kfy0FijMjwSug/VyW8LpcL3t7eMI7jSj5NGnMMojIizqI4rHt8X+MKIe0Kv9aRFpxzCmQMw4AwBXS+w49v39H8bOBapy74vu97Jbzf76UMSkhbOa8WCOJlNqY44zEHXI5H/D2eMHN/s7yWBEpuZTiw4CJWiz7PsxJqwQXgeo9OwHwXpcssDQ9SFYN4Yr33er9a/sylAZTddR0FoxW7oygzJSHMBWdBEl4UUSxPXcb4WOvIzVGIJiGisqVKxMN1N3lvqkZ1sRFyQwfaJVXRi3wva9xGwuzVM2eHSWiuimU2g9lCL7UQ++3HiO76C3d31e7ZrNm8mUqbQ1NYmlLXhNn8Y0D75zfe3884nZqXT8twdm+q2ZRi+QnaCKWzIlrHqE62J6Qa4hmc10JoNpbtO6Z8rjYSe5v1/Bnmv5Z1bDawHfhKoc0jSb60bISUbwU3UquVYWyoTZWNzdblXVMkW/23sTGxsGdLyutFYd1FZr3dbjr5tE5gHdyjA3tna9u2JeFh37n9H7h+3u/zHMmapsFRfh7n8xn/AEGl0P4EVf+IAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc 1 0 example\" title=\"\" src=\"/static/762ad0bb83895985025acc4e8a438a41/6af66/arc_1_0_example.png\" srcset=\"/static/762ad0bb83895985025acc4e8a438a41/69538/arc_1_0_example.png 160w,\n/static/762ad0bb83895985025acc4e8a438a41/72799/arc_1_0_example.png 320w,\n/static/762ad0bb83895985025acc4e8a438a41/6af66/arc_1_0_example.png 640w,\n/static/762ad0bb83895985025acc4e8a438a41/d9199/arc_1_0_example.png 960w,\n/static/762ad0bb83895985025acc4e8a438a41/d74fe/arc_1_0_example.png 1164w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The small and large arcs when the sweep flag is 0</small>\n</center>\n<p>If you draw it out yourself, you‚Äôll easily see that these are the only possible small and large arcs that can connect the start and endpoints counterclockwise on these two virtual circles.</p>\n<p>If you set the sweep flag to <code class=\"language-text\">1</code> to switch the drawing direction to clockwise, the arc follows the opposite virtual circle ‚Äî just as we saw in the sweep flag example.</p>\n<h3 id=\"finding-arc-endpoints-with-trigonometry\" style=\"position:relative;\">Finding Arc Endpoints with Trigonometry<a href=\"#finding-arc-endpoints-with-trigonometry\" aria-label=\"finding arc endpoints with trigonometry permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now that we understand how SVG draws arcs, it‚Äôs time to build the animation. The animation I wanted sweeps an arc‚Äôs central angle from <code class=\"language-text\">0¬∞</code> to <code class=\"language-text\">360¬∞</code>. So I just need to build it, right?</p>\n<center>\n.<br />\n.<br />\n.<br />\n</center>\n<center>\n<div style=\"max-width:300px\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f4617a9e1f692a7df11953b0a4b86f44/d7854/no.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABs2lpGpALaQbsY1//xAAbEAEBAAIDAQAAAAAAAAAAAAABAgASAwQFEf/aAAgBAQABBQImqLTWLKPO+vWpTNqwkOMrZz//xAAYEQACAwAAAAAAAAAAAAAAAAAAARARMf/aAAgBAwEBPwHShR//xAAXEQEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AWpr/8QAHxAAAgEDBQEAAAAAAAAAAAAAAAERAiFBEBIyYXFy/9oACAEBAAY/AppQqFup7RI/oTmHmDky1vBzi2n/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBBcZGh/9oACAEBAAE/IcpB03LYaGiUNZ5gCV2r5ChuKDSLb9sJVqBjAcRmA6K4/9oADAMBAAIAAwAAABBQ/wAD/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QbYuaj//EABgRAQEAAwAAAAAAAAAAAAAAAAEAEBEx/9oACAECAQE/EAC1uMf/xAAgEAEBAAIBAwUAAAAAAAAAAAABEQAhMUFhsRBRcYGh/9oACAEBAAE/EGfNgAVPb7yZYA6Wrp31k+cmyLEMcBcNgdyLzcp1cdaHSnbnneJWrtHjADmNbAah3cGBXqTRf30//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no\" title=\"\" src=\"/static/f4617a9e1f692a7df11953b0a4b86f44/d7854/no.jpg\" srcset=\"/static/f4617a9e1f692a7df11953b0a4b86f44/0913d/no.jpg 160w,\n/static/f4617a9e1f692a7df11953b0a4b86f44/cb69c/no.jpg 320w,\n/static/f4617a9e1f692a7df11953b0a4b86f44/d7854/no.jpg 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</div>\n<small>It's never that easy</small>\n<br>\n<br>\n</center>\n<p>All the arc examples I used above had central angles of 90¬∞ or 270¬∞. There‚Äôs a reason for that.</p>\n<p>Arcs are defined by specifying a start point and an endpoint. To draw an arc neatly along a circumference, both points must lie on that circumference. But when the angle is 90¬∞, 180¬∞, or 270¬∞, you can simply pick points on the X and Y axes without any calculation ‚Äî which is why all my examples conveniently used those angles.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aecd9ae0d9289225ee34ac1a9bfcd29c/73b94/coords_default.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVR42n1Ua4/aMBDk//+gSu23vnQfWglRpAOFRNBCaK5ABeRBYieZ7hjWZ46okaz4sTue2YdHp9MJs9kM+/0e/Lqu86Pve//Xedu2/nxoPrpcLojjGNvtFlVVIc9znM9nN4qiQLRY4DmKsFyt3FlZ5KjKHHWVy/rs7a21DnREVmVZomkadwMPjDH+xuVyiejTR2wE0MjZ6mCxObZ4zqwHoUr6OIYEJBNu8FNpNLZiTAcz/YFWlPR9h6efBt9TIPnbo7Ed1J/29B3RmZTruvax4FxZ8m/F0NhWXC2+rQ3ezXm5QWOsu4T+VOgkE5Vx4Aa/UC7P3DwIfte1DqRprnb86D8omcZh5jTrmmV/QY8r+xuJO8khQxe3ICkeICil9hZX2jE0tHkl1F1jSMCLlIxxge8fHHWua8dWmDVi3wqQEvJlU8lmnaYonr7i1/Y3Yqm9w+Hg5ChTDo3xQuoykjLKvnxGl8QoqUz2veSCdSj0a7kxFWAWunYOGYWdQyZJkiAS0D8vL6wz5EOSa8bwTSv9VzLBCRLk4K5TlIkCaJbDtcY37KjBLHODN6ikUGYYw/ARULuHOvSSBzqFIAtJ0Hg6xXw+d+fcD0tMO+1O8ttedrFiy4kDk7P+8B67dAN7AwwZK8OHwlbAIZldukZPoKBzwm66A+QmGR6PR/fXt5BGbi1PU853UubhW6ljt9shyzLvPwqzpuzCzGqshsqIqvhejsdjTCYTF+9/yYTH8+PR9EoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"coords default\" title=\"\" src=\"/static/aecd9ae0d9289225ee34ac1a9bfcd29c/6af66/coords_default.png\" srcset=\"/static/aecd9ae0d9289225ee34ac1a9bfcd29c/69538/coords_default.png 160w,\n/static/aecd9ae0d9289225ee34ac1a9bfcd29c/72799/coords_default.png 320w,\n/static/aecd9ae0d9289225ee34ac1a9bfcd29c/6af66/coords_default.png 640w,\n/static/aecd9ae0d9289225ee34ac1a9bfcd29c/d9199/coords_default.png 960w,\n/static/aecd9ae0d9289225ee34ac1a9bfcd29c/73b94/coords_default.png 1004w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The red points on the circumference are easy to compute mentally,<br>but the blue points are not...</small>\n</center>\n<p>But the clip path animation doesn‚Äôt teleport between 90¬∞, 180¬∞, 270¬∞, and 360¬∞ ‚Äî it moves smoothly. So I need to find the coordinates of countless blue points along the circumference as the animation progresses. How?</p>\n<blockquote>\n<p>The answer is <strong>trigonometry</strong>.</p>\n</blockquote>\n<h4 id=\"save-me-trigonometry\" style=\"position:relative;\">Save Me, Trigonometry!<a href=\"#save-me-trigonometry\" aria-label=\"save me trigonometry permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>As I mentioned, the most intuitive unit for thinking about arcs is degrees. So I envisioned a nice interface like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">ArcData</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// x-coordinate of the circle's center</span>\n  y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// y-coordinate of the circle's center</span>\n  radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Circle radius</span>\n  degree<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Angle to draw the arc from the origin</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">drawArc</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">,</span> degree <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ArcData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M blah A blah L Z</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Arc drawing commands, roughly</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2be3abdad9703847459d8b18dcb32f6e/27b7a/arc_func.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTElEQVR42oVV227bMAzN///VsKdhQNGuQLeHZF0wp3Xs+O5E8k1nPHJoyFnWCVAkkdQxeUgxm/1+j7ZtUdc1sizza9M0yPMcVVUte8p51r3aU6+6KIqwKcsSHNM0+emcW+Y4jouc+/Ac2nPlOB6P2BCdgmEY0Pe9v8S9tRbGGHRd5+VceaZcZaE9genxpigKjx56wAs04lk9UJ16rjZ65iAdK0D15BbkXsjc01uVLSGTVAVkSB8B3J7pIR1YecgfDuVLL+oFXXXe09FTjhWHChZm8H8eKsfdFXAJ2TnJci/cTaPfSxHJOrKWYET+VuV4rwpY4VhUcKNblU1/5XBOivyMk0Pa9Lj0I0ozIaod4sahsZLxAXiJ3/EjfpOPSmlNkl0nyRt6GJaQANVPj+h3W+TyQCRkAk74XfTIzhNeC4fHGHg+AgcBLg2wywp8+xXh58MFL58u+P75gmh3QW3lhQ0jDo8PaF93SPPio5AZkp4djHB8KhrYTDirpCqs83pRobCGTKAI69BaCeVK+qhTzyRfaKnNGVV3nstsYobnD6Z15bnM14DWF3aYwdsyoY48NeKRY1JE3sq9rJ1rOY7j+S0TnRdYi/fqMKxFep40lc8+5UldomP27z09bRD/6jb+7bKRiH0iWT1KIoyE7MKy0fYVeqZdJGxPCzj5FPvy6xdUz0/z3WFYty8NWXnSbqKtSnV69q8qSNxwBfwr5LBd3T497ZmL14G9Ngf/lg+Hg0dO0xQEP51OfpKKJEm8Eds79Zy6p01oz7+R7XaLP4J4F36YJAytAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"arc func\" title=\"\" src=\"/static/2be3abdad9703847459d8b18dcb32f6e/6af66/arc_func.png\" srcset=\"/static/2be3abdad9703847459d8b18dcb32f6e/69538/arc_func.png 160w,\n/static/2be3abdad9703847459d8b18dcb32f6e/72799/arc_func.png 320w,\n/static/2be3abdad9703847459d8b18dcb32f6e/6af66/arc_func.png 640w,\n/static/2be3abdad9703847459d8b18dcb32f6e/27b7a/arc_func.png 804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The product of happy-path thinking</small>\n</center>\n<p>To draw an arc using an arbitrary angle as I designed, I need to pick an arbitrary start point and then use the angle to compute the endpoint‚Äôs coordinates.</p>\n<p>The start point can be any point on the circumference. As I mentioned, SVG uses <code class=\"language-text\">(cx + r, cy)</code> as the starting point when rendering circles, so I‚Äôll use this same coordinate as the 0¬∞ reference.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c6251100be299d7bb20ac6580128e408/27b7a/0degree.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVR42o1Uy3LCMAzk//+pPXb6AZ0O00MP0NRJyItASl5G9Ro2CJNmqhkTWbKXXVvyarvdStM0cjgcpCxL/6Vf17Ucj0epqsrHMKfPNcgjjnkURbLCApi11o/z+TyNcRynOHzOkdPr8YUlSSIroCMwDIP0fe83wW/bVk6nk3Rd5+P4IsaBmF4P4DzPZQXaMDLAwGYsgk8Gmh3XAJBzWFEUN8kIkkkIEkrmAFPG7iQDAIwgUQOQJX09Z4xqJob4gfFcNBsCDDOAU87twV5YnmU3yfinUNKdZDs+HoEDtU5d6/bCUkhG/UByCOj90cqPi0dVIaaupHNsYCwrC8DYSLffi3VHl63XF8kEDM+ox9m43Edq5C3aSKMKunAD8zjdiXl+Ert+v0hGkjf2F2Ds2H3G37JLU0ndMMb4G4W/iRMxry8i0ZckRXmRDMClM5wkBp3EchmcDytxyyzsJcARnRSUkb7p1pWbv2XdKaz8ubIZl8rm2qZ/FvYcg6XC5tlPha17mQ/Ef1+bsPW8ZN3LTAKUbOYAdcvpxyFhYXORloQNfL7IHHOwYkyf40MvM6FvmXNuDlkzT4YZC7u/Njj+mUPH9APLuF4PH8BxHMsvU/McxsMEDsMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"0degree\" title=\"\" src=\"/static/c6251100be299d7bb20ac6580128e408/6af66/0degree.png\" srcset=\"/static/c6251100be299d7bb20ac6580128e408/69538/0degree.png 160w,\n/static/c6251100be299d7bb20ac6580128e408/72799/0degree.png 320w,\n/static/c6251100be299d7bb20ac6580128e408/6af66/0degree.png 640w,\n/static/c6251100be299d7bb20ac6580128e408/27b7a/0degree.png 804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Connecting the circle's center to this point creates the initial side at 0¬∞</small>\n</center>\n<p>With the initial side defined, I just need to find which point on the circumference lies at angle <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ∏</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span></span></span></span> from it.</p>\n<p>This is where trigonometry comes in. Using trig functions, we can easily find the coordinates where a line at a given angle from the initial side intersects the circumference. Let‚Äôs dust off the trigonometry we learned in school.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/93359637e4ee5965580fb27914c67df8/7321b/triangle.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADxUlEQVR42oWUy0tbWxTGz6CtSUx9nGOMMab2DbVw4fYf6LDiQOlAFBQ7sChaBFGhUAoZ6UwQtEp8omIEaYqP1CgRUlSCghhrrQbByk31ihiKQp10oF2/wznQ0kEHm7322t9ej2+ttZW9vb303d3dtO3tbW1ra8vOzvnk5OQ68uXlpXVsbOz2+Pj4HeTNzc1M1s7Ojn4PDnwikVCPj4/tSiwWyzANRiIR++rqqra2tqY7QcbIyMjIXZbItqWlpUzWysqKfg8OPPLy8vJ1ZWNjI1UUNpRi0MLOWTxakS8uLlJmZ2cdgUAgG5kseBiNRvV7A2fD8P7+vkXhksjwOj09rUfAGUfQIVGlLCwsOFnIpEp08/PzqWDBgSdTDCuGQFRZGGfnDDf9/f25paWl7oaGhoLGxsaHVVVVbp/P55JoHJvBYGZcsGbKUIYzBauEj1dJLYWd0IuKinLKyso8ExMT1r6+Pierq6vLXvrsWc77F8/vH7d578YikQxo4j3GxHiKQsWIcn193YGxg4MDrb6+Pt/r9eaenp6qRCrpuoPBYH4iEbV+/Xqetxj9/Orp0yeus7MzjbeseDyuR6sXhYUS0js6OpzFxcW58IVOdosYywkERrIfe/ctn/47f/8leTmrKIrN5xt10QXmeyLVUyZFQpbLK3BGahg3dFfD4Xea3z/ljP//Y+hcFPHDH2/FoNLc3Jwvx2u8Pzo6SpUOuKZQPeFJT0kql93S0vLP6OhoXigUcoXD4Rvsg+NvPB+W452x+Lfzj3un32O7Sb/X25D28uXrf7knA3lTMDg46FHEWPrAwIBDFK6hoaGM6urqB62trc7h4WHN1PX29t4KTIceTYnzubk5KdSMu7OzUwMLTgqm9vT03Ovu7s4m5XRSk3BV+Kitrb0pF5kipxo6m1Qyxz/lpw+t9GYymUxra2vTpHA3wBmdkXF4eGjTDZpjBJ/Cn94uGJKUNUChUMAFLZHIlj4AGCwpKfHQSswv76UgKsX5ow8B0IOFhYUOvFMomaAsMcj5ClWvqKhwcQ+Wt7/14a8Rmp8DvSepu2tqau60t7erk5OTuRRKUlQrKytvNTU1eZhpsOYoQg86hYMx7CrzyS6RppEyJJeXlzvr6uoeiIMCZBk9vYFxDtb8LBgQPWUUvzYmu9nscEUfLi4uOmgpes7kDKrAwrH5kfDz6KPHgdExPweA6JBJaWZmxi3fVx6yEZVqfijgjA8mC0cKHrBMGpBq/L5WyEcmKv5DM0JjIuxMh3FvAQ/vTNdfDQIiAuFMn/W/GfwJFPm1e/daHiUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"triangle\" title=\"\" src=\"/static/93359637e4ee5965580fb27914c67df8/6af66/triangle.png\" srcset=\"/static/93359637e4ee5965580fb27914c67df8/69538/triangle.png 160w,\n/static/93359637e4ee5965580fb27914c67df8/72799/triangle.png 320w,\n/static/93359637e4ee5965580fb27914c67df8/6af66/triangle.png 640w,\n/static/93359637e4ee5965580fb27914c67df8/d9199/triangle.png 960w,\n/static/93359637e4ee5965580fb27914c67df8/7321b/triangle.png 1184w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>This shows a circle with radius <code class=\"language-text\">1</code> on a coordinate plane. The <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>-axis serves as the initial side, and we measure angle <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ∏</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span></span></span></span> counterclockwise from it.</p>\n<p>The point <code class=\"language-text\">(x, y)</code> where the line at this angle meets the circumference is exactly what we want to find. Drawing a perpendicular line from this point down to the initial side creates a right triangle.</p>\n<p>Using trigonometric functions on this triangle, we can define the components <code class=\"language-text\">x</code> and <code class=\"language-text\">y</code> of point <code class=\"language-text\">(x, y)</code>:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>sin</mi><mo>‚Å°</mo><mi>Œ∏</mi><mo>=</mo><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>cos</mi><mo>‚Å°</mo><mi>Œ∏</mi><mo>=</mo><mi>x</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\sin{\\theta} = y \\\\\n\\cos{\\theta} = x \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3em;vertical-align:-1.25em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.75em;\"><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\">sin</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.25em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>This is high school material, but it had been so long that I had to look it up too. <del>(The memories of SOH-CAH-TOA came flooding back‚Ä¶)</del></p>\n<p>If this were a math exam, you‚Äôd need to solve it by hand using the angle <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ∏</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span></span></span></span> and trig ratios. But thankfully, JavaScript provides <code class=\"language-text\">Math.sin</code> and <code class=\"language-text\">Math.cos</code>, so we don‚Äôt have to compute them ourselves.</p>\n<p>One thing to be careful about, though, is the unit of angle <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ∏</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Œ∏</span></span></span></span></span>. When we think of angles, we naturally think in degrees like <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>90</mn><mi mathvariant=\"normal\">¬∞</mi></mrow><annotation encoding=\"application/x-tex\">90¬∞</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\">90¬∞</span></span></span></span></span>. But a value with the special unit ‚Äúdegrees‚Äù can‚Äôt be computed with regular numbers ‚Äî you can‚Äôt use degrees directly with trig functions.</p>\n<p>If that‚Äôs not clear, think about it this way: adding 10km and 6 doesn‚Äôt give you 16km. Similarly, 10km plus 6 miles isn‚Äôt 16km either. To perform arithmetic on physical quantities, both operands must have the same unit.</p>\n<p>Since trig functions are functions operating on numbers, they can‚Äôt work with values that carry a special unit. 90 is just 90, but ‚Äú90 degrees‚Äù can‚Äôt be fed into a trig function. So we need to convert degrees to radians ‚Äî a unit-free measure of angle.</p>\n<p>Radians might sound intimidating, but it‚Äôs just a different way of expressing the same thing: ‚Äúlet‚Äôs call 180¬∞ ‚Äô<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> radians.‚Äò‚Äù It‚Äôs like converting 1 Korean <em>geun</em> to 600 grams.</p>\n<p>Radians, like degrees, are a way of expressing angles. But since radians are defined using arc length and radius, they‚Äôre expressed as pure, unit-free numbers.</p>\n<center>\n  <div style=\"max-width: 300px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a34b977dc5fad2e1f8aa536c40cf7580/29f4e/1rad.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR42pWUya6CQBBF+///RT/AxJ1xZVCQ0YEFLpQEEYmKc5lbL2VanmLbSaWhrD7WcGlFhut2u/G+XC5pOBzS9Xp9G6dMYPf7nfcsyygIAt7H4/HzT34CCmyz2TDkcrnw+2q1YrjESJwyge33e7Jtm47H40v58/mcFovFi099gwEyGo1ot9u9+AXiui5n3+l0aLvdNmeI8gBDYB0mz3mek2VZz/JV01TRMwygDqtDPc97VqA+Bfm+zxL5BNP9aZrSdDr9D5SAyWRCSZI0wuqtQS9RlarDMLk4jo1hekVlWf4BZeTICtnpPlMgdInzShzoVxRF9OuS80VR8Hkln1QYhgxdr9csZAj2cDgYAyEtDEZBlO12m/U0GAyo2+1Sq9Xivaoqbvj5fKbT6cSG57rhokD/kJRyHIf6/T6LE5NCcyFm+FECgmAYFvor77ohDpqdzWZmtw1Wr9f7qkvWIX7ERGFya+iGhVLRDuz67fLOHmu3JOkSx0u8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1rad\" title=\"\" src=\"/static/a34b977dc5fad2e1f8aa536c40cf7580/29f4e/1rad.png\" srcset=\"/static/a34b977dc5fad2e1f8aa536c40cf7580/69538/1rad.png 160w,\n/static/a34b977dc5fad2e1f8aa536c40cf7580/72799/1rad.png 320w,\n/static/a34b977dc5fad2e1f8aa536c40cf7580/29f4e/1rad.png 506w\" sizes=\"(max-width: 506px) 100vw, 506px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>When the arc length equals the radius, the central angle is 1 radian</small>\n</center>\n<p>Knowing that 1 radian is the central angle where the arc length equals the radius makes everything else easier.</p>\n<p>We already know the full circumference is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span>. So how many arcs with a central angle of 1 radian do you need to complete a full circle?</p>\n<blockquote>\n<p>Exactly <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> of them. In other words, a full 360¬∞ equals <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> radians.</p>\n</blockquote>\n<p>Since an arc with a 1-radian central angle always has a length of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span> (the radius), you need <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> such arcs to cover the entire circumference, giving a total arc length of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span> and a central angle of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> radians.</p>\n<p>From here, you can easily infer that half a circle needs <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> arcs. A semicircle with a 180¬∞ central angle corresponds to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span> radians.</p>\n<p>So what about 90¬∞? That‚Äôs half of 180¬∞, so it‚Äôs <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>œÄ</mi><mn>2</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\pi}{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0404em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6954em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> radians. Generalizing this:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>m</mi><mrow><mi>r</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>n</mi><mi mathvariant=\"normal\">¬∞</mi></mrow><mrow><mn>180</mn><mi mathvariant=\"normal\">¬∞</mi></mrow></mfrac><mi>œÄ</mi></mrow><annotation encoding=\"application/x-tex\">m_{rad} = \\frac{n\\degree}{180\\degree} \\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">180¬∞</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"mord\">¬∞</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÄ</span></span></span></span></span></div>\n<p>This formula is simple enough to be a one-liner in code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> degree <span class=\"token operator\">=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> radian <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>degree <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Since radians express angle magnitude using only arc length and radius with no units attached, we can freely compute with other numbers. Using radians and trig functions, we can find the coordinates of any point on the circumference at any angle from the initial side.</p>\n<p>Putting all this together, we can write a function that generates the <code class=\"language-text\">path</code> element commands for drawing an arc:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Values needed to draw an arc</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ArcData</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  degree<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Find the coordinates of a point at n degrees from the initial side using trig</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getCoordsOnCircle</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">,</span> degree <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ArcData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> radian <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>degree <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    x<span class=\"token operator\">:</span> x <span class=\"token operator\">+</span> radius <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>radian<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token operator\">:</span> y <span class=\"token operator\">+</span> radius <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>radian<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_DEGREE</span> <span class=\"token operator\">=</span> <span class=\"token number\">359.9</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Draw an arc of degree(Œ∏) in the positive direction centered at (x, y)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getArc</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> ArcData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> startCoord <span class=\"token operator\">=</span> <span class=\"token function\">getCoordsOnCircle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>props<span class=\"token punctuation\">,</span> degree<span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> finishCoord <span class=\"token operator\">=</span> <span class=\"token function\">getCoordsOnCircle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">,</span> degree <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isLargeArc <span class=\"token operator\">=</span> degree <span class=\"token operator\">></span> <span class=\"token number\">180</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isEnd <span class=\"token operator\">=</span> degree <span class=\"token operator\">===</span> <span class=\"token constant\">MAX_DEGREE</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> d <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>startCoord<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>startCoord<span class=\"token punctuation\">.</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> A </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>radius<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>radius<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 0 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>isLargeArc<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>finishCoord<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n    finishCoord<span class=\"token punctuation\">.</span>y\n  <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> L </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>isEnd <span class=\"token operator\">?</span> <span class=\"token string\">'z'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>By passing values from <code class=\"language-text\">0</code> to <code class=\"language-text\">359.9</code> sequentially to the <code class=\"language-text\">getArc</code> function‚Äôs <code class=\"language-text\">degree</code> parameter, we can render all the arcs needed for the animation. <del>(I used <code class=\"language-text\">react-spring</code> for the implementation.)</del></p>\n<p>Note that the maximum angle is <code class=\"language-text\">359.9</code>, not <code class=\"language-text\">360</code>. When the central angle reaches 360¬∞, the start and endpoints have the same coordinates, causing SVG to render nothing. So I cap it at <code class=\"language-text\">359.9</code> and, when that value is reached, use the <code class=\"language-text\">Z</code> command to draw a line straight back to the start point.</p>\n<p>Of course, the closer the max value is to 360¬∞, the more circle-like the arc becomes. But at a certain point, the difference is imperceptible to the human eye, so this was good enough.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>You don‚Äôt have to build a doughnut chart from scratch like I did ‚Äî you could just use an existing chart library and call it a day. But since all I needed was a bar chart and a doughnut chart, I decided that bundling a heavy chart library just for these two wasn‚Äôt worth the trade-off. <del>(Admittedly, it took more time than expected.)</del></p>\n<p>Every now and then, working with 2D or 3D graphics requires mathematical concepts like trigonometry or linear algebra. Some people see math-heavy examples and think, ‚ÄúI‚Äôm bad at math, I can‚Äôt do this.‚Äù But I‚Äôm far from being good at math myself.</p>\n<p>When I took my college entrance exam, I didn‚Äôt study math at all ‚Äî I just filled in the same answer for every question on the answer sheet and fell asleep, earning a rank of 8 out of 9. The only people below me were probably others who did the exact same thing. If someone who completely gave up on studying math can understand this stuff, then most people can too with just a bit of thought.</p>\n<p>Sure, if you try to go deep into the theories and formulas, it‚Äôs endless and genuinely hard. In fact, you probably won‚Äôt understand most of it anyway. But the level of math needed to solve the kinds of problems we encounter when building real applications isn‚Äôt that difficult.</p>\n<p>Back in school, they taught trigonometry without ever explaining what real problems it could solve ‚Äî they just made us memorize formulas for exams. <del>(Even though I slept through every class, SOH-CAH-TOA somehow stuck‚Ä¶)</del></p>\n<p>But things are different now. We know exactly what problems these formulas can solve, and the person experiencing the problem is us. That makes the motivation far stronger than when we were studying purely for exams.</p>\n<p>That‚Äôs all for this post on how SVG doughnut charts work ‚Äî a trigonometric approach.</p>","fields":{"slug":"20201212-draw-arc-with-svg-clippath-en","path":"/2020/12/12/draw-arc-with-svg-clippath/en/","lang":"en"},"frontmatter":{"title":"How SVG Doughnut Charts Work ‚Äî A Trigonometric Approach","subTitle":"The elegant intersection of math and code: building doughnut charts with animation","date":"Dec 12, 2020","categories":["Programming","Graphics"],"tags":["SVG","Trigonometry","Chart","Doughnut Chart","SVG Arc"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/d803c/thumbnail.png","srcSet":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/d803c/thumbnail.png 320w,\n/static/bb2bd4c7e09988c47f89c5f8246cf8cb/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/fc5c5/thumbnail.webp 320w,\n/static/bb2bd4c7e09988c47f89c5f8246cf8cb/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/01fb2/thumbnail.png","srcSet":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/bb2bd4c7e09988c47f89c5f8246cf8cb/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"31728f7a-82cc-5845-9fd3-beaf700a2fd3","tableOfContents":"<ul>\n<li>\n<p><a href=\"#it-all-comes-down-to-abstraction\">It All Comes Down to Abstraction‚Ä¶</a></p>\n<ul>\n<li><a href=\"#building-components-that-guarantee-user-freedom\">Building Components That Guarantee User Freedom</a></li>\n<li><a href=\"#lets-build-a-text-component\">Let‚Äôs Build a Text Component</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#designing-through-incremental-abstraction\">Designing Through Incremental Abstraction</a></p>\n<ul>\n<li><a href=\"#mimicking-html-elements\">Mimicking HTML Elements</a></li>\n<li><a href=\"#adding-custom-properties\">Adding Custom Properties</a></li>\n<li><a href=\"#making-it-renderable-as-any-element\">Making It Renderable as Any Element</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#full-code-at-a-glance\">Full Code at a Glance</a></p>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing Thoughts</a></p>\n</li>\n</ul>","excerpt":"Recently, our team at Lubycon started a small project called lubycon-ui-kit together with mentees from a mentoring program. It‚Äôs still in its early stages with not much to show, but the goal is to build a UI library based on Korean typography that‚Äôs easy for domestic designers and developers to use.","html":"<p>Recently, our team at Lubycon started a small project called <a href=\"https://github.com/Lubycon/lubycon-ui-kit\" target=\"_blank\" rel=\"nofollow\">lubycon-ui-kit</a> together with mentees from a mentoring program. It‚Äôs still in its early stages with not much to show, but the goal is to build a UI library based on Korean typography that‚Äôs easy for domestic designers and developers to use.</p>\n<!-- more -->\n<p>Like many modern projects, this one was built by mixing React and TypeScript in the right proportions, sprinkling in a generous helping of <a href=\"https://storybook.js.org/\" target=\"_blank\" rel=\"nofollow\">Storybook</a>, and finishing it off with <a href=\"https://rollupjs.org/guide/en/\" target=\"_blank\" rel=\"nofollow\">Rollup</a>.</p>\n<p>Once a component is designed, the developers and designers get together for a review. If it passes, we immediately start development, deploy Storybook to a dev server, and do a final review ‚Äî a short iteration cycle. I want to share some of the struggles I had while typing the component interfaces for this UI kit.</p>\n<h2 id=\"it-all-comes-down-to-abstraction\" style=\"position:relative;\">It All Comes Down to Abstraction‚Ä¶<a href=\"#it-all-comes-down-to-abstraction\" aria-label=\"it all comes down to abstraction permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I personally believe the hardest part of building an open-source library project is the design. This includes module and component interfaces, encapsulation decisions about what to expose and what to hide from users, and more.</p>\n<p>On top of that, since this kind of project involves collaboration from the start rather than solo work, the team needs to align on design values.</p>\n<p>Honestly, I didn‚Äôt think too deeply about the design going in, because I was already using TDS (Toss Design System) for service development at work. I vaguely thought, ‚ÄúCan‚Äôt I just build something with a similar feel?‚Äù</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABny6XQRjxT//EABoQAAICAwAAAAAAAAAAAAAAAAECESEDMTP/2gAIAQEAAQUCaVUy4NHLyQ0d/wD/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQMSQf/aAAgBAwEBPwGZaXP/xAAXEQADAQAAAAAAAAAAAAAAAAAAAQNB/9oACAECAQE/AYvByP/EABgQAQADAQAAAAAAAAAAAAAAAAEAEHEh/9oACAEBAAY/AtnCjYlf/8QAGRABAQADAQAAAAAAAAAAAAAAAREAECFR/9oACAEBAAE/Ieoy+MFIzCoahChl1f/aAAwDAQACAAMAAAAQT8//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEDAQE/EAAEbOl//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxB1aG8b/8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITFBkaH/2gAIAQEAAT8QFJVqyK46jf6aAA4njvZYh0AvYKgmhAzSf//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tds\" title=\"\" src=\"/static/54696de7a7e6c8a6cf270e1286b33c24/c08c5/tds.jpg\" srcset=\"/static/54696de7a7e6c8a6cf270e1286b33c24/0913d/tds.jpg 160w,\n/static/54696de7a7e6c8a6cf270e1286b33c24/cb69c/tds.jpg 320w,\n/static/54696de7a7e6c8a6cf270e1286b33c24/c08c5/tds.jpg 640w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>This design system alone speeds up development tremendously</small>\n</center>\n<p>So in our first sync meeting with the designers, I was excitedly explaining things using TDS as an example, when I got this response:</p>\n<blockquote>\n<p>Um‚Ä¶ a design system and a UI kit are slightly different concepts.</p>\n</blockquote>\n<p>Here‚Äôs what that means: a design system is a concept infused with an organization‚Äôs brand and design philosophy. So TDS, which I use at work, embodies the various design philosophies that Toss as an organization stands for ‚Äî meaning it might not translate directly to other organizations.</p>\n<p>A UI kit, on the other hand, is as decoupled from such philosophies as possible, providing pure UI components.</p>\n<p>In other words, something like <a href=\"https://getbootstrap.com/\" target=\"_blank\" rel=\"nofollow\">Bootstrap</a> doesn‚Äôt carry a specific design philosophy ‚Äî it‚Äôs a collection of UI components you can assemble like LEGO blocks, making it a UI kit. When an organization like Google creates <a href=\"https://material.io/design/\" target=\"_blank\" rel=\"nofollow\">Material Design</a>, Airbnb creates its <a href=\"https://airbnb.design/tag/dls/\" target=\"_blank\" rel=\"nofollow\">Design Language System</a>, or Toss creates <a href=\"https://blog.toss.im/2019/04/18/tossteam/culture/toss-design-conference/\" target=\"_blank\" rel=\"nofollow\">TDS</a>, they‚Äôre embedding design philosophy into a UI kit to create a design system. <small>(UI kit is said to be the broader concept that encompasses design systems.)</small></p>\n<p>Since I was so accustomed to TDS‚Äôs interfaces from daily use at work, I‚Äôd vaguely assumed ‚ÄúI‚Äôll just build something with a similar feel.‚Äù But after hearing this, I revisited the design systems mentioned above and realized how deeply each organization‚Äôs design philosophy is embedded in them.</p>\n<p>Ultimately, a UI kit needs to guarantee enough flexibility for users to customize it to fit their organization‚Äôs design guidelines and coding conventions, which means abstraction requires even deeper thought than when building a design system.</p>\n<h3 id=\"building-components-that-guarantee-user-freedom\" style=\"position:relative;\">Building Components That Guarantee User Freedom<a href=\"#building-components-that-guarantee-user-freedom\" aria-label=\"building components that guarantee user freedom permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>After this conversation, the first thing the frontend developers discussed was: ‚ÄúHow much freedom should we guarantee users?‚Äù</p>\n<p>For example, imagine building a clickable component like <code class=\"language-text\">Button</code>. In HTML, there‚Äôs more than one way to express that an element is clickable:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>I'm a button<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Me too<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>input</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span><span class=\"token punctuation\">></span></span>Not a button but can be used like one<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Technically I'm a button too<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Of course, using <code class=\"language-text\">role=\"button\"</code> like the last example requires the developer to separately add <code class=\"language-text\">tabindex</code> for focusability, define <code class=\"language-text\">click</code> or <code class=\"language-text\">keydown</code> event handlers so the button activates on Enter or Space when focused ‚Äî otherwise it wouldn‚Äôt be considered a semantic button. That might seem odd, but the important point is that none of these are errors.</p>\n<p>A design system bound to a specific organization‚Äôs philosophy can simply create a rule like ‚Äúthe <code class=\"language-text\">Button</code> component must always render as a <code class=\"language-text\">button</code> element‚Äù ‚Äî as long as that design philosophy is shared within the team, it‚Äôs fine. But a UI kit should help with UI concerns while preserving the way users originally work with HTML, making this kind of consideration essential.</p>\n<p>After much deliberation, we decided to preserve HTML‚Äôs original usage as much as possible. And somehow, I ended up being the one to design the first component for this project.</p>\n<h3 id=\"lets-build-a-text-component\" style=\"position:relative;\">Let‚Äôs Build a Text Component<a href=\"#lets-build-a-text-component\" aria-label=\"lets build a text component permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The component I was assigned was the <code class=\"language-text\">Text</code> component. When defining a UI kit, the designers said we needed to define typography and color palette first as the system‚Äôs foundation, so naturally the component that expresses typography came first.</p>\n<p>Of course, the typography style data itself is also provided as SCSS, CSS variables, and JS modules, but having to import modules or write classes every time you use typography is quite tedious ‚Äî so providing a component is cleaner.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// Something like this</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">typography</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>h1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">I'm heading 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">typography</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">I'm content</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>And since you can use various elements like <code class=\"language-text\">span</code>, <code class=\"language-text\">p</code>, <code class=\"language-text\">div</code> to render text in HTML, the <code class=\"language-text\">Text</code> component should also have an abstract interface that allows rendering as different elements.</p>\n<p>In other words, the <code class=\"language-text\">Text</code> component should only concern itself with typography, and everything else should work exactly as if you were using a native <code class=\"language-text\">p</code> or <code class=\"language-text\">span</code> element.</p>\n<h2 id=\"designing-through-incremental-abstraction\" style=\"position:relative;\">Designing Through Incremental Abstraction<a href=\"#designing-through-incremental-abstraction\" aria-label=\"designing through incremental abstraction permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As mentioned, to guarantee user freedom we must not break the behavior of HTML elements within React. So the component‚Äôs properties should faithfully reproduce the attributes of the target element.</p>\n<p>Users should also be able to render whatever element they want ‚Äî <code class=\"language-text\">span</code>, <code class=\"language-text\">p</code>, <code class=\"language-text\">div</code>, etc. We could force users to only use <code class=\"language-text\">span</code> or <code class=\"language-text\">p</code>, but enforcing such rules goes beyond the concern of typography.</p>\n<p>Since we‚Äôre developing with TypeScript, and this library needs to provide types via <code class=\"language-text\">*.d.ts</code> files, the component‚Äôs property types should flexibly change based on the element the user wants to render, enabling proper IDE autocomplete and static type analysis.</p>\n<p>In this post, I‚Äôll walk through my abstraction process in three stages: mimicking HTML elements, adding custom properties, and allowing rendering as any element.</p>\n<h3 id=\"mimicking-html-elements\" style=\"position:relative;\">Mimicking HTML Elements<a href=\"#mimicking-html-elements\" aria-label=\"mimicking html elements permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The first design step is to mimic HTML elements directly. React provides an <code class=\"language-text\">HTMLAttributes</code> type for convenient access to element attribute types, so just this much lets you replicate an HTML element:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Props</span> <span class=\"token operator\">=</span> HTMLAttributes<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Text</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* ... */</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.24999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABpUlEQVR42qWSSVPbQBBG9UOQFwzWYm3IkseSxlpHsiIvMsRJgErlkFw4ceL/f2lLJFQqHAI5vOqunpo30z0j5axFzLZwyhvMwwbVpx84Pjxh9/UB7fdHiP0d4oyDxzkMK4KiLaDqrGe27NGXv2tSmN+B+w2u/BJ+cwsva7GKa1x5KWw3gWFzEgVEiJkRQO8gAYmnqt+hqH3eCZcsQ1F9BC+OCPkO4WqPKG7BkwOipEVI+Sq9Ia47TvWyvkXd3EOsv0BQXlA81TxWQXKojUXxGfnhG4Q40I1W0M0ImhHSrfgLZh9ntOa4KbxFgbmfw6f4KzftiFq2MljBDm7yAaVokIsNbaYWpg6GQx2DofYcX5AHGmRZxRkhD3rOZAUXlw4kTfOhh1sw0ZJwi7zYIM0a2E6I0bmJ8cT6i/NXGE9MTJU5JPVZGJTXqNd7ZHkDTfcwHM0wPgn/kdHYIKELSaHXYXwNlm6wrvaw7KBrqTv1/cKyE6Zp3c3hLaLXhVGJoNiBc9HP6X+FS14h3RxhWezNs/tT2D3KAq6fwGE5LumrTC7ez1T18BPzUXff/O3mNQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"html attrs\" title=\"\" src=\"/static/1425cce2ebe3ccbafd98dd47f519e8e6/6af66/html_attrs.png\" srcset=\"/static/1425cce2ebe3ccbafd98dd47f519e8e6/69538/html_attrs.png 160w,\n/static/1425cce2ebe3ccbafd98dd47f519e8e6/72799/html_attrs.png 320w,\n/static/1425cce2ebe3ccbafd98dd47f519e8e6/6af66/html_attrs.png 640w,\n/static/1425cce2ebe3ccbafd98dd47f519e8e6/d9199/html_attrs.png 960w,\n/static/1425cce2ebe3ccbafd98dd47f519e8e6/d56e1/html_attrs.png 1130w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Even just this gives you nice autocomplete</small>\n</center>\n<p>But this type won‚Äôt work as-is. <code class=\"language-text\">HTMLAttributes</code> only contains React‚Äôs basic HTML attributes ‚Äî it doesn‚Äôt include <code class=\"language-text\">ref</code> or <code class=\"language-text\">key</code>.</p>\n<p>You could use React‚Äôs <code class=\"language-text\">DetailedHTMLProps</code> type to include <code class=\"language-text\">ref</code> in the properties, but that only declares the type ‚Äî it doesn‚Äôt actually make the component pass <code class=\"language-text\">ref</code> through. It‚Äôs purely a type declaration.</p>\n<p>This is well documented in React‚Äôs official docs under Forwarding Refs:</p>\n<blockquote>\n<p>refs will not get passed through. <strong>That‚Äôs because ref is not a prop.</strong> Like key, it‚Äôs handled differently by React.</p>\n<p><strong>Forwarding Refs</strong> - <em><a href=\"https://reactjs.org/docs/forwarding-refs.html#forwarding-refs-in-higher-order-components\" target=\"_blank\" rel=\"nofollow\">reactjs.org</a></em></p>\n</blockquote>\n<p>To truly replicate how HTML elements work in React, you need to implement the ability to receive <code class=\"language-text\">ref</code> from a parent component and pass it to a child ‚Äî and that‚Äôs what the <code class=\"language-text\">forwardRef</code> function is for.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> Text <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span>\n  props<span class=\"token operator\">:</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  ref<span class=\"token operator\">:</span> Ref<span class=\"token operator\">&lt;</span>HTMLSpanElement<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">forwardRef</code> function passes <code class=\"language-text\">props</code> and <code class=\"language-text\">ref</code> to its callback. Since the forwarded <code class=\"language-text\">ref</code> comes as a separate argument, <code class=\"language-text\">props</code> naturally excludes <code class=\"language-text\">ref</code>.</p>\n<p>Conveniently, React provides the <code class=\"language-text\">ComponentPropsWithoutRef</code> type that types all component properties minus <code class=\"language-text\">ref</code>, so developers don‚Äôt need to manually use the <code class=\"language-text\">Omit</code> utility type to remove the <code class=\"language-text\">ref</code> key.</p>\n<h3 id=\"adding-custom-properties\" style=\"position:relative;\">Adding Custom Properties<a href=\"#adding-custom-properties\" aria-label=\"adding custom properties permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>At this point, the <code class=\"language-text\">Text</code> component has the same functionality as a <code class=\"language-text\">span</code> element. This pattern of using <code class=\"language-text\">forwardRef</code> to pass everything from a parent to a child is a common technique also used when creating Higher-Order Components (HOCs). <small><del>(In fact, that‚Äôs where it‚Äôs used more often.)</del></small></p>\n<p>But the <code class=\"language-text\">Text</code> component needs to accept not just <code class=\"language-text\">span</code> element attributes, but also custom typography-related properties from our UI kit. As it stands, it‚Äôs just a plain <code class=\"language-text\">span</code>. So we need to add custom property types to the <code class=\"language-text\">span</code> element attribute types.</p>\n<p>Since TypeScript provides intersection (<code class=\"language-text\">&amp;</code>) types, this seems straightforward:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Text <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> typography<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">,</span>\n  ref<span class=\"token operator\">:</span> Ref<span class=\"token operator\">&lt;</span>HTMLSpanElement<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Intersection types merge two different types, so this bundles my <code class=\"language-text\">typography</code> property with <code class=\"language-text\">span</code> element attributes into the <code class=\"language-text\">TextProps</code> type.</p>\n<p>But there‚Äôs a problem with this approach: it can‚Äôt handle cases where a custom property has the same key as a property from <code class=\"language-text\">ComponentPropsWithoutRef&lt;'span'></code>.</p>\n<p>Let me illustrate with an example. If I add a <code class=\"language-text\">customId</code> property to my custom props, it infers correctly as declared:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  customId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVR42l2OyU6EUBBF+RgnHvMkM3SjSCOIaJC2o3GtGzf+f44POvbCxcm9t+pWUooQMaqI0MwcP6xxvRuc4Igns+1XK8suiBts55jDZIftVehmgeve4bj1qkobjcR+gxs2tNM7236i7l5o2pluOFBUA/mmZ9fNPIxv5NE9WdkzTh/kUh1ryyY7UKYzW6nK9e0TZjFg7V+xvr/Qfj4Jnvey8IgvP1q+PFejlbOrkAst4VKy+EVVI5Oz6IQizBRVTxBWhu6WK5r0Qk/RjBTxn6VrJCe/3up/85Rf/RqGJ2pYMcQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"o\" title=\"\" src=\"/static/1b2d749ba284a65bbbc99d320d58cd84/6af66/o.png\" srcset=\"/static/1b2d749ba284a65bbbc99d320d58cd84/69538/o.png 160w,\n/static/1b2d749ba284a65bbbc99d320d58cd84/72799/o.png 320w,\n/static/1b2d749ba284a65bbbc99d320d58cd84/6af66/o.png 640w,\n/static/1b2d749ba284a65bbbc99d320d58cd84/3d4b6/o.png 712w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Inference works perfectly ‚Äî satisfying</small>\n</center>\n<p>But if I add <code class=\"language-text\">id</code> ‚Äî which already exists inside <code class=\"language-text\">ComponentPropsWithoutRef&lt;'span'></code> ‚Äî the two intersected types collide, and my declared <code class=\"language-text\">id</code> property gets unexpectedly inferred as <code class=\"language-text\">undefined</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42lVSyXajMBD0t0wW24h9FwLMJjBmsSGxM8l7k8P8/z/UNMppDvVEC3VVV3fvmCXwqoU4aBxJNqBsFkTijCjuEHg9eLgg9EdoeoY9S3DQhTo1I/0PB8bhJmfsHHqYeC2sfEJWjOBZj0reEEQNwriFIJEsH5GXI2JBInEDnnZEspFzHDfQ956KMpwaO9s5Iec9jEDiVA2o6gmyvcHyTkQgESYNDDuF6WTQTaGItvh57xMCdT69+vj17EB3KuwMevjCQrLNoYkFurgq7OMJLB7higFFNVIrrqhJqKgmVW3TLihIfLs7X+4UX2H7kipkKRq3hwgmpOWMqltRtStKsn2Zf6Pt3zCMD1wIXf+uIM8rpusnLtMD/XDHMH0oN6bbECFZ4x71y5W4rZ94PP5gWb7w+PhWqpIENlIvrCipVQRbXDYzRN6rOzco8XLwfyxbdg5jaywTCLIromIBL1eImpLaN+rnivQ0UvIFcXqmoUhESUfDopi2Ic0HhLyD4xWw/A47zzyhShcE1YJ4/ouo+YaZ3XEMZ/jJRFW+U5/uqOU72f4iogm2VxNBo+BS3xy/gWkXJDjT2hCzTQosqRHlLUKyZtBuHlkMRhPd1mKbrKYnate2WKf/GxhN3bAyuovxRNPmQuIfEJ0zdUJD/0MAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"x\" title=\"\" src=\"/static/c9307aeb70ad34301279d568ff3762a8/6af66/x.png\" srcset=\"/static/c9307aeb70ad34301279d568ff3762a8/69538/x.png 160w,\n/static/c9307aeb70ad34301279d568ff3762a8/72799/x.png 320w,\n/static/c9307aeb70ad34301279d568ff3762a8/6af66/x.png 640w,\n/static/c9307aeb70ad34301279d568ff3762a8/6029f/x.png 906w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>The confused compiler</small>\n</center>\n<p>The compiler gets confused because intersection types in TypeScript aren‚Äôt inheritance with overriding. From the compiler‚Äôs perspective, it can‚Äôt determine which <code class=\"language-text\">id</code> is correct ‚Äî the one from custom properties or the one inside <code class=\"language-text\">ComponentPropsWithoutRef&lt;'span'></code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token constant\">A</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token constant\">B</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Both have id...</span>\n<span class=\"token comment\">// Which one is correct?</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Result</span> <span class=\"token operator\">=</span> <span class=\"token constant\">A</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This issue also occurs with interfaces using <code class=\"language-text\">extends</code> for inheritance. Trying to override a property that exists on the parent produces an ‚ÄúInterface ‚Äô*‚Äô incorrectly extends‚Ä¶‚Äù compile error.</p>\n<p>When we merge objects using JavaScript‚Äôs <code class=\"language-text\">Object.assign</code>, if both the first and second objects have the same property, the first object‚Äôs property is implicitly overridden by the second:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Implicitly overridden by the second object's property</span>\n<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>But TypeScript is a statically typed language that favors explicit declarations, so it never allows such implicit overriding.</p>\n<p>To merge types this way, you first need to use the <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys\" target=\"_blank\" rel=\"nofollow\">Omit</a> utility type to remove the properties you want to override, then merge. But doing this every time with <code class=\"language-text\">Omit</code> is tedious, so it‚Äôs better to create a merge utility type:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Combine<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token operator\">&amp;</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">K</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">Combine</code> takes two generic types, removes all properties from <code class=\"language-text\">K</code> that overlap with <code class=\"language-text\">T</code>, then merges them with an intersection. In effect, if a key declared in <code class=\"language-text\">T</code> also exists in <code class=\"language-text\">K</code>, <code class=\"language-text\">T</code>‚Äôs version wins.</p>\n<p>Now we use <code class=\"language-text\">Combine</code> to merge our custom properties with <code class=\"language-text\">span</code> element attributes to declare the final <code class=\"language-text\">Text</code> component properties.</p>\n<p>Even if a developer‚Äôs custom property happens to overlap with a <code class=\"language-text\">span</code> attribute, <code class=\"language-text\">Combine</code> handles the override automatically, so developers can declare properties as usual without extra concern:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps</span> <span class=\"token operator\">=</span> Combine<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"making-it-renderable-as-any-element\" style=\"position:relative;\">Making It Renderable as Any Element<a href=\"#making-it-renderable-as-any-element\" aria-label=\"making it renderable as any element permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The <code class=\"language-text\">Text</code> component now flexibly includes both custom properties and HTML element attributes, but there‚Äôs one more layer of abstraction left.</p>\n<p>So far, the <code class=\"language-text\">Text</code> component can only render as a <code class=\"language-text\">span</code>. But as we‚Äôve discussed repeatedly, there‚Äôs no law saying you must use <code class=\"language-text\">span</code> for text content in HTML, so we need to abstract one more level to allow the render target element to be freely changed.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">// Renders as p, typed with p element attributes</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>a<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">// Renders as a, typed with a element attributes</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>The common approach is providing an <code class=\"language-text\">as</code> prop that accepts an element tag name and renders accordingly. I went with the same approach. <small><del>(Basically copied Bootstrap.)</del></small></p>\n<p>In previous abstractions, the render target was guaranteed to be <code class=\"language-text\">span</code>, so we just needed to merge types correctly. Now that the target could be anything, we need to accept it flexibly via a generic type.</p>\n<p>Let‚Äôs look at the <code class=\"language-text\">Text</code> component‚Äôs property type again:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps</span> <span class=\"token operator\">=</span> Combine<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token string\">'span'</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>I want this type to accept not just <code class=\"language-text\">span</code> but various elements, so I need to turn the <code class=\"language-text\">'span'</code> in <code class=\"language-text\">ComponentPropsWithoutRef&lt;'span'></code> into a type variable like <code class=\"language-text\">ComponentPropsWithoutRef&lt;T></code>.</p>\n<p>In other words, once we receive an HTML element name via the <code class=\"language-text\">as</code> prop, we find the matching element attribute type and merge it into the <code class=\"language-text\">Text</code> component‚Äôs properties using <code class=\"language-text\">Combine</code>.</p>\n<h4 id=\"breaking-down-generics-and-type-inference\" style=\"position:relative;\">Breaking Down Generics and Type Inference<a href=\"#breaking-down-generics-and-type-inference\" aria-label=\"breaking down generics and type inference permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Let‚Äôs think about how to type this according to the design. It‚Äôs best to start from the outermost layer ‚Äî the <code class=\"language-text\">Text</code> component‚Äôs properties that receive the generic type <code class=\"language-text\">T</code> directly from the user:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Text component's custom properties</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextBaseProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">as</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Props&lt;T> passes T directly to ComponentPropsWithoutRef&lt;T>.</span>\n<span class=\"token comment\">// It also binds T to the as property inside custom props.</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n  Combine<span class=\"token operator\">&lt;</span>TextBaseProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n.<br />\n.<br />\n.<br />\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNUlEQVR42k1Q2U7DMBDMp0BbkjbOacfxkctJSGkljqIiUSH+/zeGTSIBD6uZ2R2Pvfb2pkeQWESpW4olLaJ8RJQNa2/GpENMyBbdk6dDGDcLHlgF3xfwA4FdUMALq0cYPqKxr5DuHWb8QN1cYPor7PkL1XSDPt2If6OePlG7K9R4hezfUHQvkMMFglCRbrtneJNyOJojdNrB6jOUGMADDhFKiEiBH2bU4Ix4WILvBXENGRuUtJlMK0hCm9XoqbxW9+AZNVSPkjcUSFW0kJyMeQVTEs8tzWq0diSfQ03flIQFdncM/ibGwybClvj2nsEzFJSnFoIOq6KhAAfXPtFr6QIKr8yw4Kzn/tCd0NYTNPnCPW2SVWAHCp+Dtwk8QeZ1HQVBq/xW+MeX2TJfcdHROiv+n2EaP2hjxDu+cW7LAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"generic error\" title=\"\" src=\"/static/3823464654cd20a44beec2c98e1f9580/6af66/generic_error.png\" srcset=\"/static/3823464654cd20a44beec2c98e1f9580/69538/generic_error.png 160w,\n/static/3823464654cd20a44beec2c98e1f9580/72799/generic_error.png 320w,\n/static/3823464654cd20a44beec2c98e1f9580/6af66/generic_error.png 640w,\n/static/3823464654cd20a44beec2c98e1f9580/d9199/generic_error.png 960w,\n/static/3823464654cd20a44beec2c98e1f9580/21b4d/generic_error.png 1280w,\n/static/3823464654cd20a44beec2c98e1f9580/081ff/generic_error.png 2182w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Wrong answer!</small>\n</center>\n<p>In my optimistic mental model this seemed fine ‚Äî why does it fail? After all, everything uses the same type variable <code class=\"language-text\">T</code> and just passes it along.</p>\n<p>The reason is that <code class=\"language-text\">ComponentPropsWithoutRef</code> restricts its generic to <code class=\"language-text\">ElementType</code>. Since my type places no constraints on the type variable <code class=\"language-text\">T</code>, passing it directly to <code class=\"language-text\">ComponentPropsWithoutRef</code> causes a compiler error.</p>\n<p>So if we want to safely pass type variable <code class=\"language-text\">T</code> to <code class=\"language-text\">ComponentPropsWithoutRef</code>, we need to constrain it to <code class=\"language-text\">ElementType</code> from the very point where the <code class=\"language-text\">Text</code> function receives its generic:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextBaseProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">as</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n  Combine<span class=\"token operator\">&lt;</span>TextBaseProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Text</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Seeing that the <code class=\"language-text\">Text</code> component takes a generic type, you might think you‚Äôd need awkward syntax like <code class=\"language-text\">&lt;Text&lt;'span'> /></code> ‚Äî but that‚Äôs not the case.</p>\n<p>That‚Äôs because this generic type <code class=\"language-text\">T</code> can be inferred. Looking at the example above, the type variable <code class=\"language-text\">T</code> that <code class=\"language-text\">Text</code> receives flows through <code class=\"language-text\">TextProps&lt;T></code> to <code class=\"language-text\">TextBaseProps&lt;T></code> and gets bound directly to <code class=\"language-text\">as</code>.</p>\n<p>All these type variables are guaranteed to be the same:</p>\n<hr>\n<ol>\n<li><code class=\"language-text\">T</code> in <code class=\"language-text\">Text&lt;T></code></li>\n<li><code class=\"language-text\">T</code> in <code class=\"language-text\">TextProps&lt;T></code></li>\n<li><code class=\"language-text\">T</code> in <code class=\"language-text\">TextBaseProps&lt;T></code></li>\n<li><code class=\"language-text\">T</code> bound to the <code class=\"language-text\">as</code> property</li>\n<li><code class=\"language-text\">T</code> in <code class=\"language-text\">ComponentPropsWithoutRef&lt;T></code></li>\n</ol>\n<hr>\n<p>This means that if just <em>one</em> of these points makes the type of <code class=\"language-text\">T</code> clear, the rest can be inferred naturally.</p>\n<p>Using TypeScript‚Äôs type inference, if we assign <code class=\"language-text\">'span'</code> as the default for <code class=\"language-text\">T</code>, or if a value like <code class=\"language-text\">'span'</code> is passed to the <code class=\"language-text\">as</code> prop, the remaining <code class=\"language-text\">T</code>s are automatically filled in with the same type:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Text</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType <span class=\"token operator\">=</span> <span class=\"token string\">'span'</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> Props<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">&lt;</span>Text <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token comment\">// -> T is inferred as span</span>\n<span class=\"token operator\">&lt;</span>Text <span class=\"token keyword\">as</span><span class=\"token operator\">=</span><span class=\"token string\">\"p\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token comment\">// -> T is inferred as p</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now that we understand the type inference flow, let‚Äôs type this properly.</p>\n<h4 id=\"abstracting-the-code-classlanguage-textascode-prop-typing\" style=\"position:relative;\">Abstracting the <code class=\"language-text\">as</code> Prop Typing<a href=\"#abstracting-the-code-classlanguage-textascode-prop-typing\" aria-label=\"abstracting the code classlanguage textascode prop typing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">as</code> prop pattern ‚Äî rendering as any desired element ‚Äî isn‚Äôt unique to <code class=\"language-text\">Text</code>. Components with abstract concerns like a <code class=\"language-text\">Grid</code> layout component would all need this capability.</p>\n<p>But if every developer had to manually add <code class=\"language-text\">as</code> to their props and think through generic inference relationships each time, it would be quite painful.</p>\n<p>So we need to abstract this part as much as possible so that other components can easily add the <code class=\"language-text\">as</code> prop. Something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Text component properties</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextBaseProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// OverridableProps automatically includes the as prop for type inference</span>\n<span class=\"token comment\">// and types HTML element attributes based on T!</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> OverridableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> TextBaseProps<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">OverridableProps</code> abstracts only the part where a component receives an HTML element name via <code class=\"language-text\">as</code> and internally finds and binds the corresponding element attribute types.</p>\n<p>With this abstraction, other developers don‚Äôt need to think about using <code class=\"language-text\">ComponentPropsWithoutRef</code>, constraining <code class=\"language-text\">T</code> to <code class=\"language-text\">ElementType</code> in <code class=\"language-text\">Combine</code>, or other tedious details ‚Äî they can just add the <code class=\"language-text\">as</code> prop quickly and easily. <small>(‚Ä¶he said, optimistically.)</small></p>\n<p>Now let‚Äôs refine what we built earlier to create <code class=\"language-text\">OverridableProps</code>.</p>\n<p>The <code class=\"language-text\">Combine&lt;T, K></code> utility type we created earlier has no constraints on its generics, but <code class=\"language-text\">ComponentPropsWithoutRef&lt;T></code> ‚Äî representing the HTML element attributes we need to merge ‚Äî restricts its generic to <code class=\"language-text\">ElementType</code>.</p>\n<p>So first, we need to bridge this gap:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">CombineElementProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Combine<span class=\"token operator\">&lt;</span>\n  <span class=\"token constant\">K</span><span class=\"token punctuation\">,</span>\n  ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Hide the existence of ComponentPropsWithoutRef</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType <span class=\"token operator\">=</span> <span class=\"token string\">'span'</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n  CombineElementProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> TextBaseProps<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">CombineElementProps</code> constrains one of the two types being merged to represent an HTML element, then passes it directly to <code class=\"language-text\">ComponentPropsWithoutRef</code>, preventing type mismatch errors.</p>\n<p>By defaulting the <code class=\"language-text\">K</code> type variable to <code class=\"language-text\">unknown</code>, we ensure that users of this utility type must provide the component‚Äôs properties for <code class=\"language-text\">K</code>.</p>\n<p>For the same reason, <code class=\"language-text\">TextProps</code> ‚Äî which passes generics to <code class=\"language-text\">CombineElementProps</code> ‚Äî must also constrain its type to <code class=\"language-text\">ElementType</code>. Then we use <code class=\"language-text\">CombineElementProps</code> to define <code class=\"language-text\">OverridableProps</code>, which adds the <code class=\"language-text\">as</code> prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">OverridableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">as</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> CombineElementProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The as prop with generic type inference is now included.</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> OverridableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> TextBaseProps<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now with <code class=\"language-text\">OverridableProps</code>, you just pass the desired <code class=\"language-text\">ElementType</code> and your component‚Äôs custom properties to conveniently create a type with the <code class=\"language-text\">as</code> prop.</p>\n<h2 id=\"full-code-at-a-glance\" style=\"position:relative;\">Full Code at a Glance<a href=\"#full-code-at-a-glance\" aria-label=\"full code at a glance permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since it‚Äôs hard to follow the full picture when code and explanations alternate, here‚Äôs the complete code in one place:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Combine<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token operator\">&amp;</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">K</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">CombineElementProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Combine<span class=\"token operator\">&lt;</span>\n  <span class=\"token constant\">K</span><span class=\"token punctuation\">,</span>\n  ComponentPropsWithoutRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">OverridableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">as</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> CombineElementProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">TextBaseProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> OverridableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> TextBaseProps<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Text</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> ElementType <span class=\"token operator\">=</span> <span class=\"token string\">'span'</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> typography <span class=\"token operator\">=</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">as</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> TextProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  ref<span class=\"token operator\">:</span> Ref<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token keyword\">as</span> <span class=\"token operator\">??</span> <span class=\"token string\">'span'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> Component <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Component\n      ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// Typography class rendering logic here</span>\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span>Text<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">typeof</span> Text<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing Thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>When I was first ‚Äúchosen‚Äù to develop the <code class=\"language-text\">Text</code> component, I honestly didn‚Äôt take it too seriously. It‚Äôs just one component without any grand functionality ‚Äî I figured it‚Äôd be quick. Turns out the typing was tougher than expected.</p>\n<p>I use TypeScript in both my day job and personal projects, but I rarely have to write deeply nested generic types with layered inference like this. Usually I‚Äôd just ask Google, somehow solve it, and forget about it.</p>\n<p>One thing I learned through this struggle is that <code class=\"language-text\">@types/react</code> isn‚Äôt actually that hard to read. It‚Äôs worth browsing through when you have some time.</p>\n<p>The <code class=\"language-text\">ComponentPropsWithoutRef</code> type I used heavily has an internal chain of 4-5 type references. Just tracing through those referenced types reveals plenty of useful types for everyday work:</p>\n<blockquote>\n<p><code class=\"language-text\">ComponentPropsWithoutRef&lt;T></code> > <code class=\"language-text\">PropsWithoutRef&lt;T></code> > <code class=\"language-text\">ComponentProps&lt;T></code> > <code class=\"language-text\">JSX.IntrinsicElements[T]</code> > ‚Ä¶(and a few more)</p>\n</blockquote>\n<p>The file is around 3,000 lines, which might feel daunting, but if you follow the type reference chain like I did, you‚Äôll find the number of core types isn‚Äôt actually that large. Plus, types like <code class=\"language-text\">IntrinsicElements</code> ‚Äî which hold HTML element names as keys ‚Äî take up a significant chunk of those lines.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 523px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVR42p1U13LiMADM/3/jgbvc5N5N2ezKXOYejhCiGY0woNU2+eNyuWDfd2xNizoxGPMCU2FhoxhtVaPvB9R1g6quUfF5nBZ8Nz7+At5uN5TWIogidKVFZzI0BOj6HtfrFT8dDnDbNvewcvWDAEmaoiTYn9MZnu/D2gpZljuGbwFqDYIQhoB5WTrwtu1wOnsEP6FpWwzjiGmanrL+knylZG0wJkVHRgO9bOmbWLddh45znme39sMA7fsWUENsPM9HQ7AmoWyukrnvx+b7/f4LyWGEhCwt2UlyFMfOv5Df26p6H1Ab5WHBpEMm3rBOQRi6cGSJ5A5O8gsPtSrNhF3s8xIjJQ/0S78piJFBLMviaqTnl6FoTDRdbAp5VxRI4sSFJCABPAviZW0SY1jy6ugkPwv06KN9s9jr6him8rAoEZNh2x4eytu6adyUly9rI5OzPGeiGeaM95lXT1L3x4H6n2QvPFRTV/U5w4eHR20OyQrozE6ePc+lqlB0Q96ULA8DSs5QsjYR3zi5wuEB8rZ69FD9vj8pugNc/wGUbyYx7s0Tkq089Omfx4P0CpO3Yj/Oq7tF8v2/Hmp6ZJETcMlKdGQpkJTgGb8f+pGpRy750JQs+Oj2yOdt278APwHFyiI78x0EuwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"typesafe actions\" title=\"\" src=\"/static/39be8850618810d1ad5bd7e3d45ddd2d/3e286/typesafe-actions.png\" srcset=\"/static/39be8850618810d1ad5bd7e3d45ddd2d/69538/typesafe-actions.png 160w,\n/static/39be8850618810d1ad5bd7e3d45ddd2d/72799/typesafe-actions.png 320w,\n/static/39be8850618810d1ad5bd7e3d45ddd2d/3e286/typesafe-actions.png 523w\" sizes=\"(max-width: 523px) 100vw, 523px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Honestly, compared to <a href=\"https://github.com/piotrwitek/typesafe-actions/blob/master/src/type-helpers.ts\" target=\"_blank\">typesafe-actions</a>, React's type readability is quite generous.<br>That place is pure chaos...</small>\n</center>\n<p>That wraps up this post on designing extensible components with TypeScript.</p>","fields":{"slug":"20201128-making-your-components-extensible-with-typescript-en","path":"/2020/11/28/making-your-components-extensible-with-typescript/en/","lang":"en"},"frontmatter":{"title":"Designing Extensible Components with TypeScript","subTitle":"Flexible React component design using generics and type inference","date":"Nov 28, 2020","categories":["Programming","Architecture","JavaScript"],"tags":["React","TypeScript","Generic Type"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/471db2e1aa1eff1dab0d1d6d36e45405/3a812/thumbnail.jpg","srcSet":"/static/471db2e1aa1eff1dab0d1d6d36e45405/3a812/thumbnail.jpg 320w,\n/static/471db2e1aa1eff1dab0d1d6d36e45405/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/471db2e1aa1eff1dab0d1d6d36e45405/fc5c5/thumbnail.webp 320w,\n/static/471db2e1aa1eff1dab0d1d6d36e45405/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/471db2e1aa1eff1dab0d1d6d36e45405/2d839/thumbnail.jpg","srcSet":"/static/471db2e1aa1eff1dab0d1d6d36e45405/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/471db2e1aa1eff1dab0d1d6d36e45405/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"5fe4e9e4-20ba-58ae-a60e-80388c5437a2","tableOfContents":"<ul>\n<li>\n<p><a href=\"#we-are-employed\">We Are Employed</a></p>\n<ul>\n<li><a href=\"#why-do-developers-pursue-good-design\">Why Do Developers Pursue Good Design?</a></li>\n<li><a href=\"#were-not-the-old-man-whittling-a-bat\">We‚Äôre Not the Old Man Whittling a Bat</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#finding-the-balance-between-business-and-good-design\">Finding the Balance Between Business and Good Design</a></p>\n</li>\n<li>\n<p><a href=\"#is-this-really-worth-designing-well\">Is This Really Worth Designing Well?</a></p>\n<ul>\n<li><a href=\"#when-speed-matters-more-than-solid-design\">When Speed Matters More Than Solid Design</a></li>\n<li><a href=\"#sometimes-you-build-features-meant-to-be-deleted\">Sometimes You Build Features Meant to Be Deleted</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about a topic that‚Äôs both distant and close to developers: business. Developers are people who constantly agonize over good architecture and robust applications. But the best architectural choice isn‚Äôt always the right choice ‚Äî because we‚Äôre hired to make money using programming.","html":"<p>In this post, I want to talk about a topic that‚Äôs both distant and close to developers: business. Developers are people who constantly agonize over good architecture and robust applications. But the best architectural choice isn‚Äôt always the right choice ‚Äî because we‚Äôre hired to make money using programming.</p>\n<!-- more -->\n<p>When developers talk about ‚Äúgood design,‚Äù you‚Äôll hear plenty about TDD, DDD, SOLID, open-for-extension architectures, pure functions, and other technical topics. But far fewer talk about business. When you consider that developers aren‚Äôt people who simply program, but people who do business through programming, that seems a bit odd.</p>\n<h2 id=\"we-are-employed\" style=\"position:relative;\">We Are Employed<a href=\"#we-are-employed\" aria-label=\"we are employed permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Some developers work as freelancers, but most of us ‚Äî myself included ‚Äî are employed by a company. So why does a company hire developers?</p>\n<p>Obviously, to make money using your programming skills. As everyone knows, a company is fundamentally a profit-seeking organization, so the salary they pay you is an investment. If a company pays you $50,000 a year, they naturally expect you to generate at least that much ‚Äî or more ‚Äî in value.</p>\n<p>In other words, a developer isn‚Äôt just someone who needs to be good at programming. A developer needs to be someone who can generate money through programming.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/eea4a/money.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAaGJnKKMj//EABoQAQEAAgMAAAAAAAAAAAAAAAECAxIEMTP/2gAIAQEAAQUCUnHVVqZROR5ZLdjr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRABAAIBBQEAAAAAAAAAAAAAAQACMQMQESFBkf/aAAgBAQAGPwJV4gJZtTLt17manyE//8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERMSFBof/aAAgBAQABPyGQwlqFuhihaaM0zafQ0noWus4f/9oADAMBAAIAAwAAABDTP//EABcRAAMBAAAAAAAAAAAAAAAAAAARIVH/2gAIAQMBAT8QaJh//8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8QGf/EAB4QAQACAQQDAAAAAAAAAAAAAAEAESExQWFxUYHB/9oACAEBAAE/EHRvrrHXMZgoAlFmWnOGmbMFwn3mVarAeBn04hh3NcjUUx2s9z//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"money\" title=\"\" src=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/c08c5/money.jpg\" srcset=\"/static/3d398f9d4ae6fd2c9152ec66398c531d/0913d/money.jpg 160w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/cb69c/money.jpg 320w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/c08c5/money.jpg 640w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/6a068/money.jpg 960w,\n/static/3d398f9d4ae6fd2c9152ec66398c531d/eea4a/money.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The reason companies hire developers is ultimately to generate revenue</small>\n</center>\n<p>If we compare the IT industry to traditional manufacturing, developers and designers are the craftspeople who make things. The only difference is that what we produce has shifted from physical goods to software. And a craftsperson isn‚Äôt just responsible for product quality ‚Äî they must simultaneously care about real user satisfaction, the company‚Äôs business requirements, and much more.</p>\n<p>In other words, a profit-seeking organization doesn‚Äôt just need someone who‚Äôs good at programming. It needs someone who can use programming to satisfy users and generate the revenue that follows.</p>\n<p>That‚Äôs why many organizations look for more than just programming skills when hiring good craftspeople. They also look for smooth collaboration with stakeholders, leadership, business insight, understanding of user experience, and various other skills needed for effective product development.</p>\n<p>Moreover, things like collaboration skills and UX understanding may not generate immediate revenue, but in the long run they significantly impact the company‚Äôs brand and culture, and can ultimately transform how the organization works and performs. Serious organizations don‚Äôt neglect these factors.</p>\n<p>In short, a developer isn‚Äôt just someone who programs ‚Äî they‚Äôre one of many team members racing to make their organization‚Äôs product succeed in the market. That‚Äôs why developers shouldn‚Äôt focus solely on programming, but should develop a broad perspective that encompasses the organization‚Äôs business challenges as well.</p>\n<h3 id=\"why-do-developers-pursue-good-design\" style=\"position:relative;\">Why Do Developers Pursue Good Design?<a href=\"#why-do-developers-pursue-good-design\" aria-label=\"why do developers pursue good design permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When you work as a developer, you can‚Äôt help wanting to invest the time for good architecture ‚Äî it‚Äôs your baby, after all.</p>\n<p>Developers know from experience that cutting corners on design today creates debt that boomerangs back eventually. The classic example is the ‚Äúlegacy code‚Äù meme that‚Äôs ubiquitous among developers.</p>\n<p>Code with poor readability and unclear control flow harbors countless potential bugs. Sometimes bugs occur but slip past tracking tools due to weird exception handling. Poorly designed code can create major pain points for users, and in severe cases, ruin critical user moments and drive them away.</p>\n<p>What‚Äôs worse, if you keep piling features on top of bad design without improving it, the bad design only grows. Development isn‚Äôt about wiping the slate clean for every new feature ‚Äî it‚Äôs about building on top of what already exists.</p>\n<p>Once design goes off the rails, even a small change can trigger bugs in unexpected places. Developers become increasingly cautious, and the organization‚Äôs development velocity gradually slows. Eventually, you might want to add a new feature but literally can‚Äôt because the architecture won‚Äôt allow it.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 327px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 156.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAL/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAP/2gAMAwEAAhADEAAAAW75jrwIlshSJkXJ/wD/xAAcEAEAAgIDAQAAAAAAAAAAAAABAgMAERASIRP/2gAIAQEAAQUCELd6k+r8c96ZKlUjvhsnuDIyNTI//8QAGREBAQADAQAAAAAAAAAAAAAAAQACERIT/9oACAEDAQE/ATBbzZ3dF//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPwGqxH//xAAcEAACAgMBAQAAAAAAAAAAAAAAARAREiFhUbH/2gAIAQEABj8CdmeNrsP05D2jUNZHwuz/xAAcEAEBAQACAwEAAAAAAAAAAAABEQAhMUFRoWH/2gAIAQEAAT8h/QjrUDqopcqMC+Dczb2995JV7aaO2aw7zFE8fdx7+aSrtN3ictyxEXxN/9oADAMBAAIAAwAAABCg6v7/xAAcEQACAgIDAAAAAAAAAAAAAAAAAREhMUFxkfD/2gAIAQMBAT8QyFcjS4IUpd6HNb90f//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPxBA3TimGrf/xAAfEAEAAwACAgMBAAAAAAAAAAABABEhMUFRYXGR8MH/2gAIAQEAAT8QRByImI31BIZqwejD1cuig+CYAcqNfxzE3a7V7+pXywwZQ9B3PcRqsKJqDjnmV5/z5iyo6hhb3VzaSDln5Mgt+N2Naz//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no\" title=\"\" src=\"/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg\" srcset=\"/static/4ae506992fda7327aecbb04a40446576/0913d/no.jpg 160w,\n/static/4ae506992fda7327aecbb04a40446576/cb69c/no.jpg 320w,\n/static/4ae506992fda7327aecbb04a40446576/cafdf/no.jpg 327w\" sizes=\"(max-width: 327px) 100vw, 327px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>How I feel looking at code I wrote a year ago...</small>\n</center>\n<p>Ultimately, developers pursue good design to maintain high code quality, preserve development velocity, and prevent unpredictable bugs. But as I said earlier, a good craftsperson doesn‚Äôt just focus on programming ‚Äî they need a broad perspective that encompasses business too. Developers are, after all, the people who build products and deliver them to users.</p>\n<p>Reframing through a user-centric lens: the reason developers pursue good design is to maintain rapid development velocity so users consistently receive improved products quickly, and to prevent mysterious bugs from giving users bad experiences.</p>\n<blockquote>\n<p>In other words, good design is for the sake of <strong>good user experience</strong>.</p>\n</blockquote>\n<p>But think about it ‚Äî good design isn‚Äôt the only thing developers can do for user experience. Good design is just one of many approaches to delivering great experiences. A good developer should be able to choose the option that delivers the maximum benefit at the minimum cost given the current situation.</p>\n<h3 id=\"were-not-the-old-man-whittling-a-bat\" style=\"position:relative;\">We‚Äôre Not the Old Man Whittling a Bat<a href=\"#were-not-the-old-man-whittling-a-bat\" aria-label=\"were not the old man whittling a bat permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In Korean culture, there‚Äôs a well-known essay called ‚ÄúThe Old Man Whittling a Bat‚Äù that‚Äôs often cited when discussing craftsmanship. It appears in middle school textbooks, so most Koreans have read it at least once.</p>\n<p>The full story is quite long, but here‚Äôs the gist:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAG8d2KrhNLQIR//xAAbEAEBAAIDAQAAAAAAAAAAAAABAgADEBESIf/aAAgBAQABBQJVdfuWKfMtU9UZWxmq+YvH/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEQAhESIWFR/9oACAEBAAY/AnodWL5D8Fi+Fman/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSFhgf/aAAgBAQABPyEo6C9yXlQmCIF8fY5N/EQZDgjpLYnZIlawn//aAAwDAQACAAMAAAAQj8gD/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQMBAT8QY//EABYRAAMAAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxAKP//EAB0QAQACAgMBAQAAAAAAAAAAAAEAESExQWGBkbH/2gAIAQEAAT8QrLumiDErcm2DO/I1A5DBhhBKW7nX2/JgJuBTYfkoGDsK4l8srsa5iTi3pqErNva3P//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"batman\" title=\"\" src=\"/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg\" srcset=\"/static/cd2e52ab949020fabea93b1cb50994d7/0913d/batman.jpg 160w,\n/static/cd2e52ab949020fabea93b1cb50994d7/cb69c/batman.jpg 320w,\n/static/cd2e52ab949020fabea93b1cb50994d7/066f9/batman.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p><em>One day, a man passing through town tries to buy a laundry bat from an old craftsman carving them by the roadside. But the old man quotes a steep price‚Ä¶</em></p>\n<p><strong>Customer:</strong> ‚ÄúCould you give me a discount?‚Äù</p>\n<p><strong>Old man:</strong> ‚ÄúHaggling over one bat? Just go buy one somewhere else.‚Äù</p>\n<p><strong>Customer:</strong> ‚ÄúFine, I‚Äôll pay full price. Just make sure it‚Äôs well made.‚Äù</p>\n<p><em>The customer watches the old man work, growing increasingly impatient. It looks done to him, but the old man keeps whittling. Time is running out‚Ä¶</em></p>\n<p><strong>Customer:</strong> ‚ÄúIt looks finished. Can I just have it?‚Äù</p>\n<p><strong>Old man:</strong> ‚ÄúRice has to boil until it‚Äôs done. Raw rice doesn‚Äôt become cooked just because you rush it.‚Äù</p>\n<p><strong>Customer:</strong> ‚ÄúThe buyer says it‚Äôs fine! I‚Äôm going to miss my bus‚Ä¶‚Äù</p>\n<p><strong>Old man:</strong> ‚ÄúThen go buy one somewhere else.‚Äù</p>\n<p><strong>Customer:</strong> ‚ÄúSigh‚Ä¶ fine, take your time.‚Äù</p>\n<p><strong>Old man:</strong> ‚ÄúThe more you rush me, the longer it takes. Just wait.‚Äù</p>\n<p><em>The customer misses his bus and his mood is ruined. The old man doesn‚Äôt care about customers at all ‚Äî no wonder his business is struggling.</em></p>\n<p><em>‚Ä¶But later, upon closer inspection, the quality of the bat turns out to be extraordinary.</em></p>\n</blockquote>\n<p>The story ends with the protagonist wanting to go back and apologize to the old man for failing to appreciate his deeper purpose.</p>\n<p>The moral, in a word, is ‚Äúrespect for craftsmanship,‚Äù and it‚Äôs frequently cited as an example of the mindset makers should have.</p>\n<p>The old man in the story takes immense pride in his whittling skills. He‚Äôs probably been doing this for a long time, which means he has clear convictions about his craft. Developers who‚Äôve been in the industry for a long time aren‚Äôt much different in that regard.</p>\n<p>But there‚Äôs one crucial difference between this heartwarming story and reality. The old man never intended to sell to anyone who didn‚Äôt share his values. That‚Äôs essentially the same as a developer telling users, ‚ÄúI need to take my time and build a proper architecture, so if you don‚Äôt like it, use a different app‚Äù ‚Äî while users are complaining, ‚ÄúWhy is this app so slow to update?‚Äù</p>\n<p>Viewed this way, the old man doesn‚Äôt seem so professional after all. Wouldn‚Äôt a true professional find a way to deliver the best possible quality within the timeframe the customer needs ‚Äî satisfying both the customer and themselves?</p>\n<p>The protagonist in the story watches the old man work and thinks, ‚ÄúIt looks done ‚Äî why does he keep going?‚Äù If the old man represents the developer, then the protagonist represents the users.</p>\n<p>And unlike this patient protagonist, real users won‚Äôt wait around the moment they think ‚Äúsomething‚Äôs off.‚Äù They won‚Äôt marvel at the quality of your carefully designed product either. The moment users sense something is wrong, they‚Äôll abandon your product and switch to another.</p>\n<h2 id=\"finding-the-balance-between-business-and-good-design\" style=\"position:relative;\">Finding the Balance Between Business and Good Design<a href=\"#finding-the-balance-between-business-and-good-design\" aria-label=\"finding the balance between business and good design permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As I‚Äôve discussed, developers need to consider business factors while simultaneously thinking about good application architecture. But many developers invest heavily in studying technical approaches to good design while giving surprisingly little thought to business.</p>\n<p>The developer community‚Äôs idea of a ‚Äúgood developer‚Äù often centers on someone who‚Äôs great at programming, or at most, someone who can uplift other developers. So we study paradigms like functional programming, various design patterns and guidelines, and work hard to apply them in practice.</p>\n<p>But in my view, one of the conditions for being a truly effective developer is having all of that <em>plus</em> business insight. And beyond that, having a range of soft skills too. As I‚Äôve said multiple times, a developer isn‚Äôt someone who sits isolated with a computer doing nothing but programming.</p>\n<p>The ‚Äúgood design‚Äù I‚Äôm really talking about isn‚Äôt simply abstracting duplicate logic or using extensible patterns. Depending on the situation, copy-pasting existing code might be good design. In an urgent situation, shipping something that barely works ‚Äî design be damned ‚Äî might be good design.</p>\n<h2 id=\"is-this-really-worth-designing-well\" style=\"position:relative;\">Is This Really Worth Designing Well?<a href=\"#is-this-really-worth-designing-well\" aria-label=\"is this really worth designing well permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>When designing an application, the first question you should ask is <strong>‚ÄúIs this really worth investing in design?‚Äù</strong> Once you determine it is, that‚Äôs when you start thinking seriously about proper architecture.</p>\n<p>Solid application design generally pays off in the long term rather than the short term. If the time you invest in design is more likely to <em>not</em> pay off in the future, then it might be better to just rough it out and ship the feature fast. Business is always about Cost vs. Benefit.</p>\n<p>You might wonder what costs are involved in just ‚Äúthinking about design,‚Äù but they‚Äôre real. Your salaries, server costs, office rent ‚Äî money flows out of the company‚Äôs bank account every single day, even when nothing is happening.</p>\n<p>Labor costs in particular are something many people overlook, and they add up surprisingly fast. Go ahead and calculate ‚Äúmy daily pay √ó team size‚Äù right now. A team of just 5 people each earning <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>50</mn><mi>K</mi><mi mathvariant=\"normal\">/</mi><mi>y</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>g</mi><mi>h</mi><mi>l</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">50K/year costs roughly </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">50</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">ye</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">rcos</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">sro</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ug</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span>1,000 per day.</p>\n<p>If building one feature takes 5 days, the company spends roughly ‚Äú$5,000 + Œ±‚Äù on development costs. The ‚Äúplus alpha‚Äù includes office rent, server costs, and so on.</p>\n<p>And if deploying that feature actually <em>decreases</em> a critical conversion rate, the losses grow even bigger. That‚Äôs the risk a company takes when developing a product. Plus, if you‚Äôre running an A/B test, the feature you‚Äôre building right now might be deleted within a week.</p>\n<p>In situations like these, always spending time on design isn‚Äôt necessarily the right answer. We need to ask ‚Äúis this really worth designing well?‚Äù <em>before</em> asking ‚Äúhow should I design this?‚Äù</p>\n<h3 id=\"when-speed-matters-more-than-solid-design\" style=\"position:relative;\">When Speed Matters More Than Solid Design<a href=\"#when-speed-matters-more-than-solid-design\" aria-label=\"when speed matters more than solid design permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In practice, every developer encounters situations where they need to build something fast. The reason might be a client‚Äôs demand, a fresh startup that needs to find market fit quickly, or a company that‚Äôs genuinely running out of money ‚Äî but what matters isn‚Äôt the reason, it‚Äôs that the product needs to ship fast.</p>\n<p>In these situations, developers face a dilemma: invest time in solid design, or build something rough and ship it immediately.</p>\n<p>Of course, as your skills grow, you develop an intuition <del>(forged through years of trial and error)</del> that raises the quality floor even when you‚Äôre cutting corners. But less experienced developers might produce genuinely hard-to-follow code.</p>\n<p>As I mentioned, developers can clearly see the parts that will become tech debt if not designed properly now. From a long-term perspective, if design keeps getting neglected, the application‚Äôs complexity grows exponentially, and eventually you can‚Äôt add features even when you want to.</p>\n<p>Having thought this far, the developer makes a decision:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvUlEQVR42m2Sy27TUBCGTbsAVix5CXa8QRX6DJXYIlW8AIgNG6SUqkVIqKgIumBVCbFIEUKC9AYtadImqdNc2iZ1rk0dO7F9fGzHPj7H9mGaqFJBjHwZyefzP/PPCGrbUDtIbupirqRpA855tVrdz6SLhYIoFtPbifWPj4823lb2fyRf3RMXhbW5+81623UcGyNhIGNNxoZq57NiEDCAPc/r9ZQwoJAPSiuFeaH0enJvbrL0ZqL+4cbOC+HkcJvzcOgYgqFaFrLc4bBWq9XrUhAEfBSM0YjzoVasLN85Xpqovb99snwrvyhsvZvGeBAw7BNTGPQw0q2hY/vEPdjP2LZtmiYDlNKAXYqj2mp56eYh6C8IW/G77U4DiqMUMWoJpu5gZDu2xaibzR6EYaTreqvVsiwL6qfUxw6TSknxy5P2t4f5z49abYlz16egDLBmQ/NR5A8GF6m9lIlxPB6fnZ2tVCrj+pVe9+X8wtNnzw0Tyz2lXBY5J74PsC3oqmUizDk9rZabZxLB1szMzNTUlCRJY1hV1VgsNv0g1pIkRkgqtUMpZoHNGCgb2HMdzzOzhRz5/stZWe02Gl1Z5lHkjiKKIvjR8ekp/vSVrSXzYs73zSCw4RIIccDa7kUjnUlzz2c6CqNwPDBoXtO0Me9TSvqDUDcLhUOfmkEIsCW4Lrxcw1A2NzeAgfFEVzEu+3oeBOHu7k/KMMgygPtKHxkIViK5njzvdOBECI6PIrwKyMfzz+Vy6cwuGAT8Zc9IsyzThvvoqNAZwdH/gl8SNJFIdDpgJAFZsE3Q+4h4nix3mk2YPoc+ocl/fgGyiqLAE77W69UgcAhBI2Wke56jqt1SqQgMOAQnrhcPOSEEYEhgc1qtM0aHCCkIyYJ80TV0nXhuKvUbFhNkHcfhf9vm+36/r0LS68mKek4IbKRp6L0/bsQb8xWjcbQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decision\" title=\"\" src=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png\" srcset=\"/static/bae1f9c188c8a245cf34964e67bf7c2a/69538/decision.png 160w,\n/static/bae1f9c188c8a245cf34964e67bf7c2a/72799/decision.png 320w,\n/static/bae1f9c188c8a245cf34964e67bf7c2a/0b533/decision.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>\"Right, I can't just give up on design. I need to negotiate the timeline...!\"</small>\n</center>\n<p>Of course, thinking this way is entirely natural for a developer. But what matters is accurately understanding <em>what</em> the current situation actually is.</p>\n<p>If the tight deadline is simply because the PO or client is impatient, there‚Äôs certainly room to negotiate. But if there‚Äôs a pressing business issue ‚Äî like an imminent funding round that requires finding market fit fast and painting a pretty revenue graph ‚Äî then negotiating for more design time isn‚Äôt such a great call.</p>\n<p>No matter how thoughtfully a developer designs for the future, if the company runs out of money and shuts down next month, that code disappears anyway. As long as a developer works within a company, the lifespan of everything they produce ultimately depends on the company‚Äôs bank balance.</p>\n<p>That‚Äôs why, even though programming is a developer‚Äôs primary job, they shouldn‚Äôt think only about programming. They should always view the feature they‚Äôre building through a business lens. Sometimes the right call is to cut corners on design, ship the product quickly, test it, find market fit, create user happy moments, and focus on increasing AMPU (Average Margin Per User).</p>\n<p>In such situations, it might be better to accept some design compromises and develop quickly, while predicting risks from the compromised design, handling errors that could interfere with critical user actions, and deploying error monitoring solutions like <a href=\"https://sentry.io/welcome/\" target=\"_blank\" rel=\"nofollow\">Sentry</a> or <a href=\"https://www.bugsnag.com/\" target=\"_blank\" rel=\"nofollow\">Bugsnag</a> with aggressive Slack notifications to catch anything you missed. <del>(Bug fixes, of course, you‚Äôll just have to grind through.)</del></p>\n<h3 id=\"sometimes-you-build-features-meant-to-be-deleted\" style=\"position:relative;\">Sometimes You Build Features Meant to Be Deleted<a href=\"#sometimes-you-build-features-meant-to-be-deleted\" aria-label=\"sometimes you build features meant to be deleted permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>And sometimes you have to build features that are meant to be deleted. What does that mean? New features are supposed to upgrade the product for users ‚Äî how can a feature be ‚Äúmeant to be deleted‚Äù?</p>\n<p>It happens when you need to run A/B tests.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/62091fb4f8accc0f63f209ba823f6b3a/37523/abtest.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6klEQVR42lWT7VPSWRTH+XP6F/ZVL5t9tzW9aF/s7pTVNtNm7To7Nk0ztTOkm5VNlpMo0WYGiSKBSGNiyrMKiCBhKaCJpIACIkLy4GcvP7Op78ydc873nHvumXPOlSGwv79fF6ylMlx++JzSXlmyD9jvUfsS2/fGyenbPaylM9/xsmqtxl6lIhlDdg+/tCiY8Iclu87X/Yeo6+VqVdKfjdo509ZDNJGS7DpfrdaQHVR4cGF9K0cmXyCV3eZb/lscUvXK5mMJNgufSBVWvvplFl8IzbgLnXWGYYcPk8OLYSbI4Mw86nE348J/iLezYdQWJzrbDEaXl9HpME+ct3nsbhSxdsa875BpLS7im9vEMwVi2V2ixQoJp4/kkJl4Io1BPPBZ9LRSqWK0elhN50R8gZWNHdHzGgOB+3S4G1hObaK1uJEN2Txs7ZYZtM2h15h5PWzFcO8J0VMXSK+sY/KGpIRlkdA8NUcyX6LfNYvirQm1y4Lc+IB2ayNruQx6u09UODFFtlTlqnKEkz/+zoXfrnPmrBz/iQbS0TiG6SClz3vSgIyi8vR2ib9eGDnSfJ6jbX/zQ+s15GOXWN1KMTDpQTY4Oc3uXo2eyQDHbqn46ZGehscGlu91k93IYBL9PKxwxO1nu1RGORHgeEsfP983cLpbj/5dL8mdvJiDSNjeP4IjuIgzuMRmNi81PymmbX3/EUcoQodulI1MjnQuL+m2+Q+4whFSuYNNSIqNsAWXsYeWuKs1I2t9aeapw8+DUQeXlAP8qdJxsVtL55gLlejJv/1mPAtRfIvLtGleo34zi9I0xZUOLc1depo6dXS9cqAZ8wu/SLj+PkLkoYqYUk2kT8eCOHUZ6+olqnhOIrJC9csCfvgUQetToJ9TYQpoGJrtY1jIV4H/0HgfsbQREz9lYZFiw2WKV65TvHmHkryd4j93KV5spvjHVWof41+XeX1nEYX3HE/9jejCcgZCN9CK0zvXROf0ryQLMf4HVsAs8PYe3D0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"abtest\" title=\"\" src=\"/static/62091fb4f8accc0f63f209ba823f6b3a/6af66/abtest.png\" srcset=\"/static/62091fb4f8accc0f63f209ba823f6b3a/69538/abtest.png 160w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/72799/abtest.png 320w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/6af66/abtest.png 640w,\n/static/62091fb4f8accc0f63f209ba823f6b3a/37523/abtest.png 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A/B testing deploys both existing and new UI/UX to a test group,<br>compares metrics, and keeps the winner.</small>\n</center>\n<p>For example, imagine your product‚Äôs payment page has a 10% conversion rate. To boost it, you make the payment button bigger and bolder, adding a striking <code class=\"language-text\">#ff0000</code> color. This wasn‚Äôt a random decision ‚Äî it was made after intense discussion and deliberation involving the PO, UI/UX designers, and the entire team.</p>\n<p>So now that we‚Äôve made the payment button more eye-catching after all that deliberation, will the conversion rate go up?</p>\n<center>\n.<br/>\n.<br/>\n.<br/>\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 268px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe7lSWD/xAAXEAADAQAAAAAAAAAAAAAAAAAAAREg/9oACAEBAAEFAqLP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESFBYf/aAAgBAQABPyGmIyTbYEBE8b//2gAMAwEAAgADAAAAEAMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITEQQVH/2gAIAQEAAT8QKAGNTeErao8dHsEwEumwWJ//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"i dont know\" title=\"\" src=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg\" srcset=\"/static/b9cbfd621dfb3d56bd15f5a81b7b086d/0913d/i_dont_know.jpg 160w,\n/static/b9cbfd621dfb3d56bd15f5a81b7b086d/6b6e1/i_dont_know.jpg 268w\" sizes=\"(max-width: 268px) 100vw, 268px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Nobody knows</small>\n</center>\n<p>The truth is, nobody knows how users will react when you build a feature and release it. Users are unpredictable creatures who might suddenly bounce just because a single line of copy changed on a page. But you can‚Äôt just build random things and ship them either ‚Äî the financial risks of labor costs, server costs, and more are too high.</p>\n<p>That‚Äôs why many organizations use A/B testing to reduce this risk. No matter how brilliant the people gathered in a room, no matter how long they discuss and deliberate, at the end of the day it‚Äôs all just predicting ‚Äúour users will behave this way.‚Äù</p>\n<p>In other words, until you deploy and actually observe how users interact with your product, every opinion is just speculation ‚Äî which is why you run these tests.</p>\n<p>If the Control (existing version) shows higher conversion after the test, you simply discard the new Variant. If the Variant wins, you discard the Control. Either way, you safely improve conversion rates with minimal risk, regardless of whether your hypothesis was right.</p>\n<p>For effective data analysis, you also need to control variables as much as possible. If you change a bunch of things at once and the metrics improve, but you can‚Äôt tell which specific change drove the user behavior, the test becomes meaningless.</p>\n<p>That‚Äôs why A/B tests usually keep most features identical and only make small, focused changes to the part being tested. This means that when coding for an A/B test, there will inevitably be a lot of shared logic between Control and Variant.</p>\n<p>Some developers abstract these common parts for an efficient design. But here‚Äôs the trap:</p>\n<blockquote>\n<p>One of the two will eventually <strong>have to be deleted</strong>.</p>\n</blockquote>\n<p>If you aggressively abstract shared code or split things into separate modules to reduce duplication, you actually increase the number of things to worry about when it‚Äôs time to remove the test code ‚Äî and mistakes during removal can introduce unexpected bugs.</p>\n<p>Moreover, A/B tests often have nearly identical variations down to trivial details. No matter how carefully you abstract, once the test ends and you delete one side, you may be left with pointless abstractions.</p>\n<p>That‚Äôs why A/B test code should be built to be as easy to delete as possible. The code you write for a test isn‚Äôt something you‚Äôll maintain long-term ‚Äî it‚Äôs something that gets deleted after a week-long test at most.</p>\n<p>You might say ‚Äújust revert the commit since we have Git,‚Äù but that only works when the Control wins. If the new Variant wins, a revert is useless.</p>\n<p>In cases like this, forget abstraction ‚Äî just copy the entire page, route to <code class=\"language-text\">/test-page/a</code> or <code class=\"language-text\">/test-page/b</code> based on the A/B test variable, and when results come in, cleanly delete the losing page. That might actually be the better design.</p>\n<p>If you develop with a narrow, programming-only perspective without considering these business realities, you might end up doing perfectly solid design work only to receive ‚Äúoverengineering‚Äù feedback ‚Äî which is a truly sad outcome.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>In this post, I‚Äôve talked about the relationship between business and application design. Honestly, more experienced developers probably already know all of this.</p>\n<p>But for developers who are just starting out, it‚Äôs common for their overflowing enthusiasm to be channeled entirely into programming-related work ‚Äî refactoring architecture, adopting new and efficient technologies. When I first started as a developer, I was the same way. I said we needed to refactor all the legacy code without considering any business context, and received feedback to broaden my perspective. <del>(Embarrassingly, at the time I thought the person giving that feedback was just being stubborn‚Ä¶)</del></p>\n<p>Of course, as a developer myself, I get excited about open-for-extension architectures, clearly separated modules, and side-effect-free functions. But at the end of the day, I‚Äôm employed by a company, entangled with countless stakeholders and users who use my product. Realistically, it‚Äôs hard to do only what I want without considering any of that.</p>\n<p>Just as developers value good design and paying off tech debt, designers value UI/UX, and CEOs value management. And most crucially, users only care about the experience they have while using the service.</p>\n<p>Because everyone prioritizes different values, I wanted to use this post to say that developers shouldn‚Äôt have a narrow perspective focused solely on the application.</p>\n<p>That‚Äôs all for this post on why good developers care about business.</p>","fields":{"slug":"20201024-buisiness-with-programming-en","path":"/2020/10/24/buisiness-with-programming/en/","lang":"en"},"frontmatter":{"title":"Why Good Developers Care About Business","subTitle":"Software engineering is more than code ‚Äî it's understanding markets and people","date":"Oct 24, 2020","categories":["Essay"],"tags":["Good Design","Effective Developer","Startup","Business"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/98be92b406bd23618e3ed1e3eecb9ada/3a812/thumbnail.jpg","srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/3a812/thumbnail.jpg 320w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/fc5c5/thumbnail.webp 320w,\n/static/98be92b406bd23618e3ed1e3eecb9ada/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/98be92b406bd23618e3ed1e3eecb9ada/2d839/thumbnail.jpg","srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/98be92b406bd23618e3ed1e3eecb9ada/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"a670b023-5d3b-59cb-a217-8dbd6c594eba","tableOfContents":"<ul>\n<li>\n<p><a href=\"#the-basics-of-cors\">The basics of CORS</a></p>\n<ul>\n<li><a href=\"#what-is-origin\">What is Origin?</a></li>\n<li><a href=\"#sopsame-origin-policy\">SOP(Same-Origin Policy)</a></li>\n<li><a href=\"#same-origin-and-different-origin\">Same origin and different origin</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#how-does-works-cors\">How does works CORS?</a></p>\n<ul>\n<li><a href=\"#preflight-request\">Preflight Request</a></li>\n<li><a href=\"#simple-request\">Simple Request</a></li>\n<li><a href=\"#credentialed-request\">Credentialed Request</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#how-to-solve-cors-policy-violations-problem\">How to solve CORS policy violations problem.</a></p>\n<ul>\n<li><a href=\"#setting-access-control-allow-origin\">Setting Access-Control-Allow-Origin</a></li>\n<li><a href=\"#reverse-proxying-with-webpack-dev-server\">Reverse proxying with Webpack Dev Server</a></li>\n<li><a href=\"#wouldnt-it-be-possible-to-put-the-request-in-the-img-tag\">Wouldn‚Äôt it be possible to put the request in the img tag?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#epilogue\">Epilogue</a></p>\n</li>\n</ul>","excerpt":"In this post, I‚Äôm going to talk about the CORS(Cross-Origin Resource Sharing) policy which every web developer would have heard of at least once. In fact, in web development, it is not an exaggeration to say that errors occur with CORS policy violations are very common, and every web developer will‚Ä¶","html":"<p>In this post, I‚Äôm going to talk about the CORS(Cross-Origin Resource Sharing) policy which every web developer would have heard of at least once. In fact, in web development, it is not an exaggeration to say that errors occur with CORS policy violations are very common, and every web developer will experience it at least once.</p>\n<p>When I was in college, I first encountered this issue while making a toy project with my friends. At the time, I was making a client application in a local environment, and I tried to communicate with the API of a development server made by a friend.</p>\n<p>This was a simple task to communicate with the API server to receive data, but as soon as I tried to communicate, an unknown red message appeared on the console.</p>\n<blockquote>\n<p>üö® Access to fetch at ‚Äô<a href=\"https://api.lubycon.com/me\" target=\"_blank\" rel=\"nofollow\">https://api.lubycon.com/me</a>‚Äô from origin ‚Äòhttp://localhost:3000‚Äô has been blocked by CORS policy: No ‚ÄòAccess-Control-Allow-Origin‚Äô header is present on the requested resource. If an opaque response serves your needs, set the request‚Äôs mode to ‚Äòno-cors‚Äô to fetch the resource with CORS disabled.</p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAABAD/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAQoJBIk23//EABsQAAICAwEAAAAAAAAAAAAAAAECABEDEjEz/9oACAEBAAEFAkaiVXSpj6PQAT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAABECD/2gAIAQEABj8CcE//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMRBBcbH/2gAIAQEAAT8hSv8AJSUAnYb4bfI2i8XEGSf/2gAMAwEAAgADAAAAEOwP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EByf/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAECAQE/EDWb/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAIWFRcf/aAAgBAQABPxB6coHKy1h6dHhua+ZKr7xKkCF5lSK383//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"what\" title=\"\" src=\"/static/34d40d58a5f3a94ac3dce372aa54cd71/c08c5/what.jpg\" srcset=\"/static/34d40d58a5f3a94ac3dce372aa54cd71/0913d/what.jpg 160w,\n/static/34d40d58a5f3a94ac3dce372aa54cd71/cb69c/what.jpg 320w,\n/static/34d40d58a5f3a94ac3dce372aa54cd71/c08c5/what.jpg 640w,\n/static/34d40d58a5f3a94ac3dce372aa54cd71/80e3c/what.jpg 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>CO...What...? Access control allow origin...?</small>\n</center>\n<p>If I think about it now, it‚Äôs an error message that kindly tells me how to fix it, but I didn‚Äôt know what to do after seeing this message because I had little experience in developing web applications at the time.</p>\n<h2 id=\"the-basics-of-cors\" style=\"position:relative;\">The basics of CORS<a href=\"#the-basics-of-cors\" aria-label=\"the basics of cors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As such, all of the CORS-related issues we encounter arise from violations of CORS policies. Developers may be annoyed as there are more things to care about when developing because of that policy, but in fact, there is a barrier like CORS, so we can get a minimum guarantee that the resources we bring from other server are safe.</p>\n<p>CORS is short for ‚ÄúCross-Origin Resource Sharing‚Äù. Actually ‚ÄúCross Origin‚Äù means ‚ÄúDifferent Origin‚Äù. but I think that non-English people hard to understand this because we don‚Äôt understand the nuances of the English word ‚ÄúCross‚Äù.</p>\n<p>So I‚Äôm writing this post using the word ‚ÄúDifferent origin‚Äù instead of ‚ÄúCross Origin‚Äù for a little easier understanding of non-English speaking people like me.</p>\n<p>Then, before looking at the resource sharing between different origins, let‚Äôs simply dig into what exactly this <code class=\"language-text\">Origin</code> means and proceed.</p>\n<h3 id=\"what-is-origin\" style=\"position:relative;\">What is Origin?<a href=\"#what-is-origin\" aria-label=\"what is origin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>URLs like <code class=\"language-text\">https://google.com</code>, which means the location of the server, look like a single string, but are actually made up of several components.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVR42h2MX0+CcAAA+f6PPbae6qG1XGuKytLE0JW62nKaGvkPDIQE4YdoU9CLtd12u5eTzu47XFSGeJsDJCdadQM590qzOmUfgxMbKN0cxbcbpmKIOzBoXSt08xqd2xpiPMbvFdHVK8LhI1LP8Jk4EftsRsba22HO1qzcmGMKv8cYOzRZ+FM2qWAf7fCNJYHhElgrku2GJLLYOmMSYSP1TcHsZ4tpBlhGgGOJzAJ7EWKZ4b8d8Z1N5wT2D2KxIlr6rOcOke0RZB27LgdvwilNkM4rIy61GaXyEK2sUyuOqCs6VXnAk/KF+tCnNpBR9QJdrYFeavOptBnIz/TzDT4KLyyaKv77Hek24A//mh4jJrvfIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"uri structure\" title=\"\" src=\"/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png\" srcset=\"/static/e25190005d12938c253cc72ca06777b1/69538/uri-structure.png 160w,\n/static/e25190005d12938c253cc72ca06777b1/72799/uri-structure.png 320w,\n/static/e25190005d12938c253cc72ca06777b1/6af66/uri-structure.png 640w,\n/static/e25190005d12938c253cc72ca06777b1/d9199/uri-structure.png 960w,\n/static/e25190005d12938c253cc72ca06777b1/21b4d/uri-structure.png 1280w,\n/static/e25190005d12938c253cc72ca06777b1/5bd27/uri-structure.png 1432w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <br>\n</center>\n<p>The origin means protocol and host, and port numbers such as <code class=\"language-text\">:80</code> and <code class=\"language-text\">:443</code>. In other words, it puts together the most basic things we need to find the location of the server.</p>\n<p>Also, as shown in the figure above, the port number in the origin can be omitted, because the default port number of the HTTP and HTTPS protocols used in each web is set. We can find the default port number defined in the <a href=\"https://tools.ietf.org/html/rfc2616#section-3.2.2\" target=\"_blank\" rel=\"nofollow\">RFC 2616</a> document where HTTP is defined.</p>\n<blockquote>\n<p>3.3.2 http URL</p>\n<p>‚Ä¶<br />\n<strong>If the port is empty or not given, port 80 is assumed.</strong> The semantics are that the identified resource is located at the server listening for TCP connections on that port of that host, and the Request-URI for the resource is abs_path (section 5.1.2).<br />\n‚Ä¶</p>\n</blockquote>\n<p>If a port number is explicitly included in the origin, such as ‚Äù<a href=\"https://google.com:443\" target=\"_blank\" rel=\"nofollow\">https://google.com:443</a>‚Äù, it is recognized that the origin is the same only if all port numbers match. However, since clear rules for this case are not established as standards, the evaluation of the origin may vary in some cases.</p>\n<p>We can easily find out origin which application is running from by accessing the <code class=\"language-text\">origin</code> property of the <code class=\"language-text\">Location</code> object from the browser‚Äôs developer tools console.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"https://evan-moon.github.io\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"sopsame-origin-policy\" style=\"position:relative;\">SOP(Same-Origin Policy)<a href=\"#sopsame-origin-policy\" aria-label=\"sopsame origin policy permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>There are two policies in the web ecosystem that limit requests for resources from other origins. One is CORS, the topic of this post, and the other is SOP(Same-Origin Policy).</p>\n<p>SOP is a web security policy first defined by <a href=\"https://tools.ietf.org/html/rfc6454#page-5\" target=\"_blank\" rel=\"nofollow\">RFC 6454</a> in 2011. It is literally a policy with the rule that ‚Äúyou can only share resources from the same origin‚Äù.</p>\n<p>However, the web is an open space environment, and it is very common to bring and use resources from different origins, so it cannot be banned without exception. So they defined some exception cases and decided to allow requests for resources contained in these exceptions, even if the resources originate differently. One of the exceptions is ‚Äúrequest for a resource that does not violate the CORS policy‚Äù. <small>(The name CORS first appeared in 2009, which is faster than SOP.)</small></p>\n<blockquote>\n<p>Access to network resources varies depending on whether the resources are in the same origin as the content attempting to access them.</p>\n<p>Generally, reading information from another origin is forbidden.\nHowever, an origin is permitted to use some kinds of resources retrieved from other origins. For example, an origin is permitted to execute script, render images, and apply style sheets from any origin.  Likewise, an origin can display content from another origin, such as an HTML document in an HTML frame. <strong>Network resources can also opt into letting other origins read their information, for example, using Cross-Origin Resource Sharing.</strong></p>\n<p><a href=\"https://tools.ietf.org/html/rfc6454#section-3.4.2\" target=\"_blank\" rel=\"nofollow\">RFC 6454 - 3.4.2 Network Access</a></p>\n</blockquote>\n<p>If we request a resource from a different origin, it violates the SOP policy, and if we do not comply with the CORS policy, which is an exception to the SOP, the resource of a different origin cannot be used at all.</p>\n<p>In other words, the act of restricting the use of resources of different origins is not a matter determined by only one policy. If the exception case defined in the SOP and the cases that can use CORS do not match, we may can not use resources from other origins.</p>\n<p>But why are these people making such annoying policies to bother developers? As we know, the developer would write the code to communicate only with the specified server anyway.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.24999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkklEQVR42n2SSY8BURSF679b2FlYCRsrFoYQiTKEhZipUkgtSMxCRIUgZl73R3UjnVTfxctL3jn3nHvuk/r9vqZp9Xq92WxOp9PZbGYYxna7FUJ8/VsApG6322g0yuUytOVyyZ0WnJ1OB8TxeLzf75bkYrEYi8UqlQpq7Xa7Wq3SDi+ZTGa9XtNuv99bkvP5fCKRqNVq0CDrup7NZoPBoKIo3AG9lMVvvcmlUkl7Fnzmx0IkErHZbF6vN5lMmiBL5V6vh6Df7+dyOp0YweVy2e12h8PhdDpvt5sJxTxZEMRgMHiTd7sdUXs8nsViAYIIotEoLRgHMqDD4TCZTDBFihhUVZVor9crT5L+rEKhsNlsAPEQCoUYO51OswJTczQajcdjXhEfDodc2MKD3Gq1fD4f2a5WK0wCRWE+n8O0WtLbNjnhUJZlNkRXJue3oExar6/Ceblc6PUZ+E/axItt5VmYT6VSbrc7Ho8TOKsGhyMSOZ/Pn+E/yKw0l8vRArdoYjscDpsDBwIBjJg4EvqzMyHEN7KqfRhZKKGAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"trust\" title=\"\" src=\"/static/b7814fc71828e37d43c7516e4d1314ab/8574c/trust.png\" srcset=\"/static/b7814fc71828e37d43c7516e4d1314ab/69538/trust.png 160w,\n/static/b7814fc71828e37d43c7516e4d1314ab/72799/trust.png 320w,\n/static/b7814fc71828e37d43c7516e4d1314ab/8574c/trust.png 436w\" sizes=\"(max-width: 436px) 100vw, 436px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Can't you just trust the developer...?</small>\n</center>\n<p>However, if we think about it a little more, the environment in which two applications in different origins can communicate freely is a pretty dangerous environment.</p>\n<p>We must not forget that client applications, especially client applications running on the web, are too vulnerable to malicious attacks from users.</p>\n<p>When users use Chrome‚Äôs developer tools, they can check without any restrictions on a number of important information, such as the structure of the DOM, which server the client communicates with, and where the resource comes from.</p>\n<p>Some say it‚Äôs hard to read because we uglify the JavaScript source code, but uglify is only uglify, not encryption.</p>\n<p>And even if the source is uglified, it‚Äôs not even incomprehensible to humans, and being able to directly view the source code is a very dangerous part of security.</p>\n<p>In this situation, if there are no rules for applications of different origins to communicate with each other, then the bad user can reads the source code and uses a method like <a href=\"https://en.wikipedia.org/wiki/Cross-site_request_forgery\" target=\"_blank\" rel=\"nofollow\">CSRF(Cross-Site Request Forgery)</a>ÎÇò <a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\" target=\"_blank\" rel=\"nofollow\">XSS(Cross-Site Scripting)</a> to pretend the code was executed in your application.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFOklEQVR42h2U6VOb1xXG34+1IXZKIA7E7ELbqw3QBpLQDgKtaEP7hgRCGIyDTcDO4mbB43ZiY8fJOElrT1s3JomXJDNO63xIZzxtPfmrfr2TD2feO/c955nnPOc5Vxo9bWGoZ5rB3mmG+qwo+21o+q2Yxr045EWW7DnqS5ts5Q9oxM5Rim6xGDnPbOoAg7OFWk4xPOShX2D0ntAhjffMMt7vQTnkY3xgFtWgA+OwkxllgIAxzlpii92dI/zeIhF3jlaqQ75wBU/2ALu3hVEfRx4LMNAzRV+XEUkeWmJidF6EF9WwC51gZlGHcJoSRJwFGpU/4LDlOKps86/PH9As7lCrXSGauYTLWWHKlMYgx1Eqwpwd8CBZ5AImXQq9NoJBu4jZEBcABfxzdSKBFirdMiGDl0/XLvHggxuU0xvk8rsko+fwuOrYXU2mZhvorWWUchLJ59rA5aoy68jjcORwO3MEgk3CS21i4Q3OvDlLyuzluwuH/HLzz1y9eEg82iSb2CYitA2E2rhEvt1dwSY6kgqhfZKBLZLBDqng+m+RXdiknr7MWv59oVEWs8LMwwtXebL/CdvVPfILbdaFhuXINvnQJunf6tokxFdq2S5TmBRCT7UpWTvkJlusBi5ybuMu5dw1MtH3UEyEsSkdhF1RMkK3Ded56rYOdfMaeWOV/GSToqXDimUTqW65TEq3yrK+SkxfIGbI0SxcI527js8v2oruEgjsoJcTDA45WDQVWDGUBIEqUTlLwlAhZqoRMTVIWDaQyuaLJOV1otoKcXmFqDFHu3mLRvMzMplDPO4WoUUxhPQ+s84aobDIXzogPFljQeQ7FAn8+hIBUx2vro4UVlSJqJuk9GuExjO4JzM0WncoVsREazfw+7ZwOhqEhZmdzjru+R1cCx08tnV86jQBfZGpsWXc2jJh0xpSaXqPrHGLqKpJQJHDPJUjnfmAWOx9YtF3mBcA7jnxz9fG42kzaSkj68IEvdvMjERERw3hgm28qnVCmm2kqnmPiKpFTFknZVhHFl6ac68LZptYbBVRHMUgNsZsEe05myjGfRgE4Jyrw4JGSKBep+Z4hw3/TXK260hxVYOliToZfZuq7QJabUIUFxgWW9PXo+GNPh29vTJnzhh4rc+ASXayFDrPnHcLj7pBcKzKvKJBxb5HybaP5B1KE1bXWLW/RVCuoJlcEYySwipR3nxdj10bZPTsDD2vTjAx5kWtCmG25jHbK8xM5HENruAbLeIeEZM3X0ByD6ep23eIjBUxjyToF8y0wsyjijiviRfoZNc4r3SP0d09yunTKvr7pxk4a0ejXMA+ssLMwAp+AeYbreEbqSE1gpeI21q4lVlmNEl0kyki2XeJJHfFKtVw+1fx+8s4PEUmp+dRquwYJ0KURV1IaL48vSVavUjJeYXUzFtIuxuf8vjrn7l8/g73vvqJu1/+zMF79/j46Dt+/P4l9/7xgmfPXvLo6a88++evPPnhvzy6/ws/fPOS29ee8s2959x695jn3/+Pm/t3kTqrh9z46AF/vf2Iq29/xZPjf3P04Rf86aP7HH3ymNs3n/Lj8X+48fFDrh8e8+3fXnD/L895evyCv996LHIfcOePD7l9/Vv20gdI1okEVmUSvzGDeTiMTiu0cS4zbYmgNUaxzdWYdWWR9SEhRwybY4UpcR82lng7+yE55zZLpjIBYex5TRHp7EkbQ112Bk5YGRTngVfsnOq1cqJbSdcpJd2n1fS9MS0sY6T71DgnRbx+Souyy0NQUyLr6DDyOyfy7/2oX/Xwf+8f/ytffeuZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hacker\" title=\"\" src=\"/static/8d7b67f798121b900eda125cf4e20698/6af66/hacker.png\" srcset=\"/static/8d7b67f798121b900eda125cf4e20698/69538/hacker.png 160w,\n/static/8d7b67f798121b900eda125cf4e20698/72799/hacker.png 320w,\n/static/8d7b67f798121b900eda125cf4e20698/6af66/hacker.png 640w,\n/static/8d7b67f798121b900eda125cf4e20698/c5bb3/hacker.png 680w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  </div>\n  <small>I think that gonna be fun to inject my script on this site...!\n  <br>\n  <br>\n</small></center>\n<p>Now, we keep talking on the subject of the same origin and different origins, so exactly in what cases does the web evaluate the origins as the same, and in what cases does the origins differ?</p>\n<h3 id=\"same-origin-and-different-origin\" style=\"position:relative;\">Same origin and different origin<a href=\"#same-origin-and-different-origin\" aria-label=\"same origin and different origin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The logic for determining that the two origins are the same is very simple. Among the components of the two origins, only the three components, scheme, host, and port, need to be the same.</p>\n<p>For example, the origin of my blog, <code class=\"language-text\">https://evan-moon.github.io</code>, is recognized as the following.</p>\n<table>\n<thead>\n<tr>\n<th>URL</th>\n<th>isSame</th>\n<th>reason</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><a href=\"https://evan-moon.github.io\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.github.io</a></strong>/about</td>\n<td>O</td>\n<td>Scheme, Host, Port is same</td>\n</tr>\n<tr>\n<td><strong><a href=\"https://evan-moon.github.io\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.github.io</a></strong>/about?q=ÏïàÎáΩ</td>\n<td>O</td>\n<td>Scheme, Host, Port is same</td>\n</tr>\n<tr>\n<td>**https://**user:password@<strong>evan-moon.github.io</strong></td>\n<td>O</td>\n<td>Scheme, Host, Port is same</td>\n</tr>\n<tr>\n<td><strong><a href=\"http://evan-moon.github.io\" target=\"_blank\" rel=\"nofollow\">http://evan-moon.github.io</a></strong></td>\n<td>X</td>\n<td>Scheme is different</td>\n</tr>\n<tr>\n<td><strong><a href=\"https://api.github.io\" target=\"_blank\" rel=\"nofollow\">https://api.github.io</a></strong></td>\n<td>X</td>\n<td>Host is different</td>\n</tr>\n<tr>\n<td><strong><a href=\"https://evan-moon.naver.com\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.naver.com</a></strong></td>\n<td>X</td>\n<td>Host is different</td>\n</tr>\n<tr>\n<td><strong><a href=\"https://evan-moon.github.com\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.github.com</a></strong></td>\n<td>X</td>\n<td>Host is different</td>\n</tr>\n<tr>\n<td><strong><a href=\"https://evan-moon.github.io:8000\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.github.io:8000</a></strong></td>\n<td>?</td>\n<td>Depends on browser spec</td>\n</tr>\n</tbody>\n</table>\n<p>In the last case, if my blog origin has a port number, such as <code class=\"language-text\">https://evan-moon.github.io:80</code>, it is evaluated as a clearly different origin. However, in this case it is ambiguous to judge because the port number is not included to example origin. RFC 6454‚Äôs <a href=\"https://tools.ietf.org/html/rfc6454#section-5\" target=\"_blank\" rel=\"nofollow\">Comparing Origins</a> section presupposes ‚ÄúIf the two origins are scheme/host/port triples‚Ä¶‚Äù, and the implementation of this rule may vary depending on how it is interpreted.</p>\n<p>So in this case, each browser‚Äôs own origin comparison logic is followed.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 106.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAYAQACAwAAAAAAAAAAAAAAAAABAgADBP/aAAwDAQACEAMQAAABis00VbKEbqzBAB//xAAcEAACAgIDAAAAAAAAAAAAAAABAgADEjETISP/2gAIAQEAAQUCzsmdhis0K97Ka4/RQUZa5//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ASH/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8BWNa//8QAGxAAAQUBAQAAAAAAAAAAAAAAAAECESIxMnH/2gAIAQEABj8CW7jtx0oueSVaYSS1TT//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhQVFhwf/aAAgBAQABPyFdZULuXQ0dldvA9gdFwBIRa0sQL12USnHK+ym26rJMTe/J/9oADAMBAAIAAwAAABDgyD3/xAAYEQEBAQEBAAAAAAAAAAAAAAABABEhMf/aAAgBAwEBPxDV3seQAgL/xAAYEQADAQEAAAAAAAAAAAAAAAAAARExUf/aAAgBAgEBPxCLgi4U3BtT/8QAHBABAQEAAwADAAAAAAAAAAAAAREAIUFRYYHx/9oACAEBAAE/EBMhgH65SElvN02lhzfRnCKbYVl06i8UTESR6V4YBZtplevlouawqR+89wVav73/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ie is trash\" title=\"\" src=\"/static/a21288d9ab75a6714b1f5a752d171ce4/c08c5/ie_is_trash.jpg\" srcset=\"/static/a21288d9ab75a6714b1f5a752d171ce4/0913d/ie_is_trash.jpg 160w,\n/static/a21288d9ab75a6714b1f5a752d171ce4/cb69c/ie_is_trash.jpg 320w,\n/static/a21288d9ab75a6714b1f5a752d171ce4/c08c5/ie_is_trash.jpg 640w,\n/static/a21288d9ab75a6714b1f5a752d171ce4/6a068/ie_is_trash.jpg 960w,\n/static/a21288d9ab75a6714b1f5a752d171ce4/fb914/ie_is_trash.jpg 998w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  </div>\n  <small>\n    Internet Explorer is the only browser that completely ignores port numbers when comparing origins.<br>So let's throw it to the trashcan now.<br>\n    <a href=\"https://www.memedroid.com/memes/detail/2429165/internet-explorer-is-crap\" target=\"_blank\">- memdroid -</a>\n  </small>\n  <br>\n  <br>\n</center>\n<p>The important thing is that this origin comparison logic is not a specification implemented in the server, but a specification implemented in the browser.</p>\n<p>Even if we make a request for a resource that violates the CORS policy, the server responds normally unless the server has logic that only allows requests from the same origin. And the browser checks the headers of this response, and if it determines that the request it sent violates the CORS policy, the response is discarded without using the response.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABfElEQVR42lWSS0/CQBSF+b1ujAaBCiSAsDea4IKF8gtcmBCjwQcrg4muNJEYIlCoIH2ldMp0Oj3eKeDjNqd3krn97pneSUVRBMZ8cM7Bl8uVaL2krPZUxPF/qXAcC2N9iPF4QllHv98nDkOKcwVhkFIiomqpRGtBsHDpQfI5PHsE3x1T1ilPCGejc3MBLbuNXG4f1eoBCoUCBoMBUkII6rpuO52ttHYlQoZYeBAEXrhf8NwZAmbDF3O02y1k93aQ0zRUKhUUi0Xo5DQBqq/V0+1eY/TUIpwgp/QOTMTcIJc2QjaDYHMw38DL7Bmtq3PktQzy+QJqtRrK5fIvcOPwPfqEFX0kDcL7O/DTM4jXN8iNZQr1O1R0bi+xt7uFdDqDUqkEjZwOh8MVUEkVxmQrpvogCGBSt2mvB2c6RahOgTiRlKtBPXYfcHx0iHr9BM1mE41GA4ZhIKU2XddN5LgOTc+GZVlY0MTkGvMz2j8R0C0wTSupdRwHvu8nJ/0GiJD+Yn5vu6MAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cors\" title=\"\" src=\"/static/d4d623ba331c1d7851e7000c11cd3809/6af66/cors.png\" srcset=\"/static/d4d623ba331c1d7851e7000c11cd3809/69538/cors.png 160w,\n/static/d4d623ba331c1d7851e7000c11cd3809/72799/cors.png 320w,\n/static/d4d623ba331c1d7851e7000c11cd3809/6af66/cors.png 640w,\n/static/d4d623ba331c1d7851e7000c11cd3809/d9199/cors.png 960w,\n/static/d4d623ba331c1d7851e7000c11cd3809/21b4d/cors.png 1280w,\n/static/d4d623ba331c1d7851e7000c11cd3809/f4fb1/cors.png 1766w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>The server responds normally even if the request violates CORS,<br>and the browser decides whether to discard the response</small>\n</center>\n<p>In other words, CORS is a policy included in the browser implementation specification, so this policy does not apply when communicating between servers without going through a browser. so, even if an error occurs in the client application due to a resource request that violates the CORS policy, only logs about succeessful responded is recorded in server. So if we don‚Äôt know exactly how CORS works, it can be difficult to solve CORS problem.</p>\n<h2 id=\"how-does-works-cors\" style=\"position:relative;\">How does works CORS?<a href=\"#how-does-works-cors\" aria-label=\"how does works cors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now, we will have a close look at how we can safely use resources with different origins.</p>\n<p>Basically, when a web client application requests a resource of a different origin, the HTTP protocol is used, and the application includes the origin of the current resource request in the <code class=\"language-text\">Origin</code> field in the request header.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\"><span class=\"token header\"><span class=\"token header-name keyword\">Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://evan-moon.github.io</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thereafter, when the server responds to this request, it returns the ‚Äúorigin allowed to access this resource‚Äù in the ‚ÄúAccess-Control-Allow-Origin‚Äù field of the response header. And the browser compares the <code class=\"language-text\">Origin</code> in the request header sent by itself with the <code class=\"language-text\">Access-Control-Allow-Origin</code> in the response header sent by server, and determines whether this response is a valid response.</p>\n<p>Although the basic flow of CORS is simple, in fact, the way CORS works is changed according to three scenarios rather than one. That‚Äôs why it will be easier to fix errors due to CORS policy violations if we understand what scenario our resource request is in.</p>\n<h3 id=\"preflight-request\" style=\"position:relative;\">Preflight Request<a href=\"#preflight-request\" aria-label=\"preflight request permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Preflight is the most common scenario we encounter when developing web applications. In this scenario, the browser does not send the request at once, but divides it into a preflight request and a main request and sends them to the server.</p>\n<p>And for this preflight request, the HTTP method <code class=\"language-text\">OPTIONS</code> is used. The role of the preflight request is to make sure it is safe to send this request by the browser itself before sending it.</p>\n<p>This process can be roughly expressed as a simple flow chart.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClElEQVR42mNgYGDQBGJDIBZmgABGKAYBQVYGBgMuBgZJEKeegYHpP1QORP9HUsvJwCANpNRBbBYIHyzBdOnSJT0g1oAayATE3EgW4ANAuxnYQAxmIOYDYnaQ4MaNGyN37NjhAzZERYXdhYFB6ikDA9f/GzdE/q1dK7OnsFB6e1WV5ImyMpnN6enS/48ckfp/9KjYFAYGnmKI5WADOZCtgnqH5b+WFlsbMCj0gAof3Lu36ea1ay/279595+jhw/fOnDx579CBA3euX7364tXz5xtBPing4pLEMPD///+MjywsOIEGqgGxai4PjyhI/OrVq84fvnyp/fbjR9mtu3crHj99Wv7t16+yV2/e1F+5ccMGFDy9fHxCWF2I5EqmdCEhUGAz3rl2LfLB7dvPH929e/fEkSMPTgLx/du37zy6d+/N7y9f3EBqFikpieE0EGgkOCKiVcz4nuu5cm8y9uGqF1LhywWGNTC2WSBYnmOimQffc9di7lVKxvxpxsZceAyEAPHAbjEG7wpBhtB6HoaYRdxbDp2IPHL2Ytne4+cq9py4GMLAEMomFL2Yj8E4UJLbtRjVhaDwq6//zwQ2qe2/MHvzf0V5+3wBZAsunz2u+ebxY4tbF89YXDx1Sh052cgkz8Ydhgz1/7l4J/8XFrKIk+bn1xdgAHobjIEad+4+kHXg8NE0kDJR+1Aecb0Ybn45G0GZ0F6wgSyCgoL8IMaxY8d0b926FXLjxo1QIFYEiUk5xwprZe3nUZl4i92i9xgniN26bI9467JL4sb1T7nk6/dz2M//z6EUOpNf1D6LB2wgLy8vONvt3LnTeM+ePTG7du2KnT9/KSi3MAoJCfGRk1PY8SgEBkc9EyLm/zNiskHAGGwgAL767TM7F884AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cors preflight\" title=\"\" src=\"/static/c86699252752391939dc68f8f9a860bf/6af66/cors-preflight.png\" srcset=\"/static/c86699252752391939dc68f8f9a860bf/69538/cors-preflight.png 160w,\n/static/c86699252752391939dc68f8f9a860bf/72799/cors-preflight.png 320w,\n/static/c86699252752391939dc68f8f9a860bf/6af66/cors-preflight.png 640w,\n/static/c86699252752391939dc68f8f9a860bf/d9199/cors-preflight.png 960w,\n/static/c86699252752391939dc68f8f9a860bf/21b4d/cors-preflight.png 1280w,\n/static/c86699252752391939dc68f8f9a860bf/2b36a/cors-preflight.png 2268w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Î∏åÎùºÏö∞Ï†ÄÎäî Î≥∏ ÏöîÏ≤≠ÏùÑ Î≥¥ÎÇ¥Í∏∞ Ï†Ñ ÏòàÎπÑ ÏöîÏ≤≠ÏùÑ Î®ºÏ†Ä Î≥¥ÎÇ¥Í≥†, ÏöîÏ≤≠Ïùò Ïú†Ìö®ÏÑ±ÏùÑ Í≤ÄÏÇ¨ÌïúÎã§</small>\n</center>\n<p>When we use JavaScript‚Äôs fetch API to tell the browser to fetch a resource, the browser sends a preflight request before sending the main request to the server. And in response to this preflight request, the server sends back to the browser with information about what was allowed and what was banned in the response header.</p>\n<p>After that, the browser compares the preflight request sent by itself with the permission policy included in the response from the server, and if it determines that it is safe to send main request, it sends the request again to the same endpoint. Then, when the server responds to this main request, the browser finally passes this response data to JavaScript.</p>\n<p>This flow can be reproduced simply in the browser‚Äôs developer tools console. In my blog environment, if we send a request to the RSS file resource of my Tistory blog, we can check that the browser sends a preflight request using the  ªOPTIONS` method before sending main request.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> headers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Headers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'text/xml'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://evanmoon.tistory.com/rss'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> headers <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">OPTIONS https://evanmoon.tistory.com/rss\n\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">*/*</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept-Encoding</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">gzip, deflate, br</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept-Language</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">en-US,en;q=0.9,ko;q=0.8,ja;q=0.7,la;q=0.6</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Access-Control-Request-Headers</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">content-type</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Access-Control-Request-Method</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">GET</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Connection</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">keep-alive</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">evanmoon.tistory.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://evan-moon.github.io</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Referer</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://evan-moon.github.io/2020/05/21/about-cors/</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Dest</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">empty</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Mode</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">cors</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Site</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">cross-site</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If we check the header of the preflight request sent by the browser as in the example above, we can see that information on the main request to be sent after the preflight request is also included, not just information about <code class=\"language-text\">Origin</code>.</p>\n<p>The browser notice to server that it will use the <code class=\"language-text\">Content-Type</code> field or the <code class=\"language-text\">GET</code> method in the main request through the <code class=\"language-text\">Access-Control-Request-Headers</code> field or the <code class=\"language-text\">Access-Control-Request-Method</code> field of the preflight request.</p>\n<p>browser has sent a preflight request to the Tistory server, now Tistory server to send a response to preflight request which browser sent.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">OPTIONS https://evanmoon.tistory.com/rss 200 OK\n\n<span class=\"token header\"><span class=\"token header-name keyword\">Access-Control-Allow-Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://evanmoon.tistory.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Encoding</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">gzip</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">699</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">text/xml; charset=utf-8</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Date</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">Sun, 24 May 2020 11:52:33 GMT</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">P3P</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">CP='ALL DSP COR MON LAW OUR LEG DEL'</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Server</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">Apache</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Vary</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">Accept-Encoding</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">X-UA-Compatible</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">IE=Edge</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>What we need to note in this response is the value <code class=\"language-text\">Access-Control-Allow-Origin: https://evanmoon.tistory.com</code> included in the header.</p>\n<p>The Tistory server told the browser that the only origin that could access this resource is <code class=\"language-text\">https://evanmoon.tistory.com</code>. However, the origin I sent this request to is <code class=\"language-text\">https://evan-moon.github.io</code>, which is different from the origin allowed by the server.</p>\n<p>Therefore, the browser determines that this request violates the CORS policy and throws the following error.</p>\n<blockquote>\n<p>üö® Access to fetch at ‚Äô<a href=\"https://evanmoon.tistory.com/rss\" target=\"_blank\" rel=\"nofollow\">https://evanmoon.tistory.com/rss</a>‚Äô from origin ‚Äòhttps://evan-moon.github.io‚Äô has been blocked by CORS policy: Response to preflight request doesn‚Äôt pass access control check: The ‚ÄòAccess-Control-Allow-Origin‚Äô header has a value ‚Äòhttp://evanmoon.tistory.com‚Äô that is not equal to the supplied origin. Have the server send the header with a valid value, or, if an opaque response serves your needs, set the request‚Äôs mode to ‚Äòno-cors‚Äô to fetch the resource with CORS disabled.</p>\n</blockquote>\n<p>Here, we are confused because the error is displayed in red on the console window even though an error does not occur in the response to the prelight request and <code class=\"language-text\">200</code> status code is returned normally. In fact, errors caused by CORS policy violations have little to do with the success of the preflight request.</p>\n<p>This is because the browser determines whether the CORS policy is violated after receiving the response to the preflight request.</p>\n<p>Of course, even if the preflight request fails, it may be treated as a CORS policy violation, but more important thing is whether there is a valid Access-Control-Allow-Origin value in the response header. not whether the preflight request succeeds or fails. In other words, even if the preflight request fails and a status code <code class=\"language-text\">200</code> is not returned, if that value is properly entered in the header, it means that it is not a CORS policy violation.</p>\n<p>In most cases, the preflight scenario is used, in which the preflight request and the main request are divided, but in all situations, the request is not sent twice. Although this is a tricky condition, in some cases, it checks for CORS policy violations only with the main request without a preflight request.</p>\n<h3 id=\"simple-request\" style=\"position:relative;\">Simple Request<a href=\"#simple-request\" aria-label=\"simple request permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>There is no official name for this scenario, but MDN‚Äôs CORS document calls this scenario as <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Examples_of_access_control_scenarios\" target=\"_blank\" rel=\"nofollow\">Simple Request</a>, so I will just call it Simple Request.</p>\n<p>In the simple request scenario, after sending main request to the server without sending a preflight request, the server sends a value such as <code class=\"language-text\">Access-Control-Allow-Origin</code> in the response header of this main request, then the browser checks CORS policy violations. In other words, the preflight scenario and the simple request scenario have the same overall logic, and differ only in the presence or absence of a preflight request.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABx0lEQVR42mNgYGDQB2I5BkzADMSaQKwDxKwMhIECEGuDGFyhoaEgzQzLli0TP3HihJaxsTHIAEYgZgPJQ9T/Z4RgGEDn27MACQ4Qi8/CwoITxFi9erXz/v37a+3t7XmgrhIEYh4G4gAzzEBOnErs61kkfepFjNPOcJnVb+NLnn1MaM6G61LLzj6UWn/5rWz9pqci9ln7eYzrz3DJRbULimqBHYIw8P///4yrVq1ihnqXQav+Cg+vRoCwjAzEB4vXrpU5ePhY5YmzZ8v2HTrStGv/fhOQuEVoISevlIawiHuVJHYX1v/nYqj5ry5Y/xQUWdwgi4DYE4hjf/78Fnv6xIm4169fxgL5MUAcBsS8IG0asZOFcRnIxLDqP7N8/noBBmF1KfusLJ6r127uvXvv/usr127cP3jk6MMLFy89uHP33tN7Dx7ePn75Jig1cOjFTBODGwjyKtAmLigGB65x2kxWpdCZ/KGr/rPJ28/nYLBYxckQv59DZeI/dnkgLRO6ihNEg+RBwSPsV8rLwM3NLQ6KofXr1xscO3asF5hsJhw5ciQTGmPciGRDWiwz1tfXs0ycOJEdhIFsNmjEwNMWnnTIiEiHKuwAnnGz5V1xAocAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"simple request\" title=\"\" src=\"/static/d8ed6519e305c807c687032ff61240f8/6af66/simple-request.png\" srcset=\"/static/d8ed6519e305c807c687032ff61240f8/69538/simple-request.png 160w,\n/static/d8ed6519e305c807c687032ff61240f8/72799/simple-request.png 320w,\n/static/d8ed6519e305c807c687032ff61240f8/6af66/simple-request.png 640w,\n/static/d8ed6519e305c807c687032ff61240f8/d9199/simple-request.png 960w,\n/static/d8ed6519e305c807c687032ff61240f8/21b4d/simple-request.png 1280w,\n/static/d8ed6519e305c807c687032ff61240f8/2b36a/simple-request.png 2268w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>The simple request scenario is a scenario in which CORS violations are checked with the main request without a preflight request.</small>\n</center>\n<p>However, we can use a simple request. the preflight request can be omitted only when certain conditions are satisfied. Moreover, it is quite difficult to meet this requirement, so if we design your web application architecture in a generic way, it is almost impossible to meet it. So I hardly ever experienced such a case.</p>\n<hr>\n<ol>\n<li>The request method must be one of <code class=\"language-text\">GET</code>, <code class=\"language-text\">HEAD</code>, and <code class=\"language-text\">POST</code>.</li>\n<li>Headers other than <code class=\"language-text\">Accept</code>, <code class=\"language-text\">Accept-Language</code>, <code class=\"language-text\">Content-Language</code>, <code class=\"language-text\">Content-Type</code>, <code class=\"language-text\">DPR</code>, <code class=\"language-text\">Downlink</code>, <code class=\"language-text\">Save-Data</code>, <code class=\"language-text\">Viewport-Width</code>, and <code class=\"language-text\">Width</code> should not be used.</li>\n<li>If <code class=\"language-text\">Content-Type</code> is used, only <code class=\"language-text\">application/x-www-form-urlencoded</code>, <code class=\"language-text\">multipart/form-data</code>, and <code class=\"language-text\">text/plain</code> are allowed as values of this field.</li>\n</ol>\n<hr>\n<p>In fact, if we want to follow the condition 1, we just do not use some methods such as <code class=\"language-text\">PUT</code> or <code class=\"language-text\">DELETE</code>. So actually it is not difficult. However, it is not condition 2 or 3.</p>\n<p>Since the header fields specified in condition 2 are really basic fields, it is rare that an additional field is not used in a complex commercial web application. Even the <code class=\"language-text\">Authorization</code> header used for user authentication is not included in that condition.</p>\n<p>In addition, since we usually design HTTP APIs to have a content type of <code class=\"language-text\">text/xml</code> or <code class=\"language-text\">application/json</code>, it is not so easy to create a situation that satisfies all of these conditions in reality.</p>\n<h3 id=\"credentialed-request\" style=\"position:relative;\">Credentialed Request<a href=\"#credentialed-request\" aria-label=\"credentialed request permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The third scenario is how to use credential requests. This scenario is not the basic scenario of CORS, but it is additionally used when we want to strengthen the security in communication between different origins.</p>\n<p>Basically, the <code class=\"language-text\">XMLHttpRequest</code> object or <code class=\"language-text\">fetch</code> API, which is an asynchronous resource request API provided by the browser, does not include the browser‚Äôs cookie information or authentication-related headers in the request without any options. At this time, if we can include authentication-related information to request with <code class=\"language-text\">credentials</code> option.</p>\n<p>A total of 3 values can be used for this option, and the meaning of each value is as follows.</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>same-origin (default)</td>\n<td>Authentication-related information can be included in request between same origin</td>\n</tr>\n<tr>\n<td>include</td>\n<td>Authentication-related information can be included in any request</td>\n</tr>\n<tr>\n<td>omit</td>\n<td>Authentication-related information can not be included in any request</td>\n</tr>\n</tbody>\n</table>\n<p>If we use options such as <code class=\"language-text\">same-origin</code> or <code class=\"language-text\">include</code> to include authentication information in a resource request, now the browser add some strict rules to CORS policy conditions, not only check the <code class=\"language-text\">Access-Control-Allow-Origin</code> field.</p>\n<p>Let‚Äôs take a closer look at which rules have been added through communication with the local environment where I am writing this post and the Github server hosting my blog.</p>\n<p>In my blog, the value of the <code class=\"language-text\">Access-Control-Allow-Origin</code> field is set to <code class=\"language-text\">*</code>, which means that all origins are allowed. So when someone requests a resource from other origin to my blog server, they are not constrained by CORS policy violations.</p>\n<p>So, even in a local development environment such as <code class=\"language-text\">http://localhost:8000</code>, we can request and retrieve resources at will by using <code class=\"language-text\">fetch</code> API.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://evan-moon.github.io/feed.xml'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">Request\nGET https://evan-moon.github.io/feed.xml\n\n<span class=\"token header\"><span class=\"token header-name keyword\">Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">http://localhost:8000</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Referer</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">http://localhost:8000/2020/05/21/about-cors/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">Response\nGET https://evan-moon.github.io/feed.xml 200 OK\n\n<span class=\"token header\"><span class=\"token header-name keyword\">Access-Control-Allow-Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">*</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Encoding</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">gzip</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">1132748</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/xml</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Server</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">GitHub.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Status</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">200</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Also, the default value of <code class=\"language-text\">credentials</code> in Google Chrome browser is <code class=\"language-text\">same-origin</code>, which means that authentication-related information is used only within the same origin. So, in local environment, the resource request sent to <code class=\"language-text\">https://evan-moon.github.io</code> cannot contain authentication-related information such as browser cookies.</p>\n<p>That is why the browser simply checks the value of <code class=\"language-text\">Access-Control-Allow-Origin: *</code> and concludes that ‚ÄúThis request is safe‚Äù. However, if I change the <code class=\"language-text\">credentials</code> option to <code class=\"language-text\">include</code>, which means to include authentication-related information in all requests, and send the same request, the situation is a little different this time.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://evan-moon.github.io/feed.xml'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">credentials</span><span class=\"token operator\">:</span> <span class=\"token string\">'include'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Credentials is changed to \"include\"!</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>As we can see if we run this code in the browser console, this time, the <code class=\"language-text\">credentials: include</code> option was used to set the request to include authentication-related information unconditionally regardless of the same origin. So we can check that this request contains the browser‚Äôs cookie information.</p>\n<p>The Github server hosting my blog sent the same response this time, but the browser behavior changed a bit.</p>\n<blockquote>\n<p>üö® Access to fetch at ‚Äô<a href=\"https://evan-moon.github.io/feed.xml\" target=\"_blank\" rel=\"nofollow\">https://evan-moon.github.io/feed.xml</a>‚Äô from origin ‚Äô<a href=\"http://localhost:8000\" target=\"_blank\" rel=\"nofollow\">http://localhost:8000</a>‚Äô has been blocked by CORS policy: The value of the ‚ÄòAccess-Control-Allow-Origin‚Äô header in the response must not be the wildcard ‚Äô*‚Äô when the request‚Äôs credentials mode is ‚Äòinclude‚Äô.</p>\n</blockquote>\n<p>Browsers are saying that if the credentials mode is <code class=\"language-text\">include</code>, we should not use <code class=\"language-text\">*</code> in the <code class=\"language-text\">Access-Control-Allow-Origin</code> header field which meaning that all requests are allowed.</p>\n<p>Like this, when requesting a resource from other origins while authentication-related information is included in the request, the browser adds the two rules for checks for CORS policy violations.</p>\n<hr>\n<ol>\n<li><code class=\"language-text\">*</code> can not be used in <code class=\"language-text\">Access-Control-Allow-Origin</code> field, and this value is must be an explicit URL.</li>\n<li><code class=\"language-text\">Access-Control-Allow-Credentials: true</code> is must contained in response header.</li>\n</ol>\n<hr>\n<p>This scenario, including authentication, may feel a bit more complicated than other scenarios. but if we know about various scenarios for CORS policy like this can greatly shorten the time spent wandering in case of a problem caused by a violation of CORS policy in real life. So, It is recommended to be familiar with it.</p>\n<h2 id=\"how-to-solve-cors-policy-violations-problem\" style=\"position:relative;\">How to solve CORS policy violations problem.<a href=\"#how-to-solve-cors-policy-violations-problem\" aria-label=\"how to solve cors policy violations problem permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So far, we have looked at what CORS is and in what situations it is applied and violated. In this section, let‚Äôs look at what can be done when a problem occurs due to a violation of the CORS policy.</p>\n<h3 id=\"setting-access-control-allow-origin\" style=\"position:relative;\">Setting Access-Control-Allow-Origin<a href=\"#setting-access-control-allow-origin\" aria-label=\"setting access control allow origin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The most representative way to solve the problem caused by CORS policy violation is that to just set an valid value in the <code class=\"language-text\">Access-Control-Allow-Origin</code> header in the server.</p>\n<p>Using the wildcard `*‚Äô means that we are accepting requests from all origins, so you can be comfortable right now. However, if you think about it in a different sight, it means that we will receive all requests from strange origins that you don‚Äôt know about. Therefore, if we solve the problem in this way, serious security issues may arise.</p>\n<p>So, even if it‚Äôs bother as much as possible, try to specify the origin like <code class=\"language-text\">Access-Control-Allow-Origin: https://evan.github.io</code>.</p>\n<p>This header field can be added to the configuration file of server engines such as Nginx or Apache, but in this case, it is inconvenient to make complex settings, so I recommend setting it using response middleware in the source code.</p>\n<p>Named backend frameworks such as Spring, Express, and Django all provide CORS-related configuration settings or middleware libraries, so the setting itself will not be difficult.</p>\n<h3 id=\"reverse-proxying-with-webpack-dev-server\" style=\"position:relative;\">Reverse proxying with Webpack Dev Server<a href=\"#reverse-proxying-with-webpack-dev-server\" aria-label=\"reverse proxying with webpack dev server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In fact, it is no exaggeration to say that the most common violation situation of CORS policy is the case of developing front-end applications in a local environment. because it is rare to put a general origin such as <code class=\"language-text\">http://localhost:3000</code> in this important field such as <code class=\"language-text\">Access-Control-Allow-Origin</code>.</p>\n<p>Most front-end developers use Webpack and webpack-dev-server to build a development environment on their local machine. If we use the proxy feature provided by these libraries, we can bypass CORS policy very comfortably.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">proxy</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'/api'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://api.evan.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">changeOrigin</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">pathRewrite</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string-property property\">'^/api'</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>With this configuration, requests to URLs starting with <code class=\"language-text\">/api</code> in the local environment are proxyed to <code class=\"language-text\">https://api.evan.com</code>. In other words, browser thinks that it sent a request to <code class=\"language-text\">localhost:8000/api</code>, but in fact, Webpack is proxying the request to <code class=\"language-text\">https://api.evan.com</code> in background. So we can tricks the browser as if it followed the CORS policy.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKUlEQVR42pWUZ4siQRCG/fmifvCDkTUnMKGimLOucY2YUBEzBlAXQRBh63gLZrnd9Y67gZ7prq556q2qnhFVq1XK5/NkNpt5vLy8kMvlIpPJRGq1moxGI/n9fvL5fKTVaslqtZJGo2G7xWIhvV7PtkKhQKVSiUS4tVotcrvdDMSm3W7nuU6nI4VCQUqlkiQSCYnFYrYhkPBUqVQcvF6v0+vrK4nK5TIvGo0Gj2azyQPzbrdLTqeTZDIZSaVScjgcHFzYx7PdbrPtC/Dt7Y1qtRobMTDHC9lsllM9nU50PB45C6SGPcH39/EF+H0T0QHEAPB8PlMkEmGgEPS/gahvv99nCHzQwFwux2k+U/lHoLBOJBLU6XQoFApROp1mVcFgkLxe72eQfwJCSbFYpOVySfP5nEajEc1mM/J4PHxM0HmDwfAj7b8C39/fab/f03a7JZvNxmcTTYFCvIPaflf5A4gnnKbTKV0uF64TUo7H47z3eDy4rvBFo4TgT4HCUclkMrRarWi327FKNGWz2ZBwQfFwOOQ9nNOnKWNRqVQYjC6iw/f7nQGo3/V6/QSu12tKJpO0WCy4zoAIShmIG0CIBhg6Ox6PWRUUAwb47Xajj48PVocgh8OB7UIJ4MtALABC4cPhMAPRSXz4sAk/gUAgwD8JuVzOc3zvgPR6Pa5xNBpljmgymVAqleI/CDo3GAy4kzi8UI45gkAJ6oyXY7EYA+CLpqH7OAXw/wVI5OBE3AhEbgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"trap\" title=\"\" src=\"/static/e4e41838e8e9f4ac284b2b2a6214052f/6b9fd/trap.png\" srcset=\"/static/e4e41838e8e9f4ac284b2b2a6214052f/69538/trap.png 160w,\n/static/e4e41838e8e9f4ac284b2b2a6214052f/72799/trap.png 320w,\n/static/e4e41838e8e9f4ac284b2b2a6214052f/6b9fd/trap.png 518w\" sizes=\"(max-width: 518px) 100vw, 518px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <small>Webpack's Trap Card Reverse Proxying has been activated!</small>\n</center>\n<p>Even if you have built your own development environment with a combination of <a href=\"https://github.com/webpack/webpack-dev-middleware\" target=\"_blank\" rel=\"nofollow\">webpack-dev-middleware</a> and Node server, don‚Äôt worry as you can easily configure proxy by using the <a href=\"https://github.com/chimurai/http-proxy-middleware\" target=\"_blank\" rel=\"nofollow\">http-proxy-middleware</a> library. <small>(webpack-dev-server internally uses http-proxy-middleware)</small></p>\n<p>I recommend you that use this method when serving the origin of the client application and the origin of the API server are the same.</p>\n<p>Of course, in the local development environment, there is nothing wrong with webpack proxying requests, but after building the application and deploying it to the server, it is no longer an environment where webpack-dev-server runs. If so, the request will no longer be proxyed and the API request will be sent to where the client application is served, not the API server, and the request will fail.</p>\n<p>For example, if the origin of the API server is <code class=\"language-text\">https://api.evan.com</code> and the origin of the server serving the client application is <code class=\"language-text\">https://www.evan.com</code>, the following situation occurs.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">in local environment...\nGET https://api.evan.com/me 200 OK\n\nThere is no proxying logic in production environment...\nGET https://www.evan.com/api/me 404 Not Found</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Of course, we can also use the API host according to each environment by using environment variables such as <code class=\"language-text\">process.env.NODE_ENV</code> within the business logic. However, I avoid it because I don‚Äôt think it‚Äôs a good idea to include the source for this development environment in business logic.</p>\n<h3 id=\"wouldnt-it-be-possible-to-put-the-request-in-the-img-tag\" style=\"position:relative;\">Wouldn‚Äôt it be possible to put the request in the img tag?<a href=\"#wouldnt-it-be-possible-to-put-the-request-in-the-img-tag\" aria-label=\"wouldnt it be possible to put the request in the img tag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>I said that there are several exceptions to the SOP policy that allow access to resources from different origins, and one of them is a request to comply with the CORS policy. And also there are other exceptions such as executable scripts, images to be rendered, and style sheets.</p>\n<p>So wouldn‚Äôt it be possible to bypass CORS policy violation by sending a request with a different exception case‚Ä¶? Like this!</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://evanmoon.tistory.com/rss<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://evanmoon.tistory.com/rss<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Well, if we request a resource in this way, the request succeeds without violating the CORS policy. And if we look closely at the headers of these requests in the network tab of the browser‚Äôs developer tools, we can see that they contain a value of <code class=\"language-text\">Sec-Fetch-Mode: no-cors</code>.</p>\n<p>This <code class=\"language-text\">Sec-Fetch-Mode</code> header is a field that configures the request mode. If the value of this field is <code class=\"language-text\">no-cors</code>, the browser does not check for CORS policy violations even resource is served from other origins. But sadly, the browser doesn‚Äôt tell JavaScript the response of requests with this value in request header. It means we can never access the body of this response from within JavaScript code.</p>\n<p>I was also curious if there really was no way to do this, so I tried several ways, and as a result all failed. So let‚Äôs just give up on trying to circumvent CORS policy violations and follow the CORS policy as the smart guys tell us.</p>\n<h2 id=\"epilogue\" style=\"position:relative;\">Epilogue<a href=\"#epilogue\" aria-label=\"epilogue permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Perhaps the most difficult thing when solving problems caused by CORS policy violations is that the someone who has the problem and the someone who needs to solve the problem is different.</p>\n<p>As I said, CORS policies are implementation specifications for browsers, so most of the people who actually have problems with CORS policy violations are front-end developers. However, in order for us to solve this problem, the backend developer needs to set correct value in  ªAcccess-Control-Allow-Origin` field of server application‚Äôs response header.</p>\n<p>Of course, front-end developers can solve it by themselves using the proxying option of webpack-dev-server which I talked about, but this method works only in a local development environment. In other words, it is not a solution to problems in an production environment.</p>\n<p>Therefore, in the end, in order to properly solve the problem of CORS policy violations, it is inevitable that we need help from backend developers.</p>\n<p>In fact, resolving CORS policy violations is not so difficult and complex, so if one of the front-end or back-end developers is familiar with these policies, they can solve it quicker and easier than you think.</p>\n<p>However, it is hard to find a solution if neither the frontend nor the backend has experience with this problem, such as when I first experienced a CORS policy violation. It‚Äôs a very subtle problem.</p>","fields":{"slug":"20200521-about-cors-en","path":"/2020/05/21/about-cors/en/","lang":"en"},"frontmatter":{"title":"Why we need to know about CORS?","subTitle":"Navigating the Cross-Origin Minefield: What Every Developer Needs to Know","date":"Oct 06, 2020","categories":["Programming","Network","Web"],"tags":["CORS","Cross-Origin Resource Sharing","Network","Web","Web Secure","Access-Control-Allow-Origin"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/e21f60bac8f04efc2928f1d0504fd95f/d803c/thumbnail.png","srcSet":"/static/e21f60bac8f04efc2928f1d0504fd95f/d803c/thumbnail.png 320w,\n/static/e21f60bac8f04efc2928f1d0504fd95f/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/e21f60bac8f04efc2928f1d0504fd95f/fc5c5/thumbnail.webp 320w,\n/static/e21f60bac8f04efc2928f1d0504fd95f/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/e21f60bac8f04efc2928f1d0504fd95f/01fb2/thumbnail.png","srcSet":"/static/e21f60bac8f04efc2928f1d0504fd95f/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/e21f60bac8f04efc2928f1d0504fd95f/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"84c50775-bbc4-52ef-ba7f-eed918a9867c","tableOfContents":"<ul>\n<li>\n<p><a href=\"#validating-user-input\">Validating User Input</a></p>\n<ul>\n<li><a href=\"#validating-email-addresses\">Validating Email Addresses</a></li>\n<li><a href=\"#phone-numbers\">Phone Numbers</a></li>\n<li><a href=\"#passwords\">Passwords</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#extracting-specific-information-from-irregular-strings\">Extracting Specific Information from Irregular Strings</a></p>\n<ul>\n<li><a href=\"#extracting-only-numbers-from-a-string\">Extracting Only Numbers from a String</a></li>\n<li><a href=\"#extracting-monetary-values-from-a-sentence\">Extracting Monetary Values from a Sentence</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reformatting-strings\">Reformatting Strings</a></p>\n<ul>\n<li><a href=\"#masking-user-information\">Masking User Information</a></li>\n<li><a href=\"#find-and-replace-in-your-ide\">Find-and-Replace in Your IDE</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In my previous post, Finding Patterns in Irregularity: A Guide to Regular Expressions, I covered the basics of how regex works. But no matter how well you understand the fundamentals, the moment you actually need to use regex in a real situation, your mind tends to go blank. So in this post, I‚Äôd li‚Ä¶","html":"<p>In my previous post, <a href=\"/2020/07/24/about-regular-expression\">Finding Patterns in Irregularity: A Guide to Regular Expressions</a>, I covered the basics of how regex works.</p>\n<p>But no matter how well you understand the fundamentals, the moment you actually need to use regex in a real situation, your mind tends to go blank.</p>\n<p>So in this post, I‚Äôd like to walk through several real-world scenarios I‚Äôve encountered at work, with examples and explanations of how I used regex to solve them.</p>\n<p>Regex sees the most action in three situations: ‚Äúvalidating user input,‚Äù ‚Äúextracting desired information,‚Äù and ‚Äúreformatting strings.‚Äù Let‚Äôs define problems in each category and solve them with regex.</p>\n<h2 id=\"validating-user-input\" style=\"position:relative;\">Validating User Input<a href=\"#validating-user-input\" aria-label=\"validating user input permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The most common place you‚Äôll encounter regex in practice is when validating user input.</p>\n<p>You learn this naturally as you build products, but users absolutely will not use your product the way you designed it. Blindly trusting user-submitted data and shipping it straight to the server is a fairly dangerous thing to do.</p>\n<p>You told them to enter an email address, but they entered a phone number. In the worst case, someone with malicious intent might inject a script or query and send it to the server.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVR42m1R2U7DMBDMF/MnfAa/0JcKkFpKaaAtSCVNFdLch9PmPp2TSS0QIEYra7zeWe14ueGCvu9xFkVxOBw0TXNdRxAEcEVRJEkC3+/3Xdd9VzJwjLNUnuerFf/0xMvycT5/mM1mkImiuFgslsslpfSvuKkrtIzj2PfPURSnWWiRo02Uokz/lDLOzqZp2rblriePyJxOZ8uyCPFUTVytpwjb0SitdV3Tdd0wDLzihAvTNMHTNE2ShJusNl1dE0JM03BdIsm75+3ty/bOcY2qooYxKqGXZRlKRlAMC6M4i4KyqjAD7nXd5EUKB3ESUFqx8X4CZYxUaEwpN/wGHPVdP8YPt/8CBdzRctADk6iqatuObkrrt/vX3Zx45tAPwReiKArD0Pd9dgUZx766mQ5tjZzneUEQHlWR39w9b+8tW8/zce1ois2LX8DaYR5/hsm513chSzM0cxznfPZ140M48Igg9DAbfhXLz7IsuQAEmeKCsiw/AXYMKq9gkgA4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sql injection\" title=\"\" src=\"/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png\" srcset=\"/static/d3d5049ed982f669de8ee19432f6f22e/69538/sql_injection.png 160w,\n/static/d3d5049ed982f669de8ee19432f6f22e/72799/sql_injection.png 320w,\n/static/d3d5049ed982f669de8ee19432f6f22e/04abd/sql_injection.png 554w\" sizes=\"(max-width: 554px) 100vw, 554px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Modern backend frameworks and ORMs handle injection attacks automatically,<br>but raw queries are still used for performance reasons ‚Äî never let your guard down</small>\n</center>\n<p>That‚Äôs why client-side developers write validation logic to verify that user input is correct, and regex is incredibly useful in this process.</p>\n<h3 id=\"validating-email-addresses\" style=\"position:relative;\">Validating Email Addresses<a href=\"#validating-email-addresses\" aria-label=\"validating email addresses permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Email is one of the most common data formats you‚Äôll receive from users. And since email addresses have clearly defined fields and limited rules, validating whether a given string is a proper email address isn‚Äôt terribly difficult.</p>\n<p>The specifics may vary slightly between MBPs (Mailbox Providers), but according to <a href=\"https://tools.ietf.org/html/rfc2822#section-3.4.1\" target=\"_blank\" rel=\"nofollow\">RFC 2822 ¬ß Addr-spec specification</a>, which defines the internet message protocol, an email address can be described as a string with the following pattern:</p>\n<blockquote>\n<ol>\n<li>\n<p>An email address consists of a local part, <code class=\"language-text\">@</code>, and a domain.</p>\n</li>\n<li>\n<p>The local part may contain letters, digits, and special characters such as <code class=\"language-text\">!#$%&amp;'*+-/=?^_{|}~</code>. The <code class=\"language-text\">.</code> character is also allowed, but the local part must not start or end with <code class=\"language-text\">.</code>.</p>\n</li>\n<li>\n<p>The domain consists of a host and domain identifier connected by <code class=\"language-text\">.</code> (e.g., google.com).</p>\n</li>\n<li>\n<p>The local part and domain are connected by <code class=\"language-text\">@</code>.</p>\n</li>\n</ol>\n</blockquote>\n<p>Since email addresses follow a well-defined pattern, we can validate them through simple pattern matching with regex.</p>\n<h4 id=\"the-local-part\" style=\"position:relative;\">The Local Part<a href=\"#the-local-part\" aria-label=\"the local part permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The local part of an email can contain letters and digits, so we can use <code class=\"language-text\">\\w</code> ‚Äî the word group that matches both letters and digits ‚Äî to handle this easily. It also allows special characters like <code class=\"language-text\">!#$%&amp;'*+-/=?^_{|}~</code>, so a custom group like <code class=\"language-text\">[\\w!#$%&amp;'*+-/=?^_{|}~]</code> covers all valid characters for the local part.</p>\n<p>This pattern must appear at least once. If it appears zero times, the local part is empty, which isn‚Äôt a valid email address. So we append the <code class=\"language-text\">+</code> quantifier at the end, meaning ‚Äúone or more occurrences.‚Äù</p>\n<div class=\"gatsby-highlight\" data-language=\"regex\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-regex line-numbers\"><code class=\"language-regex\"><span class=\"token anchor function\">^</span><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span><span class=\"token char-set class-name\">\\w</span>!#$%&amp;'*+/=?^_{|}~-<span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">+</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>This is the basic pattern for an email local part. But RFC 2822 has one more finicky rule: ‚Äù<code class=\"language-text\">.</code> is allowed, but the local part must not start or end with <code class=\"language-text\">.</code>.‚Äù</p>\n<p>Checking that a string doesn‚Äôt start or end with <code class=\"language-text\">.</code> is straightforward using the <code class=\"language-text\">^</code> and <code class=\"language-text\">$</code> anchors, but handling <code class=\"language-text\">.</code> appearing in the middle requires a bit more thought.</p>\n<p>The simplest way to express ‚Äúa character that may or may not appear in the middle‚Äù is actually quite intuitive:</p>\n<blockquote>\n<p><code class=\"language-text\">.</code> always appears in the middle of the local part. In other words, <code class=\"language-text\">.</code> must always be followed by the <code class=\"language-text\">[\\w!#$%&amp;'*+-/=?^_{|}~]</code> pattern.</p>\n</blockquote>\n<p>To put it more precisely: the pattern <code class=\"language-text\">.something</code> may or may not appear within the local part, but if it does appear, there must always be other characters after the <code class=\"language-text\">.</code>.</p>\n<p>Expressed as regex on its own:</p>\n<div class=\"gatsby-highlight\" data-language=\"regex\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-regex line-numbers\"><code class=\"language-regex\"><span class=\"token group punctuation\">(?:</span><span class=\"token special-escape escape\">\\.</span><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span><span class=\"token char-set class-name\">\\w</span>!#$%&amp;'*+/=?^_{|}~-<span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">+</span><span class=\"token group punctuation\">)</span><span class=\"token quantifier number\">*</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Let‚Äôs start with the <code class=\"language-text\">(?:</code> and <code class=\"language-text\">)</code> wrapping. This is the same grouping mechanism as the capturing feature I explained in the previous post.</p>\n<p>Capturing groups actually serve double duty ‚Äî they capture and they group multiple expressions. When you add <code class=\"language-text\">?:</code> at the beginning of a group <code class=\"language-text\">()</code>, you‚Äôre saying ‚ÄúI want the grouping but not the capturing.‚Äù That‚Äôs why it‚Äôs called a ‚ÄúNon-Capturing Group.‚Äù</p>\n<p>Inside the group, <code class=\"language-text\">\\.</code> means the literal <code class=\"language-text\">.</code> character. Without the escape, the regex engine would interpret <code class=\"language-text\">.</code> as the character class meaning ‚Äúany character,‚Äù so we escape it to match the literal dot.</p>\n<p>After that comes the same <code class=\"language-text\">[\\w!#$%&amp;'*+/=?^_{|}~-]+</code> pattern we used before ‚Äî meaning at least one character from this set must follow the <code class=\"language-text\">.</code>.</p>\n<p>Finally, since this entire pattern may or may not appear, we append the <code class=\"language-text\">*</code> quantifier (zero or more) after the closing <code class=\"language-text\">)</code>.</p>\n<p>Combining this with the earlier <code class=\"language-text\">[\\w!#$%&amp;'*+/=?^_{|}~-]+</code> pattern gives us a complete regex for valid email local parts:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Letters + digits</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// Dot in the middle</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// Starts or ends with dot</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.bboydart91'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"the-domain\" style=\"position:relative;\">The Domain<a href=\"#the-domain\" aria-label=\"the domain permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Now that we‚Äôve defined a regex pattern for valid email local parts, all that‚Äôs left is defining one for valid domains.</p>\n<p>According to RFC 2822, the domain is ‚Äúa host and domain identifier connected by <code class=\"language-text\">.</code>‚Äù ‚Äî so the matching conditions aren‚Äôt particularly demanding.</p>\n<p>But look closely: the spec says the host and domain identifier are connected by <code class=\"language-text\">.</code>, but it doesn‚Äôt say <code class=\"language-text\">.</code> appears only once. So we need to handle cases like <code class=\"language-text\">google.com</code> as well as <code class=\"language-text\">google.co.kr</code> where <code class=\"language-text\">.</code> appears multiple times.</p>\n<p>These ambiguous patterns are easily handled with the Non-Capturing Group we just used:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^(?:\\w+\\.)+\\w+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">(?:\\w+\\.)+</code> expresses that a word group followed by <code class=\"language-text\">.</code> (like <code class=\"language-text\">google.</code>) must appear at least once, and the trailing <code class=\"language-text\">\\w+</code> requires that another word group must follow the final <code class=\"language-text\">.</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Both host and domain identifier present</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n\n<span class=\"token comment\">// Missing domain identifier</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'google'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n\n<span class=\"token comment\">// Missing host</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"combining-the-local-part-and-domain-patterns\" style=\"position:relative;\">Combining the Local Part and Domain Patterns<a href=\"#combining-the-local-part-and-domain-patterns\" aria-label=\"combining the local part and domain patterns permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Now that we have regex patterns for both valid local parts and domains, we just need to join them with <code class=\"language-text\">@</code> to satisfy the final condition: ‚Äúthe local part and domain are connected by <code class=\"language-text\">@</code>.‚Äù</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Local part pattern: ^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*</span>\n<span class=\"token comment\">// Domain pattern: (?:\\w+\\.)+\\w+$</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[\\w!#$%&amp;'*+/=?^_{|}~-]+(?:\\.[\\w!#$%&amp;'*+/=?^_{|}~-]+)*@(?:\\w+\\.)+\\w+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart.evan@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart@naver.co.kr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.bboydart91@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91@gmail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bboydart91.@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"phone-numbers\" style=\"position:relative;\">Phone Numbers<a href=\"#phone-numbers\" aria-label=\"phone numbers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Phone numbers are another piece of data you frequently receive from users. I touched on this in the previous post, <a href=\"/2020/07/24/about-regular-expression\">Finding Patterns in Irregularity</a>, but I‚Äôll revisit it here for readers who may have missed that one.</p>\n<p>Phone number formats vary by country, but the core idea is universal: digits grouped in a predictable structure separated by delimiters. Let‚Äôs use US phone numbers as an example. A standard US phone number has a 3-digit area code, a 3-digit exchange code, and a 4-digit subscriber number:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'212-555-1234'</span>\n<span class=\"token string\">'(212) 555-1234'</span>\n<span class=\"token string\">'2125551234'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Since phone numbers are just digits repeating in fixed-length groups, the regex to match them is straightforward:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\d{3}-?\\d{3}-?\\d{4}$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2125551234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'212-555-1234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'3015551234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'301-555-1234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The digit counts in each field are clearly defined, so simple quantifiers do the job. The hyphens between fields may or may not be present, so we use the <code class=\"language-text\">?</code> quantifier (zero or one) to handle them.</p>\n<p>The regex itself is straightforward, but there‚Äôs a subtle mistake developers sometimes make in practice:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Pattern that only matches numbers starting with a specific area code</span>\n<span class=\"token operator\">/</span><span class=\"token number\">212</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>This pattern only captures phone numbers with the <code class=\"language-text\">212</code> area code. If your validation is too narrow, you‚Äôll reject perfectly valid phone numbers from other regions.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAF4bZikSGP/xAAbEAACAQUAAAAAAAAAAAAAAAAAAQISEyEiMv/aAAgBAQABBQLQqki2xYHy5s//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8BMX//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEQMUH/2gAIAQEABj8CwfYxT//EABkQAQEBAQEBAAAAAAAAAAAAAAERACExQf/aAAgBAQABPyEATpndAlQ/HQ9evc7BjOi0uQ7/2gAMAwEAAgADAAAAEGPf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxDBMp//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QHY//xAAZEAEBAAMBAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8QYwEaGgeFyCchT3fIcxh2hVybek20lTmWCj0aO+ZWrXP/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"old phone\" title=\"\" src=\"/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg\" srcset=\"/static/5d22138cdc7f106c76184f763b009060/0913d/old_phone.jpg 160w,\n/static/5d22138cdc7f106c76184f763b009060/cb69c/old_phone.jpg 320w,\n/static/5d22138cdc7f106c76184f763b009060/41099/old_phone.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The 1996 \"Gulliver Phone\" ‚Äî a nostalgic relic from the early mobile era</small>\n</center>\n<p>The takeaway: when building phone number validation, think about all the formats your users might enter. Consider international prefixes, area codes with varying lengths, and optional delimiters like hyphens, dots, or parentheses. A pattern like <code class=\"language-text\">\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}</code> handles more cases gracefully.</p>\n<h3 id=\"passwords\" style=\"position:relative;\">Passwords<a href=\"#passwords\" aria-label=\"passwords permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Passwords are directly tied to user authentication and security, making them one of the more demanding fields to validate.</p>\n<p>Off the top of my head, there are roughly three common conditions ‚Äî these are baseline security requirements observed across most services:</p>\n<blockquote>\n<ul>\n<li>Must contain at least one lowercase letter, one uppercase letter, one digit, and one special character.</li>\n<li>No character may repeat three or more times consecutively.</li>\n<li>Must be at least 8 characters long.</li>\n</ul>\n</blockquote>\n<p>Depending on how detailed you want your error messages to be, you might validate these conditions individually or all at once.</p>\n<p>The first condition requires that the password contains at least one of each character type. Checking them individually is simple with expressions like <code class=\"language-text\">/[a-z]/g</code> or <code class=\"language-text\">/\\d/g</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'test1234!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Individual checks</span>\n<span class=\"token keyword\">const</span> hasNumberPattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasLowerCasePattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-z]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasUpperCasePattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[A-Z]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> hasSpecialCharPattern <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\W</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hasNumberPattern<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Password must contain at least one number...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hasLowerCasePattern<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Password must contain at least one lowercase letter...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>But the challenge arises when you want to check all conditions at once. A custom group like <code class=\"language-text\">[a-zA-Z\\d]</code> would pass if just one type is present, and a pattern like <code class=\"language-text\">[a-z]+[A-Z]+</code> would enforce a specific order ‚Äî ‚Äúlowercase must come before uppercase‚Äù ‚Äî which isn‚Äôt what we want.</p>\n<p>This is where we can use a slightly tricky technique.</p>\n<h4 id=\"validating-with-lookaround\" style=\"position:relative;\">Validating with Lookaround<a href=\"#validating-with-lookaround\" aria-label=\"validating with lookaround permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The technique is Positive Lookahead (<code class=\"language-text\">(?=)</code>), which matches a pattern based on what follows it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Match \"https\" only when followed by \"://\"</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">https(?=:\\/\\/)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">regex<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// null</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['https']</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Expressions that match based on what appears before or after a pattern are called ‚ÄúLookaround,‚Äù and they come in four flavors:</p>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Pattern</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Positive Lookahead</td>\n<td><code class=\"language-text\">abc(?=123)</code></td>\n<td>Match <code class=\"language-text\">abc</code> when followed by <code class=\"language-text\">123</code></td>\n</tr>\n<tr>\n<td>Negative Lookahead</td>\n<td><code class=\"language-text\">abc(?!123)</code></td>\n<td>Match <code class=\"language-text\">abc</code> when NOT followed by <code class=\"language-text\">123</code></td>\n</tr>\n<tr>\n<td>Positive Lookbehind</td>\n<td><code class=\"language-text\">(?&lt;=123)abc</code></td>\n<td>Match <code class=\"language-text\">abc</code> when preceded by <code class=\"language-text\">123</code></td>\n</tr>\n<tr>\n<td>Negative Lookbehind</td>\n<td><code class=\"language-text\">(?&lt;!123)abc</code></td>\n<td>Match <code class=\"language-text\">abc</code> when NOT preceded by <code class=\"language-text\">123</code></td>\n</tr>\n</tbody>\n</table>\n<p>True to the name ‚Äúlook around,‚Äù these expressions check whether a specific pattern exists before or after the target. But by understanding how the regex engine processes them, we can repurpose them to check whether a certain pattern appears at least once anywhere in a string.</p>\n<p>Lookaround expressions don‚Äôt actually consume characters ‚Äî they act as boundaries, similar to the <a href=\"/2020/07/24/about-regular-expression/#anchors-that-match-boundaries-not-characters\">\\b anchor</a>. The crucial characteristic is that even when the regex engine successfully matches a character via Lookaround, it then acts as if that match never happened.</p>\n<p>Let me illustrate with a detailed example. If we apply the expression <code class=\"language-text\">q(?=u)i</code> to the string <code class=\"language-text\">quit</code>, the regex engine works like this:</p>\n<blockquote>\n<ol>\n<li>Engine tries to match <code class=\"language-text\">q</code> in the string. The literal <code class=\"language-text\">q</code> in the regex matches ‚Äî success.</li>\n<li>Engine tries to match <code class=\"language-text\">u</code> in the string. The <code class=\"language-text\">u</code> inside <code class=\"language-text\">(?=u)</code> matches ‚Äî success. Then the engine ‚Äúforgets‚Äù that this Lookaround match ever happened.</li>\n<li>Engine now tries to match the pattern <em>after</em> the Lookaround against <code class=\"language-text\">u</code> again.</li>\n<li>But the next expression is <code class=\"language-text\">i</code>. It doesn‚Äôt match <code class=\"language-text\">u</code> ‚Äî failure.</li>\n</ol>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">q(?=u)i</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'quit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">null</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>This makes sense when you think about it: <code class=\"language-text\">(?=u)</code> is merely a condition for what should follow <code class=\"language-text\">q</code> ‚Äî it‚Äôs not actually trying to capture <code class=\"language-text\">u</code>. That‚Äôs why the regex engine tries to match <code class=\"language-text\">u</code> again with the next expression after the Lookaround.</p>\n<p>If we change the literal after <code class=\"language-text\">(?=u)</code> from <code class=\"language-text\">i</code> to <code class=\"language-text\">u</code>, condition 4 passes and we get a match:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">q(?=u)u</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'quit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"qu\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The key insight is that the regex engine treats a Lookaround match as a ‚Äúpreliminary‚Äù match rather than a ‚Äúreal‚Äù one, so it re-attempts matching the same character with whatever expression comes after the Lookaround.</p>\n<p>By exploiting this behavior, we can effectively use Lookaround as an <code class=\"language-text\">if</code> statement. Let‚Äôs use this technique to check one of our password conditions:</p>\n<blockquote>\n<p>Must contain at least one lowercase letter, one uppercase letter, one digit, and one special character.</p>\n</blockquote>\n<p>Checking all at once would make the expression long, so let‚Äôs start with just one condition: does the password contain at least one digit?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d).</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abc123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The regex matched <code class=\"language-text\">1</code> because <code class=\"language-text\">(?=\\d)</code> successfully matched <code class=\"language-text\">1</code>, and then the engine re-attempted the match on the same character using <code class=\"language-text\">.</code> ‚Äî which succeeded.</p>\n<p>In pseudocode, it works like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">delete</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\d)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Pattern matched, discard it</span>\n  <span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Re-attempt with the next pattern on the same character</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>In other words, the fact that the engine reached the <code class=\"language-text\">.</code> literal means the preceding <code class=\"language-text\">(?=\\d)</code> already matched that character successfully.</p>\n<p>Now that we‚Äôve handled digits, we just chain the remaining conditions ‚Äî lowercase, uppercase, and special characters ‚Äî in the same way:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// \\d = digit</span>\n<span class=\"token comment\">// [a-z] = lowercase letter</span>\n<span class=\"token comment\">// [A-Z] = uppercase letter</span>\n<span class=\"token comment\">// [\\W] = non-word character (not a letter or digit)</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\\d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>a<span class=\"token operator\">-</span>z<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token constant\">A</span><span class=\"token operator\">-</span><span class=\"token constant\">Z</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">=</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>\\<span class=\"token constant\">W</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>g</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">\\W</code> character class technically matches any non-word character, which includes not just special characters but also characters like CJK or Cyrillic. Listing every special character individually would be tedious, so I‚Äôm using the shorthand here. <del>(Laziness is a virtue.)</del> <small>(In production, you‚Äôd want to explicitly list the allowed special characters like <code class=\"language-text\">!@#$%^...</code>.)</small></p>\n<p>Using the same approach, we can add the remaining conditions ‚Äî ‚Äúno character repeats 3+ times consecutively‚Äù and ‚Äúat least 8 characters‚Äù ‚Äî into a single expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W])(?!.*(.)\\1{2}).{8,}</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>Expression</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">(?=.*\\d)</code></td>\n<td>Contains at least one <code class=\"language-text\">\\d</code> (digit)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[a-z])</code></td>\n<td>Contains at least one <code class=\"language-text\">[a-z]</code> (lowercase)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[A-Z])</code></td>\n<td>Contains at least one <code class=\"language-text\">[A-Z]</code> (uppercase)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?=.*[\\W])</code></td>\n<td>Contains at least one <code class=\"language-text\">[\\W]</code> (special character)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">(?!.*(.)\\1{2})</code></td>\n<td>No character repeats 3+ times consecutively</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">.{8,}</code></td>\n<td>At least 8 characters that pass all above conditions</td>\n</tr>\n</tbody>\n</table>\n<p>This expression only reaches the final <code class=\"language-text\">.{8,}</code> after all the Positive and Negative Lookahead conditions pass, so any string that matches has satisfied every condition we defined.</p>\n<p>Of course, validating passwords with a single regex like this means you can only show a generic ‚ÄúInvalid password‚Äù error message, so in practice it‚Äôs more common to check conditions individually. But Lookaround-based conditional checking is such a useful technique that I thought it was worth explaining in detail.</p>\n<h2 id=\"extracting-specific-information-from-irregular-strings\" style=\"position:relative;\">Extracting Specific Information from Irregular Strings<a href=\"#extracting-specific-information-from-irregular-strings\" aria-label=\"extracting specific information from irregular strings permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Most of the time, regex is used for validating user input. But the true raison d‚Äô√™tre of regex isn‚Äôt merely validation ‚Äî it‚Äôs finding and extracting specific patterns from within irregular data.</p>\n<p>This time, I want to share some real-world scenarios I‚Äôve encountered, along with how I used regex to solve them.</p>\n<h3 id=\"extracting-only-numbers-from-a-string\" style=\"position:relative;\">Extracting Only Numbers from a String<a href=\"#extracting-only-numbers-from-a-string\" aria-label=\"extracting only numbers from a string permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Extracting just the numbers from a given string is a surprisingly common problem in practice. I‚Äôve frequently needed to pull out numbers representing amounts or ages from source data I couldn‚Äôt modify directly, in order to normalize the data or display it in a different format.</p>\n<p>For example, imagine an API that returns price information not as a numeric <code class=\"language-text\">1000</code> but as a formatted string like <code class=\"language-text\">$1,000</code>. And your client needs this business logic:</p>\n<blockquote>\n<p>Which is the larger amount: ‚Äù<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>000</mn><mi mathvariant=\"normal\">\"</mi><mi>o</mi><mi>r</mi><mi mathvariant=\"normal\">\"</mi></mrow><annotation encoding=\"application/x-tex\">1,000\" or \"</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">000\"</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord\">\"</span></span></span></span></span>2,000‚Äù?</p>\n</blockquote>\n<p>Ideally, the raw data would come as a numeric <code class=\"language-text\">1000</code> and the display formatting would happen on the client side. But modifying the API might require auditing everywhere it‚Äôs used and updating every client that consumes it ‚Äî so sometimes you just leave it as-is for risk management.</p>\n<p>In this situation, the developer needs to strip everything except the digits from <code class=\"language-text\">$1,000</code>, convert it to <code class=\"language-text\">1000</code>, and then compare the two amounts.</p>\n<p>Without regex, you‚Äôd have to split the string, iterate through the resulting array checking whether each character is a digit, or call <code class=\"language-text\">String.prototype.replace</code> multiple times:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">NUMBERS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'4'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'6'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'7'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'8'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'9'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'$1,000'</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token constant\">NUMBERS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Or</span>\n\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'$1,000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'$'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The <code class=\"language-text\">String.prototype.replace</code> approach looks simple enough, but its limitation is that if any unexpected characters sneak in, you need to add another <code class=\"language-text\">replace</code> for each one. <small>(The moment a string like <code class=\"language-text\">$1,000...maybe?</code> shows up, you‚Äôre in trouble.)</small></p>\n<p>With regex, you can solve the same problem far more concisely and flexibly:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'$1,000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^0-9]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Or</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'$1,000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^\\d]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Or</span>\n<span class=\"token keyword\">const</span> amount <span class=\"token operator\">=</span> <span class=\"token string\">'$1,000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\D</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>JavaScript‚Äôs <code class=\"language-text\">String.prototype.replace</code> method searches for a pattern and replaces it with the second argument. Since <code class=\"language-text\">replace</code> supports regex, we can catch ‚Äúeverything that isn‚Äôt a digit‚Äù and replace it with an empty string ‚Äî effectively solving our ‚Äúextract only numbers‚Äù problem.</p>\n<p>The expressions <code class=\"language-text\">[^0-9]</code>, <code class=\"language-text\">[^\\d]</code>, and <code class=\"language-text\">\\D</code> all mean ‚Äúcharacters that are not digits,‚Äù letting us strip everything non-numeric in one shot.</p>\n<p>Of course, you can solve this without regex by combining <code class=\"language-text\">split</code>, <code class=\"language-text\">filter</code>, <code class=\"language-text\">join</code>, and <code class=\"language-text\">replace</code>. But in the real world, problems far more complex than ‚Äúfind the numbers in a string‚Äù are the norm.</p>\n<p>Let‚Äôs look at a slightly harder problem.</p>\n<h3 id=\"extracting-monetary-values-from-a-sentence\" style=\"position:relative;\">Extracting Monetary Values from a Sentence<a href=\"#extracting-monetary-values-from-a-sentence\" aria-label=\"extracting monetary values from a sentence permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>This time, we‚Äôll tackle a problem in the same vein but more complex. Instead of extracting digits from a clearly monetary string like <code class=\"language-text\">$1,000</code>, we need to find and extract monetary values from a long natural-language sentence.</p>\n<p>Here‚Äôs an example paragraph ‚Äî drawn from my wishful thinking about getting rich:</p>\n<blockquote>\n<p>The global luxury goods market reached approximately <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>362</mn><mi>b</mi><mi>i</mi><mi>l</mi><mi>l</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>i</mi><mi>n</mi><mn>2023.</mn><mi>T</mi><mi>h</mi><mi>e</mi><mi>a</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">362 billion in 2023. The average consumer spent around </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">362</span><span class=\"mord mathnormal\">bi</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">ll</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">nin</span><span class=\"mord\">2023.</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">eco</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">ers</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ro</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span></span></span></span></span>1,200 per year on luxury items. According to a recent survey, roughly 45% of millennials purchased at least one luxury item, with an average transaction value of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>890</mn><mi>p</mi><mi>e</mi><mi>r</mi><mi>p</mi><mi>u</mi><mi>r</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>T</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>r</mi><mi>o</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>t</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>o</mi><mi>w</mi><mi>t</mi><mi>o</mi></mrow><annotation encoding=\"application/x-tex\">890 per purchase. The market is projected to grow to </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">890</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">rc</span><span class=\"mord mathnormal\">ha</span><span class=\"mord mathnormal\">se</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">ma</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">ro</span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal\">ec</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">ro</span><span class=\"mord mathnormal\">wt</span><span class=\"mord mathnormal\">o</span></span></span></span></span>500 billion by 2030.</p>\n</blockquote>\n<p>If we need to extract only the monetary data from this long sentence, we can break the problem into two smaller problems:</p>\n<blockquote>\n<ol>\n<li>From all the numbers in the text, pick out only the ones that represent monetary values.</li>\n<li>Convert values like <code class=\"language-text\">$362 billion</code> into a numeric <code class=\"language-text\">362000000000</code>.</li>\n</ol>\n</blockquote>\n<p>The second problem is a bit much for regex alone, so let‚Äôs focus on the first: ‚Äúpick out only the monetary values from all the numbers.‚Äù</p>\n<p>If we just used <code class=\"language-text\">\\d</code> or <code class=\"language-text\">[0-9]</code>, we‚Äôd also catch numbers from <code class=\"language-text\">2023</code>, <code class=\"language-text\">45%</code>, and <code class=\"language-text\">2030</code> ‚Äî which aren‚Äôt monetary values. So a simple approach won‚Äôt cut it.</p>\n<p>But the real power of regex shines in situations like this. Even though monetary values seem to appear irregularly in natural language, they actually follow a specific pattern. In English, monetary values are preceded by a currency symbol like <code class=\"language-text\">$</code>:</p>\n<p>Using this observation, we can write a regex to find dollar amounts:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'The global luxury goods market reached approximately $362 billion in 2023. The average consumer spent around $1,200 per year on luxury items. According to a recent survey, roughly 45% of millennials purchased at least one luxury item, with an average transaction value of $890 per purchase. The market is projected to grow to $500 billion by 2030.'</span><span class=\"token punctuation\">;</span>\n\nstring<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$[\\d,]+(?:\\s(?:billion|million|thousand))?</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"$362 billion\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"$1,200\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"$890\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"$500 billion\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">String.prototype.match</code> finds all substrings that match the given regex. Since monetary values appear multiple times in the sentence, <code class=\"language-text\">match</code> returns all of them.</p>\n<p>The regex <code class=\"language-text\">\\$[\\d,]+(?:\\s(?:billion|million|thousand))?</code> breaks down as:</p>\n<blockquote>\n<p><code class=\"language-text\">\\$</code>: A literal <code class=\"language-text\">$</code> sign (escaped because <code class=\"language-text\">$</code> is a special regex character)</p>\n<p><code class=\"language-text\">[\\d,]+</code>: One or more digits or commas</p>\n<p><code class=\"language-text\">(?:\\s(?:billion|million|thousand))?</code>: Optionally followed by a space and a magnitude word</p>\n</blockquote>\n<p>In the previous post, I covered simple expressions like <code class=\"language-text\">[^\\d]</code>. This time the regex is more complex because we‚Äôre dealing with a multi-condition pattern ‚Äî but the underlying principle is the same. We‚Äôre combining character classes, quantifiers, and non-capturing groups to precisely describe the pattern we‚Äôre looking for.</p>\n<p>Regex is just a tool for finding patterns in strings. Beyond extracting data like this, it can validate user input, parse HTML or JavaScript code, parse file formats ‚Äî it‚Äôs useful virtually everywhere, making it a skill that pays dividends for a long time.</p>\n<h2 id=\"reformatting-strings\" style=\"position:relative;\">Reformatting Strings<a href=\"#reformatting-strings\" aria-label=\"reformatting strings permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As hinted at in earlier examples, regex is also incredibly useful when you need to transform strings into a specific format.</p>\n<p>Think: masking sensitive user information with <code class=\"language-text\">*</code> characters, or inserting <code class=\"language-text\">-</code> between digits in a phone or credit card number for readability.</p>\n<p>Regex‚Äôs capturing feature is particularly effective here. Capturing is useful in many situations, but it truly shines when you need to grab specific parts of a string and replace the rest.</p>\n<h3 id=\"masking-user-information\" style=\"position:relative;\">Masking User Information<a href=\"#masking-user-information\" aria-label=\"masking user information permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When building services, you sometimes need to display a list of users while masking their sensitive information. To signal that these are real people (not bots), you typically mask only part of the data rather than all of it.</p>\n<p>For names, you might show the first character and mask the rest. For phone numbers, you might reveal the area code and first couple of digits while masking everything else.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">mask</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> headCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Get the first n characters of the string</span>\n  <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^.{</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>headCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Mask everything except head</span>\n  <span class=\"token keyword\">const</span> tails <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Combine head and tails</span>\n  <span class=\"token keyword\">return</span> head <span class=\"token operator\">+</span> tails<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Evan Moon'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'01012345678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Ev** ****'</span>\n<span class=\"token string\">'01012******'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">mask</code> function takes the number of characters to leave unmasked as an argument, so we need to construct the regex dynamically using a <code class=\"language-text\">RegExp</code> object rather than the <code class=\"language-text\">/</code> literal syntax.</p>\n<p>But simple character counting can cause problems in cases like these:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Spaces count toward the character limit</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'E Van Moon'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Hyphens count too</span>\n<span class=\"token function\">mask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'010-1234-5678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Intended to skip 2 characters, but only 1 is visible</span>\n<span class=\"token string\">'E ********'</span>\n\n<span class=\"token comment\">// Intended to skip 5 characters, but only 4 are visible</span>\n<span class=\"token string\">'010-1********'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This technically works, but <code class=\"language-text\">E V** ****</code> or <code class=\"language-text\">010-12**-****</code> looks much cleaner ‚Äî excluding spaces and hyphens from the character count improves both completeness and readability.</p>\n<p>The tricky part is counting characters while skipping spaces and <code class=\"language-text\">-</code>. But regex quantifiers count <em>patterns</em>, not individual characters:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Did the (?:) grouped pattern appear 2 times?</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span>\\<span class=\"token constant\">S</span><span class=\"token punctuation\">[</span>\\s<span class=\"token operator\">-</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>This expression means: a non-space character (<code class=\"language-text\">\\S</code>) optionally followed by spaces or <code class=\"language-text\">-</code>, repeated 2 times. For a string like <code class=\"language-text\">E E-</code>, it groups <code class=\"language-text\">E\\s</code> or <code class=\"language-text\">E-</code> as a single unit for counting.</p>\n<p>Remember: to apply a quantifier to a complex pattern, you need to wrap it in <code class=\"language-text\">(?:)</code> (Non-Capturing Group) or <code class=\"language-text\">()</code> (Capturing Group).</p>\n<p>Using this property of regex quantifiers, we can easily satisfy both conditions ‚Äî skip the first n visible characters and exclude spaces/hyphens from the count:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">enhancedMask</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> headCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Group \\S[\\s-]* patterns n times and assign to head</span>\n  <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^(?:\\\\S[\\\\s-]*){</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>headCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Mask everything in the tail except spaces and hyphens</span>\n  <span class=\"token keyword\">const</span> tails <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^\\s-]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Combine head and tails</span>\n  <span class=\"token keyword\">return</span> head <span class=\"token operator\">+</span> tails<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">enhancedMask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'E Van Moon'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">enhancedMask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'010-1234-5678'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'E V** ****'</span>\n<span class=\"token string\">'010-12**-****'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"find-and-replace-in-your-ide\" style=\"position:relative;\">Find-and-Replace in Your IDE<a href=\"#find-and-replace-in-your-ide\" aria-label=\"find and replace in your ide permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Most IDEs and code editors support regex in their Find and Replace features. Since code is essentially a collection of strings with specific patterns, regex can be far more effective than plain text search.</p>\n<p>There are many examples of using regex to find and modify code, but let me share a scenario I personally stumble into frequently.</p>\n<p>In JavaScript modules, when you export a constant or function without the <code class=\"language-text\">default</code> keyword, the module evaluates as an object:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Test</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Test</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>You typically use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\" target=\"_blank\" rel=\"nofollow\">destructuring assignment</a> to access the value you want. The problem arises when the export style changes mid-development:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Test</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Test</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Export style changed</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Test<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Module not found: Error: Cannot resolve 'file' or 'directory'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>When you‚Äôre working fast, it‚Äôs easy to change a module‚Äôs export style without thinking about all the places that import it. In such cases, you might revert the export, but if the developer intentionally switched to <code class=\"language-text\">export default</code>, you need to find and update every import statement.</p>\n<p>Since most IDEs support regex in Find and Replace, we can handle this quickly:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 528px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGElEQVR42mVSa2+bQBDkj0SNHXCwAfOG443BNgY/kjhxIjVqFUVVlR9QqT9/OpxSqVI/jI5bdndmd05Jy0cMzTdoMw/1qkdZdZhMLHy5NnA9MbEwQphWDNfLYC2FhGH40Kwcoj7h7viMZn1CUfawLAGlLi/4PfyCqrkwlxlcv4LtFliYCYtz3uvPOxtZKbxgTYISNzMfptfC9ltYXg3DqaGbKZS2fkGxeoI+j5GVA/rhCcPhGXV7wmb3iG64oN0+wA1WRI1+/46mfcVM9+HFPUynQhj0CMIBtwsqfNz/wPHwDl2PyFCQrYOqCyLEjCQa49o8YoMYllNQYSlX03LMFUmb9oBut8f5ckIQlVBEcoQZbnGrBxBJy2CDNNtAXwSYTC1Mb2xiiQkxVW3Mbj3u25EkdrhjXgo3KZGUBZYkVIr6Gd+7D1mY5luOe0HV7CmfykjyP0KoM5f/YzhRj7mZQZ2PubGMKXl2j5+bD7L6yIotHTugrHuaEElFN5rzD1zGHOn+WGwHW8yNBJorICjmeP8VSpidYImeo/gct6LsHJFo6aiQxSqJVD6pv81Gt12vkHHdiKXi08MrLi9vGPiEFFGcEWd38tmMoyzMmAYEZI5lU30RytOyU57JZ3zMYdyu5C5zTlS1e6lSCcSAQOyhUWFEhaNrFRNyjp9ma3muN0f53e3umFPj6konkZCmjDv0nQ5ZdIbvdvgDLCpH2gIHBEIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"use regex\" title=\"\" src=\"/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png\" srcset=\"/static/cd303e1a62e4fc55b0c2dc0621732980/69538/use_regex.png 160w,\n/static/cd303e1a62e4fc55b0c2dc0621732980/72799/use_regex.png 320w,\n/static/cd303e1a62e4fc55b0c2dc0621732980/4af8e/use_regex.png 528w\" sizes=\"(max-width: 528px) 100vw, 528px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Regex lets you target exactly the parts you need</small>\n</center>\n<p>The challenge is that in <code class=\"language-text\">import { Test } from 'components/Test'</code>, parts like <code class=\"language-text\">import</code> and <code class=\"language-text\">from 'components/Test'</code> need to stay unchanged. And since we‚Äôre only changing the import style, not renaming the variable, we want to keep <code class=\"language-text\">Test</code> as-is.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Change this</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Test <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Into this</span>\n<span class=\"token keyword\">import</span> Test <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Test'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Regex capturing makes this precise transformation possible ‚Äî capture exactly the parts you want to keep and replace the rest:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> targetCode <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">import { Component } from 'components/Test';</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\ntargetCode<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\{\\s(Component)\\s\\}</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">import Component from 'components/Test';</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Using regex for find-and-replace in your IDE really shines during migration work ‚Äî library upgrades with breaking changes, large-scale refactors, and the like. <del>(In truth, I just make this mistake often enough that it made a good example.)</del></p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Regular expressions are an abstract tool for matching patterns in strings, which gives them an enormous range of applications.</p>\n<p>Beyond the examples in this post, regex can be used to parse files, normalize scraped data, quickly search log files, and much more. Plus, regex syntax barely differs between programming languages, so once you learn it, you‚Äôll keep reaching for it across your entire career.</p>\n<p>That‚Äôs all for this post on how regex is actually used.</p>","fields":{"slug":"20200815-regex-example-en","path":"/2020/08/15/regex-example/en/","lang":"en"},"frontmatter":{"title":"How Do You Actually Use Regex?","subTitle":"A journey of finding order in irregular data","date":"Sep 15, 2020","categories":["Programming"],"tags":["Regex","Regular Expression","Extracting Numbers","Lookahead","Lookbehind","Lookaround","Capturing Group"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/fc5c5/thumbnail.webp 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"5378ff90-1b70-5262-9faf-4d5f6558180f","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-even-is-regex\">What Even Is Regex?</a></p>\n</li>\n<li>\n<p><a href=\"#basic-regex-features\">Basic Regex Features</a></p>\n<ul>\n<li><a href=\"#character-classes-catching-groups-of-characters\">Character Classes: Catching Groups of Characters</a></li>\n<li><a href=\"#anchors-catching-boundaries-not-characters\">Anchors: Catching Boundaries, Not Characters</a></li>\n<li><a href=\"#flags-regex-options\">Flags: Regex Options</a></li>\n<li><a href=\"#quantifiers-how-many-times-a-pattern-appears\">Quantifiers: How Many Times a Pattern Appears</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#nice-to-know-advanced-features\">Nice-to-Know Advanced Features</a></p>\n<ul>\n<li><a href=\"#capturing-remembering-patterns\">Capturing: Remembering Patterns</a></li>\n<li><a href=\"#greedy-vs-lazy\">Greedy vs. Lazy</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"Developers are people who analyze problems described in natural language, then design and write programs to solve them. This work often involves filtering out the useful bits from a flood of unstructured information, or abstracting haphazardly declared classes and variables into clean structures.","html":"<p>Developers are people who analyze problems described in natural language, then design and write programs to solve them. This work often involves filtering out the useful bits from a flood of unstructured information, or abstracting haphazardly declared classes and variables into clean structures.</p>\n<!-- more -->\n<p>Many skills contribute to doing this well, but one especially important one is the ability to find regularity ‚Äî patterns ‚Äî within seemingly irregular information.</p>\n<p>Among the most common problems in everyday business contexts are things like parsing files or validating user input: extracting desired information by finding patterns in irregular strings. But the sheer number of edge cases means that trying to solve these with plain programming alone can leave you drowning in a spectacular nest of <code class=\"language-text\">if</code> statements.</p>\n<p>This is exactly the kind of problem that regular expressions ‚Äî regex ‚Äî make easy to solve.</p>\n<h2 id=\"what-even-is-regex\" style=\"position:relative;\">What Even Is Regex?<a href=\"#what-even-is-regex\" aria-label=\"what even is regex permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The full name is ‚Äúregular expression,‚Äù but in practice it goes by regex, regexp, or various affectionate nicknames in different developer communities.</p>\n<p>Regex is a type of expression that can represent patterns, and by applying these expressions to strings, you can pluck out exactly the parts you want ‚Äî an incredibly convenient tool. But thanks to its notoriously hostile readability, regex tends to be met with a certain‚Ä¶ reluctance.</p>\n<p>I use regex fairly often myself, but unless it‚Äôs a pattern I write frequently, I always Google the expression and verify it on <a href=\"https://regexr.com/\" target=\"_blank\" rel=\"nofollow\">RegExr</a> before using it.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB32UTM6UU0wG1Av/EABoQAQEBAQADAAAAAAAAAAAAAAECAxEAEiH/2gAIAQEAAQUCvXlNEnfLZ96iED5pAumJZJw//8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQMBAT8BIf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABsQAAICAwEAAAAAAAAAAAAAAAERABACITFB/9oACAEBAAY/Al5GclSLm+WiShX/xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFRgaH/2gAIAQEAAT8hW+aewNVPZdBHDLg9NkzifghA79iJfIG5pUpS2jE//9oADAMBAAIAAwAAABBsPwP/xAAaEQEAAQUAAAAAAAAAAAAAAAABEBEhQWHB/9oACAEDAQE/EBat4OdvI//EABcRAQEBAQAAAAAAAAAAAAAAAAABMUH/2gAIAQIBAT8Qmq6r/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARIUExUYH/2gAIAQEAAT8QaOoLcX3IcLIJ/YXBgInSPUmgph2AgAcL0SHQoDG3nJZzdCys2e0w2Fr9chA0ILrwJ//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"regex meme\" title=\"\" src=\"/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg\" srcset=\"/static/cf1e76c74723af6eb45ee626ca4269a9/0913d/regex_meme.jpg 160w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/cb69c/regex_meme.jpg 320w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/c08c5/regex_meme.jpg 640w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/6a068/regex_meme.jpg 960w,\n/static/cf1e76c74723af6eb45ee626ca4269a9/e5166/regex_meme.jpg 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Memes like this exist because regex genuinely looks like gibberish at first glance</small>\n</center>\n<p>But since regex‚Äôs primary use case is finding patterns in strings ‚Äî a situation developers encounter constantly ‚Äî you‚Äôll inevitably cross paths with regex sooner or later. There‚Äôs no escaping it. <del>(Just accept your fate and it gets easier.)</del></p>\n<p>Of course, staring at regex cold makes you think ‚Äúwhat on earth does this mean?‚Äù But even the longest regular expression is just small expressions combined together, so when you break them apart, they‚Äôre often simpler than you‚Äôd expect.</p>\n<h2 id=\"basic-regex-features\" style=\"position:relative;\">Basic Regex Features<a href=\"#basic-regex-features\" aria-label=\"basic regex features permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Regex has a wide variety of keywords, and the entirety of using regex comes down to combining these keywords to build expressions that capture the patterns you want. In other words, the most fundamental way to get started with regex is to memorize these keywords.</p>\n<p>You don‚Äôt need to know every keyword ‚Äî just searching ‚Äúregex‚Äù on Google yields an avalanche of references. But memorizing at least the basics means you can solve simple pattern matching problems without consulting Google, which is a win for productivity. <del>(Memorizing all of them is impossible anyway.)</del></p>\n<p>Combining these features appropriately for each situation is what determines how well you use regex. So in this post, I‚Äôll give a quick taste of the features regex provides, and in the next post, I‚Äôll go deeper with practical, real-world examples.</p>\n<h3 id=\"character-classes-catching-groups-of-characters\" style=\"position:relative;\">Character Classes: Catching Groups of Characters<a href=\"#character-classes-catching-groups-of-characters\" aria-label=\"character classes catching groups of characters permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Regex has various keywords that represent specific characters or groups of characters. These are called ‚Äúcharacter classes.‚Äù</p>\n<p>Since the core function of regex is finding the characters you want, knowing the types and roles of character classes lets you roughly decipher simple regex patterns without Googling.</p>\n<h4 id=\"lets-start-by-finding-specific-characters\" style=\"position:relative;\">Let‚Äôs Start by Finding Specific Characters<a href=\"#lets-start-by-finding-specific-characters\" aria-label=\"lets start by finding specific characters permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Regex is packed with character classes like <code class=\"language-text\">\\d</code> and <code class=\"language-text\">\\w</code> whose meanings aren‚Äôt obvious at a glance. But these cryptic keywords aren‚Äôt the only option. For example, to extract a specific word from a long sentence, you can just write:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">hello</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Since regular characters work freely in regex, keywords like <code class=\"language-text\">\\w</code> and <code class=\"language-text\">\\s</code> that represent character groups must be escaped with <code class=\"language-text\">\\</code> in front. In other words, <code class=\"language-text\">\\s</code> is a keyword, but <code class=\"language-text\">s</code> is just the letter s.</p>\n<p>Because of this escaping, people unfamiliar with regex often get confused about whether something is <code class=\"language-text\">s</code> or the whitespace keyword <code class=\"language-text\">\\s</code>. There‚Äôs no magic tip here ‚Äî when you see something like <code class=\"language-text\">/\\/s\\.s.{1,2}/</code>, just read it by slicing from left to right, one token at a time.</p>\n<p>Using specific characters like <code class=\"language-text\">hello</code> in a regex can find exact patterns in strings, but if all you need is to find a specific string, you don‚Äôt need regex at all ‚Äî <code class=\"language-text\">String.prototype</code> methods like <code class=\"language-text\">includes</code>, <code class=\"language-text\">indexOf</code>, or <code class=\"language-text\">search</code> with a plain string argument work just fine.</p>\n<p>The real power of regex lies not in finding specific strings, but in finding <em>groups</em> of strings matching a pattern.</p>\n<h4 id=\"lets-build-custom-character-groups\" style=\"position:relative;\">Let‚Äôs Build Custom Character Groups<a href=\"#lets-build-custom-character-groups\" aria-label=\"lets build custom character groups permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Imagine you need to validate that user input contains only English letters. English has 48 characters counting both upper and lowercase, so you could build a map or array of the alphabet and check each character, or in the worst case, chain 48 conditions with <code class=\"language-text\">||</code>. <del>(49 including exception handling‚Ä¶)</del></p>\n<p>We can all agree that‚Äôs not the coolest approach. And as conditions pile up ‚Äî checking for numbers too, or verifying that letters repeat n times ‚Äî the code just keeps getting more complex.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> alphabet <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isAlphabet</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">string</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span>char <span class=\"token operator\">=></span> alphabet<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>char<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <small>For simple English-only validation, you could handle it like this</small>\n  <br />\n  <br />\n</center>\n<p>So regex also lets you create custom groups to catch the characters you want. The syntax is simple: just put the characters you want to group inside square brackets (<code class=\"language-text\">[]</code>).</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Match x or y or z!</span>\n<span class=\"token operator\">/</span><span class=\"token punctuation\">[</span>xyz<span class=\"token punctuation\">]</span><span class=\"token operator\">/</span>\n\n<span class=\"token comment\">// Match anything that's NOT x, y, or z!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^xyz]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// Match a through z!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-z]</span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// Match a-z and A-Z!</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[a-zA-Z]</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Inside the brackets, you‚Äôre not limited to individual characters ‚Äî you can use <code class=\"language-text\">-</code> to express character ranges, and adding <code class=\"language-text\">^</code> at the start means ‚ÄúNOT.‚Äù</p>\n<p>The range syntax like <code class=\"language-text\">a-z</code> refers to ranges in the <a href=\"http://www.asciitable.com/\" target=\"_blank\" rel=\"nofollow\">ASCII Table</a>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 121.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42pWVW2/TQBCFF9GQxLk5iR2HYGgFlNhJCIUWIR6QEIgXxP//PcyKb6PTiVFhpSN5x+szZ27rEEL4ZfhsaAw/DS8N3wxbwx3Pe8MP9jfy/rvhleGL4athZQifeJjzsm94z/7KMDZUEC0MteG5YWI4GqY8x3NPIuEthsywCX/WwTAwrNnPDK2hB/mcjxvOTYOsD7CP8BzwHG2FEB5FbQlhTMVQCB8F8jJDYc2LPQ5K9jGCHakpcdTDNuT707rBQyR8IbYRoSXCPepWoEdqhig/reQlEjyTHEYHS6dwjcIlIe9cyGeESeEWW/4XwgqF266ipHxFXAphBjTkjSNsUDpQwoNU+UoIxy6HO8nhGsKWSCZeYQZBUtjgIOVwzLkaWyVV7v9LyC37p6KwJdxU5QsIz3L4DoNWuSGUQggb+q2QKrcQ3gv5VhTWrvKlU1jgfO4mZe5Hb+QUtv9B2JduOCn0s9xim7kql9gWEL4l5JES3vGBNvaBvW/sBbYlVe4kVIW1KMxoDw15Rche4b0qf8SgfZhmuXSTspZKa5XPCHM3KanZc9c2BYQlIb/uum1Slcf8T7Sxpx2NncukXD9EeCl9OOGwElY4SQrfcCbrqrIqPHYQag4ruRwGcu50O6cqb9zl8FgIt9LYueTwIv1L4voNxWskW8umJHYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ascii table\" title=\"\" src=\"/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png\" srcset=\"/static/55b14704e00c60b3167cd812dcd52258/69538/ascii-table.png 160w,\n/static/55b14704e00c60b3167cd812dcd52258/72799/ascii-table.png 320w,\n/static/55b14704e00c60b3167cd812dcd52258/e9bf8/ascii-table.png 349w\" sizes=\"(max-width: 349px) 100vw, 349px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<p>Looking at the table, you can see special characters like <code class=\"language-text\">[</code> and <code class=\"language-text\">^</code> sitting between the uppercase group (65‚Äì90) and lowercase group (97‚Äì122). Since regex operates based on ASCII codes, if you try to catch only English letters with a range like <code class=\"language-text\">a-Z</code>, those special characters in between get included too.</p>\n<p>That‚Äôs why I separate the ranges into <code class=\"language-text\">a-z</code> and <code class=\"language-text\">A-Z</code> to filter English letters properly.</p>\n<p>With some ASCII knowledge, you can easily build custom character groups using the <code class=\"language-text\">-</code> range keyword. Even without memorizing the table, just Google ‚ÄúASCII Table‚Äù and reference it.</p>\n<p>But manually defining groups every time is also tedious. <del>(Lazier developers make better developers‚Ä¶)</del> So regex helpfully provides several predefined groups.</p>\n<h4 id=\"code-classlanguage-textcode\" style=\"position:relative;\"><code class=\"language-text\">.</code><a href=\"#code-classlanguage-textcode\" aria-label=\"code classlanguage textcode permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Matches any single character except the newline escape <code class=\"language-text\">\\n</code>. Regardless of what the character is, if it‚Äôs a character, it matches. This includes spaces ‚Äî applying the <code class=\"language-text\">.</code> class to <code class=\"language-text\">I am Evan</code> will match spaces too.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Match the first 4 characters from the start!</span>\n<span class=\"token string\">'I am Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^....</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"I am\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>To express this character class as a custom group, you‚Äôd need to put every character in the ASCII table except <code class=\"language-text\">\\n</code> inside brackets ‚Äî which is obviously impossible. That‚Äôs why knowing these character classes is the first step to writing regex comfortably.</p>\n<h4 id=\"the-code-classlanguage-textdcode-and-code-classlanguage-textdcode-classes\" style=\"position:relative;\">The <code class=\"language-text\">\\d</code> and <code class=\"language-text\">\\D</code> Classes<a href=\"#the-code-classlanguage-textdcode-and-code-classlanguage-textdcode-classes\" aria-label=\"the code classlanguage textdcode and code classlanguage textdcode classes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">d</code> keyword stands for Digit ‚Äî characters representing numbers. In ASCII terms, this means characters <code class=\"language-text\">0</code>‚Äì<code class=\"language-text\">9</code> (codes 48‚Äì57), so characters like Roman numerals (II) or Chinese numerals (‰∫î) are not recognized as digits.</p>\n<p>Lowercase <code class=\"language-text\">\\d</code> matches digit characters; uppercase <code class=\"language-text\">\\D</code> matches non-digit characters.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-1111-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Characters 0-9 are matched, excluding -</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"the-code-classlanguage-textwcode-and-code-classlanguage-textwcode-classes\" style=\"position:relative;\">The <code class=\"language-text\">\\w</code> and <code class=\"language-text\">\\W</code> Classes<a href=\"#the-code-classlanguage-textwcode-and-code-classlanguage-textwcode-classes\" aria-label=\"the code classlanguage textwcode and code classlanguage textwcode classes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">w</code> class stands for Word. In regex, ‚ÄúWord‚Äù characters are ASCII <code class=\"language-text\">A</code>‚Äì<code class=\"language-text\">Z</code> (65‚Äì90), <code class=\"language-text\">a</code>‚Äì<code class=\"language-text\">z</code> (97‚Äì122), and the <code class=\"language-text\">\\d</code> (digit) group.</p>\n<p>Characters outside this ASCII range ‚Äî like Korean, Cyrillic, etc. ‚Äî are not considered ‚ÄúWord‚Äù and can‚Äôt be caught with <code class=\"language-text\">\\w</code>. Like the <code class=\"language-text\">d</code> class, lowercase <code class=\"language-text\">\\w</code> matches Word characters and uppercase <code class=\"language-text\">\\W</code> matches non-Word characters.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Phone: 010-0000-1111'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// : and - are not Word characters, so only English and digits match</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"P\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"the-code-classlanguage-textscode-and-code-classlanguage-textscode-classes\" style=\"position:relative;\">The <code class=\"language-text\">\\s</code> and <code class=\"language-text\">\\S</code> Classes<a href=\"#the-code-classlanguage-textscode-and-code-classlanguage-textscode-classes\" aria-label=\"the code classlanguage textscode and code classlanguage textscode classes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">s</code> keyword stands for Space ‚Äî whitespace characters. Lowercase <code class=\"language-text\">\\s</code> matches whitespace; uppercase <code class=\"language-text\">\\S</code> matches non-whitespace.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'Hi, my name is Evan'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\s</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// The 4 spaces in the string are matched</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"anchors-catching-boundaries-not-characters\" style=\"position:relative;\">Anchors: Catching Boundaries, Not Characters<a href=\"#anchors-catching-boundaries-not-characters\" aria-label=\"anchors catching boundaries not characters permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The keywords we‚Äôve looked at so far all represent individual characters. But regex also provides the ability to match boundaries between characters, not the characters themselves.</p>\n<p>Keywords that catch boundaries are called ‚Äúanchors.‚Äù Since anchors only represent boundaries, they‚Äôre typically used in combination with character classes to catch characters positioned before or after a specific boundary.</p>\n<p>Since anchors catch the ‚Äúboundary‚Äù itself, using an anchor alone returns a zero-length string.</p>\n<h4 id=\"the-code-classlanguage-textcode-and-code-classlanguage-textcode-anchors\" style=\"position:relative;\">The <code class=\"language-text\">^</code> and <code class=\"language-text\">$</code> Anchors<a href=\"#the-code-classlanguage-textcode-and-code-classlanguage-textcode-anchors\" aria-label=\"the code classlanguage textcode and code classlanguage textcode anchors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">^</code> anchor represents the start-of-string boundary; <code class=\"language-text\">$</code> represents the end-of-string boundary.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Match only the character right after ^(start boundary)</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Match only the character right before $(end boundary)</span>\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Evans Library</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Evans Library\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It goes without saying that a character before <code class=\"language-text\">^</code> or after <code class=\"language-text\">$</code> can‚Äôt exist, so expressions like <code class=\"language-text\">.^</code> or <code class=\"language-text\">$.</code> can‚Äôt match anything.</p>\n<h4 id=\"the-code-classlanguage-textbcode-and-code-classlanguage-textbcode-anchors\" style=\"position:relative;\">The <code class=\"language-text\">\\b</code> and <code class=\"language-text\">\\B</code> Anchors<a href=\"#the-code-classlanguage-textbcode-and-code-classlanguage-textbcode-anchors\" aria-label=\"the code classlanguage textbcode and code classlanguage textbcode anchors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">b</code> keyword stands for Boundary ‚Äî specifically, all boundaries between words composed of the Word group. In simple terms, it‚Äôs a superset of the <code class=\"language-text\">^</code> and <code class=\"language-text\">$</code> anchors, which only match the start and end of the entire string.</p>\n<p>An important caveat: since it‚Äôs about ‚Äúwords composed of the Word group,‚Äù this only applies to English letters and digits included in the <code class=\"language-text\">\\w</code> group.</p>\n<p>The vague definition of ‚Äúboundaries between words‚Äù might be confusing, but examples make it clear:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Here I used <code class=\"language-text\">\\b</code> to catch all word boundaries in <code class=\"language-text\">abc def</code>. The results are all zero-length strings, because as I mentioned, a boundary isn‚Äôt a character and has no length.</p>\n<p>The word boundaries in <code class=\"language-text\">abc def</code> are:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVR42l2STU/bQBCG+cP0wC0SIHEoKkINCIEg6qlqqoo4uXDhBodElIiI8Bc4cIjrxHYcf+56H2btJKS80uyu57HfGY+9hSiYpcy8BG8Sk8aFTWFMtRFHBaGfMQ+yNVvJMpsP/ZRkUbMtu+SpJgpzFvOcoig/GeZM3RhfCtrzptJEVY3UbMPQqshLTFm7lEphJKqz5LQqURK2iJHFMqN1zXXNV1obqlwLtKYSYYj2PHlIoSWnpGvLjeVipF0XPZvZamv+Ybh8NZUW/HscMh0OGToOb4MB8/GY17t7ijCiFP7WH/DY6eDKPYuXF0a9Ln+dHiZbzla6rwwrz0Lz1HG42N3lx8EBPw8PcU6aPF93IIoJJh7d702u9ve53Nvj5vyCr1+26f9qyzCzDUM7h2W7vbMzvu3scN1sitkJf46PGUlH5DmhjOD30RFtidNGg367zW2rhfvwUPH/DFfKZHZZEJD6PrFEKtfBZLL+5NF0WnMJuxPHmCT5+CWAd1F4UjIJMUWSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries\" title=\"\" src=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png\" srcset=\"/static/6d1779cbaba0a0243ed42fc5d27d3228/69538/boundaries.png 160w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/72799/boundaries.png 320w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/6af66/boundaries.png 640w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d9199/boundaries.png 960w,\n/static/6d1779cbaba0a0243ed42fc5d27d3228/d56e1/boundaries.png 1130w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Don't overthink it ‚Äî just consider where each word's boundaries are</small>\n</center>\n<p>The uppercase <code class=\"language-text\">\\B</code> catches positions that are NOT word boundaries ‚Äî in other words, positions where a word hasn‚Äôt ended.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'abc def'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\B</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Again 4 boundaries, but their meaning is completely different: these are ‚Äúboundaries where the word hasn‚Äôt ended.‚Äù</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMklEQVR42m2S208TURDG96/knQfriwkQCbEl4QHCTYWIwUQESV8AjZBwMUYNofhgBRoCGKFSWygUaekFCnS3ezv9OdsCyUYm2d05+818852Z0RBTbo3c32tKZzq5k2sKZxX0is19Zug2F0WDy/Mq5wUD/cpCqdodrnmvmpw9sFyqcnlhUhLfrDp+ppsc/doim7miKMXPPBF5A9dRfkLPHFvdAZbp1ovcZ54ay2wUcyTetpQP124zPULbdv8nvHVuvq6r6vgtoSM5SjClGsRaTQ6u62DJFb0AJb5p2KJWAl3Xr07Ojvz3FCrlijoH2/S3RrNSKUj+wdj7TTLyDZVKcvVzDzeZRCUS2Pl8Q025DIKdrm9w+iMGhweY8f36s7m4yH4k4vUDrbi2xvL4G+JLn3jW3sH04CCl7xtEp6ZZHhvDOT5uqCsU2F+YJ/ggwMb7WdZnpvk1v0js3Qc6mpvZmZuTXllo6dVVeltaGHjcznhPD+G+Pp53PGGit5f01y9U0+k6YV5u8ioUItw/wItgJ6GHAUZCncwMDRMMBMisrIBpon2emOBRUxOjwSBvu7t53dXFwssRRiU5Gg5jHx3VCS+EeLi1ladtbUz199MpJJHJSRIfl5gdGkLt7ODoOlo1l+Nwa4vLgwOy29skolFq2Swnu7ukNjdlk42bvXI4jcc5lBg7k+E4FiMrJIYUKku/LeGp9/Bub2XatVIJVSziVir+lcG/QkqKKBmWkkHVHP+U/wHruB77k5EMYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"boundaries2\" title=\"\" src=\"/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png\" srcset=\"/static/97a4fb713d83f95c04382b7fb6b20106/69538/boundaries2.png 160w,\n/static/97a4fb713d83f95c04382b7fb6b20106/72799/boundaries2.png 320w,\n/static/97a4fb713d83f95c04382b7fb6b20106/6af66/boundaries2.png 640w,\n/static/97a4fb713d83f95c04382b7fb6b20106/748b0/boundaries2.png 868w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Boundaries at positions where the word hasn't ended</small>\n</center>\n<p>The <code class=\"language-text\">b</code> keyword doesn‚Äôt match a character ‚Äî it matches a boundary. Keep this distinction in mind and you‚Äôll find it surprisingly useful in various situations.</p>\n<h3 id=\"flags-regex-options\" style=\"position:relative;\">Flags: Regex Options<a href=\"#flags-regex-options\" aria-label=\"flags regex options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>You‚Äôll often see characters like <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, or <code class=\"language-text\">m</code> appended after a regex: <code class=\"language-text\">/regex/g</code>. These are ‚Äúflags‚Äù that serve as option settings.</p>\n<p>When using the <code class=\"language-text\">new RegExp()</code> constructor instead of literal <code class=\"language-text\">/</code> syntax, pass flags as the second argument.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">pattern</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gi</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> regex2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">pattern</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'gi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// These two have the same pattern</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">.</span>flags <span class=\"token operator\">===</span> regex2<span class=\"token punctuation\">.</span>flags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token boolean\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Regex provides 6 flags: <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">m</code>, <code class=\"language-text\">s</code>, <code class=\"language-text\">u</code>, <code class=\"language-text\">y</code>. I‚Äôll only cover the three most commonly used ‚Äî <code class=\"language-text\">g</code>, <code class=\"language-text\">i</code>, and <code class=\"language-text\">m</code> ‚Äî so Google the rest if you‚Äôre curious.</p>\n<h4 id=\"the-code-classlanguage-textgcode-flag\" style=\"position:relative;\">The <code class=\"language-text\">g</code> Flag<a href=\"#the-code-classlanguage-textgcode-flag\" aria-label=\"the code classlanguage textgcode flag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">g</code> flag stands for <code class=\"language-text\">global</code>. A regex with this flag finds all parts of the string that match the pattern. Without <code class=\"language-text\">g</code>, the regex only finds the first match.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'hello, world'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">.</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello, world\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">groups</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">\"h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"w\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Without the <code class=\"language-text\">g</code> flag, regex matches only one character; with it, all matching characters are found. This is intuitive enough that playing with it in the console a few times will make it click.</p>\n<h4 id=\"the-code-classlanguage-texticode-flag\" style=\"position:relative;\">The <code class=\"language-text\">i</code> Flag<a href=\"#the-code-classlanguage-texticode-flag\" aria-label=\"the code classlanguage texticode flag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">i</code> flag stands for <code class=\"language-text\">ignoreCase</code> ‚Äî matching without distinguishing uppercase from lowercase.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">abcd</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abcd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nregex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABCD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>User-generated strings often vary in capitalization ‚Äî <code class=\"language-text\">My name is Evan</code>, <code class=\"language-text\">my name is evan</code>, etc. The <code class=\"language-text\">i</code> flag lets you find the string you want without worrying about case.</p>\n<h4 id=\"the-code-classlanguage-textmcode-flag\" style=\"position:relative;\">The <code class=\"language-text\">m</code> Flag<a href=\"#the-code-classlanguage-textmcode-flag\" aria-label=\"the code classlanguage textmcode flag permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The <code class=\"language-text\">m</code> flag stands for <code class=\"language-text\">multiline</code>, meaning the regex will evaluate a multi-line string. But oddly, regex matches multi-line strings just fine without this flag.</p>\n<p>Let‚Äôs create a multi-line string and try a simple pattern match:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">abcd\\nefgh\\nijkl</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\nstring<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cd\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"kl\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Regex just finds matching patterns in whatever string it‚Äôs given, so multi-line strings work fine without the <code class=\"language-text\">m</code> flag.</p>\n<p>So why does the <code class=\"language-text\">m</code> flag exist? Because it changes how regex treats the <code class=\"language-text\">\\n</code> newline escape.</p>\n<p>Let‚Äôs add the <code class=\"language-text\">^</code> anchor to find two characters at the start of the string, not just any two <code class=\"language-text\">\\w</code> characters:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Only <code class=\"language-text\">ab</code> is returned. Even though lines are separated by <code class=\"language-text\">\\n</code>, the regex sees the whole thing as a single string, so only the <code class=\"language-text\">a</code> at the very beginning counts as the start (<code class=\"language-text\">^</code>).</p>\n<p>Now with the <code class=\"language-text\">m</code> flag:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">string<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\w{2}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ef\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ij\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Now each line separated by <code class=\"language-text\">\\n</code> is treated as a separate string. The <code class=\"language-text\">m</code> flag doesn‚Äôt simply mean ‚Äúsearch multi-line strings‚Äù ‚Äî it means ‚Äúsplit on <code class=\"language-text\">\\n</code> and treat each line as its own search target.‚Äù</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42m1Ta08aQRTdf84fwU8mtSQWaCMULfUBRogCAkKoqAhqdBeFfTA7uzszcHpnfETSTkLYnTn3zDnn3rUSKRHHMYRSUPRLkgRRFEGIBMvlEp+XovfkDaPx+lwIgTiJzZ6ut17abbgnJ7g+O0OTngs7Oziu1hCGkblIr9VqZf7jMMRLpwOvXsdVs4n2xQW+5/PodC4Iz40Qy97dRdBoYFCpoFQuI5/PonrYwPXAgZRindB14RSLBt/e30eRajOZr6hVu7j5Q3glYAmyzBiD7/vgnGOxWIBHHEEQGDuflyRLnPY4KY0Iqx3oGq2MsfDV8tHREba2tlCkm0ulEj1/wehmgkXATC5rCumS+WBgLE/Oz/GjUEA2m8XTo01CXvFWOp3G6empIUulUjg4+I3acRtXA/sfy9F0CodiiUYj/KSsNb5c/oX6cZci0ngi9DzPME8mE3S7Xbju3NjWEfzPckjx6MkY396i1+sZbEgRaIVKSVgVasbl5SU2NzfRarWwt7dHpK4BfhC+KUxozx0Owe/vcU5NOSO8jiyk/BidGcu5XA79fh8bGxsoUCZ6bB6oQDfqnfDDMqmeUjyc3BxubyPzLWtqHNs2AnSTrJgG+O5ubCzqLoXU4YT25FJ9EL2vJb0LPdTPU0jqrqCMtV0dgcbrc0u6HnhMXwCXCJgA8wjoh5BzD0up1iyv9Kj4NGJMIY4UXD+GZPSVzTwIL4CKKcPYdvA4DWHfeXh0GJyHOfjTM4LhmIrDNctqNgMnwvHEx8xmGI3niGYLsNsHzPsj8FmAv+izel8PUmvHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"multiline\" title=\"\" src=\"/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png\" srcset=\"/static/69dd01cadc54feeecd2154af66259484/69538/multiline.png 160w,\n/static/69dd01cadc54feeecd2154af66259484/72799/multiline.png 320w,\n/static/69dd01cadc54feeecd2154af66259484/6af66/multiline.png 640w,\n/static/69dd01cadc54feeecd2154af66259484/35751/multiline.png 873w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Whether the m flag is present determines if lines are treated<br>as one combined string or as individual strings.</small>\n</center>\n<p>The <code class=\"language-text\">m</code> flag is more useful when dealing with long strings containing line breaks than short strings. I‚Äôve used it for things like checking that English text capitalizes the first letter of each line, or parsing uncompressed files.</p>\n<h3 id=\"quantifiers-how-many-times-a-pattern-appears\" style=\"position:relative;\">Quantifiers: How Many Times a Pattern Appears<a href=\"#quantifiers-how-many-times-a-pattern-appears\" aria-label=\"quantifiers how many times a pattern appears permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In the previous example, I used <code class=\"language-text\">{2}</code> to find two <code class=\"language-text\">\\w</code> characters. This expression specifies the repetition count for the preceding expression. You can also use <code class=\"language-text\">{0,2}</code> to specify a min/max range.</p>\n<p>Expressions that capture how many times a preceding pattern matches are called quantifiers.</p>\n<h4 id=\"specifying-exact-repetition-counts\" style=\"position:relative;\">Specifying Exact Repetition Counts<a href=\"#specifying-exact-repetition-counts\" aria-label=\"specifying exact repetition counts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aaaabbbcc'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{3}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abb\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bcc\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The expression <code class=\"language-text\">\\w{3}</code> simply says ‚Äúfind where the Word group repeats 3 times,‚Äù so regex pulls out every 3-character chunk of Word characters.</p>\n<p>Repetition patterns are applicable in many situations. A classic example is phone numbers or ID numbers, where character groups repeat a fixed number of times.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'010-0101-0101'</span>  <span class=\"token comment\">// Mobile</span>\n<span class=\"token string\">'02-0101-0101'</span>   <span class=\"token comment\">// Landline (Seoul area code)</span>\n<span class=\"token string\">'031-010-0101'</span>   <span class=\"token comment\">// Landline (regional area code)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Phone numbers in many countries follow predictable formats. Mobile numbers typically start with a carrier prefix followed by fixed-length digit groups. Using quantifiers makes it easy to capture these patterns:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Pattern for catching mobile numbers (Korean format)</span>\n<span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token operator\">|</span><span class=\"token number\">1</span><span class=\"token operator\">|</span><span class=\"token number\">6</span><span class=\"token operator\">|</span><span class=\"token number\">8</span><span class=\"token operator\">|</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-</span>\\d<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>You might wonder why we don‚Äôt just match <code class=\"language-text\">010</code> ‚Äî but mobile carrier prefixes weren‚Äôt always <code class=\"language-text\">010</code>. Older prefixes like <code class=\"language-text\">011</code>, <code class=\"language-text\">016</code>, <code class=\"language-text\">018</code> existed before being unified, and some people still use them. Keep edge cases like these in mind when writing validation logic.</p>\n<h4 id=\"checking-if-a-pattern-appears-one-or-more-times\" style=\"position:relative;\">Checking If a Pattern Appears One or More Times<a href=\"#checking-if-a-pattern-appears-one-or-more-times\" aria-label=\"checking if a pattern appears one or more times permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Exact repetition counts are great, but they‚Äôre too rigid for abstract patterns like ‚Äúmay or may not exist‚Äù or ‚Äúappears n or more times.‚Äù So regex provides more flexible quantifiers.</p>\n<h5 id=\"the-code-classlanguage-textcode-quantifier\" style=\"position:relative;\">The <code class=\"language-text\">*</code> Quantifier<a href=\"#the-code-classlanguage-textcode-quantifier\" aria-label=\"the code classlanguage textcode quantifier permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>The <code class=\"language-text\">*</code> quantifier matches when the preceding pattern appears 0 or more times. ‚Äú0 or more‚Äù means the pattern before it may not appear at all, or may repeat many times.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// The a before b can be absent or appear many times ‚Äî match them all!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a*b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Since patterns before <code class=\"language-text\">*</code> are matched no matter how many times they appear, any number of <code class=\"language-text\">a</code>s will be caught.</p>\n<h5 id=\"the-code-classlanguage-textcode-quantifier-1\" style=\"position:relative;\">The <code class=\"language-text\">?</code> Quantifier<a href=\"#the-code-classlanguage-textcode-quantifier-1\" aria-label=\"the code classlanguage textcode quantifier 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>The <code class=\"language-text\">?</code> quantifier matches when the preceding pattern appears 0 or 1 times. Unlike <code class=\"language-text\">*</code>, even if the pattern appears many times, <code class=\"language-text\">?</code> only captures one.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// The a before b can be absent or appear many times ‚Äî only match 1!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a?b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"the-code-classlanguage-textcode-quantifier-2\" style=\"position:relative;\">The <code class=\"language-text\">+</code> Quantifier<a href=\"#the-code-classlanguage-textcode-quantifier-2\" aria-label=\"the code classlanguage textcode quantifier 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>The <code class=\"language-text\">+</code> quantifier means the preceding pattern must appear at least once. If it doesn‚Äôt appear, the match fails.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// The a before b must exist, and match all of them!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a+b</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">'b'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'ab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">'aab'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'aab'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Put simply, <code class=\"language-text\">+</code> means ‚ÄúI don‚Äôt care how many times, just be there‚Äù ‚Äî useful for catching characters that must be present.</p>\n<h2 id=\"nice-to-know-advanced-features\" style=\"position:relative;\">Nice-to-Know Advanced Features<a href=\"#nice-to-know-advanced-features\" aria-label=\"nice to know advanced features permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So far we‚Äôve covered the basics: character classes, anchors, flags, and quantifiers. This is enough for most business situations, but occasionally you‚Äôll hit cases where these alone become unwieldy.</p>\n<p>Let‚Äôs look at some features that make regex more convenient to work with.</p>\n<h3 id=\"capturing-remembering-patterns\" style=\"position:relative;\">Capturing: Remembering Patterns<a href=\"#capturing-remembering-patterns\" aria-label=\"capturing remembering patterns permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Regex doesn‚Äôt just match patterns ‚Äî it can also remember matched patterns. This capturing ability is useful for string replacement (distinguishing parts that should change from parts that shouldn‚Äôt), finding duplicates, and more.</p>\n<p>For example, consider a string representing a dollar amount: <code class=\"language-text\">$10000</code>. What pattern captures this?</p>\n<p>A dollar amount means <code class=\"language-text\">$</code> followed by at least one digit to be meaningful. A simple expression matching <code class=\"language-text\">$</code> followed by one or more digits does the trick. (Remember that bare <code class=\"language-text\">$</code> is the end-of-string anchor, so escape it with <code class=\"language-text\">\\</code>.)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$\\d+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"$10000\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Now, what if we want to change <code class=\"language-text\">$10000</code> to <code class=\"language-text\">10000 dollars</code>?</p>\n<p>You might think of <code class=\"language-text\">String.prototype.replace</code>, but the pattern above captures <code class=\"language-text\">$10000</code> as a whole ‚Äî there‚Äôs no way to keep <code class=\"language-text\">10000</code> while replacing just the <code class=\"language-text\">$</code>.</p>\n<p>We need a way to remember a specific part of the match. This is where capturing comes in.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Wrap the part you want to remember in parentheses!</span>\n<span class=\"token operator\">/</span>\\<span class=\"token function\">$</span><span class=\"token punctuation\">(</span>\\d<span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>The only difference from before is wrapping <code class=\"language-text\">\\d+</code> in parentheses. This tells regex to capture that part.</p>\n<p>The second argument of <code class=\"language-text\">String.prototype.replace</code> is the replacement string. Captured patterns can be referenced there using the special <code class=\"language-text\">$n</code> syntax.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'$10000'</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$(\\d+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$1 dollars'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"10000 dollars\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">$1</code> refers to the first captured group. With multiple capture groups, you can use <code class=\"language-text\">$2</code>, <code class=\"language-text\">$3</code>, and so on.</p>\n<p>Capturing is also useful for finding repeated characters, since repetition means a previously seen character appears again consecutively:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Here I captured a Word character with <code class=\"language-text\">(\\w)</code>, then referenced it with <code class=\"language-text\">\\1</code> ‚Äî expressing the pattern of repetition.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'aabccdeef'</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\w)\\1</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ee\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Expressions like <code class=\"language-text\">(.)\\1{2}</code> (combined with quantifiers) are useful for password validation rules like ‚Äúthe same character must not repeat 3 or more times.‚Äù</p>\n<h3 id=\"greedy-vs-lazy\" style=\"position:relative;\">Greedy vs. Lazy<a href=\"#greedy-vs-lazy\" aria-label=\"greedy vs lazy permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Earlier we learned about the <code class=\"language-text\">+</code> (1 or more) and <code class=\"language-text\">*</code> (0 or more) quantifiers. Using ‚Äún or more‚Äù quantifiers creates an ambiguity in pattern matching:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Find all strings wrapped in &lt; and >!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>My regex just says ‚Äúfind anything wrapped in <code class=\"language-text\">&lt;</code> and <code class=\"language-text\">></code>,‚Äù so it might seem natural that it captures the entire <code class=\"language-text\">&lt;p>This is p tag&lt;/p></code>. But <code class=\"language-text\">&lt;p></code> and <code class=\"language-text\">&lt;/p></code> individually also match this pattern.</p>\n<p>Regex defaults to matching the longest possible pattern ‚Äî this is called <strong>greedy</strong> matching. It greedily gobbles up the longest match it can find. <del>(This is unrelated to the Greedy algorithm concept, despite sharing the name.)</del></p>\n<p>So how do you capture the smaller matches like <code class=\"language-text\">&lt;p></code> and <code class=\"language-text\">&lt;/p></code>?</p>\n<blockquote>\n<p>Make the regex <strong>lazy</strong>.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Find all strings wrapped in &lt; and > ‚Äî lazily!</span>\n<span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.*?></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token string\">\"&lt;p>This is p tag&lt;/p>\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;p>\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"&lt;/p>\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The only change is adding <code class=\"language-text\">?</code> after the <code class=\"language-text\">*</code> quantifier. Lazy matching finds the shortest possible matches. Given the same expression, it finds the minimal match and calls it a day ‚Äî hence ‚Äúlazy.‚Äù</p>\n<p>In summary: quantifiers like <code class=\"language-text\">*</code> and <code class=\"language-text\">+</code> default to greedy matching (longest possible). Adding <code class=\"language-text\">?</code> after them switches to lazy matching (shortest possible).</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Greedy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+></span><span class=\"token regex-delimiter\">/</span></span>\n\n<span class=\"token comment\">// Lazy</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>\n<span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;.+?></span><span class=\"token regex-delimiter\">/</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Without understanding the difference between greedy and lazy matching, you‚Äôll fail to capture the patterns you want when multiple valid matches exist. Keep this distinction in mind.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I first encountered regex as a college student, building a parser that converted OBJ files into <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"nofollow\">ThreeJS</a> objects. That required seriously heavy regex usage. <del>(The OBJ Loader that ThreeJS provided at the time had a bug üò¢)</del></p>\n<p>OBJ files represent vertex coordinates, texture UV mapping coordinates, vertex normals, and more:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># Vertex coordinates\nv -1.692615 -0.021714 -1.219301\nv 7.334266 -0.021714 -1.219302\nv 7.334265 0.021714 -1.219302\n...\n\n# Texture UV values\nvt 0.0000 0.0000\nvt 1.0000 0.0000\n...\n\n# Vertex normals\nvn -0.0000 -0.0000 -1.0000\nvn 0.0000 -1.0000 -0.0000\n\nusemtl Material.001\n\n# Vertex indices for each face\nf 1/1/1 4/2/1 3/3/1 2/4/1\nf 8/5/2 5/6/2 6/7/2 7/8/2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I used the <code class=\"language-text\">m</code> flag to split the file line by line, then parsed lines starting with <code class=\"language-text\">v</code> as vertex coordinates, <code class=\"language-text\">vt</code> as texture UVs, <code class=\"language-text\">vn</code> as normals, and so on. It was challenging and complex, but fun.</p>\n<p>It was eye-opening to realize that computer-generated files are really just sequences of meaningful strings ‚Äî and even more fun that regex could transform those strings into meaningful information.</p>\n<p>But as I mentioned, regex is used far more often in everyday business logic than in building parsers. For validating user input like passwords or email addresses, regex is practically a cheat code.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 399px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42p1T2Y7CMBDr///c8sA+8oSABnoftMmk8XpSjiJYCYjkJk0ztjMzTfqmwe96jZ/VClVdw3sPay2ccx9BRKAjKcsKTd2gbduv0XUd8jyPxElVVVDUdPctGt5SCdVlInK17OHkbn+Jec897WlqlgghINGcqUJRFDGHTUv7XBdFieyUoeQcHWQZjDHI6ETdDMMQc6YkOpRnmqaZ0DmLkXkYux6WGEigihqkszqydozv4zhGaNxy3An5CAzwVPV0JCaFbLe4yOPd8eAwEJ6FkdMpwpcF7GZzu84XhHTY1JDjkU4LSMYW2O+iyLtOnx2yEHI0dFdCtKfSAyRN59M8+ED6QuCRkAuJ+TPz1VnZmMsr4ccOL0WR/Z7XzeguhdN8ktweDnAUmvoenlV2ux2FzJPQjTD+g/wQ2B5Tf55nBk5sjTDamFvPlgpsZBUO/BbO5/8dKqG+aPu8BMVe7mvMAsqjf8of4zBFjqIV43cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"password rule\" title=\"\" src=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png\" srcset=\"/static/f8ab432328c5d8bafe5aa95518ad4df2/69538/password_rule.png 160w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/72799/password_rule.png 320w,\n/static/f8ab432328c5d8bafe5aa95518ad4df2/a307d/password_rule.png 399w\" sizes=\"(max-width: 399px) 100vw, 399px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>You can validate with built-in methods alone, but regex makes it far simpler</small>\n</center>\n<p>Without regex, validating something as simple as an email address requires combining multiple built-in methods ‚Äî quite inefficient. And personally, as hard as regex is to read, I think it‚Äôs still more readable than a complex chain of method calls.</p>\n<p>Regex doesn‚Äôt have lines or indentation like code, so it looks like a meaningless jumble of characters. But the number of expressions regex provides isn‚Äôt that large, and with a bit of practice, anyone can understand short regex patterns quickly.</p>\n<p>That‚Äôs all for this post on finding patterns in irregularity. In the next post, I‚Äôll walk through real-world examples of how I‚Äôve used regex as a working developer.</p>","fields":{"slug":"20200724-about-regular-expression-en","path":"/2020/07/24/about-regular-expression/en/","lang":"en"},"frontmatter":{"title":"Finding Patterns in Irregularity: A Guide to Regular Expressions","subTitle":"The art of defining patterns in infinite possibility","date":"Aug 10, 2020","categories":["Programming","Tutorial"],"tags":["Regex","Regular Expression","Character Class","Anchor","Capturing Group","Greedy","Lazy"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/d803c/thumbnail.png 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/fc5c5/thumbnail.webp 320w,\n/static/c9a689e73a6e0677baa07d0624c6b5c1/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png","srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9a689e73a6e0677baa07d0624c6b5c1/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"95587b9b-cc10-52fe-96cb-ded607a4b676","tableOfContents":"<ul>\n<li>\n<p><a href=\"#the-beginning-of-yak-shaving\">The Beginning of Yak Shaving</a></p>\n</li>\n<li>\n<p><a href=\"#intoroducing-gatsby\">Intoroducing Gatsby</a></p>\n<ul>\n<li><a href=\"#graphql\">GraphQL</a></li>\n<li><a href=\"#lets-use-the-graphql\">Let‚Äôs use the GraphQL</a></li>\n<li><a href=\"#create-pages-with-dynamic-parameter\">Create pages with dynamic parameter</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#the-annoying-parts\">The annoying parts</a></p>\n<ul>\n<li><a href=\"#care-about-the-connection-with-the-existing-link\">Care about the connection with the existing link</a></li>\n<li><a href=\"#make-it-all-by-myself\">Make it all by myself.</a></li>\n<li><a href=\"#there-is-no-posting-creation-function-in-cli\">There is no posting creation function in CLI.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#epilogue\">Epilogue</a></p>\n</li>\n</ul>","excerpt":"During the last golden week, I migrated my blog that I had previously made using Hexo to Gatsby. In this post, I would like to share what I learned from this migration work and issues I didn‚Äôt expect. The Beginning of Yak Shaving In fact, I tried to continue using Hexo at first. Of course, it‚Äôs tru‚Ä¶","html":"<p>During the last golden week, I migrated my blog that I had previously made using Hexo to Gatsby. In this post, I would like to share what I learned from this migration work and issues I didn‚Äôt expect.</p>\n<h2 id=\"the-beginning-of-yak-shaving\" style=\"position:relative;\">The Beginning of Yak Shaving<a href=\"#the-beginning-of-yak-shaving\" aria-label=\"the beginning of yak shaving permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>In fact, I tried to continue using Hexo at first. Of course, it‚Äôs true that React-based Gatsby is more comfortable than ejs-based Hexo, but I thought doing this would be a waste of resources, given that I couldn‚Äôt write posts during the migration.</p>\n<p>Also, I think the main content of the blog is the post itself, so I don‚Äôt have to add various features to the blog. When I need to add some features to my blog, I just need to find and use Hexo plugins created by others.</p>\n<center>\n  <div style=\"max-width: 400px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBQT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGvsze/N3oGsCRRtiT/xAAdEAACAQQDAAAAAAAAAAAAAAABAwACBCIxERIT/9oACAEBAAEFAuzHNHoucmWbaaQxuI1Achr/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAXEQADAQAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AWZEf//EAB8QAAIABgMBAAAAAAAAAAAAAAECABAREjFBAyEiUf/aAAgBAQAGPwIrxm1V3Hprx9kyncUJXvFJjEv/xAAcEAEAAgMAAwAAAAAAAAAAAAABABEhMWFRcZH/2gAIAQEAAT8hpvxGQAEmCtI9nqjIgq7XcC1oiq7FhLp0Z8kooPia5//aAAwDAQACAAMAAAAQK8C+/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAEQIRExgf/aAAgBAgEBPxClY6JGo0R//8QAHxABAAIBBQADAAAAAAAAAAAAAQARITFBUWFxgbHw/9oACAEBAAE/ELMBwrV/bR01+AANx2eYKCYPUFO8UtFVfMW9DWLoynxLE6jnD0zQ/cekFTISZ+M//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"why\" title=\"\" src=\"/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg\" srcset=\"/static/541b7115291302457477eabd84aa37bc/0913d/why.jpg 160w,\n/static/541b7115291302457477eabd84aa37bc/cb69c/why.jpg 320w,\n/static/541b7115291302457477eabd84aa37bc/c08c5/why.jpg 640w,\n/static/541b7115291302457477eabd84aa37bc/4b190/why.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>Of course I know that Gatsby is easier to use than Hexo... But no need to migrate that.</small>\n  <br>\n  <br>\n</center>\n<p>However the problem occurred in an unexpected place. I had a plan to translate blog posts which I wrote to english, and I was going to setup i18n on my blog before the golden week began, and then translate some posts.</p>\n<p>I thought I could easily add i18n functionality to my blog. This is because Hexo supports i18n configuration by itself, and the Icarus theme I was using also supports this configuration.</p>\n<p>In addition, I had expected this would not be a big deal, as Hexo‚Äôs <a href=\"https://hexo.io/docs/internationalization.html\" target=\"_blank\" rel=\"nofollow\">i18n Setup Guide document</a> says. it says that I just add language types to the config file, I could simply build an environment in which multiple languages can be used within the application.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># _config.yml</span>\n\n<span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ko\n  <span class=\"token punctuation\">-</span> en <span class=\"token comment\"># This is new language!</span>\n\n<span class=\"token comment\"># ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>According to Hexo‚Äôs guide document, adding the i18n setting looks a very simple task that could be done in a several minutes. But‚Ä¶</p>\n<center>\n  <br />\n  .<br />\n  .<br />\n  .<br />\n  .<br />\n  <br />\n</center>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">ERROR Render HTML failed: index.html\nTypeError: /Users/evan/dev/evan-blog/themes/icarus/layout/layout.ejs:2\n    1| <span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n >> 2| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">&lt;%-</span> <span class=\"token attr-name\">has_config('language')</span> <span class=\"token attr-name\">?</span> <span class=\"token attr-name\">'</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span> + get_config('language').substring(0, 2) + '<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">'</span> <span class=\"token attr-name\">:</span> <span class=\"token attr-name\">''</span> <span class=\"token attr-name\">%</span><span class=\"token punctuation\">></span></span>>\n    3| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    4|     &lt;%- partial('common/head') %>\n    5| <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 378px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 91.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEVUlEQVR42gFKBLX7AKbE1M7FxtHHyNLIy9HIy9bNzcS8u1JcQYyLdK+ijKqghb+yn4a7xHCtonq0v2m50JiqgqSNY6N9gat6iwC9urzNxMXPxsfSycrRxsjSytHPxbeDejyFdD1rWzReUSp1YzWZnXCYwrSWiXd/pKmItKSqnVaBsLB7qMEAz8TEzsTFz8XG0cfG0MbP4c+1m4RLMykZBQMGAAAAAQEAAAABDQUBYVUtxZVWjqSnZa/CnqaCdba/YrfIAMzCw87Exc/ExM7FzODQtYRwOgYDBQAAACYiKGlnbIOBhnJvdDs6QQAAAkM7HpKghGWvw2G0vGisvWGsvwDNwsPPxMXKxcvc0Mech1EFAwcNDBKBfoTl4+7////+/v7////6+f2fnaMHBA1WTiueubKFrsqcus+gudAAzMLEzMDB3bmq5tB6KiQXAAAFko6V//7/8e336ufy6uj06efz6ejy////oZ6nAgAAsqBi2sGxu6Opy7SzAMzIyMWWme2jXbekRgAAAUA+Qu3p8+fk7Ojl7enk6uvn8ujj6+bi6uTi6/Tx+zs6Sk5GF/G+cMSThcinnADIw8XEnZrjs0dXSiAAAACLiI369v/X0tzCv8jw7Pfl3uHq4+jd2eK8ucL39Pyjn6kWEQvCmkHNl4LOq6IAxbu+0ca+n4ZLDwoHAAABqqWr9vH65OHo49/e9O3X++pn+/Cb7efe4dza7enzy8XMGBYee2IwtpJ5rIyGAMK4uNXJy1hSVwAAAAIABKKepPDg7evZ6+vcj9W+OHxsH4h4J+LOUencwevS6szDyhgXHkIwLLeTgLubjQDBtbfLwMNDPkIAAAMAAAFoZWrr2OHZxdDb0sXItGechTeplEXZzJva09ro1+Cfl50AAAJCNzTBooq7nIYAvrO1wLa4OTQ5AgAFBwUJFRMYpZ+k4NfX3NLV3tbY49nK5NrT39jd4dvcwby/MC0yAQAFKiQkt5uDv6KLALywrbusqCklJwAAAAYFCgIABA4PFGdhZqWcm7yxscG4usW8vbSsq4F7fiQhJgMCBggGDBMQEq+Uf8KljQCfhl2QhFtQSUgrJy8bFRsUEBUQBAkEAQMMCg4jHyMpJikqJioeGyAFBAcFBAkNCxAaFx1FQEiulYTCo4kAWFhARko+aGBlSUlRayAkdmRoaygrnDQ2TlRYenh7f3+AhYSGtLS0h4eIdnV4iYeKOTM6W1Zho46DwaGHACktJzk7NGFWXkZHUJUTFZtrbU09QZM5OmZqb5yYmqqqq4uJi729vYmHiqenqJSTlTYxOFRPW4h4dMChhAA0OxtLSTpXUFk4MThfJSlqRUtFMzlgP0Q/QEdoZWqEhIdOS1F8e35kYmZubXBUU1dFQEpDQEpxZ2y8noQAXV0/Y1tdTUZPPzpBOz9HQUFLVlJcUE9ZdHB5qamxsbC3trW8gH6HRUJLKygwR0JMV1RdXFhiVE5YmoR2qNstTgis+m0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"chit\" title=\"\" src=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png\" srcset=\"/static/89b1b7daecdf28c4fe33dbe44dd39388/69538/chit.png 160w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/72799/chit.png 320w,\n/static/89b1b7daecdf28c4fe33dbe44dd39388/f0991/chit.png 378w\" sizes=\"(max-width: 378px) 100vw, 378px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>What the...?</small>\n</center>\n<p>Unlike Hexo‚Äôs document, which explained that adding some code lines to the <code class=\"language-text\">config.yml</code> would be a happy ending, the reality was tough.</p>\n<p>Why I got a this error? It‚Äôs simple. When multiple values are set in one props in configuration, the Hexo‚Äôs configuration parser parses these values to an array. However the Icarus theme uses the <code class=\"language-text\">substring</code> method because it assumes that the <code class=\"language-text\">language</code> property is a String type.</p>\n<p>In this situation, There were 4 ways that I could choose.</p>\n<hr>\n<ol>\n<li>Fixing the Icarus theme.</li>\n<li>Using other Hexo theme that supports i18n well.</li>\n<li>Making my own Hexo theme.</li>\n<li>Migrating to Gatsby.</li>\n</ol>\n<hr>\n<p>Themes of Hexo are not installed by package managers like npm or yarn, it is cloned from github repository and included to your application source. So you can freely fix Hexo themes by yourself without Pull Request to contributor‚Äôs repository.</p>\n<p>But as my sight, it is not simple situation like that. Because if I change <code class=\"language-text\">language</code> property to an array, side effects will occur not only in the <code class=\"language-text\">layout.ejs</code> but also elsewhere.</p>\n<p>So how about option 2? That is not a good choice either.</p>\n<p>The fundamental problem with this situation is not just that the theme does not support the i18n, my blog is too dependent on the limited functions of theme which made by other people. In other words, even though if I change my blog to other theme that supports this feature, this situation will be occurred again.</p>\n<p>How about option 3 to create my own Hexo theme?</p>\n<p>If you make Hexo theme, you must use old techniques such as ejs and jQuery. Moreover, the amount of resources consumed by creating themes or migrating them is not much different. Rather it is better to draw UI with Gatsby which is React-based than with ejs.</p>\n<p>These are why I decided to move from Hexo to Gatsby.</p>\n<p>Actually, it is quite easy that migrating from Hexo to Gatsby. Official blog also provides a guide document titled <a href=\"https://www.gatsbyjs.org/blog/2017-10-01-migrating-my-blog-from-hexo-to-gatsby/\" target=\"_blank\" rel=\"nofollow\">Migrating My Blog From Hexo To Gatsby</a>, and that process is not complicated.</p>\n<p>However my blog is service that many people are using, I have to do extra tasks that recreate all of original features on my blog, not just change static page generator. It is not a simple task because if Gatsby doesn‚Äôt support the features that I have been using easily with the Hexo plugin, I should create them all.</p>\n<p>But now, I got the 6 days golden holiday on April 30 on Buddha‚Äôs Birthday. and This long holiday season will not come again in this year, so it was a last chance to proceed with such a grand project. So, I had made branch, and started working on moving from Hexo to Gatsby.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBAv/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAZ15zKyYX//EABgQAAMBAQAAAAAAAAAAAAAAAAABAwIR/9oACAEBAAEFAp00K3R2M8HhDSP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERMRAhMoH/2gAIAQEABj8CsmfMUh6OUf/EABsQAQACAwEBAAAAAAAAAAAAAAEAESExcVGh/9oACAEBAAE/IQO3IuSnqijr7KpPcFrfJZh//9oADAMBAAIAAwAAABBY/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EMVD/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qtb//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhYYExkf/aAAgBAQABPxBEiXnaHCgKem+RKWO4GC7kTKKRztiJt8Ln/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"yak\" title=\"\" src=\"/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg\" srcset=\"/static/0081bd73b6f38b83ddb98effd99285d2/0913d/yak.jpg 160w,\n/static/0081bd73b6f38b83ddb98effd99285d2/cb69c/yak.jpg 320w,\n/static/0081bd73b6f38b83ddb98effd99285d2/c08c5/yak.jpg 640w,\n/static/0081bd73b6f38b83ddb98effd99285d2/4b190/yak.jpg 800w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The beginning of yak shaving...</small>\n</center>\n<h2 id=\"intoroducing-gatsby\" style=\"position:relative;\">Intoroducing Gatsby<a href=\"#intoroducing-gatsby\" aria-label=\"intoroducing gatsby permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42mNgoBX4z/Cf8f///4xg9n8Em1LAxMCgzgukmVHFwJh4l4HocOVq2RkVazas6Nv1cm7Dhp0VAZPVQOL19fUwwxhxOwJJDua1GVXrlm+cdOx/beiMn/Mqtv2v9JuyA6rEE4jDgJgTiNmAWAlqiBsQK0DVsKJbyLqgcevVtVP2/c936fo1sXD5/0WNO+6zMYioArVWAPXHAdXUghwMxB1AXArErUDcBMRZUAsZYS4Ee2ly0cqFt449/79x+sGfu+ed+7+0Y+dGsH9YmcKhmmKAuBiIvaEGFAAxzKIguPdhYRgqXyIxuXj5spk1ax9NLl65Ply+HOwdewZ7FmgkMUK9hhxRIDE9IObBFUeM4gyu3GixzAjFTGjhxIiGMeKbkQEao+B0yEB0OmRkoCUAAFcqZS1w+C9uAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"gatsby\" title=\"\" src=\"/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png\" srcset=\"/static/2bab627a79337d768c8221c571d2c81a/69538/gatsby.png 160w,\n/static/2bab627a79337d768c8221c571d2c81a/72799/gatsby.png 320w,\n/static/2bab627a79337d768c8221c571d2c81a/6af66/gatsby.png 640w,\n/static/2bab627a79337d768c8221c571d2c81a/d9199/gatsby.png 960w,\n/static/2bab627a79337d768c8221c571d2c81a/21b4d/gatsby.png 1280w,\n/static/2bab627a79337d768c8221c571d2c81a/29114/gatsby.png 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<blockquote>\n<p><strong>Gatsby</strong> is a free and open source framework based on React that helps developers build blazing fast websites and apps</p>\n<p><em><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow\">Gatsby Offical Site</a></em></p>\n</blockquote>\n<p>Gatsby is the React-based static page generator.</p>\n<p>Personally, Gatsby‚Äôs biggest advantage is probably reaction-based. Already, this is a UI library loved by front-end developers around the world, so learning costs are relatively lower than <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"nofollow\">Hexo</a> based on ejs or <a href=\"http://jekyllrb-ko.github.io/\" target=\"_blank\" rel=\"nofollow\">Jekyll</a> based on Ruby.</p>\n<p>Also if you use project starters made by other people, you can quickly set up your project because you don‚Äôt have to make your own boilerplate code. And I used gatsby-starter-blog project starter.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby new evan-blog https://github.com/gatsbyjs/gatsby-starter-blog</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>In addition to the starter I used, there are also many starters created by other developers, so you can browse github and choose a starter.</p>\n<p>Another unique thing is that Gatsby uses <a href=\"https://graphql.org/\" target=\"_blank\" rel=\"nofollow\">GraphQL</a> to fetch data within React component. Many developers are familiar with REST APIs, so it may be a bit awkward at first, but the concept itself is not that difficult. I think I can adapt quickly.</p>\n<h3 id=\"graphql\" style=\"position:relative;\">GraphQL<a href=\"#graphql\" aria-label=\"graphql permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>GraphQL(Graph Query Language) is literally a new concept of query language. This means that it is used as a means of questioning to import data from certain systems, such as SQL(Structured Query Language), which we often use.</p>\n<p>SQL is used to query the database to get the data stored in the database system, but GraphQL is used by clients to query the server to send data.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> frontmatters<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> thumbnail <span class=\"token keyword\">FROM</span> post <span class=\"token keyword\">WHERE</span> post_id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">post</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">frontmatters</span>\n    <span class=\"token property\">title</span>\n    <span class=\"token property\">thumbnail</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>When using the REST API, the client simply sent a request to the endpoint provided by the server and received a predetermined structured response to use the data, but the client using GraphQL actively selects the data that they need and queries the server. It has the advantage of being able to.</p>\n<p>However, the advantage of the client‚Äôs ability to send a query for the desired schema can be disadvantageous in terms of security due to the nature of the client program giving control to the user. In addition, client developers may be writing slow queries because they are often less experienced with databases than back-end developers.</p>\n<p>For this reason, GraphQL‚Äôs backend system must take appropriate measures for this situation, and these shortcomings of GraphQL can be judged to be less stable than REST API, so it is rarely used in large-scale projects. <small>(In fact, developers‚Äô opinions on GraphQL are also quite different)</small></p>\n<p>However, because Gatsby is a static site generator, the situation using GraphQL to blow queries is limited to compile time, not runtime, and slow queries aren‚Äôt really hurting the user, but the build is a bit slower. Therefore, it can be seen that these disadvantages are relatively offset environments.</p>\n<h3 id=\"lets-use-the-graphql\" style=\"position:relative;\">Let‚Äôs use the GraphQL<a href=\"#lets-use-the-graphql\" aria-label=\"lets use the graphql permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Gatsby provides a separate page to freely run queries in the local environment. This page serves as a kind of API document like Swagger. If you run the local server using the <code class=\"language-text\">gatsby develop</code> command and connect to<code class=\"language-text\"> localhost: 8000 / __ graphql</code>, you can see the query test page provided by Gatsby.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvUlEQVR42pWUiW6kMBBE+f/PzGQn4fbZNja40o2BHKvdmVgqeUayilfVhmaLEdETKATIcs7j9XZD3/YYhhHTOGEQTRPatsXMu9Ya86z+llJo7p3CoAjnyjnDaIOu04hLxpY3LLkgrhuscXhrZz5v4UMEMQyF72qsCiCXkLcNhQ2XZUFKCcov8HZBYcOyrChsKAaT8bixqR4NvHLw2ldZqoZGE5QO8DFhY9MoFbBKKShbFWTn/4FrsVyPth6OKekwIQpVYihGs4tXZKET/VxiKD0bR7gPGmbm2NpVGfqMnPOK18EipPXqcF3XfxoKoeLYbnY15kl39NnIwb4TfKbintKS/msohG8XYe3O8wNE5AMaOawnQnCZi1/3uI8I553w6JDpvFw7J7+ZUAbRMn7i/ZnIMpB3nrCRCZuD0IXPDhMbTDZ8u4cPCXkQQnjG3PV1KC+dgQv5d4TaHXRVl6Hj3O1MyGt5mnBiMzseQ+G4u+E5ZenPUHo6shC2QnjGPa7NTipTvg8Ggwn8MjwmPN+UUQmhATEhuTqUSkto/vQGIxsWVEN5l+VrIiKiS977/Usk97DngViJeQ7EHx3GiA9XrpC2+k2iPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"query test page\" title=\"\" src=\"/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png\" srcset=\"/static/42203ec8bbd0d883d511c96198e0d7c9/69538/query-test-page.png 160w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/72799/query-test-page.png 320w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/6af66/query-test-page.png 640w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/d9199/query-test-page.png 960w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/21b4d/query-test-page.png 1280w,\n/static/42203ec8bbd0d883d511c96198e0d7c9/ddb69/query-test-page.png 2684w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>I also had very little experience with GraphQL, so I wasn‚Äôt very good at first, but after looking at this page for about 30 minutes, I was able to figure out how to query.</p>\n<p>My chosen starter gatsby-starter-blog basically contains Gatsby plugins for blogging using markdown, so<code class=\"language-text\"> markdownRemark</code>(to parse markdown files) or <code class=\"language-text\">imageSharp</code>(to parse image resources) Are added, but if you don‚Äôt see these query types, you need to install and add a plugin like gatsby-transformer-remark.</p>\n<p>If you roughly grasped Gatsby‚Äôs GraphQL interface by touching this and that on the <code class=\"language-text\">__graphql</code> page, it is now time to run the query directly using the<code class=\"language-text\"> useStaticQuery</code> hook within the React component.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query MyQuery {\n    markdownRemark(frontmatter: {title: {eq: \"Test Post\"}}) {\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">markdownRemark</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">frontmatter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Test Post\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-09T12:57:08.000Z\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Since the example <code class=\"language-text\">useStaticQuery</code> hook only provides a static query, as the name suggests, the above query only retrieves data whose<code class=\"language-text\"> frontmatter.title</code> is exactly <code class=\"language-text\">Test Post</code>. If you try to pass a template string containing a variable as an argument to the <code class=\"language-text\">graphql</code> function, you get the following error.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Error: It appears like Gatsby is misconfigured.\nGatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away.\nUnfortunately, something went wrong and the query was left in the compiled code.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>In other words, even if you include a variable in the template string you use as a query, this variable is only evaluated at ‚Äúruntime,‚Äù so Gatsby doesn‚Äôt know what value this variable will contain when compiling the code.</p>\n<p>However, in order to create a blog post page, you must receive dynamic parameters through a URL such as <code class=\"language-text\">/posts/2</code>, and use this parameter to execute a query such as ‚ÄúGet the second post!‚Äú. In this case, the <code class=\"language-text\">pageQuery</code> is used.</p>\n<h3 id=\"create-pages-with-dynamic-parameter\" style=\"position:relative;\">Create pages with dynamic parameter<a href=\"#create-pages-with-dynamic-parameter\" aria-label=\"create pages with dynamic parameter permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The most basic function of a blog is that different contents must be expressed in the same UI template.</p>\n<p>In general, if these functions need to be implemented, the client receives and renders the data using the server‚Äôs HTTP API at runtime, or if the page requires SEO optimization, the server side rendering (SSR) server receives the data and then renders the rendered HTML. It is implemented by sending a response to the client.</p>\n<p>But, as you know, Gatsby is a static site generator. Therefore, it is not a method to dynamically receive and process data at runtime when the application is running, but to generate the actual page file after receiving data from Gatsby using GraphQL at compile time.</p>\n<p>If you don‚Äôt understand what this means, let‚Äôs take a look at the files in the <code class=\"language-text\">public</code> directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> evan-blog/public/page-data <span class=\"token operator\">&amp;&amp;</span> ll\n\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2017</span>\ndrwxr-xr-x   <span class=\"token number\">5</span> evan  <span class=\"token number\">1525943656</span>   160B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2018</span>\ndrwxr-xr-x  <span class=\"token number\">10</span> evan  <span class=\"token number\">1525943656</span>   320B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2019</span>\ndrwxr-xr-x   <span class=\"token number\">7</span> evan  <span class=\"token number\">1525943656</span>   224B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">2020</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 <span class=\"token number\">404</span>.html\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 about\ndrwxr-xr-x  <span class=\"token number\">19</span> evan  <span class=\"token number\">1525943656</span>   608B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 categories\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 dev-404-page\ndrwxr-xr-x   <span class=\"token number\">3</span> evan  <span class=\"token number\">1525943656</span>    96B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 index\ndrwxr-xr-x   <span class=\"token number\">6</span> evan  <span class=\"token number\">1525943656</span>   192B  <span class=\"token number\">5</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span>:34 page</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Since my blog post path is in the format <code class=\"language-text\">/2020/05/09/blog-title/</code>, So Gatsby created directories named <code class=\"language-text\">2020</code>, <code class=\"language-text\">05</code>, <code class=\"language-text\">09</code> and <code class=\"language-text\">blog-title</code> in the <code class=\"language-text\">public/page-data</code> directory at compile time. After that, create a file called <code class=\"language-text\">page-data.json</code> that contains HTML to render as a string in it again.</p>\n<p>Rather than fetching data dynamically at runtime and rendering the contents of the page, it means that when compiling, one page file per post should actually be created. If you understand this difference, you can handle static site generators a little more comfortably.</p>\n<p>This means that you do not have to fetch the data dynamically at runtime and render the contents of the page, but you must actually create one page file per post when compiling. If you understand this difference, you can handle static site generators a little more comfortably.</p>\n<h4 id=\"createpages-api\" style=\"position:relative;\">createPages API<a href=\"#createpages-api\" aria-label=\"createpages api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Gatsby provides an API called <code class=\"language-text\">createPages</code> that allows users to freely create pages they want at compile time.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The first argument, <code class=\"language-text\">graphql</code>, is the same one that is called when using GraphQL inside a React component, and the second argument,<code class=\"language-text\"> actions</code>, is the same action we are talking about in <a href=\"https://haruair.github.io/flux/docs/overview.html\" target=\"_blank\" rel=\"nofollow\">Flux Architecture</a>.</p>\n<p>Gatsby manages state using <a href=\"https://redux.js.org/\" target=\"_blank\" rel=\"nofollow\">Redux</a> internally, and since all of Gatsby‚Äôs APIs take this action list as an argument, we are free to use these actions to give commands to Gatsby. Among them, the action called <code class=\"language-text\">createPage</code> is an action that can issue a command to create a page.</p>\n<p>Now, we can think about this flow roughly.</p>\n<blockquote>\n<ol>\n<li>Using GraphQL, I get all the posts I‚Äôve written.</li>\n<li>Create a page one by one by dispatching the <code class=\"language-text\">createPage</code> action while traversing the post data.</li>\n<li>Profit!</li>\n</ol>\n</blockquote>\n<p>Actually, it‚Äôs simpler so you don‚Äôt have to worry much about it. Then let‚Äôs create a post page.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/Post.tsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 1. Get all the posts</span>\n  <span class=\"token keyword\">const</span> allPostsQuery <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    allMarkdownRemark {\n        edges {\n          fields {\n            path\n          }\n          node {\n            id\n          }\n        }\n      }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 2. Create a page file by traversing the post data.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">edges</span><span class=\"token operator\">:</span> posts <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> allPostsQuery<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">;</span>\n  posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> template<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">postId</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you write the page file creation logic using the <code class=\"language-text\">createPages</code> API like this, Gatsby does the rest of the troublesome work, which is very convenient.</p>\n<p>However, the <code class=\"language-text\">createPage</code> function simply creates a page file, and does not pass the post data to the <code class=\"language-text\">Page.tsx</code> component. Therefore, we can pass the customized data to the template component using the <code class=\"language-text\">context</code> option of the<code class=\"language-text\"> createPage</code> function, and we need to use this context data in the template component to get the post data again.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// Post.tsx</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery($postId: String!) {\n    markdownRemark(id: {eq: $postId}) {\n      fields {\n        path\n      }\n      frontmatter {\n        title\n        date\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  pageContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    postId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> frontmatter <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>markdownRemark<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The variables passed to the component through the <code class=\"language-text\">context</code> option of <code class=\"language-text\">createPage</code> are injected into the <code class=\"language-text\">pageQuery</code> module inside the React component file.</p>\n<p>If you look at my query, you can see that the variable <code class=\"language-text\">postId</code> is used in the query type<code class=\"language-text\"> markdownRemark</code> as a parameter of the query, such as <code class=\"language-text\">query PostQuery ($ postId: String!) {}</code>. Through this process, we can create a page that can fetch data using dynamic values.</p>\n<p>In addition, Gatsby supports various actions such as <code class=\"language-text\">createRedirect</code> and<code class=\"language-text\"> createNode</code>, and you can also create interesting features by combining these APIs and actions. However, in fact, simple features such as pagenation, category, and tag page required for applications such as blogs can be implemented with just the <code class=\"language-text\">createPage</code> action.</p>\n<h2 id=\"the-annoying-parts\" style=\"position:relative;\">The annoying parts<a href=\"#the-annoying-parts\" aria-label=\"the annoying parts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>After learning the basics of Gatsby, I had to work on implementing all the features that were implemented with Hexo and the CSS styles provided by the Icarus theme. And it wasn‚Äôt a lie to spend my time here during this migration, so it was a tedious series of tasks.</p>\n<p>Of course, implementing all the features now can take too long, so I tried to implement features first that people often use or existing features that affect SEO, but the fact that I still have a lot of code to write hasn‚Äôt changed. So I aimed to work a little steadily with patience.</p>\n<h3 id=\"care-about-the-connection-with-the-existing-link\" style=\"position:relative;\">Care about the connection with the existing link<a href=\"#care-about-the-connection-with-the-existing-link\" aria-label=\"care about the connection with the existing link permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>One of the things to watch out for when migrating web services is that links to old pages shouldn‚Äôt die. For example, if the URL <code class=\"language-text\">/posts/1</code> before migration was a link to a page where you can see post 1, this rule must be the same after migration also.</p>\n<p>If this rule is broken, the user accessing the link will encounter <code class=\"language-text\">404</code> status. Since my blog post has already been shared through various channels, and is often linked as a reference post on another blog, I had no choice but to care about this part.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAP/2gAMAwEAAhADEAAAAYiE51kzRP/EABoQAAICAwAAAAAAAAAAAAAAAAECABIDESH/2gAIAQEAAQUC0IAsbIqksaWMbrf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQIBAT8BjL//xAAZEAABBQAAAAAAAAAAAAAAAAAAARARIdH/2gAIAQEABj8CNIEt/wD/xAAbEAEAAgIDAAAAAAAAAAAAAAABACERMUFhsf/aAAgBAQABPyF7B8mAWsUpC4uU03Gorc//2gAMAwEAAgADAAAAEFMf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAwEBPxCMU//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAgEBPxASbAv/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRkf/aAAgBAQABPxBwhkQbajPZdFe+n2X/AGQ6I6oKrnUrhwHscUp1n//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"whoami\" title=\"\" src=\"/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg\" srcset=\"/static/b8cf4a7419783c7dc8a53d556099190c/0913d/whoami.jpg 160w,\n/static/b8cf4a7419783c7dc8a53d556099190c/cb69c/whoami.jpg 320w,\n/static/b8cf4a7419783c7dc8a53d556099190c/c08c5/whoami.jpg 640w,\n/static/b8cf4a7419783c7dc8a53d556099190c/6a068/whoami.jpg 960w,\n/static/b8cf4a7419783c7dc8a53d556099190c/eea4a/whoami.jpg 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>If the existing link is not processed properly, the user will see the 404 page.</small>\n</center>\n<p>Also, problems may arise in the SEO aspect. If <code class=\"language-text\">404</code> status is returned from the old post link, the search engine bot will recognize the page as deleted, and the it can be disappear from the search results. If inevitably it is a situation where you need to change an existing link to another link, you must explicitly return the ‚Äò301‚Äô status code as a response to tell the search engine bot which link the <code class=\"language-text\">/posts/1</code> has changed to.</p>\n<p>Hexo provided a feature that automatically maps posts with the title <code class=\"language-text\">yyyymmdd-{postTitle}</code> to URLs in the form <code class=\"language-text\">/yyyy/mm/dd/{postTitle}/</code>, unfortunately Gatsby does not.</p>\n<p>The gatsby-starter-blog starter basically gets the path of each post markdown file and uses it as a URL as a boilerplate, but this method is different from Hexo‚Äôs URL generation method. So I had to do extra work so that the posts had the same URL as before.</p>\n<p>To do this, I wrote a simple code that creates a URL from the file path of each post and inserts it into the post node field with the key <code class=\"language-text\">path</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-node.js</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> filePath<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n      <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?&lt;=\\/)(\\d{4})(\\d{2})(\\d{2})(-)(?=.+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'$1/$2/$3/'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">slug</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> filePath<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">path</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The field of the node created through the <code class=\"language-text\">createNodeField</code> action is inserted into a <code class=\"language-text\"> field</code> property, and it can be accessed like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PostQuery {\n    markdownRemark {\n      fields {\n        path\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mapping the posts of these new blogs to have the same links as existing blogs wasn‚Äôt very difficult or complicated, but it was quite annoying because I had to work with care not to break even a single link.</p>\n<h3 id=\"make-it-all-by-myself\" style=\"position:relative;\">Make it all by myself.<a href=\"#make-it-all-by-myself\" aria-label=\"make it all by myself permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When I using Hexo, I rarely had to develop it myself because I used the functions provided by the theme or actively used plugins. However, the reason for this migration was my blog was too dependent on themes or plugins, so I choose to implement the necessary functions directly.</p>\n<p>For example, I was rendering related posts using the <a href=\"https://github.com/tea3/hexo-related-popular-posts\" target=\"_blank\" rel=\"nofollow\">hexo-related-popular-posts</a> plugin before, but in the Gatsby ecosystem, I couldn‚Äôt find a useful one, so I implemented it myself like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> intersection <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash/intersection'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useAllPosts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/hooks/useAllPosts'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RelatedPosts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tags<span class=\"token punctuation\">,</span> currentPost <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useAllPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> relatedPosts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> posts\n      <span class=\"token comment\">// Filter out current post.</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>post <span class=\"token operator\">=></span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">!==</span> currentPost<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// Finds duplicates between the tag of the current post and the tag of another post.</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>post <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        post<span class=\"token punctuation\">,</span>\n        tags<span class=\"token operator\">:</span> <span class=\"token function\">intersection</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// Filter out posts without duplicated tags.</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tags <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// Sorts in descending order of the number of duplicated tags.</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>v <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// Only the top 5 posts with the most duplicated tags are filtered out.</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">MAX_COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentPost<span class=\"token punctuation\">,</span> posts<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>In fact, it is quite simple logic because it is just simply finding the posts that have the most tags that overlap with the current posts.</p>\n<p>It‚Äôs annoying to have to implement all of this, but on the other hand, it it means that the freedom to implement the desired features has also increased. So it is Ok.</p>\n<h3 id=\"there-is-no-posting-creation-function-in-cli\" style=\"position:relative;\">There is no posting creation function in CLI.<a href=\"#there-is-no-posting-creation-function-in-cli\" aria-label=\"there is no posting creation function in cli permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Essentially, Gatsby isn‚Äôt dedicated to markdown blogs, it‚Äôs just a static site generator, so it doesn‚Äôt offer anything like post creation with CLI.</p>\n<p>However, it is too bored work to manually create a directory every time, rename a directory, and create a posting file. So I decided to write a very simple script and use it.</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token comment\">&lt;!-- example.md --></span>\n\n<span class=\"token hr punctuation\">---</span>\n\ntitle: $title\ndate: $date\ntags:\ncategories:\nthumbnail:\n\n<span class=\"token hr punctuation\">---</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You can create a new posting file by simply creating an example file and loading it when creating a new posting file, and changing only <code class=\"language-text\">$title</code> and<code class=\"language-text\"> $ date</code> to strings that you want.</p>\n<p>After that, you can use NodeJS <code class=\"language-text\">readline</code> API to receive the title of the post through system input during runtime, and record the post creation time in this markdown file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> new-post\n\n<span class=\"token function\">yarn</span> run v1.22.0\n$ <span class=\"token function\">node</span> ./scripts/newPost.js\n\nPlease enter the title of the posting.\nSince this title becomes the URL of the posting, it should be written <span class=\"token keyword\">in</span> English without spaces. <span class=\"token operator\">></span>\n <span class=\"token operator\">=</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Of course, you can also input category or tag data in the same way, but I didn‚Äôt add any related features because I felt it wasn‚Äôt very useful because I often changed categories or tags while writing a post.</p>\n<p>Not only me, but other many developers are writing their own scripts to do this. Unlike my simple script, their scripts are nice and feature-rich, so let‚Äôs find them out.</p>\n<h2 id=\"epilogue\" style=\"position:relative;\">Epilogue<a href=\"#epilogue\" aria-label=\"epilogue permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>When I first started migrating my blog, I thought it would take a month or so, but thanks to the Golden Holiday, the work ended faster than I thought.</p>\n<p>Although the design feels a bit clunky and buggy compared to the previous version, it has evolved into the first goal, ‚ÄúApplication that can be add any feature that I want‚Äù, so I am satisfied.</p>\n<p>And during this migration, I removed Google AdSense from my blog.</p>\n<p>This is because there was a small amount of revenue coming from advertisements, and I thought that advertisements could cause fatigue to users who visit my blog. <small><strike>(You can make money with stocks and real esta‚Ä¶MMF..MMPH)</strike></small></p>\n<p>Anyway, the start was to attach the i18n function to the blog, but suddenly I migrated, so it seems to be a Yak shaving. But as a result, I‚Äôm happy to get away from Hexo so I can make this and that blog easier.</p>","fields":{"slug":"20200509-gatsby-migration-retrospective-en","path":"/2020/05/09/gatsby-migration-retrospective/en/","lang":"en"},"frontmatter":{"title":"Migrating from Hexo to Gatsby","subTitle":"A Small Feature Turned into a Full Blog Migration‚Ä¶ An Unexpected Journey of Migration","date":"May 15, 2020","categories":["Programming","Tutorials"],"tags":["Gatsby","Hexo","Migration","Developer","Developer Blog","Yak Shaving"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/8e1cc1a52ffd263af7247d9f38008f4c/d803c/thumbnail.png","srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/d803c/thumbnail.png 320w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/fc5c5/thumbnail.webp 320w,\n/static/8e1cc1a52ffd263af7247d9f38008f4c/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/8e1cc1a52ffd263af7247d9f38008f4c/01fb2/thumbnail.png","srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/8e1cc1a52ffd263af7247d9f38008f4c/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"e072f8ed-ce83-57b3-8a24-690f28d94f3a","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-does-rest-actually-mean\">What Does REST Actually Mean?</a></p>\n<ul>\n<li><a href=\"#what-we-exchange-isnt-actually-the-resource\">What We Exchange Isn‚Äôt Actually the Resource</a></li>\n<li><a href=\"#what-represented-state-of-a-resource-means\">What ‚ÄúRepresented State of a Resource‚Äù Means</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#restful-api\">RESTful API</a></p>\n<ul>\n<li><a href=\"#using-uris-to-express-which-resource\">Using URIs to Express Which Resource</a></li>\n<li><a href=\"#using-http-methods-to-express-actions\">Using HTTP Methods to Express Actions</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about APIs ‚Äî the meeting point between frontend and backend developers. When building applications that run on the web or mobile, we typically use HTTP or HTTPS protocols to create APIs. How intuitive and clear these API definitions are can dramatically reduce a project‚Ä¶","html":"<p>In this post, I want to talk about APIs ‚Äî the meeting point between frontend and backend developers.</p>\n<p>When building applications that run on the web or mobile, we typically use HTTP or HTTPS protocols to create APIs. How intuitive and clear these API definitions are can dramatically reduce a project‚Äôs complexity, making API design a crucial part of system architecture.</p>\n<p>That‚Äôs why we need conventions to clearly define what each API does, and the tools we use in this process are ‚ÄúHTTP methods‚Äù and ‚ÄúURIs (Uniform Resource Identifiers).‚Äù</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET https://evan.com/users/1</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>An HTTP API endpoint uses HTTP methods and URIs like the above to express what the API does.</p>\n<p>The key point here is that what a user expects the API to do after reading this expression must clearly match what the server actually does. Imagine asking the server ‚Äútake one step forward!‚Äù and getting the response ‚Äúokay, I took one step backward!‚Äù ‚Äî that would be pretty confusing, wouldn‚Äôt it?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5304fec38eebf202dff1871c8dc2a88e/6aca1/doesnt_know.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABTEBjtgk//8QAGhABAQACAwAAAAAAAAAAAAAAAQIAAwQRMf/aAAgBAQABBQJvX3yLhDXDL7bkSM//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECERASIbH/2gAIAQEABj8Cu0yOngm5jx0//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUZH/2gAIAQEAAT8hDdefeJhi76pNoCekB8YjTe6Qui2f/9oADAMBAAIAAwAAABBHH//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxCiv//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EEf/xAAcEAEBAAICAwAAAAAAAAAAAAABEQAxUWEhQYH/2gAIAQEAAT8QC7sJVOqcd571u7BOzJ5BKJT5iKh5hnGBMkIPBlypaq5//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"doesnt know\" title=\"\" src=\"/static/5304fec38eebf202dff1871c8dc2a88e/c08c5/doesnt_know.jpg\" srcset=\"/static/5304fec38eebf202dff1871c8dc2a88e/0913d/doesnt_know.jpg 160w,\n/static/5304fec38eebf202dff1871c8dc2a88e/cb69c/doesnt_know.jpg 320w,\n/static/5304fec38eebf202dff1871c8dc2a88e/c08c5/doesnt_know.jpg 640w,\n/static/5304fec38eebf202dff1871c8dc2a88e/6aca1/doesnt_know.jpg 650w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Whether between humans or computers, poor expression leads to miscommunication</small>\n</center>\n<p>That‚Äôs why we use guidelines like <a href=\"https://en.wikipedia.org/wiki/REST\" target=\"_blank\" rel=\"nofollow\">REST</a>. REST is an API architecture guideline introduced by Roy Fielding in his doctoral dissertation back in 2000, and it remains widely used even after more than 20 years.</p>\n<p>But as I discussed in my previous post on <a href=\"/2020/03/15/about-http-status-code/\">HTTP status codes</a>, these are just guidelines ‚Äî not following them won‚Äôt cause errors or break anything. That said, ignoring these guidelines and developing however you please isn‚Äôt a great idea either. The term and concept of REST is so widespread in the industry that most developers assume any HTTP API they encounter will be RESTful. <small>(Its influence is practically on par with a de facto standard.)</small></p>\n<p>For that reason, in this post I want to explore why REST came about in the first place, and what it actually means when people keep saying ‚ÄúRESTful this, RESTful that.‚Äù</p>\n<h2 id=\"what-does-rest-actually-mean\" style=\"position:relative;\">What Does REST Actually Mean?<a href=\"#what-does-rest-actually-mean\" aria-label=\"what does rest actually mean permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>REST stands for <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer. The heart of this impressive-sounding term is ‚ÄúRepresentational State‚Äù ‚Äî which roughly translates to ‚Äúa represented state.‚Äù The ‚Äústate‚Äù here refers to the state of resources that the server holds.</p>\n<p>In other words, REST is an architectural guideline about exchanging the represented state of resources through communication.</p>\n<p>When discussing REST, many people struggle with understanding ‚Äúrepresentational state‚Äù because they think what client and server exchange through API communication is the resource itself.</p>\n<p>But with a little thought, you can see that we‚Äôre not actually exchanging resources directly through communication.</p>\n<h3 id=\"what-we-exchange-isnt-actually-the-resource\" style=\"position:relative;\">What We Exchange Isn‚Äôt Actually the Resource<a href=\"#what-we-exchange-isnt-actually-the-resource\" aria-label=\"what we exchange isnt actually the resource permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The resources we exchange through APIs could be documents, images, or simple JSON data. But we‚Äôre not actually exchanging the resources directly. Let‚Äôs look at a simple example to understand what this means.</p>\n<p>Imagine a client sends a request to an API endpoint that fetches a specific user‚Äôs information from the server:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET https://iamserver.com/api/users/2\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">iamserver.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>The client used this endpoint to request user #2‚Äôs resource. If the server processed the request successfully, the client would receive a response roughly like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">45</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token application-json\">\n<span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token operator\">:</span> 'Evan'<span class=\"token punctuation\">,</span>\n  org<span class=\"token operator\">:</span> 'Viva Republica'<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The response body contains user #2‚Äôs data. Normally, we‚Äôd describe this situation as ‚Äúwe fetched user #2‚Äôs data resource through the <code class=\"language-text\">/api/users/2</code> endpoint.‚Äù I use this shorthand myself for convenience.</p>\n<p>But‚Ä¶ is that JSON data the server sent really the resource itself?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5fafe421bec63ab1a86624ca4488daf0/6a068/no.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQP/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABrlbpRogn/8QAGRABAQEAAwAAAAAAAAAAAAAAAQARAgMi/9oACAEBAAEFAh99xvLMhZtb/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgEFAAAAAAAAAAAAAAAAAAFRAhARYYH/2gAIAQEABj8CdMGJEtHb/wD/xAAaEAACAgMAAAAAAAAAAAAAAAAAARFRITFB/9oACAEBAAE/IXPg3fBM7IcaIaUC9vIsO4//2gAMAwEAAgADAAAAEPgv/8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQMBAT8QSf/EABURAQEAAAAAAAAAAAAAAAAAABEA/9oACAECAQE/EBi//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFRYXGB/9oACAEBAAE/EKoUDjSZxogWj5EWggiF1KCX1fJya1r3ANGPU//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no\" title=\"\" src=\"/static/5fafe421bec63ab1a86624ca4488daf0/c08c5/no.jpg\" srcset=\"/static/5fafe421bec63ab1a86624ca4488daf0/0913d/no.jpg 160w,\n/static/5fafe421bec63ab1a86624ca4488daf0/cb69c/no.jpg 320w,\n/static/5fafe421bec63ab1a86624ca4488daf0/c08c5/no.jpg 640w,\n/static/5fafe421bec63ab1a86624ca4488daf0/6a068/no.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Nope. That's not user #2's resource!</small>\n</center>\n<p>The JSON the server sent isn‚Äôt the original resource ‚Äî it‚Äôs merely a representation of user #2‚Äôs data resource stored in the database. The server received the client‚Äôs request, looked up user #2‚Äôs information in the database, and represented it using the <code class=\"language-text\">application/json</code> format specified in the request header.</p>\n<p>Think about it ‚Äî the actual original resource the server accesses is just a row in a database or data written to a file. Sure, the server might store resources as JSON files in its local system, but the point is that the JSON the server sent is not the original resource.</p>\n<p>The JSON the server sent is simply the current state of the original data resource stored in the database, represented in a particular format.</p>\n<h3 id=\"what-represented-state-of-a-resource-means\" style=\"position:relative;\">What ‚ÄúRepresented State of a Resource‚Äù Means<a href=\"#what-represented-state-of-a-resource-means\" aria-label=\"what represented state of a resource means permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As I mentioned, REST‚Äôs ‚ÄúRepresentational State‚Äù means the state of an original resource as represented in some format. The original resource exists as a row stored in a database, but since you can‚Äôt just hand that raw data to the client, the server reads the original resource and represents it in an appropriate format.</p>\n<p>And the hints about this ‚Äúappropriate format‚Äù are all there in the HTTP request and response headers.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET https://iamserver.com/api/users/2\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">iamserver.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>In our earlier example, the client requested user #2‚Äôs resource and included <code class=\"language-text\">application/json</code> as the value of the <code class=\"language-text\">Accept</code> header. The client was telling the server: ‚Äúrepresent user #2‚Äôs state in JSON format.‚Äù If the client had sent <code class=\"language-text\">application/xml</code> instead and the server supported XML format representation, user #2‚Äôs resource would have come back represented in XML.</p>\n<p>The server then uses response headers like <code class=\"language-text\">Content-Type</code> and <code class=\"language-text\">Content-Language</code> to tell the client how the resource is represented, and the client reads this information to parse the content according to each content type.</p>\n<p>In other words, the client didn‚Äôt receive user #2‚Äôs resource. It received the current state of user #2‚Äôs resource, represented in JSON. This is what REST focuses on ‚Äî enabling clients and servers to freely and clearly represent resources using content types, languages, and other mechanisms.</p>\n<h2 id=\"restful-api\" style=\"position:relative;\">RESTful API<a href=\"#restful-api\" aria-label=\"restful api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>As I discussed, REST is ultimately an architectural style focused on how to clearly represent resources. But when using HTTP APIs, the represented state of a resource alone isn‚Äôt enough for clients to know exactly what will happen on the server when they call an API.</p>\n<p>REST only talks about the represented state of resources ‚Äî it says nothing about ‚Äúactions.‚Äù But what clients actually want when using a server‚Äôs API is clearly some action ‚Äî creating, deleting, or modifying resources.</p>\n<p>That‚Äôs why RESTful APIs leverage HTTP methods and URIs alongside REST architecture to specify both the represented resource and the intended action. Here‚Äôs what each element expresses:</p>\n<hr>\n<ol>\n<li>How is the resource represented? ‚Äî <strong>REST</strong></li>\n<li>Which resource? ‚Äî <strong>URI</strong></li>\n<li>What action? ‚Äî <strong>HTTP Method</strong></li>\n</ol>\n<hr>\n<p>With these elements clearly defined, a client can look at an endpoint like <code class=\"language-text\">GET /users/2</code> and immediately infer ‚Äúah, this API fetches user #2‚Äôs information‚Äù ‚Äî no lengthy documentation needed.</p>\n<p>Since I‚Äôve already covered REST (how resources are represented), let‚Äôs now look at URIs (which resource) and HTTP methods (what action).</p>\n<h3 id=\"using-uris-to-express-which-resource\" style=\"position:relative;\">Using URIs to Express Which Resource<a href=\"#using-uris-to-express-which-resource\" aria-label=\"using uris to express which resource permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A RESTful API‚Äôs URI indicates which resource the API deals with. For example, imagine an API that fetches the list of users in a service. The resource the client wants to access is ‚Äúusers,‚Äù and the URI should clearly represent that.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET /users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Honestly, this URI is clear enough that even a random middle schooler could tell it‚Äôs related to users. But why do we express the user resource as <code class=\"language-text\">users</code> in plural form rather than <code class=\"language-text\">user</code> in singular?</p>\n<p>Because the user resource isn‚Äôt one specific object. It‚Äôs the same logic as saying ‚ÄúI love <strong>cats</strong>‚Äù instead of ‚ÄúI love <strong>a cat</strong>‚Äù in English.</p>\n<p>I don‚Äôt love one particular cat ‚Äî I love cats as a species, and the word ‚Äúcats‚Äù here encompasses an abstract resource that includes the stray rummaging through trash cans in front of your apartment, someone‚Äôs pampered cat on Instagram, and every random cat you pass on the street.</p>\n<p>Now, let‚Äôs get one level more specific from this abstract ‚Äúusers‚Äù resource. The next level of specificity from the abstract ‚Äúusers‚Äù is ‚Äúa specific user.‚Äù</p>\n<h4 id=\"expressing-resource-hierarchy\" style=\"position:relative;\">Expressing Resource Hierarchy<a href=\"#expressing-resource-hierarchy\" aria-label=\"expressing resource hierarchy permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Since users typically have unique IDs, we can use those IDs to represent a specific user with a URI like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET /users/2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>As you‚Äôve probably noticed, this URI takes the <code class=\"language-text\">/users</code> URI that represents users in general and appends a unique ID to identify a specific user.</p>\n<p>This ‚Äúuser #2‚Äù resource is a subset of the ‚Äúusers‚Äù resource, and RESTful APIs recommend using <code class=\"language-text\">/</code> to express hierarchical relationships between resources.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b57aa2a5b2149437f1bfe0021e65f2f7/5bb8b/resource_layer.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+klEQVR42p2U7U4TQRSGeysmXoHxF5LS7m63xSCUtNtSW6C0hbYg1sIfo0BsKSY0oR9sheWjH6DEbNEYqoJGuADvwttQxryeWSiW0kThx5OZnHnPe85MZsa0sbHRRehEvRPr6+v1Ukmtq6pK87Ur65qm6cQ7mlc3Nzdvmcrl8uf9/X3UajW2s7ODViiGg4MGjo6+4vDwC3S9bsTadcQp96hUKssmcj6uVqug8SfBWlnXNLb3psY+HbxljQ97bKdWYdQNa9fxXF6IOlQNQ15ldXWVEWjnlVrAlpbHplZASS2ik4bn7u7ugoqppu3t7ZNsNotIJMKi0ShamZiYQDw+ienpBKampikWQ7uGMz4+zkqlEuj4VH6GJ6lUCmNjY4wb0KIBn4dCIczMJKGqJeRyecRjMV74QtPU8dyVlRXQ0Z0ZptNpnszi8ThilNRkcjKOF/NJLC/OIkXj/LOEEWvVcLhhLpf7a7i4uIhgMMh8Ph+GhoYMFEWB2+2Gh0av5wyPx2PEvV7vhc7v9181zGQyIDNmtVohCCIsFgucTidcLheZKhgYGDDo7+83sNlspBMM+Hx4eJjl8/mrhqIoQiaBKApchGQygYWFOSQSCSSfPMbc86d4uZSB4naBF5ckCbIsIxAIdDIcMjq875ARCysYDw7C7+1DZNSJaMiFYKDfiI36nZiaUDD7yIde0kqSrbMhnQfjW+Bd8m3zkXfAuWfuQY9VMOLW8zXZJhkj3/I/DZsI3JSYGbRhzGGBwAs0186Nr20omrvwY3cJH9NT6O7uMjpu1VzPkLYpKlF8b7yHXn2Nu3YfbCLXSP9neHZtzq6DKFhhFh14kNSwXG5gfq2BOw+X0KppXpt2w2N+semCMofDgXZkyQKLuRvWnm70ysKlNbvdjr6+PoyMjBgX23jL5PqNd0gv5Vc4HP5NT/Ay4cjvcISgMRSKXFnnOTz34qXQ13Wo6zoKhQIrFou4CfR9nZ5/0lkT/WFm+hjr1O6NoF9aJ/bJo7a1tXX7Dyntkgi4sEC8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"resource layer\" title=\"\" src=\"/static/b57aa2a5b2149437f1bfe0021e65f2f7/6af66/resource_layer.png\" srcset=\"/static/b57aa2a5b2149437f1bfe0021e65f2f7/69538/resource_layer.png 160w,\n/static/b57aa2a5b2149437f1bfe0021e65f2f7/72799/resource_layer.png 320w,\n/static/b57aa2a5b2149437f1bfe0021e65f2f7/6af66/resource_layer.png 640w,\n/static/b57aa2a5b2149437f1bfe0021e65f2f7/5bb8b/resource_layer.png 749w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A hierarchy flowing from users &gt; specific user &gt; specific user's profile image<small>\n</small></small></center>\n<p>Resource hierarchy is an extremely important and sensitive element in API design because it‚Äôs about how you define relationships between your application‚Äôs resources. And like most design patterns, there‚Äôs no single right answer ‚Äî you‚Äôre bound to wrestle with it.</p>\n<p>Having no single right answer means that representing a profile image resource as <code class=\"language-text\">/profile-images/users/2</code> instead of <code class=\"language-text\">/users/2/profile-image</code> is perfectly valid from a logical standpoint. The only difference is what meaning the profile image resource carries.</p>\n<hr>\n<center>\n<code class=\"language-text\">/users/2/profile-image</code><br />\n<small>The profile image of user #2 among users</small>\n</center>\n<br />\n<center>\n<code class=\"language-text\">/profile-images/users/2</code><br />\n<small>User #2's profile image among user profile images among all profile images</small>\n</center>\n<hr>\n<p>As you can see, the same profile image takes on completely different meanings depending on how you design the resource hierarchy. In this case, if no other resource besides users can have profile images, <code class=\"language-text\">/users/2/profile-image</code> makes sense. But if various resources need profile images, <code class=\"language-text\">/profile-images/users/2</code> becomes worth considering.</p>\n<p>Ultimately, the question we need to ask is: for the resource ‚Äúa specific user‚Äôs profile image,‚Äù is ‚Äúusers‚Äù or ‚Äúprofile images‚Äù the more appropriate parent in the hierarchy?</p>\n<p>As I said, there‚Äôs no right answer ‚Äî so always discuss with your team and design URIs that can flexibly adapt to rapidly changing business requirements.</p>\n<h4 id=\"uris-should-not-express-actions\" style=\"position:relative;\">URIs Should Not Express Actions<a href=\"#uris-should-not-express-actions\" aria-label=\"uris should not express actions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Another important rule when designing RESTful API URIs is that URIs should never include expressions that imply an action. For example, imagine an endpoint that deletes a user. If you‚Äôre not familiar with HTTP methods, you might design something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">POST /users/2/delete</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>This URI includes <code class=\"language-text\">delete</code>, which implies a deletion action. Sure, you can still tell what this API does, but RESTful API guidelines recommend against expressing actions in URIs. A URI‚Äôs meaning should be strictly about which resource and the resource‚Äôs hierarchical structure ‚Äî nothing more.</p>\n<p>Actions should be expressed using the appropriate HTTP methods. This isn‚Äôt just because RESTful API guidelines say so ‚Äî it‚Äôs also because you never know what side effects might occur when your application (built without following RESTful guidelines) communicates with other applications that do follow them. <small>(Web browsers alone are heavily designed around HTTP methods and status codes.)</small></p>\n<p>So the properly designed endpoint would use the <code class=\"language-text\">DELETE</code> HTTP method, which represents deletion:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">DELETE /users/2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Now that we‚Äôve covered how to represent resources using URIs, let‚Äôs look at how to express API actions.</p>\n<h3 id=\"using-http-methods-to-express-actions\" style=\"position:relative;\">Using HTTP Methods to Express Actions<a href=\"#using-http-methods-to-express-actions\" aria-label=\"using http methods to express actions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>RESTful APIs recommend using HTTP methods to express the actions an API performs. HTTP methods are a standard defined in <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html\" target=\"_blank\" rel=\"nofollow\">RFC-2616</a>, so remember that using a method that doesn‚Äôt match the situation can cause your application to behave unexpectedly.</p>\n<p>In practice, most API actions boil down to ‚ÄúCRUD (Create, Read, Update, Delete),‚Äù so aside from a few special cases, just 5 HTTP methods can define the vast majority of APIs:</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>GET</td>\n<td>Read a resource</td>\n</tr>\n<tr>\n<td>PUT</td>\n<td>Replace a resource</td>\n</tr>\n<tr>\n<td>DELETE</td>\n<td>Delete a resource</td>\n</tr>\n<tr>\n<td>POST</td>\n<td>Create a resource</td>\n</tr>\n<tr>\n<td>PATCH</td>\n<td>Partially modify a resource</td>\n</tr>\n</tbody>\n</table>\n<p>Methods like <code class=\"language-text\">HEAD</code>, <code class=\"language-text\">OPTIONS</code>, and <code class=\"language-text\">TRACE</code> also exist, but knowing just these five and their roles is more than enough for expressing correct actions and designing RESTful APIs.</p>\n<p>One potentially confusing pair here is <code class=\"language-text\">PUT</code> and <code class=\"language-text\">PATCH</code>. Both are often interpreted as ‚Äúmodify a resource,‚Äù making it hard to know when to use which.</p>\n<h4 id=\"whats-the-difference-between-put-and-patch\" style=\"position:relative;\">What‚Äôs the Difference Between PUT and PATCH?<a href=\"#whats-the-difference-between-put-and-patch\" aria-label=\"whats the difference between put and patch permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>People commonly describe <code class=\"language-text\">PUT</code> as ‚Äúmodifying a resource,‚Äù but what <code class=\"language-text\">PUT</code> actually means is replacing a resource with whatever is in the request body ‚Äî not modifying it.</p>\n<p>Let‚Äôs say we need to change the name of a user resource <code class=\"language-text\">{ id: 1, name: 'evan' }</code> to <code class=\"language-text\">ethan</code>. If we use <code class=\"language-text\">PUT</code>, we must include the entire user resource in the request body.</p>\n<p>In other words, we have to send not just the changed fields, but the unchanged ones too.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">PUT /users/1\n{ id: 1, name: 'ethan' }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/01507d03747ddad000635c4cc253c959/1d499/put_method.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUUlEQVR42o2S30taYRjHXdvFYFCbwQKLXexy4KWMlI7TNdOjHdO06dLjOeYmDcGlSO0qkBpa7kJYN8u04Vmixxt/JPgfiJfe9ResgUQFeqGn99l7YsZYEb3w8PyA98P3+SGR3PLsdvt9hUIxKpfLn4yNjT2VSqXDYu22PxK1Wv1QJpONTky8kI6MjDw2Go3j2Ww2yR3kOO5nbp/juGyxWOTK5XKuXKlky9XqfrVa5Q4PD5O1Wm1YZADAvSugRqNJ6XS6LrZfWq32N0VRbafTiWjXW2BoJ9hsNgiHw5BK7UFq9ztkf2RQJpMBnuc7rVbr+V/g0BVQr9eX3G432BfmBbOFAoZhYHr6tWAmCcE6qxHUakKgaVqIx+PC1+0vwt7ut34ymUTpdPq82WxeAtfX14f+bVmvUqk+K5XK0OTLySBWGg0Ggz3aw4LH40Usw0IoFIJEIgGx2DZsbsZQLBYDDOzcCBy8QRHLH19bW+sa9HqwWOeQwWgAq9UKJEkCZXoDFmoG4Q7g08pK5/j4+DpQTMTNYf9AzE9OTp6trq52Z02zeAx2ZKJMWKkH5vEsnQs4XjQjkjRAJBK5Gfi/wna7PY7b63q9XvD5fMj/wQ8sy4ox+N77YWnJj8R4a2urc3R0dLeWA4HAOUEQF3jjPUJL9LHvU+a5Pjnzqm82aXpTU1MXy8sfz05PT+8G3NjY6DocDlEZcrkWQVQrqqTd74BlFpHD4YRoNNq5FTg4znq9/qhUKu0UCgUe2wHPF3P5fP7SxLhQKOJaga9UKjuNRuPaYf8B+eZOndX+TzwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"put method\" title=\"\" src=\"/static/01507d03747ddad000635c4cc253c959/6af66/put_method.png\" srcset=\"/static/01507d03747ddad000635c4cc253c959/69538/put_method.png 160w,\n/static/01507d03747ddad000635c4cc253c959/72799/put_method.png 320w,\n/static/01507d03747ddad000635c4cc253c959/6af66/put_method.png 640w,\n/static/01507d03747ddad000635c4cc253c959/d9199/put_method.png 960w,\n/static/01507d03747ddad000635c4cc253c959/21b4d/put_method.png 1280w,\n/static/01507d03747ddad000635c4cc253c959/1d499/put_method.png 1632w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>PUT doesn't modify a resource ‚Äî it replaces it</small>\n</center>\n<p>Because <code class=\"language-text\">PUT</code> replaces the entire resource, if you accidentally send something like <code class=\"language-text\">{ id: null, name: 'ethan' }</code>, this user permanently loses their ID ‚Äî a tragic fate. <small>(Admittedly, most developers handle this edge case.)</small></p>\n<p>On the flip side, the simplicity of ‚Äújust receive a resource and replace it‚Äù means neither the sender nor the receiver has to think too hard about it ‚Äî which is convenient.</p>\n<p>Now, what if we used <code class=\"language-text\">PATCH</code> for the same operation?</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">PATCH /users/1\n{ name: 'ethan' }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f42966e7e24473577e61e2dda4f7aa09/c1b63/patch_method.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFUlEQVR42n1Uz0sbQRSO2GJpD9ba0kObQsEIWvBkrEKycbPJRhOTTSKJWoxRYxrEisYoVjw1MaUFEX8galRE9ORJ/IGgiCfFgwqlXkpz6K1/Qqnbzdc3i4otTQc+vrfvvflm3puZ1WiyjKKiorySkpIXZWVlxaWlpQ/I1hUXFz/X6XRPfD5fbrZ5GgA5a2trasLe3t6zk5OTytPT03Lil9vb2+adnZ3qg4MDw9bWFs+wu7trOjs701/mVFLs6aVUjuamQcK5m5ubpwuLi5ienpZnZmZ+ES7m5uYuUqmUPD8/f8HA7LlUSqGYvLS0hI2NjUO2qWuthoYGbVNTkzsajdYnEvHvklQHe21NRhAEWCwWmEwmVFVVoqKigqBXWa/Xg+OMit1ux+zs7DkJ3r6qVhMMBkP9/f0YHHz7ozPSnhmMBvGmMwiXyw2b3QqD0QCtVovCwoe4n5+Px48KUHD/HhNW6urqMDEx8flKUN0hOe+Wl5drBwYGdGNjY9/8Ph/ckjvj8Xjg9XrgdrvhdDppAdclE4glSVIaGxuxsLBw/ofgVf3EeXQ46aGhIfT09CrUAsT6Yujr64Nqx2KIUSXRKPPF0NvbqwwPD4PmZBW8Mz4+nmZ9s1qtis1mA1dthCCYwXolCBaYeQ6OWh41ogk8b1Jzpqamsu+QSk6zyVSu4vf7YRarIbklvA6Hqfx61Np4RII1CDRYIIqC4nS6WA+zCy4vL6fDNDkQCCgtLS1oa20D4+bmZpVbW1vRHAgi0BJk30okEsHKykp2QQqmu7q6EAqFlI6ODjCEw69VJh9xGCFCBy3a3t6udHd3Y3V19f8lsx6Koqh4vV6INVaYLTy8Hi/ouUG0CqiXzHA5eLXPlIfJycnsgnQoXziOo4bzPx0Oh8ybeZnjOZmui0zXRDYaDbLDZpBtVoPMmap/Uh47lE//FMxkMnnr6+tfR0dHMTIyoiQSCSRHkkgmk2B2PB5H8j2zkxR/r+ZQRezpsYt96+/3rI79/f1XR0dHHw4PD98Rx69wfHys4qaP5RA+0s/Cf/3sNBrNbw2AJbS7KLM6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"patch method\" title=\"\" src=\"/static/f42966e7e24473577e61e2dda4f7aa09/6af66/patch_method.png\" srcset=\"/static/f42966e7e24473577e61e2dda4f7aa09/69538/patch_method.png 160w,\n/static/f42966e7e24473577e61e2dda4f7aa09/72799/patch_method.png 320w,\n/static/f42966e7e24473577e61e2dda4f7aa09/6af66/patch_method.png 640w,\n/static/f42966e7e24473577e61e2dda4f7aa09/d9199/patch_method.png 960w,\n/static/f42966e7e24473577e61e2dda4f7aa09/c1b63/patch_method.png 1200w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>PATCH modifies part of a resource</small>\n</center>\n<p>Unlike <code class=\"language-text\">PUT</code>, <code class=\"language-text\">PATCH</code> truly means modifying the currently stored resource, so there‚Äôs no need to include unchanged fields in the request body.</p>\n<p>Since <code class=\"language-text\">PATCH</code> only requires sending what you actually want to change ‚Äî unlike <code class=\"language-text\">PUT</code> which demands the full resource ‚Äî you avoid unnecessarily large request bodies.</p>\n<p>In practice, when performing update operations through APIs, people often think of it as equivalent to SQL‚Äôs <code class=\"language-text\">UPDATE</code>. In that sense, <code class=\"language-text\">PATCH</code> (which modifies part of a resource) is arguably a better semantic fit for ‚Äúupdating‚Äù than <code class=\"language-text\">PUT</code> (which replaces the entire resource).</p>\n<p>While <code class=\"language-text\">PUT</code> is still more commonly used for update operations, the semantic difference between <code class=\"language-text\">PUT</code> and <code class=\"language-text\">PATCH</code> clearly exists, so I recommend choosing the method that matches your intended action ‚Äî ‚Äúreplace a resource‚Äù or ‚Äúmodify a resource‚Äù ‚Äî when designing endpoints.</p>\n<p>However, the truly important difference between <code class=\"language-text\">PUT</code> and <code class=\"language-text\">PATCH</code> isn‚Äôt the semantic distinction ‚Äî it‚Äôs that <code class=\"language-text\">PUT</code> always guarantees idempotency while <code class=\"language-text\">PATCH</code> may not.</p>\n<h4 id=\"does-the-method-guarantee-idempotency\" style=\"position:relative;\">Does the Method Guarantee Idempotency?<a href=\"#does-the-method-guarantee-idempotency\" aria-label=\"does the method guarantee idempotency permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Idempotency, in mathematics and computer science, is the property that applying the same operation multiple times to a subject produces the same result. This isn‚Äôt specific to HTTP methods ‚Äî it applies to all computer operations including reading and writing to databases or files.</p>\n<p>The most classic example of an idempotent operation is multiplying a number by 1. A function like <code class=\"language-text\">x => x * 1</code> returns <code class=\"language-text\">x</code> whether you apply it once or 10,000 times.</p>\n<p>But a function that adds or subtracts 1 instead of multiplying would increase or decrease the given value with each call, so it doesn‚Äôt always return the same result. This is the textbook example of a non-idempotent operation.</p>\n<p>Since HTTP methods represent CRUD operations on resources, understanding which operations are idempotent helps prevent applications from behaving unexpectedly. An error from calling <code class=\"language-text\">GET</code> multiple times and an error from calling <code class=\"language-text\">POST</code> multiple times can have completely different contexts.</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Idempotent</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>GET</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>PUT</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>DELETE</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>POST</td>\n<td>No</td>\n</tr>\n<tr>\n<td>PATCH</td>\n<td>No</td>\n</tr>\n</tbody>\n</table>\n<p>Let‚Äôs look at this table without overthinking it. <code class=\"language-text\">GET</code> simply reads a resource, so no matter how many times you call it, the result won‚Äôt change. Similarly, <code class=\"language-text\">PUT</code> replaces an existing resource with whatever is in the request ‚Äî as long as the request body doesn‚Äôt change, the result stays the same no matter how many times you call it.</p>\n<p>In other words, operations that read or replace resources are idempotent. So what about non-idempotent cases?</p>\n<p><code class=\"language-text\">POST</code> creates a new resource, so calling it multiple times creates a new resource each time ‚Äî meaning the result of the operation changes with every call. Non-idempotent operations like <code class=\"language-text\">POST</code> can change the application‚Äôs state in completely different ways with each invocation.</p>\n<p>Knowledge of HTTP method idempotency is also useful when debugging with limited error information. Even though both errors occur after network communication, an error from calling <code class=\"language-text\">GET</code> multiple times and an error from calling <code class=\"language-text\">POST</code> multiple times may have entirely different contexts.</p>\n<h4 id=\"why-is-patch-considered-non-idempotent\" style=\"position:relative;\">Why Is PATCH Considered Non-Idempotent?<a href=\"#why-is-patch-considered-non-idempotent\" aria-label=\"why is patch considered non idempotent permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>In the table above, <code class=\"language-text\">PATCH</code> is marked as non-idempotent just like <code class=\"language-text\">POST</code>. But to be precise, <code class=\"language-text\">PATCH</code> can be idempotent like <code class=\"language-text\">PUT</code> or non-idempotent ‚Äî depending on how it‚Äôs implemented.</p>\n<p>Since <code class=\"language-text\">PATCH</code> doesn‚Äôt replace a resource like <code class=\"language-text\">PUT</code>, there are no strict constraints on how the request should be structured. Per the RFC spec, <code class=\"language-text\">PATCH</code> simply means ‚Äúmodify part of a resource‚Äù ‚Äî nothing more.</p>\n<p>For example, when you use <code class=\"language-text\">PATCH</code> the way I described earlier ‚Äî sending only the fields you want to modify ‚Äî it‚Äôs naturally idempotent:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Original resource</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'evan'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">PATCH users/1\n{ age: 31 }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Updated resource</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'evan'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Changed!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This <code class=\"language-text\">PATCH</code> request clearly means ‚Äúset the <code class=\"language-text\">age</code> field to <code class=\"language-text\">31</code>,‚Äù so no matter how many times you call it, <code class=\"language-text\">age</code> will always be <code class=\"language-text\">31</code>. This is a very common implementation of <code class=\"language-text\">PATCH</code>, and it‚Äôs how I personally implement it too.</p>\n<p>So why do people say <code class=\"language-text\">PATCH</code> might not be idempotent?</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/aaf02eaa6cd79f5891d97861cc8e7338/6a068/hm.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAXv5u6LgYmv/xAAaEAADAAMBAAAAAAAAAAAAAAABAgMAERIT/9oACAEBAAEFApTCnme/GZzeSbpWoFP/xAAWEQEBAQAAAAAAAAAAAAAAAAABABL/2gAIAQMBAT8BCyX/xAAYEQEAAwEAAAAAAAAAAAAAAAABAAISUf/aAAgBAgEBPwG6hN37P//EABwQAAICAgMAAAAAAAAAAAAAAAARAQIQIRJRcf/aAAgBAQAGPwJ3mPDdWx8IjC6Fs//EABkQAQEBAAMAAAAAAAAAAAAAAAEAETFBYf/aAAgBAQABPyG0DY4icl5Jc6dpqgr/2gAMAwEAAgADAAAAEOwv/8QAFxEBAAMAAAAAAAAAAAAAAAAAABExYf/aAAgBAwEBPxCa2D//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/ELhGLH//xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMUFxwf/aAAgBAQABPxDSDeDbjuyMtSm+cMLVquhPPvApXeOWgSj3ACiW9+5//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hm\" title=\"\" src=\"/static/aaf02eaa6cd79f5891d97861cc8e7338/c08c5/hm.jpg\" srcset=\"/static/aaf02eaa6cd79f5891d97861cc8e7338/0913d/hm.jpg 160w,\n/static/aaf02eaa6cd79f5891d97861cc8e7338/cb69c/hm.jpg 320w,\n/static/aaf02eaa6cd79f5891d97861cc8e7338/c08c5/hm.jpg 640w,\n/static/aaf02eaa6cd79f5891d97861cc8e7338/6a068/hm.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The nagging suspicion that maybe this isn't the only way to implement PATCH</small>\n</center>\n<p>Origins matter, so let‚Äôs crack open <a href=\"https://tools.ietf.org/html/rfc5789\" target=\"_blank\" rel=\"nofollow\">RFC-5789</a> ‚Äî the document that first defined the <code class=\"language-text\">PATCH</code> method. RFC documents usually include explanations and brief examples, so it should show the ‚Äúcorrect‚Äù way to implement <code class=\"language-text\">PATCH</code>.</p>\n<center>\n.<br />\n.<br />\n.<br />\n</center>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ddc05d3c7f7b2e1d49eedd8538eb835e/d43b4/patch_example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaElEQVR42m2S547CQAyEef/3yV8ECIQiqiih915EB1EEc/osLdzlsGQ2rJ2ZsSeR8Xisdrut6/UqnqvVqhKJhGWj0VAQBPI8T/F4XOVy2c5oNCrf97Xb7US8Xi+5iNxuNwPj8n6/63K5WON6vRY19/9wOFjf8XjUYrHQfr/X4/FQOCL8PJ9P1et11Wo1zWYzbbdbe2m5XGqz2Wi1Wmk+n5va0Whk9dPpZCLCaYAwpVIpZbNZU8bYpVJJ3W5XmUzGstlsGmmhUDDFvPN71D8KKdJYqVTU6/XU6XRsXxAAClA6ndZgMDAielCMWupMBiHTvEfmslgsKp/Pq9VqaTKZmFnOmFgs9iZlBW4dnAAPh0Odz+ePQphRxXgAwNzv95XL5YyM52QyaaaEnf03MkUWTbIfmJwZJE7jOLUw0FdTiOl0amNiCk47MMA5IeA7pYcRv4G/FRLsgN25ZUPgPhFIAHBrwDTuvwH+AC4t69xt49FhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"patch example\" title=\"\" src=\"/static/ddc05d3c7f7b2e1d49eedd8538eb835e/6af66/patch_example.png\" srcset=\"/static/ddc05d3c7f7b2e1d49eedd8538eb835e/69538/patch_example.png 160w,\n/static/ddc05d3c7f7b2e1d49eedd8538eb835e/72799/patch_example.png 320w,\n/static/ddc05d3c7f7b2e1d49eedd8538eb835e/6af66/patch_example.png 640w,\n/static/ddc05d3c7f7b2e1d49eedd8538eb835e/d9199/patch_example.png 960w,\n/static/ddc05d3c7f7b2e1d49eedd8538eb835e/d43b4/patch_example.png 1202w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>...nope, nothing there</small>\n</center>\n<p>Surprisingly, the example request body in <a href=\"https://tools.ietf.org/html/rfc5789\" target=\"_blank\" rel=\"nofollow\">RFC-5789</a> simply says <code class=\"language-text\">description of changes</code> ‚Äî no constraints whatsoever. This means developers are free to define the API interface however they want, making implementations like this perfectly valid:</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">PATCH users/1\n{\n  $increase: 'age',\n  value: 1,\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Here, the <code class=\"language-text\">$increase</code> field specifies which property to increment, and <code class=\"language-text\">value</code> specifies by how much. In this case, Evan‚Äôs age increases by 1 every time the API is called <small><strike>(‚Ä¶sad)</strike></small>, so this API is not idempotent.</p>\n<p>I‚Äôve personally never seen <code class=\"language-text\">PATCH</code> used this way in practice, but as I mentioned, <a href=\"https://tools.ietf.org/html/rfc5789\" target=\"_blank\" rel=\"nofollow\">RFC-5789</a> places no constraints on how to implement <code class=\"language-text\">PATCH</code>, so using it this way doesn‚Äôt violate any standard.</p>\n<p>In short, because the spec places no constraints on implementation details, <code class=\"language-text\">PATCH</code> may or may not be idempotent depending on how the API is built.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>REST is really a guideline for designing network architecture, so the ‚Äúrepresentational state‚Äù I discussed is just one piece of it. But since this post aimed to explain RESTful APIs specifically, I didn‚Äôt dive into the deeper details. If you‚Äôre curious about REST beyond what I‚Äôve covered, I recommend reading the <a href=\"https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm\" target=\"_blank\" rel=\"nofollow\">REST chapter</a> from Roy Fielding‚Äôs dissertation.</p>\n<p>RESTful APIs have been the topic I‚Äôve discussed most frequently with backend developers throughout my career as a frontend developer. Those discussions stemmed partly from a desire to define clear APIs, and partly from wanting to make APIs so clear that new developers joining the team could get up to speed immediately. <small>(I was having this exact conversation at the office today, in fact.)</small></p>\n<p>Personally, I believe the best API isn‚Äôt one with the most features or one that‚Äôs free to use ‚Äî it‚Äôs one so clear that someone with zero context can look at an endpoint and immediately understand what it does, without any additional explanation.</p>\n<p>Sure, learning and following architectural guidelines like RESTful APIs can feel tedious. But the purpose of these standards and guidelines is to create a unified traffic system that millions of developers worldwide can communicate through. Perhaps it‚Äôs these small individual efforts to follow the guidelines that, collectively, keep the vast web architecture running smoothly.</p>\n<p>That wraps up this post on RESTful APIs ‚Äî the endpoint where frontend and backend communicate.</p>","fields":{"slug":"20200407-about-restful-api-en","path":"/2020/04/07/about-restful-api/en/","lang":"en"},"frontmatter":{"title":"RESTful APIs: Where Frontend Meets Backend","subTitle":"Understanding the philosophy of REST ‚Äî between representation and action","date":"Apr 07, 2020","categories":["Programming","Network","Architecture"],"tags":["REST","REST API","RESTful API","HTTP Method","HTTP Status"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/eba52764a4c3657fcab1149679dc258c/d803c/thumbnail.png","srcSet":"/static/eba52764a4c3657fcab1149679dc258c/d803c/thumbnail.png 320w,\n/static/eba52764a4c3657fcab1149679dc258c/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/eba52764a4c3657fcab1149679dc258c/fc5c5/thumbnail.webp 320w,\n/static/eba52764a4c3657fcab1149679dc258c/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/eba52764a4c3657fcab1149679dc258c/01fb2/thumbnail.png","srcSet":"/static/eba52764a4c3657fcab1149679dc258c/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/eba52764a4c3657fcab1149679dc258c/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"ef2a0def-88af-5483-99b3-c9a812e43ff7","tableOfContents":"<ul>\n<li>\n<p><a href=\"#do-we-really-need-to-follow-these-guidelines\">Do We Really Need to Follow These Guidelines?</a></p>\n<ul>\n<li><a href=\"#think-about-why-standard-interfaces-exist\">Think About Why Standard Interfaces Exist</a></li>\n<li><a href=\"#the-frontends-sad-story-that-backend-devs-dont-know-about\">The Frontend‚Äôs Sad Story That Backend Devs Don‚Äôt Know About</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#http-status-codes-reporting-the-result-of-your-work\">HTTP Status Codes: Reporting the Result of Your Work</a></p>\n<ul>\n<li><a href=\"#100-level\">100-Level</a></li>\n<li><a href=\"#200-level\">200-Level</a></li>\n<li><a href=\"#300-level\">300-Level</a></li>\n<li><a href=\"#400-level\">400-Level</a></li>\n<li><a href=\"#500-level\">500-Level</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"Modern applications are practically programs that run entirely on the network ‚Äî communication makes up a huge portion of a program‚Äôs business logic. Client applications communicate with backend servers to fetch logged-in user information, create new posts, and sometimes subscribe to server events through WebSockets to implement features like push notifications or chat.","html":"<p>Modern applications are practically programs that run entirely on the network ‚Äî communication makes up a huge portion of a program‚Äôs business logic. Client applications communicate with backend servers to fetch logged-in user information, create new posts, and sometimes subscribe to server events through WebSockets to implement features like push notifications or chat.</p>\n<!-- more -->\n<p>In this process, the frontend and backend need to define many rules ‚Äî from how they‚Äôll communicate, to how resource creation and deletion are defined, to how the success or failure of backend operations requested by the frontend should be reported.</p>\n<p>Several guidelines exist to help define these rules, and that‚Äôs where things like HTTP methods, status codes, and REST come in.</p>\n<p>In this post, I want to dive into HTTP status codes ‚Äî one of the essential elements for clearer communication between frontend and backend.</p>\n<h2 id=\"do-we-really-need-to-follow-these-guidelines\" style=\"position:relative;\">Do We Really Need to Follow These Guidelines?<a href=\"#do-we-really-need-to-follow-these-guidelines\" aria-label=\"do we really need to follow these guidelines permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Honestly, HTTP methods, status codes, and REST are just guidelines. Not following them won‚Äôt break your program or cause runtime errors for users.</p>\n<p>In other words, you can write programs just fine without them.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5ab263e405da8a4381a5fe32c5581820/41099/ebichu.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAdFHeGZyL//EABwQAAEDBQAAAAAAAAAAAAAAAAACAxIBEyIjM//aAAgBAQABBQK4ZUVMbVsc5SP/xAAXEQADAQAAAAAAAAAAAAAAAAAAARIh/9oACAEDAQE/AXjJP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQEBAQAAAAAAAAAAAAAAAAEAECL/2gAIAQEABj8ClXnCc//EABsQAAICAwEAAAAAAAAAAAAAAAABESExQVFh/9oACAEBAAE/IUje34sl0GmCI6npJS8JH//aAAwDAQACAAMAAAAQHO//xAAXEQEAAwAAAAAAAAAAAAAAAAAAETFR/9oACAEDAQE/EKGoP//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxABLb//xAAdEAEAAwACAwEAAAAAAAAAAAABABExcZEhUWGx/9oACAEBAAE/EKiWem1wSj+FUKG39MhTp3PLbaTkdjZ2W37AjTqf/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ebichu\" title=\"\" src=\"/static/5ab263e405da8a4381a5fe32c5581820/41099/ebichu.jpg\" srcset=\"/static/5ab263e405da8a4381a5fe32c5581820/0913d/ebichu.jpg 160w,\n/static/5ab263e405da8a4381a5fe32c5581820/cb69c/ebichu.jpg 320w,\n/static/5ab263e405da8a4381a5fe32c5581820/41099/ebichu.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>So it doesn't matter if we don't follow them, right?</small>\n</center>\n<p>Well, not following these rules is your choice, but considering the side effects that can result, I‚Äôd recommend following them whenever possible.</p>\n<h3 id=\"think-about-why-standard-interfaces-exist\" style=\"position:relative;\">Think About Why Standard Interfaces Exist<a href=\"#think-about-why-standard-interfaces-exist\" aria-label=\"think about why standard interfaces exist permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Industry standards are established to ensure compatibility among products made by countless different producers and to facilitate communication between them. The set of standard specifications we define to make different entities compatible is what we call an ‚Äúinterface.‚Äù</p>\n<p>The concept of an interface is quite broad ‚Äî if it connects things, it‚Äôs an interface. HDMI connecting monitors to computers, SATA used in storage devices, USB ‚Äî they‚Äôre all interfaces. UI (User Interface) even extends the concept to connecting humans with machines.</p>\n<p>Among these, the interface most familiar to developers is the API (Application Programming Interface). An API provides the functionality needed to build applications as a set of interfaces.</p>\n<p>The convenience of APIs is that users only need to know how to use them ‚Äî they can completely ignore whatever massive logic lies beneath. A classic example is the Windows OS API provided through C:</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Windows.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;tchar.h></span></span>\n\n<span class=\"token keyword\">int</span> APIENTRY <span class=\"token function\">_tWinMain</span><span class=\"token punctuation\">(</span>\n  HINSTANCE hInstance<span class=\"token punctuation\">,</span>\n  HINSTANCE hPrevInstance<span class=\"token punctuation\">,</span>\n  LPTSTR lpCmdLine<span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">int</span> nCmdShow\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">MessageBox</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, Windows!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"App\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> MB_OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Developers can display a message box simply by calling the <code class=\"language-text\">MessageBox</code> API function without knowing how the Windows OS renders it. And this interaction is communication between two entirely different programs ‚Äî a C application and the operating system.</p>\n<p>In other words, an API is an interface for communication between programs. Similarly, when a client requests something from a server, it uses an API defined by specific rules to access server resources. In most modern applications that communicate via HTTP, these APIs are defined using specific URLs called endpoints, and the server must respond to client requests through these endpoints in a consistent manner.</p>\n<p>HTTP status codes are a kind of agreement that conveys the result of the client‚Äôs request ‚Äî and they‚Äôre a crucial component of an API.</p>\n<h3 id=\"the-frontends-sad-story-that-backend-devs-dont-know-about\" style=\"position:relative;\">The Frontend‚Äôs Sad Story That Backend Devs Don‚Äôt Know About<a href=\"#the-frontends-sad-story-that-backend-devs-dont-know-about\" aria-label=\"the frontends sad story that backend devs dont know about permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In this section, I want to briefly talk about something that frontend developers working with poorly designed APIs have likely experienced at least once. Backend developers rarely look at frontend application source code, so they might not even know this situation exists.</p>\n<p>It‚Äôs the case where HTTP status codes are used incorrectly ‚Äî the classic example being a server that returns <code class=\"language-text\">200 OK</code> even when a request fails.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET /api/users/123</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n{ \"success\": false }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>APIs designed this way typically include success/failure status and failure reasons in the HTTP response body, which creates an awkward situation for the frontend application.</p>\n<p>Frontends handle these async requests through Promises, and the problem is that most HTTP communication libraries and APIs determine success or failure based on the status code from the backend, throwing errors only when requests fail.</p>\n<p>So normally, frontend communication code looks something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchUsers</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/users/123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The request failed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If a request to the server fails, the server should send a 400 or 500-level status code, which causes <code class=\"language-text\">fetch</code> to throw an error. With that, a simple <code class=\"language-text\">try/catch</code> around <code class=\"language-text\">fetch</code> is all you need to handle communication errors.</p>\n<p>But when the backend returns a 200-level code even for failed requests, the frontend ends up in this sad situation:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchUsers</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/users/123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> success <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>success<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The request failed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Notice the <code class=\"language-text\">if (!success)</code> that didn‚Äôt exist before. An unnecessary extra layer of error handling that hurts code readability, but the frontend has no choice. You can‚Äôt just ignore server errors and skip handling them.</p>\n<p>On top of that, if the backend encounters an unhandled error or the server dies entirely, the response will come back with a 500 or 502 error code anyway ‚Äî so you can‚Äôt skip <code class=\"language-text\">try/catch</code> either.</p>\n<p>Every HTTP communication library on the client side is designed assuming correct HTTP status code usage. If the server uses incorrect status codes, these sad situations arise. And honestly, returning the correct status code for each situation isn‚Äôt even that hard on the backend side. <small>(Just a bit tedious.)</small></p>\n<p>Like client libraries, most server frameworks also provide HTTP status codes for every situation, so I recommend using the appropriate codes whenever possible.</p>\n<p>Now let‚Äôs dive into what each of these HTTP status codes actually means.</p>\n<h2 id=\"http-status-codes-reporting-the-result-of-your-work\" style=\"position:relative;\">HTTP Status Codes: Reporting the Result of Your Work<a href=\"#http-status-codes-reporting-the-result-of-your-work\" aria-label=\"http status codes reporting the result of your work permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>When a client requests work from a server, the server performs the work and sends back the result as a response. It uses HTTP status codes to indicate whether the work succeeded or failed, and if it failed, why. As we saw in the bad example above, some servers include failure information in the response body, but the better approach is to use the correct HTTP status codes.</p>\n<p>HTTP status codes have standardized numbers for each situation ‚Äî ‚Äú200 = success,‚Äù ‚Äú400 = client screwed up,‚Äù ‚Äú500 = server screwed up.‚Äù Basic web program behavior and frontend/backend frameworks are all designed around these standards, so it‚Äôs best to follow them.</p>\n<p>Web browsers ‚Äî the quintessential HTTP programs ‚Äî strictly follow these status code standards. Browsers actually distinguish between success and failure of their requests based on the status code the server returns, and they display this visually.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/581d5098769863da7581ecc2a09a19ed/d7ab4/browser-response.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABO0lEQVR42o1S7XKDIBD0VRJj4kc1ioqCCJh+vP8bbe8uaaadJtP+2Dk4cbndJbHWIoSAGAOMsRj1hLZTUvthxEw9Y5d71dMsfaV6WQ+jRkdrrue2RTJNE9Z1FVhv6EeDqqqw3+8FacpI7zgcDnd87b/3k3me4ZzDYh0632JajNyWFwXqusHxeLwRp8iy7AfhIyQsOcaIQJK3sEH1vcgbtYZbA+0H1E0jYFIhv13wkNCQRPbQey9yeTr2zy4O02zg44bL2wfi9gpDPfaPz1Qv9UNS8ZAls4duuZpelpVIZZxOuSDPcxRkA9c8L5DRt6cT8nRu9XjvFSzJ7SWxTlJjibvdTvAsnF8ebtt29ZGmHMeRnoeDprDWEIWUAyrK8s9AhFApBU0BMNEwXAPoqNecW7Q0JYfCnnJY/0n5E8S6FKangsPMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"browser response\" title=\"\" src=\"/static/581d5098769863da7581ecc2a09a19ed/6af66/browser-response.png\" srcset=\"/static/581d5098769863da7581ecc2a09a19ed/69538/browser-response.png 160w,\n/static/581d5098769863da7581ecc2a09a19ed/72799/browser-response.png 320w,\n/static/581d5098769863da7581ecc2a09a19ed/6af66/browser-response.png 640w,\n/static/581d5098769863da7581ecc2a09a19ed/d9199/browser-response.png 960w,\n/static/581d5098769863da7581ecc2a09a19ed/d7ab4/browser-response.png 1014w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Browsers treat 200-level status codes very differently from 400 and 500-level ones</small>\n</center>\n<p>If a server returns status code 200 but expresses the error only in the response body, the browser thinks the request succeeded while it actually failed ‚Äî a bizarre situation.</p>\n<p>If the server returns a code like 301, the browser will automatically redirect the user to another page. So if the server doesn‚Äôt return proper status codes, the browser could exhibit unexpected behavior.</p>\n<p>Now let‚Äôs look at what each HTTP status code means. Status codes range from 100 to 500-level and can define quite a variety of states, but you don‚Äôt need to know them all. I‚Äôll cover just the ones I‚Äôve personally used at least once.</p>\n<h3 id=\"100-level\" style=\"position:relative;\">100-Level<a href=\"#100-level\" aria-label=\"100 level permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>100-level codes carry informational states like ‚Äúyou may switch protocols‚Äù or ‚Äúcontinue sending requests.‚Äù I‚Äôve never actually encountered these in application development, so I‚Äôll skip them.</p>\n<h3 id=\"200-level\" style=\"position:relative;\">200-Level<a href=\"#200-level\" aria-label=\"200 level permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>200-level codes indicate that the server successfully performed the work the client requested. Browsers display these with a clean green color in the network tab.</p>\n<p>While ‚Äúrequest succeeded‚Äù alone is often enough, if you need more detailed states, you can actively use 200-level codes to give the client more specific information.</p>\n<p><strong>200 OK</strong></p>\n<p>Status code <code class=\"language-text\">200</code> simply means the work succeeded. In most cases, the client knows exactly what it requested, so just knowing ‚Äúyour request succeeded‚Äù is sufficient ‚Äî no additional detail needed. That‚Äôs why this single code is used for all successful API responses in the vast majority of cases.</p>\n<p><strong>201 Created</strong></p>\n<p>Status code <code class=\"language-text\">201</code> means the request was processed normally and a new resource was created as a result. Creating new resources through client requests is extremely common ‚Äî the most representative case I‚Äôve experienced is user registration. A registration request creates a new user row in the database, making it a perfect fit for <code class=\"language-text\">201</code>.</p>\n<p><strong>204 No Content</strong></p>\n<p>Status code <code class=\"language-text\">204</code> means the request was processed normally and the content associated with this request no longer cleanly exists. This code can be used as a response to deletion requests. My experience with it was a post deletion API.</p>\n<p>Note that whether the deletion is a soft delete or hard delete is completely irrelevant here. However the server represents resource deletion internally, the only information the client needs is ‚Äúthis resource has been deleted and is no longer available.‚Äù</p>\n<h3 id=\"300-level\" style=\"position:relative;\">300-Level<a href=\"#300-level\" aria-label=\"300 level permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>300-level codes relate to redirection. When a requested resource has been moved or deleted and can no longer be accessed normally, the server can tell the client ‚Äúgo here to find the resource you‚Äôre looking for‚Äù ‚Äî and that‚Äôs what 300-level codes are for.</p>\n<p><strong>301 Moved Permanently</strong></p>\n<p>Status code <code class=\"language-text\">301</code> is also known as ‚Äú301 Redirect‚Äù ‚Äî the most commonly used redirection code. When a browser receives <code class=\"language-text\">301</code> in response, it checks the <code class=\"language-text\">Location</code> field in the HTTP header and automatically redirects to the URL specified there.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">301</span> <span class=\"token reason-phrase string\">Moved Permanently</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Location</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://evan/moved-contents/1234</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Search engine bots like Google‚Äôs also automatically update page information when they receive a <code class=\"language-text\">301</code> response, making correct use of this status code very important from an SEO (Search Engine Optimization) perspective.</p>\n<p>Redirection settings can typically be configured in the server engine‚Äôs configuration files or directly in the backend application. A common use case is redirecting users who connected via HTTP to the HTTPS-only port.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">listen</span>         <span class=\"token number\">80</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">server_name</span>    evan.com</span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">return</span>         <span class=\"token number\">301</span> https://<span class=\"token variable\">$host</span><span class=\"token variable\">$request_uri</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">listen</span>         <span class=\"token number\">443</span> ssl</span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">server_name</span>    evan.com</span><span class=\"token punctuation\">;</span>\n    ...\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>In this case, when Nginx detects a user connecting to port <code class=\"language-text\">80</code>, it redirects them to port <code class=\"language-text\">443</code> (which requires HTTPS), enforcing the secure protocol.</p>\n<p><strong>304 Not Modified</strong></p>\n<p>Status code <code class=\"language-text\">304</code> means the requested resource hasn‚Äôt changed at all compared to the previous request. Literally: Not Modified.</p>\n<p>When the server responds with this code, the client doesn‚Äôt need the server to retransmit the resource ‚Äî it uses its cached version instead, reducing unnecessary communication payload.</p>\n<p>Since the client uses its cached resource rather than one received from the server, this is considered a redirection to the cached resource. That‚Äôs why <code class=\"language-text\">304</code> is sometimes called an implicit redirect.</p>\n<p>Browsers have their own caching mechanisms for this response. If a <code class=\"language-text\">304</code> response is received but there‚Äôs no cached resource, a blank screen or error page appears. So if you encounter this situation, you might want to check whether the browser actually has a cached resource.</p>\n<h3 id=\"400-level\" style=\"position:relative;\">400-Level<a href=\"#400-level\" aria-label=\"400 level permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>400-level codes mean something was wrong with the client‚Äôs request. If you spot one, there‚Äôs a high probability the frontend developer didn‚Äôt handle edge cases properly or sent bad data with the request. <small><strike>(There‚Äôs a small chance it‚Äôs the backend‚Äôs fault too‚Ä¶)</strike></small></p>\n<p><strong>400 Bad Request</strong></p>\n<p>Status code <code class=\"language-text\">400</code> is one of the most common 400-level codes, and it bluntly means ‚Äúthe client sent a bad request.‚Äù What exactly went wrong is sometimes included in the response body, but when it‚Äôs not, you might need to dig into the backend application logs.</p>\n<p><strong>401 Unauthorized</strong></p>\n<p>Status code <code class=\"language-text\">401</code> tells an unauthenticated user requesting a protected resource ‚Äúyou need to authenticate.‚Äù It‚Äôs commonly used when a non-logged-in user calls an API that requires login.</p>\n<p>When the client receives <code class=\"language-text\">401</code>, it often interprets this as ‚Äúlogin required‚Äù and redirects the user to the login page.</p>\n<p><strong>403 Forbidden</strong></p>\n<p>Status code <code class=\"language-text\">403</code> means the client requested a forbidden resource. This code is sometimes confused with <code class=\"language-text\">401 Unauthorized</code> ‚Äî the meanings seem ambiguous, but there‚Äôs one clear difference.</p>\n<p><code class=\"language-text\">401</code> literally means unauthenticated ‚Äî the backend can‚Äôt identify who the current requester is. The server is saying ‚Äúidentify yourself!‚Äù</p>\n<p>With <code class=\"language-text\">403</code>, however, the backend doesn‚Äôt care at all who the requester is. Whether the client identified themselves or not, authenticated or not ‚Äî accessing this resource is unconditionally forbidden.</p>\n<p>Servers may also return <code class=\"language-text\">403</code> when a resource requiring HTTPS is accessed via HTTP.</p>\n<p><strong>404 Not Found</strong></p>\n<p>Status code <code class=\"language-text\">404</code> simply means the requested resource doesn‚Äôt exist.</p>\n<p><strong>405 Method Not Allowed</strong></p>\n<p>Status code <code class=\"language-text\">405</code> means the wrong HTTP method was used for the current resource. Many backend frameworks automatically return <code class=\"language-text\">405</code> when a controller doesn‚Äôt have logic for the requested method.</p>\n<p><strong>406 Not Acceptable</strong></p>\n<p>Status code <code class=\"language-text\">406</code> means that even after <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation#server-driven_content_negotiation\" target=\"_blank\" rel=\"nofollow\">server-driven content negotiation</a>, no suitable content type was found.</p>\n<p>When a client requests a resource, it uses the <code class=\"language-text\">Accept</code> header field to specify what content types it wants. If this field isn‚Äôt explicitly set, browsers typically fill in a few default types like <code class=\"language-text\">text/html</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-http line-numbers\"><code class=\"language-http\">GET http://evan.com/\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">text/html,application/xhtml+xml,application/xml,*/*</span></span>\n...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>The server checks the <code class=\"language-text\">Accept</code> field from left to right, looking for a content type that matches the requested resource. If found, it specifies that type in the response‚Äôs <code class=\"language-text\">Content-Type</code> header.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">HTTP/1.1 200 OK\nContent-Type: text/html</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Since the server decides which content type to return, this process is called ‚Äúserver-driven content negotiation.‚Äù In the example above, the first-priority <code class=\"language-text\">text/html</code> was returned. If <code class=\"language-text\">text/html</code> doesn‚Äôt exist, the server tries <code class=\"language-text\">application/xhtml+xml</code>, then <code class=\"language-text\">application/xml</code>, and so on.</p>\n<p>If none of the listed types are available, the wildcard <code class=\"language-text\">*/*</code> at the end catches everything, and the server responds with whatever content type it has. But if even after checking all requested types no matching resource exists, the server returns <code class=\"language-text\">406</code>: ‚Äúno resource matching your requested content types.‚Äù</p>\n<p><strong>408 Request Timeout</strong></p>\n<p>Status code <code class=\"language-text\">408</code> means the connection between client and server was established, but the request body never arrived.</p>\n<p>HTTP communication first establishes a connection, then transmits the request body data. <code class=\"language-text\">408</code> occurs when the connection was properly established but the server never receives the request body no matter how long it waits.</p>\n<p><strong>429 Too Many Requests</strong></p>\n<p>Status code <code class=\"language-text\">429</code> occurs when the client sends too many requests to the server. ‚ÄúToo many‚Äù could mean firing off requests so rapidly that the server says ‚Äúwhoa, calm down.‚Äù For paid APIs, it can also mean ‚Äúyou‚Äôve exceeded your allowed request count ‚Äî pay more.‚Äù</p>\n<p>The server can include a <code class=\"language-text\">Retry-After</code> header with the <code class=\"language-text\">429</code> response to tell the client ‚Äútry again after this amount of time.‚Äù</p>\n<h3 id=\"500-level\" style=\"position:relative;\">500-Level<a href=\"#500-level\" aria-label=\"500 level permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>500-level codes mean something went wrong on the server side. If you spot one, something is broken on the server ‚Äî time to have a word with the backend developer.</p>\n<p><strong>500 Internal Server Error</strong></p>\n<p>Status code <code class=\"language-text\">500</code> means some unknown error occurred in the backend application. It‚Äôs usually an unhandled error, which is why the error cause isn‚Äôt communicated to the client. <small><strike>(More like it can‚Äôt be communicated in most cases.)</strike></small></p>\n<p>Exposing unhandled error details to the client also poses a significant security risk, so <code class=\"language-text\">500</code> typically just signals that an error occurred. If you encounter this, I recommend checking server logs or leveraging error monitoring solutions like <a href=\"https://sentry.io/welcome/\" target=\"_blank\" rel=\"nofollow\">Sentry</a> or <a href=\"https://www.bugsnag.com/\" target=\"_blank\" rel=\"nofollow\">Bugsnag</a>.</p>\n<p><strong>502 Bad Gateway</strong></p>\n<p>The most common scenario for status code <code class=\"language-text\">502</code> is when the backend application has died. But why does it say ‚ÄúBad Gateway‚Äù instead of something more direct like ‚ÄúServer Died‚Äù?</p>\n<p>Because no matter how simple a backend architecture is, it‚Äôs never just a single application. The ‚Äúgateway‚Äù here refers to an abstract connection point between applications, and as the name implies, backend architectures are typically composed of at least two or more applications.</p>\n<p>In typical setups, client requests don‚Äôt go directly to the backend application. There‚Äôs usually a server engine like Apache or Nginx, or a load balancer, sitting in front to receive requests and forward them to the backend application.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">listen</span> <span class=\"token number\">80</span></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">server_name</span> evan.com</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_pass</span> http://127.0.0.1:3000</span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_http_version</span> 1.1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">'upgrade'</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$host</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_cache_bypass</span> <span class=\"token variable\">$http_upgrade</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>With a typical Nginx setup like this, Nginx listens on port 80, receives HTTP requests, and forwards them to the backend application running on port 3000.</p>\n<p>This architecture exists for security and processing efficiency. Backend applications aren‚Äôt bulletproof, so you can‚Äôt blindly feed them all requests. And expecting clients to always send safe requests is equally unrealistic.</p>\n<p>Plus, simple requests that just need to locate and serve files don‚Äôt need to bother the already-busy backend application ‚Äî the server engine can handle those directly.</p>\n<p>So the backend places a proxy server at the front to act as a gatekeeper. The abstract passage connecting this proxy server to the backend application is called the ‚Äúgateway.‚Äù When the backend application dies, the gatekeeper proxy receives no response and sends <code class=\"language-text\">502 Bad Gateway</code> to the client.</p>\n<p><strong>503 Service Unavailable</strong></p>\n<p>Status code <code class=\"language-text\">503</code> means the server isn‚Äôt ready to handle requests. It‚Äôs sometimes used similarly to <code class=\"language-text\">502 Bad Gateway</code>, but <code class=\"language-text\">503</code> implies a <strong>temporary</strong> situation ‚Äî typically when the server is under heavy load and doesn‚Äôt have the capacity to handle the current request.</p>\n<p>In AWS Lambda, this can occur when processing a request requires more resources than the concurrent container execution limit, or when a task‚Äôs processing time exceeds the container‚Äôs maximum lifespan setting.</p>\n<p>Since <code class=\"language-text\">503</code> indicates a temporary situation, it can also use the <code class=\"language-text\">Retry-After</code> response header ‚Äî same as <code class=\"language-text\">429 Too Many Requests</code> ‚Äî to tell the client ‚Äútry again after this amount of time.‚Äù</p>\n<p><strong>504 Gateway Timeout</strong></p>\n<p>Status code <code class=\"language-text\">504</code>, like <code class=\"language-text\">408</code>, indicates a request timeout. However, <code class=\"language-text\">504</code> isn‚Äôt caused by the client‚Äôs request timing out ‚Äî it occurs within the backend architecture, between servers communicating with each other.</p>\n<p>As I mentioned, backend architecture isn‚Äôt just a single application. Even after a client‚Äôs request reaches the server, internal communication between backend applications continues. If Nginx (acting as a proxy) forwards a client request to the backend application but receives no response within a set time, Nginx returns <code class=\"language-text\">504 Gateway Timeout</code> to the client.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I originally planned to cover RESTful APIs alongside HTTP status codes in this post, but once again I failed spectacularly at controlling the length and had to split it into separate posts. <small>(This is happening more and more frequently‚Ä¶)</small></p>\n<p>As I mentioned, not following standards like status codes won‚Äôt cause program errors, so they‚Äôre easy to brush off. But defining clearer interfaces makes program behavior more predictable and greatly helps communication between frontend and backend developers ‚Äî so I recommend following the standards whenever possible.</p>\n<p>That wraps up this post on HTTP status codes ‚Äî the server‚Äôs way of talking back.</p>","fields":{"slug":"20200315-about-http-status-code-en","path":"/2020/03/15/about-http-status-code/en/","lang":"en"},"frontmatter":{"title":"HTTP Status Codes: The Server's Way of Talking Back","subTitle":"The small numbers that keep the internet in order","date":"Mar 15, 2020","categories":["Programming","Network","Architecture"],"tags":["HTTP","HTTP Status Code","RESTful","Axios","HTTP Status"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/14576b0c5dc2ed40f94b7160f16c1e06/d803c/thumbnail.png","srcSet":"/static/14576b0c5dc2ed40f94b7160f16c1e06/d803c/thumbnail.png 320w,\n/static/14576b0c5dc2ed40f94b7160f16c1e06/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/14576b0c5dc2ed40f94b7160f16c1e06/fc5c5/thumbnail.webp 320w,\n/static/14576b0c5dc2ed40f94b7160f16c1e06/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/14576b0c5dc2ed40f94b7160f16c1e06/01fb2/thumbnail.png","srcSet":"/static/14576b0c5dc2ed40f94b7160f16c1e06/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/14576b0c5dc2ed40f94b7160f16c1e06/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"c26858ed-950e-58c6-9ad0-5ad1483f25fc","tableOfContents":"<ul>\n<li>\n<p><a href=\"#i-was-a-good-developer\">I ‚ÄúWas‚Äù a Good Developer</a></p>\n<ul>\n<li><a href=\"#the-days-of-walking-tall\">The Days of Walking Tall</a></li>\n<li><a href=\"#i-actually-knew-nothing\">I Actually Knew Nothing</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#am-i-a-frontend-developer\">Am I a Frontend Developer?</a></p>\n</li>\n<li>\n<p><a href=\"#be-socrates-not-a-sophist\">Be Socrates, Not a Sophist</a></p>\n<ul>\n<li><a href=\"#the-sophists-were-pretty-smart-people\">The Sophists Were Pretty Smart People</a></li>\n<li><a href=\"#i-know-that-i-know-nothing\">I Know That I Know Nothing</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about something a bit more philosophical than the usual development topics. It‚Äôs actually a question I‚Äôve been carrying since I first started coding. I still haven‚Äôt found the answer, so rather than presenting conclusions, I want to throw out the question and see where it goes.","html":"<p>In this post, I want to talk about something a bit more philosophical than the usual development topics. It‚Äôs actually a question I‚Äôve been carrying since I first started coding. I still haven‚Äôt found the answer, so rather than presenting conclusions, I want to throw out the question and see where it goes.</p>\n<!-- more -->\n<p>The question I‚Äôve been mulling over for six years since I started programming is: ‚ÄúWhat does it mean to know something?‚Äù</p>\n<p>This question grew out of how other developers perceived me. After about five years of working as a frontend developer across various organizations, I‚Äôd received all sorts of feedback from colleagues. Some generous souls would say things like ‚ÄúEvan is really good at frontend,‚Äù and I could never bring myself to confidently reply ‚ÄúWhy yes, I am.‚Äù</p>\n<p>The reason is simply that I don‚Äôt think I‚Äôm good at frontend development. And I don‚Äôt trust the subjective assessments others assign to me. What I‚Äôve always wanted ‚Äî and still want ‚Äî is to be a ‚Äúgood developer‚Äù with objective, universally acknowledged value.</p>\n<p>People‚Äôs standards differ, of course, but I think ‚Äúbeing good‚Äù by objective standards means having mastered a body of knowledge. And if you ask whether I‚Äôve mastered frontend development, the answer is obviously ‚Äúno.‚Äù There‚Äôs still so much I don‚Äôt know, and I spend every day fumbling through new problems and praying to the Google gods.</p>\n<p>So for six years, I‚Äôve been wrestling with: ‚ÄúWhat is true knowledge?‚Äù</p>\n<h2 id=\"i-was-a-good-developer\" style=\"position:relative;\">I ‚ÄúWas‚Äù a Good Developer<a href=\"#i-was-a-good-developer\" aria-label=\"i was a good developer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I didn‚Äôt always have this existential crisis. Looking back, it‚Äôs quite laughable and arrogant, but when I first started coding, I genuinely thought I was talented and learned remarkably fast.</p>\n<p>In 2015, I was working as a sound engineer at an entertainment agency. That‚Äôs when a colleague and I started talking about building a product together.</p>\n<p>But neither of us knew anything about web development, so we rallied every connection we had to find people who could build it with us. That‚Äôs how <a href=\"https://lubycon.io/\" target=\"_blank\" rel=\"nofollow\">Lubycon</a> was born ‚Äî the side project team I‚Äôve been part of for six years now.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ee37ae05a70f8b4384b084ed48aecc2d/1be7e/lubycon.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEcUlEQVR42mWTe1DUVRTHf//3T/lXkzqZj1JLBRFNlIVQcQlUZLCUh8tLQBBEQhFcx4zxkU5MCiOLEIIrBAQLLA8VYQGhXXQxVoWWhzJiIqCIqSyP5fHpt5gzpWfm3nPvnHPP/c69nyP0tt/mVslFDJdzaS69xN0r+RhrSujrvkftdS2VlVVoNHVcq6qiSFVAdVUlOco8Av12ExEew57d3xERFkOQLBRdgw7hkVjQUJFNW2MlHdpyyjJ+pqkwjTZ9PV/brWLt55+xzmYZjksXs2LOR/hulvLDkePYWklwsndjncQNh7UuLP9iNWqVGkFbVoAyPgSd8gw3L/7EqSh/kmJ30VSeT7SnO0FOawlxdiJ0gwO+q6054u/N8YTTfLlyPdL1HmySbsN5nTtrbL+iQn0Zobv1Nqfj93E41Jf93u44rrdnsa0VqqzzxAf4E+LizF5RlTxAhpejBPnOb8lWZrM/+gDyuCPsCghj/4E4fHxkaKprEB78oUV1+hDycBkh3luJ3bEJHxcHrqlyifLYjL+oKlyyAuvlG1iwcDWRHm7cbKijvCgf9W/5HI6To8xMJykpEYPhFoKxsZ7ck/FEijcf9PPkRLgvoS4S6vOziPfyZLeTHcESW9ylW1lj78pB721o6zQU5eVwuUQlFlZRmJtDqiKZlpY7CKZXL+nubKPTaKS3u4unPQ95eK8T08sXtBoMGPRNdLUZaW+5i/HubR4/6OLZwACdHe087e/jxfNBng8O8ORJHyaTCWHMbOaVaYQx8zivbWp6npiYwGweY2pqiv/bFCOjYwyNmpl8KzQ5OYnQ199Pg06H7qaewtIKLmRmUaQuo7evnwKNnozSGlJSk6gvVPKwo41njzoYeHSfv5predyqpaelnp471zHWqnje+wDhmghtZMReoqL2Md96JTNmz+WD2fNIy1QSGnOUjQFRSOxsUEQH01hZSscNNe366+gLU8VGyKC5RIEuN5GCk5H8qatCqBBV7fEPQebjy5ylS5i3bBnvzfyYpMRT6PetpDjAimPBO9BkZdBYV0tXUxmacjUpCbGkHYsn/ftIlKfiOBTsS0PVVQRVoZqwoHD8/AN4f+48Pvx0ATM+mU9OuoKawAUk+zqQelROZoKcG9X13NL+TnFhPgf3hnEsPoYEkYoTsRH4ee2gTlONUFxUTtDOUKLC9+Dh6sSsRQtZYrOKoktKEgM38qOPIxePRpMsj6ZWqaDxSgkZv1xg+3YvZLJA/LZK8XC2x9nNk6uVYkFlVi5SB1e+2eKJs91yZsycySzxHYvzChgYHOR+ZwdP+3oYevk3o6ah6d88p0jH3kmKdMs2bKytWLp4EVZ2rhQUVyAYmu9wLvk8v2bnkZicQpIilRRFGsZW4zQWFqQmxMWkiM8bhBpv6Dl3PoNLeSrOnD1LWnoGF3KKaOu4jzA+Ps7Q8Ajm8fF3mLKwaBmW9Zu9xZtFZodMw4yL+3c4tARHRkYZGxsTE82ifz0m3kr+r1lEmIaHsTTF9Jl/veXMP7193gGiHspBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lubycon\" title=\"\" src=\"/static/ee37ae05a70f8b4384b084ed48aecc2d/6af66/lubycon.png\" srcset=\"/static/ee37ae05a70f8b4384b084ed48aecc2d/69538/lubycon.png 160w,\n/static/ee37ae05a70f8b4384b084ed48aecc2d/72799/lubycon.png 320w,\n/static/ee37ae05a70f8b4384b084ed48aecc2d/6af66/lubycon.png 640w,\n/static/ee37ae05a70f8b4384b084ed48aecc2d/d9199/lubycon.png 960w,\n/static/ee37ae05a70f8b4384b084ed48aecc2d/1be7e/lubycon.png 1059w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>My role on the team was frontend developer. That‚Äôs when I first started self-teaching programming while building the product. I later quit my job, went back to college, and filled in the gaps in my CS knowledge through coursework. It was a period of rapid growth.</p>\n<h3 id=\"the-days-of-walking-tall\" style=\"position:relative;\">The Days of Walking Tall<a href=\"#the-days-of-walking-tall\" aria-label=\"the days of walking tall permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In 2015, Angular was just starting to gain traction but wasn‚Äôt yet as mainstream as React or Vue are today. Naturally, I started with jQuery.</p>\n<p>jQuery gets treated as a relic these days, but at the time it was considered quite innovative ‚Äî a library that let you select and manipulate DOM elements using CSS selector syntax. I got comfortable with it faster than expected. <del>(<code class=\"language-text\">document.getElementById('foo')</code> becoming <code class=\"language-text\">$('#foo')</code> felt like magic‚Ä¶)</del></p>\n<p>The Lubycon service needed a viewer that could upload and rotate 3D model files like <code class=\"language-text\">obj</code> and <code class=\"language-text\">fbx</code> on the web, plus a simple model editor for materials and skybox backgrounds. That‚Äôs how I first encountered WebGL.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1eb2d41fc3f735e4f126903fa21b7785/b5c84/3dmodel.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABw3m2zERP/8QAFxABAQEBAAAAAAAAAAAAAAAAAQAQMv/aAAgBAQABBQKeljf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAQIDH/2gAIAQEABj8CFT//xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhEEFR/9oACAEBAAE/IUhNCZ1GujDeP//aAAwDAQACAAMAAAAQix//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAASEAEUH/2gAIAQEAAT8QJCdZuK656LNxFodFNzCX3NLlu//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3dmodel\" title=\"\" src=\"/static/1eb2d41fc3f735e4f126903fa21b7785/c08c5/3dmodel.jpg\" srcset=\"/static/1eb2d41fc3f735e4f126903fa21b7785/0913d/3dmodel.jpg 160w,\n/static/1eb2d41fc3f735e4f126903fa21b7785/cb69c/3dmodel.jpg 320w,\n/static/1eb2d41fc3f735e4f126903fa21b7785/c08c5/3dmodel.jpg 640w,\n/static/1eb2d41fc3f735e4f126903fa21b7785/6a068/3dmodel.jpg 960w,\n/static/1eb2d41fc3f735e4f126903fa21b7785/eea4a/3dmodel.jpg 1280w,\n/static/1eb2d41fc3f735e4f126903fa21b7785/b5c84/3dmodel.jpg 1704w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The good old days of building an OBJ parser...</small>\n</center>\n<p>WebGL isn‚Äôt something most service developers ever touch, and using it fluently requires a basic understanding of computer graphics and linear algebra ‚Äî so the learning curve is steep. Whenever I told other developers ‚ÄúI‚Äôm building this thing with WebGL,‚Äù most would react with ‚ÄúWhoa, isn‚Äôt that insanely hard?‚Äù</p>\n<p>Hearing that reaction often enough, my shoulders naturally puffed up. I gradually developed the cocky thought that ‚ÄúI‚Äôm a good developer.‚Äù But one day, that naive self-image got absolutely demolished ‚Äî and that was the beginning of the existential questioning that continues to this day.</p>\n<h3 id=\"i-actually-knew-nothing\" style=\"position:relative;\">I Actually Knew Nothing<a href=\"#i-actually-knew-nothing\" aria-label=\"i actually knew nothing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>One day, a friend invited me to a meetup called <a href=\"http://codeforseoul.org/\" target=\"_blank\" rel=\"nofollow\">Code For Seoul</a>. When I showed up, there were hardly any junior developers like me ‚Äî mostly seasoned seniors with serious experience. <del>(The vibe was genuinely warm and welcoming though.)</del></p>\n<p>As we sat around eating snacks and chatting about tech, someone asked me the usual question:</p>\n<blockquote>\n<p>I heard you do side projects ‚Äî what are you building?</p>\n</blockquote>\n<p>I gave my standard answer: ‚ÄúI‚Äôm using WebGL to build a simple web editor and viewer.‚Äù But the reaction was nothing like what I was used to.</p>\n<p>Instead of the typical ‚ÄúWhoa, that‚Äôs hard!‚Äù, these veterans started drilling me with questions about WebGL‚Äôs performance characteristics, memory leaks during canvas rendering, and how I was handling them. I hadn‚Äôt even known these issues existed, so all I could do was stand there looking lost.</p>\n<p>What made it even more jarring was that the person asking these questions wasn‚Äôt even a developer ‚Äî he was a DA (Data Analyst). That‚Äôs when I realized something important.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e7fc19a4b21ff345a9c314ebdeaa5899/a2d2e/yureka.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAesjYqLEh//EABwQAAEDBQAAAAAAAAAAAAAAAAEAAiEDERIxQf/aAAgBAQABBQLYpwg2OA3OQX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAMQEgMlH/2gAIAQEABj8C4yWZp//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyGxQOQvxOv6F9swWGULE+wRo13YAcM//9oADAMBAAIAAwAAABAL7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAwEBAAAAAAAAAAAAAAERIQAxQVFx/9oACAEBAAE/EF5EBozOjlzSYiNbCvay8WQWAI+z3AzI3XbucqHVPE6wDPWp1aZ//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"yureka\" title=\"\" src=\"/static/e7fc19a4b21ff345a9c314ebdeaa5899/a2d2e/yureka.jpg\" srcset=\"/static/e7fc19a4b21ff345a9c314ebdeaa5899/0913d/yureka.jpg 160w,\n/static/e7fc19a4b21ff345a9c314ebdeaa5899/cb69c/yureka.jpg 320w,\n/static/e7fc19a4b21ff345a9c314ebdeaa5899/a2d2e/yureka.jpg 508w\" sizes=\"(max-width: 508px) 100vw, 508px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The world is vast and full of experts... I wasn't even a frog in a well ‚Äî I was a tadpole.</small>\n</center>\n<p>It makes sense, of course. The gap between a college student and someone with 10+ years of industry experience is enormous. I was ‚Äúpretty good for a student‚Äù inside the walls of school, but in the real-world jungle, I was just a tadpole.</p>\n<p>The guy who asked the questions laughed it off with ‚ÄúWell, you can‚Äôt know everything‚Äù ‚Äî but I was so embarrassed I wanted to crawl into a hole. Or dig one and crawl into it.</p>\n<p>I‚Äôd been strutting around just because I was using WebGL, a technology with a steep learning curve. But the truth was, I could merely <em>use</em> the WebGL API ‚Äî I didn‚Äôt actually <em>understand</em> the technology.</p>\n<p>Six years have passed since that day, and I still can‚Äôt bring myself to claim I‚Äôm good at anything. When someone says ‚ÄúEvan, you‚Äôre good!‚Äù, I reflexively reply ‚ÄúBeing able to do something and being good at it are different things.‚Äù It‚Äôs practically a reflex at this point.</p>\n<p>That‚Äôs when I first asked myself:</p>\n<blockquote>\n<p>How much do I need to know before I can say I‚Äôm good at something?</p>\n</blockquote>\n<h2 id=\"am-i-a-frontend-developer\" style=\"position:relative;\">Am I a Frontend Developer?<a href=\"#am-i-a-frontend-developer\" aria-label=\"am i a frontend developer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I don‚Äôt think I‚Äôm the only one who‚Äôs had the experience of realizing that something they thought they knew well was actually something they didn‚Äôt understand at all.</p>\n<p>The question started as ‚Äúhow much do I need to know?‚Äù but after cycling through it repeatedly, it eventually evolved into ‚Äúwhat does it even mean to know something?‚Äù</p>\n<p>Before we dive deep into the nature of knowledge together, let me offer a quick example for those who haven‚Äôt had this experience ‚Äî to illustrate just how fuzzy the concept of ‚Äúknowing‚Äù really is. Here‚Äôs the question I want to pose:</p>\n<blockquote>\n<p>Are frontend developers and markup engineers the same position?</p>\n</blockquote>\n<p>For context: in the Korean tech industry, ‚Äúpublisher‚Äù (ÌçºÎ∏îÎ¶¨ÏÖî) is a common title for specialists who primarily handle HTML/CSS markup. This distinction between ‚Äúfrontend developer‚Äù and ‚Äúmarkup engineer‚Äù exists in many tech ecosystems under different names ‚Äî ‚ÄúHTML/CSS developer,‚Äù ‚ÄúUI developer,‚Äù ‚Äúweb designer who codes,‚Äù etc.</p>\n<p>If you work in this industry, you probably have opinions about these roles and how they differ. Let me push the question further:</p>\n<blockquote>\n<p>Can you distinguish between these two positions?\nIf so, what criteria do you use?</p>\n</blockquote>\n<p>What I‚Äôm really asking is: what‚Äôs the clear, definitive line between the two?</p>\n<p>Both positions build web clients. Yet people draw fairly rigid distinctions between them. So presumably, they know how to tell them apart.</p>\n<p>Generally, a frontend developer is someone who writes client programs that run in web browsers ‚Äî defining DOM structures with HTML, exchanging data with backend systems using JavaScript, building standalone client applications, and sometimes crafting elegant UI/UX with CSS.</p>\n<p>But laid out like that, it sounds a lot like what a markup engineer does too. In fact, when you look at actual day-to-day work, they‚Äôre often identical.</p>\n<p>Some say markup engineers aren‚Äôt frontend developers because they don‚Äôt know React or Vue. But then what about the people who used to build complex web clients with jQuery? Were they markup engineers? Yet the industry clearly recognized the title ‚Äúfrontend developer‚Äù at that time ‚Äî I was called one myself.</p>\n<p>Others say markup engineers lack the JavaScript or computer science knowledge that frontend developers have. Okay, then let me ask this:</p>\n<blockquote>\n<p>How much JavaScript does a markup engineer need to know to be called a frontend developer?\nDoes simply acquiring CS knowledge instantly make someone a frontend developer?</p>\n</blockquote>\n<p>This is where answers diverge. Some might say you need to understand closures. Others might say closures don‚Äôt matter, but you should be able to resolve CORS policy violations on your own.</p>\n<p>Let‚Äôs say knowing closures fluently makes you a frontend developer. But is a rough understanding of the concept enough? Or do you need to know how function scopes and closures are created within the JavaScript engine? It‚Äôs ambiguous.</p>\n<p>What criteria were <em>you</em> using to separate these two positions? Were you actually clear on those criteria? Or was the distinction meaningless from the start?</p>\n<h2 id=\"be-socrates-not-a-sophist\" style=\"position:relative;\">Be Socrates, Not a Sophist<a href=\"#be-socrates-not-a-sophist\" aria-label=\"be socrates not a sophist permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If you couldn‚Äôt properly answer those questions, then you don‚Äôt truly know the difference between the two roles. Or perhaps the difference never really existed at all.</p>\n<p>Through this example, I wanted to show that things we think we understand well may turn out to be not so well understood when we look closely.</p>\n<p>We perceive positions like frontend developer, markup engineer, and full-stack developer as clearly delineated categories. But when we try to define the exact criteria, we either can‚Äôt answer or everyone gives a different answer ‚Äî as if no clear standard exists.</p>\n<p>Our lives and the programming we love are littered with problems like this. We just never examine them because we assume we already ‚Äúknow.‚Äù</p>\n<p>Socrates was one of the people who thought deeply about this. He was famous for going around to the Sophists ‚Äî the reputed intellectuals of his time ‚Äî and asking them questions to find out what true knowledge and wisdom really meant.</p>\n<h3 id=\"the-sophists-were-pretty-smart-people\" style=\"position:relative;\">The Sophists Were Pretty Smart People<a href=\"#the-sophists-were-pretty-smart-people\" aria-label=\"the sophists were pretty smart people permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In Socrates‚Äô Athens, society essentially ran on rhetorical skill. The Agora at the city‚Äôs center was always buzzing with debate, and you could build political power by winning citizens‚Äô support through public speaking.</p>\n<p>Citizens frequently sued each other too, and since there was no concept of professional lawyers representing you, you had to argue your own case in court. Simply lacking knowledge or eloquence could cause real, tangible harm.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5b1fc54843874ac5bbdee79127715260/36dd4/sophist.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABxszs1MQin//EABsQAAEEAwAAAAAAAAAAAAAAAAECAxEyABMz/9oACAEBAAEFAkuxmxEkmXrp4m3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECcRAREkH/2gAIAQEABj8CXcUtnlYVExn/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFhgf/aAAgBAQABPyEDjGMWeWDxsuk4dNmg6pnxhFEtqN5O5//aAAwDAQACAAMAAAAQP9//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/ENI//8QAGhABAQADAQEAAAAAAAAAAAAAAREAIWExUf/aAAgBAQABPxB/8UGDub+OJlmFNNBvk3rFF16Ak5gEwQteXE1QIFKmsIIg6z//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sophist\" title=\"\" src=\"/static/5b1fc54843874ac5bbdee79127715260/36dd4/sophist.jpg\" srcset=\"/static/5b1fc54843874ac5bbdee79127715260/0913d/sophist.jpg 160w,\n/static/5b1fc54843874ac5bbdee79127715260/cb69c/sophist.jpg 320w,\n/static/5b1fc54843874ac5bbdee79127715260/36dd4/sophist.jpg 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Ancient Athens: the era when you literally talked your way through life</small>\n</center>\n<p>So Athenian citizens naturally valued the knowledge and eloquence needed for debate. Enter the Sophists ‚Äî Athens‚Äô premium private tutors.</p>\n<p>Sophists charged fees to teach rhetoric, argumentation, and oratory. Since you need extensive knowledge to teach others, most Sophists were renowned orators and philosophers of their day.</p>\n<p>Socrates was actually eloquent enough to work as a Sophist himself, but he believed he wasn‚Äôt teaching people ‚Äî merely drawing out knowledge they already possessed through questioning. So he taught for free, which naturally made him unpopular with the other Sophists.</p>\n<p>Then one day, Socrates received an oracle from the Temple of Delphi that would spark his lifelong quest into the nature of knowledge.</p>\n<h3 id=\"i-know-that-i-know-nothing\" style=\"position:relative;\">I Know That I Know Nothing<a href=\"#i-know-that-i-know-nothing\" aria-label=\"i know that i know nothing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The oracle declared that Socrates was the wisest person in Athens. In an era still governed by mythological thinking, oracles carried the weight of law. But Socrates refused to believe it and resolved to find someone wiser than himself.</p>\n<p>From then on, Socrates went around questioning the Sophists ‚Äî the highly-paid intellectual elite ‚Äî to gauge how wise they truly were. If we map Socrates‚Äô line of questioning onto our earlier topic, it would go something like this:</p>\n<blockquote>\n<p><strong>Q</strong>: What is a frontend developer?\n<strong>A</strong>: Someone who has the knowledge needed to build web clients and can actually implement them.</p>\n<p><strong>Q</strong>: Then isn‚Äôt a markup engineer also a frontend developer?\n<strong>A</strong>: No.</p>\n<p><strong>Q</strong>: What‚Äôs the difference between the two?\n<strong>A</strong>: I‚Äôd say markup engineers have less computer science knowledge than frontend developers.</p>\n<p><strong>Q</strong>: So if a markup engineer studies computer science, do they become a frontend developer?\n<strong>A</strong>: I think they‚Äôd also need to get hired as a frontend developer to truly be called one.</p>\n<p><strong>Q</strong>: So the position assigned by a company matters?\n<strong>A</strong>: ‚Ä¶I suppose so.</p>\n<p><strong>Q</strong>: Then if a frontend developer at a prestigious tech company takes a markup engineer position at a web agency, are they a frontend developer or a markup engineer?\n<strong>A</strong>: ‚Ä¶ (contradiction)</p>\n</blockquote>\n<p>This was Socrates‚Äô method. He‚Äôd ask fundamental questions, and when someone answered, he‚Äôd probe the inconsistencies in their response with follow-up questions. After a few rounds, the Sophists would hit a wall ‚Äî realizing that what they ‚Äúknew‚Äù was actually flawed. They‚Äôd become flustered or angry.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/433945b00cf1edc742e9ea4a65d6c16d/29d31/ship.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAVbLNOINyP/EABgQAAIDAAAAAAAAAAAAAAAAAAABAhAR/9oACAEBAAEFAqxikyL2v//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAEQIDH/2gAIAQEABj8CjAv/xAAaEAACAwEBAAAAAAAAAAAAAAAAARFBgSEx/9oACAEBAAE/Iep00T5EGmCllwITP//aAAwDAQACAAMAAAAQB/8A/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxCcW//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EEf/xAAbEAEBAQADAQEAAAAAAAAAAAABEQAhMVFBYf/aAAgBAQABPxBKIjoNwqF9LvIf1kkKD4lwq1d2bgqb/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ship\" title=\"\" src=\"/static/433945b00cf1edc742e9ea4a65d6c16d/c08c5/ship.jpg\" srcset=\"/static/433945b00cf1edc742e9ea4a65d6c16d/0913d/ship.jpg 160w,\n/static/433945b00cf1edc742e9ea4a65d6c16d/cb69c/ship.jpg 320w,\n/static/433945b00cf1edc742e9ea4a65d6c16d/c08c5/ship.jpg 640w,\n/static/433945b00cf1edc742e9ea4a65d6c16d/29d31/ship.jpg 700w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>This state of being shipwrecked on contradictions and impasses is called \"aporia\"</small>\n</center>\n<p>After visiting Sophist after Sophist and finding that none could fully withstand his questioning, Socrates concluded: ‚ÄúThese people don‚Äôt truly know anything.‚Äù</p>\n<p>What about you? If Socrates questioned you about programming, or about the criteria separating frontend developers from markup engineers, could you answer all the way to the end?</p>\n<p>If you could, then at least on that topic, you‚Äôve bested Socrates. But if Socrates came at me with questions like those, I‚Äôd probably answer earnestly for a while before inevitably falling into aporia myself.</p>\n<p>And this method of questioning wasn‚Äôt just for the Sophists ‚Äî Socrates applied it to himself too. After repeating this process over and over, he arrived at a single realization:</p>\n<blockquote>\n<p>The only thing I know is that I know nothing.</p>\n</blockquote>\n<p>This was a statement directed at himself as much as at the Sophists. Neither you nor I truly know anything ‚Äî but at least I know that I don‚Äôt know.</p>\n<p>And Socrates‚Äô conclusion isn‚Äôt wrong, either. You have to acknowledge your ignorance before you can pursue deeper truth. Someone who thinks ‚ÄúI already know this‚Äù won‚Äôt dig any deeper into the subject.</p>\n<p>Naturally, the Sophists didn‚Äôt take kindly to Socrates‚Äô attitude. He was eventually charged with ‚Äúcorrupting the youth and undermining Athenian traditions.‚Äù</p>\n<p>He could have survived the trial by playing politics and talking his way out, but Socrates refused to bend his convictions. He gave a provocative defense that antagonized the jury, effectively sealing his own fate with a death sentence. <del>(He could have applied for exile to another city-state, but he chose to drink the poison instead ‚Äî a true hard case‚Ä¶)</del></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/be86a1241af4ff8684b6f216b7dbfde3/b4294/socrates.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAZGKwOUWI//EABkQAAMBAQEAAAAAAAAAAAAAAAECEQASMf/aAAgBAQABBQIJM6hVLinzmJN//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQETEhQYH/2gAIAQEABj8CjYk9MFlt/8QAGhAAAwEBAQEAAAAAAAAAAAAAAREhAGEQgf/aAAgBAQABPyEQO63CDwAkmE9qX9xKjTx//9oADAMBAAIAAwAAABDXP//EABcRAQADAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8Qxcv/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/ELlj/8QAHxABAAIBAwUAAAAAAAAAAAAAAQARITFBUWGBkaHw/9oACAEBAAE/EKlPMYo0F7mkrFTTMXXTmVEqbGP5JgfOfMYWupabbHuIFCqHef/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"socrates\" title=\"\" src=\"/static/be86a1241af4ff8684b6f216b7dbfde3/b4294/socrates.jpg\" srcset=\"/static/be86a1241af4ff8684b6f216b7dbfde3/0913d/socrates.jpg 160w,\n/static/be86a1241af4ff8684b6f216b7dbfde3/cb69c/socrates.jpg 320w,\n/static/be86a1241af4ff8684b6f216b7dbfde3/b4294/socrates.jpg 600w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>In the end, this man chose the hemlock</small>\n</center>\n<p>Even someone as brilliant as Socrates, after all that deliberation, arrived at ‚ÄúI know nothing.‚Äù It‚Äôs an almost absurdly anticlimactic conclusion.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>After this long exploration, my question has merely shifted from ‚ÄúWhat is knowledge?‚Äù to ‚ÄúDo we truly know the things we think we know?‚Äù ‚Äî without actually finding an answer.</p>\n<p>I suppose it makes sense that I can‚Äôt easily answer a question that even Socrates ‚Äî counted among the great sages of history ‚Äî could only resolve with such an empty-sounding conclusion. But since becoming an ‚Äúobjectively good developer‚Äù is my ultimate goal, I need to find my own answer to this question. So the pondering will continue.</p>\n<p>This post was never meant to provide answers. Even before writing it, I‚Äôd spent six years turning this over in my mind, and all that happened was that questions bred more questions, diving ever deeper, without catching even a thread of an answer.</p>\n<p>I know that when you‚Äôre busy working and studying, philosophical musings like these are easily forgotten. I know there are more urgent things to worry about at work tomorrow. <del>(I‚Äôve got a mountain of work piled up too‚Ä¶)</del></p>\n<p>But sometimes, stepping back from direct programming concerns and looking at things from a distance can be more helpful than you‚Äôd expect. That‚Äôs why I wanted to share my struggle ‚Äî in the hope that you might give it some thought too.</p>\n<p>That‚Äôs all for this post on whether I can really say I know frontend.</p>","fields":{"slug":"20200302-what-is-knowing-en","path":"/2020/03/02/what-is-knowing/en/","lang":"en"},"frontmatter":{"title":"Can I Really Say I Know Frontend?","subTitle":"On the boundary between knowing and not knowing ‚Äî epistemology for developers","date":"Mar 02, 2020","categories":["Essay"],"tags":["Socrates","Professional","Developer Growth","Developer","How to Study","Effective Developer"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/01651ff1530f3840f5386254eb51c6b2/3a812/thumbnail.jpg","srcSet":"/static/01651ff1530f3840f5386254eb51c6b2/3a812/thumbnail.jpg 320w,\n/static/01651ff1530f3840f5386254eb51c6b2/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/01651ff1530f3840f5386254eb51c6b2/fc5c5/thumbnail.webp 320w,\n/static/01651ff1530f3840f5386254eb51c6b2/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/01651ff1530f3840f5386254eb51c6b2/2d839/thumbnail.jpg","srcSet":"/static/01651ff1530f3840f5386254eb51c6b2/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/01651ff1530f3840f5386254eb51c6b2/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"5c999aca-a7a3-54e1-b1b2-88ba17619652","tableOfContents":"<ul>\n<li><a href=\"#lets-look-at-reality-first\">Let‚Äôs Look at Reality First</a></li>\n<li><a href=\"#you-have-to-find-information-yourself\">You Have to Find Information Yourself</a></li>\n<li><a href=\"#all-keywords-are-connected\">All Keywords Are Connected</a></li>\n<li><a href=\"#ask-yourself-questions\">Ask Yourself Questions</a></li>\n<li><a href=\"#wrapping-up\">Wrapping Up</a></li>\n</ul>","excerpt":"Think back to when you first learned programming. Most people learned from someone ‚Äî in a school, a bootcamp, or a course ‚Äî because the path of self-teaching is too long and treacherous for a complete beginner.","html":"<p>Think back to when you first learned programming. Most people learned from someone ‚Äî in a school, a bootcamp, or a course ‚Äî because the path of self-teaching is too long and treacherous for a complete beginner.</p>\n<!-- more -->\n<p>But once the beginner phase is over and you‚Äôve landed a job as a developer, things change. There‚Äôs no teacher anymore. You‚Äôre on your own to grow your skills. People suddenly thrust into this environment feel the same overwhelming helplessness they felt when they first started programming.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2d1a523b4e32c3e33278e462cc5c4f8b/01e7c/unnamed.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 73.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIElEQVR42jXT6U5iQRQE4Pv+4Sl4A1kiILiAIKOCirKpgA6bKCgCMaIxzgc30z9I9+k6daqqL8H9/f35+Xmz2RyPx3d3d1dXV9fX15eXlzc3N61Wq1qthhWA4XD4d7sGgwFkp9MJ8vk80Pv7+2Kx+Pj4KJfLuVyu3+///Px8f39j3Nvbi8fj+g8PDw8ODjKZzOnpabvddgyMxaTfeb1eo3Tnl6Lb29vlcmm4HrcYHx4eHN3W6/Wzs7MAVLVWqxmo2uv1/mxXNps9Pj52BDo5OXl9fQVTLxQKKhSh20w2QVulUrEhAevLyws0I4xxC/37+wuTSCTsWZvP51QErkM0KO7ZbCYYRqTw9vY2Go3ol59mRwIFKTPpuAq63a6qgfga9frn56cjCXC4V6sV5dLSjA51SDcYDDdpu0NzcXHB/NHRkQtQT8AbCpkTQirxyWSyWCzu7+/biFoloOHr60sV2jPgEo9NKpUKrTIPHYvF0um0ohnYjYUM5Pb09LS7u+s9POl0OhUjCYJ1HTbjlUuj0dAm18lkwhFdAQ/cuvYwmpXY9muCCMOcvK1RpVKpvF0enzvhB+bITFuoHL1K+J4ajNUsEYEXt8swk4naNLMRiUSi0Wh2u9DrpMI3s7OzowLqWxBE+JFQjuvx8XHjmT15gPoApKJBWib4nlXUdXrI5+dnaGCxKcqc+Y1sqdr5Rcket/bV/8ueQwlRzotcVcL/xj8TLusAncvxbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unnamed\" title=\"\" src=\"/static/2d1a523b4e32c3e33278e462cc5c4f8b/01e7c/unnamed.png\" srcset=\"/static/2d1a523b4e32c3e33278e462cc5c4f8b/69538/unnamed.png 160w,\n/static/2d1a523b4e32c3e33278e462cc5c4f8b/72799/unnamed.png 320w,\n/static/2d1a523b4e32c3e33278e462cc5c4f8b/01e7c/unnamed.png 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>You can grab a coworker and ask questions, but that only lasts so long. Keep asking similar-level questions and all you‚Äôll get back is RTFM (Read The Fucking Manual) or a cold suggestion to just Google it. But when you try Googling, you don‚Äôt even know what keywords to search for.</p>\n<p>Every developer has been through this, I think. A mountain of things to learn, but no idea where to start or how to study. Nobody is kindly laying out a curriculum for you. In the end, you have to find, filter, and digest information on your own.</p>\n<h2 id=\"lets-look-at-reality-first\" style=\"position:relative;\">Let‚Äôs Look at Reality First<a href=\"#lets-look-at-reality-first\" aria-label=\"lets look at reality first permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Before diving into the main topic, let‚Äôs pin down what this ‚Äúoverwhelming feeling‚Äù actually is. It‚Äôs not hard to conjure up. I‚Äôm a frontend developer, so let‚Äôs imagine a situation where I need to build a simple web frontend application.</p>\n<p>First, you need to pick a library or framework that connects your view and model to render the UI. The big names are React, Vue, and Angular. Most people go with React since it has the largest ecosystem, but honestly, you can build whatever you need with any of them.</p>\n<p>Modern web applications demand complex client-side state management, so you‚Äôll also need to choose a state management library. The popular ones are Redux and MobX ‚Äî pick your flavor. If you chose Vue as your UI framework, just use Vuex for the sake of your mental health.</p>\n<p>If you need to manage complex object state, immutability helpers like ImmutableJS or Immer would be nice to have.</p>\n<p>If you‚Äôre using Redux, you‚Äôll also need to pick an async middleware ‚Äî redux-thunk, redux-saga, and the like. Or how about RxJS, which has been gaining traction lately? It even comes as a Redux middleware via redux-observable.</p>\n<p>For package management, choose between npm or yarn. For unit testing, Mocha or Jest. For your eslint config, pick <code class=\"language-text\">airbnb</code> or <code class=\"language-text\">standard</code> and customize to taste.</p>\n<p>Oh, and come to think of it, using TypeScript instead of plain JavaScript might not be a bad idea ‚Äî since we‚Äôre building this, might as well make it robust. In that case, we need to check whether all those libraries above support TypeScript.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/07726d5ba582507933d65f0734e10118/36dd4/what.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 93.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIBAP/aAAwDAQACEAMQAAAB41k1itTDYuxzAHf/xAAZEAEBAQEBAQAAAAAAAAAAAAABAAIDEiH/2gAIAQEAAQUCx2TljasoRsvcR9MLf//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/ASH/xAAWEQEBAQAAAAAAAAAAAAAAAAAQEUH/2gAIAQIBAT8Bhp//xAAeEAABAwQDAAAAAAAAAAAAAAAAAREhAhAxcUFRgf/aAAgBAQAGPwKZqdhlby3c5HtsoXkXZ//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExUUFh/9oACAEBAAE/IYlOh0gmpRTSptkwtnpcR7U19O/apmuwkobH/9oADAMBAAIAAwAAABCjx77/xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEDAQE/EBJdHgWb/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQETH/2gAIAQIBAT8QXuUw9n//xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAxIVFB/9oACAEBAAE/EG9N5PmPRlBVJ80OBkgAcAnNGBbC8B5h2FVGYkASlJ32YAKgi/Q8PMRCK/d//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"what\" title=\"\" src=\"/static/07726d5ba582507933d65f0734e10118/36dd4/what.jpg\" srcset=\"/static/07726d5ba582507933d65f0734e10118/0913d/what.jpg 160w,\n/static/07726d5ba582507933d65f0734e10118/cb69c/what.jpg 320w,\n/static/07726d5ba582507933d65f0734e10118/36dd4/what.jpg 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>I thought we were building a \"simple\" application...?</small>\n</center>\n<p>All those tools I just rattled off aren‚Äôt me showing off ‚Äî they‚Äôre things frontend developers actually deliberate over every time they start a project at work or on the side. None of them are strictly required, but once you learn them, they boost productivity so much that most frontend developers use some combination of them.</p>\n<p>And to actually use these tools properly, you also need knowledge of JavaScript internals like closures and the event loop, virtual DOM, data binding, MVVM patterns, Flux patterns, functional programming, and more.</p>\n<p>There‚Äôs been an explosion of new things in frontend lately, but developers in other specializations face a similarly large body of knowledge. It‚Äôs just specialized differently for each discipline.</p>\n<p>The point of this long preamble is really just one thing:</p>\n<blockquote>\n<p>‚ÄúNobody can kindly teach you all of this.‚Äù</p>\n</blockquote>\n<h2 id=\"you-have-to-find-information-yourself\" style=\"position:relative;\">You Have to Find Information Yourself<a href=\"#you-have-to-find-information-yourself\" aria-label=\"you have to find information yourself permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Does anyone exist who could teach you all of that? Personally, I don‚Äôt think so.</p>\n<p>If programming were like mathematics ‚Äî where a formula created 100 years ago is still used 100 years later ‚Äî then maybe someone could build a systematic curriculum covering everything. But many of the tools I mentioned might not even exist next year. The lifespan of this knowledge is extremely short.</p>\n<p>And it‚Äôs hard to say which of these overlapping tools is ‚Äúbetter‚Äù or ‚Äúworse.‚Äù Go ask a nearby frontend developer ‚ÄúIs React better or Vue?‚Äù What do you think they‚Äôll say? Probably that both are good, both are bad, or they‚Äôll just pick their favorite.</p>\n<p>For these reasons, programming is a field where building a specific curriculum is quite difficult. Sure, you can create a curriculum for absolute beginners, but beyond that, curricula become somewhat pointless.</p>\n<p>Imagine spending three months at a bootcamp diligently learning Vue, only to join a company that uses React. You can‚Äôt exactly ask the company for time off to go learn React for another three months.</p>\n<p>In the end, developers have no choice but to get comfortable finding and learning information on their own, tailored to their organization‚Äôs needs and the technologies they want to explore. That‚Äôs why ‚Äújust Google it‚Äù is the answer to so many developer questions.</p>\n<p>But actively learning by finding information on Google and Stack Overflow requires the ability to choose effective search keywords and the discernment to distinguish good information from bad ‚Äî which makes it harder than it sounds. <del>(You also need decent English.)</del> And nobody can teach you this; you have to practice and figure it out yourself.</p>\n<p>But since I can‚Äôt just tell someone to ‚Äúgo Google things‚Äù when they don‚Äôt even know what to search for or what to study, let me share a very simple method I use frequently.</p>\n<h2 id=\"all-keywords-are-connected\" style=\"position:relative;\">All Keywords Are Connected<a href=\"#all-keywords-are-connected\" aria-label=\"all keywords are connected permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>When we study, we typically ‚Äúmemorize.‚Äù Memorization-based learning allows us to quickly absorb narrow pieces of information, making it a pretty good fit for developers who are constantly chasing new trends.</p>\n<p>You know ‚Äî memorizing the four characteristics of pure functions, or the features and trade-offs of TCP vs. UDP. Or when a new library or framework comes out, skimming the docs and coding along is also a form of memorization.</p>\n<p>But while memorization is fast, it has a downside: keyword acquisition is fragmented. By ‚Äúfragmented,‚Äù I mean that learning one keyword doesn‚Äôt naturally lead you to the next. If you‚Äôve studied this way, you‚Äôve probably had this thought at some point:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 346px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f2667821ea5c0c33f872f94097e3a106/fad94/budda.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGgABAAIDAQAAAAAAAAAAAAAAAAMEAQIGBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAY/Wxuc86IV5Qsg//8QAHhAAAgEDBQAAAAAAAAAAAAAAAgMBAAQREiEjMjP/2gAIAQEAAQUCulZeKtIXCcNZxgqZolAcv9p2oOv/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAdEAACAgIDAQAAAAAAAAAAAAAAAQIhAxEiQXGB/9oACAEBAAY/AscDiVWxzdz6Ll8NtGLxm0I//8QAHRABAAMAAQUAAAAAAAAAAAAAAQARIRAxQWGh8P/aAAgBAQABPyEge4vu5W2KDoEvHIXUobvyhruEbUi+2mT5HiKpgvC//9oADAMBAAIAAwAAABCQzwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAfEAEBAAIBBAMAAAAAAAAAAAABEQAhMUFhcYGRodH/2gAIAQEAAT8Qs7Ei7io+3CGPQ1JggAaXFb+Yxwl68aPaS+MAgDckLlic2b518uVCsGPcYkRUWDNcl65qVWHLy98//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"budda\" title=\"\" src=\"/static/f2667821ea5c0c33f872f94097e3a106/fad94/budda.jpg\" srcset=\"/static/f2667821ea5c0c33f872f94097e3a106/0913d/budda.jpg 160w,\n/static/f2667821ea5c0c33f872f94097e3a106/cb69c/budda.jpg 320w,\n/static/f2667821ea5c0c33f872f94097e3a106/fad94/budda.jpg 346w\" sizes=\"(max-width: 346px) 100vw, 346px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Okay... I've got this part down... but what do I study next...?</small>\n  <br>\n</center>\n<p>You know intellectually that what you‚Äôve learned is nowhere near enough, but you don‚Äôt know what to study next. And studying something completely unrelated feels like you‚Äôre just poking around randomly. This happens because the knowledge acquired through simple memorization isn‚Äôt ‚Äúconnected.‚Äù</p>\n<p>Knowledge is essentially a keyword mind map, where every keyword is linked to other closely related keywords. Active learning is really a continuous process of exploration ‚Äî finding and following these connections.</p>\n<center>\n  <div style=\"max-width: 350px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/89eab9032853d672368fae37d027cdf0/fb1d2/mindmap.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 123.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfeS2KsVNbjEHZH/xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhECD/2gAIAQEAAQUCfGw0pjYF1Dn/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8ByI//xAAcEAABAwUAAAAAAAAAAAAAAAAQAAEgMTJBYaH/2gAIAQEABj8COVQPsXch/8QAHRAAAgEFAQEAAAAAAAAAAAAAAREAECExUWGhQf/aAAgBAQABPyEkMOA79oShdi9QptbLhoMb9A+J2exVicowp//aAAwDAQACAAMAAAAQowGA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEREEH/2gAIAQIBAT8QvcUIg//EAB8QAQACAQQDAQAAAAAAAAAAAAERIQAQQVFhcZGxwf/aAAgBAQABPxBHSTgwgVQTu0h6iM0TvG1GxRScEVGTbCwbwVE65OVGHwY4xhBHo0/X7p//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mindmap\" title=\"\" src=\"/static/89eab9032853d672368fae37d027cdf0/c08c5/mindmap.jpg\" srcset=\"/static/89eab9032853d672368fae37d027cdf0/0913d/mindmap.jpg 160w,\n/static/89eab9032853d672368fae37d027cdf0/cb69c/mindmap.jpg 320w,\n/static/89eab9032853d672368fae37d027cdf0/c08c5/mindmap.jpg 640w,\n/static/89eab9032853d672368fae37d027cdf0/6a068/mindmap.jpg 960w,\n/static/89eab9032853d672368fae37d027cdf0/fb1d2/mindmap.jpg 1213w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>Memorization-based learning means manually discovering and studying each keyword on the map one by one. But finding all those keywords on your own is hard. So we need a method that naturally leads us from one keyword to the next while studying.</p>\n<p>And when you repeatedly learn one keyword and discover the next, the fragmented pieces of information you‚Äôd stored through memorization naturally form connections between each other ‚Äî making them stick longer. Two birds with one stone.</p>\n<p>So how do you find connected keywords?</p>\n<h2 id=\"ask-yourself-questions\" style=\"position:relative;\">Ask Yourself Questions<a href=\"#ask-yourself-questions\" aria-label=\"ask yourself questions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>One reason we fail to discover related keywords while studying a topic is that we simply accept pre-organized knowledge through memorization. If you just memorize ‚ÄúA is B,‚Äù you miss the opportunity to find other keywords hiding within that statement.</p>\n<p>The method I‚Äôm proposing is ‚Äúquestioning.‚Äù But not questioning others ‚Äî questioning yourself. <del>(Save asking others as a last resort.)</del></p>\n<p>Ask yourself things like ‚ÄúWhy does this work this way?‚Äù and ‚ÄúHow is this possible?‚Äù while studying. Find out what you don‚Äôt know about the keyword you‚Äôre studying, one piece at a time. Once you know what you don‚Äôt know, you can Google for the answer. Repeat this a few times and you‚Äôll discover a new keyword that holds the answer to your question.</p>\n<p>Let me use React‚Äôs <code class=\"language-text\">useState</code> hook as an example. React‚Äôs <code class=\"language-text\">useState</code> is a hook used to store and remember state in functional components.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Foo</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Knowing that <code class=\"language-text\">useState</code> lets you manage state in functional components is perfectly sufficient for writing code and building applications. If you‚Äôre learning under time pressure, you can stop here and start coding. But if knowing that <code class=\"language-text\">useState</code> exists isn‚Äôt enough to satisfy you, this is where you should throw out a new question.</p>\n<p>When I first encountered React‚Äôs functional components and learned about this hook, I had this very basic curiosity:</p>\n<blockquote>\n<p>How does the <code class=\"language-text\">useState</code> hook store state?</p>\n</blockquote>\n<p>This isn‚Äôt some profound question. It‚Äôs just taking one small step of curiosity beyond the simple memorization of ‚Äù<code class=\"language-text\">useState</code> lets you store state in functional components.‚Äù</p>\n<p>Someone with deep JavaScript knowledge might have had a more advanced question right away, but at the time, I had zero intuition about how the hook worked internally.</p>\n<p>Anyway ‚Äî you‚Äôve asked yourself a question, so now you need to find the answer. There‚Äôs no teacher beside you, so let‚Äôs just search this question on Google as-is.</p>\n<p>My search query: ‚Äúhow does useState work.‚Äù Search keywords aren‚Äôt a paid resource ‚Äî just type whatever comes to mind. There‚Äôs no special skill required for Googling.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9fdff19c7231a0991eca5fffd513c04b/3d405/googled.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 105.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC/ElEQVR42o2VC3ebMAyF+///3ro1zQsIEAwYmzcJBO6unCwn3dKunGNkHCOsq0/KC3jVTYO2bdEPPZqb/f+1YFl4X5b7kOtFbJ5baBm6dEOes8zCmPr2LOsVyrLF+TxjHK/Onl0v4jkMK3j7CoegxmaT0Rps1gUirm/WOdbvGfZ7Dd8z2O803lc5P1jT+QnDcELX95yfrw7llqgEYRS5sXpf0+kWu/0Oh8MBnudxPURd15Sm5qkNyqqEtRYNpZIhc5HsfsKmaVFwo+jXth3DK7ipdF+d5xmXywXfvdwJ267l0QcevXNzcXKX/jOx/vr9nhS5rd4KvP0yCPwK+21JPRtqV2O3bVBVo3v2vQbJsUOa9NS8dVmWD/+J4CHLC7JcI81y6MJAJSk8P+BLMfzgAJ/zY6KcTlobFNyTptyrtZPJcF2lKbque8xyiSi212x7FjtmMvDFuWFGFbFpkaoTSnu+hfeFhvKbpP90Gqhjj4F2nKan2j1z9Ai1czjPC4LAIop4woOlXsYxqaiVSgYy2SFLBxzjAU09EpuzW5+m+XOwlRK+ejotGHJC/nJn1+sQq1XA9Zxgk9VQ0R5przpmWUY5cofYNTHuhDP1i5gA30HseXsHdXyMWWqGQFdkkwC3tUuC1jmqumRyCserWEmKgH/HRrSTl/qhcywOtOfx/FD48/fBFg1j6hfHhrXLzKrK6Rj4GklCJBISEBaUZIA1I8Mb0TYXFFqqaHmuYcBmkGUNQWZjOGi8/ogJe8SaFr00thvFj+SEPeWHCuonezWd17BlSfjrj2Db0rphDE9iBd6coCtagVe79Wkab2O6jZFt7OxK9iSd5tFh65rCtbGKljJcbbOuRWzpLhWtaC3MUtUvwKZD3ysde9uNZVgWP1/Z+1jXgV+yUgrX/1Ry1VYqKQobat6h7yeXsH9qWSnqogyLX/OFmNoFjrngkBChkGsRwy7pJKezzHGZJIVbk5rOOaQvfghZwpLwhCtpojKX0OVZGuuzMpO5cPz4n/Ib0P1LGlcWr4YAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"googled\" title=\"\" src=\"/static/9fdff19c7231a0991eca5fffd513c04b/6af66/googled.png\" srcset=\"/static/9fdff19c7231a0991eca5fffd513c04b/69538/googled.png 160w,\n/static/9fdff19c7231a0991eca5fffd513c04b/72799/googled.png 320w,\n/static/9fdff19c7231a0991eca5fffd513c04b/6af66/googled.png 640w,\n/static/9fdff19c7231a0991eca5fffd513c04b/d9199/googled.png 960w,\n/static/9fdff19c7231a0991eca5fffd513c04b/21b4d/googled.png 1280w,\n/static/9fdff19c7231a0991eca5fffd513c04b/3d405/googled.png 1348w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The Google gods know all things</small>\n</center>\n<p>Searching this keyword, I can already see detailed posts where others have explained React hooks. If searching in your native language doesn‚Äôt yield results, try an English query like ‚Äúprinciple of useState‚Äù ‚Äî you‚Äôll almost always find what you need. The gap in available information between searching in English versus other languages is enormous, so it‚Äôs worth building the habit of searching in English.</p>\n<p>React‚Äôs <code class=\"language-text\">useState</code> hook actually uses JavaScript closures to store state within a function. With a bit of searching, you‚Äôll discover the keyword ‚Äúclosure.‚Äù</p>\n<p>Once you‚Äôve found this new keyword, if you already know what closures are, you might try implementing <code class=\"language-text\">useState</code> from scratch as a learning exercise. If not, search for ‚ÄúJavaScript closures‚Äù and study up. While studying closures, you‚Äôll probably find another question to ask, which will lead you to yet another keyword deeper down.</p>\n<p>Some readers might think, ‚ÄúI can barely keep up with learning and using things as-is ‚Äî when am I supposed to understand the underlying principles?‚Äù But there‚Äôs an important distinction between ‚Äúthe ability to understand a keyword‚Äù and ‚Äúthe ability to find a keyword.‚Äù</p>\n<p>The ability to understand a keyword quickly can‚Äôt be developed in a short time with a few tips. It requires a baseline level of domain knowledge.</p>\n<p>But ‚Äúthe ability to find keywords‚Äù is different. It doesn‚Äôt require any particular level of knowledge ‚Äî just fingers that can type a search query into Google. And if you discover a new keyword that feels too difficult to understand right now, you don‚Äôt have to learn it immediately.</p>\n<p>The smallest value of acquiring a keyword is knowing that ‚Äúsomething like this exists in the world.‚Äù If you know the keyword exists, you can come back to it later when your knowledge has deepened. Then you study it, ask more questions, discover the next keyword, and repeat. <del>(If you work as a developer, the day will come when you need to learn that keyword.)</del></p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I‚Äôll admit the title ‚ÄúQuestion Driven Thinking‚Äù sounds grandiose, but as I mentioned, learning through questions isn‚Äôt something I invented ‚Äî it‚Äôs a well-known learning method.</p>\n<p>This approach of gradually finding answers through questions has been used since ancient Greece. The process of asking yourself questions to discover what you don‚Äôt know and then seeking answers is something Socrates himself practiced extensively.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/01651ff1530f3840f5386254eb51c6b2/89513/socrates.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAAEAAH/2gAMAwEAAhADEAAAAX1X8uyCwo//xAAaEAACAgMAAAAAAAAAAAAAAAAAAQMRBBAi/9oACAEBAAEFAp1ZJS0zJ4lP/8QAFREBAQAAAAAAAAAAAAAAAAAAAhD/2gAIAQMBAT8BRn//xAAWEQEBAQAAAAAAAAAAAAAAAAACEBH/2gAIAQIBAT8BKyf/xAAaEAACAgMAAAAAAAAAAAAAAAACEAARARIh/9oACAEBAAY/AsVBHlvZf//EABoQAAIDAQEAAAAAAAAAAAAAAAERABAhMWH/2gAIAQEAAT8hKIw6kEZ9rLPVC4gWsr//2gAMAwEAAgADAAAAEDcP/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARQf/aAAgBAwEBPxAG3WP/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFB/9oACAECAQE/EGwsRT//xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhMWGBof/aAAgBAQABPxAOq1fmnhFh2tMr8JPeAeFE6QBJcHG//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"socrates\" title=\"\" src=\"/static/01651ff1530f3840f5386254eb51c6b2/c08c5/socrates.jpg\" srcset=\"/static/01651ff1530f3840f5386254eb51c6b2/0913d/socrates.jpg 160w,\n/static/01651ff1530f3840f5386254eb51c6b2/cb69c/socrates.jpg 320w,\n/static/01651ff1530f3840f5386254eb51c6b2/c08c5/socrates.jpg 640w,\n/static/01651ff1530f3840f5386254eb51c6b2/6a068/socrates.jpg 960w,\n/static/01651ff1530f3840f5386254eb51c6b2/eea4a/socrates.jpg 1280w,\n/static/01651ff1530f3840f5386254eb51c6b2/89513/socrates.jpg 4288w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The man who left us the wise words: knowing that you know nothing is the wisest thing of all</small>\n</center>\n<p>The truth is, after roughly ten years of schooling where we memorized math formulas, vocabulary words, and exam question patterns, we‚Äôre much more accustomed to rote memorization. In school, asking questions usually just got you labeled as the weird kid who makes class run long. <del>(Along with the bonus title of ‚Äúattention-seeker.‚Äú)</del></p>\n<p>But simply asking ‚Äúwhy?‚Äù can transform flat knowledge like ‚ÄúA is B‚Äù into deeper knowledge like ‚ÄúA is B because of ~.‚Äù We need to get comfortable with questioning. Ask questions, discover what you don‚Äôt know, find answers, respond to your own questions, and keep generating new keywords along the way.</p>\n<p>And when you ask yourself questions, thoughts keep building on each other and deepening ‚Äî which makes this a great method not just for studying but for organizing your thinking too. I‚Äôd encourage you to give it a try.</p>\n<p>That‚Äôs all for this post on Question Driven Thinking.</p>","fields":{"slug":"20200211-question-driven-thinking-en","path":"/2020/02/11/question-driven-thinking/en/","lang":"en"},"frontmatter":{"title":"Question Driven Thinking ‚Äî Learning by Asking Yourself Questions","subTitle":"A learning method more powerful than Googling: the habit of questioning","date":"Feb 11, 2020","categories":["Essay"],"tags":["Question Driven Thinking","Question","How to Ask","Developer","How to Study","Developer Growth","RTFM"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/21e0825bda72bb61f13b72c1ffbcadd0/3a812/thumbnail.jpg","srcSet":"/static/21e0825bda72bb61f13b72c1ffbcadd0/3a812/thumbnail.jpg 320w,\n/static/21e0825bda72bb61f13b72c1ffbcadd0/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/21e0825bda72bb61f13b72c1ffbcadd0/fc5c5/thumbnail.webp 320w,\n/static/21e0825bda72bb61f13b72c1ffbcadd0/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/21e0825bda72bb61f13b72c1ffbcadd0/2d839/thumbnail.jpg","srcSet":"/static/21e0825bda72bb61f13b72c1ffbcadd0/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/21e0825bda72bb61f13b72c1ffbcadd0/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"595df78d-0005-5204-ba0c-50755781c626","tableOfContents":"<ul>\n<li>\n<p><a href=\"#everything-is-built-from-function-composition\">Everything Is Built from Function Composition</a></p>\n<ul>\n<li><a href=\"#domains-and-ranges-must-match-for-composition\">Domains and Ranges Must Match for Composition</a></li>\n<li><a href=\"#side-effects-exist-even-in-pure-functions\">Side Effects Exist Even in Pure Functions</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#how-should-we-manage-side-effects\">How Should We Manage Side Effects?</a></p>\n</li>\n<li>\n<p><a href=\"#what-is-a-functor\">What Is a Functor?</a></p>\n<ul>\n<li><a href=\"#categories\">Categories</a></li>\n<li><a href=\"#functors\">Functors</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#lets-build-a-functor\">Let‚Äôs Build a Functor!</a></p>\n<ul>\n<li><a href=\"#just\">Just</a></li>\n<li><a href=\"#nothing\">Nothing</a></li>\n<li><a href=\"#maybe\">Maybe</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing Thoughts</a></p>\n</li>\n</ul>","excerpt":"Writing code in functional programming means expressing the various tasks a program needs to perform as functions, then skillfully composing those functions to build a large program. Function composition is the very foundation of this paradigm, which makes it enormously important. The problem is th‚Ä¶","html":"<p>Writing code in functional programming means expressing the various tasks a program needs to perform as functions, then skillfully composing those functions to build a large program.</p>\n<p>Function composition is the very foundation of this paradigm, which makes it enormously important. The problem is that all sorts of practical issues pop up during the process of composing functions.</p>\n<p>The biggest reason these issues arise is simple. No matter how much we use pure functions, they can never be perfectly identical to mathematical functions. Programming and mathematics are similar but fundamentally different disciplines.</p>\n<p>So brilliant minds around the world started bringing in mathematical concepts like functors and monads to solve these problems. The catch? These concepts are far too abstract and arcane to understand intuitively.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ef8b4abd3bbf9916883c3115a00bab71/eb645/functor-example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR42n1SPUsDQRB9+TAfl9xdssnlvBhP0YgWIRZBSRfwi4C2dqksLAQLK8vr7AIWgljY5BfYCoKtf8JSwcbOOs5cZuMi0YHH7u2+nXlvboCfmDOQwP+RFF56Fp8vHYJrrK4QZwWfl4RrIhnf0k6dAcUpPRon0bvhb0VI/UqW3gEWIiCjD4LTNwudS1eKAGVS8wXUnwCfH3jHz83i+btH+zzB1olkdUZA7RVoP9KK/r1XGrxsBtHYEm4+tvABzF8jF7Iie+92DScPtvSlQlgkbIiCKqv7BMJ1EgErDDLM70VcMAdxquUr6Z2lK1F4ExPxXQBxQVgGJ5y0xBd1GZ0wttWZNDtVOFxp1a+2Kmpb6WbD+IucPEdSljiRvVuvlAftVmN4oBC6ZRET28pOm3x3VHUuugqFQm3GT2EVVV2gMewqf7RfU/2mI3ni8A27WalS+mNs2O6qPLZkVDQ/Zc5hQshFUfHXYCcMfl5akjUZ31tXJv6WZZGyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"functor example\" title=\"\" src=\"/static/ef8b4abd3bbf9916883c3115a00bab71/6af66/functor-example.png\" srcset=\"/static/ef8b4abd3bbf9916883c3115a00bab71/69538/functor-example.png 160w,\n/static/ef8b4abd3bbf9916883c3115a00bab71/72799/functor-example.png 320w,\n/static/ef8b4abd3bbf9916883c3115a00bab71/6af66/functor-example.png 640w,\n/static/ef8b4abd3bbf9916883c3115a00bab71/d9199/functor-example.png 960w,\n/static/ef8b4abd3bbf9916883c3115a00bab71/21b4d/functor-example.png 1280w,\n/static/ef8b4abd3bbf9916883c3115a00bab71/eb645/functor-example.png 2500w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A functor explanation diagram that makes you want to cry just looking at it...</small>\n</center>\n<p>When I was studying functors and monads, the resources I found through Google fell into roughly two categories: ‚Äúterrifyingly difficult mathematical explanations‚Äù and ‚Äúcode examples.‚Äù</p>\n<p>The problem was that there were very few resources bridging the gap between the two. In other words, I couldn‚Äôt find many resources that clearly explained exactly which programming problems functors and monads were introduced to solve. <em>(Or maybe everyone else understood and I was just too dense to get it.)</em></p>\n<p>But I didn‚Äôt want to use functors and monads without properly understanding why, so I decided to investigate and figure it out myself.</p>\n<p>In this post, I want to talk about what problems arise when you carelessly combine functions in functional programming, and how those problems can be solved.</p>\n<h2 id=\"everything-is-built-from-function-composition\" style=\"position:relative;\">Everything Is Built from Function Composition<a href=\"#everything-is-built-from-function-composition\" aria-label=\"everything is built from function composition permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Let me say it again: functional programming is a paradigm where you express a program‚Äôs tasks as functions, then compose those functions to build a large program.</p>\n<p>The most important keyword in this definition is ‚Äúfunction composition.‚Äù The reason functional programming is so vigilant about side effects is ultimately because you need to be able to predict a function‚Äôs inputs and outputs in order to compose functions safely.</p>\n<p>In the world of functional programming, every action inside a program is expressed as a function ‚Äî even assigning a value to a variable or performing simple arithmetic.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// Imperative programming</span>\n<span class=\"token keyword\">const</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\nfoo <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Functional programming</span>\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">add2</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This program simply declares a <code class=\"language-text\">number</code> variable and adds 2 to it.</p>\n<p>In the imperative version, variable assignment could be expressed as simply as <code class=\"language-text\">foo = 1</code>, and the operation as <code class=\"language-text\">foo + 2</code>. In the functional version, the assignment becomes a function that returns <code class=\"language-text\">1</code>, and the operation becomes <code class=\"language-text\">add2(foo)</code>.</p>\n<p>The part we should focus on is the very last line: <code class=\"language-text\">add2(foo)</code>.</p>\n<p><code class=\"language-text\">add2(foo)</code> means using the output of the anonymous function assigned to <code class=\"language-text\">foo</code> ‚Äî the value <code class=\"language-text\">1</code> ‚Äî as the input to <code class=\"language-text\">add2</code>. This act is function composition.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// A more simplified version looks like this</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add2</span> <span class=\"token operator\">=</span> x <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">add2</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>In a world where even simple operations like assigning values and adding numbers must be expressed as functions, building a robust large-scale program hinges on how well you can compose various complex functions.</p>\n<p>This might seem like a simple concept, but you can‚Äôt just compose any functions willy-nilly. There‚Äôs one critically important rule for function composition: the <strong>domain and range of the functions being composed must match</strong>.</p>\n<h3 id=\"domains-and-ranges-must-match-for-composition\" style=\"position:relative;\">Domains and Ranges Must Match for Composition<a href=\"#domains-and-ranges-must-match-for-composition\" aria-label=\"domains and ranges must match for composition permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As I discussed in <a href=\"/2019/12/29/about-pure-functions/\">Pure Functions ‚Äì A Programming Paradigm Rooted in Mathematics</a>, functional programming uses pure functions to minimize side effects.</p>\n<p>The two key characteristics of pure functions are:</p>\n<blockquote>\n<ol>\n<li>Don‚Äôt modify or reference state outside the function!</li>\n<li>Given the same input, always return the same output!</li>\n</ol>\n</blockquote>\n<p>Using pure functions makes it easier for developers to predict function behavior, which helps with debugging. But more fundamentally, if these rules aren‚Äôt followed, functions can‚Äôt be composed at all ‚Äî making it impossible to build programs by expressing everything as functions and combining them.</p>\n<p>Why do these rules need to be followed for composition to work? Since pure functions are a programming implementation of mathematical functions, let‚Äôs first look at how mathematical functions behave.</p>\n<p>Mathematical functions have a domain ‚Äî the set of possible input values ‚Äî and a range ‚Äî the set of possible output values.</p>\n<p>Each element in the domain must map to exactly one element in the range. In other words, the same input must always produce the same output. If this rule breaks, it‚Äôs no longer a function ‚Äî it becomes something else entirely.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/33c48b0d809a227af542dee05cf064b5/80cfc/functions.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42m2T207DMAyG3axt0tM6YBsgJC6QuNlASLvhqXggXoEX4zGK034GD7D0K4kPvx07ERE5Kk6KR0Uhi7SKF8U9OtNfK14Vz4pRfuQBXZMPSdFDYrLi3DqyLAHfTlE6fUIXBYdKscaQCTbok2VFGnQt/gUkl6ydsedsA4YctFdcucwmPdVnny22C8UNLcj+38xrKsv7HYSBcwAtyRtg5NFVPx8yagIqSBIBRmh9DfjYviE22jUi1fkK91wp/ENYYr8jZuTKAz5nldhgrJcFfQtuv6LCLf2ztbIBtrBvMNRk3PnJIR1Bg3tmeb1F19jkLLBw78omXDvC2pEm9zZtML38aeyb4mO+VvKNdhKx1QfFtPS0dEOiqnG+8kne9Qt9zk0Xmc5+yW95UsLDtHxZdV18vwAdIhBsPqNo7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"functions\" title=\"\" src=\"/static/33c48b0d809a227af542dee05cf064b5/6af66/functions.png\" srcset=\"/static/33c48b0d809a227af542dee05cf064b5/69538/functions.png 160w,\n/static/33c48b0d809a227af542dee05cf064b5/72799/functions.png 320w,\n/static/33c48b0d809a227af542dee05cf064b5/6af66/functions.png 640w,\n/static/33c48b0d809a227af542dee05cf064b5/d9199/functions.png 960w,\n/static/33c48b0d809a227af542dee05cf064b5/21b4d/functions.png 1280w,\n/static/33c48b0d809a227af542dee05cf064b5/80cfc/functions.png 1844w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>Simply put: pick one value from the designated set of possible inputs and throw it into the function, and exactly one value from the designated set of possible outputs will come out.</p>\n<p>If that‚Äôs true of mathematical functions, then pure functions ‚Äî their programming counterparts ‚Äî must also have something equivalent to a domain and range. What would those be in the programming world?</p>\n<center>\n.<br />\n.<br />\n.<br />\n<br />\n</center>\n<blockquote>\n<p>They‚Äôre <strong>types</strong>.</p>\n</blockquote>\n<p>If you think about it, types in programming are really a kind of set. The <code class=\"language-text\">number</code> set contains elements like <code class=\"language-text\">{-1, 0, 0.1, 1, 2, NaN, Infinity...}</code>, the <code class=\"language-text\">boolean</code> set contains <code class=\"language-text\">{true, false}</code>, and the <code class=\"language-text\">string</code> set contains every string that can be created programmatically.</p>\n<p>Looking at the <code class=\"language-text\">add2</code> function from earlier, we can see it takes a <code class=\"language-text\">number</code> type value and returns a <code class=\"language-text\">number</code> type value.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> add2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>We can say that <code class=\"language-text\">add2</code> has <code class=\"language-text\">number</code> as both its domain and range. We can define the domain and range of other function types using the same rules.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">f</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Domain: number, Range: string</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">g</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Domain: Array&lt;string>, Range: boolean</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">h</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Domain: string, Range: boolean</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>The commonalities between mathematical functions and programming pure functions are starting to become clearer.</p>\n<p>Now let‚Äôs get to the main topic: function composition. In mathematics, composing functions is extremely common ‚Äî there‚Äôs even a dedicated symbol for it.</p>\n<p>The composite function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span> of functions <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span> can be expressed with this simple formula:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>h</mi><mo>=</mo><mi>g</mi><mo>‚àò</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">h = g\\circ f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àò</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span></div>\n<p>If the sudden math gives you a headache, just think of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> as ‚Äúeating a meal,‚Äù <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span> as ‚Äúclearing the dishes,‚Äù and the composite function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span> as ‚Äúeating a meal and clearing the dishes.‚Äù Functions are inherently that abstract.</p>\n<p>In this formula, functions execute from right to left. Using the composite function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span></span> as <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">h(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></span> is actually identical to composing functions as <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo stretchy=\"false\">(</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">g(f(x))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">))</span></span></span></span></span>.</p>\n<p>But if we keep nesting functions to represent composition, any formula with many composed functions would be nothing but parentheses. That‚Äôs why we use the circle operator to lay out the composed functions in a readable way. <em>(Think of the difference between callbacks and async/await.)</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Without a composition operator, it would look something like this...</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token function\">g</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>When composing functions, there‚Äôs an important principle: the range of the first function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> must match the domain of the next function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span>.</p>\n<p>Since we said that a pure function‚Äôs domain and range are types, we can also say that the first function‚Äôs output type must match the next function‚Äôs input type.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// Composition is possible!</span>\n<span class=\"token function-variable function\">f</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n<span class=\"token function-variable function\">g</span><span class=\"token operator\">:</span>           <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n\n<span class=\"token comment\">// This can't be composed...</span>\n<span class=\"token function-variable function\">f</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n<span class=\"token function-variable function\">g</span><span class=\"token operator\">:</span>           <span class=\"token builtin\">number</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The domain-and-range talk might have sounded complicated, but translating it to types makes it blindingly obvious. So if we use pure functions and follow this rule, are we free from problems?</p>\n<p>Well, in most cases yes ‚Äî but sadly, not all. The programming world has cases that don‚Äôt exist in mathematics, like errors and uncertainty.</p>\n<p>Even pure functions ‚Äî programming implementations of mathematical functions ‚Äî can‚Äôt escape these cases as long as they exist in the programming world.</p>\n<p>Because these problems persist even with pure functions, brilliant minds around the world started wondering ‚Äúhow can we safely compose functions?‚Äù ‚Äî and the concepts they introduced to answer that question were mathematical ideas like functors and monads.</p>\n<h3 id=\"side-effects-exist-even-in-pure-functions\" style=\"position:relative;\">Side Effects Exist Even in Pure Functions<a href=\"#side-effects-exist-even-in-pure-functions\" aria-label=\"side effects exist even in pure functions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>‚ÄúSide effect‚Äù literally means ‚Äúsecondary effect.‚Äù</p>\n<p>Any secondary effect that occurs beyond what we expect from a function is a side effect. A function being affected by external state is just one representative example.</p>\n<p>Compared to mathematical functions, pure functions are actually quite flimsy beyond the guarantee that ‚Äúthe same input always produces the same output.‚Äù Consider a function that takes a string and returns its first character:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getFirstLetter</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>This is a pure function. Its output depends only on its argument, it always returns the same output for the same input, and it‚Äôs not affected by any external state.</p>\n<p><code class=\"language-text\">getFirstLetter</code> is a pure function that returns the first character of a given string ‚Äî but if an empty string is passed as an argument, it will return <code class=\"language-text\">undefined</code> instead of a <code class=\"language-text\">string</code>.</p>\n<p>Can we really guarantee that this function will always return a <code class=\"language-text\">string</code> type?</p>\n<p>If we assumed <code class=\"language-text\">getFirstLetter</code> would definitely return a <code class=\"language-text\">string</code> and composed functions accordingly, we‚Äôd run into a type error like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getStringLength</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">getStringLength</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Uncaught TypeError<span class=\"token operator\">:</span> Cannot read property <span class=\"token string\">'length'</span> <span class=\"token keyword\">of</span> <span class=\"token keyword\">undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Even this error is a side effect. It‚Äôs a secondary effect occurring beyond what we expected from our pure function.</p>\n<p>When multiple functions are composed and even a single one throws an error, the entire composed operation falls apart. That‚Äôs why we must manage these side effects.</p>\n<p>In truth, <code class=\"language-text\">getFirstLetter</code>‚Äôs range isn‚Äôt just <code class=\"language-text\">string</code> ‚Äî it‚Äôs a <code class=\"language-text\">string|undefined</code> union. So we could solve this by redefining both functions‚Äô domains and ranges and adding error handling:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getFirstLetter</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token operator\">|</span><span class=\"token keyword\">undefined</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getStringLength</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token operator\">|</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>But once a function starts having a range that‚Äôs a union of multiple types, every function that composes with it also needs a domain that‚Äôs a union ‚Äî resulting in cancerous types like <code class=\"language-text\">type|undefined</code> spreading across every function.</p>\n<p>On top of that, checking for value existence inside every function with conditional logic is tedious, and duplicating the same code everywhere means this isn‚Äôt a fundamental solution.</p>\n<p>This uncertainty about what type a function might return ultimately hinders clear type usage during composition ‚Äî where domains and ranges must match ‚Äî making it a side effect we absolutely must address.</p>\n<h2 id=\"how-should-we-manage-side-effects\" style=\"position:relative;\">How Should We Manage Side Effects?<a href=\"#how-should-we-manage-side-effects\" aria-label=\"how should we manage side effects permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The reason this happens is simply that ‚Äúcomputers aren‚Äôt math.‚Äù Every function running in a program has these issues. Even pure functions.</p>\n<p>Fundamentally, the question is: how can we manage the unavoidable side effects that arise during function composition?</p>\n<p>Can we safely complete a composed operation even if a function in the middle throws an error? Can we make uncertain function outputs clear before passing them to the next function?</p>\n<p>What if we wrap the function in another function that safely handles exceptions, or skip the next function if a weird value comes out?</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">StringFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">safety</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token operator\">|</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> fn<span class=\"token operator\">:</span> StringFunction<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">?</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> x<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">safety</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">safety</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1</span>\n<span class=\"token keyword\">undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>But this approach seems hard to apply to functions with all sorts of input/output types, so let‚Äôs make it more flexible with generics.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">safety</span> <span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token operator\">|</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">fn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">?</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> x<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token generic-function\"><span class=\"token function\">safety</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token generic-function\"><span class=\"token function\">safety</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">1</span>\n<span class=\"token keyword\">undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Now we‚Äôre getting somewhere. Essentially, the <code class=\"language-text\">safety</code> function takes a value of <code class=\"language-text\">T</code> or <code class=\"language-text\">undefined</code>. If the value is <code class=\"language-text\">undefined</code>, it returns <code class=\"language-text\">undefined</code> as-is. Otherwise, it passes the value to a function that takes <code class=\"language-text\">T</code> and returns <code class=\"language-text\">U</code>, and returns that function‚Äôs result.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">Has value<span class=\"token operator\">:</span>    <span class=\"token constant\">T</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> fn<span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span>\nNo value<span class=\"token operator\">:</span>     <span class=\"token constant\">T</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Instead of directly connecting <code class=\"language-text\">getFirstLetter</code>‚Äôs range to <code class=\"language-text\">getStringLength</code>‚Äôs domain, we‚Äôve safely composed the functions by wrapping the side effect with <code class=\"language-text\">x ? fn(x) : x</code> logic.</p>\n<p>What if we extended this concept ‚Äî what if some kind of safety wrapper always surrounded a function‚Äôs output value? If we could create something that wraps both a function‚Äôs normal result and its side effects, couldn‚Äôt we solve this problem?</p>\n<center>\n  <div style=\"width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4ff50b03adf61a44030b6872ee2fdcce/f793b/set.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADyElEQVR42m2UW08bRxTH3TxFbb9bHppW9KtUavvSN3ipqpZGitJcheglCQQQpFWt0AawZ/bi9QXstbnULgaMvFdj452Zf8/smsSorHR07J3Z37mfXG7qAXAr1af5jxEVZzAqLZC4uLAHGFgxRraLsbMA35jRd7Jvvr6Vu+m5OoDH7iJgLuQuzjqbyi0twbVfoNvcQLO8hMP6uoKsQQbFJkLjk2lHpmC5D1LtF2YhasClo+iyzK/+KB7Mf6We3f8GfPMJHnz/pbr37RcCPpMYlxVEFfCLc9MMTc9gkTELNEA6EYEpETJgYEJFBmTISXOM+ztI/CLd4YDHJZ0JwAVCPnctfPj8M21NRqZoeueKewJH/ilUwPTl90JwLck+x6VNBhpMqZCgUnvKP81g//IPMXQqSEo48Lrybw8oeApaHwdtAhWgNCwgiTnEPxwjRmJmetyk8EUZuCiV0d34KEcVnNEWRr4tmZcQDKnskFjeCCI0kYY/gY4cjqHBMDRZpi0GeU5QRbmPzM9zcuA8A6o49fbFFkGKfYWClgnUDxqpl9o7ecIwti1yqATh2KRtJJaFpM0ol3uUc+tRTsZmnUzh0D+RbwnAfEmwTPT/Y1+HvQNFQNU20fn9D5RfPEd95RWqyy/RWl3TOaWwHTJqOjkZGREihv3IV6vNPh7+WcDCdhlP3nC8PhqgE51RqBlQHppoE3D93jzW5n+A9evPqC+/ouJwhcsSGTa6OaKmQDfw1JtTge+eb+D+6y0sFqrY7CkcBRqYhTxuMYhSCbsry/jr8SO01teoOCYu95iiidLAE8qhRSGbaHk9uR0A641jrNQ6yLc9bPlA2z9OPcTAwHifobmyBvu3X1BdeonNxz/BWFzE2KWQk/Ik5GHpKVBB2+sInTMzUjBjgAcKukhnwUGaQ8QGRJsjLhQQswIGJBe8iGh7RxuiotRB7fcwJy7KM1BVeP6e3NYtc1XltNISg6BCwGw61Dk1tGVck5FJhrrUNrrK1IJTjV2F3Y9TKJtUuOYH73swnRTK4y71IiexJtohWEJGR04ZNjW2foQePVmBFzbFdh9KT0mRoHFQS717NykElL0MNiyScKZEl/KHXbpn3r22tmSYLYcgcpMj6sk4rGUNPT3LYTZ+qpdWXIkzvRxaurqz19bY1caR/eKczicSW1GrSBVwQRD1DhZwlb6LKExZVVB7U+srY0xv62yNhewOhelCUdXQoJ1X0fsxE/1bv9Nn6YJld26E/W97H+Rv63VE6+spbe8aLdRz8q6nf6fv6AzI377p4/8ApEvjlY5UrW0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"set\" title=\"\" src=\"/static/4ff50b03adf61a44030b6872ee2fdcce/6af66/set.png\" srcset=\"/static/4ff50b03adf61a44030b6872ee2fdcce/69538/set.png 160w,\n/static/4ff50b03adf61a44030b6872ee2fdcce/72799/set.png 320w,\n/static/4ff50b03adf61a44030b6872ee2fdcce/6af66/set.png 640w,\n/static/4ff50b03adf61a44030b6872ee2fdcce/d9199/set.png 960w,\n/static/4ff50b03adf61a44030b6872ee2fdcce/21b4d/set.png 1280w,\n/static/4ff50b03adf61a44030b6872ee2fdcce/f793b/set.png 1404w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>If that abstract something could manage function side effects while enabling composition with other functions, we could compose freely without handling exceptions at every step ‚Äî maintaining type safety for function inputs and outputs.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// Something like this!</span>\nf<span class=\"token operator\">:</span> Something<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Something<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span>\ng<span class=\"token operator\">:</span>                      Something<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Something<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>A function might return a proper value from its range, or it might return a value like <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> that could cause side effects. But as long as that <code class=\"language-text\">Something</code> can handle exceptions on its own, we can compose functions without worrying about those details.</p>\n<p>And with this approach, beyond just managing <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code>, we could wrap various kinds of logic around values ‚Äî making it a reasonably extensible concept. Something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">Maybe<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> The value may or may not exist\n<span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> No value right now<span class=\"token punctuation\">,</span> but you<span class=\"token string\">'ll get one when it'</span>s ready\nList<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> May contain multiple values <span class=\"token keyword\">of</span> the same kind</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>And to use this value-wrapping something effectively, we‚Äôd need to freely transform the internal value ‚Äî so we‚Äôd also need something capable of operations like <code class=\"language-text\">Maybe&lt;T> -> Maybe&lt;U></code>.</p>\n<p>After this kind of deliberation, developers borrowed a mathematical concept that serves a similar role. That concept is the <strong>functor</strong>.</p>\n<h2 id=\"what-is-a-functor\" style=\"position:relative;\">What Is a Functor?<a href=\"#what-is-a-functor\" aria-label=\"what is a functor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Functors are commonly explained as some kind of box that holds a value. As I described above, a box is an apt metaphor for something that can wrap and handle both a function‚Äôs normal results and its side effects.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/340a17df74756ac7c3e06a5a4eaa74fb/78597/fmap_just.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVR42mVQTUvEMBDtr9ejB8+uiseCCMJ6dNnjgqigtFnWfmT7kSZtYpsE048kZld2EX0wwzAzj3lvPGutMcYe4Gqtdcd5EkdScNeBECgl9yNr9GT2+Fn29KSPRCokSDNGG1SRxeI+266zHK1W87bF6ksFGXoN1r0UbjVO4wJjb3brE1oLKbv2M4DFbPkM8ooQEiURY9Sp6IdhnDQl+B2iywcfJGveydPri3P/xju5Onv7AASTsiy5lI9B/LKteNc2lAkhD152mcn+bjnfwI1T8RSGII08WCHnUClVYYwQitNEDYP9B8fXeirzAkIYAsAo3Xl24S6Q2iklTdOQuh6n8c8Xf7/TWHPEN7KLTgVWzdmZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"fmap just\" title=\"\" src=\"/static/340a17df74756ac7c3e06a5a4eaa74fb/6af66/fmap_just.png\" srcset=\"/static/340a17df74756ac7c3e06a5a4eaa74fb/69538/fmap_just.png 160w,\n/static/340a17df74756ac7c3e06a5a4eaa74fb/72799/fmap_just.png 320w,\n/static/340a17df74756ac7c3e06a5a4eaa74fb/6af66/fmap_just.png 640w,\n/static/340a17df74756ac7c3e06a5a4eaa74fb/78597/fmap_just.png 947w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>[Source] http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html</small>\n</center>\n<p>This box might contain logic that helps you use values safely, logic that can process multiple values, logic that makes values available once they‚Äôre determined in the future ‚Äî it‚Äôs a magical box containing various kinds of logic that assist in using values.</p>\n<p>Since this box isn‚Äôt limited to a fixed role and can have various capabilities like <code class=\"language-text\">Maybe</code> or <code class=\"language-text\">Promise</code>, it‚Äôs also called a ‚Äúcontext.‚Äù</p>\n<p>The <code class=\"language-text\">safety</code> function we created earlier can be thought of as a kind of box wrapping values.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">safety</span> <span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token operator\">|</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">fn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">?</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> x<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<center>\n  <div style=\"width: 200px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2a4ed3a1c967bb8474d5ef04b59bb091/27b7a/box.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 110.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAADLUlEQVR42pVVW1NSURTG0uk31G91GpvqoR7qoZesqV50SisrdZTwAU1L4JwDnAscQJT7XS4HEBTPOV9rby6Bxowy87HX3mt9315r783C4aAPsHqXjTEb9zw1SIdV9Lx1GFILLamNltgkkO0/Q0sg29eAQXE9TxV+EZjra+COY2DM0NcM3O7ZCioPiFgOdIA/pxf2WiAOhlffXPjkCWFpP4DNcBr7hbYd7AJi0y6VUb4PcXFuTEucozwW0BROLo1ASaj1TF8T2M2d4dnSdzx5v4J3Lg+ek/3GeYCnH1bhjFcgtAAWyzi24UvAEB4xLQcM32MgAVzIltWRoTY6EOo2xLoJX+2SbBMBIkuGRWs9HOQNSA3yUYza6IJx0FNMrtESFhz2eTCNswAsQ7AoS5hNPy6bwT5ach9jc7OtjOYslnFsQzRxTsJdJeqgcumYJeawyQG7Id0OBuOKFhdsSRkHTZpo006GaJdPEsjoOWQjk8joWY7r6zmUjxOM2xdsiiRo0PG2JVgNyc6E80ioRSS1f0ioBWT1CgmccnvSV+SixLXoDtixZScFyZnUCkiF+khqeRIqQ9yTIewGuc3W/vkLPPMbCya0HErxOtZXtrC2vIFivHY7wfR/Su6jMCr/asnp8JSS2aWU4kkwUZbpOLJ6nuPqOostEmd4KWOC/D3ZdEv0DPy3A3FGz2ZCkDJkTuuW4ILGFMFkRUG4qEEnhIsqIuUQQgWFzyOlEMIFlY/6ICZU0JAoK6MMecnW4AxNEmRBKkFjwUQMZoOI1WIIV8KQczKO6jG+FqKNtEEs45jGFMFoSYVKWcSqEezKbrx8+wLrez+w7dmC07uNHdEFl+8nfql7iJ7qPJZxJgSHPz0mGCGnRmVEKjp8cS8+u1bxdecLljeXsPl7A4sfX8PpIWHBxTe9Ktj/6bHmMCyZZThWMoNO4kpOgZc2iFSjOIx5uNCo5HFB3hzO5RQ6vH3ZaboUlmX0GjQcVUKIFBU+Dtd1urgUccBa3wWNXZm1L9ZpT6jBKrQLLU5DV54cR5Bh91TeYOkJPaS/APcsPep5qv+YkKa0U3y8GYaxx3Rs80zrL1W5GIz1y+BDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"box\" title=\"\" src=\"/static/2a4ed3a1c967bb8474d5ef04b59bb091/6af66/box.png\" srcset=\"/static/2a4ed3a1c967bb8474d5ef04b59bb091/69538/box.png 160w,\n/static/2a4ed3a1c967bb8474d5ef04b59bb091/72799/box.png 320w,\n/static/2a4ed3a1c967bb8474d5ef04b59bb091/6af66/box.png 640w,\n/static/2a4ed3a1c967bb8474d5ef04b59bb091/27b7a/box.png 804w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>A box that executes `fn(x)` if `x` has a value, or returns `x` as-is if it doesn't</small>\n  <br>\n  <br>\n</center>\n<p>The point is that instead of using the value <code class=\"language-text\">x</code> directly, we‚Äôre putting <code class=\"language-text\">x</code> into the <code class=\"language-text\">safety</code> function ‚Äî so we can think of the <code class=\"language-text\">safety</code> function as a kind of box.</p>\n<p>Conceptually, that‚Äôs really all there is to functors. From here, you just need to learn how to implement them and you‚Äôre good to go. But since this post aims to dig deeper into what functors really are, I want to talk about the more fundamental concept behind them.</p>\n<h3 id=\"categories\" style=\"position:relative;\">Categories<a href=\"#categories\" aria-label=\"categories permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>A functor is a concept from Category Theory in mathematics, defined as a structure that can define relationships between categories that share the same structure.</p>\n<p>To understand what a functor fundamentally is ‚Äî and why we need functors for safe function composition through <code class=\"language-text\">Something&lt;type></code> ‚Äî you need to know what a category is.</p>\n<p>The mathematical concept of a category isn‚Äôt actually that different from how we use the word ‚Äúcategory‚Äù in everyday life. It‚Äôs roughly‚Ä¶ a grouping of similar things.</p>\n<p>With that relaxed mindset, if you search for Category Theory on Wikipedia, you‚Äôll find something like this:</p>\n<blockquote>\n<p>A category <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal {C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span></span></span></span></span> consists of the following data:</p>\n<ul>\n<li>A collection <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span> of <strong>objects</strong>. Elements of this collection are called ‚Äúobjects‚Äù of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span>.</li>\n<li>For any two objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>‚àà</mo><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a,b \\in ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span>, a collection of <strong>morphisms</strong> <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon a\\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> from <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> to <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>. The collection of all morphisms in <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span> is denoted <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\hom(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span>.</li>\n<li>For any three objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>c</mi><mo>‚àà</mo><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a,b,c\\in ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span>, a binary operation <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>√ó</mo><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\hom(a,b)\\times \\hom(b,c)\\to \\hom(a,c)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span></span></span></span></span>, called <strong>composition</strong> of morphisms. The composition of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon a\\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>b</mi><mo>‚Üí</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">g\\colon b\\to c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span> is denoted <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>‚àò</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">g\\circ f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àò</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> or <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">gf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span>.</li>\n</ul>\n<p>‚Ä¶</p>\n<p><strong>Wikipedia</strong> <em><a href=\"https://en.wikipedia.org/wiki/Category_(mathematics)\" target=\"_blank\" rel=\"nofollow\">Category (mathematics)</a></em></p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7d059800d070c80898d9648585a46696/65f94/what.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAHSEoDQlKv/xAAbEAAABwEAAAAAAAAAAAAAAAAAAQIDEiEyEf/aAAgBAQABBQKfQ5IJXTWnMpOv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/AVxsv//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPwFQf//EABcQAAMBAAAAAAAAAAAAAAAAAAABEiD/2gAIAQEABj8CFGf/xAAZEAEBAAMBAAAAAAAAAAAAAAABABEhMUH/2gAIAQEAAT8hEsEwL10kSvYa7xDYO+ST/9oADAMBAAIAAwAAABBLD//EABYRAQEBAAAAAAAAAAAAAAAAAAARMf/aAAgBAwEBPxDAS//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxAJgn//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMWFBUf/aAAgBAQABPxAiOLp5M9dWd87GZ42v2Xs2A1X2AUBRU7TBGsJ//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"what\" title=\"\" src=\"/static/7d059800d070c80898d9648585a46696/65f94/what.jpg\" srcset=\"/static/7d059800d070c80898d9648585a46696/0913d/what.jpg 160w,\n/static/7d059800d070c80898d9648585a46696/cb69c/what.jpg 320w,\n/static/7d059800d070c80898d9648585a46696/65f94/what.jpg 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Huh...?</small>\n</center>\n<p>The general idea of category theory is actually something anyone can understand. It‚Äôs just that mathematics is inherently abstract, and explaining things in everyday language would be too long and complex, so mathematicians use condensed words and symbols. <em>(This is honestly one of the reasons people give up on math.)</em></p>\n<p>As I mentioned, a category in math is basically the same concept as categories on a shopping site. The difference is that mathematical categories are more abstract ‚Äî they could be categories of objects, of natural numbers, or even of functions.</p>\n<p>According to the definition above, a category consists of ‚Äúobjects‚Äù and ‚Äúmorphisms.‚Äù</p>\n<p>An object is simply an item within a category. In a fashion shopping site‚Äôs product category, the objects would be shirts, sweatshirts, outerwear, and coats. In a category of natural numbers, the objects would be 1, 2, 3, and so on. So far, this feels similar to how we use ‚Äúcategory‚Äù in everyday life.</p>\n<p>But a mathematical category also has morphisms.</p>\n<p>Looking at the definition again, a morphism is something with a domain <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> and a codomain <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> for any two objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>‚àà</mo><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a,b \\in ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span>. The notation <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>‚àà</mo><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a,b \\in ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span> just means objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> are in category <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span>, so we can skip that. The keywords we should focus on are ‚Äúdomain‚Äù and ‚Äúcodomain.‚Äù</p>\n<p>What‚Äôs the first thing that comes to mind when you hear ‚Äúdomain‚Äù and ‚Äúcodomain‚Äù? That‚Äôs right ‚Äî <strong>functions</strong>. Saying that <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> is the domain and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> is the codomain means that applying some morphism (function) to object <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> produces <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> objectA <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">morphismAdd1</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Applying the morphism add1 to object A...</span>\n<span class=\"token function\">morphismAdd1</span><span class=\"token punctuation\">(</span>objectA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token number\">2</span> <span class=\"token comment\">// Produces object B</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>In other words, a morphism is essentially a function that represents the relationship between objects. That‚Äôs why we can express it mathematically as <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f: a \\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and programmatically as the lambda <code class=\"language-text\">(a) => b</code>. <em>(There are cases where morphisms aren‚Äôt functions depending on the type of objects, but let‚Äôs not go there.)</em></p>\n<p>Now that we understand this much, let‚Äôs grab a simple category and play with it.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d24e3d04ef5aa42d4f6de9c7fef7744b/7a18f/category.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVR42pVTPW/TUBS1U7eQSgGqColOYciAkFCmiIWqEks3tszZspcPic1kgFIKPwCpCwMDIBVRpQLKYNQG7KQOCUogAdqCSh0Fx7Hz4aSQ2r3cW7nIFNo0Rzp6912/d+557z4zkm4rqRq0F9aqzbn8uhkvKOZiqV3LtAGkqnWNQXh9vkvDIyNnKF5Y0/h3JsBS+Wf9We6bGf+4YdJeSYdO0oAiU7DtzRUAeKs24MlyEZ5/KsGyUd/SMJeu1ydJxO/3nz4bCp3CkJ3P52dU/JbvWNbT7Bd4mMjCq1VlexVzRYAyI1bgulixb2Y2IbZUak0l1K3bcgN4SYO7og4XSBDXeogUJ1QYFTWYRjcx5K3XSvNOpgUxSbMnk1W4zPwHfa6Y3Ye76Ef6/tqNlftc9ITDYW8gEDhJc57nPXurOW531kYikaPBYPAExqwgCBzlmX0wiDzGdMe/Dl0gN0eckSoNO8LdBKkw5/DPPRGGkOPUVOR5ZMhZPHCAIIkcR44iz+39yLoqcY5LznHq6XJk1u2wG7yO+57v8CD4djfy2F0BYKej4YkJb3BsjLrsuS/L/YIAXC+iQ07T3BhwvQa2J4vRaJSON/hypXIxWYPpdAtuCN/Ne49ThRnZBF7U7SnRgCuHFqTHS2M8nX7QwMmHZsualXPwSHwPYknd3sDcV/qXDwu6NxrfVDpXkzr8kqq28uKz+mMut64uKu2yqFlGyoDsb0n0PW01RzOAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"category\" title=\"\" src=\"/static/d24e3d04ef5aa42d4f6de9c7fef7744b/6af66/category.png\" srcset=\"/static/d24e3d04ef5aa42d4f6de9c7fef7744b/69538/category.png 160w,\n/static/d24e3d04ef5aa42d4f6de9c7fef7744b/72799/category.png 320w,\n/static/d24e3d04ef5aa42d4f6de9c7fef7744b/6af66/category.png 640w,\n/static/d24e3d04ef5aa42d4f6de9c7fef7744b/d9199/category.png 960w,\n/static/d24e3d04ef5aa42d4f6de9c7fef7744b/21b4d/category.png 1280w,\n/static/d24e3d04ef5aa42d4f6de9c7fef7744b/7a18f/category.png 1284w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>Imagine a category <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal {C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span></span></span></span></span> with this structure. The objects are bicycle, car, and airplane, and the morphisms are the <code class=\"language-text\">faster</code> arrows between them.</p>\n<p>In this category, applying the <code class=\"language-text\">faster</code> morphism to bicycle produces car, and applying <code class=\"language-text\">faster</code> to car produces airplane. When we say morphisms express relationships between objects, this is what we mean. A bicycle made faster becomes a car, and a car made faster becomes an airplane.</p>\n<p>And since applying a morphism is the same as applying a function, we can express this category‚Äôs structure in simple code.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> category <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'bicycle'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'car'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'airplane'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">faster</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">category<span class=\"token punctuation\">,</span> object</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> category<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v <span class=\"token operator\">===</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> category<span class=\"token punctuation\">[</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">faster</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">,</span> <span class=\"token string\">'bicycle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">faster</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">,</span> <span class=\"token string\">'car'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">'car'</span>\n<span class=\"token string\">'airplane'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>And the faster <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>‚àò</mo></mrow><annotation encoding=\"application/x-tex\">\\circ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">‚àò</span></span></span></span></span> faster morphism drawn directly from bicycle to airplane represents the composition of two faster morphisms. In code, that‚Äôs <code class=\"language-text\">faster(faster('bicycle')) === 'airplane'</code> ‚Äî two composed function calls.</p>\n<p>Expressing morphism composition in programming is nothing more and nothing less than composing functions. This simple idea looks like this when stated in mathematical terms:</p>\n<blockquote>\n<p>For any three objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>c</mi><mo>‚àà</mo><mi>o</mi><mi>b</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a,b,c\\in ob(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">b</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span>, a binary operation <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>√ó</mo><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mi>hom</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\hom(a,b)\\times \\hom(b,c)\\to \\hom(a,c)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">hom</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span></span></span></span></span>, called composition of morphisms. The composition of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon a\\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>b</mi><mo>‚Üí</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">g\\colon b\\to c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span> is denoted <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>‚àò</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">g\\circ f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àò</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> or <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">gf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span>.</p>\n</blockquote>\n<p>The three objects in this definition correspond to bicycle, car, and airplane from our category. And the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mi>o</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">hom</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span></span></span></span></span> in <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mi>o</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">hom(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span></span> refers to a collection of morphisms ‚Äî a set of morphisms.</p>\n<p>The reason there can be multiple morphisms is straightforward. Even in our category, the relationship between bicycle and car isn‚Äôt limited to just <code class=\"language-text\">faster</code>:</p>\n<blockquote>\n<ol>\n<li>bicycle -<strong>faster</strong>-> car</li>\n<li>bicycle -<strong>more expensive</strong>-> car</li>\n<li>bicycle -<strong>larger</strong>-> car</li>\n<li>bicycle -<strong>has an engine</strong>-> car</li>\n</ol>\n</blockquote>\n<p>Multiple morphisms can exist between any two objects, so mathematicians lump their collection together and call it <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mi>o</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">hom</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span></span></span></span></span>.</p>\n<p>You might wonder why we need to care about all these details, but mathematics is a discipline where answers must be definitive and exceptions are never allowed, so definitions must account for every possible case.</p>\n<p>And <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"></mspace><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"></mspace><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon a\\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> refers to applying just one morphism from the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mi>o</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">hom</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span></span></span></span></span> collection to objects <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>. We don‚Äôt know which morphism will be applied, but only one can be applied at a time. <em>(Applying multiple simultaneously would require a quantum computer.)</em></p>\n<p>Finally, just as we applied the faster morphism twice to bicycle, composing morphisms <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>a</mi><mo>‚Üí</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">f: a\\to b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>:</mo><mi>b</mi><mo>‚Üí</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">g: b\\to c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span></span> is denoted <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>‚àò</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">g\\circ f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àò</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> ‚Äî morphism composition.</p>\n<p>In other words, applying morphism <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span> to the object ‚Äúbicycle,‚Äù then applying morphism <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span>, produces the object ‚Äúairplane.‚Äù In code: <code class=\"language-text\">g(f('bicycle')) === 'airplane'</code>.</p>\n<p>Category theory is such an abstract theory that everything happening inside a program can be expressed as category models. Likewise, the process of applying functions to values and composing them in functional programming can also be represented as a category model.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/31c57f106ec9d6857471d2fcdbfe5da7/bf286/category-example.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVR42oVTyXLTQBAVVz4A+AjgxBdw5cid/+KYKi4UBRRQIZA9xIkXyfISEztRkC05lu1402ixrMQzj55xEiBUQFWv2prpfu73uqUBuKPd/lzd3SPc1f7zXHMhqj1AWHyM0Hj0F3D40HNWn9x6ryDvsvcXZEx/gcBIMDWBuCgwKwOzCpCU5DtEVMRsmBXpJE9nZXWm7lLKmZUXNbI20CMExecaTw9OcV5Bz3d4dTARRccRedsWZa8nTpgv+u6u0LeWhFV6Kya9vKiPx6LidUWhaYui64iD4USc+c058B3ivFbReGQmYDk0gxFWTxMsbZt4+WUfH+tdFHyBSd9A0s8gPdvDaWsPmeEc76qOynm1d4CN7gUc1udITPCo1CLJxox8QMoqiIMGkugI40GVftcxDQ5JMskh2RIiLiFmhypnMjrANGyompSVubIgMBzpYUrapQcE8iko4HyUQdjZAkL98txQEEwnFOi8gKi7DT7JLmqYToRVujNcjSaUIiF2+ndMS4tI7+m4gGSwT8WmTLwmVQiLRLgLThFTGkxkcvCaHKCrsc526h2vYNDcwMjZoLiGM3sdp0crcOvLSIZZRQp21eWCMCTCkbMJz/oq6zjr7CDwvrnasLWRysIzew0dIrHK79Guf0ar9gljdxMy8cInmcoWIvytw97JqsodtNZ51/qCdmOZJMdmKvUrubL95AoLG+ZEJknFJRmXxNRx2M1gHlLNjGpjGgpXA3Q17hfSX4bfhKGKabGVRNmZYHk1iJCGMh+Rx36O7Chw+TFwprtybRKZ+IfpN0GrE9MuRv19BOwI8dSG3TLAmIUw+oHEr6i1EYFOexiZMXUzV6O/BdynGOrctnb49oDzN5U2f11y+FKmxj+cBNwJhxeIdFpss6mRfxZQpy5KQnl4K0q4mNbQjsZo9NqwBh3U2hbq/Q782OFAg77val5KfkZd2BQ96rQj47+R8xAbC0xNjzojxlyXrDmmL+7pTz/gOdXQ1uU9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"category example\" title=\"\" src=\"/static/31c57f106ec9d6857471d2fcdbfe5da7/6af66/category-example.png\" srcset=\"/static/31c57f106ec9d6857471d2fcdbfe5da7/69538/category-example.png 160w,\n/static/31c57f106ec9d6857471d2fcdbfe5da7/72799/category-example.png 320w,\n/static/31c57f106ec9d6857471d2fcdbfe5da7/6af66/category-example.png 640w,\n/static/31c57f106ec9d6857471d2fcdbfe5da7/d9199/category-example.png 960w,\n/static/31c57f106ec9d6857471d2fcdbfe5da7/21b4d/category-example.png 1280w,\n/static/31c57f106ec9d6857471d2fcdbfe5da7/bf286/category-example.png 1688w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>Everything that happens inside a program can be expressed as a category</small>\n  <br>\n  <br>\n</center>\n<p>Personally, I believe this is all you need to know about category theory to understand functors more easily. Once you accept that things happening in a program can be defined as categories, understanding functors becomes straightforward.</p>\n<h3 id=\"functors\" style=\"position:relative;\">Functors<a href=\"#functors\" aria-label=\"functors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now let‚Äôs transform our simple category into a more abstract model. Replace the names bicycle, car, and airplane with variables <code class=\"language-text\">x, y, z</code>, and replace the morphism <code class=\"language-text\">faster</code> with variables <code class=\"language-text\">f</code> and <code class=\"language-text\">g</code>.</p>\n<center>\n  <div style=\"max-width: 300px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8580182cd5537b8b1808d4e97c3c27a4/93582/absolute-category.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACnElEQVR42o1Uy27aQBSlm1aq1G1XXfYP8g39gHxe/6GrqE0iRS0USDBgxzRN1AQ15IFxeNmeGRtjDJ7TOxPaQBKsIh3NZebccx8z1wUALxQK+b93hDd5hDUdZUjZfvUc6Ozl9vaHtzs7H18rO4e3FGPWe/D6J3DjBLxhg9da9H8FzRYmx5bkTVvba2eKa9j3vqRBWgVMrBLgIkm72WzexXzRg1oTQppeUeBfCAZVpLFN9jnS+bU+19xsyU2dBXAH0vpWQGxOukFXljxkhwHkXofL0iCVZR+yPppI1itLt70nmVOUt+f78qgvZIV4pcFc7nYCeUi8Ivm63AFpsQJEPfHEFVr+FGc8hnHbR8vj+MmmaAc+FkETUpiQ3EQyNnDhj+ksQWvENVf52H4sWXQDhHVeoL7MEJqAaNBGE3O/htAtapt6SvvmA0KLVtoPG5gHBsJBecmrS+qz4oiloPXgFFmI+hWE/bK2wc110aXw3K9DuOX7ILxJgvYGQYVpC+FdBTPP0A50w88KhhRYC7FNgrQugjoCpwjW+w63vY/ssdg/XgP+bRHT0ZHae1qyziI6RkSZ3Zx9xvj6K6JBBZyEpXhatuJ3z3cx7Bwov5weKlD6UvWPAkyHR/e9iqynPaTgiPNKXomuM15mrQRjEla23leCVHJID/7/LuWRuDpnTgkp9ReRqZ9KMqpi8HtfTQcyZqyULMwkT/AvMnp//csDXAx7uBARTsceTOcObSFw6gspoiv1lnlBTuxYp5yDTPUotCRzq7LiMlnlNG6Dmfxy6ctDRra/OnrpKaXQUReRIW5hM6hHyQ+I+AbepAd/4sCLunodh06mPw6zk4b6fG3RONWoVx5lM6TJGG1CxhojMIPsNQwhDI/KraXM2PoDpJ3XiwGEc1UAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"absolute category\" title=\"\" src=\"/static/8580182cd5537b8b1808d4e97c3c27a4/6af66/absolute-category.png\" srcset=\"/static/8580182cd5537b8b1808d4e97c3c27a4/69538/absolute-category.png 160w,\n/static/8580182cd5537b8b1808d4e97c3c27a4/72799/absolute-category.png 320w,\n/static/8580182cd5537b8b1808d4e97c3c27a4/6af66/absolute-category.png 640w,\n/static/8580182cd5537b8b1808d4e97c3c27a4/d9199/absolute-category.png 960w,\n/static/8580182cd5537b8b1808d4e97c3c27a4/21b4d/absolute-category.png 1280w,\n/static/8580182cd5537b8b1808d4e97c3c27a4/93582/absolute-category.png 1524w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <br>\n</center>\n<p>After abstracting our category this way, it feels like there should be other categories with the same structure ‚Äî not just category <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span>.</p>\n<p>And that makes sense, because categories with this structure of objects and morphisms are extremely common ‚Äî frankly, it‚Äôs a universal pattern that can be fitted to almost any definition.</p>\n<p>So if we can apply morphisms to objects to transform them into other objects, couldn‚Äôt we apply something to a category to transform it into another category?</p>\n<p>That‚Äôs exactly where the <strong>functor</strong> comes in. A functor is a morphism (function) that can transform one category into another.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/091da7127032da1c6ee53eb819d6af9d/b8f37/functor-category.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVR42jWSS2/TQBSFg5DYUMESqWVHECAhWPDT+BEIwQ9g2RWLSJUqgZAKEn0lcbDdkAbapk3TPJymjp/zsF0/4jmMnWDp6s7VfHPmnJErCD+vl+XUNur1zScIvy/nsLaBeW2tIj+gcqfscka49RhQHu19ef/047u3bxBurwPbyzOo3avc+KPM8I3QJRdRah+G1P8bTYkRTP1JztmZDvHtQSnm1R5yetoe24N84o1C1+6EZPyDu6QfDe0BnzMDCT/+VJkwGz1nDptPIdw6fL+HvmeLK+qCx1cB0Hi+dHlUDeJh2rOucWJOBWMXSK19mNRA1xjmZkKRZX2lAq5i4TWQuU0gaANcR+o1hKAtOetscrrzshAc/vn6AkxNCj616yKnv1a8hsRr5ojlmmlSkOkIzDrY7AALokqgjVtbEbKKA/y8vfVa6t1VDjZf5URNPWMPZLovIqsBQfWSj51WzmaHyLxWqxTMqSY3NcRSpOip2xSCtIobOaj6rIxMjqqSTQoeVBPF5bGjlIkST8mRdFYOo98o67ZT2ne9Hs48V/SpD56MAsT/37BfRdxNSy5si6IXsWfEgD4e5dcxx2JxWURWiXRh50xzQFQn8LuO6Y8skwx5SE9+4mbn/vKX2V2TEXeXrjULK97zzx3DvrQsfxBl7PjDP7mvCVMvxyTZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"functor category\" title=\"\" src=\"/static/091da7127032da1c6ee53eb819d6af9d/6af66/functor-category.png\" srcset=\"/static/091da7127032da1c6ee53eb819d6af9d/69538/functor-category.png 160w,\n/static/091da7127032da1c6ee53eb819d6af9d/72799/functor-category.png 320w,\n/static/091da7127032da1c6ee53eb819d6af9d/6af66/functor-category.png 640w,\n/static/091da7127032da1c6ee53eb819d6af9d/d9199/functor-category.png 960w,\n/static/091da7127032da1c6ee53eb819d6af9d/21b4d/functor-category.png 1280w,\n/static/091da7127032da1c6ee53eb819d6af9d/b8f37/functor-category.png 3524w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>No matter how complex category <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span> is, we can simply wrap the category with a functor like <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">F(C)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></span> and use it. Then all objects and morphisms inside the functor-applied category are wrapped in the function <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span></span>.</p>\n<p>The most important point is that wrapping with a functor <strong>never changes the category‚Äôs structure itself</strong>. In the diagram above, you can see that while <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span></span> has been applied to the objects and morphisms, the shape of the arrows hasn‚Äôt changed.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> objectX <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> objectY <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">morphismF</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">morphismF</span><span class=\"token punctuation\">(</span>objectX<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> objectY<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> objectX <span class=\"token operator\">=</span> <span class=\"token function\">functor</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> objectY <span class=\"token operator\">=</span> <span class=\"token function\">functor</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> morphismF <span class=\"token operator\">=</span> <span class=\"token function\">functor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">morphismF</span><span class=\"token punctuation\">(</span>objectX<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> objectY<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Even when using a functor, the rules the category has are never changed. Put simply, it safely wraps objects and morphisms without causing any other side effects.</p>\n<p>Remember when I said everything in programming can be expressed as a category?</p>\n<p>No matter how complex a category is, simply wrapping it with a functor transforms it into another category without touching the original category‚Äôs structure. This fits perfectly with the need we identified: ‚Äúwrap values to use them safely.‚Äù</p>\n<h2 id=\"lets-build-a-functor\" style=\"position:relative;\">Let‚Äôs Build a Functor!<a href=\"#lets-build-a-functor\" aria-label=\"lets build a functor permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A functor isn‚Äôt a grand concept. Simply put, if something can transform one category into another, it‚Äôs a functor.</p>\n<p>The act of a functor transforming a category is called ‚Äúmapping‚Äù ‚Äî more precisely, applying a function to a category to transform it into another category.</p>\n<p>Because functors are such an abstract concept, everyone describes them differently ‚Äî ‚ÄúI use functors for this,‚Äù ‚ÄúI use functors for that.‚Äù A functor is merely something capable of mapping, so the possibilities are endless depending on how you apply it.</p>\n<p>Since the concept of a functor just needs to allow transforming the internal value through a specific method, expressing it in code isn‚Äôt that hard.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Functor<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token generic-function\"><span class=\"token function\">map</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">f</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Functor<span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<ul>\n<li><code class=\"language-text\">Functor&lt;T></code>: This functor holds a value of type <code class=\"language-text\">T</code>.</li>\n<li><code class=\"language-text\">map&lt;U></code>: Applying this functor‚Äôs morphism yields a new functor holding a value of type <code class=\"language-text\">U</code>.</li>\n<li><code class=\"language-text\">f: (x: T) => U</code>: The morphism works by taking a value of type <code class=\"language-text\">T</code> and outputting a value of type <code class=\"language-text\">U</code>.</li>\n</ul>\n</blockquote>\n<p>The <code class=\"language-text\">map</code> method applies the <code class=\"language-text\">(x: T) => U</code> function passed as an argument to the functor‚Äôs internal value, and returns a new functor wrapping the transformed value.</p>\n<p>The function passed to <code class=\"language-text\">map</code> is what actually transforms the functor‚Äôs internal value. This function is called a ‚Äútransform‚Äù function.</p>\n<p>The reason mapping returns a functor wrapping the transformed value ‚Äî rather than the raw value itself ‚Äî is that a functor is fundamentally a structure that transforms one category into another. It doesn‚Äôt destroy the category and extract the objects inside.</p>\n<p>And since a functor merely represents a new category, it must not modify the original category‚Äôs objects. That‚Äôs why instead of updating the existing functor‚Äôs value, it creates and returns a new functor containing the transformed value.</p>\n<p>If this feels confusing, think about <code class=\"language-text\">Array.prototype.map</code>. When you think about it, an array is a kind of functor too ‚Äî a box holding values.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// Functor&lt;number></span>\n<span class=\"token keyword\">const</span> array<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Transform function: (x: number) => string</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toString</span> <span class=\"token operator\">=</span> v <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Mapping!</span>\narray<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>toString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// New functor Functor&lt;string></span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>We can use the transform function <code class=\"language-text\">toString</code> to change the values inside the array functor, but we don‚Äôt destroy the box (the array) itself.</p>\n<p>Because the <code class=\"language-text\">map</code> method we commonly use is attached to <code class=\"language-text\">Array</code>, it‚Äôs easy to associate mapping with iteration. But mapping isn‚Äôt that specific an operation.</p>\n<p>Whether <code class=\"language-text\">map</code> internally iterates, bangs a drum, or does a breakdance ‚Äî as long as it ultimately performs the transformation <code class=\"language-text\">Functor&lt;T> -> Functor&lt;U></code>, it qualifies. You should now have a sense of how functors work.</p>\n<p>Time to implement a functor ourselves. Since functors are such an abstract concept, the possibilities are endless depending on how you apply them. But this post is already quite long, so I can‚Äôt showcase many. Other developers have written great posts with functor implementations, so check those out if you‚Äôre curious.</p>\n<p>In this post, I‚Äôll build the simplest functors ‚Äî <code class=\"language-text\">Just</code> and <code class=\"language-text\">Nothing</code> ‚Äî then combine them into a <code class=\"language-text\">Maybe</code> functor that manages side effects caused by the presence or absence of values.</p>\n<h3 id=\"just\" style=\"position:relative;\">Just<a href=\"#just\" aria-label=\"just permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The <code class=\"language-text\">Just</code> functor simply wraps a value with no additional functionality, and allows that value to be transformed through its <code class=\"language-text\">map</code> method.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Just<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Functor<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token generic-function\"><span class=\"token function\">map</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span> <span class=\"token punctuation\">(</span><span class=\"token function-variable function\">f</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Just<span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">Just</code> is a simple functor that holds a value internally. Using its <code class=\"language-text\">map</code> method means transforming the functor‚Äôs <code class=\"language-text\">T</code> type value into a <code class=\"language-text\">U</code> type value and wrapping it in a new <code class=\"language-text\">Just</code> functor.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Just</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v <span class=\"token operator\">+</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>toString<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Just <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"nothing\" style=\"position:relative;\">Nothing<a href=\"#nothing\" aria-label=\"nothing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The <code class=\"language-text\">Nothing</code> functor, as the name suggests, holds no value internally. Since there‚Äôs no value to apply a transform function to, its <code class=\"language-text\">map</code> method does nothing and simply returns a <code class=\"language-text\">Nothing</code> functor.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Nothing</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Functor<span class=\"token operator\">&lt;</span><span class=\"token keyword\">null</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">map</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Nothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Nothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">Nothing <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Why do we need a functor that explicitly represents the absence of a value?</p>\n<p>Because once you start composing functions with functors, all values in the operation must also be wrapped in functors. If you try to apply a plain function to a functor-wrapped value, you‚Äôll naturally get an error.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Just</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfoo <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Operator '+' cannot be applied to types 'Just&lt;number>' and 'number'.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>So once you start composing functions with functors, you must keep using functors until the composition is complete. The whole point of using functors is to maintain type safety and manage side effects during composition ‚Äî if even one non-functor sneaks in, the entire composed operation‚Äôs safety can‚Äôt be guaranteed. <em>(One bad apple spoils the bunch.)</em></p>\n<p>This might sound inconvenient, but think about how we use <code class=\"language-text\">Array</code> ‚Äî which I described as a representative functor. It‚Äôs not such a strange concept.</p>\n<p>If you have <code class=\"language-text\">new Array(3)</code> and want to add 2 to the value it holds, how would you do it? Remember, in functional programming, state mutation isn‚Äôt allowed, so you can‚Äôt use an approach like <code class=\"language-text\">new Array(3)[0] += 2</code>.</p>\n<p>In functional programming, where immutability is paramount, if you want to change a value inside an array, the only way is to create ‚Äúa new array with the changed value.‚Äù</p>\n<p>That‚Äôs why we must use the <code class=\"language-text\">map</code> method to change array values while preserving immutability. Now you can probably see why a functor‚Äôs <code class=\"language-text\">map</code> method creates and returns a new functor after transforming the value.</p>\n<h3 id=\"maybe\" style=\"position:relative;\">Maybe<a href=\"#maybe\" aria-label=\"maybe permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>If you‚Äôve followed along this far, let‚Äôs build a more complex functor. The <code class=\"language-text\">Maybe</code> functor‚Äôs <code class=\"language-text\">map</code> method applies the given function to the internal value if it exists, and returns a <code class=\"language-text\">Nothing</code> functor if it doesn‚Äôt.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Maybe<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Functor<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> Just<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span> Nothing<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Just<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Nothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token generic-function\"><span class=\"token function\">map</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span> <span class=\"token punctuation\">(</span><span class=\"token function-variable function\">f</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token operator\">|</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Just</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">map</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Nothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFirstLetter</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">s</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getStringLength</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">s</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Maybe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getFirstLetter<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Maybe</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getFirstLetter<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Just { value: 1 }</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Nothing {}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>With the <code class=\"language-text\">Maybe</code> functor, we can compose functions with confidence, without worrying about <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> breaking the composition chain.</p>\n<p>Of course, you‚Äôll eventually need an <code class=\"language-text\">if</code> statement to distinguish whether the final result is <code class=\"language-text\">Just</code> or <code class=\"language-text\">Nothing</code>. But at least you don‚Äôt need to check at every step during composition. In other words, when composing functions, you can focus solely on the composition.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Without functors, you can't freely compose functions</span>\n<span class=\"token keyword\">const</span> firstLetter <span class=\"token operator\">=</span> <span class=\"token function\">getFirstLetter</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>firstLetter<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getStringLength</span><span class=\"token punctuation\">(</span>firstLetter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Composition failed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// With the Maybe functor, you can compose with peace of mind</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">Maybe</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getFirstLetter<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getStringLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Just</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Composition failed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>With just the simple concept of wrapping a value and being able to transform its contents, we‚Äôve achieved safe function composition.</p>\n<p>In this post, I only used the <code class=\"language-text\">Maybe</code> functor as an example for managing side effects from value presence/absence. But as I‚Äôve said multiple times, a functor is just a box wrapping a value ‚Äî depending on what logic you implement, you can create wildly different functors.</p>\n<p>For instance, <code class=\"language-text\">Promise</code> ‚Äî which guarantees a future value even though there‚Äôs no value right now ‚Äî can be seen as a kind of functor. And <code class=\"language-text\">Array</code> ‚Äî which can store multiple values sequentially ‚Äî is also a kind of functor.</p>\n<p>A functor is an abstract concept, not a concrete implementation performing specific logic. It‚Äôs so versatile that with just the concept of wrapping a value and transforming it, you can let your imagination run wild and create all sorts of functor implementations.</p>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing Thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Some readers may have thought while reading about functors: ‚ÄúWait, isn‚Äôt this a monad?‚Äù</p>\n<p>To be precise, that‚Äôs half right and half wrong. A monad is ultimately a type of functor designed for safe function composition. Simply put, a monad is a morphism between two functors that satisfies certain special mathematical conditions.</p>\n<p>I didn‚Äôt cover applicative functors or monads in this post, but setting aside the theoretical details, the reason these additional concepts exist boils down to exactly one thing:</p>\n<blockquote>\n<p>Huh‚Ä¶? Functors alone can‚Äôt solve this either‚Ä¶?</p>\n</blockquote>\n<p>We used functors to achieve safe function composition, but in practice, there are plenty of cases where functors fall short. Like when you need to map over a value wrapped in multiple layers of functors. In such cases, functor mapping alone can‚Äôt compose functions.</p>\n<p>Think of applicative functors and monads as more abstract and powerful versions of functors, designed to cover even the edge cases that basic functors can‚Äôt handle.</p>\n<p>I actually wanted to explain monads in this post too, but explaining monads the same way I explained functors here would require diving deeper into category theory beyond the overview level, so I gave up. <em>(I‚Äôll tackle monads in the next post.)</em></p>\n<p>Understanding the relationship between function composition and functors is admittedly quite abstract and not easy to grasp. Some developers just learn how to use functors and monads and move on with their programming. But personally, I think knowing why these concepts are used and where the ideas came from makes programming a lot more fun.</p>\n<p>This concludes my post: How Can We Safely Compose Functions?</p>","fields":{"slug":"20200127-safety-function-composition-en","path":"/2020/01/27/safety-function-composition/en/","lang":"en"},"frontmatter":{"title":"How Can We Safely Compose Functions?","subTitle":"Functors and monads: the magic that solves the problems ruining function composition","date":"Jan 27, 2020","categories":["Programming","Architecture"],"tags":["Functor","Monad","Functional Programming","Composition","Category Theory","Mathematics"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/d803c/thumbnail1.png","srcSet":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/d803c/thumbnail1.png 320w,\n/static/fe86b5bd480c2654850ae7a9ec8c4aa2/2a1fd/thumbnail1.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/fc5c5/thumbnail1.webp 320w,\n/static/fe86b5bd480c2654850ae7a9ec8c4aa2/e9225/thumbnail1.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/01fb2/thumbnail1.png","srcSet":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/01fb2/thumbnail1.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/fe86b5bd480c2654850ae7a9ec8c4aa2/b384d/thumbnail1.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}],"pageInfo":{"currentPage":2,"pageCount":4}}},"pageContext":{"limit":15,"skip":15,"lang":"en","totalCount":60}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}