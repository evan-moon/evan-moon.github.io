{"componentChunkName":"component---src-templates-posts-page-template-index-tsx","path":"/posts/page/6/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"03540708-a0d9-5ec7-aeab-8d4b9acecffa","tableOfContents":"<ul>\n<li>\n<p><a href=\"#my-original-plan\">My Original Plan</a></p>\n</li>\n<li>\n<p><a href=\"#first-gateway-manifestjson\">First Gateway, Manifest.json</a></p>\n</li>\n<li>\n<p><a href=\"#second-gateway-service-worker\">Second Gateway, Service Worker</a></p>\n<ul>\n<li><a href=\"#development-environment-setup\">Development Environment Setup</a></li>\n<li><a href=\"#writing-service-worker\">Writing Service Worker</a></li>\n<li><a href=\"#installing-service-worker\">Installing Service Worker</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#third-gateway-pushmanager\">Third Gateway, PushManager</a></p>\n<ul>\n<li><a href=\"#start-of-disaster\">Start of Disaster</a></li>\n<li><a href=\"#quick-cut-loss\">Quick Cut-loss</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#fourth-gateway-notification-api\">Fourth Gateway, Notification API</a></p>\n<ul>\n<li><a href=\"#inserting-notification-into-existing-features\">Inserting Notification into Existing Features</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post I want to record my struggle story of adding PWA (Progressive Web Application) features to an existing application in one day at work on Friday, July 5, 2019. PWA is definitely positive for UX, performance, SEO, etc. if you just meticulously handle exceptions for unsupported browsers, so I’d been wanting to try it.","html":"<p>In this post I want to record my struggle story of adding PWA (Progressive Web Application) features to an existing application in one day at work on Friday, July 5, 2019. PWA is definitely positive for UX, performance, SEO, etc. if you just meticulously handle exceptions for unsupported browsers, so I’d been wanting to try it.</p>\n<!-- more -->\n<p>But I kept postponing due to lack of time, until yesterday when I finally got some free time.</p>\n<p>The project I’m currently working on is closely related to the company’s business model, and there are many internal stakeholders related to this feature, so the PO wanted to test more thoroughly.</p>\n<p>So on Friday, specifically speaking, I hotfixed a bug in the morning, researched materials for about an hour after lunch, then ran from about 15:30 to 22:55. Originally I’m the type to work hard during work hours and invest other time in myself so I don’t usually work overtime, but I had only one day given to me so I absolutely had to finish within that, but actually the biggest reason was…</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/acb04/tyson.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAeacpxrNRZehUA//xAAbEAEAAgIDAAAAAAAAAAAAAAABABECAxIiMf/aAAgBAQABBQKsV601MVI7Fj7yYNRbn//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABoQAAICAwAAAAAAAAAAAAAAAAAhARECICL/2gAIAQEABj8CmrOsZEi4Qtf/xAAaEAEAAwADAAAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/IaQV5DR5XUbeiKGKFUpjhHcvPIisiK1n/9oADAMBAAIAAwAAABBb4H7/xAAYEQACAwAAAAAAAAAAAAAAAAABEBEhQf/aAAgBAwEBPxDFJpf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8QI3//xAAcEAEBAAMBAAMAAAAAAAAAAAABEQAhMUFRgaH/2gAIAQEAAT8QF9Ka/HtyzwkXSGU40cW/eVRrsWn7hltvCVzeGPY5pUJ44TWsoGOJ7lz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tyson\" title=\"\" src=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/c08c5/tyson.jpg\" srcset=\"/static/4b791df3dd464ea532b95b6c21f7e0e7/0913d/tyson.jpg 160w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/cb69c/tyson.jpg 320w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/c08c5/tyson.jpg 640w,\n/static/4b791df3dd464ea532b95b6c21f7e0e7/acb04/tyson.jpg 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<blockquote>\n<p>Yes, I underestimated it and got beat up.</p>\n</blockquote>\n<p>I actually have no experience implementing PWA. I’ve run Google’s demos a few times, but the rest I just looked at other experts’ blogs and thought “oh…I want to try too.”</p>\n<p>But looking at what others implemented, the code wasn’t complex and Service Worker’s operating principle didn’t feel that unfamiliar, so I was actually underestimating it.</p>\n<h2 id=\"my-original-plan\" style=\"position:relative;\">My Original Plan<a href=\"#my-original-plan\" aria-label=\"my original plan permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Originally before getting beat up by PWA, I had a decent plan. Of course, I’m not the type who studies in detail before tackling things but just roughly looks then learns the rest by getting hit directly, which contributed.</p>\n<p>Anyway, after eating lunch yesterday and sitting at the office, I quietly thought and concluded “Should I try PWA…? Add Manifest, attach Service Worker, then roughly the rest can be done looking at docs…?”</p>\n<p>Still, implementing all PWA features seemed hard by 19:00 quitting time, so I scoped the work.</p>\n<blockquote>\n<ol>\n<li>Implementing all features seems hard, so first think of it as laying groundwork.</li>\n<li>Install Service Worker.</li>\n<li>Add Manifest.json. Everyone does this, so we should basically do it too.</li>\n<li>Use Pusher SDK and PushManager to show push messages to users even if browser is closed.</li>\n<li>If there’s time, want to try adding application to homescreen on mobile. (Low priority)</li>\n<li>Offline caching next time… (Scope adjustment)</li>\n</ol>\n</blockquote>\n<p>Okay, now that the plan is set, I negotiated with the PO and tester “I’ll go play in my own playground while you test the project,” then branched from master.</p>\n<p>I decisively named the branch <code class=\"language-text\">feature/service-worker-web-push</code> showing my will and started working around 15:30. Still, I thought this would be sufficiently doable in about 4-5 hours…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdSrPFJYcHjMCMH/xAAeEAACAQMFAAAAAAAAAAAAAAAAASECAwQREiIxMv/aAAgBAQABBQKuFumC9xTZrbqMnyPv/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQMYFR/9oACAEBAAY/Aio0fC0bP//EABwQAAMAAgMBAAAAAAAAAAAAAAABESExQYGxcf/aAAgBAQABPyGcD5GlRp8KuEtEIi3kLVRdxZln4aBx2eR//9oADAMBAAIAAwAAABDPF/8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFBcfBhsf/aAAgBAQABPxC5UcBbjFtEpF1DLKYWS+hztSkeXeyy4egbTgYni+R383NXT8n/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"babo\" title=\"\" src=\"/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg\" srcset=\"/static/d1377bc7e60fb06312324f3859994069/0913d/babo.jpg 160w,\n/static/d1377bc7e60fb06312324f3859994069/f93b5/babo.jpg 300w\" sizes=\"(max-width: 300px) 100vw, 300px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>My mental state throughout coding</small>\n</center>\n<p>Consequently, among those I properly achieved only goals 1, 2, 3. For goal 4 push messages, Background messaging just struggled and wasted too much time so I failed and implemented using Notification API to display only in Foreground.</p>\n<p>Initially I tried using FCM (Firebase Cloud Messaging) already used in Soomgo mobile app, but that would dualize the web client’s push channels, so I tried implementing using only Service Worker’s <code class=\"language-text\">PushManager</code> without FCM to test.</p>\n<p>Now let me explain what problems I encountered while working on these and how I solved them.</p>\n<h2 id=\"first-gateway-manifestjson\" style=\"position:relative;\">First Gateway, Manifest.json<a href=\"#first-gateway-manifestjson\" aria-label=\"first gateway manifestjson permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The first thing I did was create <code class=\"language-text\">manifest.json</code>. This is just literally create it. Also <code class=\"language-text\">manifest.json</code> is anyway a static file and not frequently updated, so it doesn’t need Express responses. So I created <code class=\"language-text\">manifest.json</code> in the project’s <code class=\"language-text\">static</code> directory and wrote it so nginx responds directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// static/manifest.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Soomgo\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"short_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Soomgo\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/1x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"48x48\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/2x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"64x64\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/3x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"128x128\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://d1hhkexwnh74v.cloudfront.net/app_icons/3x.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"144x144\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"start_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/?pwa=true\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"display\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fullscreen\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#FFFFFF\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"theme_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#00C7AE\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I wrote detailed content about <code class=\"language-text\">manifest.json</code> referring to Google Web Developer documentation’s <a href=\"https://developers.google.com/web/fundamentals/web-app-manifest/\" target=\"_blank\" rel=\"nofollow\">The Web App Manifest</a>.</p>\n<p>And those icons are icons currently used in Soomgo app. There’s no reason to use different icons from mobile app, and designers were busy and mentally drained, so I felt too sorry to ask them to make icons because of my technical greed.</p>\n<p>Also I thought using same icons for app and web would be good for branding, so I cloned the mobile app repository and secretly stole them. And those images don’t need to be stored in the project, so I uploaded to the S3 bucket the company uses and delivered via CloudFront.</p>\n<p>As explained above, I chose the method where nginx handles <code class=\"language-text\">manifest.json</code> requests rather than Express - if you want nginx to serve without tossing requests to server application like this, just add simple settings.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token directive\"><span class=\"token keyword\">location</span> ~ ^/static</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">root</span> /your/project/location</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  ...\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Configuring like this directly accesses the project’s <code class=\"language-text\">static</code> directory. The above setting means “when requests starting with static path come in, find it yourself at <code class=\"language-text\">/your/project/location</code>.” But when using dev server locally, we don’t use nginx but use NodeJS to directly run dev server, so in local environments Express must directly serve files.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/static'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Now just add one <code class=\"language-text\">link</code> tag to tell the browser “my Manifest file is here so take it” and done.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// constants/meta.constant.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rel</span><span class=\"token operator\">:</span> <span class=\"token string\">'manifest'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">href</span><span class=\"token operator\">:</span> <span class=\"token string\">'/static/manifest.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>manifest<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/manifest.json<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-vue-meta</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Since I’m using the vue-meta library, returning Object type objects like this automatically puts it inside <code class=\"language-text\">&lt;head></code> when rendering. Then you can check if the browser properly takes <code class=\"language-text\">manifest.json</code> in Chrome DevTools’ Application > Manifest tab.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 505px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3ElEQVR42p2UT0vjUBTFCw64czHjwmqnNv9e0uSlTaJNUiwt1sERFUZwKMN8Nr+B4pQR3MxiFi6EWc3eD3O852kLgqDJ4vLeS+B37zn3vtfwfR9ZlmEwGMDzPLiuuwyeq0aDwCRJDJQfut0uwjBEFOlaUAN0HMeEUgpaa/R6PfQlSW0gN0EQmErjWJs1TTO4kqQWkJUxCF3s1XOiWsA8zzGZTDAej42H/LEAe56qDqRX9DCKIuOflqaUkqQoCtOgKl4ugVx1HCMWqEr62JFqh+XQfKsMpDRKZYd1GCFME+yORjKbOUJJUAlIGGWlaWqABBcy5NPpAfJiaM61JPMQizx6yCSdzjZsy6o8i8s5XMgmlBVzsGOB1xob27ZNl7nvs8sCLfdG2C1KeErVu8v0zzwK/MEb0mrBlVBODclsSPw8HoFU5MjYbJyfwfr5HXYinla4gi8kK7l6O+Lf5uEhBv/ucfLwH+tfpwg6Fjx6TflvWPCiKWxEJnPXnuxjen2D/u9faA5LhBtN+O1t+J/bZn0X0DyuEr6Ek6T4OJvh048Ztr6dYuvkCM3TI9kfo3X85ala9x1AvjCpjI4lklfml1i5uULj9hKrf66x9neOxt0cH+YXcHr6qXGvyH8E5xc3GuSQDZIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"has manifest\" title=\"\" src=\"/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png\" srcset=\"/static/6752d69a5efe962003e820272d2ac7f7/69538/has-manifest.png 160w,\n/static/6752d69a5efe962003e820272d2ac7f7/72799/has-manifest.png 320w,\n/static/6752d69a5efe962003e820272d2ac7f7/c0cb9/has-manifest.png 505w\" sizes=\"(max-width: 505px) 100vw, 505px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>Okay, this took about 10 minutes. So far things were flowing smoothly according to my plan. But problems start now…</p>\n<h2 id=\"second-gateway-service-worker\" style=\"position:relative;\">Second Gateway, Service Worker<a href=\"#second-gateway-service-worker\" aria-label=\"second gateway service worker permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>After happily having a cup of coffee, I started work applying Service Worker. Service Worker is a process that runs in the background after installing in the browser, operating completely separately from web application’s main logic.</p>\n<p>Service Worker and webapp’s main logic operate by exchanging messages. Send with <code class=\"language-text\">postMessage</code>, receive with <code class=\"language-text\">onMessage</code> - same method as WebView or Chrome Extension, so already familiar to us.</p>\n<p>However, since not yet supported in all browsers, you must check if <code class=\"language-text\">serviceWorker</code> object exists inside <code class=\"language-text\">navigator</code> global object before proceeding with initialization.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* ... */</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Well, this level is so familiar to frontend developers like me we can just laugh it off, but something more annoying existed. Exactly Service Worker’s development environment setup.</p>\n<h3 id=\"development-environment-setup\" style=\"position:relative;\">Development Environment Setup<a href=\"#development-environment-setup\" aria-label=\"development environment setup permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Since Service Worker can access more features than typical web applications, security is extremely important. So Service Worker was made to operate only in restricted environments - exactly two conditions.</p>\n<hr>\n<ol>\n<li>Web application’s host is localhost or</li>\n<li>Using HTTPS protocol</li>\n</ol>\n<hr>\n<p>Unfortunately I don’t satisfy either. My company uses origin <code class=\"language-text\">http://local.soomgo.com</code> locally, so Service Worker object isn’t activated.</p>\n<p>Then solutions narrow to two. I access localhost or attach HTTPS locally.</p>\n<p>Actually I missed this and wasted about 30 minutes arguing with my computer like “ah where’s Service Worker? Why not working? Want to die?” Since it’s content written in Korean on official docs, always read official docs meticulously…</p>\n<h4 id=\"run-dev-server-on-https\" style=\"position:relative;\">Run Dev Server on HTTPS!<a href=\"#run-dev-server-on-https\" aria-label=\"run dev server on https permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Since I’d have to change even the Access-Control-Allow-Origin header backend sends when allowing CORS if I accessed localhost dev environment, I just decided to attach HTTPS to dev environment.</p>\n<p>Express supports HTTPS object as built-in object, so can setup simply. First, since SSH key pair is needed to use HTTPS, I made keys using <code class=\"language-text\">openssl</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ openssl genrsa <span class=\"token number\">1024</span> <span class=\"token operator\">></span> private.pem <span class=\"token comment\"># Generate private key</span>\n<span class=\"token punctuation\">..</span>.\n$ openssl req <span class=\"token parameter variable\">-x509</span> <span class=\"token parameter variable\">-new</span> <span class=\"token parameter variable\">-key</span> private.pem <span class=\"token operator\">></span> public.pem <span class=\"token comment\"># Generate public key</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Then just save this key somewhere appropriate in the project and use it, but there’s a caution here.</p>\n<blockquote>\n<p>> Generated ssh keys should only be used in local dev environment.<br />\n> *.pem files in this directory are added to gitignore.</p>\n<p><strong>/keys/README.md</strong></p>\n</blockquote>\n<p><strong>Never upload SSH keys to remote repository.</strong> Security breaks. Of course, since this key doesn’t actually authenticate anything important but only uses it in local dev server, there’s no worry of important things getting stolen, but habits matter. Handle SSH keys like handling bombs.</p>\n<p>Instead, I wrote <code class=\"language-text\">README.md</code> inside the directory storing keys in the project so other developers can easily setup HTTPS environment, detailing what purpose this key will be used for and what cautions are.</p>\n<p>And since sometimes you might need HTTP not HTTPS when developing, I allowed selecting protocol using options when running dev server.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=local node server\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"serve:https\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=local node server --https\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// server.js</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// node options are contained in process.argv as array</span>\n<span class=\"token keyword\">const</span> useHttps <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span> <span class=\"token operator\">=></span> val <span class=\"token operator\">===</span> <span class=\"token string\">'--https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLocal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> localApp <span class=\"token operator\">=</span> app<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>useHttps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    localApp <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Use the generated key here!</span>\n      <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./keys/private.pem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">cert</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./keys/public.pem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  localApp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> host<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>isHttps <span class=\"token operator\">?</span> <span class=\"token string\">'https://'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'http://'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>host<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>port<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Let's go!!!!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Writing like this lets you freely change desired protocols when running dev server, so even if I changed dev server to HTTPS and dev server won’t run on other developers’ computers, you can at least buy time and fix bugs.</p>\n<p>Real experts expect where they’ll get hit before getting hit and tense up in advance. <small>(One person who’s been hit a lot)</small></p>\n<p>Running dev server on HTTPS, now you can see the <code class=\"language-text\">serviceWorker</code> object prettily inside the <code class=\"language-text\">navigator</code> object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token operator\">></span> navigator<span class=\"token punctuation\">.</span>serviceWorker\n<span class=\"token operator\">&lt;</span> ServiceWorkerContainer <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">ready</span><span class=\"token operator\">:</span> Promise<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">controller</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">oncontrollerchange</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">onmessage</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4 id=\"avoiding-problems-without-using-https\" style=\"position:relative;\">Avoiding Problems Without Using HTTPS<a href=\"#avoiding-problems-without-using-https\" aria-label=\"avoiding problems without using https permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Actually at first I found this trick while researching because attaching HTTPS locally was annoying - there’s a method to use Service Worker without using HTTPS even on local server.</p>\n<p>Enabling Chrome Flag’s <a href=\"chrome://flags/#unsafely-treat-insecure-origin-as-secure\" target=\"_blank\" rel=\"nofollow\">unsafely-treat-insecure-origin-as-secure</a> setting and entering desired host in the text field makes that host judged safe, allowing Service Worker use.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b815361813e64140e4a33b94ccc0a44f/0f586/secure-hack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFUlEQVR42m2Qy07CQBhGeQti0AjhYlLamRZmesESWgoFpCXGxKVLEx7AvQs3hqWJLHwDVz7icVoSNro4Od+/+W+N8n7G8bjm4yM3rPk8rjgcFiitcMQI4Y4RclxbugrX06YeYTvuH6yhoKG0piwW7MoluyKn2GYUxZJ0viBJKzLm2ZI4nuEHEdEkRusAx5EMbXFqJjyT5amhGIUE+QNyukHEq9rS2AuzGumn5yx0gjRU+cZWPO7feX795unli/3bD1FS0uiKiIttTvMupbk2FBnN5JbWdY9Wu0+r0699WdEZnGh3ueoJvMkGf5KhwhR/usKRioYlfFw9R6pqelpv4BoLw8AJ6dvBvwzMIpZt/mbZ5lTn7F9yj6eT/mq1sAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"secure hack\" title=\"\" src=\"/static/b815361813e64140e4a33b94ccc0a44f/6af66/secure-hack.png\" srcset=\"/static/b815361813e64140e4a33b94ccc0a44f/69538/secure-hack.png 160w,\n/static/b815361813e64140e4a33b94ccc0a44f/72799/secure-hack.png 320w,\n/static/b815361813e64140e4a33b94ccc0a44f/6af66/secure-hack.png 640w,\n/static/b815361813e64140e4a33b94ccc0a44f/d9199/secure-hack.png 960w,\n/static/b815361813e64140e4a33b94ccc0a44f/21b4d/secure-hack.png 1280w,\n/static/b815361813e64140e4a33b94ccc0a44f/0f586/secure-hack.png 1498w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>After registering like this, clicking the <code class=\"language-text\">Relaunch Now</code> button at the bottom restarts Chrome and changes settings. But I ultimately didn’t use this method because it felt uncomfortable creating security vulnerabilities myself.</p>\n<h3 id=\"writing-service-worker\" style=\"position:relative;\">Writing Service Worker<a href=\"#writing-service-worker\" aria-label=\"writing service worker permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now that dev environment setup is complete, nothing’s particularly annoying from here. Just write while looking at docs. First, before implementing Service Worker features, I needed to check if it works well, so I made a Service Worker with no content first.</p>\n<p>But like <code class=\"language-text\">manifest.json</code>, if I just write this completely separated as <code class=\"language-text\">static/service-worker.js</code> from the web application, it’s convenient when making but later when wanting to access modules or data used in web application from Service Worker, it seemed very ambiguous, so I decided to just build together using Webpack.</p>\n<h4 id=\"first-make-service-workerjs-file\" style=\"position:relative;\">First make service-worker.js file!<a href=\"#first-make-service-workerjs-file\" aria-label=\"first make service workerjs file permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Even building with Webpack, since this friend doesn’t create something from nothing, naturally source files must exist. First, since the goal is seeing Service Worker work, I wrote it simply.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/service-worker.js</span>\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Sent from that table -> '</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"using-service-worker-webpack-plugin\" style=\"position:relative;\">Using Service Worker Webpack Plugin<a href=\"#using-service-worker-webpack-plugin\" aria-label=\"using service worker webpack plugin permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">ServiceWorkerWebpackPlugin</code> is the plugin appearing at the top when searching “Service Worker Webpack” on Google. Let’s all visit the <a href=\"https://github.com/oliviertassinari/serviceworker-webpack-plugin\" target=\"_blank\" rel=\"nofollow\">Github repository</a> and look around.</p>\n<p>Reading the README, usage is super simple itself. Just put it in Webpack settings and done.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// build/webpack.client.config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>baseConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServiceWorkerWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../src/service-worker.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Marking the Service Worker file path and passing it as initial argument when creating <code class=\"language-text\">ServiceWorkerWebpackPlugin</code> object creates <code class=\"language-text\">sw.js</code> file at the path defined in Webpack config’s <code class=\"language-text\">output</code>. Of course this file name can be changed, so everyone give it pretty names full of affection according to each taste. I’ll just go with <code class=\"language-text\">sw.js</code> because I’m lazy.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 309px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.750000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVR42oWQy07DMBBF/TlUie24NIkfsWOlkESlXYNYI7Ys+AQ+/DKeVuqilbo4mpE1PnNtoZXH0nkYE1C3CbKNkNsBsktca+kfU3vIJjDCkPC769H5Ec37EebjCL3OMJ8nrmX4obByUD5DDRmi3Xn8fkVYP6CydOhG1Dpch1UhXPu7CR3kc2SE6wP+fiJcpie+LWgOM6oytLFnniyqwsZxLWnuJZR94jBiazySD2gt/VveQ1NsnSeoifo9sbyioUVqnLgvf3sjvQilvQhfEgldhKKLejpLWLiS7LAwepnRnFa+dCMsT95FXvYP50rEEU2GbqEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"sw\" title=\"\" src=\"/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png\" srcset=\"/static/d8c4a05ba385d071d692080e75d2241d/69538/sw.png 160w,\n/static/d8c4a05ba385d071d692080e75d2241d/532e8/sw.png 309w\" sizes=\"(max-width: 309px) 100vw, 309px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Prettily born sw.js</small>\n</center>\n<p>But this method has a disadvantage - file size becomes larger than typical Service Workers. Since building with Webpack pulls modules or libraries outside Service Worker.</p>\n<p>Well, this was a situation I chose to write somewhat conveniently anyway, so can’t help it. Anyway since there’s this disadvantage, readers wanting to reduce Service Worker size might be better off writing directly.</p>\n<p>Now that I made Service Worker’s body, only remains telling the browser “I have Service Worker!” when web application initializes.</p>\n<h3 id=\"installing-service-worker\" style=\"position:relative;\">Installing Service Worker<a href=\"#installing-service-worker\" aria-label=\"installing service worker permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Installing Service Worker is simple. Check if this browser supports <code class=\"language-text\">serviceWorker</code> object, then install.</p>\n<p>Typical Service Worker installation method just follows Google’s <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/?hl=ko\" target=\"_blank\" rel=\"nofollow\">Service Workers: an Introduction</a> documentation. Since I used <code class=\"language-text\">ServiceWorkerWebpackPlugin</code>, I wrote referring to that plugin’s documentation.</p>\n<p>Anyway, installation itself isn’t that difficult whatever method used.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// settings/service-worker.setting.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isSupported <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isSupported<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Browser supporting Service Worker.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> runtime <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serviceworker-webpack-plugin/lib/runtime'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  runtime<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Service Worker installation success ->'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>e <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Service Worker installation failed ㅜㅜ -> '</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The reason for checking <code class=\"language-text\">process.browser</code> value in <code class=\"language-text\">isSupported</code> variable is because Soomgo’s application runs in Universal SSR environment like Next.js or Nuxt.js.</p>\n<p>If curious what Universal SSR is, read my previous post <a href=\"/2018/09/25/universal-ssr\">What is Universal Server Side Rendering?</a>.</p>\n<p>That module obviously only calls on client side, but still just in case, it’s good to check if current execution context is client or server. Naturally errors occur if trying to access browser API <code class=\"language-text\">navigator</code> during server-side rendering cycle.</p>\n<p>If Service Worker installation succeeded, your Service Worker will be exposed at <a href=\"chrome://inspect/#service-workers\" target=\"_blank\" rel=\"nofollow\">chrome://inspect/#service-workers</a> or <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>. Method of applying Service Worker is actually quite simple.</p>\n<p>But actually the part that consumed most time for me was exactly this Service Worker - the reason is written in Service Worker official docs.</p>\n<blockquote>\n<p><strong>Lack of Installation Failure Notification</strong></p>\n<p>If Service Worker registers but doesn’t display at <a href=\"chrome://inspect/#service-workers\" target=\"_blank\" rel=\"nofollow\">chrome://inspect/#service-workers</a> or <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>, an error occurred or you passed a rejected promise to <code class=\"language-text\">event.waitUntil()</code> so installation failed.</p>\n<p>To solve this problem, go to <a href=\"chrome://serviceworker-internals\" target=\"_blank\" rel=\"nofollow\">chrome://serviceworker-internals</a>, select ‘Open DevTools window and pause JavaScript execution on service worker startup for debugging’, and add debugger statement at install event’s start position. Using this option with <a href=\"https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints?hl=ko\" target=\"_blank\" rel=\"nofollow\">pause on uncaught exceptions</a> can find problems.</p>\n<p><strong>Matt Gaunt</strong> <em>contributor to WebFundamentals</em></p>\n</blockquote>\n<p>Man, debugging this is really hard. If Service Worker installation failed, it should show where error occurred, why it occurred, but just shows one <code class=\"language-text\">Uncaught DomException</code> and ends.</p>\n<p>So you must mark <code class=\"language-text\">debugger</code> on each code line and infer and fix what went wrong - this is really hard. But they brazenly wrote debugging is hard on official docs, which somehow makes it feel harder.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFVklEQVR42i2UW1CU5x3Gv/f9vt1lgbAgsMuyCLscdlGWwy4LLEcBcSEuEBUVMBBMPFAVNRqPoxFzUoxTT9EiMbUaiHaSeiCotUkm6UzbybTptE7bTA9pvelMbtppe5Gr3vz6r+3Ff77v5v19z/v9n+cxdIoX7fSj00MoVzUqqw6V3YJyJ7Dy+8jy9+AtSZAflPfyMczQIYzyE6jwKYyqc6jIJXT0Mrr2Cjr+PQyVHkRnVGJkxbDlxnHkdWJ4n8HKS7C4IERlwMdSn5uKAjc1xT4qK9vIr9lOfmSCRTWHBDSNis9ha54jreM9DJ0ZxcxuwhBF9uwYmTklmL4B7I5FpJiavOwsij0eCnNyCRcVUOP3koj6idUlcda/ha3xHVLbv09Gxw18KwWoctvRnh60dzXKuwbLFcSe6sZm2jC1nXSnU4Bu/Lm5lHk9REsD9NRXsyxcREnTLtJX3MHTPcfyHfe5vPAXUejtRxcMoorG0IGtmIWj2Jx52LSJ3XSgDBNPVibVpX5yMzJorQoysaaNxoYERUt7iW+8zdR7X/KTP/yLS/N/FIUCUAJSpbvRwX2YFW9gebqwGQapKWmERVG0rIhnWmNkP5VOQ7yFgzvGCcWG+daxOT5+9DU3f/w1yRfvkdl6UYClO1Ghg+glk+jwFKrmMvaKVzAMG7HyAKP9XSxPJDl3fB9b+xp5d2o/81ffYvb+Fzz41d8ZmfyUvK4rOOrOYK+dEqCAVOUUuvoCKjqDWX8do+4Wfat3cn5nko+mD/PJjQv89tZpHt86zu9n9zJ7bY4907+juP86joYLOKKnhSEiQvsFWHUWHZlBx66hGm6iW97HWLZA7fpZLh8e5+G53Xx+5SUe357kr/OTzJ1/k/KBm6TEp7HFzmCLnEBXHJVbvogu3iJLqb0qPrqBav4Ae8ddXD33yEl+SO7K2zQOTtPcMczmoVXMHnmO60e24V1+Eav+O9ijp9CiSoUOoEu3o/xjqIK1orDpfWztd3iqe4Hs5D3cyXkat37C0ZlfEl6+k4H+AX50fhcTyxoYro+TVbUNIyyqlh5Gl8kiA5vRhUNoSZVyd2GkJxbI6b2Pu/dDqkYfcmDmEZ8//jeTlx7Q3T3AByfHuXpwkJMTQ7x0+BjNnYN4JSVGYBxdNIL2rUHliY9z2tCLYhKQ3nuUDz9k+9lf89Fv/inzDzaeekR85SH5d3v56gev8OqmJHfeeJ6FM7t5cHEfvX2b5eBaLG8vpgTDXBRHZ1ZjZpRjjLz+c+Z/8Td++qdvOPj2lwTX3cWIXmVs08t8MTPO3RMv8O2JNewfW8uKFeuINA8JqA9DvKolsjorIqAKKZdidNpijJ999Q2nbv6ZqpEf4mx9F3vTFVTsEq66E4wPb2Dr6qdJJAYINW9kSeMwodo+nPntqMxatCssoDIBFUpj5aMdbozW7Z+RJuE2G6/J9qSGImfE4K9hBA9hL53AVbgMf00/JZF+AhUd1LQN4w52Y6SWYaaJKqdPQB5Mew6mlYFhNc9KY3wXM3pBbHASteRl2d4e2d4WHIH1LGnaQHXnJlE3QmXTEA1dz1MQ7sVI8WE6PVj2bCybC9NMRUv2DVV7EV11WmxwDCVZ1sXbnhSEkbeKjMDTRNpHCTaNUBp/lpbujRw4cpZgTY8cdGGzu7Asp8AcMvYnY+iK19HSwrpkxxNz6oL14qmkFG4rJdVJ+ga3sGrDXjpX76Gl5znePDdLXb34zdACTJVrCsyyY2mpO2XJh/5rTv8m9OIhlIB0bqcUbhwlLZ7pi9Kzch3HXz3PkaOn2fXCKE0Nbdgc6f9TJDBLnpaAzP/PfwDrN8WrTqXoQAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"conan\" title=\"\" src=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png\" srcset=\"/static/e57b6ba2e83f7ede90d76af1007b9b33/69538/conan.png 160w,\n/static/e57b6ba2e83f7ede90d76af1007b9b33/72799/conan.png 320w,\n/static/e57b6ba2e83f7ede90d76af1007b9b33/8574c/conan.png 436w\" sizes=\"(max-width: 436px) 100vw, 436px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Help me detective... find not just culprits but my bugs too...</small>\n</center>\n<h2 id=\"third-gateway-pushmanager\" style=\"position:relative;\">Third Gateway, PushManager<a href=\"#third-gateway-pushmanager\" aria-label=\"third gateway pushmanager permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now that Service Worker is installed, connecting Service Worker’s <code class=\"language-text\">PushManager</code> finishes everything! I thought, but this guy was also unexpected.</p>\n<p>Since <code class=\"language-text\">PushManager</code> isn’t yet standard either, it’s not supported in all browsers, so when installing Service Worker you must also check <code class=\"language-text\">PushManager</code>’s existence.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// settings/service-worker.setting.js</span>\n<span class=\"token keyword\">const</span> isSupported <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'PushManager'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Condition readability dropped a bit which bothers me, but since it’s operation testing for now I just passed. Right after doing up to here and looking at the next step…</p>\n<h3 id=\"start-of-disaster\" style=\"position:relative;\">Start of Disaster<a href=\"#start-of-disaster\" aria-label=\"start of disaster permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<blockquote>\n<p><strong>Getting Application Server Key</strong></p>\n<p>To work with this codelab, you need to generate some application server keys, which can be generated at helper site <a href=\"https://web-push-codelab.glitch.me/\" target=\"_blank\" rel=\"nofollow\">https://web-push-codelab.glitch.me/</a>.</p>\n<p>Here you can generate public and private key pairs.</p>\n<p>Copy the public key to <code class=\"language-text\">scripts/main.js</code> like this and change the <code class=\"language-text\">&lt;Your Public Key></code> value:</p>\n<p><code class=\"language-text\">const applicationServerPublicKey = '&lt;Your Public Key>';</code></p>\n<p>Note: Never put private keys in web apps!</p>\n<p><strong>Matt Gaunt</strong> <em><a href=\"https://developers.google.com/web/fundamentals/codelabs/push-notifications/?hl=ko\" target=\"_blank\" rel=\"nofollow\">Adding Push Notifications to Web Apps</a></em></p>\n</blockquote>\n<p>Huh…? SSH keys needed…? Though unexpected, since it’s one more communication channel between server and client in HTTPS environment, SSH keys being needed seemed right so I quickly accepted.</p>\n<p>Looking at Google’s official doc example subscribing to push channels with PushManager, SSH keys were definitely needed.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">subscribeUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> applicationServerKey <span class=\"token operator\">=</span> <span class=\"token function\">urlB64ToUint8Array</span><span class=\"token punctuation\">(</span>applicationServerPublicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  swRegistration<span class=\"token punctuation\">.</span>pushManager<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">userVisibleOnly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">applicationServerKey</span><span class=\"token operator\">:</span> applicationServerKey\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Well, unexpected but this level is okay. Anyway already using <a href=\"https://pusher.com/\" target=\"_blank\" rel=\"nofollow\">Pusher</a> push solution which ultimately works on same principle, so internally it probably used authentication using SSH key pairs.</p>\n<h3 id=\"quick-cut-loss\" style=\"position:relative;\">Quick Cut-loss<a href=\"#quick-cut-loss\" aria-label=\"quick cut loss permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>So searching where SSH keys used in Pusher are for about 20 minutes… ultimately couldn’t find.</p>\n<p>Pusher internally authenticates using <code class=\"language-text\">secret</code> value used on server and <code class=\"language-text\">key</code> used on client - this wasn’t SSH key pairs but just arbitrary strings.</p>\n<p>Anyway even making SSH keys, backend has control over web push, so testing alone touching this and that is a bit much. Plus quitting time already long passed so backend folks left work. <small>(Actually doing this on Friday evening is the weird part.)</small></p>\n<p>By then my mental was already a bit out, so I concluded I should ask after coming to work Monday how mobile app uses Pusher integrated with FCM and proceed, then changed direction.</p>\n<p>Looking at commit logs, this time was roughly 21:40… no but still gotta leave work… gotta go home…</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACCElEQVR42nVTSWtyQRB8f9pbQMSLePAm3gRRL+4xl0RBBXEX92hc4hLEPUo0hmjUCtUwId+HGWjmvZmemq6qHu3r6wvX4nQ6oV6vY7Vayf/Hx4esHY/Hn3h8fESj0UAqlUK320W73YZ2uVzwOzgI8Pn5KQnn81nWOBNE5ai15+dnlEol5HI59Hq9fwHV4c1mg2KxiJeXF/mfzWaIRCLw+/2Ix+N4enrC6+ur7HFmdZVKBdFo9Drg+/s7Wq0WRqMRttstbm9vYbFYoNfrcXNzA51OB6/XK7nT6RTNZhN3d3dwu93QCPJ/EJyUh8OhUDGbzQgEAjAajQiHw6hWq0JfVZjP52G1WmGz2aApPX5ryHE4HITKYrFAMBiEw+GQAy6XS6qnQRzz+RzpdFoksdvt0CaTiVCjTvzu9/sYDAbY7/fodDpygEGD6OhyuRTHyYSXZrNZ2bu/v0csFoNG8QuFgriVTCZF9Ewm8wOoAHw+n2jFfO7tdjuhTbq1Wu2nhTRlBmfVg8qc8Xgsjr69vYl2iURCQGkSGamOoLvUmsw0BfZXP7JqAj48PMDpdIp+7Lv1ei3G0WVeRtPYVto1MIYSna+FIBx8NTRJMeBFrI5UDQYDTCbT34AqWCUroJ7lclncJE1qTt34Olgxe5R5V/uQoSpkRXSQutE8GkAt2ch0nxeGQiF4PB5Z/wYETq25vc6tLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"giveup\" title=\"\" src=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png\" srcset=\"/static/4bb0a72bb04f73e4997f67a28c30bbba/69538/giveup.png 160w,\n/static/4bb0a72bb04f73e4997f67a28c30bbba/72799/giveup.png 320w,\n/static/4bb0a72bb04f73e4997f67a28c30bbba/e3b18/giveup.png 439w\" sizes=\"(max-width: 439px) 100vw, 439px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Indeed when it doesn't seem right, quick cut-loss is the answer...</small>\n</center>\n<h2 id=\"fourth-gateway-notification-api\" style=\"position:relative;\">Fourth Gateway, Notification API<a href=\"#fourth-gateway-notification-api\" aria-label=\"fourth gateway notification api permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So the changed direction was “give up Background push messages and at least properly receive Foreground push messages.”</p>\n<p>This way I can’t achieve what I initially thought “want to show push messages even if browser is closed,” but if browser is on and connected to soomgo.com, users can see push messages whether they minimized the window or are doing other things, so it somewhat achieves the goal.</p>\n<p>After changing direction, it became simple work of just adding code showing notifications to push logic already implemented in existing web application. Anyway, authentication, event subscription logic etc. using Pusher were already all made when developing chat features before.</p>\n<h3 id=\"inserting-notification-into-existing-features\" style=\"position:relative;\">Inserting Notification into Existing Features<a href=\"#inserting-notification-into-existing-features\" aria-label=\"inserting notification into existing features permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Since I made a helper class wrapping Pusher SDK once when developing chat features before, the structure is solid. Now just add a few methods here and show notifications when web push events occur.</p>\n<p>First need a method checking if this browser supports <code class=\"language-text\">Notification</code> API.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/helpers/Pusher.js</span>\n<span class=\"token function\">isSupportNotification</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> process<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">&amp;&amp;</span> window <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'Notification'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Next write a method getting notification permission from users. <code class=\"language-text\">Notification</code> has <code class=\"language-text\">permission</code> property inside, and this property divides into <code class=\"language-text\">granted</code>, <code class=\"language-text\">denied</code>, <code class=\"language-text\">default</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/helpers/Pusher.js</span>\n<span class=\"token function\">getNotificationPermission</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSupportNotification</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'not_supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">'denied'</span> <span class=\"token operator\">||</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">granted</code> is state where user already allowed notifications, <code class=\"language-text\">denied</code> is rejected state, <code class=\"language-text\">default</code> is state where user hasn’t decided yet whether to give notification permission.</p>\n<p>Therefore we must use <code class=\"language-text\">Notification.requestPermission</code> method when permission is <code class=\"language-text\">default</code> state to get permission from users to display notifications.</p>\n<p>Now let’s write a method actually displaying notification windows. Since <code class=\"language-text\">Notification</code> API itself is so simple, it’s not that difficult.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">createForegroundNotification</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> body<span class=\"token punctuation\">,</span> icon<span class=\"token punctuation\">,</span> link <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> notification <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> icon <span class=\"token operator\">||</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>AssetsCloudFrontHost<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/app_icons/1x.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onshow</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> notification<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  notification<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">,</span> <span class=\"token string\">'_blank'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Creating <code class=\"language-text\">Notification</code> object using <code class=\"language-text\">new</code> keyword immediately displays notification message at screen top-right on OSX, bottom-right on Windows. Then just register handlers to created <code class=\"language-text\">Notification</code> object’s event listeners like <code class=\"language-text\">onshow</code>, <code class=\"language-text\">onclick</code>.</p>\n<p>I decided the method name as <code class=\"language-text\">createForegroundNotification</code> containing my sadness of not realizing Background messaging. The reason for emphasizing Foreground is containing my ambition to someday make <code class=\"language-text\">createBackgroundNotification</code> method.</p>\n<p>Now that I made everything needed, just connect so notifications work whenever sending pushes through Web Socket in Pusher SDK.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token function\">subscribeNotification</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSupportNotification</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNotificationPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isAllowNotification<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> channel <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPrivateUserChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">channel</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myUserId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> targetChatRoute <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>provider <span class=\"token operator\">?</span> <span class=\"token string\">'chats'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'pro/chats'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createForegroundNotification</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> sent a message.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>profile_image<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetChatRoute<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>response<span class=\"token punctuation\">.</span>chat<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Pusher SDK provides features binding event handlers to push channels. <code class=\"language-text\">message</code> event is an event called when users receive chat messages. But since events are called indiscriminately even for messages you sent yourself, I processed not showing notifications for messages you sent through the <code class=\"language-text\">response.sender.id === this.myUserId</code> condition.</p>\n<p>Next, so users can easily know what’s happening just from small notification messages, create <code class=\"language-text\">Notification</code> object using format title “OOO sent a message,” message content, and opponent’s profile picture, and done.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 499px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/32c54805c2f49dd0192728224f674405/119c7/push.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.12499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42o1R3WuSURh//6cgGOh01YVm+qrDm2mWi6gb16K6qGW4BVpBFwVtXQZhSdNXC+bqIvDGa8UPChkEsiFuil/z8/34dc5598Y0lj3w45zznOfj93sezmAwQINer4dOp4OR3C8sLKj++XmG+VMwGo0TUPPVP46320Fhdzjg8VyFz+eDjbfBcPESLDzP/DZyOhxO8DbyJrEWiwVms5nBZDLh8hUrzFYrXC4XuHPn50AxpzMgFH6G1E4Kd+77EVy9jrXAAzwKbuDh4wCC6xsIhcIIh8Ok6Q243W5CwIMlQuJ9LIrk1y94+eo1uDebm6DY2nqLSCQCYTuGa6u3cfPeEu6u3EJg/SnWngTg969g2bcMr9cLnrfDubgIp5OwJgrefYpC+LaD0Ivn4IrFIigKhQKy2SxyuRx2d1OIfPiIWDyBRDJJzjhiyc+IJgTEY3EkiS9OfIlEAoIgQCDndjyGdDoNDrNMUdgh12rA/gFq7Sb2qwfMNx6PIcvyH1Dj6EUhSadBfZIkqRBFSCSwWSoB5TL2jmoo/dqDSP7q9To6nQ7a7Ta63S5GoxG46UJaJ+WEmXaXacyUf1KIWoM77vVYIGWjBQ+HQ9ax3++j1Wqxt6pbnhjDtDImuU8LkgedhxZUJtLy+TxbUCaTQaVS+Yv1Wca1JBFNcYy+IrPO/5P0z4LfW4co9No4Gg9PVMlMJh00RbPZnNmEjktTyA3IFkeKhAFhShPpJ5WqgUoXScxZi6BGG1erVbXgMRl8/ucPHDYabAmUIQ1okLe28VlG2Q0GA1bwN33ZqDFqNl5aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"push\" title=\"\" src=\"/static/32c54805c2f49dd0192728224f674405/119c7/push.png\" srcset=\"/static/32c54805c2f49dd0192728224f674405/69538/push.png 160w,\n/static/32c54805c2f49dd0192728224f674405/72799/push.png 320w,\n/static/32c54805c2f49dd0192728224f674405/119c7/push.png 499w\" sizes=\"(max-width: 499px) 100vw, 499px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Message showing my mental state unfiltered...sob...</small>\n</center>\n<p>Anyway like this, if soomgo.com is open in browser, users can immediately check new chat messages within desktop without continuously checking pages or checking phones while doing other things.</p>\n<p>Still disappointing not being able to immediately show push messages in Background state. But I think even this level is quite convenient from users’ perspective.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Actually felt unsatisfied not achieving everything initially targeted, but was too tired so decided to look forward to next time. Now planning to come to work Monday, show this to PO, ask if there’s anything to add, do some testing, then deploy.</p>\n<p>Adding <code class=\"language-text\">fetch</code> event handler to Service Worker also enables Add to Homescreen feature, but actually Soomgo’s frontend chapter’s official position is wanting users to use mobile app more than mobile web, so I’m pondering whether to do this. <small><del>(Don’t want to cross-browser in-app browsers…)</del></small></p>\n<p>First, I think I scoped too largely at first. Wish I’d looked into things more detail by detail before working, but had urgent feelings having to immediately work on ongoing project again from Monday. And since the company lacks frontend developers, attaching such technical features is low priority, so I think I had big feelings like “if not now, don’t know when I can do this later.”</p>\n<p>Using an intermission, I’ll finish the post while spreading <a href=\"https://www.wanted.co.kr/wd/14044\" target=\"_blank\" rel=\"nofollow\">JD recruiting frontend developers to work with me</a>.</p>\n<p>Besides PWA there’s lots I want to do but can’t because frontend developers are lacking, so anyone who likes fun things regardless of experience is fine. <small>(I’ll burn this one body to assist so you can do all the development you want.)</small></p>\n<p>That’s all for this post on implementing PWA in one day.</p>","fields":{"slug":"20190706-pwa-with-notification-en","path":"/2019/07/06/pwa-with-notification/en/","lang":"en"},"frontmatter":{"title":"Implementing PWA in One Day","subTitle":"Service Workers, Web Push, Caching – PWA Implementation Struggle Story","date":"Jul 06, 2019","categories":["Programming","Web","Tutorial"],"tags":["JavaScript","JavaScript","Web Push","Web Socket","socket.io","Notification API","Vue","PWA","Progressive Web Application"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/ca7838e0f08103b712d883b16d280e71/d803c/thumbnail.png","srcSet":"/static/ca7838e0f08103b712d883b16d280e71/d803c/thumbnail.png 320w,\n/static/ca7838e0f08103b712d883b16d280e71/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ca7838e0f08103b712d883b16d280e71/fc5c5/thumbnail.webp 320w,\n/static/ca7838e0f08103b712d883b16d280e71/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ca7838e0f08103b712d883b16d280e71/01fb2/thumbnail.png","srcSet":"/static/ca7838e0f08103b712d883b16d280e71/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/ca7838e0f08103b712d883b16d280e71/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"954b2fa2-6951-5357-9210-a3de3294d975","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-the-nature-of-data\">What Is the Nature of Data?</a></p>\n</li>\n<li>\n<p><a href=\"#how-is-data-collected\">How Is Data Collected?</a></p>\n<ul>\n<li><a href=\"#youre-being-stalked-without-knowing-it\">You’re Being Stalked Without Knowing It</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#now-for-the-data-driven-decision-making\">Now for the Data-Driven Decision Making!</a></p>\n</li>\n<li>\n<p><a href=\"#advantages-of-data-driven-decision-making\">Advantages of Data-Driven Decision Making</a></p>\n<ul>\n<li><a href=\"#minimizing-uncertainty\">Minimizing Uncertainty</a></li>\n<li><a href=\"#easier-to-persuade-others\">Easier to Persuade Others</a></li>\n<li><a href=\"#clear-expectations-and-outcomes\">Clear Expectations and Outcomes</a></li>\n<li><a href=\"#simplifying-complex-problems\">Simplifying Complex Problems</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#disadvantages-of-data-driven-decision-making\">Disadvantages of Data-Driven Decision Making</a></p>\n<ul>\n<li><a href=\"#data-is-just-a-value\">Data Is Just a Value</a></li>\n<li><a href=\"#blind-faith-in-data-can-lead-to-bad-decisions\">Blind Faith in Data Can Lead to Bad Decisions</a></li>\n<li><a href=\"#dont-ignore-qualitative-data\">Don’t Ignore Qualitative Data</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about data-driven decision making. The concept started gaining traction around 2013, riding the wave of the big data hype. Many companies already use it as their go-to decision-making method, and there are plenty of success stories backing it up — so it’s earned a fair amount of credibility.","html":"<p>In this post, I want to talk about data-driven decision making. The concept started gaining traction around 2013, riding the wave of the big data hype. Many companies already use it as their go-to decision-making method, and there are plenty of success stories backing it up — so it’s earned a fair amount of credibility.</p>\n<!-- more -->\n<blockquote>\n<p>That is, only when you truly understand the nature of data.</p>\n</blockquote>\n<p>Is data-driven decision making really as trustworthy as the world makes it out to be? Actually, before that — what does “the nature of data” even mean?</p>\n<h2 id=\"what-is-the-nature-of-data\" style=\"position:relative;\">What Is the Nature of Data?<a href=\"#what-is-the-nature-of-data\" aria-label=\"what is the nature of data permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>We tend to treat data and information as the same thing. But data, by itself, is not information.</p>\n<p>Data is simply a value obtained by observing the real world. It’s just a value — nothing more, nothing less.</p>\n<p>Information, on the other hand, is what you get when you process data in some way to create something meaningful. The process of turning data into information is what we call data mining.</p>\n<p>This sounds like something out of a textbook, so let me put it in simpler terms. Say the forecast tells you tomorrow’s average temperature will be 28°C (82°F). The fact that it’ll be 28°C is data — a raw observed value. Whether it came from a supercomputer or AlphaGo, it’s still just an observed number at this point.</p>\n<p>Now, hand this data to someone who plans to stay home all day. Does it matter to them? Unless they don’t have air conditioning, probably not. It’s essentially a meaningless value.</p>\n<p>Why would you care how hot it is outside if you’re not going anywhere? Just turn on the AC and eat some watermelon.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f75a7021ffd0e5cf8696268973f004e3/07f3a/outside-of-blanket.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAdKlp50xjP/EABoQAQEAAgMAAAAAAAAAAAAAAAEAAgMQETL/2gAIAQEAAQUC82tWTHgur//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AYf/xAAaEAACAgMAAAAAAAAAAAAAAAAAAhAhAREi/9oACAEBAAY/AuUsYvUZj//EABsQAQADAQADAAAAAAAAAAAAAAEAESFBMVFh/9oACAEBAAE/Ia8wPZzIgFUHFKinFvsCaeN5KT//2gAMAwEAAgADAAAAEBwf/8QAFREBAQAAAAAAAAAAAAAAAAAAEQD/2gAIAQMBAT8QWb//xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EMSp/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAIUFRYaH/2gAIAQEAAT8QlNtLAHZNBk/kXfzWKvQXBBSslzhPA5Lo3//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"outside of blanket\" title=\"\" src=\"/static/f75a7021ffd0e5cf8696268973f004e3/c08c5/outside-of-blanket.jpg\" srcset=\"/static/f75a7021ffd0e5cf8696268973f004e3/0913d/outside-of-blanket.jpg 160w,\n/static/f75a7021ffd0e5cf8696268973f004e3/cb69c/outside-of-blanket.jpg 320w,\n/static/f75a7021ffd0e5cf8696268973f004e3/c08c5/outside-of-blanket.jpg 640w,\n/static/f75a7021ffd0e5cf8696268973f004e3/07f3a/outside-of-blanket.jpg 740w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Whether it's 28°C outside or not, as long as you don't leave the blanket, it doesn't matter.</small>\n</center>\n<p>But give that same data to someone who has to commute across the city tomorrow, and suddenly it becomes critically important information — potentially a matter of survival. <small>(I’m exaggerating a bit because I’m terrible with heat.)</small></p>\n<p>It’d be nice to also show a friendly message like “If you wear long sleeves tomorrow, you might not make it — be careful! ^^“. In other words, data by itself doesn’t mean much, but depending on the situation and the reason it’s being used, its informational value can vary enormously. That’s the nature of data.</p>\n<h2 id=\"how-is-data-collected\" style=\"position:relative;\">How Is Data Collected?<a href=\"#how-is-data-collected\" aria-label=\"how is data collected permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So how does data-driven decision making actually work?</p>\n<p>Nothing fancy. You just collect data — relentlessly. A massive stockpile of data is valuable enough to be considered a company asset on its own. If you have data, you can process it however you want. Without data, there’s nothing to process.</p>\n<h3 id=\"youre-being-stalked-without-knowing-it\" style=\"position:relative;\">You’re Being Stalked Without Knowing It<a href=\"#youre-being-stalked-without-knowing-it\" aria-label=\"youre being stalked without knowing it permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Apple and Google — the companies that essentially rule the smartphones glued to our hands — also quietly collect your data. If you’re an iPhone user, try tapping your profile at the top of the Contacts app and scrolling down. You’ll likely find an “Addresses (found by Siri at notable locations)” section with your home or workplace saved there.</p>\n<center>\n  <div style=\"max-width: 300px\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7a7f89f9e6e92bf96c8753b133e696a6/1d69c/siri.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 178.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAExUlEQVR42q1WS2/kRBD2f+TIEQluHBASIHHlwIEDCAktT5FFK3FY4MIB2I02yyYi2tmNJskkmcx4Hsk87bFn/Hbb7v6oatuTWZQQ0G5rarrdbX9dj6+q2zg+OsFh8xius8Tl5QRJUiDPgSxTJGV/1hngtG3SWq7XWOI4w2Aw0jIez7H9cBtteseY2jHmToaZK7EKiheAhFDg9sfPP+LPB79D0SPP8Tr3DJqmBYJIYmwlCKMcRm8OtCcKxxcSU1eh0NpVGtIYUuKnz+/gl6+2aKhe0J7HsgAWvkJzqOBHgMGLvKBkCZSK8gOeC8MMKy/G7u4xdp8cwqNxnMhqQ35XaSndoPR3Rr3IwqAlMGlKO0dhiGGvS34aotPpom+ayLN8rSX4p66+ZzFq1dMU2HqU44fH+drkL37LceeBZKsh6HlrR+r1vLLk64c57u7UG1SAQpRazch/798T+IDEJZ94ocJrn6R4/bOUnK5oTuKd7wXevSvIbAXHU3jzS4G3vxN6vfa9sY4mgT45LbDfkXrMm+yfSzwzpTYtSVW5TnOsHc/ttQs0uuW6EBUgq8v+4j6ijxKh1lHkMc/x7lFMUayk1ihZv19HXrHJGUXPRxTFBFpoJ7PIqt8cc9vsrxMjCHyYZgeDfo/UFnjZZvgJ0LNJLKA7V1paI4mziaQ5heFCYWArrGL13wDzgnxCZA2Sso+FREi+WUWyei79mBWlTZI4pKhXJQ0peFK7hOdZjJDI2zOJtETgi+FAm77/1x7MbofI3MZJ65jWTBwcPMd8PtdapLEP17MQR0vkyQyxd0KgSm+kg2JZln55uVwSJQQ836fKkmiJokj3QRCUPqaPgtiD83QbzodvIem1KClmNF9UJhNfXNfVYD4B3dbYxCBcIewdwf72Y3iXh5BZWNpPfwbbvVgstIasKWtzPZKqOvKrd4k0GEMkA5xMnqFjN2ijgvhclICO46zNvhFwAzgk/w2tI1xYh7BtE/ujA/KhLE3OiOYMxFpygHgXVTn4n1K3LEthRyMEqUvmUq4nLmRNGwZgx6dcbl5BMxiItWOxbVub3u/31y4Yj8d6nnu2gJukRJYy03EoioxSNrsCjOOYCuhAg/BHDNJqtfR4NBrptel0ivPzc80GbnE4RdA7gHf/G4SjU9pouQ6aps1qtdKUYdNvp01B2RPCP9iD894bCNpPESWrK8BN2rBp7IJ/Cwr33pKSwJnCnw4Q+pQx/kwfYDr1OChMGwarAW+jjbuYwJpdIPAXCFYE6E00P3Xq1RrWQWCf3gYokoDy2UNCGROTJNEKVaqUPGRns3iep/tNzv1v2rDJnPTcs3CQ6lJ0sxTXSFW+2G/NZlODvRJi8199lrwiQFU6VEdJrvvbzb5eDEHH4TIsyz2Xfo/OjjCVOpo1/6Qu/epGfm6KwecsH0xzqq19mw8mKmfhS5gs6PLDaef5AV3fcgpOTgS3iJtO+ZwLqnsC5lRQURB0x8l0dWfuMuWYIZyydcUyUrqGNZ43cXpuIuZrCT0/2nmMRqNRHjxFik9/TfDRfSq8MiWQXN/Gzs7ONGAcJ+h2u3SgdXQ1MoIowWhqwXY8Oi5zuoWmmM3mWnhH1sCcpujPUv1cJ0KtIWcWZxkLH2R/A6lS2Z636FQrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"siri\" title=\"\" src=\"/static/7a7f89f9e6e92bf96c8753b133e696a6/6af66/siri.png\" srcset=\"/static/7a7f89f9e6e92bf96c8753b133e696a6/69538/siri.png 160w,\n/static/7a7f89f9e6e92bf96c8753b133e696a6/72799/siri.png 320w,\n/static/7a7f89f9e6e92bf96c8753b133e696a6/6af66/siri.png 640w,\n/static/7a7f89f9e6e92bf96c8753b133e696a6/1d69c/siri.png 750w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  </div>\n  <small>I, too, am fated to be stalked by Siri.</small>\n</center>\n<p>As another one of Apple’s loyal subjects, I’m being tracked by Siri as well. My home is actually somewhere in Gangseo-gu, Seoul, and the second address shown is my office.</p>\n<p>Whether Apple actually stores this on their servers, I’m not sure — but the point is that companies are collecting your data in real time, right this moment. And it’s not just tech giants like Apple or Google. Even startup-sized companies track all of your behavioral data. Companies use solutions like <a href=\"https://developers.google.com/analytics\" target=\"_blank\" rel=\"nofollow\">Google Analytics</a>, <a href=\"https://amplitude.com/\" target=\"_blank\" rel=\"nofollow\">Amplitude</a>, <a href=\"https://mixpanel.com/\" target=\"_blank\" rel=\"nofollow\">Mixpanel</a>, and <a href=\"https://www.hotjar.com/\" target=\"_blank\" rel=\"nofollow\">Hotjar</a> to accumulate your behavioral data and leverage it for decision making.</p>\n<p>At this point, you might be thinking:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/03beee14a6b82dfdc65a02cc5df3b69a/41099/watching-you.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwEC/9oADAMBAAIQAxAAAAHImGkLbY2zf//EABoQAAIDAQEAAAAAAAAAAAAAAAECAwQSEQD/2gAIAQEAAQUCZgxrczIseiMvWb0zdl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8BsY//xAAYEAEAAwEAAAAAAAAAAAAAAAAAAhEhQf/aAAgBAQAGPwLHGqWk/8QAGxAAAwEAAwEAAAAAAAAAAAAAAAERITFBYXH/2gAIAQEAAT8hVW/mlGwPdDhVukbC+HBJMxn/2gAMAwEAAgADAAAAEGQv/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERITH/2gAIAQMBAT8QU1IUnT//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QkE//xAAbEAEBAAMBAQEAAAAAAAAAAAABEQAhMUGB0f/aAAgBAQABPxBHkAU7H35in7mwJfFyh2xQX9zkp2yYrrGxWE53CNHDP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"watching you\" title=\"\" src=\"/static/03beee14a6b82dfdc65a02cc5df3b69a/41099/watching-you.jpg\" srcset=\"/static/03beee14a6b82dfdc65a02cc5df3b69a/0913d/watching-you.jpg 160w,\n/static/03beee14a6b82dfdc65a02cc5df3b69a/cb69c/watching-you.jpg 320w,\n/static/03beee14a6b82dfdc65a02cc5df3b69a/41099/watching-you.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>I'm always watching you...</small>\n</center>\n<p>That’s right. You’ve been feeding companies high-quality data without even realizing it. It reminds me of Big Brother from George Orwell’s <em>1984</em>.</p>\n<p>Of course, governments don’t just sit idly by. In many countries, regulations like the GDPR in Europe or various data privacy laws require companies to anonymize personal data — stripping out individually identifiable information and keeping only the data they actually need.</p>\n<blockquote>\n<p>The key principles generally include:</p>\n<ol>\n<li><strong>(Preliminary review)</strong> Determine whether the data constitutes personal information; if clearly not, it can be used freely.</li>\n<li><strong>(De-identification)</strong> Remove or replace elements that could identify individuals in datasets.</li>\n<li><strong>(Adequacy assessment)</strong> Evaluate whether the data could be easily combined with other information to re-identify individuals.</li>\n<li><strong>(Post-management)</strong> Monitor for re-identification risks and take necessary safeguards during data use.</li>\n</ol>\n</blockquote>\n<p>That said, these regulations can be complicated, and enforcement varies — so in practice, many companies likely continue business as usual. Still, any legitimate company should have a privacy policy that explains what personal data they collect, why, and how they use it. It’s worth reading, even if it’s tedious.</p>\n<h2 id=\"now-for-the-data-driven-decision-making\" style=\"position:relative;\">Now for the Data-Driven Decision Making!<a href=\"#now-for-the-data-driven-decision-making\" aria-label=\"now for the data driven decision making permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Data-driven decision making is essentially about analyzing the collected data to draw plausible conclusions.</p>\n<p>It’s naturally less risky than making decisions based on pure gut feeling, since you’re at least working with observed values. This approach is especially popular in marketing — specifically in personalized advertising systems that recommend products you’re likely to be interested in.</p>\n<p>Personalized ad systems collect your behavioral data as you browse the web, analyze what you’re interested in, and then serve ads that match. It’s a form of data-driven decision making. Targeting products that someone is likely interested in obviously yields much higher conversion rates than showing random ads.</p>\n<p>Let’s first look at some advantages of data-driven decision making.</p>\n<h2 id=\"advantages-of-data-driven-decision-making\" style=\"position:relative;\">Advantages of Data-Driven Decision Making<a href=\"#advantages-of-data-driven-decision-making\" aria-label=\"advantages of data driven decision making permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>There are many advantages, of course. I can’t list them all, so I’ll just highlight a few that I think are most notable.</p>\n<h3 id=\"minimizing-uncertainty\" style=\"position:relative;\">Minimizing Uncertainty<a href=\"#minimizing-uncertainty\" aria-label=\"minimizing uncertainty permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The most straightforward advantage is reduced risk from decision-making. As I mentioned, basing decisions on analyzed observational data is inherently less risky than relying on intuition alone.</p>\n<h3 id=\"easier-to-persuade-others\" style=\"position:relative;\">Easier to Persuade Others<a href=\"#easier-to-persuade-others\" aria-label=\"easier to persuade others permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The second advantage is that it’s much easier to convince people. I think there’s a psychological element at play here. A presentation with polished graphs, tables, and numbers just feels more credible than words alone. This is probably more relevant for roles like designers — who rely heavily on intuition — than for developers who are already comfortable with logic and numbers.</p>\n<blockquote>\n<p>a. From a UX perspective, placing this button here would make it easier for users to discover!</p>\n<p>b. Our user testing showed that 78% of users only interacted within the top 20% of the page before leaving. Therefore…</p>\n</blockquote>\n<p>It comes down to the difference between these two approaches. Fellow designers might understand each other intuitively, but when communicating with other roles — POs, CEOs, engineers — the latter is clearly more persuasive. Of course, blindly trusting those numbers is dangerous. But if the data collection method and experimental conditions were sound, it’s a perfectly valid approach.</p>\n<h3 id=\"clear-expectations-and-outcomes\" style=\"position:relative;\">Clear Expectations and Outcomes<a href=\"#clear-expectations-and-outcomes\" aria-label=\"clear expectations and outcomes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When you plan features based on data, you go in with expectations like “if we build this feature, users will do more of X.” After shipping, you can analyze whether that behavior actually increased and by how much — making outcomes easy to measure.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 472px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/da19ee09dcc30f318ee0339dd07b576b/3c5de/abtest.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0ElEQVR42oWTW2+bQBCF+f//qQ+V2qpSVSlK3Di2sBN2WcxtWS67gPHldAaXmKBIffi0MDM7Ys4cvFW+hSprvKUN6v6C5nj9gHEnVN0ZIrfwI4Mgq1G4AXZRZwdA2yO8tRaIawdVOBTdBWZBTg01EVJ+l1R4yxpkdHtZV/ZXJHUP75t6wA9Z4OveQpYdRHn8lJUyeKS6Q3P+NC+rAbvMwXvREYS5NUuagTiNZ0pnam/we2g6yKK9xWa5icydoajG+53+QdxmSJwGSQOSESQZ2hPgZrAkIq9B08EuckxLd0w7wHvKFGSuIQ4pnlWFzaGETwuSpkdUD/84YhvX2MQVjXyaxe9wPNAtvO/RBjJWOIQh6VTjSWpqSlvXNCJrM9JjHVVEiZC0usfvcHzPGj7nPva1xdo4BLTFXVyO4xmaYbIE20mRfopq2B5La32wzUsuEFQOr7QUviS1RUTPmoQy7WWkIMEjEpwpu+t7fA7Hk4ps80U8kql9BGqNX68FVmExrp+tEJCOjKBGk23kLD6H6/3UwvNNjsSQ2Ck3shDakdGH0QYTbAu2jaAJcvqaeW6C4zyZ9zN7QJEkKPYHbEnDkH4xQ55hG7zbYphs0/zXNn8BgPuRDnRA4W0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"abtest\" title=\"\" src=\"/static/da19ee09dcc30f318ee0339dd07b576b/3c5de/abtest.png\" srcset=\"/static/da19ee09dcc30f318ee0339dd07b576b/69538/abtest.png 160w,\n/static/da19ee09dcc30f318ee0339dd07b576b/72799/abtest.png 320w,\n/static/da19ee09dcc30f318ee0339dd07b576b/3c5de/abtest.png 472w\" sizes=\"(max-width: 472px) 100vw, 472px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A/B testing lets you verify whether a deployed feature actually produced the desired results.</small>\n</center>\n<h3 id=\"simplifying-complex-problems\" style=\"position:relative;\">Simplifying Complex Problems<a href=\"#simplifying-complex-problems\" aria-label=\"simplifying complex problems permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Personalized advertising, as described above, is actually a very complex problem. Representing something as abstract as human interests numerically is no easy feat. But “not easy” doesn’t mean impossible.</p>\n<p>For example, when I was recently interested in a certain e-cigarette brand, I went around reading reviews on blogs and YouTube, and visited online vape shops to see what accessories were available.</p>\n<p>My browsing history undoubtedly contains multiple hits for the keyword “e-cigarette.” Collecting this keyword and serving me e-cigarette-related ads isn’t rocket science.</p>\n<p>This is how a complex problem like “figuring out what this person is interested in” can be reduced to simple keyword matching — another advantage of data-driven decision making.</p>\n<h2 id=\"disadvantages-of-data-driven-decision-making\" style=\"position:relative;\">Disadvantages of Data-Driven Decision Making<a href=\"#disadvantages-of-data-driven-decision-making\" aria-label=\"disadvantages of data driven decision making permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>So far, data-driven decision making sounds like a flawless approach — low risk, measurable outcomes, and the ability to simplify complex problems!</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b0c8b95e3bbd877f6ccc773a5dab64b5/066f9/nope.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 101.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHu5XGiABQH/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECESEiMUH/2gAIAQEAAQUCvM94DPE7EPh//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGRAAAQUAAAAAAAAAAAAAAAAAAQACITAx/9oACAEBAAY/AtRDDNH/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAQITHB/9oACAEBAAE/IUkIPuCQw9PBLeqdjrLwCm8b00q7/9oADAMBAAIAAwAAABAjzwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhQVExccH/2gAIAQEAAT8QKNXwUv4gYR9II5uAgC29ilRZxruYNA2hlO/ssBiejtWYpzMpoU6n/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"nope\" title=\"\" src=\"/static/b0c8b95e3bbd877f6ccc773a5dab64b5/066f9/nope.jpg\" srcset=\"/static/b0c8b95e3bbd877f6ccc773a5dab64b5/0913d/nope.jpg 160w,\n/static/b0c8b95e3bbd877f6ccc773a5dab64b5/cb69c/nope.jpg 320w,\n/static/b0c8b95e3bbd877f6ccc773a5dab64b5/066f9/nope.jpg 400w\" sizes=\"(max-width: 400px) 100vw, 400px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Nope.</small>\n</center>\n<p>Data-driven decision making does have many strengths, but if you don’t properly understand the nature of data as discussed above, you can end up making decisions that are completely disconnected from reality. Here are the points I think people most commonly miss.</p>\n<h3 id=\"data-is-just-a-value\" style=\"position:relative;\">Data Is Just a Value<a href=\"#data-is-just-a-value\" aria-label=\"data is just a value permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As I said earlier, data is simply a raw value. That means when you analyze data to extract meaningful information, human subjectivity inevitably enters the picture.</p>\n<p>In most organizations, data analysts play this role, and their intuition plays a significant part. In fact, how accurate their intuition is essentially defines their skill.</p>\n<p>The key point is that results derived from data are ultimately information filtered through human subjective judgment. When you put too much faith in data-driven decisions, it’s easy to think:</p>\n<blockquote>\n<p>The results are based on values we directly observed, so the conclusions must be accurate too!</p>\n</blockquote>\n<p>But accurate data doesn’t guarantee accurate conclusions. You must always view results with a critical eye. And by “critical eye,” I mean the habit of asking “why” — why did this result turn out this way?</p>\n<h3 id=\"blind-faith-in-data-can-lead-to-bad-decisions\" style=\"position:relative;\">Blind Faith in Data Can Lead to Bad Decisions<a href=\"#blind-faith-in-data-can-lead-to-bad-decisions\" aria-label=\"blind faith in data can lead to bad decisions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Data only describes what happened — it never tells you why something happened. So the question “why did we get this data?” is typically left to expert intuition, or answered by investing more effort into collecting qualitative data.</p>\n<p>So why is it dangerous to make decisions based only on what happened, without considering the reasons?</p>\n<h4 id=\"causation-vs-correlation\" style=\"position:relative;\">Causation vs. Correlation<a href=\"#causation-vs-correlation\" aria-label=\"causation vs correlation permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Causation and correlation are among the most fundamental concepts in statistics. I’ll keep the definitions brief since this could go on forever.</p>\n<p>Correlation means that when one statistical variable increases, another variable also increases or decreases. If variable <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span> decreases and variable <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span> also decreases or increases in tandem, they’re correlated. If the two variables move independently with no pattern, they’re uncorrelated.</p>\n<p>The degree of correlation is expressed as a correlation coefficient. A coefficient close to <code class=\"language-text\">0</code> means little correlation, close to <code class=\"language-text\">-1</code> means strong negative correlation, and close to <code class=\"language-text\">1</code> means strong positive correlation.</p>\n<p>Causation, on the other hand, is when a preceding variable is determined to be the cause of a subsequent variable.</p>\n<p>Consider the statement “the more it rains, the higher the river level rises.” While there may be other hidden variables at play, rainfall is almost certainly a major cause of rising river levels — so we’d call this a causal relationship.</p>\n<p>But “the closer it gets to summer, the higher the river level” is merely a correlation. The river level rises in summer because roughly 70% of annual rainfall is concentrated in the summer months — not simply because it’s summer.</p>\n<p>In business, most variable relationships are correlations, so you should always consider whether there are hidden variables and maintain a healthy skepticism about whether the results are truly reliable.</p>\n<h4 id=\"examples-of-bad-decisions\" style=\"position:relative;\">Examples of Bad Decisions<a href=\"#examples-of-bad-decisions\" aria-label=\"examples of bad decisions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>To illustrate what happens when you blindly trust data, here are two classic examples commonly used to demonstrate the dangers of data.</p>\n<blockquote>\n<p>A researcher was examining the seasonal trends in ice cream sales throughout the year. They also plotted the seasonal trends in drowning deaths alongside it and ran a correlation analysis between the two datasets.</p>\n<p>The results were striking.</p>\n<p>There was an unmistakably clear correlation. During periods when ice cream sales increased, drowning deaths also increased. When ice cream sales decreased, drowning deaths decreased as well.</p>\n<p>Shuddering at the implications, the researcher drew the following conclusion:</p>\n<p><strong>“Ice cream is the cause of drowning deaths.”</strong></p>\n</blockquote>\n<p>In this example, the researcher is essentially saying “the more ice cream is sold, the more people drown.” It sounds absurd, but ice cream sales and drowning deaths do in fact correlate.</p>\n<p>The hidden variable here is temperature. When summer arrives and it gets hot, ice cream sales go up. At the same time, more people go to beaches and rivers for vacation, so accidental drowning deaths also increase.</p>\n<p>If you failed to identify temperature as the hidden variable, you might end up with a decision like this:</p>\n<blockquote>\n<p>To reduce drowning deaths, we ban ice cream sales.</p>\n</blockquote>\n<p>Now for the second example. This one comes from a <a href=\"https://www.ted.com/talks/cathy_o_neil_the_era_of_blind_faith_in_big_data_must_end\" target=\"_blank\" rel=\"nofollow\">TED 2017 talk</a> by mathematician and data scientist Cathy O’Neil. I personally found this talk fascinating.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1ea81507ac3c4c37b9404183bbc6bf60/9ecec/oNeil.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHCtIkioAr/xAAZEAEAAgMAAAAAAAAAAAAAAAABAAIDEDL/2gAIAQEAAQUCmSoUleVTX//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPwFdn//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPwEMn//EABgQAAIDAAAAAAAAAAAAAAAAABARAAIh/9oACAEBAAY/ApVJnB//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAQIUFx/9oACAEBAAE/IQHgnEYyqLXsO6r/2gAMAwEAAgADAAAAEOQf/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QQBP/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QB1P/xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhYTFRkf/aAAgBAQABPxB2Baw4FmkKce8lRCjGu1v2IFBqvcfM/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"oNeil\" title=\"\" src=\"/static/1ea81507ac3c4c37b9404183bbc6bf60/c08c5/oNeil.jpg\" srcset=\"/static/1ea81507ac3c4c37b9404183bbc6bf60/0913d/oNeil.jpg 160w,\n/static/1ea81507ac3c4c37b9404183bbc6bf60/cb69c/oNeil.jpg 320w,\n/static/1ea81507ac3c4c37b9404183bbc6bf60/c08c5/oNeil.jpg 640w,\n/static/1ea81507ac3c4c37b9404183bbc6bf60/6a068/oNeil.jpg 960w,\n/static/1ea81507ac3c4c37b9404183bbc6bf60/9ecec/oNeil.jpg 1050w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Cathy O'Neil presenting at TED</small>\n</center>\n<blockquote>\n<p>Fox News, founded in 1996, decided to adopt a machine learning algorithm to streamline their hiring process.</p>\n<p>For training data, they could use 21 years’ worth of applicant data from Fox News. They also needed to define “success” to identify candidates likely to thrive at the company. Let’s say someone who worked at Fox News for at least four years and got promoted at least once counts as successful.</p>\n<p>Now, what happens when you apply this algorithm to current applicants?</p>\n<p><strong>No female applicant would ever pass.</strong></p>\n</blockquote>\n<p>I was personally shocked when I first heard this example. When the story began — using 21 years of applicant data and defining success as working four years with at least one promotion — it sounded like a perfectly fair and objective metric.</p>\n<p>But true gender-blind hiring based solely on merit is a relatively recent development in our society. Under the rules defined above, the absolute number of “successful” people at Fox News would inevitably skew male. Add to that Fox News’s conservative orientation, and the bias would be even more pronounced.</p>\n<p>The hidden variable in this example was the social climate of the times.</p>\n<p>No matter how objective you think your metrics are, if you don’t ask “why did we get these results?” before making decisions, you can end up with conclusions that are completely divorced from reality.</p>\n<h3 id=\"dont-ignore-qualitative-data\" style=\"position:relative;\">Don’t Ignore Qualitative Data<a href=\"#dont-ignore-qualitative-data\" aria-label=\"dont ignore qualitative data permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When most organizations make data-driven decisions, they focus on quantitative data rather than qualitative data.</p>\n<p>The reason is simple: quantitative data is easier to collect, compare, and process — the data mining workflow is more straightforward. Qualitative data, on the other hand, requires more deliberate methods like user testing and surveys.</p>\n<p>Moreover, qualitative data often comes in the form of natural language rather than numbers, making it harder to analyze.</p>\n<p>For these reasons, I’ve often seen qualitative data get deprioritized — but that’s not a good practice. Quantitative data explains what happened; qualitative data explains why.</p>\n<p>For example, the difference looks like this:</p>\n<blockquote>\n<p>After users engaged with our search system, the conversion rate increased by 30%. (Quantitative data)</p>\n<p>Survey results showed that users felt they could find products that better matched their needs by searching on their own. (Qualitative data)</p>\n</blockquote>\n<p>You could technically convert that qualitative example into quantitative data — by using multiple-choice questions instead of open-ended ones. But then you can only capture the reasons you’ve already thought of, which is why most surveys include an “Other (please specify)” option. And whatever people write in that box? That’s qualitative data.</p>\n<p>Just think about it: the “Other” field will contain natural language that people took the time to write out individually, and classifying and analyzing all of that requires either artificial intelligence or a lot of human effort.</p>\n<p>That’s why most companies lean toward easier-to-handle quantitative data and use qualitative data as supplementary. But companies that genuinely want to hear what their customers want invest the resources to continuously collect qualitative data through surveys and user testing, even when it’s costly.</p>\n<p>At my workplace, we don’t have the resources to do it frequently, but for major feature launches, our UI/UX designers invite users who match selected personas to the office for user testing sessions.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I think data-driven decision making is a double-edged sword. Used well, it delivers the advantages I described — lower risk, clear outcome measurement, and the ability to abstract complex problems. Used poorly, you end up blindly trusting numbers without realizing something has gone wrong, making bad decision after bad decision.</p>\n<p>The “clear expectations and outcomes” advantage can also become a disadvantage. As I’ve repeatedly emphasized, data is ultimately just raw values, and the conclusions drawn from it inevitably involve human subjectivity. This means you can predetermine the result you want and massage the data to fit — producing conclusions that look perfectly plausible.</p>\n<p>These tendencies can lead to decisions that optimize for metrics the company considers important rather than actually serving customers. Or worse, someone might manipulate variables until they get the result they want — even if customers are dissatisfied and conversion rates are dropping — all to earn recognition from higher-ups. It becomes a political tool rather than an analytical one.</p>\n<blockquote>\n<p>These behaviors aren’t data-driven decision making — they’re number games dressed up as data-driven decision making.</p>\n</blockquote>\n<p>That’s why, whenever you make data-driven decisions, you must constantly ask yourself: Did I reach an objective and fair conclusion? Is this data truly uncontaminated and capable of yielding meaningful results? If the results came out as I hoped, why did they turn out this way? Maintaining this critical mindset is essential.</p>\n<p>That wraps up this post on whether data-driven decision making is really as flawless as it seems.</p>","fields":{"slug":"20190704-danger-of-data-driven-en","path":"/2019/07/04/danger-of-data-driven/en/","lang":"en"},"frontmatter":{"title":"Is Data-Driven Decision Making Really Flawless?","subTitle":"The traps hidden behind numbers, and how not to be fooled by data","date":"Jul 04, 2019","categories":["Soft Skills","Essay"],"tags":["Data Driven","Data Driven Decision","Critical Thinking","Data Analysis"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/62d8b411322961c62d1d801e6d053f62/3a812/thumbnail.jpg","srcSet":"/static/62d8b411322961c62d1d801e6d053f62/3a812/thumbnail.jpg 320w,\n/static/62d8b411322961c62d1d801e6d053f62/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/62d8b411322961c62d1d801e6d053f62/fc5c5/thumbnail.webp 320w,\n/static/62d8b411322961c62d1d801e6d053f62/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/62d8b411322961c62d1d801e6d053f62/2d839/thumbnail.jpg","srcSet":"/static/62d8b411322961c62d1d801e6d053f62/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/62d8b411322961c62d1d801e6d053f62/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"c89b338e-9c45-587b-bde2-7796b2358635","tableOfContents":"<ul>\n<li>\n<p><a href=\"#why-use-agile\">Why Use Agile?</a></p>\n</li>\n<li>\n<p><a href=\"#the-agile-manifesto\">The Agile Manifesto</a></p>\n</li>\n<li>\n<p><a href=\"#the-twelve-principles-behind-the-agile-manifesto\">The Twelve Principles Behind the Agile Manifesto</a></p>\n</li>\n<li>\n<p><a href=\"#the-core-elements-of-agile\">The Core Elements of Agile</a></p>\n<ul>\n<li><a href=\"#user-story\">User Story</a></li>\n<li><a href=\"#product-backlog\">Product Backlog</a></li>\n<li><a href=\"#estimation\">Estimation</a></li>\n<li><a href=\"#retrospective\">Retrospective</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#so-is-agile-good\">So Is Agile Good?</a></p>\n<ul>\n<li><a href=\"#this-isnt-agile\">“This Isn’t Agile!”</a></li>\n<li><a href=\"#dont-get-too-hung-up-on-agile\">Don’t Get Too Hung Up on Agile</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to talk about the agile process — one of the many software development methodologies out there. Many organizations have already adopted agile, and the company I work at is no exception.","html":"<p>In this post, I want to talk about the agile process — one of the many software development methodologies out there. Many organizations have already adopted agile, and the company I work at is no exception.</p>\n<!-- more -->\n<p>A lot of teams focus on the surface-level rituals: assigning story points to issues, running 1-2 week sprints, holding daily scrum meetings. My workplace was doing all of that too, but everyone kept asking “what does it actually mean to work in an agile way?” without ever getting a proper answer.</p>\n<p>We started without understanding the essence of agile — just “I tried this a few times and it worked great!” or “another company does this and they improved!” Naturally, things didn’t go smoothly. Estimations were consistently off, sprints kept falling apart, and team morale suffered. So my company, <a href=\"https://soomgo.com\" target=\"_blank\" rel=\"nofollow\">Soomgo</a>, invested a significant amount of money to bring in an agile coach for about a month of training.</p>\n<p>In this post, I’d like to share what I learned from that experience, along with what I noticed after trying various approaches in practice.</p>\n<h2 id=\"why-use-agile\" style=\"position:relative;\">Why Use Agile?<a href=\"#why-use-agile\" aria-label=\"why use agile permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since so many organizations already use agile, I’ll assume most of you have a general idea of what it is.</p>\n<p>Agile means “nimble” — it’s a development methodology born from the intent to find a balance between having no plan at all and having an overly rigid plan.</p>\n<p>The traditional approach is best represented by the waterfall model. Its defining characteristic is that it charges straight ahead with a remarkably optimistic mindset.</p>\n<p>Traditional methodologies like waterfall generally follow this structure:</p>\n<blockquote>\n<p>Planning > Design > Development > Testing > Deployment > Maintenance</p>\n</blockquote>\n<p>Looks familiar, right? It’s a process most of us have been through, whether we realized it or not. You set a deadline, and every team member finishes their part and passes it along. If everything goes smoothly, it’s a happy ending for everyone. But reality has other plans.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ac0172a596e7ec9ad9ef898fdec21cf/1ac29/client.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABh0lEQVR42l2T6a6CUAyEz/u/m7+MS8QFFcR9wQ1ErX69mRNzmxAPtJ3OTI/hcrnYfD63+/1u7/fbFouFbTYbI05lacVyaU3T2OPxsOX3vF6vPbfb7SydTu35fNrr9bKiKBwjrFYrS5LEbrebJzudjoMSAAwGAy+s69p6vV4cNpvN/CHK72ByYASmU0zAkGaACXJVVcUcDfwKBNaqI0eE8/nskvkIEIzFEDs400g+z3PbbrcRkHfkksuyzI7Ho4XD4WDj8djBeIbDoUsl8Kvb7UYP+/1+lIxn06+HAMKu3W7/AVL4K1leEsj9lazFEfQwiKCenEumAbpqRBKsCSZi/PV69XfJ8htwOlmapg4GMLZhQ6CALWvyZDKJTchie0xHGpLxnMDrVqvlRAAFHOCARG2IBFNolvEC4Btn5ThLFbZJhXu43+8dnWLOXFoBsiB5DGM1cgN0ySHC2ZdC02g0ilcD6irET3zTMHwSYwaxZS2P2+H/FKbLM3wERNuDhQD+28F3sQVIGB+b05uY7oiTDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"client\" title=\"\" src=\"/static/8ac0172a596e7ec9ad9ef898fdec21cf/6af66/client.png\" srcset=\"/static/8ac0172a596e7ec9ad9ef898fdec21cf/69538/client.png 160w,\n/static/8ac0172a596e7ec9ad9ef898fdec21cf/72799/client.png 320w,\n/static/8ac0172a596e7ec9ad9ef898fdec21cf/6af66/client.png 640w,\n/static/8ac0172a596e7ec9ad9ef898fdec21cf/d9199/client.png 960w,\n/static/8ac0172a596e7ec9ad9ef898fdec21cf/1ac29/client.png 1022w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The \"client with unreasonable demands\" — a universal experience</small>\n</center>\n<p>In the real world, clients might see a prototype and request changes. Even for in-house products, you might ship something after months of hard work only to find that user reception is nothing like you expected.</p>\n<p>In these situations, the waterfall model forces too much risk onto the team. All that effort over one or two months can evaporate in an instant. And then there’s this scenario:</p>\n<blockquote>\n<p>Planning > Design > Development (Wait, this is actually impossible given the current situation…?)</p>\n</blockquote>\n<p>If a developer was part of the planning meetings, this can sometimes be caught early. Otherwise, you have to go back to the planners, explain why it’s not feasible, and restart the planning and design process from scratch. At best, it wastes time. At worst, it creates friction between team members and damages morale — not a good experience. <small>(I take my team members’ emotional well-being very seriously.)</small></p>\n<p>So let’s look at what agile is — the methodology designed to overcome these shortcomings of traditional approaches.</p>\n<h2 id=\"the-agile-manifesto\" style=\"position:relative;\">The Agile Manifesto<a href=\"#the-agile-manifesto\" aria-label=\"the agile manifesto permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The agile development methodology begins with the Agile Manifesto, published in 2001.</p>\n<blockquote>\n<p>We are uncovering better ways of developing software by doing it and helping others do it.\nThrough this work we have come to value:</p>\n<ul>\n<li><strong>Individuals and interactions</strong> over processes and tools</li>\n<li><strong>Working software</strong> over comprehensive documentation</li>\n<li><strong>Customer collaboration</strong> over contract negotiation</li>\n<li><strong>Responding to change</strong> over following a plan</li>\n</ul>\n<p>That is, while there is value in the items on the left, we value the items on the right more.</p>\n<p><strong>Manifesto for Agile Software Development</strong> <em><a href=\"https://agilemanifesto.org/\" target=\"_blank\" rel=\"nofollow\">agilemanifesto.org</a></em></p>\n</blockquote>\n<p>From this manifesto, we can understand what agile values. Put more casually, it goes something like this:</p>\n<hr>\n<p>We’re a team, so let’s communicate instead of working in silos!</p>\n<p>Let’s not waste time on unnecessary documentation — build something that actually works first!</p>\n<p>Let’s create a product that customers actually find valuable!</p>\n<p>Plans always change, so let’s work flexibly enough to adapt!</p>\n<hr>\n<p>Agile is highly idealistic. It’s about becoming an organization that moves fluidly with the singular goal of building products for the customer.</p>\n<h2 id=\"the-twelve-principles-behind-the-agile-manifesto\" style=\"position:relative;\">The Twelve Principles Behind the Agile Manifesto<a href=\"#the-twelve-principles-behind-the-agile-manifesto\" aria-label=\"the twelve principles behind the agile manifesto permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Beyond the manifesto itself, agile establishes 12 principles to guide teams.</p>\n<blockquote>\n<p>We follow these principles:</p>\n<ol>\n<li>\n<p>Our highest priority is to satisfy the customer through early and continuous delivery of valuable software.</p>\n</li>\n<li>\n<p>Welcome changing requirements, even late in development. Agile processes harness change for the customer’s competitive advantage.</p>\n</li>\n<li>\n<p>Deliver working software frequently, from a couple of weeks to a couple of months, with a preference to the shorter timescale.</p>\n</li>\n<li>\n<p>Business people and developers must work together daily throughout the project.</p>\n</li>\n<li>\n<p>Build projects around motivated individuals. Give them the environment and support they need, and trust them to get the job done.</p>\n</li>\n<li>\n<p>The most efficient and effective method of conveying information to and within a development team is face-to-face conversation.</p>\n</li>\n<li>\n<p>Working software is the primary measure of progress.</p>\n</li>\n<li>\n<p>Agile processes promote sustainable development. The sponsors, developers, and users should be able to maintain a constant pace indefinitely.</p>\n</li>\n<li>\n<p>Continuous attention to technical excellence and good design enhances agility.</p>\n</li>\n<li>\n<p>Simplicity — the art of maximizing the amount of work not done — is essential.</p>\n</li>\n<li>\n<p>The best architectures, requirements, and designs emerge from self-organizing teams.</p>\n</li>\n<li>\n<p>At regular intervals, the team reflects on how to become more effective, then tunes and adjusts its behavior accordingly.</p>\n</li>\n</ol>\n<p><strong>Principles behind the Agile Manifesto</strong> <em><a href=\"https://agilemanifesto.org/principles.html\" target=\"_blank\" rel=\"nofollow\">agilemanifesto.org</a></em></p>\n</blockquote>\n<p>The things we typically associate with agile are built on these 12 principles.</p>\n<p>For example, sprints are based on principle #3, and the retrospective held at the end of each sprint is based on principle #12.</p>\n<p>Agile also favors small task force teams over large ones, which comes from principle #5. The reasoning is simple: smaller teams can move more organically than large ones.</p>\n<p>These 12 principles serve as a guideline for how to produce and deliver products to customers more nimbly.</p>\n<h2 id=\"the-core-elements-of-agile\" style=\"position:relative;\">The Core Elements of Agile<a href=\"#the-core-elements-of-agile\" aria-label=\"the core elements of agile permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f171b9e2a7ab63b5531936a0dc5f935c/6a068/agile_process.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHvZJMqMP8A/8QAGBABAAMBAAAAAAAAAAAAAAAAAQACEhD/2gAIAQEAAQUCmnmKzNYAH//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAEDAQE/Aaf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAEAAgMAAAAAAAAAAAAAAAAAATEQEXH/2gAIAQEABj8CdxSoah//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMVH/2gAIAQEAAT8h5910gRQ1HKenLStPOY0EDf/aAAwDAQACAAMAAAAQBN//xAAWEQEBAQAAAAAAAAAAAAAAAAABACH/2gAIAQMBAT8QRW3/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxASf//EAB4QAQACAgEFAAAAAAAAAAAAAAEAESExUUFhcYGR/9oACAEBAAE/EFL5cwRhYDd4vfz1AliJyRtU3d47zUoVYYIbPWDpP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"agile process\" title=\"\" src=\"/static/f171b9e2a7ab63b5531936a0dc5f935c/c08c5/agile_process.jpg\" srcset=\"/static/f171b9e2a7ab63b5531936a0dc5f935c/0913d/agile_process.jpg 160w,\n/static/f171b9e2a7ab63b5531936a0dc5f935c/cb69c/agile_process.jpg 320w,\n/static/f171b9e2a7ab63b5531936a0dc5f935c/c08c5/agile_process.jpg 640w,\n/static/f171b9e2a7ab63b5531936a0dc5f935c/6a068/agile_process.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>[Source] https://brainhub.eu/blog/differences-lean-agile-scrum/</small>\n  <br>\n</center>\n<p>Agile has several components based on the 12 principles. In this post, I’ll focus on the ones I consider most important: User Story, Backlog, Estimation, and Retrospective. Let’s take a quick look at each.</p>\n<h3 id=\"user-story\" style=\"position:relative;\">User Story<a href=\"#user-story\" aria-label=\"user story permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Agile is built around user stories. Stories are crucial, and they must be thoroughly <strong>user-centric</strong>. When we typically create stories or issues, they tend to look something like this:</p>\n<blockquote>\n<ul>\n<li>SD-1234 Revamp the request form page</li>\n<li>SD-1235 Convert the webview-based profile page to native</li>\n<li>SD-1236 Design DB schema and create API endpoints for social login</li>\n<li>SD-1237 Add multi-photo sending feature to user chat</li>\n</ul>\n</blockquote>\n<p>When I received agile coaching, this was the very first thing the coach pointed out. The coach recommended that stories include three elements wherever possible: <strong>Who</strong>, <strong>What</strong>, and <strong>Why</strong>.</p>\n<p>Stories written this way explain, through the title alone, why the team needs to address them. So the stories above should be rewritten like this:</p>\n<blockquote>\n<ul>\n<li>SD-1234 A <strong>customer</strong> can see all the information they need at a glance to easily submit a request.</li>\n<li>SD-1235 A <strong>customer</strong> can use the profile page as a native view instead of a webview for a more natural UX.</li>\n<li>SD-1236 A <strong>client developer</strong> can use the relevant API endpoints to build the social login feature.</li>\n<li>SD-1237 A <strong>customer</strong> can use a multi-select feature to easily send multiple photos in a chat.</li>\n</ul>\n</blockquote>\n<p>User stories written this way can be understood by any team member — even someone completely unrelated to the story — without additional explanation.</p>\n<p>And the user (Who) doesn’t always have to be the customer. In <code class=\"language-text\">SD-1236</code>, the user is the client developer. In cases like this, you still fill in all the information: the client developer (Who) can use the relevant API endpoints (What) to build the social login feature (Why). Team members are both producers and each other’s internal customers.</p>\n<h3 id=\"product-backlog\" style=\"position:relative;\">Product Backlog<a href=\"#product-backlog\" aria-label=\"product backlog permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The product backlog consists of multiple user stories that need to be addressed. These stories are sorted by priority as defined by the PO (Product Owner), and prioritization authority rests solely with the PO. A fundamental prerequisite of agile is that team members trust the PO’s decisions.</p>\n<p>That doesn’t mean blindly following orders — you can freely discuss and voice opinions, but the final call is the PO’s.</p>\n<p>The backlog will keep accumulating stories if left unattended, so the PO needs to periodically review and prune it — deciding which stories are still relevant and which aren’t. Without this maintenance, it takes increasingly longer to sort through and evaluate the backlog.</p>\n<h3 id=\"estimation\" style=\"position:relative;\">Estimation<a href=\"#estimation\" aria-label=\"estimation permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Estimation is the process where team members who will actually work on the stories assess how large each story is by assigning story points.</p>\n<p>A common approach is to use absolute values — if an issue takes 1 hour, it gets 1 story point. My team initially did this too. We decided that 4 hours was a realistic amount of focused work per day, so a task taking about a day was estimated at 4 points.</p>\n<p>The problem was that these estimates were almost always wrong. Unless you’re some kind of savant who can predict exactly when your work will be done, unexpected bugs, surprise meetings, or sick days throw everything off. It happened more often than you’d think, and each time, the sprint would blow up.</p>\n<p>So we switched to <strong>relative</strong> story points. Here’s how it works. You pick a past story as a reference point and have the team estimate it based on their memory of that experience.</p>\n<blockquote>\n<p><strong>SD-1234 A customer can see all the information they need at a glance to easily submit a request.</strong></p>\n<p>Alice: <em>This one wasn’t that much work, I think. I’d say 3.</em></p>\n<p>Bob: <em>I was doing overtime every day designing this. I’d say 5.</em></p>\n<p>Charlie: <em>I have a crush on Bob, so I’ll say 5 too.</em></p>\n</blockquote>\n<p>Once the team converges on a rough consensus — “redesigning the request form page was about a 5” — you use that as a baseline to relatively measure other stories. You can use T-shirt sizes like <code class=\"language-text\">XS, SM, M, L, XL</code>, or natural numbers like <code class=\"language-text\">1, 2, 3, 4</code>. Since you’re measuring relative size, any abstract scale works.</p>\n<p>For reference, my team uses the Fibonacci sequence: <code class=\"language-text\">1, 2, 3, 5, 8...</code></p>\n<p>Measuring relative size might feel strange at first, but from my experience, it’s more accurate than estimating in hours. The caveat is that you first need to know roughly how many story points your team can handle in a sprint.</p>\n<p>This is figured out by simply running a few sprints. If you completed <code class=\"language-text\">40</code> points in the first sprint and <code class=\"language-text\">20</code> in the second, load about <code class=\"language-text\">30</code> points into the next sprint.</p>\n<p>Even though the second sprint’s completion rate dropped 50% compared to the first, don’t worry!</p>\n<p>Unfinished issues from the second sprint carry over to the third, so the third sprint’s completion rate will be higher than expected. Average it out over a few sprints, and you’ll get a reliable baseline for your team’s velocity.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 493px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ebd2e73b77c8a5a1b46423a098f0839e/78ff8/dash.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 136.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG2V2i05IVuTk6IsP/EAB0QAAICAgMBAAAAAAAAAAAAAAECAxIAEQQhMTP/2gAIAQEAAQUClVbjplJCyK13hvleYuPJshtFDtYvPRD8/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABAwQDAQAAAAAAAAAAAAABABEhAhAiYRIxQYH/2gAIAQEABj8CJPqx6WRlOQ5qjSDv8TUiNoGOHtyNql7f/8QAHRABAAMBAQADAQAAAAAAAAAAAQARITFBUXGBsf/aAAgBAQABPyGujYFR5LG+FW+sMFn0geREeCKRZXFUQ0BPFEcYWqJvwRirBMIhL2aZpTGdvTY/jP7M/9oADAMBAAIAAwAAABBAAgD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAgEAEAAgICAQUAAAAAAAAAAAABESEAMUFRYXGRobHw/9oACAEBAAE/EDOoFiohPjeWGCBTJdRvYYyDcrD4yCFIDFi2d1l4fVUnydxzgPMQbHquQTuKCzIMhbglBZVsY175AmSZDjCFDtA7+87VLCpEArozV+rz/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dash\" title=\"\" src=\"/static/ebd2e73b77c8a5a1b46423a098f0839e/78ff8/dash.jpg\" srcset=\"/static/ebd2e73b77c8a5a1b46423a098f0839e/0913d/dash.jpg 160w,\n/static/ebd2e73b77c8a5a1b46423a098f0839e/cb69c/dash.jpg 320w,\n/static/ebd2e73b77c8a5a1b46423a098f0839e/78ff8/dash.jpg 493w\" sizes=\"(max-width: 493px) 100vw, 493px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>A bad sprint is likely followed by an overachieving one!</small>\n</center>\n<p>And here’s the important part: the sprint deadline is not a hard deadline. If a deployment was late, analyze why and make sure it doesn’t happen again. Don’t stress too much. Just don’t make the same mistake twice.</p>\n<h3 id=\"retrospective\" style=\"position:relative;\">Retrospective<a href=\"#retrospective\" aria-label=\"retrospective permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The retrospective is held at the end of each sprint, and I consider it the most important element of agile.</p>\n<p>A retrospective is a lightweight meeting where the team discusses how to improve. It should never feel heavy or intimidating!</p>\n<p>At my workplace, we sometimes hold retrospectives at a café near the office over coffee. One method is to draw a timeline, have team members write warm moments and cold moments on sticky notes, place them on the timeline, and vote on topics to discuss. Another is to simply have everyone bring a topic and discuss freely.</p>\n<p>Through the retrospective, the team decides on action items for the next sprint and assigns an owner to each one. Without a designated owner, action items tend to fizzle out.</p>\n<p>The assigned team member periodically reminds others and takes responsibility for completing the action item within the sprint.</p>\n<h2 id=\"so-is-agile-good\" style=\"position:relative;\">So Is Agile Good?<a href=\"#so-is-agile-good\" aria-label=\"so is agile good permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Personally, I prefer agile — handling small stories and deploying within 1-2 weeks — over the waterfall model with its looming deadlines. Short development-to-deployment cycles mean faster user feedback, and the satisfaction of shipping frequently is genuinely motivating. But agile isn’t a silver bullet that works in every situation. There are awkward gray areas.</p>\n<h3 id=\"this-isnt-agile\" style=\"position:relative;\">“This Isn’t Agile!”<a href=\"#this-isnt-agile\" aria-label=\"this isnt agile permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>I’ve heard this line quite a few times during daily scrums at work. The situation typically goes like this:</p>\n<blockquote>\n<p>Something needs to be done. → The issue turns out to be bigger than expected. → There are heavy dependencies between features, so deploying separately is difficult. → Let’s just do it all at once and deploy!</p>\n</blockquote>\n<p>Then someone chimes in:</p>\n<blockquote>\n<p>Hmm, but… that doesn’t seem very agile, does it?</p>\n</blockquote>\n<p>And suddenly everyone’s head is spinning. “How do we handle this in an agile way?” Someone asks “so what would the agile approach be?” but nobody has an answer — because the issue simply can’t be broken down into smaller pieces.</p>\n<p>But this isn’t what agile is about. Agile isn’t a rigid set of rules and regulations.</p>\n<p>Sure, there’s the Agile Manifesto and the 12 principles, but those are just guidelines. Every team is different — the idea that a single method works perfectly for every team in the world is absurd.</p>\n<p>I believe in following agile’s basic guidelines while flexibly adapting them to fit each team. You don’t have to follow the manifesto or the principles to the letter. If your team comes up with some creative approach that works for them, that’s perfectly fine. We’re all just trying to work well together — there’s no reason to create rigid rules for the sake of it. Just get the work done.</p>\n<h3 id=\"dont-get-too-hung-up-on-agile\" style=\"position:relative;\">Don’t Get Too Hung Up on Agile<a href=\"#dont-get-too-hung-up-on-agile\" aria-label=\"dont get too hung up on agile permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When I first heard the Agile Manifesto, I’ll be honest — it reminded me of communism.</p>\n<p>When Marx first proposed Marxism and wrote <em>Das Kapital</em>, the prevailing sentiment among workers was that communism was the perfect system, that it would keep evolving while capitalism would eventually collapse on its own. But communism in practice hit the wall of reality, mutating into Stalinism, Maoism, and other variants that mostly ended in dictatorship.</p>\n<p>What started as “let’s all prosper together” became “let’s all be poor together” once it met the real world.</p>\n<p>Similarly, agile in practice doesn’t always run as smoothly as the theory suggests. The situation I described above is one of many awkward scenarios. What do you do when an issue can’t be broken down and won’t fit within a single sprint?</p>\n<p>The Agile Manifesto says all the right things, but obsessing over it can turn your organization into one that creates work for the sake of work.</p>\n<p>Consider the capitalism we enjoy today. If it had stayed as Adam Smith originally envisioned — “leave the market alone and it’ll sort itself out” — it probably would have collapsed. But by incorporating good ideas from socialism through policies like the New Deal — nationalization programs, welfare policies — capitalism evolved and survived. Nothing is absolutely perfect.</p>\n<p>Likewise, whether it’s agile, waterfall, kanban, or whatever else — I think all that matters is working efficiently. So I took the Agile Manifesto in one ear and let it out the other. Mix and match whatever looks good, and if it works for your team, that’s all that counts. The manifesto says such obvious things that it didn’t feel worth memorizing.</p>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>What I took away from the agile coaching was the ironic realization that “there’s no right answer in agile” — and simultaneously, “wait, so does that mean as long as you can ship products nimbly, the manifesto and everything else doesn’t actually matter?”</p>\n<p>I still believe that agile is simply about delivering products to customers nimbly — whether your sprints are one week or two, however you do estimation, whatever your method. It doesn’t matter.</p>\n<p>That said, if your team is looking to adopt agile, I think it’s worth doing it properly, which is why I’m sharing what I learned from our coaching experience. Having the team come together, try different approaches, reflect on what worked through retrospectives, and discuss how to improve — that’s an experience that’s genuinely hard to come by. It’s actually really fun, I promise.</p>\n<p>Agile, done right, requires a surprising amount of study. There’s a lot to learn, and you need the ability to adapt and evaluate these concepts for your specific team. But from what I’ve experienced firsthand and heard from developers at other organizations, many teams that claim to practice agile are simply running sprints, holding daily scrum meetings, and using JIRA — and calling that agile.</p>\n<p>Without knowing how many story points your team can realistically handle per sprint, or checking whether your external and internal customers are actually satisfied — agile without this kind of continuous inspection is nothing more than repeating 1-2 week deadlines. I’ve been there, and trust me, it’s miserable. The constant pressure of deadlines every single week… ugh.</p>\n<p>I hope that as you develop an interest in agile, you’ll also bring a passion for collaboration — and that you can have fun while working with your team.</p>\n<p>That wraps up this post on what agile even is.</p>","fields":{"slug":"20190702-what-is-agile-en","path":"/2019/07/02/what-is-agile/en/","lang":"en"},"frontmatter":{"title":"What Even Is Agile, Anyway?","subTitle":"For teams that adopted agile but can't seem to make it work","date":"Jul 02, 2019","categories":["Soft Skills"],"tags":["Agile","Agile Process","Software Development Methodology","Team Management"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/ddbff2c3ca65fe24699da104fe514fa7/3a812/thumbnail.jpg","srcSet":"/static/ddbff2c3ca65fe24699da104fe514fa7/3a812/thumbnail.jpg 320w,\n/static/ddbff2c3ca65fe24699da104fe514fa7/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/ddbff2c3ca65fe24699da104fe514fa7/fc5c5/thumbnail.webp 320w,\n/static/ddbff2c3ca65fe24699da104fe514fa7/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ddbff2c3ca65fe24699da104fe514fa7/2d839/thumbnail.jpg","srcSet":"/static/ddbff2c3ca65fe24699da104fe514fa7/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/ddbff2c3ca65fe24699da104fe514fa7/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"903e28d3-c3a1-5cde-90da-2d3a97bb77cf","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-the-v8-engine\">What Is the V8 Engine?</a></p>\n</li>\n<li>\n<p><a href=\"#how-the-v8-engine-works\">How the V8 Engine Works</a></p>\n<ul>\n<li><a href=\"#parsing-understanding-what-the-code-means\">Parsing: Understanding What the Code Means</a></li>\n<li><a href=\"#generating-bytecode-with-ignition\">Generating Bytecode with Ignition</a></li>\n<li><a href=\"#cooling-down-hot-code-with-turbofan\">Cooling Down Hot Code with TurboFan</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#closing-thoughts\">Closing Thoughts</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to explore how Google’s V8 engine interprets and executes JavaScript. V8 is written in C++, but since C++ isn’t my primary language and the codebase is massive, I won’t be doing an exhaustive analysis. Instead, I’ll try to cross-reference information available on the web with V8’s actual source code.","html":"<p>In this post, I want to explore how Google’s V8 engine interprets and executes JavaScript. V8 is written in C++, but since C++ isn’t my primary language and the codebase is massive, I won’t be doing an exhaustive analysis. Instead, I’ll try to cross-reference information available on the web with V8’s actual source code.</p>\n<!-- more -->\n<h2 id=\"what-is-the-v8-engine\" style=\"position:relative;\">What Is the V8 Engine?<a href=\"#what-is-the-v8-engine\" aria-label=\"what is the v8 engine permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The V8 engine is a high-performance JavaScript &#x26; WebAssembly engine written in C++, led by Google. It’s also open source, so you can clone it from the <a href=\"https://github.com/v8/v8\" target=\"_blank\" rel=\"nofollow\">V8 engine GitHub repository</a>. It’s currently used in Google Chrome and Node.js, and implements the ECMAScript and WebAssembly standards.</p>\n<p>As of June 28, 2019, if you check the <a href=\"https://compat-table.github.io/compat-table/es2016plus/\" target=\"_blank\" rel=\"nofollow\">Kangax Table</a>, you can see that CH (Chromium) and Node — both powered by V8 — have implemented nearly all ES2016+ features, while Microsoft’s Chakra and Mozilla’s SpiderMonkey still have noticeable gaps marked in red.</p>\n<blockquote>\n<p>To improve compatibility with other platforms and reduce mutual risk, Microsoft Edge will now use the V8 engine as part of this change. We still have a lot to learn, but we’re excited to become part of the V8 community and to contribute to this project.</p>\n<p><strong>ChakraCore team</strong> <em><a href=\"https://github.com/Microsoft/ChakraCore/issues/5865\" target=\"_blank\" rel=\"nofollow\">ChakraCore Github Issue</a></em></p>\n</blockquote>\n<p>As it happens, the Edge browser — which had been using the Chakra engine — has announced it will adopt V8 as part of joining the Chromium open-source project. Whether this is good or bad… I’m not quite sure yet.</p>\n<p>If you want to build V8 yourself and actually debug it, you can’t just clone it with git. If you want to go that far, check out the V8 official site’s <a href=\"https://v8.dev/docs/source-code\" target=\"_blank\" rel=\"nofollow\">Checking out the V8 source code</a>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0df8b088fb8103f7f024eb0c7acb8d7c/c84e8/meme1.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBAb/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAWqmWguiFRl//8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIABBETIf/aAAgBAQABBQLYGCvstkqh9Sqx5//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEJ/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAESMRARQVH/2gAIAQEABj8CJuV4TXpt2X0//8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFRQfH/2gAIAQEAAT8hoZUK3AiejiFgexiaXKdd9QbNCP/aAAwDAQACAAMAAAAQIz//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPxCD/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/ENFj/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBYbHR/9oACAEBAAE/EKLyBDy1bKKN9MM0wCZHUVaOyn5NGIgL516gUVkB2iif/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"meme1\" title=\"\" src=\"/static/0df8b088fb8103f7f024eb0c7acb8d7c/c08c5/meme1.jpg\" srcset=\"/static/0df8b088fb8103f7f024eb0c7acb8d7c/0913d/meme1.jpg 160w,\n/static/0df8b088fb8103f7f024eb0c7acb8d7c/cb69c/meme1.jpg 320w,\n/static/0df8b088fb8103f7f024eb0c7acb8d7c/c08c5/meme1.jpg 640w,\n/static/0df8b088fb8103f7f024eb0c7acb8d7c/c84e8/meme1.jpg 743w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Chromium is such a massive project that just the installation process for building is quite demanding</small>\n</center>\n<p>I’ve set it up once before, and as you might expect, it didn’t go smoothly — so I recommend attempting it on a weekend when you have plenty of time. Since I’ll only be analyzing the source code this time, I simply cloned it using git.</p>\n<h2 id=\"how-the-v8-engine-works\" style=\"position:relative;\">How the V8 Engine Works<a href=\"#how-the-v8-engine-works\" aria-label=\"how the v8 engine works permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>In general, when using JavaScript, you don’t need to think deeply about low-level details like how the engine works. After all, the whole point of using an engine is so developers don’t have to worry about such things. But if you truly want to squeeze the best possible performance out of JavaScript, you need at least some understanding of how your code is executed.</p>\n<p>Let’s start with a simple diagram showing how V8 interprets and executes our JavaScript source code. I’ll explain the details below, so for now, just get a general feel for the flow.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/27979b3d2674a00f5b68af5f303fb27c/159fb/v8compiler-pipeline.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVR42nVSO27cMBT04XIJH8MHSJHWvoNLH8BFgJQBUqQIDBd2s81+tZBISqT4E0VSVIbSOrEE7NsnAsvH4ZsZvpvxevR97xwW37nedh12hmFI45imwN+ba0iUWylZXe/3+6Io2lbO+yGOMd8wLsAhBGMsWjnnpJTH47EsS8YYIaQihHOBMz++P989Hr8+vv75/XMBBhJ4HNVaNzxHHKKxFsS7zlmbab+8vn35tru9fy+L/QKMQ9paqRTA2hhQLasKRIRo9bQ1H3t4bp5+qaw/pYXm7EdK8wqj6roB7c1mg4uUUpce2UO/1rwKyihjtZpYYEVmF+e8+PUBRivI673P5MH5VPCaj/PxqYqnQmnS36W0dBtWCSG22y1M5g2n+Hl+NmckdVRYYbQ5nU6ogor3YQGOMUIVyU/Cjbbaa+XVPAzCC2oo2BOKOpVSodOadohRtC3edvIrrQYGLgKJmYlTeUU72s5hpOqmgbphWIBxL+zAmyHxCqC5AHvvIQaytVLGdgPn2Bo/JHkoYmy32x0OB0opOl3Acw+AIQYziJDaDE0zns+XLMsgVYkRJQS0q4r812xN3zIKJR4XxojP/+v5STOKuRQCFIMjnFdK/QX7NF/0AdGOjgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"v8compiler pipeline\" title=\"\" src=\"/static/27979b3d2674a00f5b68af5f303fb27c/6af66/v8compiler-pipeline.png\" srcset=\"/static/27979b3d2674a00f5b68af5f303fb27c/69538/v8compiler-pipeline.png 160w,\n/static/27979b3d2674a00f5b68af5f303fb27c/72799/v8compiler-pipeline.png 320w,\n/static/27979b3d2674a00f5b68af5f303fb27c/6af66/v8compiler-pipeline.png 640w,\n/static/27979b3d2674a00f5b68af5f303fb27c/d9199/v8compiler-pipeline.png 960w,\n/static/27979b3d2674a00f5b68af5f303fb27c/159fb/v8compiler-pipeline.png 1019w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Slides from Franziska Hinkelmann's presentation at JSConf EU 2017</small>\n</center>\n<p>V8 takes our source code and first hands it to the <code class=\"language-text\">Parser</code>. The parser analyzes the source code and transforms it into an <code class=\"language-text\">AST (Abstract Syntax Tree)</code>.</p>\n<p>Next, this AST is passed to <code class=\"language-text\">Ignition</code>, which is an interpreter that converts JavaScript into bytecode. By converting the original source into bytecode — a form much easier for the computer to interpret — V8 avoids the overhead of re-parsing the original code, reduces the amount of code, and saves memory during execution.</p>\n<p>The bytecode is then executed, making our source code actually run. Among the executed code, frequently used portions are sent to <code class=\"language-text\">TurboFan</code>, where they’re recompiled into <code class=\"language-text\">Optimized Machine Code</code>. If that code later becomes less frequently used, it gets deoptimized.</p>\n<p>An interesting detail is that many of V8’s components are named after real engine parts. The V8 engine is actually a type of engine commonly found in high-performance cars — named because eight pistons are arranged in a V shape, driving a single crankshaft.</p>\n<p><code class=\"language-text\">Ignition</code> refers to the igniter used to start an engine. Your source code is revving up and running. And when it gets called too many times and your code starts running hot, <code class=\"language-text\">TurboFan</code> optimizes it — cooling things down so it doesn’t overheat.</p>\n<p>If you’ve read other V8 analysis posts, you may have also seen components called <code class=\"language-text\">Full-codegen</code> and <code class=\"language-text\">Crankshaft</code>. The name <code class=\"language-text\">Crankshaft</code> also comes from real engines — it’s the core component connected to the pistons that converts their reciprocating motion into rotational motion. But as of June 19, 2019, these components can no longer be found in V8.</p>\n<blockquote>\n<p>Starting with V8 v5.9, Ignition and TurboFan are used across the board for JavaScript execution. Additionally, starting with V8 v5.9, Full-codegen and Crankshaft — technologies that have served V8 well — are no longer used in V8, as they were unable to keep up with new JavaScript features and the optimizations those features demand. We plan to remove them entirely soon, which means V8 will have a much simpler and more maintainable architecture going forward.</p>\n<p><strong>V8 team</strong> <em><a href=\"https://v8.dev/blog/launching-ignition-and-turbofan\" target=\"_blank\" rel=\"nofollow\">Launching Ignition and TurboFan</a></em></p>\n</blockquote>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 509px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/843ec14e0e37c1082ef853b3b1bb2f81/05852/bye.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAFx+lmwZkn/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQMREiH/2gAIAQEAAQUCcVmDI+Ipn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAgEBPwG6r//EABcQAQEBAQAAAAAAAAAAAAAAAAAxECH/2gAIAQEABj8C4irv/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERUSFhgbHw/9oACAEBAAE/IUV2LyKz5QugmW5Lcnmn/9oADAMBAAIAAwAAABBjP//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAwEBPxCYj//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EAp//8QAGxABAQEBAAMBAAAAAAAAAAAAAREhADFBYZH/2gAIAQEAAT8QQrJ6HKlMVGY/nSyHzTmGgRR5Y15drE3PXQyD9x3/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bye\" title=\"\" src=\"/static/843ec14e0e37c1082ef853b3b1bb2f81/05852/bye.jpg\" srcset=\"/static/843ec14e0e37c1082ef853b3b1bb2f81/0913d/bye.jpg 160w,\n/static/843ec14e0e37c1082ef853b3b1bb2f81/cb69c/bye.jpg 320w,\n/static/843ec14e0e37c1082ef853b3b1bb2f81/05852/bye.jpg 509w\" sizes=\"(max-width: 509px) 100vw, 509px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Yep. They were replaced starting from V8 v5.9.</small>\n</center>\n<p>Before v5.9, <code class=\"language-text\">Full-codegen</code> and <code class=\"language-text\">Crankshaft</code> coexisted alongside the newer components — but this wasn’t by choice. Early versions of <code class=\"language-text\">Ignition</code> and <code class=\"language-text\">TurboFan</code> didn’t perform as well as expected, and there were issues where optimized code couldn’t be directly deoptimized back to bytecode, so the V8 team had no choice but to keep <code class=\"language-text\">Full-codegen</code> and <code class=\"language-text\">Crankshaft</code> around as fallbacks.</p>\n<p>The V8 team’s original goal was always to use only <code class=\"language-text\">Ignition</code> and <code class=\"language-text\">TurboFan</code>, freely moving between <code class=\"language-text\">bytecode ↔ optimized code</code>.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/r5OWCtuKiAk?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div>\n<br /></p>\n<p>This video is from BlinkOn 2016, where <strong>Ross McIlroy</strong> of the Chrome Mobile Performance London Team introduces <code class=\"language-text\">Ignition</code>. The 9:47–11:14 segment explains the unfortunate reasons they couldn’t remove the legacy <code class=\"language-text\">Full-codegen</code> and <code class=\"language-text\">Crankshaft</code>. He seems to find it funny himself while explaining.</p>\n<p>Now let’s take a brief look at how V8 actually parses and executes JavaScript.</p>\n<h3 id=\"parsing-understanding-what-the-code-means\" style=\"position:relative;\">Parsing: Understanding What the Code Means<a href=\"#parsing-understanding-what-the-code-means\" aria-label=\"parsing understanding what the code means permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Parsing is the process of loading source code and transforming it into an AST (Abstract Syntax Tree). The AST is a data structure widely used in compilers — think of it as restructuring the source code we write into a form that’s easy for the computer to understand.</p>\n<p>For example, if we were to parse JavaScript with JavaScript, it would look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello,'</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// The code above can be roughly structured like this:</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FunctionDeclaration'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello'</span>\n  <span class=\"token literal-property property\">arguments</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'Variable'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'name'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Laid out like this, it’s simpler than you might expect. But this is just one example — the parser also has to interpret and parse syntax like <code class=\"language-text\">for</code>, <code class=\"language-text\">if</code>, <code class=\"language-text\">a = 1 + 2</code>, <code class=\"language-text\">function () {}</code>, and so on. That’s why the parser’s internals are surprisingly large. V8’s <code class=\"language-text\">parser.cc</code> file alone exceeds 3,000 lines.</p>\n<p>In any case, just remember that parsing is the process of converting code into an AST — a form that’s easy for the computer to analyze. The V8 engine does exactly what we just illustrated in JavaScript, but using C++.</p>\n<p>Let’s take a look at the method in V8’s parsing code that handles literal arithmetic expressions like <code class=\"language-text\">1 + 2</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token comment\">// v8/src/parsing/parser.cc</span>\n<span class=\"token keyword\">bool</span> <span class=\"token class-name\">Parser</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShortcutNumericLiteralBinaryExpression</span><span class=\"token punctuation\">(</span>Expression<span class=\"token operator\">*</span><span class=\"token operator\">*</span> x<span class=\"token punctuation\">,</span> Expression<span class=\"token operator\">*</span> y<span class=\"token punctuation\">,</span> Token<span class=\"token double-colon punctuation\">::</span>Value op<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> pos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">IsNumberLiteral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> y<span class=\"token operator\">-></span><span class=\"token function\">IsNumberLiteral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">double</span> x_val <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">AsLiteral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">AsNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">double</span> y_val <span class=\"token operator\">=</span> y<span class=\"token operator\">-></span><span class=\"token function\">AsLiteral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">AsNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>op<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> Token<span class=\"token double-colon punctuation\">::</span>ADD<span class=\"token operator\">:</span>\n        <span class=\"token operator\">*</span>x <span class=\"token operator\">=</span> <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">NewNumberLiteral</span><span class=\"token punctuation\">(</span>x_val <span class=\"token operator\">+</span> y_val<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> Token<span class=\"token double-colon punctuation\">::</span>SUB<span class=\"token operator\">:</span>\n        <span class=\"token operator\">*</span>x <span class=\"token operator\">=</span> <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">NewNumberLiteral</span><span class=\"token punctuation\">(</span>x_val <span class=\"token operator\">-</span> y_val<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// ...</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This is a static method called <code class=\"language-text\">ShortcutNumericLiteralBinaryExpression</code> <em>(what a mouthful…)</em> on the <code class=\"language-text\">Parser</code> class, declared in V8’s <code class=\"language-text\">parser.cc</code>.</p>\n<p>Looking at the parameters: <code class=\"language-text\">x</code> and <code class=\"language-text\">y</code> are <code class=\"language-text\">Expression</code> objects representing the values used in the expression. <code class=\"language-text\">op</code> represents the actual operation — whether the expression means <code class=\"language-text\">x + y</code> or <code class=\"language-text\">x - y</code> — along with its type. <code class=\"language-text\">pos</code> indicates the position of the code currently being parsed within the overall source.</p>\n<p>As explained above, this method is called when it encounters source code like <code class=\"language-text\">1 + 2</code>. You can see it inspecting the expression against conditions like <code class=\"language-text\">Token::ADD</code> and <code class=\"language-text\">Token::SUB</code> and parsing accordingly. The “tokens” here are string fragments produced by lexically analyzing the source code according to JavaScript’s grammar rules.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Tokens look roughly like this</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'const'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'='</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>After the calculation, the resulting value is turned into an AST node using the <code class=\"language-text\">AstNodeFactory</code> class’s <code class=\"language-text\">NewNumberLiteral</code> static method.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token comment\">// v8/src/ast/ast.cc</span>\nLiteral<span class=\"token operator\">*</span> <span class=\"token class-name\">AstNodeFactory</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">NewNumberLiteral</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span> number<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> pos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> int_value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">DoubleToSmiInteger</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>int_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">NewSmiLiteral</span><span class=\"token punctuation\">(</span>int_value<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>zone_<span class=\"token punctuation\">)</span> <span class=\"token function\">Literal</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>During this process, V8 identifies the meaning of code elements like variables, functions, and conditionals. JavaScript’s scoping — something we’re all familiar with — is also established during this phase. For more details on variable declarations, see <a href=\"/2019/06/18/javascript-let-const\">JavaScript’s let and const, and TDZ</a>.</p>\n<h3 id=\"generating-bytecode-with-ignition\" style=\"position:relative;\">Generating Bytecode with Ignition<a href=\"#generating-bytecode-with-ignition\" aria-label=\"generating bytecode with ignition permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <img src=\"/3ef804b01e47419b1954df82e079ed32/ignition.svg\" width=\"300\">\n  <br>\n</center>\n<p>Bytecode is an intermediate representation produced by compiling high-level source code into a form that a virtual machine can understand more easily. In V8, <code class=\"language-text\">Ignition</code> is responsible for this.</p>\n<h4 id=\"what-is-ignition\" style=\"position:relative;\">What Is Ignition?<a href=\"#what-is-ignition\" aria-label=\"what is ignition permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><code class=\"language-text\">Ignition</code> is an interpreter that completely replaces the legacy <code class=\"language-text\">Full-codegen</code>. The old <code class=\"language-text\">Full-codegen</code> compiled the entire source code at once. As mentioned earlier, the V8 team recognized that <code class=\"language-text\">Full-codegen</code>’s approach of compiling all source code at once consumed a significant amount of memory.</p>\n<p>Additionally, since JavaScript is a dynamically typed language — unlike statically typed languages like C++ — there were too many unknowns before runtime, making optimization with this approach extremely difficult.</p>\n<p>So when developing <code class=\"language-text\">Ignition</code>, they opted for an interpreter-based approach that processes code line by line as it executes, rather than compiling everything at once, aiming for three key benefits:</p>\n<blockquote>\n<ol>\n<li><strong>Reduced memory usage.</strong> Compiling JavaScript to bytecode is more efficient than compiling directly to machine code.</li>\n<li><strong>Reduced parsing overhead.</strong> Bytecode is concise, making it easier to re-parse.</li>\n<li><strong>Reduced compilation pipeline complexity.</strong> Both optimization and deoptimization only need to deal with bytecode, simplifying everything.</li>\n</ol>\n<p><strong>Ross McIlroy</strong> <em>Ignition - an interpreter for V8</em></p>\n</blockquote>\n<p>Just remember that <code class=\"language-text\">Ignition</code> is the component that converts code to bytecode line by line as it executes.</p>\n<p>So what does bytecode actually look like, and why is it easier for the computer to interpret? Let’s take the <code class=\"language-text\">hello</code> function from earlier and see what bytecode it generates.</p>\n<h4 id=\"viewing-the-bytecode-yourself\" style=\"position:relative;\">Viewing the Bytecode Yourself<a href=\"#viewing-the-bytecode-yourself\" aria-label=\"viewing the bytecode yourself permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello,'</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// If the code isn't used, it won't be interpreted to bytecode, so we need to call it.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Evan'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you’re using Node.js v8.3+, you can add the <code class=\"language-text\">--print-bytecode</code> flag to see how your source code was interpreted into bytecode. Alternatively, you could use V8’s D8 debugging tool, but that requires building V8 — and as I mentioned, the build setup isn’t exactly smooth. So I just used <code class=\"language-text\">--print-bytecode</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">node</span> --print-bytecode add.js\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">[</span>generated bytecode <span class=\"token keyword\">for</span> function: hello<span class=\"token punctuation\">]</span>\nParameter count <span class=\"token number\">2</span>\nFrame size <span class=\"token number\">8</span>\n   <span class=\"token number\">15</span> E<span class=\"token operator\">></span> 0x2ac4000d47b2 @    <span class=\"token number\">0</span> <span class=\"token builtin class-name\">:</span> a0                StackCheck\n   <span class=\"token number\">30</span> S<span class=\"token operator\">></span> 0x2ac4000d47b3 @    <span class=\"token number\">1</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">12</span> 00             LdaConstant <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n         0x2ac4000d47b5 @    <span class=\"token number\">3</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">26</span> fb             Star r0\n         0x2ac4000d47b7 @    <span class=\"token number\">5</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">25</span> 02             Ldar a0\n   <span class=\"token number\">46</span> E<span class=\"token operator\">></span> 0x2ac4000d47b9 @    <span class=\"token number\">7</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">32</span> fb 00          Add r0, <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n   <span class=\"token number\">53</span> S<span class=\"token operator\">></span> 0x2ac4000d47bc @   <span class=\"token number\">10</span> <span class=\"token builtin class-name\">:</span> a4                Return\n<span class=\"token punctuation\">..</span>.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This is what the <code class=\"language-text\">hello</code> function looks like after being converted to bytecode. Wait — I only used one parameter, <code class=\"language-text\">name</code>, but the <code class=\"language-text\">Parameter count</code> says <code class=\"language-text\">2</code>.</p>\n<p>One of them is the implicit receiver, <code class=\"language-text\">this</code>. If you use <code class=\"language-text\">this</code> inside a function to refer to the function itself — yes, it’s that <code class=\"language-text\">this</code>. Below that, you can see values being assigned to registers. Let me explain briefly.</p>\n<p>For those who might not be familiar: a register is high-speed memory built into the CPU, and an accumulator is a register used to store intermediate calculation results.</p>\n<hr>\n<ol>\n<li><code class=\"language-text\">StackCheck</code>: Checks the upper limit of the stack pointer. If the stack exceeds the threshold, a Stack Overflow occurs and function execution is halted.</li>\n<li><code class=\"language-text\">LdaConstant [0]</code>: <code class=\"language-text\">Ld</code> stands for <code class=\"language-text\">Load</code>. It loads a constant into the accumulator. This constant is <code class=\"language-text\">Hello,</code>.</li>\n<li><code class=\"language-text\">Star r0</code>: Moves the value in the accumulator to register <code class=\"language-text\">r0</code>. <code class=\"language-text\">r0</code> is a register for local variables.</li>\n<li><code class=\"language-text\">Ldar a0</code>: Loads the value from register <code class=\"language-text\">a0</code> into the accumulator. In this case, <code class=\"language-text\">a0</code> holds the argument <code class=\"language-text\">name</code>.</li>\n<li><code class=\"language-text\">Add r0, [0]</code>: Adds <code class=\"language-text\">Hello,</code> from <code class=\"language-text\">r0</code> and <code class=\"language-text\">0</code>, storing the result in the accumulator. The constant <code class=\"language-text\">0</code> is mapped to the argument <code class=\"language-text\">name</code> at runtime.</li>\n<li><code class=\"language-text\">Return</code>: Returns the value in the accumulator.</li>\n</ol>\n<hr>\n<p>The <code class=\"language-text\">hello</code> function is something you’d declare without a second thought when writing JavaScript, but internally it goes through 6 steps to return a value.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 204px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e75c06934a527f059c1754c33f12e6ff/779ef/slow.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 126.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEu0lEQVR42l2VWUhXXRTFb2Rv9ZA+CQUGBtFzYIIviUJUZmRhNpelmBOhaKiVRWWDaWJig5qalJhmZE6lVGSllZQTFFhWqIlDlj2EZq6P34778l04/M+955x11l577f13Xr9+raqqKvX39ysnJ0ebNm1SbGysNm/erB07digqKkpXr15VZWWlLl26pIiICKWkpOj79+/Kzs5Wamqqtm/fbuPEiRNyOjs71dzcrKKiIgMJDQ010ISEBIWFhen8+fMqLy/X7t27FRMToytXrmhgYMDAIiMjlZ6ernXr1unw4cM6evSonJKSEtXW1qqsrEw7d+5UYmKibYTd/v37DWDv3r3GuqenR79+/dLFixeNEd/27dtn63Fxcaqvr5eTkZGhO3fu2Dhw4IABrly5UqtWrdLq1asVFBRkF23ZskW3bt3S5cuXtWfPHrsoOTnZJGFtw4YNqqurk9Pd3a0HDx7o2LFjpg+Ly5Yt08aNG7V06VIFBwfbJchw8uRJY0R4Z86c0fHjxy0SZILhs2fP5HR0dKirq8sWd+3apfj4eFtEz4ULF2rFihXy9fXV/Pnz5efnZ1GcPXvWLti2bZtCQkJ07tw5S1pLS8s/hgA2NDRYIk6fPm0b29vblZeXp+XLl2vBggVasmSJhZ6fn28XMo+Ojja9KyoqbG4achCxGYRDIrDH0NCQHj9+rNu3b9tFJIIEoh8JAYhMY6mtW7eafZ4/fy5nZGREL1++tMOtra1Gm6epqUlHjhzRqVOnLBmAkYi1a9eabnixuLjYrMX6z58/1dbWJoeDhN3b22sfebAGNoIpicD4jIMHD2r9+vXmTdiFh4frzZs3dgamyOZ8+fLF9AIQLXl3GVI5169ft3lhYaHWrFmjmzdvCqsdOnRIExMTevHihTkDGYjSoUoIkw1uiY2Pjxvox48fTWjeMTGVQNhkmcvT0tIs21x67949PXnyRM61a9f08OFDM2hNTY2VGQadnp7W7OysZmZmDJzQ0Y1wL1y4YJ7l2/379y3LuANypiEDdiwwqAZkePfunaj1Hz9+2GEqAx1hSFREg8HJME6AmAGSXUAQHkCy52o3NTWlt2/fGms0JQkMIoMxg6YBY2OIHRobGw0AH1HTJIBQCBtd7t69aw6gPeXm5hpDwAmfkqU0qTIIOAUFBaYJmWNzZmamsrKy7BDf8SGZ//37t96/fy/6J2Xq6ekpb29v+fv7W/lR+waIKalf+trTp0+VlJRkWiEBgOjC8+jRI1H3X79+tQtYxypeXl5yHEc+Pj4WqcMBQGBCqITCZtii5+TkpBkfz5H1ubk5u8D9HRwcVEBAgDw8PP7V8qtXr6znUQHoWVpaauYlMZQlCQHUfVw7/f37V3/+/LFv9AE6kvVD6o/WtGjRIqtR/goYNAdC6+vrs0P8YiGaBToC6A6cQN+k85tt0GDevHk26H8YHDBs9O3bNwMcHR21yvnw4YM+ffpk3nRNz3famwESHoD0PJgyp4PzwMTtPjD5/+PqSEkuXrz4X8j0OZchtzDHSq5ebMLIY2NjGh4e1ufPn409czwbGBhonR3bmLHpEPiOdkT4JAMjkwwY8ss7wGSxurragNhLo4Adnr1x44b9p/wHGUBrDK6MFtQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"slow\" title=\"\" src=\"/static/e75c06934a527f059c1754c33f12e6ff/779ef/slow.png\" srcset=\"/static/e75c06934a527f059c1754c33f12e6ff/69538/slow.png 160w,\n/static/e75c06934a527f059c1754c33f12e6ff/779ef/slow.png 204w\" sizes=\"(max-width: 204px) 100vw, 204px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>It does this much work under the hood, so let's not complain too much when it's occasionally slow</small>\n</center>\n<p>Bytecode is essentially a set of instructions telling the CPU exactly how to use its registers and accumulator. It’s mind-bending for humans, but much easier for the computer to understand.</p>\n<p>Since the V8 engine converts all of our JavaScript code into bytecode like this internally, the first time a line of code runs there’s a slight delay — but from then on, it can achieve performance close to a compiled language.</p>\n<h3 id=\"cooling-down-hot-code-with-turbofan\" style=\"position:relative;\">Cooling Down Hot Code with TurboFan<a href=\"#cooling-down-hot-code-with-turbofan\" aria-label=\"cooling down hot code with turbofan permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<center>\n  <img src=\"/69868eb577b0cc588456498aa200170b/turbofan.svg\" width=\"300\">\n  <br>\n</center>\n<p><code class=\"language-text\">TurboFan</code> is the optimizing compiler that completely replaced the legacy <code class=\"language-text\">Crankshaft</code> starting with V8 v5.9. So why did <code class=\"language-text\">Crankshaft</code> get retired?</p>\n<p>Since V8 first came into the world, new computer architectures emerged and JavaScript continued to evolve, so V8 had to keep up. The V8 team kept patching things to accommodate new specifications, but eventually they determined that <code class=\"language-text\">Crankshaft</code>’s architecture couldn’t sustain continued expansion. So they built <code class=\"language-text\">TurboFan</code> — designed with multiple layers for more flexible extensibility.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0b92cf561c8d37d00ae81e4db81baadb/0b533/legacy.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.37499999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADp0lEQVR42j2SWVNiVxSF+WN570ollUpix6HbsXFqTeyYGByAy8wFZJ4RUUCmCzKpOLUoKnZrnvN7vuz4kIdVtc+9+6y91tpHd1OIcnkY5mrfz+d8kC9FP/1Siq/NDC8HLp4OgrxoSe4qcW61FP2aoBThsRjjpRjm+ThNt5xm32/CvPIe3U0xwW0hxk0+wrUQP5cCDMsRHg68fM2YeTx0MdRiPNeSPAnpsJ6UOsFLNcawEOBrKcQ/J0KasGJbm0X3WE3Q3/fRSar0ckHuiyGGrTQPorQXNtPMqtzL+UsjxW0+zH01zmM9zY2oPM/tciv3/25naMYUlNVJdINylLtihFZC5SznY1AMiL0kzT2VesjIVcHLw1GQpyMZVA1xURI34qSb8XAZt3Mj/Q+lKFrQjHlpHF0/o3KzJz9zfq4O/QyqQa6qSc4Pd2mGNjlNO7mrRXkQq/c1IZMch6JqKMNv91VuyyGejrMUAxaMi6PortNuumkXFykbVxErg4KPa7lwtuflJLrJWUqRYW76OY/EINnK4gZ5H/18QJbo404cDkVAN2hkS/+LLCVh5yxmpRG1o0VtDGQZxzE7Oe8m5cAWvbTC54SRRthIO2OnHTfRTdroSc9RVKGSkozrCbmv8Nfcz+guMy5p9FCPuzmVTFohM+dxMxdit+U10PILqW9DlDpoin0t7eV0z0knZKLo3qAl2XUk74JvWyyPoWv4d16XUYqpYlGhIdLb8q21a6AXMFD3GGhHrTJIFhSz0BVFvQNB3MGxDK5Jby1sIRsw4vhdnk0zbKPgtxATFSeS4YWo7ckT0oIKnbiF+u4mWeUTQeMnMrZ1TlNOulGnWHfSEtUF7xZnhZCQ23F/lIftjk7zp/cHdiIjaEU3tawVj38Bj3dasrRyKQPUPxYZGx1BPztGXtS2JaZO1k1HllU5UOgeeMipa6xv/IjOWpvgPxjzb7HkR/GWZliPfs9q6A1qZo5IfgWjf4rFrbes+UZwZ2dR89PY8uNsp3/iY+QNa/5vWfN8x6TrG3SW6iRWbRpnc+EVjoYep8BcncVYncFYmcNUnkOpfmC7NMX20RTG8iSbxXFMFekpTWLRZgRTwjOFzqHN46zrhWhJGmew1eZxaMtyXn6tTUcfsFSWhXSBnaNZwQxbxWkMhYn/iSyanp3Se5TaO3SG/IRMnsQkapSaHmt9GXtjEVdrCbW9gqu5jFvg6fwqWJV6BbX1Gz6pbSLEeSyu6vNCOCWD3vEv/fEw1QLEp/4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"legacy\" title=\"\" src=\"/static/0b92cf561c8d37d00ae81e4db81baadb/0b533/legacy.png\" srcset=\"/static/0b92cf561c8d37d00ae81e4db81baadb/69538/legacy.png 160w,\n/static/0b92cf561c8d37d00ae81e4db81baadb/72799/legacy.png 320w,\n/static/0b92cf561c8d37d00ae81e4db81baadb/0b533/legacy.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Running Crankshaft and TurboFan simultaneously probably felt something like this...</small>\n</center>\n<p>When supporting 7 architectures, what took 13,000–16,000 lines of code in <code class=\"language-text\">Crankshaft</code> could be covered in under 3,000 lines with <code class=\"language-text\">TurboFan</code>.</p>\n<p>During runtime, V8 has a component called the <code class=\"language-text\">Profiler</code> that collects data such as how frequently functions and variables are called. When this data is brought to TurboFan, it picks out the code that meets its criteria and optimizes it.</p>\n<p>The optimization techniques include Hidden Classes, Inline Caching, and various others, but I’ll cover those in more detail in a future post.</p>\n<p>To briefly explain: Hidden Classes involve classifying similar objects together for reuse. Inline Caching means that if a frequently used piece of code is a function call like <code class=\"language-text\">hello()</code>, it gets replaced with the function’s actual body <code class=\"language-text\">function hello () { ... }</code>. It’s literally caching.</p>\n<h4 id=\"what-conditions-trigger-optimization\" style=\"position:relative;\">What Conditions Trigger Optimization?<a href=\"#what-conditions-trigger-optimization\" aria-label=\"what conditions trigger optimization permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>So what exact conditions does <code class=\"language-text\">TurboFan</code> use to determine which code to optimize? Let’s look at <code class=\"language-text\">RuntimeProfiler</code>’s <code class=\"language-text\">ShouldOptimize</code> method, which determines whether a function should be optimized.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token comment\">// v8/src/execution/runtime-profiler.cc</span>\nOptimizationReason <span class=\"token class-name\">RuntimeProfiler</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShouldOptimize</span><span class=\"token punctuation\">(</span>JSFunction function<span class=\"token punctuation\">,</span> BytecodeArray bytecode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// int ticks = how many times this function has been called</span>\n  <span class=\"token keyword\">int</span> ticks <span class=\"token operator\">=</span> function<span class=\"token punctuation\">.</span><span class=\"token function\">feedback_vector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">profiler_ticks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span> ticks_for_optimization <span class=\"token operator\">=</span>\n      kProfilerTicksBeforeOptimization <span class=\"token operator\">+</span>\n      <span class=\"token punctuation\">(</span>bytecode<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> kBytecodeSizeAllowancePerTick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ticks <span class=\"token operator\">>=</span> ticks_for_optimization<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If the call count exceeds the threshold, consider it \"hot\"</span>\n    <span class=\"token keyword\">return</span> OptimizationReason<span class=\"token double-colon punctuation\">::</span>kHotAndStable<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>any_ic_changed_ <span class=\"token operator\">&amp;&amp;</span> bytecode<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> kMaxBytecodeSizeForEarlyOpt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If not inline-cached and bytecode length is small, consider it a small function</span>\n    <span class=\"token keyword\">return</span> OptimizationReason<span class=\"token double-colon punctuation\">::</span>kSmallFunction<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// If none of the above apply, don't optimize</span>\n  <span class=\"token keyword\">return</span> OptimizationReason<span class=\"token double-colon punctuation\">::</span>kDoNotOptimize<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I was a bit surprised by how few conditions there are. Of course, there are more granular conditions handled elsewhere, but this method captures the big picture.</p>\n<p><code class=\"language-text\">kHotAndStable</code> means the code is hot and stable — in plain terms, it’s called frequently (hot) and doesn’t change (stable). Code inside loops that repeatedly performs the same operation is a prime candidate for this.</p>\n<p><code class=\"language-text\">kSmallFunction</code> means that based on the length of the interpreted bytecode, if it doesn’t exceed a certain threshold, the function is considered small and gets optimized. Small, simple functions are likely to have very abstract or limited behavior, which makes them stable.</p>\n<h4 id=\"peeking-at-turbofan-in-action\" style=\"position:relative;\">Peeking at TurboFan in Action<a href=\"#peeking-at-turbofan-in-action\" aria-label=\"peeking at turbofan in action permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Let’s see how optimization works with a simple code example. I’ll declare a small function and call it repeatedly in a loop.</p>\n<p>My goal is for the function to hit the <code class=\"language-text\">ticks >= ticks_for_optimization</code> condition and reach <code class=\"language-text\">kHotAndStable</code> status. I figure if I declare any function, use the same argument types, and call it rapidly and repeatedly, it should hit <code class=\"language-text\">ShouldOptimize</code>’s threshold and get optimized as <code class=\"language-text\">kHotAndStable</code>.</p>\n<p>When running Node.js with the <code class=\"language-text\">--trace-opt</code> flag, you can observe code being optimized at runtime.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> d <span class=\"token operator\">=</span> c <span class=\"token operator\">-</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> d <span class=\"token operator\">*</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">node</span> --trace-opt test.js\n\n<span class=\"token punctuation\">[</span>marking 0x010e66b69c09 <span class=\"token operator\">&lt;</span>JSFunction <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4279<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">3</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>marking 0x010e66b6a001 <span class=\"token operator\">&lt;</span>JSFunction sample <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4371<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">3</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>compiling method 0x010e66b6a001 <span class=\"token operator\">&lt;</span>JSFunction sample <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4371<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> using TurboFan<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>compiling method 0x010e66b69c09 <span class=\"token operator\">&lt;</span>JSFunction <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4279<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> using TurboFan OSR<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>optimizing 0x010e66b69c09 <span class=\"token operator\">&lt;</span>JSFunction <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4279<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> - took <span class=\"token number\">0.132</span>, <span class=\"token number\">0.453</span>, <span class=\"token number\">0.027</span> ms<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>optimizing 0x010e66b6a001 <span class=\"token operator\">&lt;</span>JSFunction sample <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4371<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> - took <span class=\"token number\">0.850</span>, <span class=\"token number\">0.549</span>, <span class=\"token number\">0.012</span> ms<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>completed optimizing 0x010e66b6a001 <span class=\"token operator\">&lt;</span>JSFunction sample <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x10eacdd4371<span class=\"token punctuation\">)</span><span class=\"token operator\">></span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It did get optimized. The <code class=\"language-text\">ICs with typeinfo: 3/3 (100%)</code> tells us inline caching was applied.</p>\n<p>But the optimization reason says <code class=\"language-text\">small function</code>. Since I wanted the <code class=\"language-text\">kHotAndStable</code> condition, I need to tweak the code and try again. My function was too simple — <code class=\"language-text\">TurboFan</code> didn’t take it seriously.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>arguments<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Please provide arguments'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> array\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> el <span class=\"token operator\">*</span> el<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> el <span class=\"token operator\">&lt;</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I made it moderately more complex — though the logic itself is meaningless. The <code class=\"language-text\">sample</code> function simply takes arguments, transforms them, filters them, reverses the order, and returns the result. The optimization targets <code class=\"language-text\">TurboFan</code> would be watching are functions like <code class=\"language-text\">sample</code>, <code class=\"language-text\">map</code>, <code class=\"language-text\">filter</code>, <code class=\"language-text\">reverse</code>, and <code class=\"language-text\">Array.from</code>.</p>\n<p>Since there are many targets, the log output is enormous, so I’ll just show the parts where <code class=\"language-text\">TurboFan</code> marks functions for optimization.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">node</span> --trace-opt test.js\n\n<span class=\"token punctuation\">[</span>marking 0x1a368a90cc51 <span class=\"token operator\">&lt;</span>JSFunction <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a36218d4279<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">3</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/3 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>marking 0x1a36bcfa9611 <span class=\"token operator\">&lt;</span>JSFunction array.map.el <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a36218d46f9<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">1</span>/1 <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/1 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>marking 0x1a36bcfa96a1 <span class=\"token operator\">&lt;</span>JSFunction array.map.filter.el <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a36218d4761<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">1</span>/1 <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/1 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>marking 0x1a368a90cc11 <span class=\"token operator\">&lt;</span>JSFunction sample <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a36218d4371<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: hot and stable, ICs with typeinfo: <span class=\"token number\">10</span>/11 <span class=\"token punctuation\">(</span><span class=\"token number\">90</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/11 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>marking 0x1a36e4785c01 <span class=\"token operator\">&lt;</span>JSFunction UseSparseVariant <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a36660866d9<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: small function, ICs with typeinfo: <span class=\"token number\">1</span>/5 <span class=\"token punctuation\">(</span><span class=\"token number\">20</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/5 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>marking 0x1a36e4786fc1 <span class=\"token operator\">&lt;</span>JSFunction reverse <span class=\"token punctuation\">(</span>sfi <span class=\"token operator\">=</span> 0x1a3666086f21<span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> optimized recompilation, reason: hot and stable, ICs with typeinfo: <span class=\"token number\">4</span>/5 <span class=\"token punctuation\">(</span><span class=\"token number\">80</span>%<span class=\"token punctuation\">)</span>, generic ICs: <span class=\"token number\">0</span>/5 <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>There it is — <code class=\"language-text\">reason: hot and stable</code>. Since the output includes the function name in the format <code class=\"language-text\">&lt;JSFunction function_name></code>, we can see that <code class=\"language-text\">sample</code> and <code class=\"language-text\">reverse</code> were the ones marked for optimization. This shows how <code class=\"language-text\">TurboFan</code> profiles multiple data points — not just one — to determine whether to optimize a piece of code.</p>\n<h2 id=\"closing-thoughts\" style=\"position:relative;\">Closing Thoughts<a href=\"#closing-thoughts\" aria-label=\"closing thoughts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>They say that well-written JavaScript can achieve performance approaching C++. When I first heard this, I thought “How can an interpreted language match a compiled language’s performance?” — but after examining V8’s internals, I was surprised by just how many optimization techniques are packed in.</p>\n<p>Tearing apart the JavaScript engine piece by piece and deepening my understanding of a language I love was genuinely fun. <em>(I wish I’d used C++ more back in school…)</em></p>\n<p>There are actually many optimization techniques inside V8 that’ll make you go “Whoa, that’s brilliant…” — and I wanted to introduce them all. But as I wrote, the content kept getting longer and started going off on tangents…</p>\n<p>So for now, I’ll stop at explaining the overall flow. In the next post, I’ll dive deeper into how <code class=\"language-text\">Ignition</code> and <code class=\"language-text\">TurboFan</code> work in more detail.</p>\n<p>Understanding TurboFan’s workflow in particular is a shortcut to optimizing your own JavaScript code, so it should come in handy.</p>\n<p>This concludes my post: How Does the V8 Engine Execute My Code?</p>","fields":{"slug":"20190628-v8-analysis-en","path":"/2019/06/28/v8-analysis/en/","lang":"en"},"frontmatter":{"title":"How Does the V8 Engine Execute My Code?","subTitle":"From bytecode to optimized compilation: a look inside V8's execution pipeline","date":"Jun 28, 2019","categories":["Programming","JavaScript"],"tags":["NodeJS","V8","JavaScript","JavaScript Fundamentals","JavaScript Engine"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/d803c/thumbnail.png","srcSet":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/d803c/thumbnail.png 320w,\n/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/fc5c5/thumbnail.webp 320w,\n/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/01fb2/thumbnail.png","srcSet":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/c89eb7ad6cf0f0ddc746a5da08d39a3e/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"22038d33-6f94-5288-a019-29c76ea630cc","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-a-hash-table\">What is a Hash Table?</a></p>\n<ul>\n<li><a href=\"#direct-address-table\">Direct Address Table</a></li>\n<li><a href=\"#compensating-for-direct-address-tables-weakness-with-hash-functions\">Compensating for Direct Address Table’s Weakness with Hash Functions!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#hash-collision\">Hash Collision</a></p>\n<ul>\n<li><a href=\"#resolving-collisions\">Resolving Collisions</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#table-resizing\">Table Resizing</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to cover the hash table — one of the most commonly used data structures. Let’s start by understanding what a hash table is and why we use it.","html":"<p>In this post, I want to cover the hash table — one of the most commonly used data structures. Let’s start by understanding what a hash table is and why we use it.</p>\n<!-- more -->\n<h2 id=\"what-is-a-hash-table\" style=\"position:relative;\">What is a Hash Table?<a href=\"#what-is-a-hash-table\" aria-label=\"what is a hash table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>A hash table is a data structure that takes an input value, passes it through a hash function, and stores it at the index returned by that function. It’s usually implemented using arrays. Before explaining what a hash function is or what “hash” even means, let’s first understand where the concept of hash tables originated.</p>\n<h3 id=\"direct-address-table\" style=\"position:relative;\">Direct Address Table<a href=\"#direct-address-table\" aria-label=\"direct address table permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The idea behind hash tables evolved from a data structure called the Direct Address Table. A direct address table is a data mapping approach that uses the input value directly as the key. Code makes this easier to understand:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DirectAddressTable</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setValue</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getValue</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getTable</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>table<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> myTable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DirectAddressTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyTable<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myTable<span class=\"token punctuation\">.</span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you’re reading this post on a desktop, copy and paste this code into your browser console or Node.js and run it. You’ll see our beautiful table printed to the console:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">3</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">6</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">79</span> empty items<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span> <span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>When we put <code class=\"language-text\">3</code> into the table, it becomes the element at index <code class=\"language-text\">3</code>. When we put <code class=\"language-text\">90</code>, it becomes the element at index <code class=\"language-text\">90</code>. Super simple. With a direct address table, knowing the input value means knowing the index where it’s stored, so we can access the stored data directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">myTable<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Since the value we’re looking for equals the table’s index, we can access the storage location directly without searching through the table — giving us <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity. Similarly, inserting, updating, or deleting values in the table can all be done in one shot if we know where the value is, also achieving <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>The reasons why algorithms for searching, inserting, updating, and deleting values in simple data structures like this tend to be time-consuming are usually similar:</p>\n<hr>\n<ol>\n<li>I don’t know where my target value is. Let’s search efficiently. (e.g., binary tree search)</li>\n<li>Inserting or deleting this value affects other values. (e.g., linked list)</li>\n</ol>\n<hr>\n<p>The direct address table is very convenient because we know exactly where our target value is, allowing direct access for subsequent operations.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 441px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYdSJCD//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMREiEi/9oACAEBAAEFAmwBY59MdFZ5Svsf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERECFBgf/aAAgBAQAGPwKyZ8psbfWf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARIUExYeH/2gAIAQEAAT8h3S4GWrLbKEY7jnfpGNxtpSf/2gAMAwEAAgADAAAAEDAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITGxQWFx/9oACAEBAAE/ELh8mAdZcho0pQc042Fe5mq2uDFT7k13moKpfjOjP//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"fantastic\" title=\"\" src=\"/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg\" srcset=\"/static/db3a598bfb9db0b88f1811fc6087af73/0913d/fantastic.jpg 160w,\n/static/db3a598bfb9db0b88f1811fc6087af73/cb69c/fantastic.jpg 320w,\n/static/db3a598bfb9db0b88f1811fc6087af73/eed25/fantastic.jpg 441w\" sizes=\"(max-width: 441px) 100vw, 441px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>But direct address tables have an obvious downside: poor space efficiency. Looking at the state of <code class=\"language-text\">myTable</code> we just created makes this immediately clear. We inserted <code class=\"language-text\">3</code>, <code class=\"language-text\">10</code>, and <code class=\"language-text\">90</code> — values with quite large gaps between them.</p>\n<p>As a result, our <code class=\"language-text\">myTable</code> stores data in this sparse structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">91</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see above, the spaces filled with <code class=\"language-text\">0</code> (except for the stored data) have memory allocated but hold no values. In other words, wasted space. When using a direct address table, if the number of values is smaller than the range of data values you want to store, space efficiency suffers.</p>\n<p>This situation is described as having a low load factor. The load factor is calculated as <code class=\"language-text\">number of values / table size</code>. The current load factor of my table is <code class=\"language-text\">3/91 = 0.03296...</code>, about <code class=\"language-text\">3%</code> — not a high load factor.</p>\n<p>If even one large value like <code class=\"language-text\">1000</code> enters the table, the table size becomes <code class=\"language-text\">1001</code> and the load factor drops to <code class=\"language-text\">0.003996...</code>, about <code class=\"language-text\">0.4%</code>. In other words, direct address tables work best when storing consecutive values like <code class=\"language-text\">1, 2, 3</code> or data where values don’t have large range differences.</p>\n<h3 id=\"compensating-for-direct-address-tables-weakness-with-hash-functions\" style=\"position:relative;\">Compensating for Direct Address Table’s Weakness with Hash Functions!<a href=\"#compensating-for-direct-address-tables-weakness-with-hash-functions\" aria-label=\"compensating for direct address tables weakness with hash functions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>So direct address tables are convenient for accessing values but have poor space efficiency. Hash tables were designed to compensate for this weakness.</p>\n<p>Instead of using the value directly as the table index like a direct address table, a hash table passes the value through something called a hash function first. A hash function maps arbitrary-length data to fixed-length data. The output of this function is called a hash.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHtT2qExoz/AP/EABgQAQEBAQEAAAAAAAAAAAAAAAIBABAS/9oACAEBAAEFAm/GiT6ZDN//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BRWf/xAAXEAADAQAAAAAAAAAAAAAAAAAAECEB/9oACAEBAAY/Aia4v//EABgQAQEBAQEAAAAAAAAAAAAAAAERABCh/9oACAEBAAE/ITFR1/w4gkS6IEOf/9oADAMBAAIAAwAAABDbD//EABcRAQADAAAAAAAAAAAAAAAAAAEQITH/2gAIAQMBAT8QAMuP/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAh/9oACAECAQE/EFDk/8QAHBABAQACAgMAAAAAAAAAAAAAAREAMRAhQXGR/9oACAEBAAE/EC6lGddfcmYabM9XCwu8dCD4cEn2cf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hashbrown\" title=\"\" src=\"/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg\" srcset=\"/static/9ab3259234eddda6c50fdda48c352e4e/0913d/hashbrown.jpg 160w,\n/static/9ab3259234eddda6c50fdda48c352e4e/cb69c/hashbrown.jpg 320w,\n/static/9ab3259234eddda6c50fdda48c352e4e/65f94/hashbrown.jpg 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The word \"hash\" originally means something like \"chopped up food\" — think of a hash brown.<br>A hash function works similarly: whatever value comes in, it gets mashed into a fixed-length output.</small>\n</center>\n<p>Let me create a simple hash function to help with understanding:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">hashFunction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> key <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">102948</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 8</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">191919191</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">997</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 7</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That’s it. Sure, it’s a crude hash function, but it does perform its core job of hashing just fine.</p>\n<p>My crude hash function simply divides the input by <code class=\"language-text\">10</code> and returns the remainder. Since only the ones digit is returned regardless of input, the output is guaranteed to be between <code class=\"language-text\">0-9</code>.</p>\n<p>One characteristic of hash functions is that looking at the hash alone makes it hard to guess what the input was. You can’t determine the original number just by looking at the ones digit. This is why hash functions are widely used in cryptography.</p>\n<p>But what’s important for us isn’t cryptography — it’s this:</p>\n<blockquote>\n<p>No matter what value goes into the hash function, it will always return a value between <strong>0-9</strong>!</p>\n</blockquote>\n<p>The weakness of direct address tables was that even if just one value like <code class=\"language-text\">10000</code> came in, you’d need to create a table of size <code class=\"language-text\">10000</code> to store it at index <code class=\"language-text\">10000</code>, wasting <code class=\"language-text\">9999</code> spaces.</p>\n<p>But with my hash function, <code class=\"language-text\">100</code> returns <code class=\"language-text\">0</code>, <code class=\"language-text\">10001</code> returns <code class=\"language-text\">1</code>, and even <code class=\"language-text\">8982174981274</code> returns <code class=\"language-text\">4</code>.</p>\n<p>This means we can set a fixed table size and store data only within that space. Let me write a simple hash table using this property of hash functions. I’ll set the hash table size to <code class=\"language-text\">5</code> and write a hash function that ensures any value can be stored in this table.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myTableSize <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myHashTable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>myTableSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">hashFunction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Divide the input by table size and return the remainder</span>\n  <span class=\"token keyword\">return</span> key <span class=\"token operator\">%</span> myTableSize<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1991</span><span class=\"token punctuation\">;</span>\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">;</span>\nmyHashTable<span class=\"token punctuation\">[</span><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">5678</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">5678</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myHashTable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [empty, 1991, empty, 5678, 1234]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The input values <code class=\"language-text\">1991</code>, <code class=\"language-text\">1234</code>, and <code class=\"language-text\">5678</code> are much larger than my hash table size of <code class=\"language-text\">5</code>, but since the hash function only returns values between <code class=\"language-text\">0-4</code>, the values get stored neatly in my small, cute hash table.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe8FGAmHH//EABkQAAMBAQEAAAAAAAAAAAAAAAABAhIRMf/aAAgBAQABBQLiKh2p82yqe0f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAABAAIRIHH/2gAIAQEABj8CThIGV//EABwQAAEEAwEAAAAAAAAAAAAAAAABESExQWFxUf/aAAgBAQABPyHQh7HMJ6Uy5oQUWhnYy6f/2gAMAwEAAgADAAAAECDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFRQfDx/9oACAEBAAE/EPlYxVVCgEaVetZcEoAbtoFs8256DiUs3jwvGKL7Ty5//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cute\" title=\"\" src=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg\" srcset=\"/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/0913d/cute.jpg 160w,\n/static/10cfbdd4e3d4fbc641b29aaa9dedb7e7/1c91a/cute.jpg 295w\" sizes=\"(max-width: 295px) 100vw, 295px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>My hash table... so tiny and cute</small>\n</center>\n<p>And just like that, we’ve eliminated the endlessly wasted space that was the direct address table’s weakness!</p>\n<h2 id=\"hash-collision\" style=\"position:relative;\">Hash Collision<a href=\"#hash-collision\" aria-label=\"hash collision permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>It would be nice if this were a happy ending, but hash tables have their own weakness: hash collisions. Before explaining what a collision is, let’s use my hash function to create one and see for ourselves:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token function\">hashFunction</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<p>When different values put into a hash function produce the same output — that’s a <strong>collision</strong>.</p>\n</blockquote>\n<p>If you think about it logically, direct address tables grew dynamically, but hash tables allocate fixed space upfront and keep cramming values into it.</p>\n<p>So if you set the table size to <code class=\"language-text\">100</code> and try to insert <code class=\"language-text\">200</code> pieces of data, only 100 will be stored and 100 will be left over — what happens to them?</p>\n<p>Don’t worry. Hash tables were designed with the intention of having a table smaller than the amount of data to be stored, so collision resolution methods were developed alongside them.</p>\n<h3 id=\"resolving-collisions\" style=\"position:relative;\">Resolving Collisions<a href=\"#resolving-collisions\" aria-label=\"resolving collisions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Because hash tables have this collision weakness, the most important factor in operating a hash table is how uniformly the hash function can distribute values. If there’s a high probability of getting the same index no matter what value you insert, it’s not a good hash function.</p>\n<p>However, even with a well-designed hash function, completely preventing collisions is fundamentally difficult. That’s why we either develop hash function algorithms that minimize collisions while accepting some level of them, or use methods that can work around collisions when they occur.</p>\n<p>In this post, I’ll explain a few methods for working around collisions when they happen.</p>\n<h4 id=\"open-addressing\" style=\"position:relative;\">Open Addressing<a href=\"#open-addressing\" aria-label=\"open addressing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Open addressing explores new addresses within the table when a hash collision occurs and inserts the colliding data into an empty spot. It’s called “open address” because it allows indices other than the one returned by the hash function.</p>\n<p>Open addressing can be divided into four types based on how empty spaces are probed.</p>\n<h5 id=\"1-linear-probing\" style=\"position:relative;\">1. Linear Probing<a href=\"#1-linear-probing\" aria-label=\"1 linear probing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>Linear probing literally means probing sequentially in a linear fashion. Let’s use the collision example with <code class=\"language-text\">1991</code> and <code class=\"language-text\">6</code> from above.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<br />\n<p>When we first passed <code class=\"language-text\">1991</code> through the hash function and put it in the hash table, it was placed at index <code class=\"language-text\">1</code>. Then we passed <code class=\"language-text\">6</code> through the hash function and got <code class=\"language-text\">1</code> again. But index <code class=\"language-text\">1</code> already contains <code class=\"language-text\">1991</code>, so <code class=\"language-text\">6</code> has nowhere to go in the hash table. A collision has occurred!</p>\n<p>Linear probing assigns the next room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> spaces away when a collision occurs. If <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>, <code class=\"language-text\">6</code> would be stored at index <code class=\"language-text\">2</code>; if <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n = 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span></span>, it would be stored at index <code class=\"language-text\">4</code>.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd><strong style=\"color: #ff0000;\">6</strong></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<center><small>Might as well take the next room over...</small></center>\n<br />\n<p>This is linear probing — assigning the next available room a fixed distance away when a collision occurs. If another collision happens here, the value would be stored at index <code class=\"language-text\">3</code>. This sequential probing continues until an empty space is found.</p>\n<p>The downside of linear probing is its vulnerability to the primary clustering problem, where all spaces around a particular hash value become filled.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd>6</dd></li>\n  <li><dt>3</dt><dd>13</dd></li>\n  <li><dt>4</dt><dd>21</dd></li>\n  <li><dt>5</dt><dd></dd></li>\n  <li><dt>6</dt><dd></dd></li>\n</ul>\n<br />\n<p>When the same hash appears multiple times, linear probing increases the likelihood of data being stored consecutively — meaning data density increases. In this case, collisions occur not only when the hash is <code class=\"language-text\">1</code>, but also when it’s <code class=\"language-text\">2</code> or <code class=\"language-text\">3</code>.</p>\n<p>This creates a truly vicious cycle. As collisions continue, data gets stored consecutively, eventually forming a massive cluster of data. Then any hash value that falls within the indices occupied by that cluster will collide, and the colliding value gets stored behind the cluster, making it even larger.</p>\n<blockquote>\n<p><strong>Collision!</strong> -> Store colliding value behind the cluster -> Increased collision probability -> <strong>Collision!</strong> -> Store again, cluster grows -> Increased collision probability -> <strong>Collision</strong>…</p>\n</blockquote>\n<p>This painful infinite loop occurs. This is the primary clustering problem. Now let’s look at another method that somewhat addresses this painful issue.</p>\n<h5 id=\"2-quadratic-probing\" style=\"position:relative;\">2. Quadratic Probing<a href=\"#2-quadratic-probing\" aria-label=\"2 quadratic probing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>Quadratic probing is identical to linear probing, but the probe interval grows quadratically rather than staying fixed.</p>\n<p>On the first collision, probe <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>1</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">1^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> spaces from the collision point; on the second collision, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>; on the third, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">3^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> — the step size grows rapidly. Using quadratic probing in the same situation as the linear probing example above, the hash table looks like this:</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>1991</dd></li>\n  <li><dt>2</dt><dd>6</dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n  <li><dt>5</dt><dd>13</dd></li>\n  <li><dt>6</dt><dd></dd></li>\n  <li><dt>...</dt><dd></dd></li>\n  <li><dt>10</dt><dd>21</dd></li>\n</ul>\n<br />\n<blockquote>\n<p>On the first collision, <code class=\"language-text\">6</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>1</mn><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1^2 = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span> space away from the collision at index <code class=\"language-text\">1</code>.</p>\n<p>On the second collision, <code class=\"language-text\">13</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">2^2 = 4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span></span> spaces away from the collision at index <code class=\"language-text\">1</code>.</p>\n<p>On the third collision, <code class=\"language-text\">21</code> goes into a room <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mn>2</mn></msup><mo>=</mo><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">3^2 = 9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">9</span></span></span></span></span> spaces away from the collision at index <code class=\"language-text\">1</code>.</p>\n</blockquote>\n<p>Using quadratic probing significantly reduces data density compared to linear probing even when collisions occur, greatly lowering the probability of chain collisions affecting other hash values.</p>\n<p>Still, if the hash repeatedly returns <code class=\"language-text\">1</code>, collisions are unavoidable. Data clustering remains an inescapable fate, which is why this phenomenon is called the secondary clustering problem.</p>\n<p>Can we improve further from here?</p>\n<h5 id=\"3-double-hashing\" style=\"position:relative;\">3. Double Hashing<a href=\"#3-double-hashing\" aria-label=\"3 double hashing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>That’s where double hashing comes in. As the name suggests, it uses two hash functions.</p>\n<p>One is used to get the initial hash as before, and the other is used to determine the probe step size when a collision occurs. This way, even if the initial hash returns the same value, passing through a different hash function for the step size will likely produce different probe intervals, increasing the probability of values being distributed evenly across different spaces.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myTableSize <span class=\"token operator\">=</span> <span class=\"token number\">23</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Table size should be prime for best results</span>\n<span class=\"token keyword\">const</span> myHashTable <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getSaveHash</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">%</span> myTableSize<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The step hash uses a prime slightly smaller than table size</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getStepHash</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token number\">17</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">%</span> <span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setValue</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token function\">getSaveHash</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> targetValue <span class=\"token operator\">=</span> myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>targetValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Stored </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> at index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myHashTable<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> myTableSize<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Table is full'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Collision while trying to store </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> at index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      index <span class=\"token operator\">+=</span> <span class=\"token function\">getStepHash</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      index <span class=\"token operator\">=</span> index <span class=\"token operator\">></span> myTableSize <span class=\"token operator\">?</span> index <span class=\"token operator\">-</span> myTableSize <span class=\"token operator\">:</span> index<span class=\"token punctuation\">;</span>\n      targetValue <span class=\"token operator\">=</span> myHashTable<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Both the table size and the number used in the second hash function should be prime numbers. If either isn’t prime, the same hashing pattern will eventually repeat. It looks a bit complex at first glance, but breaking it down piece by piece reveals nothing special. Let’s walk through it:</p>\n<hr>\n<ol>\n  <li>Get the storage index from the <code class=\"language-text\">getSaveHash</code> hash function.</li>\n  <li>Start the loop</li>\n  <li>Is it empty?</li>\n  <ol style=\"list-style: lower-alpha;\">\n    <li>Empty? OK, store it!</li>\n    <li>Occupied? Give me the next index! Back to 3...</li>\n    <li>Table full? Let's end this.</li>\n  </ol>\n</ol>\n<hr>\n<p>Running the above code in a browser console or Node.js will show you through the printed strings roughly how this process flows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1991</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Stored 1991 at index 13!</span>\n<span class=\"token comment\">// Stored 6 at index 6!</span>\n<span class=\"token comment\">// Collision while trying to store 13 at index 13!</span>\n<span class=\"token comment\">// Stored 13 at index 17!</span>\n<span class=\"token comment\">// Stored 21 at index 21!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>These values would have caused chain collisions using linear or quadratic probing since they all hash to <code class=\"language-text\">1</code>, but with double hashing, all values were stored with only a single collision.</p>\n<p>If you’ve copied the code above and declared the function, run that console multiple times and change the values to see how data gets stored in the hash table. When the table is full, you’ll see <code class=\"language-text\">Table is full</code>, so feel free to run it until then.</p>\n<h4 id=\"separate-chaining\" style=\"position:relative;\">Separate Chaining<a href=\"#separate-chaining\" aria-label=\"separate chaining permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Separate chaining approaches collision resolution from a different concept than open addressing. Instead of storing a single value in each hash table bucket, it uses a linked list or tree.\nSince the concept is the same whether you use a tree or linked list, I’ll explain using a linked list.</p>\n<p>Let’s bring back the example we’ve been using. When the table size is <code class=\"language-text\">5</code> and we need to store <code class=\"language-text\">1991</code>, <code class=\"language-text\">6</code>, <code class=\"language-text\">13</code>, and <code class=\"language-text\">21</code> — all of which hash to <code class=\"language-text\">1</code> — using separate chaining looks like this:</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>[21, 13, 6, 1991]</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n</ul>\n<br />\n<p>Simple. But look closely — the order is <code class=\"language-text\">[21, 13, 6, 1991]</code>, not <code class=\"language-text\">[1991, 6, 13, 21]</code>. It’s reversed.</p>\n<p>This is a technique to reduce insertion time even slightly. To understand why reversing the data reduces insertion time, let’s look at the process of inserting new data when the linked list stored at index <code class=\"language-text\">1</code> of our table is in the order <code class=\"language-text\">[1991, 6, 13, 21]</code>.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: null }</dd></li>\n</ul>\n<center><small>Looks similar to a hash table, but this time it's a linked list</small></center>\n<br />\n<p>Let’s say we want to add <code class=\"language-text\">11</code>. Memory address <code class=\"language-text\">99</code> happens to be free, so we store <code class=\"language-text\">{ value: 11, next: null }</code> there. Then, to attach this new node to the list, we need to traverse to the last node in the list stored at memory <code class=\"language-text\">4</code>.</p>\n<p>Then we change the value at memory <code class=\"language-text\">4</code> to <code class=\"language-text\">{ value: 21, next: 99 }</code> and we’re done.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: 99 }</dd></li>\n  <li><dt>99</dt><dd>{ value: 11, next: null }</dd></li>\n</ul>\n<br />\n<p>The problem is the process of finding the node at memory <code class=\"language-text\">4</code> to attach the new node to the list. Due to linked list characteristics, checking data at memory <code class=\"language-text\">4</code> requires sequentially traversing from the head through each next node.</p>\n<p>This means to insert data, we must first find memory <code class=\"language-text\">1</code> (the list head), check the next memory address, move to <code class=\"language-text\">2</code>, check the next address again, and so on.</p>\n<p>This is manageable when the linked list is small, but as the list grows, execution time increases proportionally — definitely not a good approach. But reversing the order makes data insertion much easier.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>99</dt><dd>{ value: 11, next: 1 }</dd></li>\n  <li><dt>1</dt><dd>{ value: 1991, next: 2 }</dd></li>\n  <li><dt>2</dt><dd>{ value: 6, next: 3 }</dd></li>\n  <li><dt>3</dt><dd>{ value: 13, next: 4 }</dd></li>\n  <li><dt>4</dt><dd>{ value: 21, next: null }</dd></li>\n</ul>\n<br />\n<p>Since we’re adding the node at the front, we don’t need to traverse other nodes — just push it into memory and store <code class=\"language-text\">{ value: 11, next: 1 }</code>. That’s why when storing in hash tables, attaching data to the head of the list rather than the tail is commonly preferred.</p>\n<p>However, using separate chaining makes the hash function’s role extremely important. If an uneven hash causes data to cluster at a specific index, other buckets will be empty while one bucket’s list keeps growing longer.</p>\n<br />\n<ul class=\"hash-table-dummy\">\n  <li><dt>0</dt><dd></dd></li>\n  <li><dt>1</dt><dd>[21, 13, 6, 1991, 7, 11, 25, ...]</dd></li>\n  <li><dt>2</dt><dd></dd></li>\n  <li><dt>3</dt><dd></dd></li>\n  <li><dt>4</dt><dd></dd></li>\n</ul>\n<center><small>This is an extreme example, but... it's no different from just using a linked list</small></center>\n<br />\n<p>If the value I’m looking for is at the very end of the list, I’d have to traverse the linked list from start to finish, giving us <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity. That’s why the hash function’s role in distributing data as evenly as possible to maintain reasonable list lengths is so important.</p>\n<h2 id=\"table-resizing\" style=\"position:relative;\">Table Resizing<a href=\"#table-resizing\" aria-label=\"table resizing permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Since hash tables are data structures that allocate fixed space to store lots of data, they’re bound to overflow eventually.</p>\n<p>When using open addressing, you’ll hit the situation where <code class=\"language-text\">Table is full</code> gets printed in the example code above — the table is literally full and can’t store more. When using separate chaining, as empty space decreases and collisions increase, the lists stored in each bucket grow longer until the resources spent traversing lists become excessive.</p>\n<p>That’s why hash tables perform better when somewhat empty rather than packed full, and when operating a hash table, you need to increase the table size once data reaches a certain level.</p>\n<p>This isn’t a special algorithm — it simply involves declaring a new table about twice the original size and moving the existing data over. For hash tables using separate chaining, rehashing can be used to split overly long lists and redistribute the data.</p>\n<p>That wraps up this post on diving deep into hash tables with JavaScript.</p>\n<style>\nul.hash-table-dummy {\n  width: 100%;\n  margin: 0 auto;\n  display: flex;\n  border: 1px solid #ddd;\n  padding: 0;\n}\nul.hash-table-dummy > li {\n  flex-grow: 1;\n  list-style: none;\n  border-right: 1px solid #ddd;\n  margin: 0;\n  text-align: center;\n  font-size: 14px;\n}\nul.hash-table-dummy dt {\n  border-bottom: 1px solid #ddd;\n  background-color: #f0f0f0;\n}\nul.hash-table-dummy dd {\n  margin: 0;\n}\n</style>","fields":{"slug":"20190625-hashtable-with-js-en","path":"/2019/06/25/hashtable-with-js/en/","lang":"en"},"frontmatter":{"title":"Diving Deep into Hash Tables with JavaScript","subTitle":"From hash functions to collision resolution and table resizing","date":"Jun 25, 2019","categories":["Programming","Algorithm"],"tags":["Data Structure","Hash Table","JavaScript","Technical Interview","Hash Collision"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/5976bcb3d5c35dab87987842997a2aef/3a812/thumbnail.jpg","srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/3a812/thumbnail.jpg 320w,\n/static/5976bcb3d5c35dab87987842997a2aef/4b287/thumbnail.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/fc5c5/thumbnail.webp 320w,\n/static/5976bcb3d5c35dab87987842997a2aef/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/5976bcb3d5c35dab87987842997a2aef/2d839/thumbnail.jpg","srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/2d839/thumbnail.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/5976bcb3d5c35dab87987842997a2aef/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"845389d6-35af-55eb-a63b-05226262e130","tableOfContents":"<ul>\n<li>\n<p><a href=\"#ip-internet-protocol\">IP, Internet Protocol</a></p>\n<ul>\n<li><a href=\"#ipv4-structure\">IPv4 Structure</a></li>\n<li><a href=\"#ipv4-classes\">IPv4 Classes</a></li>\n<li><a href=\"#special-purpose-ipv4-addresses\">Special Purpose IPv4 Addresses</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#lets-look-at-the-path-from-my-home-to-google\">Let’s Look at the Path from My Home to Google</a></p>\n<ul>\n<li><a href=\"#using-traceroute\">Using traceroute</a></li>\n<li><a href=\"#lets-learn-more-detail\">Let’s Learn More Detail!</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post I want to briefly talk about what process our home goes through to communicate with Google. Among things I learned at university that I thought were interesting, one representative thing was the fact that all computers connected to the internet are actually connected through cables. Some might think this fact obvious, but it seemed quite amazing back then. Though I use internet daily, it’s an element so naturally melted into life that I didn’t care much about its principles.","html":"<p>In this post I want to briefly talk about what process our home goes through to communicate with Google. Among things I learned at university that I thought were interesting, one representative thing was the fact that all computers connected to the internet are actually connected through cables.</p>\n<p>Some might think this fact obvious, but it seemed quite amazing back then. Though I use internet daily, it’s an element so naturally melted into life that I didn’t care much about its principles.</p>\n<!-- more -->\n<p>Then as I learned more detail about networks at school, I realized “these benefits I’m using matter-of-factly are actually a very systematic and complex system.”</p>\n<p>So in this post I want to simply unpack that system through the process of accessing Google servers from my home. Of course, since I’m making rough estimates based on IP addresses, it won’t be exact information, but I’ll focus on roughly what processes enable accessing servers overseas.</p>\n<h2 id=\"ip-internet-protocol\" style=\"position:relative;\">IP, Internet Protocol<a href=\"#ip-internet-protocol\" aria-label=\"ip internet protocol permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, to know the path from my home to Google, let’s briefly learn about IP, inseparable from internet. The term IP address is a very familiar term even for non-computer majors.</p>\n<p>In typical environments, you can think of this IP address playing our home address’s role when we access internet. Likewise, points along the path from my home to Google all have IP addresses, and we can roughly guess where these points are based on those IP addresses.</p>\n<p>I’ll explain very basic content about IP, so those who already know can just skip.</p>\n<h3 id=\"ipv4-structure\" style=\"position:relative;\">IPv4 Structure<a href=\"#ipv4-structure\" aria-label=\"ipv4 structure permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Generally the form we can encounter like <code class=\"language-text\">192.168.0.1</code> is IPv4. IPv4 consists of four fields composed of 8 bits, and each of these fields is called an octet. <small>(By the way, terms starting with Oct often mean 8)</small>.</p>\n<p>For example, <code class=\"language-text\">192.168.0.1</code> can be represented in binary like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Decimal: 192.168.0.1\nBinary: 11000000.10101000.00000000.00000001</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Since one octet can only have 8 bits, octets have <code class=\"language-text\">00000000-11111111</code>, i.e. <code class=\"language-text\">0-255</code> in decimal. So the number of addresses IPv4 can create is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup><mo>=</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>294</mn><mo separator=\"true\">,</mo><mn>967</mn><mo separator=\"true\">,</mo><mn>296</mn></mrow><annotation encoding=\"application/x-tex\">2^{32} = 4,294,967,296</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">32</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">294</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">967</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">296</span></span></span></span></span>, about 4.3 billion. 4.3 billion… seems like quite a big number. When first making this address system, they probably thought:</p>\n<blockquote>\n<p><em>Eh, 4.3 billion should last somewhat, right?</em></p>\n</blockquote>\n<center>\n<br />\n.<br />\n.<br />\n.<br />\n<br />\n</center>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/de8631a2bb9ad577fae2ba57e8801a22/41099/unexpected-result.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAABAD/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAExEHKPUj//xAAaEAACAgMAAAAAAAAAAAAAAAAAAQIDEiEz/9oACAEBAAEFAqkXdB6lbJ5n/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BZ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ASf/xAAWEAEBAQAAAAAAAAAAAAAAAAAQESH/2gAIAQEABj8Cjj//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQIaFh/9oACAEBAAE/IRF6j2fDCWtUsN8x/9oADAMBAAIAAwAAABBcD//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxA4v//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAECAQE/ELP/xAAdEAEBAAEEAwAAAAAAAAAAAAABEQAQITFBUXGh/9oACAEBAAE/EKbSNjkylivZv19zluOSJXj3iajcCx40/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"unexpected result\" title=\"\" src=\"/static/de8631a2bb9ad577fae2ba57e8801a22/41099/unexpected-result.jpg\" srcset=\"/static/de8631a2bb9ad577fae2ba57e8801a22/0913d/unexpected-result.jpg 160w,\n/static/de8631a2bb9ad577fae2ba57e8801a22/cb69c/unexpected-result.jpg 320w,\n/static/de8631a2bb9ad577fae2ba57e8801a22/41099/unexpected-result.jpg 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>As worldwide internet users grew faster than expected, all addresses were ultimately exhausted as of February 4, 2011, and currently IPv4 allocation is stopped. Fortunately they weren’t just sitting idle during that time, and smart people worldwide already prepared countermeasures, so don’t worry too much.</p>\n<h3 id=\"ipv4-classes\" style=\"position:relative;\">IPv4 Classes<a href=\"#ipv4-classes\" aria-label=\"ipv4 classes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Like this, IP addresses aren’t resources you can just freely distribute but finite resources, so they manage by dividing usage by specific ranges. These divided ranges are called classes, managing by dividing into total 5 classes A-E.</p>\n<p>Each class creates restrictions on the 8 bits in the first field of IPv4 expressed in binary <code class=\"language-text\">00000000.00000000.00000000.00000000</code>, so just looking at the first field’s number, you can know which class that IPv4 address belongs to.</p>\n<p>This restriction forces the first field’s most significant bits. For example, A class must always start with bit <code class=\"language-text\">0</code>, so can use first fields between <code class=\"language-text\">00000000(0)</code> and <code class=\"language-text\">01111111(127)</code>, and C class must always start with bits <code class=\"language-text\">110</code>, so can use first fields from <code class=\"language-text\">11000000(192)</code> to <code class=\"language-text\">11011111(223)</code>.</p>\n<table>\n<thead>\n<tr>\n<th>Class</th>\n<th>First Field</th>\n<th>Address Range</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>0xxxxxxx</td>\n<td>0.0.0.0 ~ 127.255.255.255</td>\n<td>Large-scale networks</td>\n</tr>\n<tr>\n<td>B</td>\n<td>10xxxxxx</td>\n<td>128.0.0.0 ~ 191.255.255.255</td>\n<td>Medium-scale networks</td>\n</tr>\n<tr>\n<td>C</td>\n<td>110xxxxx</td>\n<td>192.0.0.0 ~ 223.255.255.255</td>\n<td>Small-scale networks</td>\n</tr>\n<tr>\n<td>D</td>\n<td>1110xxxx</td>\n<td>224.0.0.0 ~ 239.255.255.255</td>\n<td>Multicast</td>\n</tr>\n<tr>\n<td>E</td>\n<td>1111xxxx</td>\n<td>240.0.0.0 ~ 255.255.255.255</td>\n<td>Reserved for research/development or future</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"special-purpose-ipv4-addresses\" style=\"position:relative;\">Special Purpose IPv4 Addresses<a href=\"#special-purpose-ipv4-addresses\" aria-label=\"special purpose ipv4 addresses permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Like this, dividing classes and even within those classes, there are IPv4 addresses pre-reserved for special purposes. These reserved addresses are defined by <a href=\"https://tools.ietf.org/html/rfc5735\" target=\"_blank\" rel=\"nofollow\">RFC 5735</a> and cannot be allocated for purposes beyond their intended use. In this post I’ll briefly explain just some representative ones.</p>\n<table>\n<thead>\n<tr>\n<th>Class</th>\n<th>Address</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>0.0.0.0 ~ 0.255.255.255</td>\n<td>Unallocated meta addresses</td>\n</tr>\n<tr>\n<td>A</td>\n<td>10.0.0.0 ~ 10.255.255.255</td>\n<td>Large-scale private networks</td>\n</tr>\n<tr>\n<td>A</td>\n<td>100.64.0.0 ~ 100.127.255.255</td>\n<td>Addresses for Carrier-grade NAT</td>\n</tr>\n<tr>\n<td>A</td>\n<td>127.0.0.0 ~ 127.255.255.255</td>\n<td>Self. A.k.a. Loopback</td>\n</tr>\n<tr>\n<td>C</td>\n<td>192.168.0.0 ~ 192.168.255.255</td>\n<td>Small-scale private networks. Often seen using routers.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"lets-look-at-the-path-from-my-home-to-google\" style=\"position:relative;\">Let’s Look at the Path from My Home to Google<a href=\"#lets-look-at-the-path-from-my-home-to-google\" aria-label=\"lets look at the path from my home to google permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Okay, finally I can start this post’s main content.</p>\n<p>Opening MacBook at home and entering <code class=\"language-text\">google.com</code> in web browser, the web browser will send a request to Google servers somewhere in the world to send pages. But my MacBook isn’t directly connected to Google servers.</p>\n<p>So the request I sent goes through a rough journey, stopping here and there to reach Google servers. So now let’s find out where my request sent from home stops before reaching Google servers.</p>\n<h3 id=\"using-traceroute\" style=\"position:relative;\">Using traceroute<a href=\"#using-traceroute\" aria-label=\"using traceroute permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Since I use Unix-based MacOS, I’ll explain based on MacOS. Using the <code class=\"language-text\">traceroute</code> utility, I can find out what path packets I sent take to reach Google servers.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">traceroute</span> <span class=\"token parameter variable\">-q</span> <span class=\"token number\">1</span> google.com\n<span class=\"token function\">traceroute</span> to google.com <span class=\"token punctuation\">(</span><span class=\"token number\">172.217</span>.25.196<span class=\"token punctuation\">)</span>, <span class=\"token number\">64</span> hops max, <span class=\"token number\">52</span> byte packets\n <span class=\"token number\">1</span>  <span class=\"token number\">192.168</span>.25.1 <span class=\"token punctuation\">(</span><span class=\"token number\">192.168</span>.25.1<span class=\"token punctuation\">)</span>  <span class=\"token number\">3.077</span> ms\n <span class=\"token number\">2</span>  <span class=\"token number\">211.0</span>.0.0 <span class=\"token punctuation\">(</span><span class=\"token number\">211.0</span>.0.0<span class=\"token punctuation\">)</span>  <span class=\"token number\">5.928</span> ms\n <span class=\"token number\">3</span>  <span class=\"token number\">100.71</span>.51.17 <span class=\"token punctuation\">(</span><span class=\"token number\">100.71</span>.51.17<span class=\"token punctuation\">)</span>  <span class=\"token number\">4.693</span> ms\n <span class=\"token number\">4</span>  <span class=\"token number\">10.44</span>.255.240 <span class=\"token punctuation\">(</span><span class=\"token number\">10.44</span>.255.240<span class=\"token punctuation\">)</span>  <span class=\"token number\">4.328</span> ms\n <span class=\"token number\">5</span>  <span class=\"token number\">10.222</span>.18.10 <span class=\"token punctuation\">(</span><span class=\"token number\">10.222</span>.18.10<span class=\"token punctuation\">)</span>  <span class=\"token number\">7.319</span> ms\n <span class=\"token number\">6</span>  <span class=\"token number\">10.222</span>.16.201 <span class=\"token punctuation\">(</span><span class=\"token number\">10.222</span>.16.201<span class=\"token punctuation\">)</span>  <span class=\"token number\">4.883</span> ms\n <span class=\"token number\">7</span>  <span class=\"token number\">10.222</span>.16.41 <span class=\"token punctuation\">(</span><span class=\"token number\">10.222</span>.16.41<span class=\"token punctuation\">)</span>  <span class=\"token number\">3.853</span> ms\n <span class=\"token number\">8</span>  <span class=\"token number\">72.14</span>.204.124 <span class=\"token punctuation\">(</span><span class=\"token number\">72.14</span>.204.124<span class=\"token punctuation\">)</span>  <span class=\"token number\">34.784</span> ms\n <span class=\"token number\">9</span>  <span class=\"token number\">108.170</span>.242.193 <span class=\"token punctuation\">(</span><span class=\"token number\">108.170</span>.242.193<span class=\"token punctuation\">)</span>  <span class=\"token number\">37.751</span> ms\n<span class=\"token number\">10</span>  <span class=\"token number\">108.170</span>.233.79 <span class=\"token punctuation\">(</span><span class=\"token number\">108.170</span>.233.79<span class=\"token punctuation\">)</span>  <span class=\"token number\">36.643</span> ms\n<span class=\"token number\">11</span>  nrt13s50-in-f4.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">172.217</span>.25.68<span class=\"token punctuation\">)</span>  <span class=\"token number\">35.416</span> ms</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The second hop outputs public IP that could expose my detailed location, so I masked it for security. Actually the ISP (Internet Service Provider) I use, SK Broadband, has IP address lease period within managed areas of 1 hour, and I reside in a high population density area, so even if that IP address is exposed, location isn’t easy to know, but I’ll cover it because I’m still anxious.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d8c691361160ceec51f9bdd1c9b19f0/65f94/meme.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHj2K8ubVZWbTBGD//EABwQAAEFAAMAAAAAAAAAAAAAAAIAAQMQERIiMf/aAAgBAQABBQIe0k4MNZiMuSdqPxf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAcEAABAwUAAAAAAAAAAAAAAAABABARAiBhcYH/2gAIAQEABj8CGShE9abKNN//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBhQVHw/9oACAEBAAE/IamoDQQdcQdb35xC3XrEofcJ8vbDU//aAAwDAQACAAMAAAAQHP8Agv/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPxAkcf/EABcRAAMBAAAAAAAAAAAAAAAAAAEgITH/2gAIAQIBAT8Q0xP/xAAeEAEAAQMFAQAAAAAAAAAAAAABEQAhQRAxUXGh8P/aAAgBAQABPxALIqgsdFTohYWA+aOgUIJbZpMtYnYh+zScBuJWHRXk6F//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"meme\" title=\"\" src=\"/static/6d8c691361160ceec51f9bdd1c9b19f0/65f94/meme.jpg\" srcset=\"/static/6d8c691361160ceec51f9bdd1c9b19f0/0913d/meme.jpg 160w,\n/static/6d8c691361160ceec51f9bdd1c9b19f0/cb69c/meme.jpg 320w,\n/static/6d8c691361160ceec51f9bdd1c9b19f0/65f94/meme.jpg 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>What if someone finds my home...</small>\n</center>\n<p>One row output from <code class=\"language-text\">traceroute</code> results is called a hop, meaning the path my packets went through from my home to Google servers. The time output to the right of the hop’s IP address means the time the hop responded. Interestingly, from hop 8 the response time suddenly jumps from single digits to double digits - from here packets left the country and went overseas.</p>\n<p>So what do these IP addresses mean?</p>\n<h3 id=\"lets-learn-more-detail\" style=\"position:relative;\">Let’s Learn More Detail!<a href=\"#lets-learn-more-detail\" aria-label=\"lets learn more detail permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Now I want to learn more detail about what each of these IP addresses means, what company owns what device. A simple method is using the <code class=\"language-text\">whois</code> utility.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ whois <span class=\"token number\">172.217</span>.25.68\nNetRange:       <span class=\"token number\">172.217</span>.0.0 - <span class=\"token number\">172.217</span>.255.255\nCIDR:           <span class=\"token number\">172.217</span>.0.0/16\nNetName:        GOOGLE\nNetHandle:      NET-172-217-0-0-1\nParent:         NET172 <span class=\"token punctuation\">(</span>NET-172-0-0-0-0<span class=\"token punctuation\">)</span>\nNetType:        Direct Allocation</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>MacOS’s <code class=\"language-text\">whois</code> utility sends requests to 5 <code class=\"language-text\">whois</code> services and outputs received results. By the way, South Korea’s <code class=\"language-text\">whois</code> service is provided at KISA’s (Korea Internet &#x26; Security Agency) <a href=\"https://xn--c79as89aj0e29b77z.xn--3e0b707e/kor/main.jsp\" target=\"_blank\" rel=\"nofollow\">Whois Search</a>.</p>\n<table>\n<thead>\n<tr>\n<th>whois Domain</th>\n<th>Responsible Area</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>whois.arin.net</td>\n<td>Americas</td>\n</tr>\n<tr>\n<td>whois.nic.mil</td>\n<td>USA (currently not working)</td>\n</tr>\n<tr>\n<td>whois.ripe.net</td>\n<td>Europe</td>\n</tr>\n<tr>\n<td>whois.apnic.net</td>\n<td>Asia Pacific</td>\n</tr>\n<tr>\n<td>whois.jprs.jp</td>\n<td>Japan</td>\n</tr>\n</tbody>\n</table>\n<p>However, <code class=\"language-text\">whois</code> service basically shows information about owners of IP addresses where domains are registered, so information about gateways or routers without registered domains doesn’t appear. So I’ll try searching using a site called <a href=\"https://www.ip2location.com/demo\" target=\"_blank\" rel=\"nofollow\">IP2Location</a>. <small><strike>(But this also doesn’t seem likely to show well)</strike></small></p>\n<p>First, the first hop <code class=\"language-text\">192.168.25.*</code> is private IP allocated by my home router, and the second hop is public IP the ISP gave me but masked for security, so let’s start examining from the third hop <code class=\"language-text\">100.71.51.17</code>.</p>\n<h4 id=\"100715117\" style=\"position:relative;\">100.71.51.17<a href=\"#100715117\" aria-label=\"100715117 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<img src=\"https://images.ip2location.com/18399031.png\">\n<p>Ah, indeed not much information came out. Instead it output information that that IP address is used for Carrier Grade NAT. As explained above, A class <code class=\"language-text\">100.64.0.0 - 100.127.255.255</code> range being used for Carrier Grade NAT is already defined as standard, so it actually output an obvious result. So what is Carrier Grade NAT that my packets stopped by?</p>\n<p>First, NAT is abbreviation for Network Address Translation, technology mainly for multiple hosts belonging to private networks to access internet using one public IP.</p>\n<p>I’m using multiple SK Broadband services like IPTV and Wi-Fi. But giving separate IP addresses per subscribed service is very insufficient, so SK Broadband allocated me just one public IP address and installed a router with NAT function at home, building a Private Network at my home.</p>\n<p>Carrier Grade NAT (CGN) can be thought of as NAT’s large-scale version. The router installed at my home only configures private network inside my home, but CGN is NAT configured on backbone network. Simply put, like a giant router…?</p>\n<p>As I know, originally they operate CGN on backbone networks to manage wireless internet devices directly connected to mobile networks like smartphone LTE with NAT, but I don’t quite understand why my packets using home router are riding CGN. SK Broadband doesn’t have many IPv4… are they so lacking they attached CGN even to wired internet…? <small>(If anyone knows, please tell me…I’m curious…)</small></p>\n<h4 id=\"1044255240--102221641\" style=\"position:relative;\">10.44.255.240 ~ 10.222.16.41<a href=\"#1044255240--102221641\" aria-label=\"1044255240  102221641 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>From here it’s IP allocated to A class private network, so guessing, it seems inside SK Broadband’s backbone network. Since ISPs don’t detail their network structure, I can’t know exactly where the node is located, but it seems roughly around here in SK Broadband’s network structure.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/40e14dfe7f089d802c42a2c0fcca55dc/82158/skb-network.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAC4UlEQVR42o1U2VLbMBT1T7b9hvITnfaxfEOf+sBMH2CmdPrQklAYIA2BAA5LiB07i5PYsS1blhdJ1lI5CWmZ0uXOtcf23HN1dO6RNcaY7wcQJiiJOOfy9xBCXT9z9VqFFgLQ0dv+xMrjAc6CZfkat34WT3SVmut6EIaCFZxRRpCg+UO1WCYjmSwKSZnEWFI86RuXZy3f9yvweDTs9y1C6BLCiyjPEsYq/iWnQTRAs36ZRuNRo4CeJOS+3TLPmmmWCSE0lMQ3ndMkiSSJBEWszFA845xhUtiT66l7J7MsRtHXky0XjBX5JIHpzDFMs6RUM00zgYoDXyixFKhattvT68efQGzzOHKC7jTolpSAyI8A2P+48+zF893dXc2zmpPhLaalwJDnkeCl5ET1gvOmcbNt2b3Mcw7Pt+/63+dgWGtshX4wvb/d3tkJgkBLAzPyTSlKxVmQhONY8lzyAheOM+0MBl0KgsncHrqXOYYzd9Y3jMvDb283Ny8u2lrnWnecYcWWKXyqZFoozQQnC9GoTBHK01rjveMZBDOKcau+93Jj4+DgQLu9aiDPkFJVF2osqwlyrPBVx7KUaUIZHU1vUAowydVABARZXk1UQ9C3jOssRZyxlWB8SWERrJQIqsYgmWcF8oDD1ZckXugqtL5lX1x1ur1727bYAi9o9ggcBVk8B54dzYcq4XzEQ285Fa2nt6am3jqqda+vOF9MS+BHdsQFQ5AkgCaAwFDd1ZeVPSfW1ah7enZUv9XblRsrk8yXDhPiSUf/4u3poNM7369/3mk3TyqlCMigu6KwwAuxtvlDrk9V4I2RP7Z7N4O+Ueax2jFOQ8u8j+LYdd1/rIzAIOwdH2+/M/UmKwuc50r52t6XN69f1eq18XicpumftqDpescP4/ZFq9v+oErUOUm9oedYp82GYfTyvHj6D7EEO47jujPfdVDoCFpItrLH/4S2EqYkPA1Z4qnkGCmKf1lwDf4BBWRoCVFWkuUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"skb network\" title=\"\" src=\"/static/40e14dfe7f089d802c42a2c0fcca55dc/6af66/skb-network.png\" srcset=\"/static/40e14dfe7f089d802c42a2c0fcca55dc/69538/skb-network.png 160w,\n/static/40e14dfe7f089d802c42a2c0fcca55dc/72799/skb-network.png 320w,\n/static/40e14dfe7f089d802c42a2c0fcca55dc/6af66/skb-network.png 640w,\n/static/40e14dfe7f089d802c42a2c0fcca55dc/82158/skb-network.png 696w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>From here connects to other domestic ISPs or overseas networks</small>\n</center>\n<h4 id=\"7214204124--10817023379\" style=\"position:relative;\">72.14.204.124 ~ 108.170.233.79<a href=\"#7214204124--10817023379\" aria-label=\"7214204124  10817023379 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<img src=\"https://images.ip2location.com/60603511.png\">\n<p>Finally devices Google owns appeared! But the location is Amsterdam, Netherlands. Google is a company in California, USA, but I don’t understand why Amsterdam suddenly appeared. Something seems strange, so I should ask <code class=\"language-text\">whois.ripe.net</code>, the <code class=\"language-text\">whois</code> service responsible for Europe.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">whois <span class=\"token parameter variable\">-h</span> whois.ripe.net <span class=\"token number\">72.14</span>.204.124\n\ninetnum:        <span class=\"token number\">69.194</span>.128.0 - <span class=\"token number\">76.255</span>.255.255\nnetname:        NON-RIPE-NCC-MANAGED-ADDRESS-BLOCK\ndescr:          IPv4 address block not managed by the RIPE NCC</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Indeed they say it’s not an address managed here. Then let’s ask <code class=\"language-text\">whois.arin.net</code> responsible for Americas.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">whois <span class=\"token parameter variable\">-h</span> whois.arin.net <span class=\"token number\">72.14</span>.204.124\n\nNetRange:       <span class=\"token number\">72.14</span>.192.0 - <span class=\"token number\">72.14</span>.255.255\nCIDR:           <span class=\"token number\">72.14</span>.192.0/18\nNetName:        GOOGLE\nNetHandle:      NET-72-14-192-0-1\nParent:         NET72 <span class=\"token punctuation\">(</span>NET-72-0-0-0-0<span class=\"token punctuation\">)</span>\nNetType:        Direct Allocation\nOriginAS:\nOrganization:   Google LLC <span class=\"token punctuation\">(</span>GOGL<span class=\"token punctuation\">)</span>\nRegDate:        <span class=\"token number\">2004</span>-11-10\nUpdated:        <span class=\"token number\">2012</span>-02-24\nRef:            https://rdap.arin.net/registry/ip/72.14.192.0</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Oh, proper information came out this time. The device with address <code class=\"language-text\">72.14.204.124</code> seems to be something Google owns. Since IP2Location lost my trust now, I’ll ruthlessly discard it and use a new solution called <a href=\"https://db-ip.com\" target=\"_blank\" rel=\"nofollow\">DB IP</a>.</p>\n<p>Searching using DB IP, the location shows as <code class=\"language-text\">Ashburn, Loudoun, Virginia, United States</code> and Connection Type is <code class=\"language-text\">Hosting</code>.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6aa63397ba4132502a4856ab76647df1/a6d66/db-ip-result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACbUlEQVR42p1UiW7bMAz1/3/RPmEYVgzoiqJJ3DSJj/iWLcm35TeSbgK0w4BiAmjrIJ/J9yh7tu2Q5QXqpsG0LJhmtvlu4zRhcQ4t+aVZDvbn9XZOvtPmN1PsQmtvGEcBa7ueHBfwel4c1tXBkXGwW1c0VYUiDqGyK+osRl0msCpHkV/RkOWHHarrBZ7WGkmSYCQgDsz0hLIDzABoMrdCRtso6DyWoCI8IvD3CN5ekQc0Px3hv/xCHO/g9X0vYDwcRavGoOtHLAQ0O0Dw6NHVBVQZUaYJmiTA8fWAlx8PODz+RhQH+Lk/4PvxzIAD8jyHUgoL8aCp/Jk4+TyMLhClPqLIp7ID6PSM2H/Cw2GPMDrDP+7x7SWEt1KZjnlyzNsqZTN32/563+87jdZUMGUGU6VEQYGkyPCc5NhfU/hhiMcghVdWNVJSOUkzaNOK0uM0i7GK/GYFOWsWj8F5dBOgiKk6pcrojHf5TDI0jYUlMN4c2gHzuAiIKhWdGQEYhhGXS4Asy2StDcW0PVaq4vYRrs7jya56RWQS2XwuD7i2W9BTsUNi8y0jEo+5rustS2MZ0H7geb0BRjZF2SvZDEwMNTT3ednXMudO0NpQI0+ytgTIgv4FaK1Boxo09OWyKqVE3WjibpR28auTZL9SDx3f3nA6n4VPY4x0Rtu20h13QKU75EpTCYacLHGjxbnrOnnbrhVnziwl4RhAMqS3UrUItdDNugPOROr8Tuy/7AYYhJGII6JQ+UVRygfYbn4evjj4J8BXlG+WiCQVWPl5rM59FOUrg0WJouguBItSlFuG7n8A+dZw2bfSlvdm/6zyH6Vx13b7DHTLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"db ip result\" title=\"\" src=\"/static/6aa63397ba4132502a4856ab76647df1/6af66/db-ip-result.png\" srcset=\"/static/6aa63397ba4132502a4856ab76647df1/69538/db-ip-result.png 160w,\n/static/6aa63397ba4132502a4856ab76647df1/72799/db-ip-result.png 320w,\n/static/6aa63397ba4132502a4856ab76647df1/6af66/db-ip-result.png 640w,\n/static/6aa63397ba4132502a4856ab76647df1/d9199/db-ip-result.png 960w,\n/static/6aa63397ba4132502a4856ab76647df1/21b4d/db-ip-result.png 1280w,\n/static/6aa63397ba4132502a4856ab76647df1/a6d66/db-ip-result.png 2070w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<p>After that, hop 9 <code class=\"language-text\">108.170.242.193</code> and hop 10 <code class=\"language-text\">108.170.233.79</code> also displayed as hosting servers located in Virginia. What on earth is there that they’re all gathered cozily here…?</p>\n<p>Googling a bit, I found announcements of Google hiring people to work in Ashburn. Also many job postings uploaded to neighboring towns Sterling and Reston in the same Virginia state.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fa825b93f209cad6a735204a4c4504b1/6d2da/google-hiring.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVR42pVTa4/aMBDM//9bfOJaaGlVroU8DkggJI4d8g6JPd11G3ToDl270mhtxxmPd9aOAWC6DmhqtJSLoiCU6NoaGCuYK0GPMMb8Exzig3ie4dviJxKZY/3jO758XUGle6D2oQsf0D2mMHgcN8K4PuJZCjQkNCutZkjKSW4wauLtDCKh0Q0G/UD7pbZ73lVY1zUu6oKWcpZlUOWAS20oa2SFRl5rmms7z2ld0lrd9CznXZVOR3UTmYBSCkKkyKuBYFA0TGpuYyZTNOZDOpZJ0fe9xfV6BfOM4whHa22lTjUwd3P9Som5Yboek7Rta3PTNBiGAU6appjNZlitVlgul3h6+mTxebGAHwSYz+fw/QBaxBjb5o8p5rE1TlVV2Gw2cF0PnfLQn5do0l8Iwwj7/R673Q7n8/mhq28I2RTXdXE4HMBqw/CAKAwhpbQ/cElel+WjcLiop9PJqhBCWNKMyKZxkiT225QZURTheDwijmNrJh94p3C73cLzPAvfcy1eXgK7HlAdeX29XlsSPpzVMzETshF3Ctly7j8pFfKcWkdViEWF/FIip9O5xuxgWZa2RT68MsudbO+oBSp6LYqecc+v4m9v/U/8BqA969jZ9pErAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"google hiring\" title=\"\" src=\"/static/fa825b93f209cad6a735204a4c4504b1/6af66/google-hiring.png\" srcset=\"/static/fa825b93f209cad6a735204a4c4504b1/69538/google-hiring.png 160w,\n/static/fa825b93f209cad6a735204a4c4504b1/72799/google-hiring.png 320w,\n/static/fa825b93f209cad6a735204a4c4504b1/6af66/google-hiring.png 640w,\n/static/fa825b93f209cad6a735204a4c4504b1/6d2da/google-hiring.png 936w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Hire me...sob</small>\n</center>\n<p>Scanning the announcements, keywords like Network Engineer, Administrative Business Partner, Data Center, Google Cloud appear a lot, so it seems there’s a Google data center here. Searching more information, an <a href=\"https://wtop.com/business-finance/2019/02/google-to-double-its-virginia-workforce/\" target=\"_blank\" rel=\"nofollow\">article about Google doubling its Virginia workforce</a> was also written in February this year.</p>\n<p>It seems certain there’s a Google data center here.</p>\n<h4 id=\"1722172568googlecom\" style=\"position:relative;\">172.217.25.68(google.com)<a href=\"#1722172568googlecom\" aria-label=\"1722172568googlecom permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0d61b84bb06d96dea7054db728e40209/6f175/final.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACRElEQVR42l1TaW/TQBD1//8bCIpA8IVSKqRyiCI1JE3cxCaU1Hadqz7i+r7Wx2NmkxTESOPdbHbfvDdvV0nzHJ6/Q5QkaNoWoqEUDWpK0dDYCLRdh4T2bR0PYZKiEi2qWqCsa0rxlBWdUfKiwPbBQZKm6PoOWVGhanpwdH2Pltb4l+nu8F638EEzcaEZWBg6luYMFz8tnP5a4d3cxldzC6UoS7ieR6yEBImJQZxkSJIYNTE4xnjt47lq4ouqQtd/QLu5wmQywtvJLU5mFv1n4Ox2BSXLMnBKRl2PXVJTCgRZg7DoiOUecGZa+DZRcTe/xtYYYjq6wqfvI7yZmXitWXh5Y+L895ok5wVy6k9D/eqoV49hhLKqpcyWPn2/RzSMBaaDS6jE6uNYw9m1jlfjBV4Q0AnlM2J4ygxZahRFiONYAhbUUx6PcSCIpetgbi8xWTn4fO/j0nAwXO8wolZwDmwX+taHUhOgTHKJXWVG7Cpnd5jzyAp8P5B7OchoMrAhGS3+Vu+hhFFMLrsyM2LH1+FYpCgrkl9JUDbowXFITSzP8j428F8VHAp/2JSS3JZz6icfZtm7IKBDiVznAildreagglsVhiH+Dwl47Wu4i225MPSmsJKVnA9cFXa6OTCqYC+XMK17WbAlqZ7nyyLHWyIBpSlZTC8hhSAZUR4jLTL0xDCvSwRFiFwUEsBxXKQHmfyaguBRmsmsnwAZPaSrwr0J2W0aE9ok6MmBzLbjDTapI+eO66Kinu4BBV2xUAIeHwW34g91epBEkzIrowAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"final\" title=\"\" src=\"/static/0d61b84bb06d96dea7054db728e40209/6af66/final.png\" srcset=\"/static/0d61b84bb06d96dea7054db728e40209/69538/final.png 160w,\n/static/0d61b84bb06d96dea7054db728e40209/72799/final.png 320w,\n/static/0d61b84bb06d96dea7054db728e40209/6af66/final.png 640w,\n/static/0d61b84bb06d96dea7054db728e40209/d9199/final.png 960w,\n/static/0d61b84bb06d96dea7054db728e40209/21b4d/final.png 1280w,\n/static/0d61b84bb06d96dea7054db728e40209/6f175/final.png 2036w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Okay, finally the server with address <code class=\"language-text\">172.217.25.68</code>, the final destination of <code class=\"language-text\">google.com</code> domain. Searching this address through DB IP also says it’s a server in Japan.</p>\n<p>Actually, it’s obviously much faster for me in Korea to receive information from servers in nearby Japan rather than continuously receiving information from servers in America. My packets were drawing a strange route crossing the Pacific to America then crossing again to Japan…</p>\n<p>Digging deeper I could know why it draws such a route, but the post seems too long so I’ll dig only up to here. <small>(Dig deeper next time…)</small> Even Google I always accessed without thought, looking closely, gets delivered to me through such various paths. It’s a newly amazing fact.</p>\n<p>That’s all for this post on the path from my home to Google.</p>","fields":{"slug":"20190622-my-home-to-google-en","path":"/2019/06/22/my-home-to-google/en/","lang":"en"},"frontmatter":{"title":"The Path from My Home to Google","subTitle":"Let's look inside the internet we use daily","date":"Jun 22, 2019","categories":["Programming","Network"],"tags":["Network","Network","IP","TCP","IP Classes","traceroute","Internet","Network Basics","Technical Interview"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/b9d22b130aacc561550df26f133f469d/d803c/network-structure.png","srcSet":"/static/b9d22b130aacc561550df26f133f469d/d803c/network-structure.png 320w,\n/static/b9d22b130aacc561550df26f133f469d/2a1fd/network-structure.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/b9d22b130aacc561550df26f133f469d/fc5c5/network-structure.webp 320w,\n/static/b9d22b130aacc561550df26f133f469d/e9225/network-structure.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/b9d22b130aacc561550df26f133f469d/01fb2/network-structure.png","srcSet":"/static/b9d22b130aacc561550df26f133f469d/01fb2/network-structure.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/b9d22b130aacc561550df26f133f469d/b384d/network-structure.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"5f3e9837-570f-51b2-956c-a6307bf55512","tableOfContents":"<ul>\n<li>\n<p><a href=\"#the-var-keyword\">The var Keyword</a></p>\n<ul>\n<li><a href=\"#variables-can-be-re-declared\">Variables can be re-declared</a></li>\n<li><a href=\"#it-gets-hoisted\">It gets hoisted</a></li>\n<li><a href=\"#function-level-scope\">Function-level scope</a></li>\n<li><a href=\"#the-var-keyword-can-be-omitted\">The var keyword can be omitted</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#enter-let-and-const\">Enter let and const</a></p>\n</li>\n<li>\n<p><a href=\"#characteristics-of-let-and-const\">Characteristics of let and const</a></p>\n<ul>\n<li><a href=\"#variables-cannot-be-re-declared\">Variables cannot be re-declared</a></li>\n<li><a href=\"#hoisted\">Hoisted?</a></li>\n<li><a href=\"#block-level-scope\">Block-level scope</a></li>\n<li><a href=\"#let-and-const-keywords-cannot-be-omitted\">let and const keywords cannot be omitted</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#characteristics-specific-to-const\">Characteristics specific to const</a></p>\n<ul>\n<li><a href=\"#used-to-declare-constants\">Used to declare constants</a></li>\n<li><a href=\"#must-be-initialized-at-declaration\">Must be initialized at declaration</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#conclusion\">Conclusion</a></p>\n</li>\n</ul>","excerpt":"In this post, I want to take a deep dive into the  and  keywords that were introduced in JavaScript ES6. I’m a bit embarrassed to admit this, but until recently, I believed that  and  weren’t hoisted. Then, during a conversation with a friend, I learned that  and  are indeed hoisted — they just use a special mechanism called the TDZ to prevent access before initialization.","html":"<p>In this post, I want to take a deep dive into the <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> keywords that were introduced in JavaScript ES6. I’m a bit embarrassed to admit this, but until recently, I believed that <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> weren’t hoisted. Then, during a conversation with a friend, I learned that <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> are indeed hoisted — they just use a special mechanism called the TDZ to prevent access before initialization.</p>\n<!-- more -->\n<hr>\n<p><strong>Someone</strong>: Why do <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> throw reference errors, unlike <code class=\"language-text\">var</code>?</p>\n<p><strong>Me</strong>: <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> don’t get hoisted.</p>\n<p><strong>Friend</strong>: They do get hoisted… The reference error happens because they’re in the TDZ.</p>\n<p><strong>Me</strong>: They do??? What’s a TDZ?</p>\n<hr>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/32cc521a6a3381f1b8091672aa70ed2c/20e5d/no-yes.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 141.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAcABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF9MajFAplbjnfJB//EAB0QAAIBBAMAAAAAAAAAAAAAAAECAwAEEhMhIiP/2gAIAQEAAQUCuThLBKWETkLq9EORL4ncgPSVhHwiKUVjHdB2Nf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EACEQAAEDBAEFAAAAAAAAAAAAAAEAAhESITFBAxAiMlGB/9oACAEBAAY/AjS4icwi52kbb0uR7offxRr7T6UY+KCU5ojoCWzpGnVllf/EABwQAQADAAMBAQAAAAAAAAAAAAEAESExQVFhsf/aAAgBAQABPyFSECwu4pOgof2DBfW2bhiKE1O7yDQcBsjLbPVmOaX6Q77a1KALxhtwriHl5csfXBfkE2P/2gAMAwEAAgADAAAAEJAHDP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQEAAgIDAQEAAAAAAAAAAAERACExYUFxgVGx/9oACAEBAAE/EAemkY15/swDPZIu09o4KaGQBLbfuFHoCKyE+HVxpMSGz+DNn3HidEPIB5mPkWmyXfnjr2TAvqLNajG678OLBQQqA43ciABEpEhLud5ZSrzJUys2egz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"no yes\" title=\"\" src=\"/static/32cc521a6a3381f1b8091672aa70ed2c/20e5d/no-yes.jpg\" srcset=\"/static/32cc521a6a3381f1b8091672aa70ed2c/0913d/no-yes.jpg 160w,\n/static/32cc521a6a3381f1b8091672aa70ed2c/cb69c/no-yes.jpg 320w,\n/static/32cc521a6a3381f1b8091672aa70ed2c/20e5d/no-yes.jpg 450w\" sizes=\"(max-width: 450px) 100vw, 450px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Wait... they get hoisted...?</small>\n</center>\n<p>After this humbling experience, I decided to properly study variable declaration keywords — and that’s how this post came to be.</p>\n<h2 id=\"the-var-keyword\" style=\"position:relative;\">The var Keyword<a href=\"#the-var-keyword\" aria-label=\"the var keyword permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The <code class=\"language-text\">var</code> keyword was the only way to declare variables in JavaScript through ES5. It worked quite differently from other languages, which made it notorious for confusing developers coming from other programming backgrounds.</p>\n<p>Here are the key characteristics of the <code class=\"language-text\">var</code> keyword:</p>\n<h3 id=\"variables-can-be-re-declared\" style=\"position:relative;\">Variables can be re-declared<a href=\"#variables-can-be-re-declared\" aria-label=\"variables can be re declared permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan2'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Evan2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>In this code, the declarations are close together, so it’s easy to spot that <code class=\"language-text\">name</code> is declared twice. But imagine 500 lines of code between the first and second declaration — now you’ve got a serious problem. Allowing duplicate declarations creates real potential for unintended variable mutations.</p>\n<h3 id=\"it-gets-hoisted\" style=\"position:relative;\">It gets hoisted<a href=\"#it-gets-hoisted\" aria-label=\"it gets hoisted permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Hoisting essentially means pulling all declarations within a scope to the top of that scope. This happens because JavaScript interpreters process code in two phases: first, variable and function declarations; second, actual code execution. This behavior can be quite confusing.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>When I first started with JavaScript, I thought “why doesn’t this throw a reference error?” The thing is, hoisting causes this code to behave like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Declaration gets pulled to the top</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nname <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Of course, this is just how the JavaScript interpreter processes the code internally — the actual lines in your source file don’t move.</p>\n<p>Anyway, when you get hoisted <small><strike>(I feel like “get hoisted” fits well here — it has happened to me many times…)</strike></small>, even though JavaScript is an interpreted language, the order you read the code and the order it executes can differ. This is one of the factors that makes JavaScript confusing for beginners.</p>\n<h3 id=\"function-level-scope\" style=\"position:relative;\">Function-level scope<a href=\"#function-level-scope\" aria-label=\"function level scope permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Most programming languages use block-level scoping, but JavaScript had to be different. Variables declared with <code class=\"language-text\">var</code> are only scoped to functions. This isn’t a big issue for developers familiar with JavaScript, but it’s definitely confusing for beginners.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> local <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>local<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught ReferenceError: local is not defined</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Because only function scope is recognized, even a variable <code class=\"language-text\">i</code> declared inside a <code class=\"language-text\">for</code> loop is accessible from outside.</p>\n<h3 id=\"the-var-keyword-can-be-omitted\" style=\"position:relative;\">The var keyword can be omitted<a href=\"#the-var-keyword-can-be-omitted\" aria-label=\"the var keyword can be omitted permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>You can declare a variable with or without the <code class=\"language-text\">var</code> keyword. Typical JavaScript freedom. So much freedom that developers can never let their guard down.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> globalVariable <span class=\"token operator\">=</span> <span class=\"token string\">'global!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>globalVariable <span class=\"token operator\">===</span> <span class=\"token string\">'global!'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  globlVariable <span class=\"token operator\">=</span> <span class=\"token string\">'global?'</span> <span class=\"token comment\">// typo</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>globalVariable<span class=\"token punctuation\">)</span> <span class=\"token comment\">// global!</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>globlVariable<span class=\"token punctuation\">)</span> <span class=\"token comment\">// global?</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I accidentally typed <code class=\"language-text\">globalVariable</code> as <code class=\"language-text\">globlVariable</code>. A naive developer would expect <code class=\"language-text\">globalVariable</code> to have the value <code class=\"language-text\">global?</code>, but unfortunately that value went to the typo’d variable name <code class=\"language-text\">globlVariable</code> instead.</p>\n<p>Cases like this are easy to debug in simple code, but once the code gets even slightly complex, you’ll be in tears.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1909feea74565c3861f0bd9dfb9951c1/72747/off-work.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdzrM1Fw/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAERIDIv/aAAgBAQABBQLIohVbJELeuts1T//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB8QAAIBAgcAAAAAAAAAAAAAAAABEQIQEiExQVFhkf/aAAgBAQAGPwLQxVboyUi4gdPUe2//xAAdEAEAAgICAwAAAAAAAAAAAAABABExQSFRYXHR/9oACAEBAAE/IQ/JiOEaoA13BLwFu1jg7UfsQXAfe0CAdE//2gAMAwEAAgADAAAAEMMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAQABBQEBAAAAAAAAAAAAAREAITFBYYFxkf/aAAgBAQABPxBTRdyZAkF0gNT6mAOkhN2OnLiVRPLp+sRoKpeEV+B7m82BXoz/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"off work\" title=\"\" src=\"/static/1909feea74565c3861f0bd9dfb9951c1/c08c5/off-work.jpg\" srcset=\"/static/1909feea74565c3861f0bd9dfb9951c1/0913d/off-work.jpg 160w,\n/static/1909feea74565c3861f0bd9dfb9951c1/cb69c/off-work.jpg 320w,\n/static/1909feea74565c3861f0bd9dfb9951c1/c08c5/off-work.jpg 640w,\n/static/1909feea74565c3861f0bd9dfb9951c1/72747/off-work.jpg 764w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Get caught by one of these, and you'll be working until 11pm and taking a taxi home</small>\n</center>\n<h2 id=\"enter-let-and-const\" style=\"position:relative;\">Enter let and const<a href=\"#enter-let-and-const\" aria-label=\"enter let and const permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The <code class=\"language-text\">var</code> keyword makes it easy to create global variables, and even local variables have such wide scope that tracking down where a variable was declared or how its value unexpectedly changed can be difficult.</p>\n<p>That’s why JavaScript ES6, released in 2015, introduced new variable declaration keywords: <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>.</p>\n<p>The <code class=\"language-text\">let</code> keyword is used to declare variables, just like <code class=\"language-text\">var</code>. The <code class=\"language-text\">const</code> keyword is used to declare constants — meaning you can’t reassign the literal value.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> callEvan <span class=\"token operator\">=</span> <span class=\"token string\">'Hello, Evan!'</span><span class=\"token punctuation\">;</span>\ncallEvan <span class=\"token operator\">=</span> <span class=\"token string\">'Bye, Evan!'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught TypeError: Assignment to constant variable.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>So how are these different from the old <code class=\"language-text\">var</code> keyword? The characteristics of <code class=\"language-text\">var</code> I described above were:</p>\n<hr>\n<ul>\n<li>Variables can be re-declared.</li>\n<li>It gets hoisted.</li>\n<li>It uses function-level scope, not block-level scope.</li>\n<li>The var keyword can be omitted.</li>\n</ul>\n<hr>\n<p>These four points. Now let’s look at how <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> contrast with them.</p>\n<h2 id=\"characteristics-of-let-and-const\" style=\"position:relative;\">Characteristics of let and const<a href=\"#characteristics-of-let-and-const\" aria-label=\"characteristics of let and const permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Let’s first examine the points that contrast with the <code class=\"language-text\">var</code> keyword characteristics described above.</p>\n<h3 id=\"variables-cannot-be-re-declared\" style=\"position:relative;\">Variables cannot be re-declared<a href=\"#variables-cannot-be-re-declared\" aria-label=\"variables cannot be re declared permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Unlike <code class=\"language-text\">var</code>, once you declare a variable with these keywords, you can’t re-declare it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan2'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// nothing happens...</span>\n\n<span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan2'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught SyntaxError: Identifier 'name' has already been declared</span>\n\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan2'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught SyntaxError: Identifier 'name' has already been declared</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This prevents scenarios where you accidentally declare a variable twice, change its value unintentionally, and end up working overtime.</p>\n<h3 id=\"hoisted\" style=\"position:relative;\">Hoisted?<a href=\"#hoisted\" aria-label=\"hoisted permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>This is exactly why I wrote this post. I thought <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> weren’t hoisted.</p>\n<p>But as I explained above, hoisting is something that happens during the JavaScript interpreter’s code parsing phase — there’s no way <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code> can escape it. So how did they solve this problem?</p>\n<h4 id=\"different-errors-depending-on-the-declaration-keyword\" style=\"position:relative;\">Different errors depending on the declaration keyword<a href=\"#different-errors-depending-on-the-declaration-keyword\" aria-label=\"different errors depending on the declaration keyword permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>aaa<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Uncaught ReferenceError: aaa is not defined</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught ReferenceError: Cannot access 'name' before initialization</span>\n<span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The first example shows accessing a variable declared with <code class=\"language-text\">var</code> that got hoisted. Naturally, no reference error — it just cleanly outputs <code class=\"language-text\">undefined</code>.</p>\n<p>The second example shows accessing a variable that was never declared at all. We get <code class=\"language-text\">Uncaught ReferenceError</code> with the message <code class=\"language-text\">aaa is not defined</code>.</p>\n<p>The third example shows accessing a variable declared with <code class=\"language-text\">let</code> before its declaration. We also get <code class=\"language-text\">Uncaught ReferenceError</code>, but the message is different: <code class=\"language-text\">Cannot access 'name' before initialization</code>.</p>\n<h4 id=\"lets-dig-into-the-v8-engine\" style=\"position:relative;\">Let’s dig into the V8 engine<a href=\"#lets-dig-into-the-v8-engine\" aria-label=\"lets dig into the v8 engine permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>These two errors are completely different, and in the V8 engine’s internal <code class=\"language-text\">MESSAGE_TEMPLATE</code>, they’re explicitly distinguished and called in different cases.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token function\">T</span><span class=\"token punctuation\">(</span>NotDefined<span class=\"token punctuation\">,</span> <span class=\"token string\">\"% is not defined\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">T</span><span class=\"token punctuation\">(</span>AccessedUninitializedVariable<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Cannot access '%' before initialization\"</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>After cloning <a href=\"https://github.com/v8/v8\" target=\"_blank\" rel=\"nofollow\">V8’s GitHub repository</a> and examining it, I found numerous places where the code branches based on whether a JS object was declared with <code class=\"language-text\">var</code> versus <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code>. As I continued analyzing the code, I confirmed that hoisting always occurs regardless of which keyword you use to declare a value. The V8 engine’s internal hoisting flag <code class=\"language-text\">should_hoist</code> is always set to <code class=\"language-text\">true</code> when assigning to a JavaScript object, without any distinction based on the variable declaration keyword.</p>\n<p>So where does the difference between <code class=\"language-text\">var</code> and <code class=\"language-text\">let</code>/<code class=\"language-text\">const</code> come from? While they’re all treated identically when declaring variables — that is, when V8 creates variable objects — they’re handled differently during the initialization phase, when memory space is allocated for the variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">static</span> InitializationFlag <span class=\"token function\">DefaultInitializationFlag</span><span class=\"token punctuation\">(</span>VariableMode mode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">DCHECK</span><span class=\"token punctuation\">(</span><span class=\"token function\">IsDeclaredVariableMode</span><span class=\"token punctuation\">(</span>mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> mode <span class=\"token operator\">==</span> VariableMode<span class=\"token double-colon punctuation\">::</span>kVar <span class=\"token operator\">?</span> kCreatedInitialized\n                                    <span class=\"token operator\">:</span> kNeedsInitialization<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looking at the subsequent logic, there’s a function called <code class=\"language-text\">DefaultInitializationFlag</code> that returns a <code class=\"language-text\">VariableKind</code> type used internally by V8. Variables declared with <code class=\"language-text\">var</code> get <code class=\"language-text\">kCreatedInitialized</code>, while variables declared with <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> get <code class=\"language-text\">kNeedsInitialization</code>.</p>\n<blockquote>\n<p>In other words, literal values declared with <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code> are hoisted, but they’re managed in a “needs initialization” state for a special reason.</p>\n</blockquote>\n<h4 id=\"what-does-needs-initialization-mean\" style=\"position:relative;\">What does “needs initialization” mean?<a href=\"#what-does-needs-initialization-mean\" aria-label=\"what does needs initialization mean permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Inside the JavaScript interpreter, variables are created in three stages:</p>\n<hr>\n<ul>\n<li><code class=\"language-text\">Declaration</code>: A scope and variable object are created, and the scope references the variable object.</li>\n<li><code class=\"language-text\">Initialization</code>: Memory space is allocated for the value the variable object will hold. At this point, it’s initialized to <code class=\"language-text\">undefined</code>.</li>\n<li><code class=\"language-text\">Assignment</code>: A value is assigned to the variable object.</li>\n</ul>\n<hr>\n<p>For objects declared with <code class=\"language-text\">var</code>, declaration and initialization happen simultaneously. The moment it’s declared, it’s initialized to <code class=\"language-text\">undefined</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token comment\">// v8/src/parsing/parser.cc</span>\n<span class=\"token comment\">// When declaring a variable in Var mode</span>\n<span class=\"token keyword\">auto</span> var <span class=\"token operator\">=</span> scope<span class=\"token operator\">-></span><span class=\"token function\">DeclareParameter</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> VariableMode<span class=\"token double-colon punctuation\">::</span>kVar<span class=\"token punctuation\">,</span> is_optional<span class=\"token punctuation\">,</span>\n                                         is_rest<span class=\"token punctuation\">,</span> <span class=\"token function\">ast_value_factory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> beg_pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nvar<span class=\"token operator\">-></span><span class=\"token function\">AllocateTo</span><span class=\"token punctuation\">(</span>VariableLocation<span class=\"token double-colon punctuation\">::</span>PARAMETER<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looking at V8’s code, after creating a variable object in <code class=\"language-text\">kVar</code> mode, the <code class=\"language-text\">AllocateTo</code> method is immediately called to allocate memory space. But variable objects created with <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code> are different.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token comment\">// v8/src/parsing/parser.cc</span>\n<span class=\"token comment\">// When declaring a variable in kLet mode</span>\nVariableProxy<span class=\"token operator\">*</span> proxy <span class=\"token operator\">=</span>\n      <span class=\"token function\">DeclareBoundVariable</span><span class=\"token punctuation\">(</span>variable_name<span class=\"token punctuation\">,</span> VariableMode<span class=\"token double-colon punctuation\">::</span>kLet<span class=\"token punctuation\">,</span> class_token_pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nproxy<span class=\"token operator\">-></span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">set_initializer_position</span><span class=\"token punctuation\">(</span>end_pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// When declaring a variable in Const mode</span>\nVariableProxy<span class=\"token operator\">*</span> proxy <span class=\"token operator\">=</span>\n          <span class=\"token function\">DeclareBoundVariable</span><span class=\"token punctuation\">(</span>local_name<span class=\"token punctuation\">,</span> VariableMode<span class=\"token double-colon punctuation\">::</span>kConst<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nproxy<span class=\"token operator\">-></span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">set_initializer_position</span><span class=\"token punctuation\">(</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Variable objects created in <code class=\"language-text\">kLet</code> or <code class=\"language-text\">kConst</code> mode don’t have <code class=\"language-text\">AllocateTo</code> called immediately. Instead, you can see they only set a <code class=\"language-text\">position</code> value indicating where the code is in the source file.</p>\n<p>This is exactly the moment when variables created with <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code> enter the <code class=\"language-text\">TDZ (Temporal Dead Zone)</code>. In other words, a variable in the TDZ is “declared but not yet initialized — memory hasn’t been allocated for the value it will hold.”</p>\n<p>If you try to access such a variable, you’ll inevitably encounter the <code class=\"language-text\">Cannot access '%' before initialization</code> error message.</p>\n<h3 id=\"block-level-scope\" style=\"position:relative;\">Block-level scope<a href=\"#block-level-scope\" aria-label=\"block level scope permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Unlike <code class=\"language-text\">var</code> which uses function-level scope, <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> use block-level scope. Because <code class=\"language-text\">var</code> doesn’t use block-level scope, variables declared inside a block are treated as global variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> globalVariable <span class=\"token operator\">=</span> <span class=\"token string\">'I am global'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>globalVariable <span class=\"token operator\">===</span> <span class=\"token string\">'I am global'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> globalVariable <span class=\"token operator\">=</span> <span class=\"token string\">'am I local?'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>globalVariable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// am I local?</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>But with <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>, variables declared inside a block are treated as local variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> globalVariable <span class=\"token operator\">=</span> <span class=\"token string\">'I am global'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>globalVariable <span class=\"token operator\">===</span> <span class=\"token string\">'I am global'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> globalVariable <span class=\"token operator\">=</span> <span class=\"token string\">'am I local?'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> localVariable <span class=\"token operator\">=</span> <span class=\"token string\">'I am local'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>globalVariable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// I am global</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>localVariable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught ReferenceError: localVariable is not defined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>In this case, <code class=\"language-text\">localVariable</code> declared inside the block is treated as a local variable and can’t be referenced from the global scope. Note that <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code> also get hoisted at the block level.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Global Evan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'Global Evan'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught ReferenceError: Cannot access 'name' before initialization</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Local Evan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You might expect the <code class=\"language-text\">if</code> block to output <code class=\"language-text\">Global Evan</code> — the value of the globally declared <code class=\"language-text\">name</code> variable. But hoisting also occurs inside the <code class=\"language-text\">if</code> block, pulling the local <code class=\"language-text\">name</code> declaration to the top of the block, which causes the reference error.</p>\n<h3 id=\"let-and-const-keywords-cannot-be-omitted\" style=\"position:relative;\">let and const keywords cannot be omitted<a href=\"#let-and-const-keywords-cannot-be-omitted\" aria-label=\"let and const keywords cannot be omitted permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span>\n<span class=\"token comment\">// The above code is equivalent to</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Evan'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>If you don’t use a variable declaration keyword, it’s treated as if you used <code class=\"language-text\">var</code>, so you must always include the keyword.</p>\n<h2 id=\"characteristics-specific-to-const\" style=\"position:relative;\">Characteristics specific to const<a href=\"#characteristics-specific-to-const\" aria-label=\"characteristics specific to const permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Aside from the reasons explained above, the <code class=\"language-text\">let</code> keyword essentially serves the same role as <code class=\"language-text\">var</code> in that it’s used to declare variables. Now let’s look more closely at <code class=\"language-text\">const</code>, which has a different role from the traditional <code class=\"language-text\">var</code> keyword.</p>\n<h3 id=\"used-to-declare-constants\" style=\"position:relative;\">Used to declare constants<a href=\"#used-to-declare-constants\" aria-label=\"used to declare constants permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>As mentioned above, <code class=\"language-text\">const</code> is a keyword for declaring constants. A constant represents an immutable value. In other words, once you declare a value with <code class=\"language-text\">const</code>, you can never change it again.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> maxCount <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\nmaxCount <span class=\"token operator\">=</span> <span class=\"token number\">40</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught TypeError: Assignment to constant variable.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>If you try to reassign a value declared with <code class=\"language-text\">const</code>, you’ll get a friendly error message telling you it’s not allowed.</p>\n<p>But there’s an important point here. What happens when you declare a type that uses call by reference with <code class=\"language-text\">const</code>?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Evan'</span> <span class=\"token punctuation\">}</span>\nobj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'John'</span> <span class=\"token punctuation\">}</span> <span class=\"token comment\">// Uncaught TypeError: Assignment to constant variable.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>In this case, we get an error because we’re trying to change the reference that <code class=\"language-text\">obj</code> points to. However, the properties inside the object aren’t affected by the <code class=\"language-text\">const</code> keyword.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Evan'</span> <span class=\"token punctuation\">}</span>\nobj<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'John'</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token comment\">// { name: 'John' }</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>This applies equally to <code class=\"language-text\">Array</code>, another type that uses call by reference. Even if you declared it with <code class=\"language-text\">const</code>, there’s no restriction on using <code class=\"language-text\">push</code> or <code class=\"language-text\">splice</code> to modify the elements inside the array.</p>\n<h3 id=\"must-be-initialized-at-declaration\" style=\"position:relative;\">Must be initialized at declaration<a href=\"#must-be-initialized-at-declaration\" aria-label=\"must be initialized at declaration permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>With <code class=\"language-text\">let</code>, even if you only explicitly declare a variable, the interpreter implicitly initializes it to <code class=\"language-text\">undefined</code> when it processes that line.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> hi<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>hi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>But when using <code class=\"language-text\">const</code>, you must assign a value at the time of declaration.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> hi<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Uncaught SyntaxError: Missing initializer in const declaration</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\">Conclusion<a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Unless you’re in the unfortunate situation of having to write JavaScript ES5 code, I recommend never using the <code class=\"language-text\">var</code> keyword anymore.</p>\n<p>That leaves <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>, which raises the question: “how should I use these two?”</p>\n<p>Having used only <code class=\"language-text\">var</code> for so long, I hadn’t really thought about this, but there are actually not that many cases where you absolutely need to reassign a variable. I was coding one day and looked back at my code — most variables were declared with <code class=\"language-text\">const</code>, and <code class=\"language-text\">let</code> was only used in a few places.</p>\n<p>If you do need to use <code class=\"language-text\">let</code>, I recommend never using it in the global scope — keep block scopes small and use it within those.</p>\n<p>As for <code class=\"language-text\">const</code>, it immediately throws an error if you try to reassign, which prevents the sad situation of accidentally changing a variable’s value. So make good use of <code class=\"language-text\">const</code> for safe coding, and may you all leave work on time instead of staying late.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 313px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a64125e9e9cda049bccec09014083a9e/aa65c/off-work2.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIFAQT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGxwUFNED//xAAZEAADAQEBAAAAAAAAAAAAAAAAAhEBFCL/2gAIAQEAAQUCOVGRMiF9XT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAABIQAQEVH/2gAIAQEABj8CIBcCw9g1qsr/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRcf/aAAgBAQABPyF8BmQJoE0O/ZSVYAvsy26zuBduS4g4z//aAAwDAQACAAMAAAAQUw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAMBAAMAAAAAAAAAAAABEQAhMVFhofH/2gAIAQEAAT8QbKCtGheYh51Snb9sSnYJ0HcEtB0rzzNuAg+Qd/mLBAvCMz//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"off work2\" title=\"\" src=\"/static/a64125e9e9cda049bccec09014083a9e/aa65c/off-work2.jpg\" srcset=\"/static/a64125e9e9cda049bccec09014083a9e/0913d/off-work2.jpg 160w,\n/static/a64125e9e9cda049bccec09014083a9e/aa65c/off-work2.jpg 313w\" sizes=\"(max-width: 313px) 100vw, 313px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Time to go home, eat dinner, and watch Netflix!</small>\n</center>\n<p>That wraps up this post on JavaScript’s let, const, and the TDZ.</p>","fields":{"slug":"20190618-javascript-let-const-en","path":"/2019/06/18/javascript-let-const/en/","lang":"en"},"frontmatter":{"title":"JavaScript's let, const, and the TDZ","subTitle":"Digging into the V8 engine to understand how JavaScript variables really work","date":"Jun 18, 2019","categories":["Programming","JavaScript"],"tags":["JavaScript","Temporal Dead Zone","TDZ","Hoisting","V8","Technical Interview","JavaScript Fundamentals"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/d803c/js.001.png","srcSet":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/d803c/js.001.png 320w,\n/static/2cc989808d5cc4f4cafd05e0c479f2cc/6131a/js.001.png 734w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/fc5c5/js.001.webp 320w,\n/static/2cc989808d5cc4f4cafd05e0c479f2cc/d6c14/js.001.webp 734w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/17e8c/js.001.png","srcSet":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/17e8c/js.001.png 734w","sizes":"100vw"},"sources":[{"srcSet":"/static/2cc989808d5cc4f4cafd05e0c479f2cc/88dbe/js.001.webp 734w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"7561434f-239e-5249-aece-832fd31d6c36","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-jira-software\">What is Jira Software?</a></p>\n</li>\n<li>\n<p><a href=\"#customizing-jira-issues\">Customizing Jira Issues</a></p>\n<ul>\n<li><a href=\"#finding-jira-settings-menu\">Finding Jira Settings Menu</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#issues-menu\">Issues Menu</a></p>\n<ul>\n<li><a href=\"#issue-types\">Issue Types</a></li>\n<li><a href=\"#workflows\">Workflows</a></li>\n<li><a href=\"#screens\">Screens</a></li>\n<li><a href=\"#fields\">Fields</a></li>\n<li><a href=\"#issue-features\">Issue Features</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post I want to write about Jira, one of Atlassian’s flagship products. These days many IT companies use agile development methodologies for software development. Jira helps us use various methods from agile methodology more easily and conveniently.","html":"<p>In this post I want to write about Jira, one of Atlassian’s flagship products. These days many IT companies use agile development methodologies for software development. Jira helps us use various methods from agile methodology more easily and conveniently.</p>\n<!-- more -->\n<p>In fact, since agile processes are just methodologies not principles, the composition and development process inevitably differs slightly from team to team, and since we keep trying various methods through retrospectives, it’s not rigidly defined by any rules. Jira provides features to diversely customize projects to cope with these ever-changing rules.</p>\n<p>However, the features are so numerous and terminology so complex that those first encountering it don’t know how to use it. Probably many people are just using the basically provided Kanban or sprint features.</p>\n<p>So today I want to explain how to customize Issues, which form the most basic unit when using Jira.</p>\n<h2 id=\"what-is-jira-software\" style=\"position:relative;\">What is Jira Software?<a href=\"#what-is-jira-software\" aria-label=\"what is jira software permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Jira is a kind of project management solution supporting agile software development methodology provided by Australian company Atlassian. Simply it provides Kanban boards, and deeply it provides sprint-based management techniques needed for agile processes and various reports for analyzing sprints.</p>\n<p>This seems to be what differentiates it from other project management tools like Trello or Asana. <small>(By the way, Atlassian acquired Trello a while back)</small></p>\n<p>Also, good integration with other Atlassian services like Bitbucket, Confluence, Source Tree seems nice. For example, when developing a feature in some branch then creating a Pull Request to that branch, you can automatically change the Jira-connected issue to Code Review status, and if you include Jira issue numbers in commit messages like <code class=\"language-text\">LU-0000 first commit</code>, that commit and branch automatically get tracked within the Jira issue.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 131.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByklEQVR42qWTPUsdQRSG9xfYxkrTXUijWMQqdiKkC5JGUqggCREsgjaSgMZCyxSCBAKCYJEmTYiFEAj5BcFPbhJUELzszuzszO7s95wzmd2rpAnc2ZthmS3OPHPe98w5jtbIGO+4LMlVXqACjdp2OXkBT7baD1eOp9bajzd+jS2fDs7/2D5wTUxBj3ucosRXu9fP3l0svb9a3Lmc3mw/Wj3f/+5bwd2fEdtE7x2MSrkHh1d7H71Pn/Ov35Ivh9lZG0wE0QJOUz4xGQzeZ8MtOtwiA/fkm7dVRKnesAYof/4ujk6Kk9Py7Lw8OoZOR9tmBvBccnPjUspuGbQ174Dvk5FxrzVKHoz5I+N0qCVfr9vKRhHGCy/l7IKcex7NvxBPZ9IPuzUMFp61LlDnqLNqt1JsTpW1rgpmPCSMm48yARY4AMZxWnsGEGHEhWQBz/OyYZMgRjIOeGjGI81yG80mM9SdW8GEMp8FHmWRTHrCMk4CLrgIjUGnexli48a+LZhPmUd8wD4GA9EYFqHsM7MpOPQnu6p2FJtSx0naD8y4IDSwead/yE6SLM2K//AMoJQye2PZhPpuPdKkO9KNMpuCNc35Fy5LhXerEfwHYRvX4/RCr9wAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira branch tracking\" title=\"\" src=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png\" srcset=\"/static/55b2f630f3f5627e2c7f65f96e3a36b4/69538/jira-branch.png 160w,\n/static/55b2f630f3f5627e2c7f65f96e3a36b4/72799/jira-branch.png 320w,\n/static/55b2f630f3f5627e2c7f65f96e3a36b4/d10fb/jira-branch.png 420w\" sizes=\"(max-width: 420px) 100vw, 420px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Branch and commits being tracked in an issue</small>\n</center>\n<p>The best thing about these sharing features is actually that POs’ (Product Owners) work becomes much easier. Jira’s sprint dashboard is a kind of status board. You can see in detail through branches and commits who progressed which task to what degree, and it shows real-time information like what percentage of total sprint issues are Done status, how much harder the team must run to finish this sprint.</p>\n<p>Well, at the end of the day Jira is just a tool, and what matters most for agile is the team’s will to “work efficiently,” but it’s true that Jira provides very meticulous features.</p>\n<h2 id=\"customizing-jira-issues\" style=\"position:relative;\">Customizing Jira Issues<a href=\"#customizing-jira-issues\" aria-label=\"customizing jira issues permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>The items described in this document can only be performed by users with project Administrator privileges.</p>\n</blockquote>\n<h3 id=\"finding-jira-settings-menu\" style=\"position:relative;\">Finding Jira Settings Menu<a href=\"#finding-jira-settings-menu\" aria-label=\"finding jira settings menu permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When accessing the Jira main screen, if you’re a user with modification rights to Jira project settings, you’ll see a <code class=\"language-text\">Jira settings</code> menu at the very bottom of the left menu list. Accessing this menu lets you modify all settings about Jira including system, projects, issues.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 442px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSUlEQVR42m2Ua0hTYRjHj07dzEs5ykgruxgkUVSEkaA783bcnCwNKzOJpMKI6ms3KDW6aB/MIoIgdPNsmjc0XVkQ1qdMIsjCyowiMoqy2TRLt/173vfMUtwLf5733TnPb8/tPUKoZEVQai3CDVZSHdhZk2kha/FZ5awmRRplqOjdpEO3MT7+G5OTk3C73dPsBIRF+S2Qjj1EcEYdgjJlsHPM9lbE7mjFit3t3E79FpZdD0FnwZHqHrA1+us3vg2P4KdrDM6RUYyOjUNYTA6G4wxoRQgBVxJk3X4HEvZ2YP2BO1hT3ImNJXf5fm5OAweeuNHLgR+HvqKr+wn6+gdxv7sX/QMfIGiybJhjqKeU6qCWbAjU1UCltyCAJNA+QFeLQNqr0qwIpXcF0YKkgw54PF4O9Srm3xKizLd4RMGZNqj115CQfw3z0y9hcXYV4nKqsdRUDW1qBYI2l0OTdBbChlKkHO3kzhNuL4bHPHD+8ioa90KIoLrE5DdTujZoCBifexXzUisRY6zCEtNlLDdfgTatEqrEsn/A5MMdHOgiwJsvbrz+PEH6g1dDfyCEE3DJzlaEUFPCjHbEFbRAa27Asl2tVE9qhMEGVTp1mtINNSgpJx+9C48v1x/On3j2vB8Dgx/wsv+tAtRS2qzLcwx2RG9rRqSpAQtymxDLOmtsQFCGTCWRCWgnoJUDvQT0eDxwUy2Z2JmJpxy9rYkDWdE3HexCdF4T7/bywjbEF7Vh7T4HVhW1+4CWGcCpSL86JzA0TCmzUQmmCNSSzBsTU0COpkbMy2vhitzajHAzRW1u8nV5doRsPXrpQlXHFwhsVFh9GDgs04qcw21YnWfBpkI7kosbEW+uhVa8joiMGmj8RTgt3UnqugKk6AKkeqToy5BtPIek9PMQpQtIM1SQLmJL6jlIupOYm2UlYN0MoNeXMrslzhHXf2AgA4plSCxxICKXrt2eTq71JfcQVeBAYko5Fko3CSjTHE6P0MOB795/Qs/TFzOBG/UXkaE7BZ1YClE8A1GnSC+epj8rRXiWPKuGU8AHj/tw6Wa7AuSiqxci2enrIvuVmj3zU0O3WwFele8g70jFNCA5abijza/YM39zODU2350uvHk/hL/YUzbRBT1qkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jira1\" title=\"\" src=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png\" srcset=\"/static/4946e82a095e3c5c767dc4fe3cf160b9/69538/jira1.png 160w,\n/static/4946e82a095e3c5c767dc4fe3cf160b9/72799/jira1.png 320w,\n/static/4946e82a095e3c5c767dc4fe3cf160b9/e03bf/jira1.png 442w\" sizes=\"(max-width: 442px) 100vw, 442px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking the <code class=\"language-text\">Jira settings</code> menu and exposing the settings menu shows 5 total menus: <code class=\"language-text\">System</code>, <code class=\"language-text\">Products</code>, <code class=\"language-text\">Projects</code>, <code class=\"language-text\">Issues</code>, <code class=\"language-text\">Apps</code>. This post will only cover settings for <code class=\"language-text\">Issues</code> among these settings.</p>\n<h2 id=\"issues-menu\" style=\"position:relative;\">Issues Menu<a href=\"#issues-menu\" aria-label=\"issues menu permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/2e237/menu.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3ElEQVR42q3SSQ6CQBAFUDYiUXBE47zyKqKCihPoxtvRgKJivOC3uzQmLqFdVNK9efk1KKPjA9VFjOryjJ53R2d/oyrbEVQrRHGarZThMSWwvroQZK4TdD0JsMkBbcYwPj1hbq4YHFKU5hEKE5YZI7DhJijNQtSWMQwngjZlvAIUrXyl6HZMiIANJ86d7JuQHhZDhc+x4V54++F/QHOT0JYFqFpMHmy6Yrt3Qg2eNi9KoPpJKM5G4xuWafubUCzHWJyl5veTsLXlM/RveP+lwQDt3RV9P4XOT0em5RcQDNgToqVsagAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira issue menus\" title=\"\" src=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/6af66/menu.png\" srcset=\"/static/3d8e2b163d5a7432cfbc4d1b01ffb236/69538/menu.png 160w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/72799/menu.png 320w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/6af66/menu.png 640w,\n/static/3d8e2b163d5a7432cfbc4d1b01ffb236/2e237/menu.png 790w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking the Issues menu within Jira settings exposes numerous menus related to issues. Let’s look at them one by one.</p>\n<h3 id=\"issue-types\" style=\"position:relative;\">Issue Types<a href=\"#issue-types\" aria-label=\"issue types permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<hr>\n<h4 id=\"issue-types-1\" style=\"position:relative;\">Issue Types<a href=\"#issue-types-1\" aria-label=\"issue types 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/94c2af86fde11b597a2a92c29a3c5595/612f7/issue-types.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 13.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAs0lEQVR42h2Na0+DMBhG+f//TJfMMMY2NGYK9AbthiOxXYs5Nv1wct5b3qfS84oxM9+94Po1IKRmEIox0zvJInvUdWSYVqTMMzlib3esuxWb2TLNDucW5N1QHT4sdXvhrWl53de8ZHZ1Q3PqOJzOdN07x+OF9vxZdvuuLYFSG9Q0M0qTwzUqP/vxDyplV5QyiHwgswct0MtEShvxGYtTSoWQ+xgTPgSCz4Rnwef6N3q2v41/jnne7iZi1GMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira issue types\" title=\"\" src=\"/static/94c2af86fde11b597a2a92c29a3c5595/6af66/issue-types.png\" srcset=\"/static/94c2af86fde11b597a2a92c29a3c5595/69538/issue-types.png 160w,\n/static/94c2af86fde11b597a2a92c29a3c5595/72799/issue-types.png 320w,\n/static/94c2af86fde11b597a2a92c29a3c5595/6af66/issue-types.png 640w,\n/static/94c2af86fde11b597a2a92c29a3c5595/612f7/issue-types.png 773w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Issue types mean types of issues available within Jira like <code class=\"language-text\">Story</code>, <code class=\"language-text\">Bug</code>, <code class=\"language-text\">Task</code>. These issue types are broadly divided into <code class=\"language-text\">Standard</code> type and <code class=\"language-text\">Sub-Task</code> type.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Issue Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><strong>Standard</strong></td>\n<td>Issues that can have child issues as parent issues</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>Sub-Task</strong></td>\n<td>Issues that can only exist as child issues of parent issues. Cannot exist independently</td>\n</tr>\n</tbody>\n</table>\n<p>The agile team at my current workplace uses 7 total issue types: <code class=\"language-text\">Bug</code>, <code class=\"language-text\">Epic</code>, <code class=\"language-text\">Research</code>, <code class=\"language-text\">Story</code>, <code class=\"language-text\">Sustain</code>, <code class=\"language-text\">Task</code>, <code class=\"language-text\">Sub-task</code>. For the meaning of each issue type, read the description written below the issue type.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/083cd514af9e20714b7ed1f6324fe2c1/bff4e/jira2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVR42nWSi26DMAxF+f8/3DRp09qttJDmBYnz4tYOWjVNzJIFxOHkXjuDU3dMSiNVoDQg5QLvF7Rtw2wClEtwoYI/D7O1DWbJnAUhNQx+VrDGIBEhp4RSCtZ15c0bRp1wmjMmm5+AvyFLPjZoARIDnV1htGFVHs45xEioDBXg5xTx8kV4vxJsaKB8QOTIdWNnDYWfHTizSkrEsNgz59yByheMpvDpu2Uc85DKhsh2BTxYdcM4XrgXrRfFskDlX+md5Vyo4b+Qg1auy96YBejv0FqDpIesLPNQ5F0UnibC6zfhPKcOjQeWZSWw3YX7SKx00OrKludeFJW11l2h9PAW8XYhtp156vtEj0Km638UautgrO1WJQQYQnhO+eOWcFYJkyt8Neqhwt+WH4L5ca4xipvJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira issue type list\" title=\"\" src=\"/static/083cd514af9e20714b7ed1f6324fe2c1/6af66/jira2.png\" srcset=\"/static/083cd514af9e20714b7ed1f6324fe2c1/69538/jira2.png 160w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/72799/jira2.png 320w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/6af66/jira2.png 640w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/d9199/jira2.png 960w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/21b4d/jira2.png 1280w,\n/static/083cd514af9e20714b7ed1f6324fe2c1/bff4e/jira2.png 2660w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Sadly it’s in English, but it’s a readable level. If you don’t want to make other people also experience the pain of reading English descriptions like this, we can sacrifice ourselves and translate everything to Korean. Issue types can be modified and deleted through the menu in the last <code class=\"language-text\">Actions</code> column.</p>\n<hr>\n<ul>\n<li>Edit: Modify the issue type’s name, description, icon, etc.</li>\n<li>Translate: Set translation content for issue type name and description.</li>\n<li>Delete: Try not to use this. Don’t even look at it.</li>\n</ul>\n<hr>\n<h4 id=\"issue-type-schemes\" style=\"position:relative;\">Issue Type Schemes<a href=\"#issue-type-schemes\" aria-label=\"issue type schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Issue type schemes are a kind of group bundling issue types. When applying issue types to each project, you assign issue type schemes rather than assigning each issue type individually. Also, the Projects column on the issue type scheme settings page specifies which projects are using that scheme, so make sure to check this part when modifying and deleting.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f485337e6a8a3f09e61456c591849c48/26781/jira3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+klEQVR42p1R7W7DIAzM+z9kpUxRphTaQAkBzMfNJlo6Vd2fWjohfPhsfEMiQs4ZtVagASlltNY6JGIizh1vSiknJ5Aa4alUlHrkhnH8wjRNWJYFu9+hFg3iJr8RY4T3viOEgL8hPfdY4EIB5WOAQR5JUWCgZKjxgtt9xacxvLbU+spfTJ8LSrHsRiA7uWnTJ372aH0/uTS0NwJMdV5OWcEwzzOstTDrCh8ilN1gjTkLUq4wvmCLFe1FUe4+VTz2g4/EpiilYFhA4NiU79V18VOQKgIXvYtuCnNiyimote4OOufYGMLVbHjY54TEE8p3/xMUERENfFJp+AFArnUBrrbOrgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira issue type scheme list\" title=\"\" src=\"/static/f485337e6a8a3f09e61456c591849c48/6af66/jira3.png\" srcset=\"/static/f485337e6a8a3f09e61456c591849c48/69538/jira3.png 160w,\n/static/f485337e6a8a3f09e61456c591849c48/72799/jira3.png 320w,\n/static/f485337e6a8a3f09e61456c591849c48/6af66/jira3.png 640w,\n/static/f485337e6a8a3f09e61456c591849c48/d9199/jira3.png 960w,\n/static/f485337e6a8a3f09e61456c591849c48/21b4d/jira3.png 1280w,\n/static/f485337e6a8a3f09e61456c591849c48/26781/jira3.png 2664w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Like issue types, issue type schemes can also be modified, deleted, assigned, and copied through the menu in the last <code class=\"language-text\">Actions</code> column.</p>\n<hr>\n<ul>\n<li>Edit - Set the issue type scheme’s name, description, default issue type, types of issue types to use.</li>\n<li>Associate - Assign the issue type scheme to a project.</li>\n<li>Copy - Copy the issue type scheme.</li>\n<li>Delete - Delete the issue type scheme.</li>\n</ul>\n<hr>\n<h4 id=\"sub-tasks\" style=\"position:relative;\">Sub-tasks<a href=\"#sub-tasks\" aria-label=\"sub tasks permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Manages issue types for sub-tasks. If you haven’t configured anything, you’re set to only use the basically provided issue type named <code class=\"language-text\">Sub-task</code>.</p>\n<h3 id=\"workflows\" style=\"position:relative;\">Workflows<a href=\"#workflows\" aria-label=\"workflows permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Workflows mean the work flow of issues within Jira projects. <code class=\"language-text\">To Do</code>, <code class=\"language-text\">In Progress</code>, <code class=\"language-text\">Done</code> correspond to this.</p>\n<hr>\n<h4 id=\"workflows-1\" style=\"position:relative;\">Workflows<a href=\"#workflows-1\" aria-label=\"workflows 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a348840b3719021e8e3475e9d94505a9/a30c9/jira4.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVR42oVRi26DMAzM/38lhU3TBC0k5O2Em82rq6qxkywj7JztOzVbD+cjBMuCFyz8o9a65itI/ehR3nsMwx3TpJEz7cWt0fqM70fAYDJsLChlqx1R9z7jCdoRMi1Qxhi0bYvb7Yau65h4Oie7UPB5z+iGtOavMSOX5ddmW9auoteEmHdCIWuaZo1xHJ+EkfDBZG2fVlKJRO+EkytPQiKCcxZaawh5Sul8QKUyaYXhTWcOGypr+q6nDPGponBNiSmTsf+IfW3KJur2qebZ4vEYIeZYayEDDseICkJMPLm+OHny7NkGvpJNk7KSU0W7tmvR9z3MPPOp5Tl4uV5MMO4aimEqxrgaIe7mnFmjcm6SqL6Y8BcC6xdyXU/+ARdFwZJW9IkSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflows\" title=\"\" src=\"/static/a348840b3719021e8e3475e9d94505a9/6af66/jira4.png\" srcset=\"/static/a348840b3719021e8e3475e9d94505a9/69538/jira4.png 160w,\n/static/a348840b3719021e8e3475e9d94505a9/72799/jira4.png 320w,\n/static/a348840b3719021e8e3475e9d94505a9/6af66/jira4.png 640w,\n/static/a348840b3719021e8e3475e9d94505a9/d9199/jira4.png 960w,\n/static/a348840b3719021e8e3475e9d94505a9/21b4d/jira4.png 1280w,\n/static/a348840b3719021e8e3475e9d94505a9/a30c9/jira4.png 2614w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>To see workflows in detail, click the <code class=\"language-text\">View</code> button in the <code class=\"language-text\">Actions</code> column. Workflows can be viewed in two ways: diagram and text. The text method is inconvenient for reading work flow, so I recommend viewing in diagram mode.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/90703cf619057cf05e820e1a1c7778bd/53639/jira5.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVR42q2Ty0vDQBDG+1creJWeFD16t3iqWh8gVkR6UUtB1FJQK7SWtCVJS9K8H7ubz80moQ8aKpiBgQ07+fh+M7MlpEEpg++H+G+UskNICGzbLU6wqBCCjEVwvQCm5XB0CkIobCd2GyGK8pMxtl6Q8P5Jowk+vgdw3AAWF+v2pI1uYtFCkXMFn79sVBpT1Joaqk8aHJ9B0w2O7SEjoLwthEaiPRsFz5s6dk6G2L+UUa6OYTgMijqFbli5P/4JebEgO/YVH9uVIcqnY2wdS7h9nSEbZK5gjOMFfLFDhoAkhVRMMII6C0Ub6m+GIHn/SXY1vg8ZTevmZkqr7tatxyrFYu1ah5pNcVRXeKpodMwlJJYOY56Jo/t+B4etG1x1X2IQDIYKv6OpoEVwcC1j70LGQ9tc6mHeIO56bew+1nD22RLfI3kiHkXhT+8Xv5VDAKkxw+IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflow diagram\" title=\"\" src=\"/static/90703cf619057cf05e820e1a1c7778bd/6af66/jira5.png\" srcset=\"/static/90703cf619057cf05e820e1a1c7778bd/69538/jira5.png 160w,\n/static/90703cf619057cf05e820e1a1c7778bd/72799/jira5.png 320w,\n/static/90703cf619057cf05e820e1a1c7778bd/6af66/jira5.png 640w,\n/static/90703cf619057cf05e820e1a1c7778bd/d9199/jira5.png 960w,\n/static/90703cf619057cf05e820e1a1c7778bd/21b4d/jira5.png 1280w,\n/static/90703cf619057cf05e820e1a1c7778bd/53639/jira5.png 1358w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Workflows are divided into <code class=\"language-text\">Status</code> and <code class=\"language-text\">Transition</code>. Rectangles like <code class=\"language-text\">To Do</code>, <code class=\"language-text\">Done</code> mean <code class=\"language-text\">Status</code>, and arrows connecting those rectangles are <code class=\"language-text\">Transitions</code>. To modify a workflow, click the <code class=\"language-text\">Edit</code> button at top right. Then a workflow modification screen using diagram UI is exposed.</p>\n<p>Since it provides UX similar to PowerPoint or Google Draw.io, you can modify it without difficulty even if it’s your first time.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 109.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVR42q1Vy27TQBT1B3UBCxCIPwEJCSQ2qBJSpUplhWCNBAIJ2FDBogsEiKy6YMM7pS2itElK0tS1nXdTx4/EcWzH9uGOY6c2RVZKMtLVjGfkc++cc67NIWX4vh/EaQaHGY9UQFXtQqGYCaDruhCkBnihFqxnUmFH0aHpxv9XyPhn4YU6aF0Dtu1Mf+VIWE3vjQEnFTsB2O8P0O310TNMGLQ+PFLhOMPgzPO8iYI7FsFDhxQdUEWWZVNldjBHiWRFg6J1EyETx+yd+B4XGVfTdfAHAl3NA2Gjb/uwhz4cErgp92DZkyk9Bmy329jY3AyyVpoa8uUmdopV/CxI2OVbkOoKLEJnCSN+v67voNGSQ0r8gOcTHGa3eAI4xHZ+D+8/biCz+hm/ciXkKEGzY8L3RpWW9iUs3HmMT9mtMWBClHjfypqJSttEQzYoRuuObp64HhPs717/hw8JGMe2GYTC+FP5MJz1bn86YzMemMLMh/yBCLFSQ7FUhiBWYA6s4CziKv4O819qhY5jgy8XIYkC+P09VCWBPDmYvMIo68oXBReXfuPyAwHXn9Zx9ZGIa0+quPGsjisPBVxYKuLlh6OwMoRqV/BjuwQ77KgA0A0B763UwF36hrmbOczN53B2oYBziwWcX9zFmVv54Oz2czFg2RmO7PPi1Sru3l+GSgKOASPl+ZaFzLqKzHcVbyleZxW8YbFGz2sK3tFeuWklPhbMFXFeU7+HPt0r8pkfI/4UKpMgrH/DYP1rO15i7XrpP7I/3JyeuErfne4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira workflow diagram editing\" title=\"\" src=\"/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png\" srcset=\"/static/6f4d8fb99d8595800cd1210f425d514f/69538/jira6.png 160w,\n/static/6f4d8fb99d8595800cd1210f425d514f/72799/jira6.png 320w,\n/static/6f4d8fb99d8595800cd1210f425d514f/a58fe/jira6.png 548w\" sizes=\"(max-width: 548px) 100vw, 548px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking a Status exposes a window where you can modify the Status’s information. Inside this window, checking <code class=\"language-text\">Allow all statuses to transition to this one</code> allows freely changing to the current Status regardless of what Status the issue has.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6d54d49db136163f93da3d06d5db0ac4/889a4/jira7.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVR42qVUaXOCMBT0//+yfnF6aXVA5RCCHIIgypVkm0SxFRkr9s0sDMzLZt85gjDOOShlAlSBMTYYkkNiJB9N01x+SJMOLfkQKEJ5WBrxI0xmS7xNdITbHYaaFCW5zoQcUZzhQxC+TxdwSHBSelZ9D72EUm7XfjsPUkiVQoqxBcydEvrCgO36cLwAK4tgZbrQDQem7cH1QvWtLdeY6xaSXXa5/DpkThHmgBsdoC8tfM5WMGyiDkbbFNskRZrlyPIDdukesSCKRJ6LsuonbEM+FiX8MFbqyCZSitg5dN7B3aK0hEPy1nW9ImSMqsY21xsRqoe1G6hL9kcKwy+xSWoEaQMvEYhr7At6X6FEXTeqCEvjVAQm8poXDFP7CI2UMINKvedOocjRCf3PtvlnY0MUIsTLeIpXMSlfmqkKJE2mgjF+g25ztztg1A52ts9Vy9iOB2tNRArqy1w/Mi1XhOAMQUaheY3CzK1Akqa3mg+FzAR7WXP4SSWqWCHY1UgP9DnCny6X64dd4an11Tb0TeIf2DR9+AYG8IFFk2xsfQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Allow all statuses to transition to this one\" title=\"\" src=\"/static/6d54d49db136163f93da3d06d5db0ac4/6af66/jira7.png\" srcset=\"/static/6d54d49db136163f93da3d06d5db0ac4/69538/jira7.png 160w,\n/static/6d54d49db136163f93da3d06d5db0ac4/72799/jira7.png 320w,\n/static/6d54d49db136163f93da3d06d5db0ac4/6af66/jira7.png 640w,\n/static/6d54d49db136163f93da3d06d5db0ac4/889a4/jira7.png 658w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking a <code class=\"language-text\">Transition</code> exposes a Transition settings window. In this window you can set the Transition’s <code class=\"language-text\">name</code>, <code class=\"language-text\">properties</code>, <code class=\"language-text\">triggers</code>, <code class=\"language-text\">conditions</code>, <code class=\"language-text\">validators</code>, etc. Triggers and conditions especially are very useful.</p>\n<hr>\n<ul>\n<li>Triggers - Automatically execute that Transition when some event occurs. (e.g. Automatically change issue to Code Review status when Pull Request is created)</li>\n<li>Conditions - Set conditions for this Transition to execute. (e.g. To change issue to Done, all Reporters assigned to the issue must agree)</li>\n</ul>\n<hr>\n<p>After finishing all modifications, click <code class=\"language-text\">Publish Draft</code> at the top to deploy the settings. At this time a window asking whether to back up the previous workflow is exposed, so whether to back up or not is just your own judgment.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/56c289065a19ebda8681f8bb1601d1ce/6aca1/save.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABoyx68geFf//EABsQAAICAwEAAAAAAAAAAAAAAAECAAMREyEi/9oACAEBAAEFAtPkUqYUqERjnojoGb//xAAWEQEBAQAAAAAAAAAAAAAAAAAAIkH/2gAIAQMBAT8BxL//xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/AZtr/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERITH/2gAIAQEABj8C2nCM0tGz/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPyFDbCXtOjMiPB+scDVzqrHk9qT/2gAMAwEAAgADAAAAEAvv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAwEBPxAhBgnq7//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEUH/2gAIAQIBAT8QSdbeb//EABwQAQEAAgIDAAAAAAAAAAAAAAERAEExUSGBsf/aAAgBAQABPxAS+4fmsZYxqkru45QDS3BiOC955bn0ie94pSXZOM//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"save\" title=\"\" src=\"/static/56c289065a19ebda8681f8bb1601d1ce/c08c5/save.jpg\" srcset=\"/static/56c289065a19ebda8681f8bb1601d1ce/0913d/save.jpg 160w,\n/static/56c289065a19ebda8681f8bb1601d1ce/cb69c/save.jpg 320w,\n/static/56c289065a19ebda8681f8bb1601d1ce/c08c5/save.jpg 640w,\n/static/56c289065a19ebda8681f8bb1601d1ce/6aca1/save.jpg 650w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Save edited issues in my heart!</small>\n</center>\n<p>And once you click the <code class=\"language-text\">Edit</code> button and enter the workflow modification screen, Jira automatically saves the current state even if you haven’t modified anything. So even if you haven’t modified anything, make sure to click the <code class=\"language-text\">Discard Draft</code> button at the top to end the modification state.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/21b4d/jira8.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAw0lEQVR42oWOUW+DMAyE+f9/bZqmSmthHVsYgoJonBAIoXFiZ+m0p/Vhp5Plh/N3LlJiihtRDCEgYvjR70J8Q/aRYyRE8phDFIl9uDulVDCFHV53Z5XSUl4BQMo8QCswW+jAT0u0ehta6Ftlpnl1cdSYzZyKDMgwojvpP/3NFHpen17Kw7H+aLq2H8tzc6yEBF2eTp+NGOw02muv9sl4fjw2i30+VG91W56/qvemFp3Kr7ldCHEZLotfl9s6OzQuPDZ/A85yHlYJPn49AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira discard draft\" title=\"\" src=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/6af66/jira8.png\" srcset=\"/static/d2ce750162bea9034a18b5e5d5e6dcbc/69538/jira8.png 160w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/72799/jira8.png 320w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/6af66/jira8.png 640w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/d9199/jira8.png 960w,\n/static/d2ce750162bea9034a18b5e5d5e6dcbc/21b4d/jira8.png 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h4 id=\"workflow-schemes\" style=\"position:relative;\">Workflow schemes<a href=\"#workflow-schemes\" aria-label=\"workflow schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Jira allows using different workflows for each issue type in a project. Workflow schemes are groups that assign workflows per issue type.</p>\n<hr>\n<ul>\n<li>Bug: <code class=\"language-text\">To Do → In Progress → Resolved</code></li>\n<li>Story: <code class=\"language-text\">To Do → In Progress → Test → Review → Deployed</code></li>\n<li>Research: <code class=\"language-text\">To Do → In Progress → Done</code></li>\n</ul>\n<hr>\n<p>You can apply different workflows per issue type like this.</p>\n<h3 id=\"screens\" style=\"position:relative;\">Screens<a href=\"#screens\" aria-label=\"screens permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Screens mean the screen showing detailed information of an issue when you click an issue on the scrum board. This menu is more intuitive compared to other menus, so I’ll mainly show example screenshots rather than explanations.</p>\n<hr>\n<h4 id=\"screens-1\" style=\"position:relative;\">Screens<a href=\"#screens-1\" aria-label=\"screens 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>The screens menu lets you set tabs and fields that will go into that screen.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e3096f52b849f0dde2d8cbff31eced48/136a2/jira9.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 151.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAABYlAAAWJQFJUiTwAAACb0lEQVR42q1UaW/TQBTs//9JfAIhPlAhFUFJ2ly+cvi+1rcTDzsvTUSoKG1cS5O3steTefPGezMMAxarNaZzEw9zC0VZg9f+MOBwOIDP33Ld8GdpbfBzusSvRwNldSR8I88lYRhlsB0Ps4UDy3YxX1owTAcPMxNZXpwVU+3hhMMJhwsIoelt8en+Fh/uvuDz/Q98nWzw8buFbxMTbdv+pWF46mD4t0JVF7CjLdzch58l2AQFLF8hUbVYUJQVclXKWuk1fSaoPoozxEmOKMlkLYSlfuj5McIwQxCmcL1Q11iqF8TwwwRbN5QXXD+SvaymvcNs5cB0XKysLQwNIXS22r+ljSvn8Lzltuv1YFJR4GtFcZoLIt1KGCWCPFdSA62W7SeZkla5j+8muuZFeSSs6kYkUyXjY9hbTHSEZgsLC8vF/SrC1IzxaCeYGKHsZcS4Z65bZr29m0i9OU2s0dOs6lbI66aVARBN26HqBhTNEarZ6/sNVFEJquq4nwOi8jMhkec5XNfVwwkFjMwu6WAFLSLV/xGa/3jIQPJqmkZIlVL6nyvs93ukRYdYtVBVp/ft5d5LEMKuaxEEgcD3fSEbNWUyk6QsS1FIpZffBV4dqSeFnXi2Xq/Fw5MFIxT26PtOo79QdzUhyXzfw263w2azQZZlLx4Ar/aQKIoCdV2PU0gPoygSHzlprke23IuyOI6RpqlguPLIPhMyzCQ8KR1FyJZJSLLnJ/SVCjkQKnyX2FAhh2HbtrQ7mpCxYatUSfJ3Ueh5HhzHgWEYo1SePaR3xLsM5eihL4fDmFBfeMhg8xtmvTaDFy3z6+DBMCbUJPwNjYcqGt12xA4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jira9\" title=\"\" src=\"/static/e3096f52b849f0dde2d8cbff31eced48/6af66/jira9.png\" srcset=\"/static/e3096f52b849f0dde2d8cbff31eced48/69538/jira9.png 160w,\n/static/e3096f52b849f0dde2d8cbff31eced48/72799/jira9.png 320w,\n/static/e3096f52b849f0dde2d8cbff31eced48/6af66/jira9.png 640w,\n/static/e3096f52b849f0dde2d8cbff31eced48/136a2/jira9.png 884w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <br>\n</center>\n<h4 id=\"screen-schemes\" style=\"position:relative;\">Screen Schemes<a href=\"#screen-schemes\" aria-label=\"screen schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>You can assign different screens <code class=\"language-text\">when creating</code>, <code class=\"language-text\">when modifying</code>, <code class=\"language-text\">when viewing</code> issues. Basically set to <code class=\"language-text\">Default</code>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/a13c9/jira10.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVR42pWSTW8SURSG+Xf+Ejca48LEaFjYkLgyMaFJ0QLFtqkRh7YpOLT4wUc/YKGxLly50YTaGQpTGGYGKMydebxMIcHP4knenHvOnPvck7wTerS8w8bOIbnXVXbf1VDf1sjPatqb+aa+qcr5o5+ULRyymMgQ2q8dI4SgY1q0TRvL7gWynR5dy5E9C8vp0+5YODKbXZv+4IJp+L4f5DFjNb1LqFw9xukPOdGanDYMtLNz9LM2p7ohey0pg0azjaa3aBod6t8bEm7/GfgifwmUJT1HvtyzGV4MghpfXOZAHn+L3zZUi+95XNAIv/xKZPsb4c06dzd17m3p3Je6o2g8LWq4Ygz18Tz/38BMrshC9DmRJYWHMYXbkSfceBDj5kKMW/J8PRxlcTU7/4Z7xSp5Ncf62gbptEIymSIRT/AslWIluUIyEedgvzI/sFL7xHDkoklDmoZJ69yc5G5ggiHdNbtO4LwQ3tXA0tHHoOG6IrgwlufJLOUKEQyOXJeRfNTz/RnQRPz620yAvu9zVUz9ODGGXIt8Ifehgz0Q6B03WOK/gdMRsydYKrT4XO8H9UjMbLi8nmXrVZlMrjSXlGyJbbVMpXKAulcJeuP7SrZINK7wA5sQXxcBXMg+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Screen schemes\" title=\"\" src=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/6af66/jira10.png\" srcset=\"/static/5865127bb3feb4dd7fbbb0690bb1dace/69538/jira10.png 160w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/72799/jira10.png 320w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/6af66/jira10.png 640w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/d9199/jira10.png 960w,\n/static/5865127bb3feb4dd7fbbb0690bb1dace/a13c9/jira10.png 1178w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Since practitioners often create issues when planning, it’s good to have them input only minimal fields to create quickly, then use this when POs later review issue contents and write in detail.</p>\n<h4 id=\"issue-type-screen-schemes\" style=\"position:relative;\">Issue Type Screen Schemes<a href=\"#issue-type-screen-schemes\" aria-label=\"issue type screen schemes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>You can assign different screen schemes per issue type. Basically divided into <code class=\"language-text\">Default issues</code> and <code class=\"language-text\">Bug issues</code>. For <code class=\"language-text\">Bugs</code>, due to issue characteristics there are many cases where you can’t estimate, and since it’s fixing rather than developing something, the information needed for issues differs a lot from general issues, so they seem separated.</p>\n<blockquote>\n<p>Note that you’re assigning <strong>screen schemes</strong> not screens.</p>\n</blockquote>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5e79ac71d05deb907fceea9d6576399c/f02b9/jira11.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVR42oWRCZKEIAxFuf8xZ2wX0FYWcWH5nYCz9lQPVa9+EpIYorB+h3Mexnq41cMWeyV7K361SdeAxWcsa4JxG7RxJde6tdaQcq5w1LDtJaEwqAm3TqJjW07ohwlvzVBirVzw3s9olUbTKTQt14zohpF8WXxG7PuBfjTo5xPdnex5v/RAiBExpksrKaUSq3zdh1DvxXkGCnAw4yTCN/46OXOjUMj5OUdINf6qQElkUvoJx/wWcJOOnm6hlh2ad+tC0UhDCCUl/RQHrTWMMfDe49XhybVPWPcMQ2p8hN2q8sBivt/Llz/2w7w6R8iQOmA0AcpUHcnfjlon/mvwvEMg0vM/iewD6VrnAwD/b/kXTk0aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Issue Type Screen Schemes\" title=\"\" src=\"/static/5e79ac71d05deb907fceea9d6576399c/6af66/jira11.png\" srcset=\"/static/5e79ac71d05deb907fceea9d6576399c/69538/jira11.png 160w,\n/static/5e79ac71d05deb907fceea9d6576399c/72799/jira11.png 320w,\n/static/5e79ac71d05deb907fceea9d6576399c/6af66/jira11.png 640w,\n/static/5e79ac71d05deb907fceea9d6576399c/d9199/jira11.png 960w,\n/static/5e79ac71d05deb907fceea9d6576399c/21b4d/jira11.png 1280w,\n/static/5e79ac71d05deb907fceea9d6576399c/f02b9/jira11.png 1554w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"fields\" style=\"position:relative;\">Fields<a href=\"#fields\" aria-label=\"fields permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>This is where you can modify items that go into screens. Add items in the <code class=\"language-text\">Custom Fields</code> menu and bring them to use in <code class=\"language-text\">Screens</code> explained above.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/90f13ac4e9f2b21060002914ea47404a/b4098/custom-fields.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1ElEQVR42p1T7Y6kIBD0/Z9v/15mb9aMn4gIKgLaV4XrZjbZXDLrpIQBrO6qbgpjrHyUtaS0y2+fLQRZvZd58VI4N8ujaqXtlDzqXtL+GvGB32SdaCRmJivFtgVMnDi3yIjFfX890xBizjLEKAUJIuTGmPLoEYBgoJTSy+SZMIDsQkyfQLRfEW7bJgvMPI4jyyVIdCFn/oll9dl8FnCeVxnhmUUNJlh2ricpzGjkfr9L0zTStihO08owaNF6zBjHE8YYqes6n60w8uztdpOyLOXR9PL3oXBmlMKDues66ftelOrzqLX+InrGMAxfewxQVRXwkKod5O0PO0WDEDK6tsOfDpLWLJn+XUjXCDkz5Glkb60VthvJLVqG+4uPkI0q07vLL87/3x5oYATlOWKaJrTc9L0oy7LgppRSAxre8INneL8KC0fQHmZGMpLTHko/GxzAq+AGC2Pgy4RNi4iUxDmjW1Tykk07ruz4zIvNZy/CnKFHFqyYQpUNfGRDM8hPN4akszs9CzHgGysBvn2TTBlKKdFdKw6Zkow49iNrePaV6zMs4hJJjXZnAuhRu/BCHJAMb0b02wQyB3kMEEP8sSj0Ww0q310G4nzQCmRR3ptVZp/kH9c1kkK0VMOaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Jira Custom fields\" title=\"\" src=\"/static/90f13ac4e9f2b21060002914ea47404a/6af66/custom-fields.png\" srcset=\"/static/90f13ac4e9f2b21060002914ea47404a/69538/custom-fields.png 160w,\n/static/90f13ac4e9f2b21060002914ea47404a/72799/custom-fields.png 320w,\n/static/90f13ac4e9f2b21060002914ea47404a/6af66/custom-fields.png 640w,\n/static/90f13ac4e9f2b21060002914ea47404a/b4098/custom-fields.png 816w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking <code class=\"language-text\">Add custom field</code> at the top lets you select various forms. Form types include <code class=\"language-text\">Standard</code> and <code class=\"language-text\">Advanced</code>, but I’ve only used <code class=\"language-text\">Standard</code>. Actually using just <code class=\"language-text\">Standard</code> forms lets you express most information.</p>\n<h3 id=\"issue-features\" style=\"position:relative;\">Issue Features<a href=\"#issue-features\" aria-label=\"issue features permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<hr>\n<h4 id=\"time-tracking\" style=\"position:relative;\">Time Tracking<a href=\"#time-tracking\" aria-label=\"time tracking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Time tracking is a feature that tracks how long it took to perform that issue through work logs left when progressing issues. But since leaving work logs every time is a more cumbersome task than you’d think, it didn’t settle well within the team. <small>(Everyone favors comments…)</small></p>\n<h4 id=\"issue-linking\" style=\"position:relative;\">Issue Linking<a href=\"#issue-linking\" aria-label=\"issue linking permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>In issue linking you can modify content that will go into fields defining issue relationships. One relationship can set two detailed relationships: active and passive. Jira basically provides 6 statuses.</p>\n<hr>\n<ul>\n<li>Blocks - <code class=\"language-text\">blocks</code> / <code class=\"language-text\">is blocked by</code></li>\n<li>Cloners - <code class=\"language-text\">clones</code> / <code class=\"language-text\">is cloned by</code></li>\n<li>Duplicate - <code class=\"language-text\">duplicates</code> / <code class=\"language-text\">is duplicated by</code></li>\n<li>Issue split - <code class=\"language-text\">split to</code> / <code class=\"language-text\">split from</code></li>\n<li>Problem/Incident - <code class=\"language-text\">causes</code> / <code class=\"language-text\">is caused by</code></li>\n<li>Relates - <code class=\"language-text\">relates to</code></li>\n</ul>\n<hr>\n<p>If there are issue A and issue B, there may be situations where A issue must finish first before you can work on B issue. For example, situations like A is a DB schema change task and B is developing a REST API. Since you don’t know how the model will change, you can’t rashly develop the API, right?</p>\n<p>In this case you can express as <code class=\"language-text\">A blocks B</code> or <code class=\"language-text\">B is blocked by A</code>. If you put a <code class=\"language-text\">blocks</code> link from A issue to B issue, <code class=\"language-text\">is blocked by</code> automatically gets added to B issue.</p>\n<p><strong>A blocks B</strong>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBElEQVR42q2S2XLCMAxF/f//1udSCgMkOHtiZ3USLxc5NEy3hwLVzBmNJc+1JItt3k/YHc4L+xPHdh8SAd6IthvgzTn82dghiBElBUKeIiBKUaPrFeqmwzxr3GuMxwUq0SDLBc5RjkFNDwndBB31c+Vrwj0qGKUFPIoq+w9jQjaQNC9Zt+gH9byg++jVe2vd84KcfjhOy+VjVuEb38/r459m7EOeiT5y1hqsrORSmbX2rkpWoR8VHsWE1s+QqGgH81IiK2iFeAZBc/XnhDrwu5pkFcqK7lBeyBZqnLGNFF52DV7DfnmAjdrAEJrK1eT9Dq7oJX7N/RYzxmKcDIbRQJH3I7kAzRdfm9EslwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"blocks\" title=\"\" src=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png\" srcset=\"/static/6adb2523b53c3730e2b2e6d9adbc2fe4/69538/blocks.png 160w,\n/static/6adb2523b53c3730e2b2e6d9adbc2fe4/72799/blocks.png 320w,\n/static/6adb2523b53c3730e2b2e6d9adbc2fe4/a58fe/blocks.png 548w\" sizes=\"(max-width: 548px) 100vw, 548px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p><strong>B is blocked by A</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTklEQVR42q1T127DMAzU//9bH/rUFEHbOMtT1rBleci+knKaPnQgSCvgQE2Sx6PE/pgjOWbYvh6w2SY4Z1W0T4S8rPGyO0Wc0hJv+zSe8Xqz3eGUlXHOPvjc9wPEw+MzskKikIqclWhah1pZFJXCME7xkrEtNKHWNs6NdRRMQdG6dR2c8xiGEfM8Q1S1xhQClmVBuNh5XnDvEAmly9FWemeUUsM23Q/X10AU84ovDmfaXS7glDm7zz1cz27OkCmneRXr8x9DFEQ1OaTYEdKcxCH6bEsSicVh9Vg07/vbHDLFQFRDmDGSqqws23EKUaxhWNe3CiVKosxZfbTJvYMDek99qLRBRjXUpv1z/Vg8cbQTpHHUKg6GIJWBMg2qmqxufnUwUVmMsZBSUq0rSHojTB/QUZePBNd56nwfbU8i+L6/tNL34I/AYjm3JsQ/5h2Npqfp+SHSdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"is blocked by\" title=\"\" src=\"/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png\" srcset=\"/static/ac3602b8a48fe865370cb89700eed5b8/69538/is-blocked-by.png 160w,\n/static/ac3602b8a48fe865370cb89700eed5b8/72799/is-blocked-by.png 320w,\n/static/ac3602b8a48fe865370cb89700eed5b8/b5245/is-blocked-by.png 535w\" sizes=\"(max-width: 535px) 100vw, 535px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>The issue linking feature can explicitly tell that issue’s assignee where this issue derived from or what tasks must precede it, so using it well can save considerable communication costs.</p>\n<p>That’s all for this post on customizing JIRA project issues.</p>","fields":{"slug":"20190616-jira-customizing-issue-en","path":"/2019/06/16/jira-customizing-issue/en/","lang":"en"},"frontmatter":{"title":"Customizing Jira Project Issues","subTitle":"Optimizing Jira Issue Management for Agile Teams","date":"Jun 16, 2019","categories":["Soft Skills","Tutorial"],"tags":["Jira","Agile","Collaboration","Atlassian","Story Point","Estimation","Jira Issues"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/1646c2abb370108d4e92353ae1304230/d803c/jira-logo.png","srcSet":"/static/1646c2abb370108d4e92353ae1304230/d803c/jira-logo.png 320w,\n/static/1646c2abb370108d4e92353ae1304230/2a1fd/jira-logo.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/1646c2abb370108d4e92353ae1304230/fc5c5/jira-logo.webp 320w,\n/static/1646c2abb370108d4e92353ae1304230/e9225/jira-logo.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/1646c2abb370108d4e92353ae1304230/01fb2/jira-logo.png","srcSet":"/static/1646c2abb370108d4e92353ae1304230/01fb2/jira-logo.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/1646c2abb370108d4e92353ae1304230/b384d/jira-logo.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"1ef48e61-d388-54a1-8259-a4686dd755c2","tableOfContents":"<ul>\n<li>\n<p><a href=\"#what-is-http2\">What is HTTP/2?</a></p>\n</li>\n<li>\n<p><a href=\"#using-http2-in-aws-cloud-front\">Using HTTP/2 in AWS Cloud Front</a></p>\n<ul>\n<li><a href=\"#modifying-cloudfront-distributions\">Modifying CloudFront Distributions</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#using-http2-in-elastic-beanstalk\">Using HTTP/2 in Elastic Beanstalk</a></p>\n<ul>\n<li><a href=\"#what-is-application-load-balancer\">What is Application Load Balancer?</a></li>\n<li><a href=\"#configuration\">Configuration</a></li>\n<li><a href=\"#didnt-do-separate-server-settings\">Didn’t do separate server settings?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#http2-did-it-apply-well\">HTTP/2, Did It Apply Well?</a></p>\n</li>\n<li>\n<p><a href=\"#lets-compare-with-waterfall\">Let’s Compare with Waterfall</a></p>\n</li>\n</ul>","excerpt":"In this post I want to explain how to apply HTTP/2 protocol in AWS (Amazon Web Service) environments. Since AWS’s CloudFront and Application Load Balancer provide features that can natively use HTTP/2 protocol, you can simply apply HTTP/2 protocol without separate work.","html":"<p>In this post I want to explain how to apply HTTP/2 protocol in AWS (Amazon Web Service) environments. Since AWS’s CloudFront and Application Load Balancer provide features that can natively use HTTP/2 protocol, you can simply apply HTTP/2 protocol without separate work.</p>\n<!-- more -->\n<h2 id=\"what-is-http2\" style=\"position:relative;\">What is HTTP/2?<a href=\"#what-is-http2\" aria-label=\"what is http2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>HTTP/1 is a protocol that’s almost 30 years old, and since it was designed as a protocol for documents rather than web applications, in environments like modern web applications with heavy payloads and frequent communication, there are many inefficient aspects.</p>\n<p>So HTTP/2 was devised with the following goals to support modern communication:</p>\n<hr>\n<ul>\n<li>Reduce latency through multiplexing full requests and responses</li>\n<li>Minimize protocol overhead through efficient compression of bloated HTTP header fields</li>\n<li>Support request prioritization</li>\n<li>Support server push</li>\n</ul>\n<hr>\n<p>HTTP/2 was designed to share all core concepts (methods, status codes, URIs and header fields) without modifying applications using existing HTTP/1 protocol. Instead, HTTP/2 improved communication efficiency by modifying data frames and transmission methods between clients and servers.</p>\n<p>Also, what has the biggest effect in client-server communication is that response multiplexing is officially supported. This means you can send and receive multiple resources with just one connection.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cd17700751cbce62e857b08574923f45/9c177/multiplexing.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADeUlEQVR42p2U/U9TVxjH+08tWChCaaGlvbcUmagzCiuzbqAD0Y3o3BCVQSl9oS1liCUWYWTJiJuEqJsvGUucUfe+yUtfLy1QzP6Hz869JUxQt+kPT07Oued87vPyfR6d5E9hG0xxcCTLiak87ZM5jsQUmi8p1A+lqRlIiv0KrssKFm8S9X5rPMfJz/O0ifW9Kys0RjLUCobkS6KT/Eks4tGp6VUCNzfovV6g+1qBs1+usT+aodojgOMrtKhAca8umMY7t0HPtXUG5gr0zxZwjSnajzeBGeyDCey+lLAksjCnbwlZeKKa6tU7OzxUI6rdtOK71NZ7na3/d6ShvIAuYxrMYTr3C66uGSy+rPbwRcDtkB1AvamO2t4fcUQK9Ez9xsy9JT6bXeBEfImmkcSrA8vsTegrrZTu6eBgyzGGZrO4x0SuAqq92EPp34BquMYjAQzy25i771PRr2D2pLH50trjbcCBhIAltJzLfhVeLIS6/gMURZHDG1oeLT4FaXCRhuACDv+yBt0GFN/rImvIoTymgRzVXgWrOKv2ZgQ0rdVBV/5mO3axcYqLJ68q3LoR5+G9i/RO3uHAcBarNyGACi2xPDXnH1DXPoH71GW6J+9ycfoB7f5beCfmMQl5ycEVdCVlRgxSE+VHRznWeYaZ71KcnlzkQCRBfTClaU8Vumt8HfvHN7GYjDirSuhyV3H2+F66OtzEwn1UuTzYL/wgZOP5k/I9x9m1u5rKji8wehR2f5re0pgastYpY1ks/hx7vY9o6LnBvgvfEpmeJxodRWo+jfP9MHpDZTGHUmgNyfMHpsBT9nl/ZmTqNlZ/dgv4bFHsAQV7cFVYDnuogKP/J0pth3nDYKaq9ZKQjdSM3btIffQpnVcW+Xp+gUxigdbYMoeiCZHDHbJRq+pLaKtaBBWsNof13PeaYzq9UaK0poGyw324WzuYuJ2hbTzF/rBoweAzIb9U2OqZiHIoV6yyuql46yP0JifGD+eoFDm0+IWEvOnnQ35ppyS3TGfr+xV5+C9NqLWhDeTBJ3QOf0NjaFmcpZ8P+b9ab1eFBWvPfRzhNT6JP+b6ncdcjUX5IP6EQyPJVwcanO8KyZgpkY/S2NSG5ysxXMdWcQR2yOb/AuXQuij3qNBiG+bzj4QOM2JYFuej5H+N8aVVSZRbDhdE6yibTV+cKK8D/BtyUDBzrCWA+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"multiplexing\" title=\"\" src=\"/static/cd17700751cbce62e857b08574923f45/6af66/multiplexing.png\" srcset=\"/static/cd17700751cbce62e857b08574923f45/69538/multiplexing.png 160w,\n/static/cd17700751cbce62e857b08574923f45/72799/multiplexing.png 320w,\n/static/cd17700751cbce62e857b08574923f45/6af66/multiplexing.png 640w,\n/static/cd17700751cbce62e857b08574923f45/9c177/multiplexing.png 880w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>[Source] csstrick.com<small>\n</small></small></center>\n<p>In HTTP/1, protocol-level response multiplexing wasn’t supported and browsers were responsible for parallel processing of responses. Therefore, the number of requests that could be processed in parallel differed depending on browser policy.</p>\n<hr>\n<ul>\n<li>Internet Explorer: 10-11 per origin</li>\n<li>Chrome: 6 per origin</li>\n<li>Firefox: 6 per origin</li>\n<li>Opera: 6 per origin</li>\n</ul>\n<hr>\n<p>So frontend developers bundled all JavaScript and CSS files into one bundle to make files like <code class=\"language-text\">index.js</code> or <code class=\"language-text\">style.css</code> to reduce resource requests as much as possible during application initialization, used techniques like Minify or Uglify to reduce capacity as much as possible, and used sprite methods of downloading one large image and masking it to avoid requesting multiple images.</p>\n<p>But HTTP/2 can process up to 128 parallel requests per origin, so now we can create possibilities for performance improvements we couldn’t do in HTTP/1.1, like dividing into multiple small files instead of one large file and requesting and receiving them simultaneously.</p>\n<h2 id=\"using-http2-in-aws-cloud-front\" style=\"position:relative;\">Using HTTP/2 in AWS Cloud Front<a href=\"#using-http2-in-aws-cloud-front\" aria-label=\"using http2 in aws cloud front permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>AWS started supporting HTTP/2 in Cloud Front from September 2016. You can change from HTTP/1.1 to HTTP/2 with just simple settings. It also has the feature of changing protocol to HTTP/1.1 and responding if receiving requests from lower version browsers that don’t support HTTP/2.</p>\n<p>The <a href=\"https://aws.amazon.com/blogs/aws/new-http2-support-for-cloudfront/\" target=\"_blank\" rel=\"nofollow\">AWS CloudFront HTTP/2 setup manual</a> explains in detail how to set up HTTP/2, so there was no difficulty at all in the process of changing protocols.</p>\n<h3 id=\"modifying-cloudfront-distributions\" style=\"position:relative;\">Modifying CloudFront Distributions<a href=\"#modifying-cloudfront-distributions\" aria-label=\"modifying cloudfront distributions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>First, moving to the Cloud Front dashboard shows a list of currently registered distributions. Select the distribution you want to apply HTTP/2 protocol to, then select <code class=\"language-text\">Distribution Settings</code> at the top.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 634px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e1216e67d70cafeea2556e898cbfef79/374ac/cloudfront1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 16.249999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAs0lEQVR42k2OXQqCQBSF3XD02Eu7aAf1Ei2hVVSazBSVaGlC4Pivo/g1CUUHDufjXjgc6xk+kOKIc9jjXS+cTgLbObDb7zjaDrZxEAR8NAzDL//5qw9b/qvE9RPkXXEOFW6gSPKKNDWZJCilSFVK27b0fU/TNHRdN7qu69+tKAq07rAWW5/pymW2Fsw3gslSIB4ZoX8za894noeUkjCKxtI4jseiqip5GtZaE5mfFIIsy3kDCJDel9x/7mwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cloudfront1\" title=\"\" src=\"/static/e1216e67d70cafeea2556e898cbfef79/374ac/cloudfront1.png\" srcset=\"/static/e1216e67d70cafeea2556e898cbfef79/69538/cloudfront1.png 160w,\n/static/e1216e67d70cafeea2556e898cbfef79/72799/cloudfront1.png 320w,\n/static/e1216e67d70cafeea2556e898cbfef79/374ac/cloudfront1.png 634w\" sizes=\"(max-width: 634px) 100vw, 634px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Clicking <code class=\"language-text\">Distribution Settings</code> and entering the distribution settings screen shows a screen with various information about the current distribution. This information also contains information about protocols this distribution supports.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9590e8009282b8ca9e49b979a697dc38/636c2/cloudfront2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABY0lEQVR42oWS63KDIBCFff9Xa2baRsd410RRVMQUvIKXrpq0SSZNvx87wOxhzy4oJWsDRL7qluRZli7wipfnsiiKpmnyPId1SSnGSVVXOMGEFHVdF5T2fa8UhFQVn+cZNkKItm0Z513XNXUN66qqhmGYxgki5Eg5jOM4TRNkQlS2zXxFSpli7PvB8Xg0DcOyrCzL6Ap4gUgIAUdbsjLfwxkHjaaqjPHt0mEYhxV5Beo9irfU8BR+frxrmhbHcUlL0AgphRQ/glvuKkMGdOs6zsEwCMkRijHG4cpm9bbBXzEMgC+wKIpQFBmmyRiDEc4vuYi7roVJgABeS93vVU0LgsAyTdu2YWae5yGE4BWfV14GI2VBizhJ3nY7sI3TNCfwyGc4hEvHlT97HoTAgR+6jqvrnn4IHZcmSQ+yXvxj+6Lve4wi2zR1dY9OYRxG8Eu6tn1w+1y84fme47pdvwCf7MXYvgFuGrA4CzbmowAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cloudfront2\" title=\"\" src=\"/static/9590e8009282b8ca9e49b979a697dc38/6af66/cloudfront2.png\" srcset=\"/static/9590e8009282b8ca9e49b979a697dc38/69538/cloudfront2.png 160w,\n/static/9590e8009282b8ca9e49b979a697dc38/72799/cloudfront2.png 320w,\n/static/9590e8009282b8ca9e49b979a697dc38/6af66/cloudfront2.png 640w,\n/static/9590e8009282b8ca9e49b979a697dc38/636c2/cloudfront2.png 911w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Now let’s click the <code class=\"language-text\">Edit</code> button at the top to change the distribution’s settings. Scrolling down, there’s an item called <code class=\"language-text\">Supported HTTP Versions</code>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 598px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/5246325f1e672822f3bab327f1bf4566/0c69d/cloudfront3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 12.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgElEQVR42m1O0QrCMAzc//+iY0qXKjZZHybrbGl7pkVhqAchueMuyYA3Ss4opeCIWmuvz9y7er59RwzjeALRjJkI1lqcpwnO3RFCwMUYGNWZGXS9QdhBRMDC2ML2c7wvjDEipdSvZv2y8dabxhqWZcFjXeG9h1e+788WV3/9++EL7pvpWv+Z2GQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Supported HTTP Versions\" title=\"\" src=\"/static/5246325f1e672822f3bab327f1bf4566/0c69d/cloudfront3.png\" srcset=\"/static/5246325f1e672822f3bab327f1bf4566/69538/cloudfront3.png 160w,\n/static/5246325f1e672822f3bab327f1bf4566/72799/cloudfront3.png 320w,\n/static/5246325f1e672822f3bab327f1bf4566/0c69d/cloudfront3.png 598w\" sizes=\"(max-width: 598px) 100vw, 598px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Now just select the first item <code class=\"language-text\">HTTP/2, HTTP/1.1, HTTP/1.0</code>.</p>\n<h2 id=\"using-http2-in-elastic-beanstalk\" style=\"position:relative;\">Using HTTP/2 in Elastic Beanstalk<a href=\"#using-http2-in-elastic-beanstalk\" aria-label=\"using http2 in elastic beanstalk permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Elastic Beanstalk is a service that can easily deploy or control familiar web applications or services like Web servers or Workers. When creating environments in Elastic Beanstalk, if you set the language or server engine to use, you can copy that configuration to other environments, and troublesome tasks like Auto Scaling or Load Balancing that need annoying settings are done automatically by just touching a few simple settings, so it’s honey.</p>\n<p>Also, if you create a <code class=\"language-text\">.ebextensions</code> directory in the project root and put shell script files inside, you can execute those scripts every deployment according to file sort order, making it very flexible. <small><del>(Very useful when node-sass causes trouble and needs rebuilding)</del></small></p>\n<p>When creating environments, you can choose one load balancer between Classic Load Balancer and Application Load Balancer - Classic Load Balancer means the existing ELB. If you want to use HTTP/2 in Elastic Beanstalk, choose Application Load Balancer. Of course there’s a method of choosing ELB and setting it up directly, but I didn’t choose the difficult path on purpose.</p>\n<h3 id=\"what-is-application-load-balancer\" style=\"position:relative;\">What is Application Load Balancer?<a href=\"#what-is-application-load-balancer\" aria-label=\"what is application load balancer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>AWS announced <a href=\"https://aws.amazon.com/ko/blogs/korea/new-aws-application-load-balancer/\" target=\"_blank\" rel=\"nofollow\">Application Load Balancer (ALB)</a> operating at L7 (Application) layer in 2016.</p>\n<p>The existing load balancer Elastic Load Balancer (ELB) operates at L4 (Network) layer, so it couldn’t recognize protocols used in Application Layer like HTTP or HTTPS and couldn’t flexibly handle them accordingly, but since ALB operates at Application layer, the advantage is it can directly examine HTTP headers and do flexible load distribution accordingly.</p>\n<p>For example, even sending requests to the same host, flexible routing is possible like sending to server a if sending requests to <code class=\"language-text\">/a</code> path, sending to server b if sending requests to <code class=\"language-text\">/b</code> path.</p>\n<p>But what’s best of all, as I explained above, is that it natively supports <code class=\"language-text\">HTTP/2</code> protocol and <code class=\"language-text\">WebSocket</code>. If you want to use HTTP/2 protocol in environments that were using existing ELB, i.e. Classic Load Balancer, you must set it up directly or migrate to ALB.</p>\n<p>But even migrating load balancers doesn’t automatically connect with instances connected to existing ELB, so if you’re using Elastic Beanstalk, just recreating the environment is good for mental health. <small><del>(Person who was disappointed after trying to go easy at first)</del></small></p>\n<h3 id=\"configuration\" style=\"position:relative;\">Configuration<a href=\"#configuration\" aria-label=\"configuration permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>First, access Elastic Beanstalk environment and create a new environment.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2c4c368507f2816bfd6aea8f30a79582/ad12c/eb1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdUlEQVR42p1UyVLbQBDVP5HAjQSuWciv5pLKJbkEMCaEhNiSLVu2FmvxItuSF8laX7rHyAUGLumqV7Oo5/Xrnh5JR6dnODr9hMOTM7x++xEHx+/x6s0HMa/AewfH74TfPg5Ptj58nteS0mpBlhW02ir6ugFVVXFdr6N2cU7jFeq1Gv78vkWn3YbaJt9GA4oso0mjTKPW60E3THQ1TfBIWrcrSHq6DrunYVL/AeP6ElrtAr2rS/SvahjLDfhKE9bN9Xavdk77hO9fMVBkON4QpmGg0+lAKssSAgCyMEDq2GArww4QtICwLeZFsEU5a6BIV1v/yQjFdIycVkWeCR4pjmNsNhskWY546iNu/kLkakj1BhL9L1JDRmYqyKwWcltFaVMAz0Lpj5CoTcSTCVIiT7ICm7SAZJDUCnpfx9DWcNf5DJtKYGk9GJSGQ7W16dtyOkUexShJBJIIi3mArruAPl7DnEToeqttyjuj6TpZ4M76BtfzYNk2DMuCOxzCdh04rgt/Otu5Z3mOXcnuIWHP1psQt/0vsJlMqO7DcRzoep/WOlarFdI0Eb75PeFDe0xI36LNCpr3E77vYzQawSOlPOcATOySyvF4vFWYZft6HtwygSMyiqLAfD5HGIYCPN9Xwus0TQVpdY7xLCE7WVS76rJY1ZQuZLlcPiJm34cBnqTMyhhMqNMtm6YpiHnU6CXwXpIkO/8gCETAwWAgSsKQnkuD+3I2m4lU+dCEeo0VMqIoEkoZvOa6MhEH5vmTW67Sf2nNNqQ2Eh1Aivm5teh/wBkoCr1ljviSVUT7hJVxJlwOJueRA0nr9Rr/Y1waJuDWqlqMCf8BnQCWST/aBEoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Creating Elastic Beanstalk environment\" title=\"\" src=\"/static/2c4c368507f2816bfd6aea8f30a79582/6af66/eb1.png\" srcset=\"/static/2c4c368507f2816bfd6aea8f30a79582/69538/eb1.png 160w,\n/static/2c4c368507f2816bfd6aea8f30a79582/72799/eb1.png 320w,\n/static/2c4c368507f2816bfd6aea8f30a79582/6af66/eb1.png 640w,\n/static/2c4c368507f2816bfd6aea8f30a79582/ad12c/eb1.png 856w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>After that, selecting <code class=\"language-text\">Web server environment</code> moves to a screen where you can do simple settings like environment name or language to use.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ce0af85cf4b6cc034de1f43536f7c668/6b9fd/eb2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJElEQVR42p1Uaa+bQAx8//9PtVK/tVLvg1cSBXISwrEXEM6pbUJe2qRN1EijZWF37PHYeXLOYrfbwRiNumngnIOzFlobFIWjVdFa4NHf07GqkCQHWOvQti3SNMF+v0cURbSOSNNUAjFxWZYvz0VJ9yy6rnsh/DOCLWpkykGZArl2yGlVtpR3mS6gbUXfaK9H0puEwzCcX6SqRLjaIlhuEIRr+LMFtlFCxG4McEKUGFxcu5Xh+PXZX+DV6zd4++4DPn35hvcfP+Prdw/ezxm8Z1/WH54Pf768XcPLTd8PsK5EsJhLDYe+Fzlt29DaUka9gFNrmu5ehqcaEuEyDBEEgSBJMzHKkhFj0DFIVbePSVbaYjabwfdJnudJpkpppFkmbjNaIjzeJxwp+eDhEEtrGGOg8hyaCLldJnT/IgyCEJv1RjIpy4qkVdKHaZIgo6yyPJMMu64XuZPkvxJOh3opOKQ2q9VyNOXUUj2BSS7xkGR2uTo2WK9XIpcD8fQw/ouwrmsibGm2t+RuenZVsjxJncCBp2BN056H46ptNE1EGAaYz+fIyRDnCqklZ8x1ZDImdzTHcXxAnqXYx7E4f5PQ2EL6j9smoH40xpLrdFGp37IUyfcmhbPmgzG5zEM/GcZyhivJrZjFzTZcUF/V0NCkRPsDDmmO8lijrGoJUtOoXaKqu3P3DueEhhuSqVZZlssfrCKZPBnjXsuezVL0PO0ZXGsGN/0vveJ2udRNtk4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Elastic Beanstalk Platform settings\" title=\"\" src=\"/static/ce0af85cf4b6cc034de1f43536f7c668/6b9fd/eb2.png\" srcset=\"/static/ce0af85cf4b6cc034de1f43536f7c668/69538/eb2.png 160w,\n/static/ce0af85cf4b6cc034de1f43536f7c668/72799/eb2.png 320w,\n/static/ce0af85cf4b6cc034de1f43536f7c668/6b9fd/eb2.png 518w\" sizes=\"(max-width: 518px) 100vw, 518px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Elastic Beanstalk provides various languages, so pick and choose to taste. After doing basic settings like this and clicking <code class=\"language-text\">Configure more options</code> at the bottom, you can move to a screen where you can do more detailed settings.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c58be6012821f6a5d25c879335789b05/302a4/eb3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 30.624999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAyklEQVR42q2QzWrCUBSEfcTiVoqvpBRKUFz4DgUXre6Emmhs1IRKSDGEQDUgUfAnN73386ZZCbUrBz7mrIY5U+HOqtw9UEpJgdIUUrlAHQ+QnUrOBUd9n+GkXWR/Bimlrhtm4ocozdlFMcnSxTPf+bRG+NMxvj3GNUesZxaN7pDqs8ejMadmLKi3XB6aDgNvex0ockmcCvbfG9JgyZcOCiYmoTP9xbctkoXNy+sHT28hncEKo7+irb3RC5hH+xsbFtWV5MZfJf9seAGDucj3Hwwz8wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Configure more option\" title=\"\" src=\"/static/c58be6012821f6a5d25c879335789b05/6af66/eb3.png\" srcset=\"/static/c58be6012821f6a5d25c879335789b05/69538/eb3.png 160w,\n/static/c58be6012821f6a5d25c879335789b05/72799/eb3.png 320w,\n/static/c58be6012821f6a5d25c879335789b05/6af66/eb3.png 640w,\n/static/c58be6012821f6a5d25c879335789b05/d9199/eb3.png 960w,\n/static/c58be6012821f6a5d25c879335789b05/302a4/eb3.png 1080w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>If your hand slips and you click <code class=\"language-text\">Create environment</code>, you’ll waste about 10 minutes while the environment is being created, so click with eyes wide open.</p>\n<p>If you clicked properly, you’ll move to the detail settings screen. Checking <code class=\"language-text\">Configuration presets</code> at the top, probably <code class=\"language-text\">Low cost</code> is selected as the default value. In this option you can’t use load balancers, so we need to select <code class=\"language-text\">Custom configuration</code>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b3ef6724a1eb0a47401fbd6ffdac9c27/27b8e/eb4.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABO0lEQVR42o1Ry3KCQBDk//8rFzl40VJEQAXR+AJU3o+O3amlTA6pbFUzOzs9vUOv1fc9fN/HarXCfD7HbDZDEATwPA+O44xg7rqu6rZtKx4OByyXS0WzrGEYcDweJbrb7TCdTiW82WwQhqFECO4nk4mEKWLOeBn7R0F+rtcrLpeLkKap4vl8xul0QpIk2pPDfZZlAs8YTZ1cTirB+/2O5/OJPM8VSTRnxO1200WPx2MEc8M3XPZJkD6+k4miKEYibem6DlVVoSxL1UwkzDDkSbBpGnmzWCz0OAT9pD/b7VZi2UucnsVxLH/p+X6/V04/oygSz8K/1oCqLBC+mugXm3kRJ1P1NdmPRzGHv9H3g8TcT+DDKRCHPjw/GKfiX63Xa1lhNKy/5/peeQ0keY+ubVDXNdq2Hf1k/j7hF1cmq2XFWr3rAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Configuration presets\" title=\"\" src=\"/static/b3ef6724a1eb0a47401fbd6ffdac9c27/6af66/eb4.png\" srcset=\"/static/b3ef6724a1eb0a47401fbd6ffdac9c27/69538/eb4.png 160w,\n/static/b3ef6724a1eb0a47401fbd6ffdac9c27/72799/eb4.png 320w,\n/static/b3ef6724a1eb0a47401fbd6ffdac9c27/6af66/eb4.png 640w,\n/static/b3ef6724a1eb0a47401fbd6ffdac9c27/27b8e/eb4.png 836w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Selecting the <code class=\"language-text\">Custom configuration</code> option, the <code class=\"language-text\">Modify</code> button on the Load balancer card at the bottom should be activated. Clicking that button, finally a screen appears where you can select a load balancer.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1a3b213065692e5e6e9300b99e424245/d2782/eb5.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrElEQVR42o1Ue0/CMBzs9/9c/mmMxoARwQljbOzhXt37cfaqxQrE0OTyW9txvbv+hgjDENvtFp7nYb/fw3Vd+L6PcRwxz/MJ18a1PZE3PeKyUWiRyBZhXiNtBsgBqBSydkZSjfqAruvQ9z3attXzc+JpmiD8VOJh+Ybntw88vb7j8WWDjRfCCRI4foxtLBFWilxK7YQO6IbOiqJAWZYnlayCipbvLnZhBu+zxEEdsE9KuHGu1yLZKZUT5ulXhalUyWorFaV6uVAo+1nblMOMopv1nMjVXl6rPH+IbNJzy5qQuaRpijzPEccxsiz7Y4FE0zTi1iEYsM4kipAkiSZnNiRmPua2byYcBnWjKnBWo8rkY8gmy+55u1y0DduAtom6rnVLXOu3mxXS2uFwQKQss6FZm6a5AA8j7Pn5O3QpmBd7iiAZL+Z4PCIIAl3NM/d5IOd85hp/S2JGJqtauxTMibbJboNrdhwmU7PPXEnMz5UOX18WSkz0rdBxHH26Ubnb7bBarfQa63q9PimzodfoQOHufgHPDyB4EpXYwRt1//0x2GNUX9G9I5FVPb4A9Co8/w8ketwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Load balancer selection screen\" title=\"\" src=\"/static/1a3b213065692e5e6e9300b99e424245/6af66/eb5.png\" srcset=\"/static/1a3b213065692e5e6e9300b99e424245/69538/eb5.png 160w,\n/static/1a3b213065692e5e6e9300b99e424245/72799/eb5.png 320w,\n/static/1a3b213065692e5e6e9300b99e424245/6af66/eb5.png 640w,\n/static/1a3b213065692e5e6e9300b99e424245/d9199/eb5.png 960w,\n/static/1a3b213065692e5e6e9300b99e424245/21b4d/eb5.png 1280w,\n/static/1a3b213065692e5e6e9300b99e424245/d2782/eb5.png 1864w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>All 3 look delicious but you can only eat one at a time, so don’t be greedy and select Application Load Balancer. And scrolling down a bit, you’ll see load balancer setting menus.</p>\n<p>Among these, we need to create a <code class=\"language-text\">Listener</code>. You can think of ALB’s listener as a process that confirms requests using configured protocols or ports. Since default settings only have a listener for requests coming to port 80 using HTTP protocol, we just need to make a listener for requests coming to port 443 using HTTPS protocol.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2447dd384b41d2fe99a736d917073cae/3a1b1/eb6.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqklEQVR42p1Sy07CUBDlV12TmJC4UNC9gARYiFIgwY1LkMcvuFJCXLlQEzUQEyhBWqCE9vZ4Z2RK8REfNzmZmfs4c2bmRqLRKLLZLFKpFNLpNJLJZGAzmQxyuRwjn89/CzovFAqIx+OINBoN0JrNZlgsFpjP53Ach2PP8/CbpZRi2+12EWk2mxzQY9d1Yds2k5FPkP2vYvGXyyVzdDodTdhqBYSkjBROp1P2JfOfFDZCComI1I3HY4xGI1iWxTHty5lA4nBiJrxY9ZAORLpawfsA5fucWEBEgoCwVqtxmf1+H71eD44ejD94gXq8g//8sMbTPTzb0qSb5fqrJAFha9XDV10mwaYS6mdQhztQuQOo7L5GAupoF87tDZbvLD9Pmb6MaZrcG1c/oIcb0HsL3RJSRARiCTTpgLDdbnMg4yc70UrNwYAxMocwh0P2J5MJD4JaFB6QZdlwddlX1521QiKjbNQP+eDyyQV0JzwUGcyGwlboH/5nTXU/xjMX510HxfolIrFYDNVqFcViEYZhoFQqsRVfUC6XUalUPuHUKOP4xMDWXh5b2wm8ARletbTJSXtIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Load balancer listener creation screen\" title=\"\" src=\"/static/2447dd384b41d2fe99a736d917073cae/6af66/eb6.png\" srcset=\"/static/2447dd384b41d2fe99a736d917073cae/69538/eb6.png 160w,\n/static/2447dd384b41d2fe99a736d917073cae/72799/eb6.png 320w,\n/static/2447dd384b41d2fe99a736d917073cae/6af66/eb6.png 640w,\n/static/2447dd384b41d2fe99a736d917073cae/d9199/eb6.png 960w,\n/static/2447dd384b41d2fe99a736d917073cae/21b4d/eb6.png 1280w,\n/static/2447dd384b41d2fe99a736d917073cae/3a1b1/eb6.png 1686w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>If you created a listener, click the <code class=\"language-text\">Save</code> button at the bottom to save load balancer settings, configure other settings to taste, then click <code class=\"language-text\">Create environment</code> and finally the environment starts going up. By the way, it takes quite a while.</p>\n<h3 id=\"didnt-do-separate-server-settings\" style=\"position:relative;\">Didn’t do separate server settings?<a href=\"#didnt-do-separate-server-settings\" aria-label=\"didnt do separate server settings permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>You don’t need to. If ALB has an HTTPS listener, this listener handles it automatically. If the browser is a browser that supports HTTP/2, the listener will also respond with HTTP/2, and if it’s a browser that only supports HTTP/1.1 <small><del>Internet Explorer</del></small>, the listener will also respond with HTTP/1.1 protocol.</p>\n<p>And even if the HTTPS listener receives HTTP/2 requests, it communicates with instances connected to the load balancer using respective HTTP/1.1 protocols, so on the server you just handle HTTP/1.1 as usual.</p>\n<p>For details, read <a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html#http-connections\" target=\"_blank\" rel=\"nofollow\">HTTP Connections in the Elastic Load Balancing User Guide</a>.</p>\n<h2 id=\"http2-did-it-apply-well\" style=\"position:relative;\">HTTP/2, Did It Apply Well?<a href=\"#http2-did-it-apply-well\" aria-label=\"http2 did it apply well permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If you created an environment, that’s the end. The simplest way to test is using <code class=\"language-text\">curl</code>. You can request the environment you created or just poke anywhere. More services than you think use HTTP/2.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">--http2</span> <span class=\"token parameter variable\">-I</span> https://www.naver.com/\n\nHTTP/2 <span class=\"token number\">200</span>\nserver: NWS\ndate: Thu, <span class=\"token number\">13</span> Jun <span class=\"token number\">2019</span> <span class=\"token number\">14</span>:59:09 GMT\ncontent-type: text/html<span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">charset</span><span class=\"token operator\">=</span>UTF-8\ncache-control: no-cache, no-store, must-revalidate\npragma: no-cache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you use Chrome browser, there’s also the method of installing the <a href=\"https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin?utm_source=chrome-ntp-icon\" target=\"_blank\" rel=\"nofollow\">HTTP/2 and SPDY indicator Chrome extension</a>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 98px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ea713cc7adcbac869f0ddc1c27f52939/a4837/http2-plugin.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 96.93877551020407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42q2TsW7bMBCGOfUVOmTs1FcoMsSGPbW2swbJ2AxFMgdeMmVwAqSFDXSIA8Qo4MKWbImSKEs2EmTOY/25o3I2rSpDAQ8fRIrkf/8dj6rZbGKXqEajgV2idu5w54K1Wg1V1Ot1izuuonxOdTodlGm32/+FnPnWakHFcQwmiiJorddszyOEoSZCSxAEa+yciGn/U5ZDLRYLZFmGPM8hYyFNUxiT0v+E1mMkiSESy9pIHCFPF/jre/hxfQXFTpj5fI7BYIDxeGzn4kbrANNpSGuGHPmYzWZ274zwfB8RZTCl7+fTY3z4ug/Fh1hgOByi1+uh3++/CWkS0FguA1xcPOLg4IXcBltpTz0PS3J3OfiJvZNDnP2+LRwaYzAajdDtdq1LTqVIzWC1SnB3t8LNzRONjS0Bl4LXgyBETmX6403w8aiFT6dHUO5FTCYTG3nzr3ATx5pEikwkmHmrJbOiy/j1cI8v59+hfH9TFxaRlORwGam52wkhBc7I+XO+3FyKiLmiLm6ruC3D+zlQIayhuH6pMbaOjKThjrfaxDFQ7lceKznsUvSfwXtNX4UEUlUpbr0C+nJ9be9RrQWey75/BN0oblrvUeVQzCh3o4hJquUSMPw83XmZV3Oj5CsAxn8kAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"HTTP/2 and SPDY indicator\" title=\"\" src=\"/static/ea713cc7adcbac869f0ddc1c27f52939/a4837/http2-plugin.png\" srcset=\"/static/ea713cc7adcbac869f0ddc1c27f52939/a4837/http2-plugin.png 98w\" sizes=\"(max-width: 98px) 100vw, 98px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>This cute icon will tell you whether HTTP/2 or SPDY protocol is being used. But I don’t think I’ve seen anywhere besides Google use SPDY yet…?</p>\n<p>Or you can activate the <code class=\"language-text\">Protocol</code> column by right-clicking on the table head in Chrome browser’s developer tools <code class=\"language-text\">Network</code> tab.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 362px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b4034d3ba3d49737892b8eeb0dc3101d/10600/network.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFQ0lEQVR42nWV2U8bVxTG5/+oEohtzGKMWQwYYkiIjfeNkiZNorYPbV/aNFUWKgFJCgYHbLPEhtiAN8A7pmmz0EppCk1e+md9/c4EpEhVHz7dc2fm/uY759w7o3zi/wrnnFfRZJtEk9mK1r5RaHotMHQYoW/RQavToaW1FbqWFugYi1r+JxYp50a9aBq8DE33AJrbjWhvM0Fn7IRB3wq9Vgut9r+LRFre+xio0WhUKYZOIzrb22Fs06OjowOmdgOMpi6YDB3qg61018b7rW1t6lxieU6v16uws7Grqws9PT1QjD3d6GRg7O2FUUaqgzcHhoYQmZ7B9J0fMfX9bUz9cAfzs7OIL0WxEo0jPBfGo0ePMTc3jwdTU3B6fQhevQbFRbqHcsqoa4GXo+PCBdwc7Mffu2nsRx6jEPkZh5tr+OdFDe9/reCEOmb8J3X8uoFGrQB7dzeGJWWBuakAJXAbUwhqmuExDeDGVAnfzdfx9WwJ9+NH+PbJ7/hi/jW+XHiNW9SN8CvcXPwDn87WMWLswYhOC0WcuVgbHyWxnUAPgeNdFljvvsWNxXf4Jv4etyInsP50AvPdY/TfO0Yf1XvvL/TdfwfT7ZewGHpxUYAegrwids3NMUC5m5txzdyHk9wW8nOPsT71AJuPZvG2vIs31T0cVffxorKLXzj/rV5Ens85TCZYJeVJuhJNUD6681MB3rje3483mSzyCwvYnp9HPhZFY3sb5a0tlDIZ1Pb3UdrbQ7VcRmpnB+Ns5iXZhy46c1J2QvyUQ+KmJgT6+nCUTiNLWCYcRm55GRscVzlPRKMqsKwCS0jzRZe4MyxspuKQmlHuU3eiK4TeMptRj8eQjyxii1vjaHcXR8UiXpRKOOSoAilxmD51OCIOx6VuBATpLiQuOffT4efcl9XVVWQXF/F0Zga5WAyvCHhONagaoQKsnKYsNRwVh58JkPXzU0EZZdvwxjXW8GU2i52lJaw+fIgka/mcKYq7A6pKlT5yOMaUh9lMxUJI/6kGKDOPWj+BNgIbLH6CDjdZv9XwApbn5rDHxQeVCiolOhQw4zQbZb9ohbXPDEVDR9pTqTGB55l6/8AA0mtriBKSSSbRkMV0WGMNa3RV4ViSa9UqUs+eweXzw+0PQWnjoRe1n4mHXz5VFgJT62tYZ0fX6bBBSJ2qlcpqmlK7UrFEhwSmUnC63Bh3uAikK1ErIaJ2xno6tDDlcqGARCyOKOuX4aLnBwc4rNVQk5TPgNUPQLvDiSs2B0/K6T6cJERiOTET58/hOk+KpLexsoqVJ0uIRZ4gwa4n19exV9hFjaAzh+mdDMbZ5RE5KV5vAD5fAH5/EC6XBx6Pj/MgQqEJ1JleiYtFe/kCdnN55LM5AgvYZz2L7HKRdUyyxk46tNvFIUG2cdrlxO5007pLnfuDIRwwvbX4CmLL/AYy9Q0ufEqHEXY+kUigwtSz3FrLrLGHTZH1itvrh9PtxeUxG0cf5AUuugxNTKJeqyPxNIFoNIYYgblcDvV6HWU6L+4XVXcZbq0oG+fyeFUjyqDFgkHLEAYGLRgavgjL0DDM7LB93IEagVmmKAsbjUNVB2yMXK/RvTSkyDqLWwE6WDJFYAaDASZTN4xG/ktYXIOhE1brCLa3dxBeWERyYxP7dJRKpbHDL9AWrwskmdxAPB7HzPQ0s/PAQSluNkRSPpOLaXu5QW10OHbFzjgIKYuk08kf2uilMQzzVFzgMZOflvyktFqNmp30QRGbKoh1czKW0eH8MApYrgVZT4GK5CXWkVH1TyeHQA5FC8FjNjt8gRD+BcIaJTG18gx0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Activating Protocol column in Network tab\" title=\"\" src=\"/static/b4034d3ba3d49737892b8eeb0dc3101d/10600/network.png\" srcset=\"/static/b4034d3ba3d49737892b8eeb0dc3101d/69538/network.png 160w,\n/static/b4034d3ba3d49737892b8eeb0dc3101d/72799/network.png 320w,\n/static/b4034d3ba3d49737892b8eeb0dc3101d/10600/network.png 362w\" sizes=\"(max-width: 362px) 100vw, 362px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Then resources received by communicating with HTTP/2 protocol in the network tab are marked as <code class=\"language-text\">h2</code>.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 165px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/64a2efd14eb3ccf3c692e6d32ed99f81/04c57/http2-check.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVR42oWRa0vDMBiF808a2ia9pde13brZ2d2cojKGIvgLREFhgozJmOi++K+PSWAw3NAPDyFv3pyc84Z4ngff9zUOd8A5/xfXdfXKGIdpmggCofeO44CMJlMs159YvL2j7jeghiEbGWzbPkDVKaWoeid4Xa7x+LzAw9MLbu7uoXS6vRokTTP0mwEGwzFEGOoXj4ntsCwLgRDoVF1Mpue4ms0RRTHyopApA5AwjNDKC2RZS1oPtG0V6S+EFEzSVAtTaoBL54zZ8i4Hubi8xmb7jdXmC6PxGZh0oeapZvsbVVfn9WmD1ccWs/mtnt3uD1QPSZIEZdlGu1MhlJGVg2Ni+6gkeVEijpOD/h++CLzRmVvtPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Protocol column appearance in Network tab\" title=\"\" src=\"/static/64a2efd14eb3ccf3c692e6d32ed99f81/04c57/http2-check.png\" srcset=\"/static/64a2efd14eb3ccf3c692e6d32ed99f81/69538/http2-check.png 160w,\n/static/64a2efd14eb3ccf3c692e6d32ed99f81/04c57/http2-check.png 165w\" sizes=\"(max-width: 165px) 100vw, 165px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h2 id=\"lets-compare-with-waterfall\" style=\"position:relative;\">Let’s Compare with Waterfall<a href=\"#lets-compare-with-waterfall\" aria-label=\"lets compare with waterfall permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Left is <code class=\"language-text\">HTTP/1.1</code>, right is <code class=\"language-text\">HTTP/2</code>. The red line on the HTTP/2 side is an image request error, but it’s a 403 error occurring due to resource origin issues in the staging environment, so you can ignore it.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/10f6fcafbe60f0c9d6f5291aabf79d51/9cab2/result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 183.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAGhklEQVR42oWWy3Pb1hXG/ad305lsmukuXbgzTTtdtEnaNI2sie1YsSXVlmSRlPgm8SIJEiAA4o0LgHp8/e4FJUtyZrLAXIo8+t3z+M45eGaaJnTdgGla6Pf7eP3za5ycnMAwDH6vQ9M0zGYzLBYL9Z1lzZTdwcEBzs7OIP9ffm8YujqfxUmCpb3AxvcQBhGcpQPP9RCHMaJNhE0QI8syJEkK254/svPXPu0i/h0i3CS0SfBMiAqTaQ9RtEJdXaGqKlRl85SiRBLXuL6+5ucKI62LKHawraVdqWzLskSRC6RJjdvbGwksMZn0CXT4Y4U8z2lQKFhRFLy1aoD8bTztIwwdgmr1mxBCPVlWIE0r3NxcN0BNHyFOPZTSUBTKWN38CFhiqtEu9pRnCsjvBO2zLFd29x5q0yGiYIk8SpDFMfJCGkpvBQENUP6tTQkMA8KvUcQZnxwiKwmsCNx+Aup6D4F2jsQaIt/YvDmiFxEhGxpmBN4QUmCqn8IdvUZsHiGxT5G758iTIYET2vkEQgIz6OYBQ36H7fYMZc2n/IC6PuF5zNxoBEIBR1obYWygLleMYglROUzRisAFgRGBtxIomJsuwsRiZUOG6TM/MqwNT1/Jpakyi2dMMOjMEPmyGDVEUavzs5DH4xbsWRdF5hHCWwuXwLX6LG+WIcuLNWuCk3cdjM4t/i52lf6sKEIBZ0YPebqmh656hJCfHRalATYeDjG+HCP0EyWvh7K5B5YiZ7J/gb16wxBaNDhXT1W16MUpDQ0Cb++Bc7ZjXW9pW/w6sCgEjNkY2miEwI2Y5Iy3ZyoUecZxeZ9DYzFFr9PHpDNnUQijHgU7JqPMkrT+BNStMSyKO3Q3Sth34chTAdkBQl6s9dA97eDwxQUWfRN1tIHwfcpnjTTImipLoMZQ/MDGyloryK8CKXJtconeWQf/e3mJtW6j3gQQnofccZH6KW5x21R5qg+RFB60jonxxxkcM1CJl1W8C1kUTcjddhfvf7qEbXkMVajQc/Eg5KaXh4jzNTw7gDW0kaXZYw93QN0aodfq4ni/g/5HjUMkV0+WZE96mSFHKbVXV1joMxYnYCWrByFTh6ykcXaI3uEHvH/dZdjsmtM26l4X+XkbqblkwNj1sslezJgPcaV61xo7yNn0opQdUH/ykGrotnsqh6cHXcQcqlVF2aQPhS2rbHaQFjql4dMzD+6cE9xboqrXHLBx4yGLYow66NGrY+bw/C09s1eoXF6+WCL1kk9F0YxLJPmMQuaEYf/maQTfcehx0PSyAjLkQQv9k5YCdo/6qG0b1XKJwpojpYYbYCGBYwJ9ArbNLOTg3PDGPBNNyBJIsPXyB/R/eoOjN0N0/3uE8pt/od57ger7/yBvD3Cjclg0VU6yNaS3TZdwR3CAxmGiRrsCcvha//gag+/3cPR2guG3r1D/4UuUX/0J5Zd/RPbmeAfcVTnhpGmmNEXNSZKEKbcegVlTFLmINCWbHnV4gdbhAJa2gmyMR70sPVTCzh8ARVO5YB0pwd5VWTMZ6vkl3rPK7191ML0wOUPFEx0q4OAeWBT5/ZLa+NH9krqTjRT2h1eXLEwLk66Fels9kY0KeURhy4Ha5PAubGfBFtwItR7vdXjexRE75d3eR+iDOaVVMs/55yHHT4Alx5Lvhnxy3NCwAXIFXHQxauvQR3OVY7lSH0/soilKnD0BlvJtIOOrSEEPb9T4kivA0saw9TXzG6scy3Cznbx+E5hEKQK/2HnIjpoNORP7sC6H8FZrrPmk3Dl5HhMofiNkCYwJ9PLGQ64KbXGMqDjBYn6G5fwt1st32IQfkdcXbF0H5DXAiTb4DHg3vnwCpbBLjjT9aB/Fhx+RHbxE++AYHfa1ubcP77tvkAxGu2kjk80qx4mrxNsAM7WE5Om7fHPgaC+5/fS950i//T3E119gfPgKo8FbhPvPUf3td0hPf2k6pVkBo10vy5cl7ltKqZQLiFpMooJAhsypo7/4J7J//wX5X59j/MM+uhdjBC9+RP33PyM7azXA7faaiV8gXg9RbPiKwd2S+XMUoYuE54Y7o6kyi6exo0IPGyfArKdhtfAQOCH/N0IalU1R5BJPU95uDrBwDNiujpkzhb3m6/Cyj4W3YLJvVQqmZlvNze01h3HtIFgZcI0ZXNPgDvKbHMq2utpeMUTu2bpQTynPLQuzLVBfNa1X8611udTgLnv02uS81HjKdWHAcyhyP6C8bvF/+fnTvqnZQYkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result\" title=\"\" src=\"/static/10f6fcafbe60f0c9d6f5291aabf79d51/6af66/result.png\" srcset=\"/static/10f6fcafbe60f0c9d6f5291aabf79d51/69538/result.png 160w,\n/static/10f6fcafbe60f0c9d6f5291aabf79d51/72799/result.png 320w,\n/static/10f6fcafbe60f0c9d6f5291aabf79d51/6af66/result.png 640w,\n/static/10f6fcafbe60f0c9d6f5291aabf79d51/9cab2/result.png 864w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>You can confirm that the HTTP/2 side’s Waterfall is processing a considerable number of requests simultaneously. Using HTTP/2’s characteristics like this, you can reduce file capacity by chunking JavaScript files that were being bundled into one into multiple pieces, or shorten loading speed a bit more by receiving images that were being used as sprites simultaneously through individual requests.</p>\n<p>That’s all for this post on simply applying HTTP/2 with AWS.</p>","fields":{"slug":"20190613-http2-with-aws-en","path":"/2019/06/13/http2-with-aws/en/","lang":"en"},"frontmatter":{"title":"Simply Applying HTTP/2 with AWS","subTitle":"Advantages of HTTP/2 and How to Easily Enable It on AWS","date":"Jun 13, 2019","categories":["Programming","Network"],"tags":["Amazon Web Service","AWS","HTTP","HTTP/2","HTTP2","Network","ALB","Application Load Balancer","ELB","Elastic Load Balancer","Cloud Front","Tutorial"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/be9e83d603d0e671bc285680c3aa165f/d803c/aws.png","srcSet":"/static/be9e83d603d0e671bc285680c3aa165f/d803c/aws.png 320w,\n/static/be9e83d603d0e671bc285680c3aa165f/2a1fd/aws.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/be9e83d603d0e671bc285680c3aa165f/fc5c5/aws.webp 320w,\n/static/be9e83d603d0e671bc285680c3aa165f/e9225/aws.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/be9e83d603d0e671bc285680c3aa165f/01fb2/aws.png","srcSet":"/static/be9e83d603d0e671bc285680c3aa165f/01fb2/aws.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/be9e83d603d0e671bc285680c3aa165f/b384d/aws.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"32f29897-1836-5759-a395-69db3b9ea430","tableOfContents":"<ul>\n<li><a href=\"#a-technically-excellent-person\">A Technically Excellent Person?</a></li>\n<li><a href=\"#after-joining-my-first-company-a-changed-perspective-on-business\">After Joining My First Company: A Changed Perspective on Business</a></li>\n<li><a href=\"#are-emotions-unnecessary-in-professional-work\">Are Emotions Unnecessary in Professional Work?</a></li>\n<li><a href=\"#conclusions-so-far\">Conclusions So Far</a></li>\n</ul>","excerpt":"From starting my first job as a developer in 2016 to now in 2019 as I write this, I’ve always wondered: what does it mean to be a good programmer, or a good developer? I thought I’d jot down some thoughts. Back when I first fell in love with programming as a college student, I was a complete techno-optimist. I was hungry for things like researching patterns that fit well with the languages I used, having efficient algorithms become second nature, and creating flexible, extensible designs. The reason I thought this way is simple.","html":"<p>From starting my first job as a developer in 2016 to now in 2019 as I write this, I’ve always wondered: <strong>what does it mean to be a good programmer, or a good developer?</strong> I thought I’d jot down some thoughts.</p>\n<p>Back when I first fell in love with programming as a college student, I was a complete techno-optimist. I was hungry for things like researching patterns that fit well with the languages I used, having efficient algorithms become second nature, and creating flexible, extensible designs. The reason I thought this way is simple.</p>\n<!-- more -->\n<h3 id=\"a-technically-excellent-person\" style=\"position:relative;\">A Technically Excellent Person?<a href=\"#a-technically-excellent-person\" aria-label=\"a technically excellent person permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In late 2014, while still in college, I formed a team called <a href=\"https://lubycon.io\" target=\"_blank\" rel=\"nofollow\">Lubycon</a> with some friends and started what I thought was an ambitious(?) dream project — which, looking back now, was pretty insane. Our team composition at the time was roughly like this:</p>\n<table>\n<thead>\n<tr>\n<th>Role</th>\n<th>Skill Level</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Frontend (me)</td>\n<td>All I knew was C and Java from school. Last time I touched JavaScript was in 4th grade.</td>\n</tr>\n<tr>\n<td>Backend</td>\n<td>Had a web design certification. The only one with any web experience on this team. Took the backend role but had never touched a server.</td>\n</tr>\n<tr>\n<td>Backend 2</td>\n<td>Electrical engineering major. Also had zero knowledge of databases or web. Too busy to show up often.</td>\n</tr>\n<tr>\n<td>UI/UX Designer</td>\n<td>In the military. Hadn’t even been discharged yet. Would work occasionally while on leave.</td>\n</tr>\n<tr>\n<td>Planner</td>\n<td>Korean-Canadian. Music major. Zero IT experience.</td>\n</tr>\n</tbody>\n</table>\n<p>Just looking at the team composition, it’s obvious we were a ragtag bunch. Writing this out again, I realize we really were out of our minds. Where did we get that confidence from?</p>\n<p>None of us had ever done web development. Ignorance breeds courage, as they say, and here’s the thing — what this group of people was trying to build was a 3D model editor that runs on the web. And that was just part of the plan; there was even more chaos to come after that. <small>(This project taught me the importance of MVPs during my college years.)</small></p>\n<p>Since I was in charge of frontend, I just dove in headfirst and somehow cobbled things together with JavaScript and jQuery. It was my first time doing anything with graphics, and my first time using <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"nofollow\">Three.js</a>, so I struggled quite a bit with the 3D work. But thanks to that, I studied math intensively, and after about three months, I had built a prototype with basic features — loading obj files on the web, changing textures and materials, placing lights to change the atmosphere of the space, and so on.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8e3799a686b0ec2f2f6b8877b80bea42/6a068/3deditor.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAP/2gAMAwEAAhADEAAAAUWXLpaSE//EABsQAAICAwEAAAAAAAAAAAAAAAECAAMQERQj/9oACAEBAAEFAuhhLbW2WMYeOP/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEJ/8QAGRAAAgMBAAAAAAAAAAAAAAAAARAAAiFB/9oACAEBAAY/AuzSql//xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMWFB/9oACAEBAAE/IUsvE4Nx0GnsTgRljo3k/9oADAMBAAIAAwAAABADH//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EFT/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EESmH//EABoQAAMBAQEBAAAAAAAAAAAAAAERIQBhcTH/2gAIAQEAAT8Qpxwpq+ZPjBZIorzcpxov00e4Fcz3GZTg3//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3deditor\" title=\"\" src=\"/static/8e3799a686b0ec2f2f6b8877b80bea42/c08c5/3deditor.jpg\" srcset=\"/static/8e3799a686b0ec2f2f6b8877b80bea42/0913d/3deditor.jpg 160w,\n/static/8e3799a686b0ec2f2f6b8877b80bea42/cb69c/3deditor.jpg 320w,\n/static/8e3799a686b0ec2f2f6b8877b80bea42/c08c5/3deditor.jpg 640w,\n/static/8e3799a686b0ec2f2f6b8877b80bea42/6a068/3deditor.jpg 960w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>The nostalgic café next to Hakrim Hall at Dongguk University</small>\n</center>\n<p>At one point, I saw this bald guy more often than my own mother. After completing this, my feelings were roughly like this:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 489px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/723f5da18cd94d1e63bcd18ee83cb7c8/17612/gonnadie.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 76.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBBv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGWy4XPrRP/xAAaEAEBAAIDAAAAAAAAAAAAAAABAgMSAAQR/9oACAEBAAEFAjzewm+CbYMcWZOoNf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAICAgMAAAAAAAAAAAAAAAABESECECIxUf/aAAgBAQAGPwJJ9ELVjqDhlC8P/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARQSExcf/aAAgBAQABPyG71UcJxkqAKbCIZhncutlon//aAAwDAQACAAMAAAAQjx//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EMhUf//EABYRAQEBAAAAAAAAAAAAAAAAABEAAf/aAAgBAgEBPxDVi//EABsQAQEAAwEBAQAAAAAAAAAAAAERADFhQRAh/9oACAEBAAE/EBuG+plxW9Ng+fC7VfobnMJwhSwwmm8xqY1VMecz/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"gonnadie\" title=\"\" src=\"/static/723f5da18cd94d1e63bcd18ee83cb7c8/17612/gonnadie.jpg\" srcset=\"/static/723f5da18cd94d1e63bcd18ee83cb7c8/0913d/gonnadie.jpg 160w,\n/static/723f5da18cd94d1e63bcd18ee83cb7c8/cb69c/gonnadie.jpg 320w,\n/static/723f5da18cd94d1e63bcd18ee83cb7c8/17612/gonnadie.jpg 489w\" sizes=\"(max-width: 489px) 100vw, 489px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Oh God... I had no idea this was what I was trying to build... What's Euler? What's a quaternion...?</small>\n</center>\n<p>Still, having made it through all that struggle, I felt some pride and developed affection for the result. At that point, I think the idea that a good developer is someone who can whip up technically difficult things took root in my mind.</p>\n<h3 id=\"after-joining-my-first-company-a-changed-perspective-on-business\" style=\"position:relative;\">After Joining My First Company: A Changed Perspective on Business<a href=\"#after-joining-my-first-company-a-changed-perspective-on-business\" aria-label=\"after joining my first company a changed perspective on business permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Then I graduated in 2016 and, luckily, got a job at a startup about two weeks later. This was when I first properly collaborated with people from other roles — not just developers.</p>\n<p>When bugs occurred in programs I built, customers would contact the CS team, and the CS team would report bugs to the dev team. Or I’d share ideas with designers and planners while building products. In college, it was all just side projects with friends, so I only had simple concerns like “how do I build this?” But at a company, it was completely different. Here, I had to think about additional things:</p>\n<hr>\n<ul>\n<li>What risks or benefits might arise from deploying this feature?</li>\n<li>Should we use an external solution to save development time, or build it ourselves with a long-term view?</li>\n<li>If feature A takes about a month to develop, but we could build two other features in that time, what choice should we make?</li>\n<li>We’ve received a lot of VoC (Voice of Customer) related to this feature — how should we solve it to satisfy users?</li>\n</ul>\n<hr>\n<p>At the time, designers, developers, and planners freely exchanged opinions on these issues. That’s when I realized that ultimately, the most important things for a company are <strong>customers</strong> and <strong>money</strong>.</p>\n<p>This might sound obvious. But arriving at this thought has had a huge influence on my values as a developer. Sure, there are many other important things at a company — employee satisfaction, culture, and so on — but customers and money are the fundamentals. No matter how well I build a program, it’s meaningless if no one uses it. And no matter how great a company’s culture and benefits are, if there’s no money, the company will eventually fail. So this was the first time I thought:</p>\n<blockquote>\n<p>Even as a developer, only thinking about technical things might be a narrow perspective.\nUltimately, what I’m building is a product that people use, and I should build it for people.</p>\n</blockquote>\n<p>From then on, I thought a lot about how becoming a good developer means thinking deeply about business and users too.</p>\n<h3 id=\"are-emotions-unnecessary-in-professional-work\" style=\"position:relative;\">Are Emotions Unnecessary in Professional Work?<a href=\"#are-emotions-unnecessary-in-professional-work\" aria-label=\"are emotions unnecessary in professional work permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>I still continue to work at startups. The reason is that I can take on diverse work that wouldn’t be possible at larger companies, and I enjoy freely sharing opinions and deriving rational conclusions through healthy debate.</p>\n<p>But it’s not all good. Since people gather together, there are various events — feelings get hurt between colleagues, conflicts arise between team members and the company. Especially since the atmosphere is so free, we treat each other almost like friends, and occasionally, <strong>mistakes</strong> happen. <small>(Of course, no matter how flat or free the organization is, everyone maintains basic courtesy.)</small></p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e2140f5e349ad0ef493dfc5c2f58068c/09d21/everyone.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 140%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAcABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHk0bCLAG6MWiaSQV//xAAcEAACAQUBAAAAAAAAAAAAAAABAgADEBITMiH/2gAIAQEAAQUCJv4YVItT7rczMrNjBNhaf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8BiZp//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BIf/EABkQAAIDAQAAAAAAAAAAAAAAAAAQAQIhEf/aAAgBAQAGPwJ5DgqsOr//xAAdEAEBAAMAAgMAAAAAAAAAAAABEQAhMRBRcYGx/9oACAEBAAE/IbhPzztCLztx2Ii734cZs5myRo5H1nPxiAJfjHaZ9Gf/2gAMAwEAAgADAAAAEM//AMD/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EMgh0z//xAAYEQACAwAAAAAAAAAAAAAAAAAAARARIf/aAAgBAgEBPxCHpFH/xAAfEAEBAAIBBAMAAAAAAAAAAAABEQAhMRBBUYFxobH/2gAIAQEAAT8QAAOAdA/OvKMAAkobTAA8gEp5z2PvNFG1B3cTvQ7fE394pEaPDMiuVuJ3xSgC8N2XHiOECAHxn//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"everyone\" title=\"\" src=\"/static/e2140f5e349ad0ef493dfc5c2f58068c/09d21/everyone.jpg\" srcset=\"/static/e2140f5e349ad0ef493dfc5c2f58068c/0913d/everyone.jpg 160w,\n/static/e2140f5e349ad0ef493dfc5c2f58068c/cb69c/everyone.jpg 320w,\n/static/e2140f5e349ad0ef493dfc5c2f58068c/09d21/everyone.jpg 540w\" sizes=\"(max-width: 540px) 100vw, 540px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Some mystery meme someone registered. When you use @everyone mention, this image automatically gets attached...</small>\n</center>\n<p>Among these things, I’ve been thinking a lot about emotions lately. I used to strongly agree with sayings like “separate work and personal life” or “responding emotionally, no matter how difficult things are, is unprofessional.” I still think nothing good comes from emotions getting mixed into professional work. But lately, I’ve also been thinking:</p>\n<blockquote>\n<p>No matter how much you try to exclude emotions, isn’t that impossible since we’re all human?</p>\n</blockquote>\n<p>Whether someone is smart, senior, or junior — they’re all human, so of course there are difficult times and happy times, right? I’ve seen a senior developer dismiss such things as whining and call it unprofessional. Sure, if someone is going around broadcasting their emotions everywhere, that person has issues. But forcing someone to completely suppress emotions that inevitably leak out seems strange too.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2f3ecdd358609e79d87e38139b88663c/ddced/brain.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABus2ogHj/AP/EABgQAAMBAQAAAAAAAAAAAAAAAAEQEQAC/9oACAEBAAEFAgLjzArV/8QAGBEAAgMAAAAAAAAAAAAAAAAAAhAREiH/2gAIAQMBAT8BCkav/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARQf/aAAgBAgEBPwE3F//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQEAAwEAAAAAAAAAAAAAAAERABAhMf/aAAgBAQABPyGzrMKg68bihHX/2gAMAwEAAgADAAAAEPg//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/ECkv/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAECAQE/EJbj/8QAGhABAAIDAQAAAAAAAAAAAAAAARExABAhUf/aAAgBAQABPxA24C/XHCGLHQoBhKcYpMt6/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"brain\" title=\"\" src=\"/static/2f3ecdd358609e79d87e38139b88663c/c08c5/brain.jpg\" srcset=\"/static/2f3ecdd358609e79d87e38139b88663c/0913d/brain.jpg 160w,\n/static/2f3ecdd358609e79d87e38139b88663c/cb69c/brain.jpg 320w,\n/static/2f3ecdd358609e79d87e38139b88663c/c08c5/brain.jpg 640w,\n/static/2f3ecdd358609e79d87e38139b88663c/6a068/brain.jpg 960w,\n/static/2f3ecdd358609e79d87e38139b88663c/ddced/brain.jpg 1100w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Emotions are said to occur through hormone secretion triggered by brain signals. This isn't something you can control by willpower.</small>\n</center>\n<p>Personally, I don’t think of the POs, designers, and developers I work directly with as just coworkers. It’s more like “somewhere between coworkers and friends.” It might sound like splitting hairs, but anyway, I don’t think of them as purely professional relationships. We’re all people running hard together toward the same goal, around the same age, and our values aren’t that different either.</p>\n<p>So if a team member is going through emotional difficulties because of something bad that happened, and it’s showing, I think “Isn’t there something I can help with?” rather than criticizing them for bringing emotions to work.</p>\n<p>Helping isn’t even difficult. It’s just casually saying “Whoa, you don’t look so great today. Want to grab a coffee?” then going to a café, listening to them talk, and hanging out for 20-30 minutes. Just doing that much might help the troubled team member organize their thoughts, sort out their emotions by talking to someone, and focus better on work again, right?</p>\n<p>Humans are emotional beings. I don’t think you can understand anything while excluding emotions. Overlooking this means there can be no <strong>healthy communication</strong>.</p>\n<h3 id=\"conclusions-so-far\" style=\"position:relative;\">Conclusions So Far<a href=\"#conclusions-so-far\" aria-label=\"conclusions so far permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Ultimately, my current thinking leans heavily toward: “Even as a developer, you can’t become a good developer by only pursuing technical things” — if I want to be remembered as “that person was a good person; it was great working together” even after leaving a job.</p>\n<p>After all, aren’t developers also workers who must collaborate and communicate with someone? Even freelancers must communicate with clients. A developer who’s simply good at coding won’t be remembered by others as “a developer who’s great to work with.”</p>\n<blockquote>\n<p><strong>The person you want to work with isn’t necessarily someone who’s just good at their job.</strong></p>\n</blockquote>\n<p>An attitude that fully respects someone’s opinion during meetings, even if they disagree with me, even if they have less experience, even if they’re an elementary school student.</p>\n<p>An attitude that, when someone is emotionally struggling, helps them recover their pace by listening to their concerns rather than criticizing them for being unprofessional.</p>\n<p>Or an attitude that can at least acknowledge that someone felt a certain emotion, even if you don’t understand it.</p>\n<p>Having these basic attitudes is what allows you to become not just a good developer, but a good colleague, right? Of course, I’m shy by nature, so I’m not exactly a warm person. <small>(I’ve been told since childhood that I give bad first impressions.)</small> But regardless of individual personality, I believe we should at least have respect and consideration for the people we collaborate with. Personally, I think anyone can improve their technical hard skills if they work hard — the speed might differ, but everyone improves. And I believe developers are already putting effort into their technical specs without anyone having to tell them.</p>\n<p>But soft skills like communication and consideration for others are easy to neglect unconsciously unless you pay attention regularly, so I think it’s important to keep reflecting, stay mindful, and maintain an attitude of seeking continuous feedback. Recently, I received feedback from someone on another team that my tone is too stiff and intimidating, which was a bit discouraging. But since then, I’ve been trying to be more mindful of how I speak. I’m not sure if it’s working though… haha</p>\n<p>So these are my thoughts and conclusions so far, after four years of working as a developer and pondering <strong>what makes a good developer</strong>. I still have many more years of work and life ahead, so my current conclusions might change again. But I think “an attitude of consideration for others” remains important whether I’m a developer or doing something else entirely.</p>","fields":{"slug":"20190606-what-is-good-programmer-en","path":"/2019/06/06/what-is-good-programmer/en/","lang":"en"},"frontmatter":{"title":"What Makes a Good Developer?","subTitle":"Beyond coding skills — reflections on becoming someone others want to work with","date":"Jun 06, 2019","categories":["Essay","Soft Skills"],"tags":["Good Programmer","Developer","Programmer","Soft Skills"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/8e3799a686b0ec2f2f6b8877b80bea42/3a812/3deditor.jpg","srcSet":"/static/8e3799a686b0ec2f2f6b8877b80bea42/3a812/3deditor.jpg 320w,\n/static/8e3799a686b0ec2f2f6b8877b80bea42/4b287/3deditor.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/8e3799a686b0ec2f2f6b8877b80bea42/fc5c5/3deditor.webp 320w,\n/static/8e3799a686b0ec2f2f6b8877b80bea42/e9225/3deditor.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/8e3799a686b0ec2f2f6b8877b80bea42/2d839/3deditor.jpg","srcSet":"/static/8e3799a686b0ec2f2f6b8877b80bea42/2d839/3deditor.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/8e3799a686b0ec2f2f6b8877b80bea42/b384d/3deditor.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"58686e18-f7e5-5dea-81ab-ce1ca9644dd5","tableOfContents":"<ul>\n<li>\n<p><a href=\"#why-did-i-start-optimization\">Why Did I Start Optimization?</a></p>\n</li>\n<li>\n<p><a href=\"#identifying-problems\">Identifying Problems</a></p>\n<ul>\n<li><a href=\"#not-using-text-compression\">Not Using Text Compression</a></li>\n<li><a href=\"#offscreen-images-need-deferral\">Offscreen Images Need Deferral</a></li>\n<li><a href=\"#network-payload-size-too-large\">Network Payload Size Too Large</a></li>\n<li><a href=\"#minimize-main-thread-work\">Minimize Main Thread Work</a></li>\n<li><a href=\"#ensure-text-remains-visible-during-webfont-load\">Ensure Text Remains Visible During Webfont Load</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#actions\">Actions</a></p>\n<ul>\n<li><a href=\"#image-lazy-loading\">Image Lazy Loading</a></li>\n<li><a href=\"#component-lazy-loading\">Component Lazy Loading</a></li>\n<li><a href=\"#apply-gzip-compression-for-text-content\">Apply gzip Compression for Text Content</a></li>\n<li><a href=\"#js\">JS</a></li>\n<li><a href=\"#css\">CSS</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#results\">Results</a></p>\n</li>\n</ul>","excerpt":"In this post I want to write about the client-side rendering optimization I worked on at my current workplace. In Chrome browser’s Audits tab, you can check metrics like the current page’s performance and SEO score. These metrics are measured using a tool called Lighthouse provided by the Google Chrome team. You can also export the measured metrics in JSON format, save them, and check them again in Lighthouse’s Report Viewer page. Looking at the links below will help you understand Lighthouse better.","html":"<p>In this post I want to write about the client-side rendering optimization I worked on at my current workplace. In Chrome browser’s Audits tab, you can check metrics like the current page’s performance and SEO score.</p>\n<p>These metrics are measured using a tool called Lighthouse provided by the Google Chrome team. You can also export the measured metrics in JSON format, save them, and check them again in Lighthouse’s Report Viewer page. Looking at the links below will help you understand Lighthouse better.</p>\n<!-- more -->\n<hr>\n<p><a href=\"https://github.com/GoogleChrome/lighthouse\" target=\"_blank\" rel=\"nofollow\">Lighthouse Github Repository</a><br />\n<a href=\"https://developers.google.com/web/tools/lighthouse/?hl=ko\" target=\"_blank\" rel=\"nofollow\">Google Developer’s Lighthouse Documentation</a><br />\n<a href=\"https://googlechrome.github.io/lighthouse/viewer/\" target=\"_blank\" rel=\"nofollow\">Lighthouse Report Viewer</a></p>\n<hr>\n<h2 id=\"why-did-i-start-optimization\" style=\"position:relative;\">Why Did I Start Optimization?<a href=\"#why-did-i-start-optimization\" aria-label=\"why did i start optimization permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I’m developing a service called <a href=\"https://soomgo.com\" target=\"_blank\" rel=\"nofollow\"><strong>Soomgo</strong></a> at work. At Soomgo we proceed with work in 1-week sprints. This week happened to be when the issue I was going to work on got blocked by another issue, so I had some free time. So while looking around for what to do, I ran Audits once on Soomgo’s <a href=\"https://soomgo.com/search/pro\" target=\"_blank\" rel=\"nofollow\">Find a Pro</a> page and found that the FMP (First Meaningful Paint) item took almost 2 seconds.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/d30ee/result_before.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrElEQVR42pVSXY/TMBDM//9DPPEEh073gITUcgIdrURDmu/UcRLHn8Ouc4U2FXfHSCtvEnsm450EzzDB4W78gYdpv7wYaa0+Lr38Rv2H2H4an3A/7mJfFiXyPMclknNjrcWm2OF7fYCzHm2xR5s9YlIGXbZFk24QPLATx1iMNE1xOBwQQrgl9N7DzgZWGzjnMM8aip6NMXHl4j2OhL118UxRFLH4/Q3hDUhVDwPUJKEngX4cIJTE6XTCS0he+hhIOYRFnU156i//hq1e2n2VkKGDxVZl2Kg0Du41/JMwYFHOjcA7scH7/hGZOV19+2/LjEnP+Nzv8UX+hPFv/EOe6vouzujaDsdfGXIqsRrI+UQlgKZfxBJHl5zlR8xKxSwy+do6izlQrJyNe7iegxBxtw14+MpingjpQD0KNHWDtm0xTdOf6XFZEpB6QjNLlGWJuq4hpYzT/jvlgMHMMQWRsJQtEdYYx/HGMjsYjEKvBKqqQtd10Fpfxcf7QGf7GLGEdNANPXohojqTsqXznXoOOFn1moJNe4ZhWa+uhvZ4NXBwl6Gw4rrWQwp4G34DwP5Io3v8J0IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result before\" title=\"\" src=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/6af66/result_before.png\" srcset=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/69538/result_before.png 160w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/72799/result_before.png 320w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/6af66/result_before.png 640w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/d9199/result_before.png 960w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/d30ee/result_before.png 980w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Results of analyzing Soomgo's Find a Pro page</small>\n</center>\n<p>Since that page is one of the SEO optimization target pages, I started optimization with the goal of reducing FMP to under 1 second.</p>\n<p>Actually, before this work, that page had already undergone optimization work with colleagues multiple times, so the page’s loading speed itself isn’t bad. However, previous optimizations focused on the render server rather than the client, so this was actually the first time confirming bottleneck points in client rendering.</p>\n<h2 id=\"identifying-problems\" style=\"position:relative;\">Identifying Problems<a href=\"#identifying-problems\" aria-label=\"identifying problems permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, among various problems Lighthouse pointed out in audit results, I identified problems I could solve quickly in a short time. Originally this issue wasn’t an issue that entered the sprint but something I did because I coincidentally had spare time, so if I fell into <a href=\"https://www.lesstif.com/pages/viewpage.action?pageId=29590364\" target=\"_blank\" rel=\"nofollow\">yak shaving</a> or got too greedy and took too long, I couldn’t handle important business issues. Among them, parts I thought I could prioritize and improve in a short time were as follows:</p>\n<h3 id=\"not-using-text-compression\" style=\"position:relative;\">Not Using Text Compression<a href=\"#not-using-text-compression\" aria-label=\"not using text compression permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Usually resources treated as text or code like <code class=\"language-text\">text/html</code> or <code class=\"language-text\">application/javascript</code> use gzip compression. But currently the render server was only performing gzip compression for <code class=\"language-text\">text/html</code> type.</p>\n<h3 id=\"offscreen-images-need-deferral\" style=\"position:relative;\">Offscreen Images Need Deferral<a href=\"#offscreen-images-need-deferral\" aria-label=\"offscreen images need deferral permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Offscreen images mean images that exist in code but aren’t actually shown to users because they’re outside the screen or hidden by CSS styles. Naturally I thought lazy loading these images would be good.</p>\n<h3 id=\"network-payload-size-too-large\" style=\"position:relative;\">Network Payload Size Too Large<a href=\"#network-payload-size-too-large\" aria-label=\"network payload size too large permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>This problem relates to the aforementioned not using text compression. Literally it means the data size that needs to be received when requesting resources once is too large. This issue can be solved with gzip compression and code chunking.</p>\n<h3 id=\"minimize-main-thread-work\" style=\"position:relative;\">Minimize Main Thread Work<a href=\"#minimize-main-thread-work\" aria-label=\"minimize main thread work permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>It means when the browser initializes the web application, executing JavaScript takes too long, causing a bottleneck in rendering elements on screen. Various methods came to mind to solve this problem, from really minor optimizations to methods that can show big effects with just a little work. Since minor optimizations are honestly pointless, I had to choose methods that could get maximum effects with minimum cost.</p>\n<h3 id=\"ensure-text-remains-visible-during-webfont-load\" style=\"position:relative;\">Ensure Text Remains Visible During Webfont Load<a href=\"#ensure-text-remains-visible-during-webfont-load\" aria-label=\"ensure text remains visible during webfont load permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>If no measures are taken, browsers render webfonts differently according to their respective policies. Webkit camp browsers like Chrome, Firefox, Safari, Opera render webfonts using the FOIT (Flash of Invisible Text) method that doesn’t show text with fonts applied until webfont download completes, while IE/Edge renders webfonts using the FOUT (Flash of Unstyled Text) method that exposes text with default fonts applied until webfont download completes.</p>\n<p>Therefore, Lighthouse recommended using the FOUT method where users can check page content regardless of whether webfont download completes.</p>\n<h2 id=\"actions\" style=\"position:relative;\">Actions<a href=\"#actions\" aria-label=\"actions permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"image-lazy-loading\" style=\"position:relative;\">Image Lazy Loading<a href=\"#image-lazy-loading\" aria-label=\"image lazy loading permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Image lazy loading can be simply implemented using HTML5’s <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\" target=\"_blank\" rel=\"nofollow\">IntersectionObserver</a>. But one thing I worried about was “If I do lazy loading, won’t Google’s Search Engine Bot fail to scrape images?”</p>\n<p>So I did a bit of research to see how other people think about this. There were several methods like using <code class=\"language-text\">&lt;noscript></code> tags, making image sitemaps using XML, and some said Google’s Search Engine Bot indexes all images loaded using lazy loading anyway, so you don’t need to worry.</p>\n<p>So I discussed this problem with the PO (Product Owner). As a result, since images on the Find a Pro page are only user profile images anyway, and these images were judged to have no major SEO impact whether indexed or not, we decided to just apply lazy loading without separate measures.</p>\n<p>Since Soomgo frontend uses Vue, I implemented image lazy loading functionality using Vue’s <code class=\"language-text\">Directive</code> and HTML5’s <code class=\"language-text\">IntersectionObserver</code> API. First, inside the component rendering user profile images, since it’s rendering user profiles using CSS’s <code class=\"language-text\">background-image</code> property rather than <code class=\"language-text\">img</code> tags, the interface of this directive I envisioned was roughly like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>test<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-lazy-background-image</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- After directive binding --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n  <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>test<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">v-lazy-background-image</span>\n  <span class=\"token attr-name\">data-lazy-background-image</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Let's remove image URL from styles and store image URL here<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.test</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>https://assets.soomgo.com/user/example.jpeg<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* After directive binding */</span>\n<span class=\"token selector\">.test</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>When there’s an element like this, the <code class=\"language-text\">lazy-background-image</code> directive accesses the bound element’s <code class=\"language-text\">style</code> property, and if there’s a <code class=\"language-text\">background-image</code> property, it seemed like it could store that URL in a separate property then lazy load that image when the element enters the viewport.</p>\n<p>If envisioned up to here, just implement the Observer simply. But there’s one thing you mustn’t overlook - many browsers don’t yet support the <code class=\"language-text\">IntersectionObserver</code> API. Therefore, you must handle exceptions for these browsers. For support status of the <code class=\"language-text\">IntersectionObserver</code> API, refer to <a href=\"https://caniuse.com/#feat=intersectionobserver\" target=\"_blank\" rel=\"nofollow\">Can I Use IntersectionObserver</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> isSupportIntersectionObserver <span class=\"token operator\">=</span> <span class=\"token string\">'IntersectionObserver'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> intersectionObserver<span class=\"token operator\">:</span> IntersectionObserver<span class=\"token operator\">|</span><span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> isSupportIntersectionObserver\n  <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>entries<span class=\"token operator\">:</span> IntersectionObserverEntry<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> observer<span class=\"token operator\">:</span> IntersectionObserver<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>entry <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> imageURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-lazy-background-image'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>imageURL<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundImage <span class=\"token operator\">=</span> imageURL<span class=\"token punctuation\">;</span>\n        observer<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">IntersectionObserver</code>’s <code class=\"language-text\">constructor</code> receives as an argument a callback function the Observer will call when actions occur like elements entering or leaving the viewport. In the past, similar actions were handled with scroll events, but since events respond synchronously, they affect main thread responsiveness - simply put, performance.</p>\n<p>Since scroll events are called so frequently, you can see problems like screens stuttering if you do just a bit more processing in scroll event handlers. <small>(Using the <code class=\"language-text\">passive</code> option among event options can defend against this phenomenon to some extent.)</small></p>\n<p>But since Observers operate asynchronously, they execute independently from the main thread’s processing stack. It would be really nice if just the browser support rate being under 90% could be solved…</p>\n<p>Now that I’ve implemented the Observer, I just need to whip up the directive.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Vue <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-property-decorator'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VNode<span class=\"token punctuation\">,</span> VNodeDirective <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">directive</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lazy-background-image'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">bind</span> <span class=\"token punctuation\">(</span>el<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> binding<span class=\"token operator\">:</span> VNodeDirective<span class=\"token punctuation\">,</span> vnode<span class=\"token operator\">:</span> VNode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSupportIntersectionObserver<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundImage<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      el<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-lazy-background-image'</span><span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundImage <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      intersectionObserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">unbind</span> <span class=\"token punctuation\">(</span>el<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSupportIntersectionObserver<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      intersectionObserver<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As a result of lazy loading images using directives like this, I could drastically reduce the number of initially requested images from 60 to 39.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b33633acabe6a266e9450fbc6f66f3e7/1fbe8/lazy_load_before.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 3.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARUlEQVR42h2LwQnAMAwDO01b6ARx7MiOU+j+C6k4j0Nw6A6D0wbYmjBy0WcSHtshJrvqdsWoL8BqRISPLp728daXV60kf2FFIkf4fCJ0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lazy_load_before\" title=\"\" src=\"/static/b33633acabe6a266e9450fbc6f66f3e7/6af66/lazy_load_before.png\" srcset=\"/static/b33633acabe6a266e9450fbc6f66f3e7/69538/lazy_load_before.png 160w,\n/static/b33633acabe6a266e9450fbc6f66f3e7/72799/lazy_load_before.png 320w,\n/static/b33633acabe6a266e9450fbc6f66f3e7/6af66/lazy_load_before.png 640w,\n/static/b33633acabe6a266e9450fbc6f66f3e7/1fbe8/lazy_load_before.png 757w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9679061b1081b27be82c72d16f8d1807/cab8c/lazy_load_after.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 3.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVR42j3Ixw2AMBTAUKaBjED5NQll/4VMxIGDZelNZoFHcoiS2Wj9RM2/zAMZz9qIrL/78HUXZntY9KJIp+hN2YIXZGEiTJmDtyMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lazy_load_after\" title=\"\" src=\"/static/9679061b1081b27be82c72d16f8d1807/6af66/lazy_load_after.png\" srcset=\"/static/9679061b1081b27be82c72d16f8d1807/69538/lazy_load_after.png 160w,\n/static/9679061b1081b27be82c72d16f8d1807/72799/lazy_load_after.png 320w,\n/static/9679061b1081b27be82c72d16f8d1807/6af66/lazy_load_after.png 640w,\n/static/9679061b1081b27be82c72d16f8d1807/cab8c/lazy_load_after.png 744w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<h3 id=\"component-lazy-loading\" style=\"position:relative;\">Component Lazy Loading<a href=\"#component-lazy-loading\" aria-label=\"component lazy loading permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Soomgo frontend does SSR for the first request for SEO, but otherwise operates the same way as typical SPAs. Therefore, when the application first initializes, it receives all JavaScript and CSS to be used within the application.</p>\n<p>This method isn’t really a problem when the application is small, but as the application grows, bundle capacity also increases proportionally, so it inevitably becomes burdensome. So I changed it to asynchronously load and use only code used on that page using Dynamic Import, a feature Webpack provides.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token comment\">// Sync</span>\n<span class=\"token keyword\">import</span> SearchPro <span class=\"token keyword\">from</span> <span class=\"token string\">'@/pages/Search/SearchPro'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Async</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SearchPro</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"search\" */</span> <span class=\"token string\">'src/pages/Search/SearchPro'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Using the <code class=\"language-text\">webpackChunkName</code> comment, you can bundle certain units of modules into one chunk. Since Soomgo currently uses HTTP/1.1 protocol, the number of resources that can be requested at once is limited to about 6. <small>(This number differs slightly depending on browser policy)</small></p>\n<p>If the number of chunks gets too large, loading speed can actually slow down, so I bundled related modules together and adjusted so the number of chunks doesn’t get too large.</p>\n<p>Up to here was honestly not that difficult and went smoothly, but problems occurred with <code class=\"language-text\">mini-css-extract-plugin</code> used to separate CSS into separate bundles. Due to how this plugin processes CSS modules loaded with Dynamic import, a <code class=\"language-text\">ReferenceError: document is not defined</code> reference error occurred in the SSR cycle.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> linkTag <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"link\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError: document is not defined</span>\nlinkTag<span class=\"token punctuation\">.</span>rel <span class=\"token operator\">=</span> <span class=\"token string\">\"stylesheet\"</span><span class=\"token punctuation\">;</span>\nlinkTag<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"text/css\"</span><span class=\"token punctuation\">;</span>\nlinkTag<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> resolve<span class=\"token punctuation\">;</span>\nlinkTag<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> fullhref<span class=\"token punctuation\">;</span>\nhead<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>linkTag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The original code is huge, but simply distilling it, here’s where the problem occurred. Since the SSR cycle executes in a NodeJS process, naturally there’s no document or anything, so a reference error occurred.</p>\n<p>Fortunately, build configuration is managed separately as <code class=\"language-text\">client.config</code> and <code class=\"language-text\">server.config</code>, so I could take appropriate measures. Since the client-side rendering cycle has no problems, I just needed to fix it only when Express compiles Vue on the initial request.</p>\n<p>Sure enough, developers from around the world who had done the same grunt work as me on StackOverflow had already reached some conclusions through heated discussions about <a href=\"https://github.com/webpack-contrib/mini-css-extract-plugin/issues/90\" target=\"_blank\" rel=\"nofollow\">mini-css-extract-plugin’s SSR-related issue</a>. We are the world.</p>\n<p>Various methods were discussed, but I chose the method of using <code class=\"language-text\">css-loader</code>’s <code class=\"language-text\">exportOnlyLocals</code> option. The issue says to use <code class=\"language-text\">css-loader/locals</code>, but since css-loader was updated after this issue was discussed, you now need to use an options object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>baseConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'css-loader'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">exportOnlyLocals</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'postcss-loader'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'sass-loader'</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I solved the problem like this, but first since this technology’s stability was judged not sufficiently confirmed within the frontend chapter, I’m currently only lazy loading components related to the original target Find a Pro page. If stability is verified in the future, I plan to gradually expand coverage and apply it.</p>\n<h3 id=\"apply-gzip-compression-for-text-content\" style=\"position:relative;\">Apply gzip Compression for Text Content<a href=\"#apply-gzip-compression-for-text-content\" aria-label=\"apply gzip compression for text content permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>This just requires adding gzip-related settings to Nginx configuration.</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\"># ...</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip</span> <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_disable</span> <span class=\"token string\">\"msie6\"</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_proxied</span> any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_comp_level</span> <span class=\"token number\">6</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_buffers</span> <span class=\"token number\">16</span> <span class=\"token number\">8k</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_http_version</span> 1.1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_types</span> text/plain text/css application/json application/javascript text/xml application/xml text/javascript</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Actually Soomgo doesn’t support IE6, but I added it just in case, thinking seeing a broken page is better than not being able to see the page at all. After finishing component lazy loading and applying gzip compression for text content, I checked bundle size and loading speed once.</p>\n<h3 id=\"js\" style=\"position:relative;\">JS<a href=\"#js\" aria-label=\"js permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Before</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/446d2f429821f64174ce24370cbc4073/97655/js_before.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 11.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAe0lEQVR42h2MSQ6DMBRDOUyULDKhkpA5IEq7oPT+x3F/s7CsZ1lvuq4PcqmoraFvO1rfiQvWNSDlgseyYKPd+xWZ2Dk//lprWGsHx5gQQhw93fcXpXYc54vyxvE8h9TOM4wxkFLCk1yRwHk/RP+dMQbOOYQQCClBKT36B/UcQYQJiowhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"js before\" title=\"\" src=\"/static/446d2f429821f64174ce24370cbc4073/6af66/js_before.png\" srcset=\"/static/446d2f429821f64174ce24370cbc4073/69538/js_before.png 160w,\n/static/446d2f429821f64174ce24370cbc4073/72799/js_before.png 320w,\n/static/446d2f429821f64174ce24370cbc4073/6af66/js_before.png 640w,\n/static/446d2f429821f64174ce24370cbc4073/97655/js_before.png 819w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>After</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/304a1bba295c3ca47857b488eeb5e320/98314/js_after.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 14.375000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVR42k2O2xKDIAxE/Rh1xspFBaqCYGu9Tv//e7YxT33YSUg2Z8m6roMhWWthnYMxBm3bIqaZ6xQT+mHAMHp0tPPew1OvtWbvSO//ms3vBft5YTtO1rLuZG7gXI+yLBEIKJWigwDdNDDWoaoq5HnOeyEkhwshODyL6YV1O0kHjuuLDwGlVHDPHkVREDBCSMk/vMH33IeJA5TSeNQ1wpQYeHt+Silh6J36HtcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"js after\" title=\"\" src=\"/static/304a1bba295c3ca47857b488eeb5e320/6af66/js_after.png\" srcset=\"/static/304a1bba295c3ca47857b488eeb5e320/69538/js_after.png 160w,\n/static/304a1bba295c3ca47857b488eeb5e320/72799/js_after.png 320w,\n/static/304a1bba295c3ca47857b488eeb5e320/6af66/js_after.png 640w,\n/static/304a1bba295c3ca47857b488eeb5e320/98314/js_after.png 817w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"css\" style=\"position:relative;\">CSS<a href=\"#css\" aria-label=\"css permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Before\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0d95259dcfc5faeb6f9d49528cec626a/7e509/css_before.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 10.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgUlEQVR42h2NQQ6DMAwE+QsgVCSSkjgE0kKoKPRI//+ZqenBWh9md4q8vvBecM7pefreYYyh6zqmlIhxREJgyRkRIT2ef3ZesvY81hrCMCgXEd0pzvPLnFfe+4dtP7gExlqqssRLoG1bLd2J48RN/025QSVex+u6pmkazYpeJZfsB3TsQMdFJuj8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"css before\" title=\"\" src=\"/static/0d95259dcfc5faeb6f9d49528cec626a/6af66/css_before.png\" srcset=\"/static/0d95259dcfc5faeb6f9d49528cec626a/69538/css_before.png 160w,\n/static/0d95259dcfc5faeb6f9d49528cec626a/72799/css_before.png 320w,\n/static/0d95259dcfc5faeb6f9d49528cec626a/6af66/css_before.png 640w,\n/static/0d95259dcfc5faeb6f9d49528cec626a/7e509/css_before.png 745w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p>After\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c6bb77b3c748d7b4195f941433773374/ef916/css_after.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVR42h2NSw6DIABEvYytCSDWFEHA+jdd9OP9L/NKWcxiknnzitf7wzCMPMYpx7keJSXGdIQYaduWaV5TN8zLSt97fIgIIVBK0VmL9yFzPgSK73kyLRv78WRL8WHgUpbUtaZpbhn8j0WSLOuOsS6dOO5JqLWmqq7pMCKlyqIfAepCJR87pa8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"css after\" title=\"\" src=\"/static/c6bb77b3c748d7b4195f941433773374/6af66/css_after.png\" srcset=\"/static/c6bb77b3c748d7b4195f941433773374/69538/css_after.png 160w,\n/static/c6bb77b3c748d7b4195f941433773374/72799/css_after.png 320w,\n/static/c6bb77b3c748d7b4195f941433773374/6af66/css_after.png 640w,\n/static/c6bb77b3c748d7b4195f941433773374/ef916/css_after.png 815w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p>That crazy <code class=\"language-text\">1.2MB</code> sized bundle at the very top of JS before is the vendor bundling <code class=\"language-text\">node_modules</code> libraries. My heart always ached and tears came whenever I saw this guy, so I wondered why I dragged this out when it could end this simply.</p>\n<h4 id=\"changed-pages-needing-seo-to-render-pages-immediately-without-waiting-for-authentication-process\" style=\"position:relative;\">Changed Pages Needing SEO to Render Pages Immediately Without Waiting for Authentication Process<a href=\"#changed-pages-needing-seo-to-render-pages-immediately-without-waiting-for-authentication-process\" aria-label=\"changed pages needing seo to render pages immediately without waiting for authentication process permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Actually this relates to Soomgo’s technical debt. The API receiving currently logged-in user information is incredibly slow. Usually response time is about 1.5 seconds, and during traffic peak times it approaches 2 seconds. This is deep technical debt also related to DB schema, so it’s a bit difficult to solve in a short time.</p>\n<p>Even so, it’s too wasteful that users have to wait 2 seconds to see the screen due to external network factors. But let’s think about it.</p>\n<blockquote>\n<p>Pages needing SEO are pages non-logged-in users can definitely access.</p>\n</blockquote>\n<p>Huh? Actually it’s such an obvious fact but I was missing it. Then this stream of consciousness arises:</p>\n<hr>\n<ol>\n<li>The goal was to shorten loading time of pages where SEO is important.</li>\n<li>Pages being SEO’d are pages non-logged-in users can access anyway.</li>\n<li>No need to wait for auth API…?</li>\n</ol>\n<hr>\n<p>Then just</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ...</span>\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isAllowGuestPage</span><span class=\"token punctuation\">(</span>router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Just fire it off like this. I changed it to check router permission and execute the next initialization logic without waiting for <code class=\"language-text\">init</code>’s promise for pages non-member users can access. As a result, I could confirm loading speed of non-member accessible pages became about 1 second faster.</p>\n<table>\n<thead>\n<tr>\n<th>Before</th>\n<th>After</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2513.9ms</td>\n<td>1111.5ms</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"results\" style=\"position:relative;\">Results<a href=\"#results\" aria-label=\"results permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Working hard on this and that, it did get a bit faster.</p>\n<p>Before\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/d30ee/result_before.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrElEQVR42pVSXY/TMBDM//9DPPEEh073gITUcgIdrURDmu/UcRLHn8Ouc4U2FXfHSCtvEnsm450EzzDB4W78gYdpv7wYaa0+Lr38Rv2H2H4an3A/7mJfFiXyPMclknNjrcWm2OF7fYCzHm2xR5s9YlIGXbZFk24QPLATx1iMNE1xOBwQQrgl9N7DzgZWGzjnMM8aip6NMXHl4j2OhL118UxRFLH4/Q3hDUhVDwPUJKEngX4cIJTE6XTCS0he+hhIOYRFnU156i//hq1e2n2VkKGDxVZl2Kg0Du41/JMwYFHOjcA7scH7/hGZOV19+2/LjEnP+Nzv8UX+hPFv/EOe6vouzujaDsdfGXIqsRrI+UQlgKZfxBJHl5zlR8xKxSwy+do6izlQrJyNe7iegxBxtw14+MpingjpQD0KNHWDtm0xTdOf6XFZEpB6QjNLlGWJuq4hpYzT/jvlgMHMMQWRsJQtEdYYx/HGMjsYjEKvBKqqQtd10Fpfxcf7QGf7GLGEdNANPXohojqTsqXznXoOOFn1moJNe4ZhWa+uhvZ4NXBwl6Gw4rrWQwp4G34DwP5Io3v8J0IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result before\" title=\"\" src=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/6af66/result_before.png\" srcset=\"/static/43dfafa71e415d44ece6e7d72b2e6cdf/69538/result_before.png 160w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/72799/result_before.png 320w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/6af66/result_before.png 640w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/d9199/result_before.png 960w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/d30ee/result_before.png 980w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p>After\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/df18d626e5c0332c33645fbe4842674f/91b29/result_after.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o1TyW7bQAz1/39QT70EOaTooSgSoE7cIrDhWHJkaxvNvr1yBlKg2EpaAoTIEfn4OOSsMJOdOeOXPCCSHR1H7J/IIM8Jsh+B4HF0DL/VEZ6iBBeo63oOgdXc+Sn3uBmeEJJD4KhuCcQiij1idQN4hXsqeMs20HBgXY+yLKlmvAaMIaI8vWJfFTDaoKlPeC13EFKjOZU4HXd0bjEogaKtck5RFNhut7DWLjNMoDGEXDGQOmNgSZ01UASmncnFUkwSxlhuOYz+FWAGndleCkjB4fQASfc1WIm+7+FnAJeywn+Iii5riPF9cfLjxdmHgFOY9AZ3wx98ae9RWTb+i58zXKo0JbGg8E0+4+uwxsG2i4ApdbqFf7asuMS6eMaPwwZd1721+iHD9LOhSWma5pIYmnAaiBokhBBXzJJsXoDva3oI0WNFS4KG92A0va7v8ipMVzCp9hbc6wyYWCZ13o9MIw7niIctp+mPgC2tRX0+ZzBPgZeT5EahNhxt26JpGpiFboTT8DGMgGqgtpu8pFPwnGECVJLnoikm7aLW+i0uLbbtWlp4YphISyXBOc+B6auUesc0A1NSOnPO5acWLpfb+XypfwGA+EehSp4aMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result after\" title=\"\" src=\"/static/df18d626e5c0332c33645fbe4842674f/6af66/result_after.png\" srcset=\"/static/df18d626e5c0332c33645fbe4842674f/69538/result_after.png 160w,\n/static/df18d626e5c0332c33645fbe4842674f/72799/result_after.png 320w,\n/static/df18d626e5c0332c33645fbe4842674f/6af66/result_after.png 640w,\n/static/df18d626e5c0332c33645fbe4842674f/d9199/result_after.png 960w,\n/static/df18d626e5c0332c33645fbe4842674f/91b29/result_after.png 983w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p>I achieved the original goal of dropping FMP below 1 second, but I didn’t know other numbers wouldn’t be affected this much. Performance score also only went up a measly 2 points. Other team members said “Still, 2 points is something~” but something feels unsettled in one corner of my heart…</p>\n<p>Next time I should set a goal of raising other scores a bit more. Setting up PWA might raise the Accessibility score a bit more, but other issues I’m thinking of require backend developers’ help quite a bit, so it seems difficult alone.</p>\n<p>That’s all for this post on client-side rendering optimization.</p>","fields":{"slug":"20190603-client-render-optimizing-en","path":"/2019/06/03/client-render-optimizing/en/","lang":"en"},"frontmatter":{"title":"Client-Side Rendering Optimization","subTitle":"Rendering Optimization Strategies to Improve SEO and User Experience","date":"Jun 03, 2019","categories":["Programming","Web"],"tags":["SEO","Render Optimization","Render Optimizing","JavaScript","FMP","First Meaningful Paint","Google SEO","Frontend"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/d803c/result_before.png","srcSet":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/d803c/result_before.png 320w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/2a1fd/result_before.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/fc5c5/result_before.webp 320w,\n/static/43dfafa71e415d44ece6e7d72b2e6cdf/e9225/result_before.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/01fb2/result_before.png","srcSet":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/01fb2/result_before.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/43dfafa71e415d44ece6e7d72b2e6cdf/b384d/result_before.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"880d2316-a0f3-55ff-a3b0-1ab7ba9516ff","tableOfContents":"<ul>\n<li>\n<p><a href=\"#loss-varies-depending-on-neuron-connections\">Loss Varies Depending on Neuron Connections</a></p>\n<ul>\n<li><a href=\"#when-neurons-output-affects-only-a-specific-error\">When Neuron’s Output Affects Only a Specific Error</a></li>\n<li><a href=\"#when-neurons-output-affects-multiple-errors\">When Neuron’s Output Affects Multiple Errors</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#writing-pseudocode\">Writing Pseudocode</a></p>\n<ul>\n<li><a href=\"#neuron\">Neuron</a></li>\n<li><a href=\"#layer\">Layer</a></li>\n<li><a href=\"#network\">Network</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#wrapping-up\">Wrapping Up</a></p>\n</li>\n</ul>","excerpt":"In this post, following the previous post, I want to briefly organize what I built - a simple artificial neural network using TypeScript. I wrote this application for a Tech seminar presentation at my current workplace, so development time was quite tight. Therefore, I couldn’t implement all the features I had in mind and plan to add more features later.","html":"<p>In this post, following <a href=\"/2018/07/19/deep-learning-backpropagation/\">the previous post</a>, I want to briefly organize what I built - a simple artificial neural network using TypeScript.</p>\n<p>I wrote this application for a Tech seminar presentation at my current workplace, so development time was quite tight. Therefore, I couldn’t implement all the features I had in mind and plan to add more features later.</p>\n<!-- more -->\n<p>Since I had experience writing a completely hardcoded ANN using JavaScript before, I thought about recycling <a href=\"https://github.com/evan-moon/simple-ann/commit/82a1f3777de7b48a5cca1f777862620fc3159998\" target=\"_blank\" rel=\"nofollow\">that code</a>.</p>\n<p>But when I actually tore it apart, there weren’t really any parts I could recycle, so I just decided to write it from scratch again. Before entering development, the design and features I abstractly envisioned were as follows:</p>\n<hr>\n<ol>\n<li>No more hardcoding! Let’s do structural design.</li>\n<li>The number of layers and nodes per layer should be freely changeable.</li>\n<li>It would be nice to visualize the process of loss decreasing and changes in weights!</li>\n<li>Let’s enable changing application inputs and initial weight values directly within the application!</li>\n</ol>\n<hr>\n<p>Among these, I couldn’t do #4 due to time shortage since I had to make seminar PPT too, but I somehow succeeded in implementing #1-3 within time.</p>\n<h2 id=\"loss-varies-depending-on-neuron-connections\" style=\"position:relative;\">Loss Varies Depending on Neuron Connections<a href=\"#loss-varies-depending-on-neuron-connections\" aria-label=\"loss varies depending on neuron connections permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>First, I had to think about how to implement the feature of updating weights, which is ANN’s core function. Actually, when proceeding with forward propagation, most values needed during backpropagation can be pre-calculated. First, I’m going to proceed with explanation by bringing the example I used in the <a href=\"/2018/07/19/deep-learning-backpropagation/\">previous post</a>.</p>\n<p>First, the formula for updating weights in backpropagation is as follows:</p>\n<hr>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial w} = \\frac{\\partial E}{\\partial a} \\frac{\\partial a}{\\partial z} \\frac{\\partial z}{\\partial w} \\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.3574em;vertical-align:-0.9287em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4287em;\"><span style=\"top:-3.4287em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">a</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9287em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<ol>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: Contribution of neuron’s output (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span>) affecting error (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>)</p>\n</li>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial a}{\\partial z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: Contribution of input (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>) and weight (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>) product (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>) affecting neuron’s output (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span>)</p>\n</li>\n<li>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>w</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial z}{\\partial w}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>: Contribution of weight (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span>) affecting input x weight (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span>)</p>\n</li>\n</ol>\n<hr>\n<p>Actually, when updating a neuron’s weight, formulas #2 and #3 don’t change. What changes is only #1, the contribution of the neuron’s output affecting error. More precisely, only the method of calculating contribution changes depending on situation. Let’s look at the following 2 cases.</p>\n<h3 id=\"when-neurons-output-affects-only-a-specific-error\" style=\"position:relative;\">When Neuron’s Output Affects Only a Specific Error<a href=\"#when-neurons-output-affects-only-a-specific-error\" aria-label=\"when neurons output affects only a specific error permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVR42pVSCQ4DIQj0/5+t94EiBayp3WyTlmTCco0ca+iLDESKMdKcU7FFvnPO1Hu/rTONg1CKGr01GgIhS4VKBcqlEU4kSIlwDEq5sq+ybkq6Hpuc2xRGuhBIUHRiFH7AOUfWWgohqB1Z11rJe08P9lvr1D/4EQCgzWOESJynIHcoSRITAHRC7nxy3rJXDI+6MRaPOYn2rs6dbdtzx8Ckd/kfO7xb7PUIAmToNNy9TCC26HMqxPk7oQhAI+vCgo86+nzlhJgVfxFKF4mvLQdKKeqR9o5zTvo7fSW84r181OXja/RrzRO/iMY4JHe9LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"backprop2\" title=\"\" src=\"/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png\" srcset=\"/static/f76f6ac675286dabaa82d611f27f87c9/69538/backprop2.png 160w,\n/static/f76f6ac675286dabaa82d611f27f87c9/72799/backprop2.png 320w,\n/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png 640w,\n/static/f76f6ac675286dabaa82d611f27f87c9/d9199/backprop2.png 960w,\n/static/f76f6ac675286dabaa82d611f27f87c9/21b4d/backprop2.png 1280w,\n/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Assuming we calculate final error as MSE (Mean Squared Error) in this network, error can be represented as follows:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mn>2</mn></msub><mo>−</mo><msub><mi>a</mi><mn>21</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>+</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\nE_1 = (target_1 - a_{20})^2 \\\\\n\\\\\nE_2 = (target_2 -a_{21})^2 \\\\\n\\\\\nE = \\frac{1}{2}(E_1 + E_2)\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:8.3557em;vertical-align:-3.9278em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.4278em;\"><span style=\"top:-6.8852em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-5.3852em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.8611em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-2.3611em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"></span></span><span style=\"top:-0.3796em;\"><span class=\"pstrut\" style=\"height:3.3214em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.9278em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>As you can see in the above formula, while <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>20</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{20}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> can affect <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, it absolutely cannot affect <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>. That variable itself isn’t in the formula at all. Therefore, when calculating <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>, we can completely consider all errors except <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> as <code class=\"language-text\">0</code> and calculate.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><msub><mi>a</mi><mn>20</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial a_{20}} = -(t_1 - a_{20})\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<h3 id=\"when-neurons-output-affects-multiple-errors\" style=\"position:relative;\">When Neuron’s Output Affects Multiple Errors<a href=\"#when-neurons-output-affects-multiple-errors\" aria-label=\"when neurons output affects multiple errors permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVR42pVSCQ4DIQj0/5+t94EiBayp3WyTlmTCco0ca+iLDESKMdKcU7FFvnPO1Hu/rTONg1CKGr01GgIhS4VKBcqlEU4kSIlwDEq5sq+ybkq6Hpuc2xRGuhBIUHRiFH7AOUfWWgohqB1Z11rJe08P9lvr1D/4EQCgzWOESJynIHcoSRITAHRC7nxy3rJXDI+6MRaPOYn2rs6dbdtzx8Ckd/kfO7xb7PUIAmToNNy9TCC26HMqxPk7oQhAI+vCgo86+nzlhJgVfxFKF4mvLQdKKeqR9o5zTvo7fSW84r181OXja/RrzRO/iMY4JHe9LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"backprop2\" title=\"\" src=\"/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png\" srcset=\"/static/f76f6ac675286dabaa82d611f27f87c9/69538/backprop2.png 160w,\n/static/f76f6ac675286dabaa82d611f27f87c9/72799/backprop2.png 320w,\n/static/f76f6ac675286dabaa82d611f27f87c9/6af66/backprop2.png 640w,\n/static/f76f6ac675286dabaa82d611f27f87c9/d9199/backprop2.png 960w,\n/static/f76f6ac675286dabaa82d611f27f87c9/21b4d/backprop2.png 1280w,\n/static/f76f6ac675286dabaa82d611f27f87c9/26162/backprop2.png 2020w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Let’s look at layers once more. This time we need to find out how much <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, which is more inside, affected total error <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span>.</p>\n<p>Just looking at the connected lines, you can see this guy is spreading legs everywhere. Not only neurons that used <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> as input, but neurons that used output sent by these neurons and many things must have been affected. So this time we can’t do things like ignoring other variables like before. We need to calculate everything.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E}{\\partial a_{10}} = \\frac{\\partial E_1}{\\partial a_{10}} + \\frac{\\partial E_2}{\\partial a_{10}}\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.5074em;vertical-align:-1.0037em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5037em;\"><span style=\"top:-3.5037em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0037em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>Here, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3252em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> means error propagated from the last layer to just behind the layer where the neuron that sent out <code class=\"language-text\">a_10</code> as output belongs.</p>\n<p>And <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> that compose this error are obtained like this:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>20</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow></mfrac><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>z</mi><mn>21</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\n\\frac{\\partial E_1}{\\partial a_{10}} = \\frac{\\partial E_1}{\\partial a_{20}} \\frac{\\partial a_{20}}{\\partial z_{20}} \\frac{\\partial z_{20}}{\\partial a_{10}}\\\\\n\\\\\n\\frac{\\partial E_2}{\\partial a_{10}} = \\frac{\\partial E_2}{\\partial a_{21}} \\frac{\\partial a_{21}}{\\partial z_{21}} \\frac{\\partial z_{21}}{\\partial a_{10}}\\\\\n\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.5149em;vertical-align:-3.0074em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.5074em;\"><span style=\"top:-5.5074em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.5314em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:3.3714em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.0074em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>Since <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>20</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{20}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">20</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>21</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_2}{\\partial a_{21}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> that appeared in this formula are the same case as #1 seen above, calculating like #1 should work. There was one part I was confused about when implementing this formula in code.</p>\n<p>Let’s look at the formula obtaining <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>a</mi><mn>10</mn></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E_1}{\\partial a_{10}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3413em;vertical-align:-0.4451em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8962em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4451em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>. There are 2 variables the neuron doesn’t have.</p>\n<hr>\n<ol>\n<li><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">E_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: Loss propagated from <strong>rear</strong> layer</li>\n<li><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: Output of <strong>front</strong> layer neuron</li>\n</ol>\n<hr>\n<p>So at first I thought</p>\n<blockquote>\n<p>What, do I need to access both front and back layers when iterating to get them? Need to do exception handling twice too, annoying…</p>\n</blockquote>\n<p>But…</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f24e1eda80a07a2ee4b1996f83434927/232db/hi.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAGdUwVWII//xAAbEAEBAAEFAAAAAAAAAAAAAAABAAIDERMiMf/aAAgBAQABBQLkjPqajeA2w3//xAAWEQADAAAAAAAAAAAAAAAAAAABAhD/2gAIAQMBAT8BUT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAEAAwEAAAAAAAAAAAAAAAAAARAhYf/aAAgBAQAGPwJ1qb//xAAZEAADAQEBAAAAAAAAAAAAAAAAASERQWH/2gAIAQEAAT8h34oRZPSKI0VS7BiSpI2uH//aAAwDAQACAAMAAAAQ5B//xAAWEQEBAQAAAAAAAAAAAAAAAAABACH/2gAIAQMBAT8QBNlv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EFbb/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFB8JH/2gAIAQEAAT8QUXKEtD64oTUW2y/bCATt2GRcVQrvKYlmik+xJZKNuf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hi\" title=\"\" src=\"/static/f24e1eda80a07a2ee4b1996f83434927/c08c5/hi.jpg\" srcset=\"/static/f24e1eda80a07a2ee4b1996f83434927/0913d/hi.jpg 160w,\n/static/f24e1eda80a07a2ee4b1996f83434927/cb69c/hi.jpg 320w,\n/static/f24e1eda80a07a2ee4b1996f83434927/c08c5/hi.jpg 640w,\n/static/f24e1eda80a07a2ee4b1996f83434927/232db/hi.jpg 819w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<blockquote>\n<p>Yeah, thinking about it, this value was just the input this neuron receives.</p>\n</blockquote>\n<p>It was an awesome fact I was missing because I kept focusing only on variables. After 3 seconds of silence for my lacking brain, I moved to the next step.</p>\n<h2 id=\"writing-pseudocode\" style=\"position:relative;\">Writing Pseudocode<a href=\"#writing-pseudocode\" aria-label=\"writing pseudocode permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>After thinking up to here, I first wrote brief pseudocode. Originally I wrote it scribbling in a notebook, but here I’ll write it in TypeScript syntax for Syntax Highlighting.</p>\n<p>I envisioned 3 basic classes total: <code class=\"language-text\">Network</code>, <code class=\"language-text\">Layer</code>, <code class=\"language-text\">Neuron</code>. I thought a lot about how to implement just forward propagation and backpropagation, so I only wrote pseudocode related to backpropagation.</p>\n<h3 id=\"neuron\" style=\"position:relative;\">Neuron<a href=\"#neuron\" aria-label=\"neuron permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In the <code class=\"language-text\">Neuron</code> class, when backpropagation proceeds, it should update weights the <code class=\"language-text\">Neuron</code> object has, and at this time use <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>z</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial a}{\\partial z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> pre-calculated during forward propagation to also calculate <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>E</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>a</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial E}{\\partial a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>, the contribution of the neuron’s output affecting propagated error.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Neuron</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> activationFunction미분값<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> weights<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Neuron's weights</span>\n  <span class=\"token keyword\">private</span> weight미분값들<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Contributions of neuron's inputs affecting total error</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">weight들업데이트</span> <span class=\"token punctuation\">(</span>에러미분꼴<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> 새로운weight들 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weights<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>weight<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// Obtain contribution of wx value affecting error</span>\n      <span class=\"token keyword\">const</span> loss <span class=\"token operator\">=</span> 에러미분꼴 <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activationFunction미분꼴<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// weight is the same as contribution of x affecting wx value.</span>\n      <span class=\"token comment\">// Multiplying with loss gives contribution of x affecting error.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weight미분값들<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> loss <span class=\"token operator\">*</span> weight<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// x is the same as contribution of weight affecting wx value.</span>\n      <span class=\"token comment\">// Multiplying with loss gives contribution of w affecting error.</span>\n      <span class=\"token keyword\">return</span> weight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>학습속도 <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>loss <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputs<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>weights <span class=\"token operator\">=</span> 새로운weight들<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"layer\" style=\"position:relative;\">Layer<a href=\"#layer\" aria-label=\"layer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The <code class=\"language-text\">Layer</code> class runs iterations during backpropagation and calls methods of neurons it has.</p>\n<p>At this time, if it’s the last layer, it uses MSE’s derivative <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mi>i</mi></msub><mo>−</mo><mi>o</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><msub><mi>t</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">-(target_i - output_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">tp</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>. If not the last layer, when updating the <code class=\"language-text\">weights</code> array of neurons in the next layer, it takes necessary elements from the pre-calculated <code class=\"language-text\">weights미분값들</code> array, adds them all, then passes them to neurons in the current layer.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Layer</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> 다음레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> 뉴런들<span class=\"token operator\">:</span> Neuron<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">뉴런들업데이트</span> <span class=\"token punctuation\">(</span>전파된에러들<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>다음레이어<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Since it's not the last layer, among passed errors</span>\n      <span class=\"token comment\">// must specify index of weight calculated together with this neuron's output.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>뉴런<span class=\"token punctuation\">,</span> index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> loss <span class=\"token operator\">=</span> 전파된에러들<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span>_b<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        neuron<span class=\"token punctuation\">.</span><span class=\"token function\">updateWeights</span><span class=\"token punctuation\">(</span>loss<span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// If last layer, only need to pass contribution to error each neuron affected.</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>뉴런<span class=\"token punctuation\">,</span> index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        neuron<span class=\"token punctuation\">.</span><span class=\"token function\">updateWeights</span><span class=\"token punctuation\">(</span>loss<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Looking at the method, if the layer to currently update isn’t the last layer, error’s data type changes from <code class=\"language-text\">number[]</code> to <code class=\"language-text\">number[][]</code>. The reason is because having the <code class=\"language-text\">index</code> value weights have inside neurons makes calculation convenient.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>wp_0_0<span class=\"token punctuation\">,</span> wp_0_1<span class=\"token punctuation\">,</span> wp_0_2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>wp_1_0<span class=\"token punctuation\">,</span> wp_1_1<span class=\"token punctuation\">,</span> wp_1_2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The next layer’s error is returned in this 2D array form. At this time, if trying to update weights of the neuron at index 0 of the layer, we must extract only errors connected with this neuron from the next layer’s errors.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9044c4f4404075cb83f313c1257b3cd2/d8d7f/model_marked.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 93.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3pYUFAB//8QAGBAAAgMAAAAAAAAAAAAAAAAAABARIDH/2gAIAQEAAQUCJeV//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIFH/2gAIAQEAAT8huF5rlEmIJrx//9oADAMBAAIAAwAAABBUxwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFBUWH/2gAIAQEAAT8Q7KiYgbPqNuChpxEiiZIE1rXjJ+8PH//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"model marked\" title=\"\" src=\"/static/9044c4f4404075cb83f313c1257b3cd2/c08c5/model_marked.jpg\" srcset=\"/static/9044c4f4404075cb83f313c1257b3cd2/0913d/model_marked.jpg 160w,\n/static/9044c4f4404075cb83f313c1257b3cd2/cb69c/model_marked.jpg 320w,\n/static/9044c4f4404075cb83f313c1257b3cd2/c08c5/model_marked.jpg 640w,\n/static/9044c4f4404075cb83f313c1257b3cd2/6a068/model_marked.jpg 960w,\n/static/9044c4f4404075cb83f313c1257b3cd2/d8d7f/model_marked.jpg 1032w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>As shown in this picture, weight variables calculated together with <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> are stored as the <code class=\"language-text\">0</code>th element of the <code class=\"language-text\">weights</code> array of neurons in the next layer.</p>\n<p>In other words, if the index of the neuron to update is <code class=\"language-text\">0</code>, we can say it only affected all <code class=\"language-text\">Neuron.weights[0]</code> in the next layer, and therefore the error to reference is also <code class=\"language-text\">Neuron.weightPrimes[0]</code>.</p>\n<h3 id=\"network\" style=\"position:relative;\">Network<a href=\"#network\" aria-label=\"network permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The <code class=\"language-text\">Network</code> class has responsibilities like creating layers and neurons, controlling network operations like forward propagation or backpropagation, and managing integrated results or errors.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Network</span> <span class=\"token punctuation\">{</span>\n  학습속도<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  레이어들<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  인풋레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  아웃풋레이어<span class=\"token operator\">:</span> Layer<span class=\"token punctuation\">;</span>\n  전체에러미분값들<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -(target_i - output_i)s</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">backPropagation</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> 뒤집힌레이어들 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>레이어들<span class=\"token punctuation\">]</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> 학습속도 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>학습속도<span class=\"token punctuation\">;</span>\n    뒤집힌레이어들<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>레이어 <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> 에러들<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>레이어<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>아웃풋레이어<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        에러들 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>전체에러미분값들<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Backpropagation is proceeding so next layer's calculation finished first.</span>\n        <span class=\"token comment\">// Accessing private member variables causes errors but it's pseudocode so let's pass</span>\n        에러들 <span class=\"token operator\">=</span> 레이어<span class=\"token punctuation\">.</span>다음레이어<span class=\"token punctuation\">.</span>뉴런들<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>뉴런 <span class=\"token operator\">=></span> 뉴런<span class=\"token punctuation\">.</span>weightPrimes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      레이어<span class=\"token punctuation\">.</span><span class=\"token function\">뉴런들업데이트</span><span class=\"token punctuation\">(</span>에러들<span class=\"token punctuation\">,</span> 학습속도<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"wrapping-up\" style=\"position:relative;\">Wrapping Up<a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If written roughly like this, now just run iterations in the main function.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> network <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Network</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> 학습횟수<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  network<span class=\"token punctuation\">.</span><span class=\"token function\">forwardPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  network<span class=\"token punctuation\">.</span><span class=\"token function\">backPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span><span class=\"token function\">getResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Well, doing it roughly like this should work. Forward propagation wasn’t difficult since you just calculate iteratively, but backpropagation was a bit hard at first because it didn’t come intuitively.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a6a0af1fc538bcf1a9e649c98c648503/37cd1/result.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4klEQVR42p2SWRaDIAxFXU3rLCKDOLTa7n9NKS/Kj0fsaT8umIFHEkyabqRS9JSWmrLqnKKxlNcmGg8gJ8GSliqK1DOpfmGEmi5zIRoVvBcdVa0jM6yk3ULGrWSHF3eD2M+CQKiR7Phi+vFN1os2cvhPEIcwO+1FlH3yjiqvCmBBLME4Aj/axvykmX279vujYNC1bwMGKjrCfk+rp9N4ALMFCeYEwVsuuc0zcLs0DyqE4wvOyOq9wqYbWDmWCNAqLs34oI2Se5JQKmYFWv/fhaphYw9wnvDf3URqf6zNj7Nb/ANExjiY0Dq0+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result\" title=\"\" src=\"/static/a6a0af1fc538bcf1a9e649c98c648503/6af66/result.png\" srcset=\"/static/a6a0af1fc538bcf1a9e649c98c648503/69538/result.png 160w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/72799/result.png 320w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/6af66/result.png 640w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/d9199/result.png 960w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/21b4d/result.png 1280w,\n/static/a6a0af1fc538bcf1a9e649c98c648503/37cd1/result.png 3332w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>Modestly completed appearance</small>\n</center>\n<p>Still, I somehow implemented the network in time for the seminar, and after doing modest visualization using D3, I felt proud. Next time when I have time, I want to improve it so activation functions can be changed per layer or loss functions can also be changed.</p>\n<p>That’s all for this post on grunt work developing a simple artificial neural network using TypeScript. Full source can be checked in the <a href=\"https://github.com/evan-moon/simple-ann\" target=\"_blank\" rel=\"nofollow\">GitHub repository</a> and a live demo is available <a href=\"https://simple-ann.herokuapp.com/\" target=\"_blank\" rel=\"nofollow\">here</a>.</p>","fields":{"slug":"20190226-simple-ann-en","path":"/2019/02/26/simple-ann/en/","lang":"en"},"frontmatter":{"title":"Building a Simple Artificial Neural Network with TypeScript","subTitle":"Directly Implementing Neurons, Layers, and Backpropagation in ANN","date":"Feb 26, 2019","categories":["Programming","Machine Learning"],"tags":["Machine Learning","Deep Learning","TypeScript","Artificial Neural Network","Machine Learning Basics","Deep Learning Basics","D3","Data Visualization","Backpropagation"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/9c635f6fbad59694351ca8f61df30b9f/d803c/thumbnail.png","srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/d803c/thumbnail.png 320w,\n/static/9c635f6fbad59694351ca8f61df30b9f/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/fc5c5/thumbnail.webp 320w,\n/static/9c635f6fbad59694351ca8f61df30b9f/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/9c635f6fbad59694351ca8f61df30b9f/01fb2/thumbnail.png","srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/9c635f6fbad59694351ca8f61df30b9f/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"32c0189b-e19a-5372-9d93-6964b7f2c8bd","tableOfContents":"<ul>\n<li>\n<p><a href=\"#big-o-notation-and-time-complexity\">Big O Notation and Time Complexity</a></p>\n</li>\n<li>\n<p><a href=\"#sorting-algorithms\">Sorting Algorithms</a></p>\n<ul>\n<li><a href=\"#bubble-sort\">Bubble Sort</a></li>\n<li><a href=\"#selection-sort\">Selection Sort</a></li>\n<li><a href=\"#insertion-sort\">Insertion Sort</a></li>\n<li><a href=\"#merge-sort\">Merge Sort</a></li>\n<li><a href=\"#quick-sort\">Quick Sort</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post, I want to cover five representative sorting algorithms and provide a rough explanation of Big O notation. First, here are the five sorting algorithms:","html":"<p>In this post, I want to cover five representative sorting algorithms and provide a rough explanation of Big O notation. First, here are the five sorting algorithms:</p>\n<!-- more -->\n<hr>\n<ol>\n<li>Bubble Sort</li>\n<li>Selection Sort</li>\n<li>Insertion Sort</li>\n<li>Merge Sort</li>\n<li>Quick Sort</li>\n</ol>\n<hr>\n<p>Since these algorithms’ performance is expressed using Big O notation, I’ll also briefly explain Big O notation before moving on.</p>\n<h2 id=\"big-o-notation-and-time-complexity\" style=\"position:relative;\">Big O Notation and Time Complexity<a href=\"#big-o-notation-and-time-complexity\" aria-label=\"big o notation and time complexity permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The metrics for evaluating algorithm performance are time complexity and space complexity. Time complexity indicates the execution time of an algorithm, while space complexity indicates memory usage.</p>\n<p>When studying algorithms, you’ll often encounter expressions like “the time complexity is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>” or “the time complexity is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>” — this is Big O notation.</p>\n<p>Putting it into words, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> means:</p>\n<blockquote>\n<p>Given n pieces of data, this function consumes at most n resources in the “worst” case</p>\n</blockquote>\n<p>Here, the resources mentioned above would be time for time complexity and memory space for space complexity. However, when evaluating sorting algorithms, we typically focus on time complexity, so that’s what we’ll examine here.</p>\n<p>To better understand time complexity, let’s look at the time complexity of the binary search algorithm. If you’re not familiar with binary search, think of the “Higher or Lower” number guessing game. As most people know, it’s a game where you have to guess a random number someone else is thinking of.</p>\n<p>What’s the best way to minimize the number of guesses? The answer is to start with the middle value: <code class=\"language-text\">50</code>. After calling <code class=\"language-text\">50</code>, when your opponent says “higher” or “lower,” you can discard the 50 numbers on the wrong side and only think about the remaining 50.</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 306px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB682wjYVYFQf/xAAaEAEBAQADAQAAAAAAAAAAAAABABECEiIh/9oACAEBAAEFAnym3qQjn80k2y7N/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGhAAAgMBAQAAAAAAAAAAAAAAARAAIaERIv/aAAgBAQAGPwLp12Z52Wiv/8QAGxAAAwADAQEAAAAAAAAAAAAAAAERIWFxMVH/2gAIAQEAAT8hb4GwrV55TQ9ijKS2PTAlWoJi5rox5H//2gAMAwEAAgADAAAAEDjAPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/EGP/xAAdEAEAAgIDAQEAAAAAAAAAAAABABEhMUFRYXHh/9oACAEBAAE/EETQATCbyGc6lLFGkFwxxkjRRlDzHGky2FV8Y6cW+9u3n5HwiXpeDmpRTsF81CWljV2emYUaj//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"drink\" title=\"\" src=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg\" srcset=\"/static/8879b1bbc91ecb328b1dc5a32b718efb/0913d/drink.jpg 160w,\n/static/8879b1bbc91ecb328b1dc5a32b718efb/01fdd/drink.jpg 306w\" sizes=\"(max-width: 306px) 100vw, 306px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <small>If you're lucky and your opponent was thinking of 50, the game ends immediately and they have to drink.</small>\n</center>\n<p>Anyway, the worst case in this game is going back and forth with “higher” and “lower” until it ends in <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({\\log}N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></span> guesses. The best case is guessing the target value on the first try — a time complexity of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>.</p>\n<p>As you can see, there’s always a gap between best and worst case outcomes, which is why when evaluating algorithms, we typically focus on the <strong>worst case</strong>. And Big O notation is what we use to express this worst case.</p>\n<p>The common ones are typically <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>, and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({\\log}N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span></span>. Plotted on a 2D graph, they look like this:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACBklEQVR42n1T2ZKbMBDk/z9vH5JNvLYxQgIEOtB9ITLYyd6VrqFA0jTdMwONECLnvP1DKYWbQLVPpcAqxzGlYdtcTmW5DYLMyYdFWiatdaH5TIbEkGYTfC4VXpVVzjPslVQ0XzmhW85UGDLLlPM35H2vKiSQrsfGXooEB7XuyQWnzOq8cX6ve631O3LdVp8CkGstWyhlhT0Q5OMilA0x7/s+CjJK8h/yoVaKKsVBNps45wrM5BJtMHQdmJ4bKeV78gPCx3xvWN0kVDFTSUfqspGGKyddtJBz2L5er3B7pcET0LgLoFar94HjaeluV+NXFwzMApLhCKiQ2nRd90kWEqSHXsZJoIHTeRhLPuo8OHdIQsjTk8T41XY9TN49uOQ7wQc+SEsNW6MBmyC8QjgpnBCWLeswWCHeGgY+Qg4mrj2bb2S2Eq24F/3gVhmtTd4l50pOd8OH9e0xqqOSveqguJjYNCHCtZ7N0huhj8r3NzysQcQYU0oNY0wbM3FMugu+YSHUrAUbL5LJkKJzzkN8RAhhHEdKacMFp5xMPVqYKls1Vvf9xWsNPU/vkD+i3NHgqceoU1LD8CVb8ETh5OH2MZU3w1/QtKj/+fQD306nl19nhBYO7RcY931/XAihtm0R6qA6/g6wVEo1IPH383goHD/GTjD6fXq5tu35fH5+fm6vl5TLV/U/q6uYTCSUTxgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"big o\" title=\"\" src=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png\" srcset=\"/static/8846c3df1d92e4a3a2108e993a5b69f7/69538/big_o.png 160w,\n/static/8846c3df1d92e4a3a2108e993a5b69f7/72799/big_o.png 320w,\n/static/8846c3df1d92e4a3a2108e993a5b69f7/4597d/big_o.png 631w\" sizes=\"(max-width: 631px) 100vw, 631px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>I’ll cover more detailed content like how to calculate Big O notation in another post.</p>\n<h2 id=\"sorting-algorithms\" style=\"position:relative;\">Sorting Algorithms<a href=\"#sorting-algorithms\" aria-label=\"sorting algorithms permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<img src=\"/6cfa6f10ba3dfd0a90b03cfb0926f05d/sorts.gif\" width=\"100%\">\n<p>Sorting algorithms are one of the important problems in computer science — given a dataset, the problem is to rearrange it in a specified order.</p>\n<p>In real development, you’ll frequently encounter situations where you need to sort irregular data before searching through it. The key is whether you can effectively solve the problem by using the right algorithm for the situation.</p>\n<p>For example, imagine you have a bag containing balls numbered 1 through 10 in random order, and you need to take them out one by one and arrange them from smallest to largest. Most humans can sort these without much difficulty. But computers often deal with <code class=\"language-text\">10,000</code> or even <code class=\"language-text\">10,000,000</code> pieces of data. And databases theoretically need to handle infinite amounts of data.</p>\n<p>If the data isn’t sorted, you’d have to look at each piece of data sequentially while searching. But if the data is already sorted, you can use powerful algorithms like the binary search I mentioned above. <small>(This is actually the biggest reason.)</small></p>\n<p>Now let’s look at the representative sorting algorithms: bubble sort, selection sort, insertion sort, merge sort, and quick sort.</p>\n<h3 id=\"bubble-sort\" style=\"position:relative;\">Bubble Sort<a href=\"#bubble-sort\" aria-label=\"bubble sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/1692a508cdbd24d8651e01ffe00385dd/bubble_sort.gif\" width=\"100%\">\n<p>Bubble sort shows the worst performance in almost every situation, but it shows the best performance on already-sorted data since it only needs to traverse once. You might wonder why you’d sort already-sorted data, but it’s meaningful because the sorting algorithm itself operates without knowing whether the data is sorted or not.</p>\n<p>Bubble sort works in the following order:</p>\n<hr>\n<ol>\n<li>Compare and sort the 0th and 1st elements</li>\n<li>Compare and sort the 1st and 2nd elements</li>\n<li>…keep repeating</li>\n<li>Compare and sort the (n-1)th and nth elements</li>\n</ol>\n<hr>\n<p>Each traversal sorts one element at the end, so it looks like bubbles rising — hence the name bubble sort. The principle is intuitive and easy to implement, but it’s a fairly inefficient sorting method. So typically you implement it once when first learning, but I’ve rarely seen it used in practice.</p>\n<p>Here’s the implementation code for bubble sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">bubbleSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> tmp<span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        tmp <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n        tmp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"selection-sort\" style=\"position:relative;\">Selection Sort<a href=\"#selection-sort\" aria-label=\"selection sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/fb94376d775d18dbffb09f9724ca9c14/selection_sort.gif\" width=\"100%\">\n<p>Selection sort is a sorting algorithm that finds and selects the appropriate data for the current position from the given data and swaps positions. After one traversal, the smallest value in the entire dataset will be at the 0th index according to the algorithm, so from the next traversal onward, you just repeat the process starting from index 1.</p>\n<p>Selection sort works in the following order:</p>\n<hr>\n<ol>\n<li>Find the smallest value from index 0 to n and swap it with index 0</li>\n<li>Find the smallest value from index 1 to n and swap it with index 1</li>\n<li>…keep repeating</li>\n<li>Find the smallest value from index n-1 to n and swap it with index n</li>\n</ol>\n<hr>\n<p>Selection sort traverses the entire list regardless of whether the current data is sorted or not, so it consistently has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity in both best and worst cases. Here’s the implementation code for selection sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">selectionSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> tmp<span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        tmp <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n        tmp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"insertion-sort\" style=\"position:relative;\">Insertion Sort<a href=\"#insertion-sort\" aria-label=\"insertion sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/e10adb7c9d0442b9799b538265a2fc05/insertion_sort.gif\" width=\"100%\">\n<p>Insertion sort compares each element from the given data, from the beginning, with the already-sorted portion and inserts it in its proper position. It’s actually the sorting method most similar to how humans naturally sort things. Imagine sorting cards in your hand — you’d probably do something like this:</p>\n<hr>\n<ol>\n<li>Pick up a card.</li>\n<li>Look through the cards you’re holding.</li>\n<li>Insert the current card in the position where it belongs.</li>\n</ol>\n<hr>\n<p>Insertion sort works similarly to this process:</p>\n<hr>\n<ol>\n<li>Skip index 0.</li>\n<li>Find where the value at index 1 should go among indices 0-1 and insert it</li>\n<li>Find where the value at index 2 should go among indices 0-2 and insert it</li>\n<li>…keep repeating</li>\n<li>Find where the value at index n should go among indices 0-n and insert it</li>\n</ol>\n<hr>\n<p>In the best case, insertion sort only needs to traverse the entire data once, giving it <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> time complexity, but in the worst case, it has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity.</p>\n<p>Here’s the implementation code for insertion sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">insertionSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Start from the second card</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Pick up the card</span>\n    <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span>j <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> value<span class=\"token punctuation\">;</span> j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Look at the already-sorted cards from the back</span>\n      <span class=\"token comment\">// If the examined card is larger than the current card</span>\n      <span class=\"token comment\">// Move the examined card back one position</span>\n      input<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// After moving is done</span>\n    <span class=\"token comment\">// Place the current card one position after</span>\n    <span class=\"token comment\">// the card that's smaller than it</span>\n    input<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"merge-sort\" style=\"position:relative;\">Merge Sort<a href=\"#merge-sort\" aria-label=\"merge sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/d57ade8c3762931df83b836b9c7dc88b/merge_sort.gif\" width=\"100%\">\n<p>Merge sort is a type of divide and conquer algorithm — it breaks a big problem into several smaller problems, solves each one, and then combines the results to solve the original problem. As the name “merge” suggests, it’s an algorithm that sorts during the process of splitting the given data into small pieces and then merging them back together. Here’s how it works:</p>\n<hr>\n<ol>\n<li>Receive data <code class=\"language-text\">[5, 0, 4, 1]</code></li>\n<li>Split the data list in half until each piece has length 1</li>\n<li>Becomes <code class=\"language-text\">[5, 0]</code>, <code class=\"language-text\">[4, 1]</code></li>\n<li>Becomes <code class=\"language-text\">[5]</code>, <code class=\"language-text\">[0]</code>, <code class=\"language-text\">[4]</code>, <code class=\"language-text\">[1]</code></li>\n<li>Since each list now has length 1, start merging</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first.</strong> Between <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[0]</code>, 0 is smaller, so merge 0 into the new list first</li>\n<li>Create <code class=\"language-text\">[0, 5]</code></li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first.</strong> Between <code class=\"language-text\">[4]</code> and <code class=\"language-text\">[1]</code>, 1 is smaller, so merge 1 into the new list first</li>\n<li>Create <code class=\"language-text\">[1, 4]</code></li>\n<li>Now merge <code class=\"language-text\">[0, 5]</code> and <code class=\"language-text\">[1, 4]</code>. Since these lists are sorted, smaller indices are guaranteed to have smaller values.</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0]</code>. <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[1, 4]</code> remain</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0, 1]</code>. <code class=\"language-text\">[5]</code> and <code class=\"language-text\">[4]</code> remain</li>\n<li><strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong></li>\n<li>Create <code class=\"language-text\">[0, 1, 4]</code>. <code class=\"language-text\">[5]</code> remains</li>\n<li>Since there’s a value left, just merge it</li>\n<li><code class=\"language-text\">[0, 1, 4, 5]</code> sorting complete</li>\n</ol>\n<hr>\n<p>Looking at the emphasized <strong>Compare index 0 of left with index 0 of right, merge the smaller value first</strong> in the process above, you can see this step keeps repeating.</p>\n<p>Because it keeps repeating and merging in the same way, merge sort is typically implemented using recursion. Also, merge sort always has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mrow><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O({n\\log n})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span></span><span class=\"mclose\">)</span></span></span></span></span> time complexity, making it efficient. However, since it needs to split and separately store elements equal to the number of elements, it has <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> space complexity. In other words, it trades memory for execution speed.</p>\n<p>Here’s the implementation code for merge sort:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">merge</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>left<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> right<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> right<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">mergeSort</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> middle <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> middle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>middle<span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"quick-sort\" style=\"position:relative;\">Quick Sort<a href=\"#quick-sort\" aria-label=\"quick sort permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<img src=\"/ca493988dbac1ae41fa5e70ae069aca5/quick_sort.gif\" width=\"100%\">\n<p>Quick sort is also a divide and conquer sorting method like merge sort. The difference from merge sort is that merge sort does nothing during the division phase and performs sorting during the merge phase, while quick sort performs important operations during the division phase and does nothing during merging.</p>\n<p>Here’s the execution order for quick sort:</p>\n<hr>\n<ol>\n<li>Select one element from the input data list. This element is called the Pivot.</li>\n<li>Divide the list in two based on the pivot.</li>\n<li>Move all elements smaller than the pivot to the left of the pivot</li>\n<li>Move all elements larger than the pivot to the right of the pivot</li>\n</ol>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token operator\">:</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> left<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">&lt;</span> right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Find the pivot point and classify smaller/larger numbers around it</span>\n    <span class=\"token keyword\">const</span> i <span class=\"token operator\">=</span>  <span class=\"token function\">position</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Sort left of pivot</span>\n    <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Sort right of pivot</span>\n    <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">position</span><span class=\"token punctuation\">(</span>arr<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> left<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> right<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> pivot <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// In-place arrangement of larger/smaller numbers to left/right</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> j<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> pivot<span class=\"token punctuation\">)</span> j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> j <span class=\"token operator\">&amp;&amp;</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> pivot<span class=\"token punctuation\">)</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> tmp <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  arr<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pivot<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> j<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That wraps up this post on sorting algorithms.</p>","fields":{"slug":"20181013-sort-algorithm-en","path":"/2018/10/13/sort-algorithm/en/","lang":"en"},"frontmatter":{"title":"Everything About Sorting Algorithms (Bubble, Selection, Insertion, Merge, Quick)","subTitle":"Understanding sorting algorithm principles and time complexity analysis","date":"Oct 13, 2018","categories":["Programming","Algorithm"],"tags":["Sort Algorithms","Algorithm","Bubble Sort","Selection Sort","Insertion Sort","Merge Sort","Quick Sort","Algorithm Fundamentals","Technical Interview"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/5971a1ceb80454e7d2a5b0bb79600959/3a812/thumbnail.jpg","srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/3a812/thumbnail.jpg 320w,\n/static/5971a1ceb80454e7d2a5b0bb79600959/1ddf3/thumbnail.jpg 660w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/fc5c5/thumbnail.webp 320w,\n/static/5971a1ceb80454e7d2a5b0bb79600959/32cde/thumbnail.webp 660w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/5971a1ceb80454e7d2a5b0bb79600959/eb1cc/thumbnail.jpg","srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/eb1cc/thumbnail.jpg 660w","sizes":"100vw"},"sources":[{"srcSet":"/static/5971a1ceb80454e7d2a5b0bb79600959/cd93d/thumbnail.webp 660w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"d55e5c01-b2f1-5ea8-b173-b093cb051e8a","tableOfContents":"<ul>\n<li>\n<p><a href=\"#structure-of-vue-server-side-rendering\">Structure of Vue Server Side Rendering</a></p>\n</li>\n<li>\n<p><a href=\"#server-side-rendering\">Server Side Rendering</a></p>\n<ul>\n<li><a href=\"#client-requests-resources-from-server\">Client Requests Resources from Server</a></li>\n<li><a href=\"#nginx-serves-requests-to-port-where-express-is-running\">nginx Serves Requests to Port Where Express Is Running</a></li>\n<li><a href=\"#express-routing-starts\">Express Routing Starts</a></li>\n<li><a href=\"#code-classlanguage-textserver-entryjscode-executes\"><code class=\"language-text\">server-entry.js</code> Executes</a></li>\n<li><a href=\"#servers-code-classlanguage-textvue-routercode-routing-proceeds\">Server’s <code class=\"language-text\">vue-router</code> Routing Proceeds</a></li>\n<li><a href=\"#render-html-using-vue-server-renderer\">Render HTML Using vue-server-renderer</a></li>\n<li><a href=\"#server-responds-to-client\">Server Responds to Client</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#client-rendering\">Client Rendering</a></p>\n<ul>\n<li><a href=\"#code-classlanguage-textclient-entryjscode-executes\"><code class=\"language-text\">client-entry.js</code> Executes</a></li>\n<li><a href=\"#client-application-initialization-function-executes\">Client Application Initialization Function Executes</a></li>\n<li><a href=\"#clients-code-classlanguage-textvue-routercode-routing-proceeds\">Client’s <code class=\"language-text\">vue-router</code> Routing Proceeds</a></li>\n<li><a href=\"#appmount---rendering-ends-vue-lifecycle-starts\">app.$mount -> Rendering Ends. Vue Lifecycle Starts</a></li>\n</ul>\n</li>\n</ul>","excerpt":"In this post, following Universal Server Side Rendering, I want to write about the process of developing an SSR (Server Side Rendering) application using VueJS’s official library  and Express, problems that arose in the production environment, and how those problems were solved.","html":"<p>In this post, following <a href=\"/2018/09/25/universal-ssr\">Universal Server Side Rendering</a>, I want to write about the process of developing an SSR (Server Side Rendering) application using VueJS’s official library <code class=\"language-text\">vue-server-renderer</code> and Express, problems that arose in the production environment, and how those problems were solved.</p>\n<!-- more -->\n<p>As a Frontend developer, I actually rarely had occasion to touch Backend frameworks. However, since I advocated introducing the SSR server at my current workplace, and therefore ownership also belonged to me, I needed to know in detail about server operation methods and various problems that are completely different from client environments.</p>\n<p>Usually Frontend developers develop applications operating on clients, so I think they can unexpectedly easily miss and pass over problems that can occur in applications operating on servers <small>(obvious if you think a bit)</small>.</p>\n<p>So I want to organize into documents and reflect so I don’t repeat these mistakes twice.</p>\n<p>First I’ll look at Vue SSR’s rendering process overall, then examine server-side rendering and client-side rendering separately.</p>\n<blockquote>\n<p>Code appearing as examples in this post may not work even if copy-pasted because parts are omitted due to current workplace business logic.</p>\n</blockquote>\n<h2 id=\"structure-of-vue-server-side-rendering\" style=\"position:relative;\">Structure of Vue Server Side Rendering<a href=\"#structure-of-vue-server-side-rendering\" aria-label=\"structure of vue server side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I didn’t use Nuxt.js but used a boilerplate and implemented it with slight improvements. At first I regretted “should’ve just used Nuxt…” but thanks to that I think it was a good opportunity to learn more deeply about Universal SSR’s execution process. <small><del>(wrapping grunt work like this)</del></small></p>\n<p>In this post I want to describe in detail down to the function level about the initialization process of the SSR application I wrote. First, the application’s rendering process is as follows. I’ll describe each process in detail afterward.</p>\n<hr>\n<ol>\n<li>Client requests resources from server</li>\n<li>nginx serves requests to port where Express is running</li>\n<li>Express routing starts</li>\n<li><code class=\"language-text\">server-entry.js</code> executes</li>\n<li>Server’s <code class=\"language-text\">vue-router</code> routing proceeds</li>\n<li>Render HTML using vue-server-renderer</li>\n<li>Server responds to client</li>\n<li><code class=\"language-text\">client-entry.js</code> executes</li>\n<li>Client application initialization function executes</li>\n<li>Client’s <code class=\"language-text\">vue-router</code> routing proceeds</li>\n<li><code class=\"language-text\">app.$mount</code></li>\n</ol>\n<hr>\n<p>Excluding request #1 and response #7, steps <code class=\"language-text\">2-6</code> are processes happening on the server and steps <code class=\"language-text\">8-10</code> are processes happening on the client. What’s peculiar is that server and client have different entry points.</p>\n<p>And as I’ll explain later, these entry points share and use several same functions. Functions like <code class=\"language-text\">router.onReady</code> or <code class=\"language-text\">createApp</code> are like that. Originally Universal SSR is basically the concept of “let’s server-side render just the first request and afterward operate like an SPA. And let’s make code reusable on server and client.” So there are convenient aspects, but since execution timing or environment can be completely different even for the same function, there were many confusing parts like needing to do separate exception handling.</p>\n<p>And when these two entry points execute on server and client, they go through different initialization processes. If you initialize on the server then initialize everything from scratch again on the client, it’s inefficient, so it uses several methods to perform rendering as efficiently as possible.</p>\n<p>Let’s first look at server-side rendering.</p>\n<h2 id=\"server-side-rendering\" style=\"position:relative;\">Server Side Rendering<a href=\"#server-side-rendering\" aria-label=\"server side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"client-requests-resources-from-server\" style=\"position:relative;\">Client Requests Resources from Server<a href=\"#client-requests-resources-from-server\" aria-label=\"client requests resources from server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>The client sends a request to the server.</p>\n<h3 id=\"nginx-serves-requests-to-port-where-express-is-running\" style=\"position:relative;\">nginx Serves Requests to Port Where Express Is Running<a href=\"#nginx-serves-requests-to-port-where-express-is-running\" aria-label=\"nginx serves requests to port where express is running permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Usually when developing servers using nodeJS, directly launching servers with commands like <code class=\"language-text\">node server.js</code> is rare. Usually you use server engines like Nginx or Apache together.\nThe reasons are as follows:</p>\n<hr>\n<ol>\n<li>Due to server engine software characteristics, faster static file serving than nodeJS is possible. And since such requests aren’t sent to nodeJS but processed at the engine level, backend load is distributed.</li>\n<li>Node.js creator Ryan Dahl once said “You just may be hacked when some yet-unknown buffer overflow is discovered. Not that that couldn’t happen behind nginx, but somehow having a proxy in front makes me happy.” In other words, it means you can prevent attacks from yet-undiscovered vulnerabilities to some extent.</li>\n</ol>\n<hr>\n<p>So I wrote roughly the following nginx config:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nginx line-numbers\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token directive\"><span class=\"token keyword\">listen</span> <span class=\"token number\">80</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">server_name</span> example.com</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-Real-IP <span class=\"token variable\">$remote_addr</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-Forwarded-For <span class=\"token variable\">$proxy_add_x_forwarded_for</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$http_host</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> X-NginX-Proxy true</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_pass</span> http://127.0.0.1:3000/</span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">proxy_redirect</span> <span class=\"token boolean\">off</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token directive\"><span class=\"token keyword\">gzip</span> <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_comp_level</span> <span class=\"token number\">2</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_proxied</span> any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_min_length</span>  <span class=\"token number\">1000</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token directive\"><span class=\"token keyword\">gzip_disable</span>     <span class=\"token string\">\"MSIE [1-6]\\.\"</span>\n  gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>When requests come to port 80, they’re forwarded to port 3000 where the nodeJS server executed with <code class=\"language-text\">node server.js</code> is waiting.</p>\n<p>And actually when executing the nodeJS server, it’s better to use a process manager like <code class=\"language-text\">pm2</code> or <code class=\"language-text\">forever</code> to execute it. I’ll write this content in the next post <strong>someday</strong>. By the way, I’m currently using <code class=\"language-text\">pm2</code>.</p>\n<h3 id=\"express-routing-starts\" style=\"position:relative;\">Express Routing Starts<a href=\"#express-routing-starts\" aria-label=\"express routing starts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Requests entering like this are processed in the nodeJS server <code class=\"language-text\">server.js</code>. There’s no Vue code in <code class=\"language-text\">server.js</code>, only code of the Express framework written in nodeJS.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">bundle<span class=\"token punctuation\">,</span> template</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vue-server-renderer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createBundleRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   template<span class=\"token punctuation\">,</span>\n   <span class=\"token literal-property property\">runInNewContext</span><span class=\"token operator\">:</span> <span class=\"token string\">'once'</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bundle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/vue-ssr-bundle.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token function\">createRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> template<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'views'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'./src/express/views'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'view engine'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ejs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/ping'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">health check from ELB</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'healthCheck'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bundle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/vue-ssr-bundle.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./dist/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token function\">createRenderer</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">,</span> template<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>renderer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;pre>Rendering bboombboom&lt;/pre>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">cookie</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>cookies <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">errorLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ERR] context url is not exist!!'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Proceed with render stream</span>\n  <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> renderer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStream</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Since I used Express, I naturally used Express’s router. But since Vue proceeds with actual routing, in Express you use wildcards like <code class=\"language-text\">app.get('*')</code> to execute callback functions for all requests.</p>\n<p>Looking in the middle, there’s also code like <code class=\"language-text\">app.get('/ping')</code> - that’s a router written separately because of AWS Elastic Beanstalk’s Health Check. ELB periodically pings specific URLs of instances belonging to that environment to check if the current environment is operating properly. This URL can be changed in ELB settings, and I set it as the URL <code class=\"language-text\">/ping</code>.</p>\n<p>The reason for separating this router separately is because the more <code class=\"language-text\">vue-ssr-renderer</code>’s render function executes, the more HTML templates go up in memory, and thereby bottlenecks occur in the render process, so I set it to send a simple page as a response with just Express without executing <code class=\"language-text\">vue-ssr-renderer</code>.</p>\n<p>Express routing and <code class=\"language-text\">vue-router</code> routing I’ll explain below can be confusing. As I just explained, actual routing proceeds in Vue, but Express receives and processes requests first then passes them to Vue, so routing must be done in Express too. After routing, when the <code class=\"language-text\">renderToStream</code> method on the last line executes, routing and rendering proceeding in Vue start.</p>\n<p>Now I’ll explain the inside of the <code class=\"language-text\">app.get('*')</code> router in detail.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>renderer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;pre>Rendering bboombboom&lt;/pre>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">cookie</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>cookies <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">errorLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ERR] context url is not exist!!'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> renderer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStream</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  stream<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* @desc\n     * Using vue-meta plugin, you can receive values returned by metaInfo method declared in components.\n     * Refer to https://github.com/declandewet/vue-meta\n     */</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      title<span class=\"token punctuation\">,</span> link<span class=\"token punctuation\">,</span> style<span class=\"token punctuation\">,</span> script<span class=\"token punctuation\">,</span> noscript<span class=\"token punctuation\">,</span> meta<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    context<span class=\"token punctuation\">.</span>head <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>link<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>script<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>noscript<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error occurred during rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Error handling logic like showing error page is located here.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Rendering ended</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The most important part in this routing is the role of the <code class=\"language-text\">renderToStream</code> method.</p>\n<p><code class=\"language-text\">vue-ssr-renderer</code> has 2 render functions: <code class=\"language-text\">renderToString</code> and <code class=\"language-text\">renderToStream</code>.</p>\n<p><code class=\"language-text\">renderToString</code> returns rendered HTML in string form when all rendering finishes, then afterward returns HTML to the client at once. Therefore, if render speed takes long, users have no choice but to look at a blank screen. Also, since it sends data at once, it has the disadvantage of having to put all content in memory when proceeding with HTML rendering. If HTML size is small it’s not a problem, but the larger the file size, the more memory space each rendering eats up.</p>\n<p><code class=\"language-text\">renderToStream</code> returns a nodeJS <code class=\"language-text\">ReadableStream</code> object whenever one event finishes. <a href=\"https://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"nofollow\">stream</a> is a nodeJS feature that can load data in certain chunk units and manage streams with event callback calls using the <code class=\"language-text\">on</code> method. The data event is called whenever each chunk becomes <code class=\"language-text\">readable</code> state, and if all data is loaded, the <code class=\"language-text\">end</code> event is called. I’ll explain this <a href=\"https://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"nofollow\">stream</a> content in another post <strong>someday</strong>.</p>\n<h3 id=\"code-classlanguage-textserver-entryjscode-executes\" style=\"position:relative;\"><code class=\"language-text\">server-entry.js</code> Executes<a href=\"#code-classlanguage-textserver-entryjscode-executes\" aria-label=\"code classlanguage textserver entryjscode executes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>When the <code class=\"language-text\">renderToStream</code> function executes, <code class=\"language-text\">vue-server-renderer</code> finds the server-side entry file <code class=\"language-text\">server-entry.js</code>. In this file, it creates an app object using the factory function in <code class=\"language-text\">app.js</code>, goes through several initialization processes, then routes.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// import factory function</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If resolved in this promise, stream continues even after router.push is called</span>\n    <span class=\"token comment\">// If rejected in this promise, stream's error event is called.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>To explain this file’s code, it’s good to know what <code class=\"language-text\">app</code>, <code class=\"language-text\">store</code>, <code class=\"language-text\">router</code> returned by the <code class=\"language-text\">createApp</code> function imported at the top are, so before looking closely, let’s first look at the <code class=\"language-text\">createApp</code> factory function imported at the very top.</p>\n<p>The <code class=\"language-text\">createApp</code> function is a factory function that returns a <code class=\"language-text\">Vue</code> instance, <code class=\"language-text\">VueRouter</code> instance, and Vuex’s <code class=\"language-text\">Store</code> instance. Afterward this factory function is also reused in <code class=\"language-text\">client-entry</code> to proceed with initialization.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Store <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./router'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> router<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token parameter\">h</span> <span class=\"token operator\">=></span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It’s similar to code that generally initializes Vue on clients, but there’s one different part - it creates <code class=\"language-text\">Store</code> and <code class=\"language-text\">Router</code> instances using factory functions. Usually in SPA applications</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">'#app'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> App <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;App/>'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">router</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">store</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You create <code class=\"language-text\">Vue</code> instances like this. But there’s one problem using this logic as is on the server.</p>\n<p>The problem occurs when returning data types using Call by Reference evaluation strategy with <code class=\"language-text\">export default</code>. Since <code class=\"language-text\">Vue</code> called in <code class=\"language-text\">new Vue()</code> operates like a class returning instances, this code ultimately returns the memory address where the <code class=\"language-text\">Vue</code> instance went up. This logic has no particular problems on clients, but problems can occur on servers.</p>\n<p>Unlike clients, servers are programs that, once up, keep running for a long time. Since users currently accessing the server shouldn’t share <code class=\"language-text\">Store</code> state, servers must create new <code class=\"language-text\">Store</code> and <code class=\"language-text\">Vue</code> instances for each request.</p>\n<p>But what’s <code class=\"language-text\">export</code>ed in the above code is ultimately the <code class=\"language-text\">Vue</code> instance’s memory pointer, and when this module is <code class=\"language-text\">import</code>ed, this module creates a <code class=\"language-text\">Vue</code> instance just once at first, then afterward returns the memory pointer to reference - that is, <strong>the same instance</strong>.</p>\n<p>Therefore, during server-side rendering, to avoid state pollution, you must write it by exposing factory functions instead of instance memory pointers and creating and returning new instances every time.</p>\n<p>I missed this fact and created a bug where users shared sessions inside <code class=\"language-text\">Store</code>, so logging in with my account logged in as someone else’s account. It’s a dizzying moment even thinking about it now.</p>\n<blockquote>\n<p>A Node.js server is a long-running process. When our code is required into the process, it will be evaluated once and stays in memory.\n…\nSo, instead of directly creating an app instance, we should expose a factory function that can be repeatedly executed to create fresh app instances for each request.</p>\n<p><strong>Vue SSR Guide</strong> <em>Avoid Stateful Singletons</em></p>\n</blockquote>\n<p>Even written blatantly like this in the <a href=\"https://ssr.vuejs.org/guide/structure.html#avoid-stateful-singletons\" target=\"_blank\" rel=\"nofollow\">official documentation</a>, I missed it and created a huge bug. We must read official documentation! Read it twice, three times!</p>\n<p>Okay, now that we’ve looked at <code class=\"language-text\">createApp</code>, let’s return to <code class=\"language-text\">server-entry.js</code> and continue explaining that file.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// import factory function</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">TOKEN_KEY</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/constants'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">SET_TOKEN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DESTROY_TOKEN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> APIAuth <span class=\"token keyword\">from</span> <span class=\"token string\">'src/api/auth'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// create new app</span>\n    <span class=\"token keyword\">const</span> cookies <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> authToken <span class=\"token operator\">=</span> cookies<span class=\"token punctuation\">[</span><span class=\"token constant\">TOKEN_KEY</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// token in cookie of client that sent request</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">next</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>authToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> APIAuth<span class=\"token punctuation\">.</span><span class=\"token function\">isValidToken</span><span class=\"token punctuation\">(</span>authToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 200 if valid, 400 if invalid</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SET_TOKEN</span><span class=\"token punctuation\">,</span> authToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// throwing considers render failed. But render itself shouldn't fail just because token is invalid.</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DESTROY_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Routing logic is located here</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This file’s main logic is broadly divided into 2 things:</p>\n<hr>\n<ol>\n<li>If token is stored in cookie of client that sent request, store authentication state in Store with <code class=\"language-text\">store.dispatch(SET_TOKEN, authToken)</code></li>\n<li>Server-side routing logic and exception handling declared with <code class=\"language-text\">router.onReady</code></li>\n</ol>\n<hr>\n<p>Let’s first look at #1. Why must we necessarily store authenticated tokens in Store? First, since this server is a render server that only performs rendering, session validity checks must communicate with external API servers to perform.</p>\n<p>Authentication state may be needed on the server and may also be needed on the client. Then you must communicate once on the server to check tokens and also communicate on the client to check tokens. But since this method is inefficient, frameworks supporting universal SSR like this usually use the method of serializing server state into the <code class=\"language-text\">window</code> object and declaring it inside <code class=\"language-text\">&lt;script></code> tags during rendering to return server state to clients.</p>\n<p>In <code class=\"language-text\">vue-server-renderer</code>, server state to return to clients is declared using <a href=\"https://vuex.vuejs.org/kr/\" target=\"_blank\" rel=\"nofollow\">Vuex</a>, Vue’s <a href=\"https://haruair.github.io/flux/\" target=\"_blank\" rel=\"nofollow\">Flux architecture</a> library.</p>\n<p>Thus server state gets serialized using <code class=\"language-text\">JSON.stringify</code> during rendering and contained in the property <code class=\"language-text\">window.__INITIAL_STATE__</code>, and afterward during client initialization, it accesses that property, uses <code class=\"language-text\">JSON.parse</code> to convert to Object type, then uses Vuex Store’s <code class=\"language-text\">replaceState</code> method to update Store.</p>\n<center>\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/37523/initial_state.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIElEQVR42p2Sy26DMBBF8yVdYBuS8jABTACpQFQUIAQ23fT/f+TUYVFVeVRVF0cjeaTjO2NvYt8n0xH5fk8ShRyShLei4Nx11EVOFgmWk6ZvAppiZ6vPqfaJdhJPOGxv2Ggds7cSk+drzYwhzQxllfM+fpLmbzjOC1IJPE/hWjzPxXUlQt6zcd1r8wfKxdt6lGnBWH5QmoamrWmbllc7jeMIpJBI+ZiNEIJbpJKYKKeLOruOlMs8sywLQRBYofNUtgrvDu3tylVWaBiTiT4ZKdKSYRwYhgGt9a/Sp8I0yjjFPY1uOR6PTNNEVVUopf6XMNeHVWhiw/lyZr7MhGH4nW5dzZ+E8iqUpGFGHbVkvqFuaoZ+wNgfsPZtyusDPkr7BYT48n0a47z1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"initial state\" title=\"\" src=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/6af66/initial_state.png\" srcset=\"/static/e35fb3b389f37a4a3a71e3a947ff18a5/69538/initial_state.png 160w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/72799/initial_state.png 320w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/6af66/initial_state.png 640w,\n/static/e35fb3b389f37a4a3a71e3a947ff18a5/37523/initial_state.png 720w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n    <small>You can check it like this in browser console</small>\n</center>\n<h3 id=\"servers-code-classlanguage-textvue-routercode-routing-proceeds\" style=\"position:relative;\">Server’s <code class=\"language-text\">vue-router</code> Routing Proceeds<a href=\"#servers-code-classlanguage-textvue-routercode-routing-proceeds\" aria-label=\"servers code classlanguage textvue routercode routing proceeds permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Let’s look at routing logic that was #2. Universal SSR applications proceed with routing on the server side the very first time users open pages, and afterward when users move pages, routing proceeds on the client.</p>\n<p>In other words, routing logic inside <code class=\"language-text\">server-entry.js</code> is logic that executes exactly once when users initially execute the application for the very first time. Since I wrote router authentication-related logic on the client, only checking whether components are connected to this router on the server, I wrote server-side entry routing logic simply.</p>\n<p>The <code class=\"language-text\">router</code> object used in this file is an instance of the <code class=\"language-text\">VueRouter</code> class in the <code class=\"language-text\">vue-router</code> library created and returned by the <code class=\"language-text\">createApp</code> factory function. I decided to just check whether the current route is a valid route using this class’s <code class=\"language-text\">getMatchedComponents</code> method.</p>\n<p>The meaning of <code class=\"language-text\">VueRouter</code>’s member variables and methods is also in <code class=\"language-text\">vue-router</code>’s <a href=\"https://router.vuejs.org/kr/api/#router-link\" target=\"_blank\" rel=\"nofollow\">official documentation</a>, but sometimes libraries are updated but official documentation updates are late, so I directly looked at <code class=\"language-text\">vue-router</code>’s code.</p>\n<p>Looking at the <code class=\"language-text\">node_modules/vue-router/types/router.d.ts</code> file, you can confirm the <code class=\"language-text\">VueRouter</code> class’s member variables and methods.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">VueRouter</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span>options<span class=\"token operator\">?</span><span class=\"token operator\">:</span> RouterOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  app<span class=\"token operator\">:</span> Vue<span class=\"token punctuation\">;</span>\n  mode<span class=\"token operator\">:</span> RouterMode<span class=\"token punctuation\">;</span>\n  currentRoute<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span> <span class=\"token punctuation\">(</span>guard<span class=\"token operator\">:</span> NavigationGuard<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">beforeResolve</span> <span class=\"token punctuation\">(</span>guard<span class=\"token operator\">:</span> NavigationGuard<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">afterEach</span> <span class=\"token punctuation\">(</span><span class=\"token function-variable function\">hook</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">,</span> from<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">push</span> <span class=\"token punctuation\">(</span>location<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> onComplete<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> onAbort<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">replace</span> <span class=\"token punctuation\">(</span>location<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> onComplete<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> onAbort<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">go</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">back</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">forward</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">getMatchedComponents</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">?</span><span class=\"token operator\">:</span> RawLocation <span class=\"token operator\">|</span> Route<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Component<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onReady</span> <span class=\"token punctuation\">(</span>cb<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">,</span> errorCb<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onError</span> <span class=\"token punctuation\">(</span>cb<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">addRoutes</span> <span class=\"token punctuation\">(</span>routes<span class=\"token operator\">:</span> RouteConfig<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">resolve</span> <span class=\"token punctuation\">(</span>to<span class=\"token operator\">:</span> RawLocation<span class=\"token punctuation\">,</span> current<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Route<span class=\"token punctuation\">,</span> append<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    location<span class=\"token operator\">:</span> Location<span class=\"token punctuation\">;</span>\n    route<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n    href<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// backwards compat</span>\n    normalizedTo<span class=\"token operator\">:</span> Location<span class=\"token punctuation\">;</span>\n    resolved<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> install<span class=\"token operator\">:</span> PluginFunction<span class=\"token operator\">&lt;</span><span class=\"token builtin\">never</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You can confirm that the <code class=\"language-text\">getMatchedComponent</code> method is a method that receives <code class=\"language-text\">RawLocation</code> type or <code class=\"language-text\">Route</code> type as arguments and returns a <code class=\"language-text\">Component</code> list. Then let’s check how <code class=\"language-text\">getMatchedComponent</code> is implemented in the <code class=\"language-text\">node_modules/vue-router/dist/vue-router.common.js</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token class-name\">VueRouter</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getMatchedComponents</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getMatchedComponents</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">to</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> route <span class=\"token operator\">=</span> to\n    <span class=\"token operator\">?</span> to<span class=\"token punctuation\">.</span>matched\n      <span class=\"token operator\">?</span> to\n      <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>route\n    <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>route<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> route<span class=\"token punctuation\">.</span>matched<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> m<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">VueRouter</code> class’s <code class=\"language-text\">getMatchedComponent</code> method returns components matched with that route if it receives a <code class=\"language-text\">to</code> argument, and if no argument is given, returns components matched with the current route. As confirmed in the <code class=\"language-text\">VueRouter</code> class’s type declaration, <code class=\"language-text\">?</code> meaning <code class=\"language-text\">optional</code> is attached to the <code class=\"language-text\">to</code> argument, so unless needed, you don’t need to pass an argument. Now let’s write inside the <code class=\"language-text\">router.onReady</code> event hook.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * @desc If there are no components connected to current router, by rejecting\n  * nodeJS stream's error event is called and separately written errorHandler will render 404 page.\n  */</span>\n  <span class=\"token keyword\">const</span> matchedComponents <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>matchedComponents<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">.</span>fullPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not found</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Seems roughly done. But my application is written to wait for asynchronous logic before proceeding with routing using a property called <code class=\"language-text\">asyncData</code>. I think Vue’s SSR library <code class=\"language-text\">Nuxt</code> also used a similar method, but I don’t quite remember this part.</p>\n<p>Anyway, if there’s a component having <code class=\"language-text\">asyncData</code> among the component list matched with the current route, it’s simple logic of making it wait using <code class=\"language-text\">Promise</code>, so I wrote it as follows using <code class=\"language-text\">Promise.all</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * @desc If there are no components connected to current router, render 404 page.\n  */</span>\n  <span class=\"token keyword\">const</span> matchedComponents <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>matchedComponents<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">.</span>fullPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not found</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// start: added part</span>\n  Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>matchedComponents<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Component<span class=\"token punctuation\">.</span>asyncData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Component<span class=\"token punctuation\">.</span><span class=\"token function\">asyncData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> router<span class=\"token punctuation\">.</span>currentRoute<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** @desc\n     * Pass state to context and use `template` option in renderer, and it serializes context.state and injects into HTML as `window.__INITIAL_STATE__`.\n     */</span>\n    context<span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// end: added part</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>And when all routing completes, if you contain store state in <code class=\"language-text\">context.state</code> like <code class=\"language-text\">context.state = store.state</code>, <code class=\"language-text\">vue-server-renderer</code> automatically injects state into <code class=\"language-text\">window.__INITIAL_STATE__</code>.</p>\n<h3 id=\"render-html-using-vue-server-renderer\" style=\"position:relative;\">Render HTML Using vue-server-renderer<a href=\"#render-html-using-vue-server-renderer\" aria-label=\"render html using vue server renderer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">stream\n<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">errorHandler</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">,</span> bugsnag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">render stream end ==============================</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> s<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">'================================================'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Thus when <code class=\"language-text\">Promise.resolve</code> is called in <code class=\"language-text\">server-entry.js</code> and initialization finishes, the stream’s <code class=\"language-text\">end</code> event declared earlier in <code class=\"language-text\">server.js</code> executes, then the chained <code class=\"language-text\">pipe</code> method executes.</p>\n<h3 id=\"server-responds-to-client\" style=\"position:relative;\">Server Responds to Client<a href=\"#server-responds-to-client\" aria-label=\"server responds to client permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>After going through the above process, transmits HTML that finished rendering to the client.</p>\n<h2 id=\"client-rendering\" style=\"position:relative;\">Client Rendering<a href=\"#client-rendering\" aria-label=\"client rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"code-classlanguage-textclient-entryjscode-executes\" style=\"position:relative;\"><code class=\"language-text\">client-entry.js</code> Executes<a href=\"#code-classlanguage-textclient-entryjscode-executes\" aria-label=\"code classlanguage textclient entryjscode executes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>After the client receives server-rendered HTML and entry.js, client rendering starts. At this time, the file Webpack catches as the client-side entry point when compiling is <code class=\"language-text\">client-entry.js</code>. First let’s look at the <code class=\"language-text\">init</code> function in the <code class=\"language-text\">client-entry.js</code> file.</p>\n<h3 id=\"client-application-initialization-function-executes\" style=\"position:relative;\">Client Application Initialization Function Executes<a href=\"#client-application-initialization-function-executes\" aria-label=\"client application initialization function executes permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">LOGIN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/** @desc Synchronize server store with client store */</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>__INITIAL_STATE__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    store<span class=\"token punctuation\">.</span><span class=\"token function\">replaceState</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>__INITIAL_STATE__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/** @desc Check token existence then process login  */</span>\n  <span class=\"token keyword\">const</span> hasToken <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>authToken<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LOGIN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Separate exception handling like deleting token in cookie</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Since it’s current workplace code, I couldn’t write everything, but the logic the <code class=\"language-text\">init</code> function performs is reflecting server store state to client and user authentication processing. Since the principle of receiving server store state was explained in <a href=\"/2018/09/25/vue-ssr/#code-classlanguage-textserver-entryjscode-execution\">server-entry.js execution</a>, this time I’ll try explaining “why process login on client instead of server.”</p>\n<p>The reason is because this server is a render server without separate authentication logic, so tasks like getting user information or checking authentication depend entirely on external API servers. Initially I overlooked this fact and chose the method of communicating with APIs during server rendering then sending user data down to clients, but the following problems occurred:</p>\n<hr>\n<ol>\n<li>API communication time was included in HTML template render time. <small>(Since server rendering’s lifecycle also ends when rendering finishes, you have no choice but to synchronously process API communication using the <code class=\"language-text\">await</code> keyword during rendering. Even the authenticated user information GET API is quite slow)</small></li>\n<li><code class=\"language-text\">vue-ssr-renderer</code>’s <code class=\"language-text\">render</code> method’s execution time increased.</li>\n<li>As <code class=\"language-text\">render</code> method’s execution time increased, more templates went up in memory at once.</li>\n<li>Memory fills up and can no longer perform rendering.</li>\n<li>Server cannot respond.</li>\n<li>Fail</li>\n</ol>\n<hr>\n<p>So the part I focused on most when building this render server was shortening the <code class=\"language-text\">render</code> method’s execution time, and as a result, logic fetching user data went down to the client. Thinking about it later, views needing currently authenticated user data are parts not needing SEO, so there was no need to do it on the server. Now let’s finally look at client routing.</p>\n<h3 id=\"clients-code-classlanguage-textvue-routercode-routing-proceeds\" style=\"position:relative;\">Client’s <code class=\"language-text\">vue-router</code> Routing Proceeds<a href=\"#clients-code-classlanguage-textvue-routercode-routing-proceeds\" aria-label=\"clients code classlanguage textvue routercode routing proceeds permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>In <code class=\"language-text\">client-entry.js</code>, the client-side global router is also declared together.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">LOGIN</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/stores/auth/config'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> app<span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  router<span class=\"token punctuation\">.</span><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">to<span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> matched <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> prevMatched <span class=\"token operator\">=</span> router<span class=\"token punctuation\">.</span><span class=\"token function\">getMatchedComponents</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> diffed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> activated <span class=\"token operator\">=</span> matched<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> diffed <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>diffed <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>prevMatched<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>activated<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>activated<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>asyncData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">asyncData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> store<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> to <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* LOADING INDICATOR */</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">$mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Actually the router part isn’t much different from the routing logic part in <code class=\"language-text\">sever-entry.js</code>. But one difference is that <code class=\"language-text\">client-entry.js</code>’s routing has logic comparing the current router’s components with the previous router’s components.</p>\n<p>Unlike server rendering where routing happens just once during the first request, client routing happens multiple times according to user actions. Client rendering only newly renders parts where components changed when the router changes and keeps the rest as is, so the next router may be using components that were in the current router as is.</p>\n<p>The important point is that on the client too, <code class=\"language-text\">asyncData</code> is being used to <code class=\"language-text\">fetch</code> data before routing completes, just like on the server.</p>\n<p>In other words, if a component existing in the current router also exists in the next router, there’s no need to perform duplicate logic in that component’s <code class=\"language-text\">asyncData</code>, so logic must be written to perform logic comparing components when the router changes, then only perform <code class=\"language-text\">asyncData</code> of changed components.</p>\n<h3 id=\"appmount---rendering-ends-vue-lifecycle-starts\" style=\"position:relative;\">app.$mount -> Rendering Ends. Vue Lifecycle Starts<a href=\"#appmount---rendering-ends-vue-lifecycle-starts\" aria-label=\"appmount   rendering ends vue lifecycle starts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Afterward, finally directly mounting the app to <code class=\"language-text\">#app</code> DOM starts the client-side Vue lifecycle. Lastly I’ll attach the <a href=\"https://github.com/evan-moon/vue-ssr-starter\" target=\"_blank\" rel=\"nofollow\">Github link</a> of this project boilerplate.</p>\n<p>That’s all for this Vue SSR post.</p>","fields":{"slug":"20180925-vue-ssr-en","path":"/2018/09/25/vue-ssr/en/","lang":"en"},"frontmatter":{"title":"Vue Server Side Rendering","subTitle":"Vue SSR Rendering Process and Practical Construction, Operation Experience","date":"Sep 25, 2018","categories":["Programming","JavaScript","Tutorial"],"tags":["Vue","NodeJS","Express","Server Side Rendering","SSR","Universal Server Side Rendering","Universal","NuxtJS","NextJS","SEO"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/d637d6583a105b27784921c410c1eb2d/3a812/vue.jpg","srcSet":"/static/d637d6583a105b27784921c410c1eb2d/3a812/vue.jpg 320w,\n/static/d637d6583a105b27784921c410c1eb2d/4b287/vue.jpg 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/d637d6583a105b27784921c410c1eb2d/fc5c5/vue.webp 320w,\n/static/d637d6583a105b27784921c410c1eb2d/e9225/vue.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/d637d6583a105b27784921c410c1eb2d/2d839/vue.jpg","srcSet":"/static/d637d6583a105b27784921c410c1eb2d/2d839/vue.jpg 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/d637d6583a105b27784921c410c1eb2d/b384d/vue.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}},{"node":{"id":"6b505001-1847-54c5-a64d-08b31826cdf1","tableOfContents":"<ul>\n<li><a href=\"#multi-page-application-performing-server-side-rendering\">Multi Page Application Performing Server Side Rendering</a></li>\n<li><a href=\"#single-page-application-performing-client-side-rendering\">Single Page Application Performing Client Side Rendering</a></li>\n<li><a href=\"#ssr-vs-spa\">SSR vs SPA</a></li>\n<li><a href=\"#emergence-of-new-concept-server-side-rendering\">Emergence of New Concept Server Side Rendering</a></li>\n</ul>","excerpt":"In this post I want to explain Universal SSR, widely used in recent modern web applications. I’ll briefly learn about SSR (Server Side Rendering) and SPA (Single Page Application) methods, then explain the Universal SSR method combining these two rendering methods.","html":"<p>In this post I want to explain Universal SSR, widely used in recent modern web applications. I’ll briefly learn about SSR (Server Side Rendering) and SPA (Single Page Application) methods, then explain the Universal SSR method combining these two rendering methods.</p>\n<!-- more -->\n<h2 id=\"multi-page-application-performing-server-side-rendering\" style=\"position:relative;\">Multi Page Application Performing Server Side Rendering<a href=\"#multi-page-application-performing-server-side-rendering\" aria-label=\"multi page application performing server side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>The SSR method is originally the method used in traditional web applications. Recently it’s also called MPA (Multi Page Application) in contrast to SPA (Single Page Application). SSR applications, after routing is performed, when new pages are requested from the server, render HTML each time and download entire pages again on clients.</p>\n<p>The rough execution order is as follows:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9052926c04e0b91148f091f6238be6c8/86a1e/ssr.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+klEQVR42p2S2a6DMAxE+f8fRMAz+w5iX3x1IhlRWnRpLVmZOM54Yscqy1IcxxHP86Sua9n3XZ7atm1SVZXYti2u6xpszfMsTdNI3/cCPts0TSaOD8Ng1q7rZF1Xc05x7hBr29ZgiwMAvizLC0Z9HMcSRZEkSWJwGIaGGHXksLIHYwchB1Q8+52N43goV/VvhHcEV3IKozzPcymKwqw8Wdv1L+GdnfPp6WOFn4zfQD/TNJUsy8xAGODPhNdeo04n/zUhA0EZU0cdGMWPe0hl/Uq47nmixsAvPSTA6LW56kyUKQZBYNz3/eMPkqv+RngmuPpZOfhTjt6F8A/UQK7TVvFzNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ssr\" title=\"\" src=\"/static/9052926c04e0b91148f091f6238be6c8/6af66/ssr.png\" srcset=\"/static/9052926c04e0b91148f091f6238be6c8/69538/ssr.png 160w,\n/static/9052926c04e0b91148f091f6238be6c8/72799/ssr.png 320w,\n/static/9052926c04e0b91148f091f6238be6c8/6af66/ssr.png 640w,\n/static/9052926c04e0b91148f091f6238be6c8/d9199/ssr.png 960w,\n/static/9052926c04e0b91148f091f6238be6c8/21b4d/ssr.png 1280w,\n/static/9052926c04e0b91148f091f6238be6c8/86a1e/ssr.png 1296w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<hr>\n<ol>\n<li>Client sends a request to the server with URL <code class=\"language-text\">example.com/products/12</code>.</li>\n<li>Server executes the method connected with that URL and finds appropriate HTML Template files.</li>\n<li>Get data for product number 12 from Database.</li>\n<li>Render final HTML using fetched data and HTML Template.</li>\n<li>Send HTML down to client.</li>\n<li>Finally users see the view.</li>\n</ol>\n<hr>\n<p>Even after users see the rendered page, they could additionally receive more data using Ajax, but since the point when users see the completed page is after step 6 finishes, exceptions like Ajax were omitted.</p>\n<p>Also, in step 2, you can see why this method’s applications are called MPA - because HTML Templates matched to each page exist separately.\nPros and cons of methods like this are as follows:</p>\n<h4 id=\"advantages\" style=\"position:relative;\">Advantages<a href=\"#advantages\" aria-label=\"advantages permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>Since completed HTML is sent down from the server, it’s optimized for SEO (Search Engine Optimization).</li>\n<li>Since only resources needed on each page are loaded, initial loading speed can be optimized.</li>\n</ul>\n<h4 id=\"disadvantages\" style=\"position:relative;\">Disadvantages<a href=\"#disadvantages\" aria-label=\"disadvantages permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>New resources must be requested every page loading, so overall traffic increases.</li>\n<li>Refreshes occur every page move and entire pages are re-rendered, so loading time lengthens.</li>\n</ul>\n<h2 id=\"single-page-application-performing-client-side-rendering\" style=\"position:relative;\">Single Page Application Performing Client Side Rendering<a href=\"#single-page-application-performing-client-side-rendering\" aria-label=\"single page application performing client side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Recently many Frontend developers develop A.K.A SPAs (Single Page Applications) performing Client Side Rendering. In other words, it means applications where pages actually downloaded from servers are just 1, and afterward perform dynamic rendering through JavaScript.</p>\n<p>The rough execution order is as follows:</p>\n<center>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f7c73717983bb1dd64d902e6c3334943/01a87/csr.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRElEQVR42p2T246DMAxE+f/vQzzwwBMUKJSKS7kV6upEcpQCu0s30ogoccZje/Cu16v4vi9RFEnTNPLtqutawjCUIAgkz3Px+r6XsiylbVuZ5/kjeFkWeT6fBu5+XVcbM02TEXK73QQuTw81GFLAnkRpmkqSJCY7+ziOjSrueUeiYRhkHEeTwBK+Xq9D8IBgBeqOYrQ6Q4hUsrhlaZmUgzp6DVS9C84QZQnJfBSIGu4gBdpnErnQ8i0h6rRsSIAqhASFRVEYhSQ4pfDxeFh0XWcCzy6EfPQQhff7XaqqMl8soBn/Rbidsp5dLhfJssx+1TYkdHtI7K5kDtSDW+gDN0bJdHCHPjxTGotBoZghMSyMTtt2ttnaQQ2rE+ahOmA75Q+FvxECjM/k1fx/+pAHNFr9xrS/Wbsp61+xnfRPPTw6RymEb4ZY5cKFHVMWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"csr\" title=\"\" src=\"/static/f7c73717983bb1dd64d902e6c3334943/6af66/csr.png\" srcset=\"/static/f7c73717983bb1dd64d902e6c3334943/69538/csr.png 160w,\n/static/f7c73717983bb1dd64d902e6c3334943/72799/csr.png 320w,\n/static/f7c73717983bb1dd64d902e6c3334943/6af66/csr.png 640w,\n/static/f7c73717983bb1dd64d902e6c3334943/d9199/csr.png 960w,\n/static/f7c73717983bb1dd64d902e6c3334943/21b4d/csr.png 1280w,\n/static/f7c73717983bb1dd64d902e6c3334943/01a87/csr.png 1288w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</center>\n<hr>\n<ol>\n<li>Client sends a request to the server with URL <code class=\"language-text\">example.com/products/12</code>.</li>\n<li>Server, whatever it is, if request URL starts with <code class=\"language-text\">exmplate.com</code>, finds and sends down <code class=\"language-text\">index.html</code>.</li>\n<li>And additionally sends down JavaScript Bundle together. For example, it would be files like <code class=\"language-text\">bundle.js</code> that come out when building with modulers like Webpack.</li>\n<li>Client executing <code class=\"language-text\">bundle.js</code> requests product number 12’s data from server using API <code class=\"language-text\">api.example.com/products/12</code>.</li>\n<li>Server gets product number 12’s data from Database then sends data down to client.</li>\n<li>Client renders views using received data.</li>\n<li>Finally users see the view.</li>\n</ol>\n<hr>\n<p>It got kind of complicated compared to earlier. The reason this method is SPA is in step 2. Usually that url is declared in settings of server engines like Nginx or Apache, and if requests come to urls matching conditions, they find and send <code class=\"language-text\">index.html</code> files. Whatever url it is, if it matches conditions, only one <code class=\"language-text\">index.html</code> is sent, so it’s called Single Page.</p>\n<p>And since clients currently don’t have product number 12’s data, they must additionally make API calls to receive product number 12’s data.</p>\n<p>Then let’s also look at SPA’s pros and cons.</p>\n<h4 id=\"advantages-1\" style=\"position:relative;\">Advantages<a href=\"#advantages-1\" aria-label=\"advantages 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>After downloading all static resources from the server during initial loading, only necessary data is downloaded during page moves, so loading speed is fast and overall traffic can be reduced.</li>\n<li>Since refreshes don’t occur during page moves, user experience (UX) improves.</li>\n</ul>\n<h4 id=\"disadvantages-1\" style=\"position:relative;\">Disadvantages<a href=\"#disadvantages-1\" aria-label=\"disadvantages 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>During initial loading, all static resources not used on current page are received, so initial loading speed is slow.</li>\n<li>Vulnerable to SEO.</li>\n</ul>\n<h2 id=\"ssr-vs-spa\" style=\"position:relative;\">SSR vs SPA<a href=\"#ssr-vs-spa\" aria-label=\"ssr vs spa permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>We’ve looked at rough execution flows and pros and cons of each method. Both SSR and SPA methods have pros and cons of loading speed. What’s different?</p>\n<p>SSR’s advantage is initial loading speed. SPA downloads all static resources used in the entire application during first loading, so initial loading speed is slow, but afterward there’s no need to additionally download resources, so operating speed afterward is fast.</p>\n<p>On the other hand, SSR only needs to load resources needed on current pages, so initial loading speed can be faster compared to SPA. However, since received static resources aren’t stored somewhere, even resources received on previous pages must be received from scratch again whenever pages move.</p>\n<p>So loading time during page moves after application initialization can be slower in SSR.</p>\n<p>But SPA method’s tremendous disadvantage is exactly SEO. SEO is abbreviation for Search Engine Optimization, meaning search engine optimization as directly translated.</p>\n<p>Search engines are basically based on crawling and collecting pages. The problem is that bots doing crawling don’t have ability to execute JavaScript.</p>\n<p>Recently cases like Google crawler are said to have JavaScript execution ability, but personally I see it as not yet trustworthy to that degree. Moreover, when sharing pages on SNS like Facebook, crawlers must read Open Graph tags for shared site information to display correctly. When crawlers read pages where JavaScript didn’t execute, there’s just blank pages, so there were problems of not properly displaying information.</p>\n<p>I also tried methods like <code class=\"language-text\">#!</code> (hashbang), <code class=\"language-text\">_esacped_fragment_</code>, or <code class=\"language-text\">Pre rendering</code> to solve this problem, but even writing applications as recommended by search engine companies, compared to SSR methods, they couldn’t help not properly scraping data.</p>\n<h2 id=\"emergence-of-new-concept-server-side-rendering\" style=\"position:relative;\">Emergence of New Concept Server Side Rendering<a href=\"#emergence-of-new-concept-server-side-rendering\" aria-label=\"emergence of new concept server side rendering permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Choose SSR and SPA’s advantages are wasteful. Choose SPA and SSR’s advantages are wasteful. Then what should we do? So the method that came out is the method appropriately mixing both methods widely used recently.\nPerform SSR only during users’ first requests, and afterward perform dynamic rendering like SPAs. This method has advantages like below:</p>\n<h4 id=\"advantages-2\" style=\"position:relative;\">Advantages<a href=\"#advantages-2\" aria-label=\"advantages 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<hr>\n<ol>\n<li>Solve SEO and initial rendering speed problems by sending down completed HTML with SSR for first requests</li>\n<li>Also bring SPA’s advantage of fast render speed during page moves by performing rendering on client afterward</li>\n<li>Since all 3 major Frontend frameworks Angular, React, Vue officially support such SSR methods, Client and Server can be bound with same Context. In other words, components I made execute identically whether rendering on client or server.</li>\n</ol>\n<hr>\n<p>But all technologies have Trade-offs… what are the disadvantages?</p>\n<h4 id=\"disadvantages-2\" style=\"position:relative;\">Disadvantages<a href=\"#disadvantages-2\" aria-label=\"disadvantages 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<hr>\n<ol>\n<li>Code is complex. If you don’t clearly understand application operation order, it’s really confusing.</li>\n<li>Since rendering is performed on server, more CPU is used compared to simple resource serving, and load can be placed.</li>\n<li>For Frontend developers unfamiliar with servers, if development proceeds like clients, unintended bugs can occur.</li>\n</ol>\n<hr>\n<p>Especially cases like #2 and #3 were parts I overlooked. Parts that had no problems on clients became fatal mistakes on servers and came back as bugs.</p>\n<p>In the <a href=\"/2018/09/25/vue-ssr\">next post</a>, I want to write about and reflect on my experience introducing Vue-ssr at work and what mistakes I made.</p>\n<p>That’s all for this post on What is Universal Server Side Rendering?</p>","fields":{"slug":"20180925-universal-ssr-en","path":"/2018/09/25/universal-ssr/en/","lang":"en"},"frontmatter":{"title":"What is Universal Server Side Rendering?","subTitle":"Rendering Technique Capturing Both SEO Optimization and Performance","date":"Sep 25, 2018","categories":["Programming","Web","Tutorial"],"tags":["SPA","Single Page Application","SSR","Server Side Rendering","Universal Server Side Rendering","NextJS","NuxtJS","SEO"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","images":{"fallback":{"src":"/static/101302650c27400e337e88ad4e0633a6/d803c/thumbnail.png","srcSet":"/static/101302650c27400e337e88ad4e0633a6/d803c/thumbnail.png 320w,\n/static/101302650c27400e337e88ad4e0633a6/2a1fd/thumbnail.png 750w","sizes":"(min-width: 320px) 320px, 100vw"},"sources":[{"srcSet":"/static/101302650c27400e337e88ad4e0633a6/fc5c5/thumbnail.webp 320w,\n/static/101302650c27400e337e88ad4e0633a6/e9225/thumbnail.webp 750w","type":"image/webp","sizes":"(min-width: 320px) 320px, 100vw"}]},"width":320,"height":320}}},"jumbotron":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/101302650c27400e337e88ad4e0633a6/01fb2/thumbnail.png","srcSet":"/static/101302650c27400e337e88ad4e0633a6/01fb2/thumbnail.png 750w","sizes":"100vw"},"sources":[{"srcSet":"/static/101302650c27400e337e88ad4e0633a6/b384d/thumbnail.webp 750w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}}}}}],"pageInfo":{"currentPage":6,"pageCount":7}}},"pageContext":{"limit":15,"skip":75,"lang":"en","totalCount":97}},"staticQueryHashes":["3523904809","650499039"],"slicesMap":{}}